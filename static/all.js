(function(){var a=this,b=Object.prototype,c=b.toString,d=!0,e={toString:1},f;typeof Ext=="undefined"&&(a.Ext={}),Ext.global=a;for(f in e)d=null;d&&(d=["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"]),Ext.enumerables=d,Ext.apply=function(a,b,c){c&&Ext.apply(a,c);if(a&&b&&typeof b=="object"){var e,f,g;for(e in b)a[e]=b[e];if(d)for(f=d.length;f--;)g=d[f],b.hasOwnProperty(g)&&(a[g]=b[g])}return a},Ext.buildSettings=Ext.apply({baseCSSPrefix:"x-",scopeResetCSS:!1},Ext.buildSettings||{}),Ext.apply(Ext,{emptyFn:function(){},baseCSSPrefix:Ext.buildSettings.baseCSSPrefix,applyIf:function(a,b){var c;if(a)for(c in b)a[c]===undefined&&(a[c]=b[c]);return a},iterate:function(a,b,c){if(Ext.isEmpty(a))return;c===undefined&&(c=a),Ext.isIterable(a)?Ext.Array.each.call(Ext.Array,a,b,c):Ext.Object.each.call(Ext.Object,a,b,c)}}),Ext.apply(Ext,{extend:function(){var a=b.constructor,c=function(a){for(var b in a){if(!a.hasOwnProperty(b))continue;this[b]=a[b]}};return function(b,d,e){Ext.isObject(d)&&(e=d,d=b,b=e.constructor!==a?e.constructor:function(){d.apply(this,arguments)});var f=function(){},g,j=d.prototype;return f.prototype=j,g=b.prototype=new f,g.constructor=b,b.superclass=j,j.constructor===a&&(j.constructor=d),b.override=function(a){Ext.override(b,a)},g.override=c,g.proto=g,b.override(e),b.extend=function(a){return Ext.extend(b,a)},b}}(),override:function(a,b){if(a.prototype.$className)return a.override(b);Ext.apply(a.prototype,b)}}),Ext.apply(Ext,{valueFrom:function(a,b,c){return Ext.isEmpty(a,c)?b:a},typeOf:function(a){if(a===null)return"null";var b=typeof a;if(b==="undefined"||b==="string"||b==="number"||b==="boolean")return b;var d=c.call(a);switch(d){case"[object Array]":return"array";case"[object Date]":return"date";case"[object Boolean]":return"boolean";case"[object Number]":return"number";case"[object RegExp]":return"regexp"}if(b==="function")return"function";if(b==="object")return a.nodeType!==undefined?a.nodeType===3?/\S/.test(a.nodeValue)?"textnode":"whitespace":"element":"object"},isEmpty:function(a,b){return a===null||a===undefined||(b?!1:a==="")||Ext.isArray(a)&&a.length===0},isArray:"isArray"in Array?Array.isArray:function(a){return c.call(a)==="[object Array]"},isDate:function(a){return c.call(a)==="[object Date]"},isObject:c.call(null)==="[object Object]"?function(a){return a!==null&&a!==undefined&&c.call(a)==="[object Object]"&&a.ownerDocument===undefined}:function(a){return c.call(a)==="[object Object]"},isPrimitive:function(a){var b=typeof a;return b==="string"||b==="number"||b==="boolean"},isFunction:typeof document!="undefined"&&typeof document.getElementsByTagName("body")=="function"?function(a){return c.call(a)==="[object Function]"}:function(a){return typeof a=="function"},isNumber:function(a){return typeof a=="number"&&isFinite(a)},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},isString:function(a){return typeof a=="string"},isBoolean:function(a){return typeof a=="boolean"},isElement:function(a){return a?a.nodeType===1:!1},isTextNode:function(a){return a?a.nodeName==="#text":!1},isDefined:function(a){return typeof a!="undefined"},isIterable:function(a){return a&&typeof a!="string"?a.length!==undefined:!1}}),Ext.apply(Ext,{clone:function(a){if(a===null||a===undefined)return a;if(a.nodeType&&a.cloneNode)return a.cloneNode(!0);var b=c.call(a);if(b==="[object Date]")return new Date(a.getTime());var e,f,h,i,j;if(b==="[object Array]"){e=a.length,i=[];while(e--)i[e]=Ext.clone(a[e])}else if(b==="[object Object]"&&a.constructor===Object){i={};for(j in a)i[j]=Ext.clone(a[j]);if(d)for(f=d.length;f--;)h=d[f],i[h]=a[h]}return i||a},getUniqueGlobalNamespace:function(){var a=this.uniqueGlobalNamespace;if(a===undefined){var b=0;do a="ExtBox"+ ++b;while(Ext.global[a]!==undefined);Ext.global[a]=Ext,this.uniqueGlobalNamespace=a}return a},functionFactory:function(){var a=Array.prototype.slice.call(arguments);return a.length>0&&(a[a.length-1]="var Ext=window."+this.getUniqueGlobalNamespace()+";"+a[a.length-1]),Function.prototype.constructor.apply(Function.prototype,a)}}),Ext.type=Ext.typeOf})(),function(){var a="4.0.7",b;Ext.Version=b=Ext.extend(Object,{constructor:function(a){var c,d;return a instanceof b?a:(this.version=this.shortVersion=String(a).toLowerCase().replace(/_/g,".").replace(/[\-+]/g,""),d=this.version.search(/([^\d\.])/),d!==-1&&(this.release=this.version.substr(d,a.length),this.shortVersion=this.version.substr(0,d)),this.shortVersion=this.shortVersion.replace(/[^\d]/g,""),c=this.version.split("."),this.major=parseInt(c.shift()||0,10),this.minor=parseInt(c.shift()||0,10),this.patch=parseInt(c.shift()||0,10),this.build=parseInt(c.shift()||0,10),this)},toString:function(){return this.version},valueOf:function(){return this.version},getMajor:function(){return this.major||0},getMinor:function(){return this.minor||0},getPatch:function(){return this.patch||0},getBuild:function(){return this.build||0},getRelease:function(){return this.release||""},isGreaterThan:function(a){return b.compare(this.version,a)===1},isLessThan:function(a){return b.compare(this.version,a)===-1},equals:function(a){return b.compare(this.version,a)===0},match:function(a){return a=String(a),this.version.substr(0,a.length)===a},toArray:function(){return[this.getMajor(),this.getMinor(),this.getPatch(),this.getBuild(),this.getRelease()]},getShortVersion:function(){return this.shortVersion}}),Ext.apply(b,{releaseValueMap:{dev:-6,alpha:-5,a:-5,beta:-4,b:-4,rc:-3,"#":-2,p:-1,pl:-1},getComponentValue:function(a){return a?isNaN(a)?this.releaseValueMap[a]||a:parseInt(a,10):0},compare:function(a,c){var d,e,f;a=(new b(a)).toArray(),c=(new b(c)).toArray();for(f=0;f<Math.max(a.length,c.length);f++){d=this.getComponentValue(a[f]),e=this.getComponentValue(c[f]);if(d<e)return-1;if(d>e)return 1}return 0}}),Ext.apply(Ext,{versions:{},lastRegisteredVersion:null,setVersion:function(a,c){return Ext.versions[a]=new b(c),Ext.lastRegisteredVersion=Ext.versions[a],this},getVersion:function(a){return a===undefined?Ext.lastRegisteredVersion:Ext.versions[a]},deprecate:function(a,c,d,e){b.compare(Ext.getVersion(a),c)<1&&d.call(e)}}),Ext.setVersion("core",a)}(),Ext.String={trimRegex:/^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g,escapeRe:/('|\\)/g,formatRe:/\{(\d+)\}/g,escapeRegexRe:/([-.*+?^${}()|[\]\/\\])/g,htmlEncode:function(){var a={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;"},b=[],c,d;for(c in a)b.push(c);return d=new RegExp("("+b.join("|")+")","g"),function(b){return b?String(b).replace(d,function(b,c){return a[c]}):b}}(),htmlDecode:function(){var a={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"'},b=[],c,d;for(c in a)b.push(c);return d=new RegExp("("+b.join("|")+"|&#[0-9]{1,5};)","g"),function(b){return b?String(b).replace(d,function(b,c){return c in a?a[c]:String.fromCharCode(parseInt(c.substr(2),10))}):b}}(),urlAppend:function(a,b){return Ext.isEmpty(b)?a:a+(a.indexOf("?")===-1?"?":"&")+b},trim:function(a){return a.replace(Ext.String.trimRegex,"")},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substr(1)},ellipsis:function(a,b,c){if(a&&a.length>b){if(c){var d=a.substr(0,b-2),e=Math.max(d.lastIndexOf(" "),d.lastIndexOf("."),d.lastIndexOf("!"),d.lastIndexOf("?"));if(e!==-1&&e>=b-15)return d.substr(0,e)+"..."}return a.substr(0,b-3)+"..."}return a},escapeRegex:function(a){return a.replace(Ext.String.escapeRegexRe,"\\$1")},escape:function(a){return a.replace(Ext.String.escapeRe,"\\$1")},toggle:function(a,b,c){return a===b?c:b},leftPad:function(a,b,c){var d=String(a);c=c||" ";while(d.length<b)d=c+d;return d},format:function(a){var b=Ext.Array.toArray(arguments,1);return a.replace(Ext.String.formatRe,function(a,c){return b[c]})},repeat:function(a,b,c){for(var d=[],e=b;e--;)d.push(a);return d.join(c||"")}},function(){var a=.9.toFixed()!=="1";Ext.Number={constrain:function(a,b,c){return a=parseFloat(a),isNaN(b)||(a=Math.max(a,b)),isNaN(c)||(a=Math.min(a,c)),a},snap:function(a,b,c,d){var e=a,f;return!b||!a?a:(f=a%b,f!==0&&(e-=f,f*2>=b?e+=b:f*2<-b&&(e-=b)),Ext.Number.constrain(e,c,d))},toFixed:function(b,c){if(a){c=c||0;var d=Math.pow(10,c);return(Math.round(b*d)/d).toFixed(c)}return b.toFixed(c)},from:function(a,b){return isFinite(a)&&(a=parseFloat(a)),isNaN(a)?b:a}}}(),Ext.num=function(){return Ext.Number.from.apply(this,arguments)},function(){function n(a,b){return b<0?Math.max(0,a.length+b):Math.min(a.length,b)}function o(a,b,c,d){var e=d?d.length:0,f=a.length,g=n(a,b);if(g===f)e&&a.push.apply(a,d);else{var h=Math.min(c,f-g),i=g+h,j=i+e-h,k=f-i,l=f-h,m;if(j<i)for(m=0;m<k;++m)a[j+m]=a[i+m];else if(j>i)for(m=k;m--;)a[j+m]=a[i+m];if(e&&g===l)a.length=l,a.push.apply(a,d);else{a.length=l+e;for(m=0;m<e;++m)a[g+m]=d[m]}}return a}function p(a,b,c,d){return d&&d.length?b<a.length?a.splice.apply(a,[b,c].concat(d)):a.push.apply(a,d):a.splice(b,c),a}function q(a,b,c){return o(a,b,c)}function r(a,b,c){return a.splice(b,c),a}function s(a,c,d){var e=n(a,c),f=a.slice(c,n(a,e+d));return arguments.length<4?o(a,e,d):o(a,e,d,b.call(arguments,3)),f}function t(a){return a.splice.apply(a,b.call(arguments,1))}var a=Array.prototype,b=a.slice,c=function(){var a=[],b,c=20;if(!a.splice)return!1;while(c--)a.push("A");return a.splice(15,0,"F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F"),b=a.length,a.splice(13,0,"XXX"),b+1!=a.length?!1:!0}(),d="forEach"in a,e="map"in a,f="indexOf"in a,g="every"in a,h="some"in a,i="filter"in a,j=function(){var a=[1,2,3,4,5].sort(function(){return 0});return a[0]===1&&a[1]===2&&a[2]===3&&a[3]===4&&a[4]===5}(),k=!0,l;try{typeof document!="undefined"&&b.call(document.getElementsByTagName("body"))}catch(m){k=!1}var u=c?r:q,v=c?p:o,w=c?t:s;l=Ext.Array={each:function(a,b,c,d){a=l.from(a);var e,f=a.length;if(d!==!0){for(e=0;e<f;e++)if(b.call(c||a[e],a[e],e,a)===!1)return e}else for(e=f-1;e>-1;e--)if(b.call(c||a[e],a[e],e,a)===!1)return e;return!0},forEach:function(a,b,c){if(d)return a.forEach(b,c);var e=0,f=a.length;for(;e<f;e++)b.call(c,a[e],e,a)},indexOf:function(a,b,c){if(f)return a.indexOf(b,c);var d,e=a.length;for(d=c<0?Math.max(0,e+c):c||0;d<e;d++)if(a[d]===b)return d;return-1},contains:function(a,b){if(f)return a.indexOf(b)!==-1;var c,d;for(c=0,d=a.length;c<d;c++)if(a[c]===b)return!0;return!1},toArray:function(a,c,d){if(!a||!a.length)return[];typeof a=="string"&&(a=a.split(""));if(k)return b.call(a,c||0,d||a.length);var e=[],f;c=c||0,d=d?d<0?a.length+d:d:a.length;for(f=c;f<d;f++)e.push(a[f]);return e},pluck:function(a,b){var c=[],d,e,f;for(d=0,e=a.length;d<e;d++)f=a[d],c.push(f[b]);return c},map:function(a,b,c){if(e)return a.map(b,c);var d=[],f=0,g=a.length;for(;f<g;f++)d[f]=b.call(c,a[f],f,a);return d},every:function(a,b,c){if(g)return a.every(b,c);var d=0,e=a.length;for(;d<e;++d)if(!b.call(c,a[d],d,a))return!1;return!0},some:function(a,b,c){if(h)return a.some(b,c);var d=0,e=a.length;for(;d<e;++d)if(b.call(c,a[d],d,a))return!0;return!1},clean:function(a){var b=[],c=0,d=a.length,e;for(;c<d;c++)e=a[c],Ext.isEmpty(e)||b.push(e);return b},unique:function(a){var b=[],c=0,d=a.length,e;for(;c<d;c++)e=a[c],l.indexOf(b,e)===-1&&b.push(e);return b},filter:function(a,b,c){if(i)return a.filter(b,c);var d=[],e=0,f=a.length;for(;e<f;e++)b.call(c,a[e],e,a)&&d.push(a[e]);return d},from:function(a,c){return a===undefined||a===null?[]:Ext.isArray(a)?c?b.call(a):a:a&&a.length!==undefined&&typeof a!="string"?Ext.toArray(a):[a]},remove:function(a,b){var c=l.indexOf(a,b);return c!==-1&&u(a,c,1),a},include:function(a,b){l.contains(a,b)||a.push(b)},clone:function(a){return b.call(a)},merge:function(){var a=b.call(arguments),c=[],d,e;for(d=0,e=a.length;d<e;d++)c=c.concat(a[d]);return l.unique(c)},intersect:function(){var a=[],c=b.call(arguments),d,e,f,g,h,i,j,k,m,n;if(!c.length)return a;for(d=i=0,k=c.length;d<k,h=c[d];d++)if(!g||h.length<g.length)g=h,i=d;g=l.unique(g),u(c,i,1);for(d=0,k=g.length;d<k,i=g[d];d++){var o=0;for(e=0,m=c.length;e<m,h=c[e];e++)for(f=0,n=h.length;f<n,j=h[f];f++)if(i===j){o++;break}o===m&&a.push(i)}return a},difference:function(a,c){var d=b.call(a),e=d.length,f,g,h;for(f=0,h=c.length;f<h;f++)for(g=0;g<e;g++)d[g]===c[f]&&(u(d,g,1),g--,e--);return d},slice:[1,2].slice(1,undefined).length?function(a,c,d){return b.call(a,c,d)}:function(a,c,d){return typeof c=="undefined"?b.call(a):typeof d=="undefined"?b.call(a,c):b.call(a,c,d)},sort:function(a,b){if(j)return b?a.sort(b):a.sort();var c=a.length,d=0,e,f,g,h;for(;d<c;d++){g=d;for(f=d+1;f<c;f++)b?(e=b(a[f],a[g]),e<0&&(g=f)):a[f]<a[g]&&(g=f);g!==d&&(h=a[d],a[d]=a[g],a[g]=h)}return a},flatten:function(a){function c(a){var d,e,f;for(d=0,e=a.length;d<e;d++)f=a[d],Ext.isArray(f)?c(f):b.push(f);return b}var b=[];return c(a)},min:function(a,b){var c=a[0],d,e,f;for(d=0,e=a.length;d<e;d++)f=a[d],b?b(c,f)===1&&(c=f):f<c&&(c=f);return c},max:function(a,b){var c=a[0],d,e,f;for(d=0,e=a.length;d<e;d++)f=a[d],b?b(c,f)===-1&&(c=f):f>c&&(c=f);return c},mean:function(a){return a.length>0?l.sum(a)/a.length:undefined},sum:function(a){var b=0,c,d,e;for(c=0,d=a.length;c<d;c++)e=a[c],b+=e;return b},erase:u,insert:function(a,b,c){return v(a,b,0,c)},replace:v,splice:w},Ext.each=l.each,l.union=l.merge,Ext.min=l.min,Ext.max=l.max,Ext.sum=l.sum,Ext.mean=l.mean,Ext.flatten=l.flatten,Ext.clean=l.clean,Ext.unique=l.unique,Ext.pluck=l.pluck,Ext.toArray=function(){return l.toArray.apply(l,arguments)}}(),Ext.Function={flexSetter:function(a){return function(b,c){var d,e;if(b===null)return this;if(typeof b!="string"){for(d in b)b.hasOwnProperty(d)&&a.call(this,d,b[d]);if(Ext.enumerables)for(e=Ext.enumerables.length;e--;)d=Ext.enumerables[e],b.hasOwnProperty(d)&&a.call(this,d,b[d])}else a.call(this,b,c);return this}},bind:function(a,b,c,d){if(arguments.length===2)return function(){return a.apply(b,arguments)};var e=a,f=Array.prototype.slice;return function(){var a=c||arguments;return d===!0?(a=f.call(arguments,0),a=a.concat(c)):typeof d=="number"&&(a=f.call(arguments,0),Ext.Array.insert(a,d,c)),e.apply(b||window,a)}},pass:function(a,b,c){return b&&(b=Ext.Array.from(b)),function(){return a.apply(c,b.concat(Ext.Array.toArray(arguments)))}},alias:function(a,b){return function(){return a[b].apply(a,arguments)}},createInterceptor:function(a,b,c,d){var e=a;return Ext.isFunction(b)?function(){var e=this,f=arguments;return b.target=e,b.method=a,b.apply(c||e||window,f)!==!1?a.apply(e||window,f):d||null}:a},createDelayed:function(a,b,c,d,e){if(c||d)a=Ext.Function.bind(a,c,d,e);return function(){var c=this;setTimeout(function(){a.apply(c,arguments)},b)}},defer:function(a,b,c,d,e){return a=Ext.Function.bind(a,c,d,e),b>0?setTimeout(a,b):(a(),0)},createSequence:function(a,b,c){return Ext.isFunction(b)?function(){var d=a.apply(this||window,arguments);return b.apply(c||this||window,arguments),d}:a},createBuffered:function(a,b,c,d){return function(){var e;return function(){var f=this;e&&(clearTimeout(e),e=null),e=setTimeout(function(){a.apply(c||f,d||arguments)},b)}}()},createThrottled:function(a,b,c){var d,e,f,g,h=function(){a.apply(c||this,f),d=(new Date).getTime()};return function(){e=(new Date).getTime()-d,f=arguments,clearTimeout(g),!d||e>=b?h():g=setTimeout(h,b-e)}},interceptBefore:function(a,b,c){var d=a[b]||Ext.emptyFn;return a[b]=function(){var a=c.apply(this,arguments);return d.apply(this,arguments),a}},interceptAfter:function(a,b,c){var d=a[b]||Ext.emptyFn;return a[b]=function(){return d.apply(this,arguments),c.apply(this,arguments)}}},Ext.defer=Ext.Function.alias(Ext.Function,"defer"),Ext.pass=Ext.Function.alias(Ext.Function,"pass"),Ext.bind=Ext.Function.alias(Ext.Function,"bind"),function(){var a=Ext.Object={toQueryObjects:function(b,c,d){var e=a.toQueryObjects,f=[],g,h;if(Ext.isArray(c))for(g=0,h=c.length;g<h;g++)d?f=f.concat(e(b+"["+g+"]",c[g],!0)):f.push({name:b,value:c[g]});else if(Ext.isObject(c))for(g in c)c.hasOwnProperty(g)&&(d?f=f.concat(e(b+"["+g+"]",c[g],!0)):f.push({name:b,value:c[g]}));else f.push({name:b,value:c});return f},toQueryString:function(b,c){var d=[],e=[],f,g,h,i,j;for(f in b)b.hasOwnProperty(f)&&(d=d.concat(a.toQueryObjects(f,b[f],c)));for(g=0,h=d.length;g<h;g++)i=d[g],j=i.value,Ext.isEmpty(j)?j="":Ext.isDate(j)&&(j=Ext.Date.toString(j)),e.push(encodeURIComponent(i.name)+"="+encodeURIComponent(String(j)));return e.join("&")},fromQueryString:function(a,b){var c=a.replace(/^\?/,"").split("&"),d={},e,f,g,h,i,j,k,l,m,n,o,p,q,r;for(i=0,j=c.length;i<j;i++){k=c[i];if(k.length>0){f=k.split("="),g=decodeURIComponent(f[0]),h=f[1]!==undefined?decodeURIComponent(f[1]):"";if(!b)d.hasOwnProperty(g)?(Ext.isArray(d[g])||(d[g]=[d[g]]),d[g].push(h)):d[g]=h;else{n=g.match(/(\[):?([^\]]*)\]/g),o=g.match(/^([^\[]+)/),g=o[0],p=[];if(n===null){d[g]=h;continue}for(l=0,m=n.length;l<m;l++)q=n[l],q=q.length===2?"":q.substring(1,q.length-1),p.push(q);p.unshift(g),e=d;for(l=0,m=p.length;l<m;l++){q=p[l];if(l===m-1)Ext.isArray(e)&&q===""?e.push(h):e[q]=h;else{if(e[q]===undefined||typeof e[q]=="string")r=p[l+1],e[q]=Ext.isNumeric(r)||r===""?[]:{};e=e[q]}}}}}return d},each:function(a,b,c){for(var d in a)if(a.hasOwnProperty(d)&&b.call(c||a,d,a[d],a)===!1)return},merge:function(b,c,d){if(typeof c=="string")return d&&d.constructor===Object?b[c]&&b[c].constructor===Object?a.merge(b[c],d):b[c]=Ext.clone(d):b[c]=d,b;var e=1,f=arguments.length,g,h;for(;e<f;e++){g=arguments[e];for(h in g)g.hasOwnProperty(h)&&a.merge(b,h,g[h])}return b},getKey:function(a,b){for(var c in a)if(a.hasOwnProperty(c)&&a[c]===b)return c;return null},getValues:function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b},getKeys:"keys"in Object.prototype?Object.keys:function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b},getSize:function(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}};Ext.merge=Ext.Object.merge,Ext.urlEncode=function(){var a=Ext.Array.from(arguments),b="";return typeof a[1]=="string"&&(b=a[1]+"&",a[1]=!1),b+Ext.Object.toQueryString.apply(Ext.Object,a)},Ext.urlDecode=function(){return Ext.Object.fromQueryString.apply(Ext.Object,arguments)}}(),function(){function a(a){var b=Array.prototype.slice.call(arguments,1);return a.replace(/\{(\d+)\}/g,function(a,d){return b[d]})}Ext.Date={now:Date.now||function(){return+(new Date)},toString:function(a){var b=Ext.String.leftPad;return a.getFullYear()+"-"+b(a.getMonth()+1,2,"0")+"-"+b(a.getDate(),2,"0")+"T"+b(a.getHours(),2,"0")+":"+b(a.getMinutes(),2,"0")+":"+b(a.getSeconds(),2,"0")},getElapsed:function(a,b){return Math.abs(a-(b||new Date))},useStrict:!1,formatCodeToRegex:function(c,d){var e=b.parseCodes[c];return e&&(e=typeof e=="function"?e():e,b.parseCodes[c]=e),e?Ext.applyIf({c:e.c?a(e.c,d||"{0}"):e.c},e):{g:0,c:null,s:Ext.String.escapeRegex(c)}},parseFunctions:{MS:function(a,b){var c=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/"),d=(a||"").match(c);return d?new Date(((d[1]||"")+d[2])*1):null}},parseRegexes:[],formatFunctions:{MS:function(){return"\\/Date("+this.getTime()+")\\/"}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},defaultFormat:"m/d/Y",getShortMonthName:function(a){return b.monthNames[a].substring(0,3)},getShortDayName:function(a){return b.dayNames[a].substring(0,3)},getMonthNumber:function(a){return b.monthNumbers[a.substring(0,1).toUpperCase()+a.substring(1,3).toLowerCase()]},formatContainsHourInfo:function(){var a=/(\\.)/g,b=/([gGhHisucUOPZ]|MS)/;return function(e){return b.test(e.replace(a,""))}}(),formatContainsDateInfo:function(){var a=/(\\.)/g,b=/([djzmnYycU]|MS)/;return function(e){return b.test(e.replace(a,""))}}(),formatCodes:{d:"Ext.String.leftPad(this.getDate(), 2, '0')",D:"Ext.Date.getShortDayName(this.getDay())",j:"this.getDate()",l:"Ext.Date.dayNames[this.getDay()]",N:"(this.getDay() ? this.getDay() : 7)",S:"Ext.Date.getSuffix(this)",w:"this.getDay()",z:"Ext.Date.getDayOfYear(this)",W:"Ext.String.leftPad(Ext.Date.getWeekOfYear(this), 2, '0')",F:"Ext.Date.monthNames[this.getMonth()]",m:"Ext.String.leftPad(this.getMonth() + 1, 2, '0')",M:"Ext.Date.getShortMonthName(this.getMonth())",n:"(this.getMonth() + 1)",t:"Ext.Date.getDaysInMonth(this)",L:"(Ext.Date.isLeapYear(this) ? 1 : 0)",o:"(this.getFullYear() + (Ext.Date.getWeekOfYear(this) == 1 && this.getMonth() > 0 ? +1 : (Ext.Date.getWeekOfYear(this) >= 52 && this.getMonth() < 11 ? -1 : 0)))",Y:"Ext.String.leftPad(this.getFullYear(), 4, '0')",y:"('' + this.getFullYear()).substring(2, 4)",a:"(this.getHours() < 12 ? 'am' : 'pm')",A:"(this.getHours() < 12 ? 'AM' : 'PM')",g:"((this.getHours() % 12) ? this.getHours() % 12 : 12)",G:"this.getHours()",h:"Ext.String.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')",H:"Ext.String.leftPad(this.getHours(), 2, '0')",i:"Ext.String.leftPad(this.getMinutes(), 2, '0')",s:"Ext.String.leftPad(this.getSeconds(), 2, '0')",u:"Ext.String.leftPad(this.getMilliseconds(), 3, '0')",O:"Ext.Date.getGMTOffset(this)",P:"Ext.Date.getGMTOffset(this, true)",T:"Ext.Date.getTimezone(this)",Z:"(this.getTimezoneOffset() * -60)",c:function(){for(var a="Y-m-dTH:i:sP",c=[],d=0,e=a.length;d<e;++d){var f=a.charAt(d);c.push(f=="T"?"'T'":b.getFormatCode(f))}return c.join(" + ")},U:"Math.round(this.getTime() / 1000)"},isValid:function(a,c,d,e,f,g,h){e=e||0,f=f||0,g=g||0,h=h||0;var i=b.add(new Date(a<100?100:a,c-1,d,e,f,g,h),b.YEAR,a<100?a-100:0);return a==i.getFullYear()&&c==i.getMonth()+1&&d==i.getDate()&&e==i.getHours()&&f==i.getMinutes()&&g==i.getSeconds()&&h==i.getMilliseconds()},parse:function(a,c,d){var e=b.parseFunctions;return e[c]==null&&b.createParser(c),e[c](a,Ext.isDefined(d)?d:b.useStrict)},parseDate:function(a,c,d){return b.parse(a,c,d)},getFormatCode:function(a){var c=b.formatCodes[a];return c&&(c=typeof c=="function"?c():c,b.formatCodes[a]=c),c||"'"+Ext.String.escape(a)+"'"},createFormat:function(a){var c=[],d=!1,e="";for(var f=0;f<a.length;++f)e=a.charAt(f),!d&&e=="\\"?d=!0:d?(d=!1,c.push("'"+Ext.String.escape(e)+"'")):c.push(b.getFormatCode(e));b.formatFunctions[a]=Ext.functionFactory("return "+c.join("+"))},createParser:function(){var c=["var dt, y, m, d, h, i, s, ms, o, z, zz, u, v,","def = Ext.Date.defaults,","results = String(input).match(Ext.Date.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = Ext.Date.clearTime(new Date);","y = Ext.Number.from(y, Ext.Number.from(def.y, dt.getFullYear()));","m = Ext.Number.from(m, Ext.Number.from(def.m - 1, dt.getMonth()));","d = Ext.Number.from(d, Ext.Number.from(def.d, dt.getDate()));","h  = Ext.Number.from(h, Ext.Number.from(def.h, dt.getHours()));","i  = Ext.Number.from(i, Ext.Number.from(def.i, dt.getMinutes()));","s  = Ext.Number.from(s, Ext.Number.from(def.s, dt.getSeconds()));","ms = Ext.Number.from(ms, Ext.Number.from(def.ms, dt.getMilliseconds()));","if(z >= 0 && y >= 0){","v = Ext.Date.add(new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms), Ext.Date.YEAR, y < 100 ? y - 100 : 0);","v = !strict? v : (strict === true && (z <= 364 || (Ext.Date.isLeapYear(v) && z <= 365))? Ext.Date.add(v, Ext.Date.DAY, z) : null);","}else if(strict === true && !Ext.Date.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","v = Ext.Date.add(new Date(y < 100 ? 100 : y, m, d, h, i, s, ms), Ext.Date.YEAR, y < 100 ? y - 100 : 0);","}","}","}","if(v){","if(zz != null){","v = Ext.Date.add(v, Ext.Date.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = Ext.Date.add(v, Ext.Date.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return v;"].join("\n");return function(d){var e=b.parseRegexes.length,f=1,g=[],h=[],i=!1,j="";for(var k=0;k<d.length;++k){j=d.charAt(k);if(!i&&j=="\\")i=!0;else if(i)i=!1,h.push(Ext.String.escape(j));else{var l=b.formatCodeToRegex(j,f);f+=l.g,h.push(l.s),l.g&&l.c&&g.push(l.c)}}b.parseRegexes[e]=new RegExp("^"+h.join("")+"$","i"),b.parseFunctions[d]=Ext.functionFactory("input","strict",a(c,e,g.join("")))}}(),parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},D:function(){for(var a=[],c=0;c<7;a.push(b.getShortDayName(c)),++c);return{g:0,c:null,s:"(?:"+a.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+b.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:0,c:null,s:"(?:\\d{2})"},F:function(){return{g:1,c:"m = parseInt(Ext.Date.getMonthNumber(results[{0}]), 10);\n",s:"("+b.monthNames.join("|")+")"}},M:function(){for(var a=[],c=0;c<12;a.push(b.getShortMonthName(c)),++c);return Ext.applyIf({s:"("+a.join("|")+")"},b.formatCodeToRegex("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{2})"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{1,2})"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:function(){return b.formatCodeToRegex("Y")},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > Ext.Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"},a:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(am|pm|AM|PM)"},A:{g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(AM|PM|am|pm)"},g:function(){return b.formatCodeToRegex("G")},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},h:function(){return b.formatCodeToRegex("H")},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,4}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){var a=[],c=[b.formatCodeToRegex("Y",1),b.formatCodeToRegex("m",2),b.formatCodeToRegex("d",3),b.formatCodeToRegex("h",4),b.formatCodeToRegex("i",5),b.formatCodeToRegex("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {","if(results[8] == 'Z'){","zz = 0;","}else if (results[8].indexOf(':') > -1){",b.formatCodeToRegex("P",8).c,"}else{",b.formatCodeToRegex("O",8).c,"}","}"].join("\n")}];for(var d=0,e=c.length;d<e;++d)a.push(c[d].c);return{g:1,c:a.join(""),s:[c[0].s,"(?:","-",c[1].s,"(?:","-",c[2].s,"(?:","(?:T| )?",c[3].s,":",c[4].s,"(?::",c[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}},dateFormat:function(a,c){return b.format(a,c)},format:function(a,c){b.formatFunctions[c]==null&&b.createFormat(c);var d=b.formatFunctions[c].call(a);return d+""},getTimezone:function(a){return a.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,4})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(a,b){var c=a.getTimezoneOffset();return(c>0?"-":"+")+Ext.String.leftPad(Math.floor(Math.abs(c)/60),2,"0")+(b?":":"")+Ext.String.leftPad(Math.abs(c%60),2,"0")},getDayOfYear:function(a){var c=0,d=Ext.Date.clone(a),e=a.getMonth(),f;for(f=0,d.setDate(1),d.setMonth(0);f<e;d.setMonth(++f))c+=b.getDaysInMonth(d);return c+a.getDate()-1},getWeekOfYear:function(){var a=864e5,b=7*a;return function(e){var f=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()+3)/a,g=Math.floor(f/7),h=(new Date(g*b)).getUTCFullYear();return g-Math.floor(Date.UTC(h,0,7)/b)+1}}(),isLeapYear:function(a){var b=a.getFullYear();return(b&3)==0&&!!(b%100||b%400==0&&b)},getFirstDayOfMonth:function(a){var b=(a.getDay()-(a.getDate()-1))%7;return b<0?b+7:b},getLastDayOfMonth:function(a){return b.getLastDateOfMonth(a).getDay()},getFirstDateOfMonth:function(a){return new Date(a.getFullYear(),a.getMonth(),1)},getLastDateOfMonth:function(a){return new Date(a.getFullYear(),a.getMonth(),b.getDaysInMonth(a))},getDaysInMonth:function(){var a=[31,28,31,30,31,30,31,31,30,31,30,31];return function(d){var e=d.getMonth();return e==1&&b.isLeapYear(d)?29:a[e]}}(),getSuffix:function(a){switch(a.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(a){return new Date(a.getTime())},isDST:function(a){return(new Date(a.getFullYear(),0,1)).getTimezoneOffset()!=a.getTimezoneOffset()},clearTime:function(a,c){if(c)return Ext.Date.clearTime(Ext.Date.clone(a));var d=a.getDate();a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0);if(a.getDate()!=d){for(var e=1,f=b.add(a,Ext.Date.HOUR,e);f.getDate()!=d;e++,f=b.add(a,Ext.Date.HOUR,e));a.setDate(d),a.setHours(f.getHours())}return a},add:function(a,b,c){var d=Ext.Date.clone(a),e=Ext.Date;if(!b||c===0)return d;switch(b.toLowerCase()){case Ext.Date.MILLI:d.setMilliseconds(d.getMilliseconds()+c);break;case Ext.Date.SECOND:d.setSeconds(d.getSeconds()+c);break;case Ext.Date.MINUTE:d.setMinutes(d.getMinutes()+c);break;case Ext.Date.HOUR:d.setHours(d.getHours()+c);break;case Ext.Date.DAY:d.setDate(d.getDate()+c);break;case Ext.Date.MONTH:var f=a.getDate();f>28&&(f=Math.min(f,Ext.Date.getLastDateOfMonth(Ext.Date.add(Ext.Date.getFirstDateOfMonth(a),"mo",c)).getDate())),d.setDate(f),d.setMonth(a.getMonth()+c);break;case Ext.Date.YEAR:d.setFullYear(a.getFullYear()+c)}return d},between:function(a,b,c){var d=a.getTime();return b.getTime()<=d&&d<=c.getTime()},compat:function(){var a=window.Date,c,d,e=["useStrict","formatCodeToRegex","parseFunctions","parseRegexes","formatFunctions","y2kYear","MILLI","SECOND","MINUTE","HOUR","DAY","MONTH","YEAR","defaults","dayNames","monthNames","monthNumbers","getShortMonthName","getShortDayName","getMonthNumber","formatCodes","isValid","parseDate","getFormatCode","createFormat","createParser","parseCodes"],f=["dateFormat","format","getTimezone","getGMTOffset","getDayOfYear","getWeekOfYear","isLeapYear","getFirstDayOfMonth","getLastDayOfMonth","getDaysInMonth","getSuffix","clone","isDST","clearTime","add","between"];Ext.Array.forEach(e,function(c){a[c]=b[c]}),Ext.Array.forEach(f,function(c){a.prototype[c]=function(){var a=Array.prototype.slice.call(arguments);return a.unshift(this),b[c].apply(b,a)}})}};var b=Ext.Date}(),function(a){var b=Ext.Base=function(){};b.prototype={$className:"Ext.Base",$class:b,self:b,constructor:function(){return this},initConfig:function(a){return this.$configInited||(this.config=Ext.Object.merge({},this.config||{},a||{}),this.applyConfig(this.config),this.$configInited=!0),this},setConfig:function(a){return this.applyConfig(a||{}),this},applyConfig:a(function(a,b){var c="set"+Ext.String.capitalize(a);return typeof this[c]=="function"&&this[c].call(this,b),this}),callParent:function(a){var b=this.callParent.caller,c,d;return b.$owner||(b=b.caller),c=b.$owner.superclass,d=b.$name,c[d].apply(this,a||[])},statics:function(){var a=this.statics.caller,b=this.self;return a?a.$owner:b},callOverridden:function(a){var b=this.callOverridden.caller;return b.$previous.apply(this,a||[])},destroy:function(){}},Ext.apply(Ext.Base,{create:function(){return Ext.create.apply(Ext,[this].concat(Array.prototype.slice.call(arguments,0)))},own:function(a,b){typeof b=="function"?this.ownMethod(a,b):this.prototype[a]=b},ownMethod:function(a,b){var c;typeof b.$owner!="undefined"&&b!==Ext.emptyFn&&(c=b,b=function(){return c.apply(this,arguments)}),b.$owner=this,b.$name=a,this.prototype[a]=b},addStatics:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);return this},addInheritableStatics:function(a){var b,c,d=this.prototype,e,f;b=d.$inheritableStatics,c=d.$hasInheritableStatics,b||(b=d.$inheritableStatics=[],c=d.$hasInheritableStatics={});for(e in a)a.hasOwnProperty(e)&&(f=a[e],this[e]=f,c[e]||(c[e]=!0,b.push(e)));return this},implement:function(a){var b=this.prototype,c=Ext.enumerables,d,e,f;for(d in a)a.hasOwnProperty(d)&&(f=a[d],typeof f=="function"&&(f.$owner=this,f.$name=d),b[d]=f);if(c)for(e=c.length;e--;)d=c[e],a.hasOwnProperty(d)&&(f=a[d],f.$owner=this,f.$name=d,b[d]=f)},borrow:function(a,b){var c=a.prototype,d,e,f;b=Ext.Array.from(b);for(d=0,e=b.length;d<e;d++)f=b[d],this.own(f,c[f]);return this},override:function(a){var b=this.prototype,c=Ext.enumerables,d,e,f,g;if(arguments.length===2)return d=a,f=arguments[1],typeof f=="function"?(typeof b[d]=="function"&&(g=b[d],f.$previous=g),this.ownMethod(d,f)):b[d]=f,this;for(d in a)a.hasOwnProperty(d)&&(f=a[d],typeof f=="function"?(typeof b[d]=="function"&&(g=b[d],f.$previous=g),this.ownMethod(d,f)):b[d]=f);if(c)for(e=c.length;e--;)d=c[e],a.hasOwnProperty(d)&&(typeof b[d]!="undefined"&&(g=b[d],a[d].$previous=g),this.ownMethod(d,a[d]));return this},mixin:function(a,b){var c=b.prototype,d=this.prototype,e,f;for(e in c)c.hasOwnProperty(e)&&(typeof d[e]=="undefined"&&e!=="mixins"&&e!=="mixinId"?typeof c[e]=="function"?(f=c[e],typeof f.$owner=="undefined"?this.ownMethod(e,f):d[e]=f):d[e]=c[e]:e==="config"&&d.config&&c.config&&Ext.Object.merge(d.config,c.config));typeof c.onClassMixedIn!="undefined"&&c.onClassMixedIn.call(b,this),d.hasOwnProperty("mixins")||("mixins"in d?d.mixins=Ext.Object.merge({},d.mixins):d.mixins={}),d.mixins[a]=c},getName:function(){return Ext.getClassName(this)},createAlias:a(function(a,b){this.prototype[a]=function(){return this[b].apply(this,arguments)}})})}(Ext.Function.flexSetter),function(){var a,b=Ext.Base,c=[],d;for(d in b)b.hasOwnProperty(d)&&c.push(d);Ext.Class=a=function(d,e,f){typeof d!="function"&&(f=e,e=d,d=function(){return this.constructor.apply(this,arguments)}),e||(e={});var g=e.preprocessors||a.getDefaultPreprocessors(),h=a.getPreprocessors(),i=0,j=[],k,l,m,n,o,p;for(n=0,p=c.length;n<p;n++)l=c[n],d[l]=b[l];delete e.preprocessors;for(o=0,p=g.length;o<p;o++)k=g[o],typeof k=="string"?(k=h[k],k.always?j.push(k.fn):e.hasOwnProperty(k.name)&&j.push(k.fn)):j.push(k);return e.onClassCreated=f||Ext.emptyFn,e.onBeforeClassCreated=function(a,b){f=b.onClassCreated,delete b.onBeforeClassCreated,delete b.onClassCreated,a.implement(b),f.call(a,a)},m=function(a,b){k=j[i++];if(!k){b.onBeforeClassCreated.apply(this,arguments);return}k.call(this,a,b,m)!==!1&&m.apply(this,arguments)},m.call(a,d,e),d},Ext.apply(a,{preprocessors:{},registerPreprocessor:function(a,b,c){return this.preprocessors[a]={name:a,always:c||!1,fn:b},this},getPreprocessor:function(a){return this.preprocessors[a]},getPreprocessors:function(){return this.preprocessors},getDefaultPreprocessors:function(){return this.defaultPreprocessors||[]},setDefaultPreprocessors:function(a){return this.defaultPreprocessors=Ext.Array.from(a),this},setDefaultPreprocessorPosition:function(a,b,c){var d=this.defaultPreprocessors,e;if(typeof b=="string"){if(b==="first")return d.unshift(a),this;if(b==="last")return d.push(a),this;b=b==="after"?1:-1}return e=Ext.Array.indexOf(d,c),e!==-1&&Ext.Array.splice(d,Math.max(0,e+b),0,a),this}}),a.registerPreprocessor("extend",function(a,b){var c=b.extend,d=Ext.Base,e=d.prototype,f=function(){},g,h,i,j,k,l,m,n;c&&c!==Object?g=c:g=d,m=g.prototype,f.prototype=m,n=a.prototype=new f;if(!("$class"in g))for(h in e)m[h]||(m[h]=e[h]);n.self=a,a.superclass=n.superclass=m,delete b.extend,l=m.$inheritableStatics;if(l)for(i=0,j=l.length;i<j;i++)k=l[i],a.hasOwnProperty(k)||(a[k]=g[k]);m.config?n.config=Ext.Object.merge({},m.config):n.config={},n.$onExtended&&n.$onExtended.call(a,a,b),b.onClassExtended&&(n.$onExtended=b.onClassExtended,delete b.onClassExtended)},!0),a.registerPreprocessor("statics",function(a,b){a.addStatics(b.statics),delete b.statics}),a.registerPreprocessor("inheritableStatics",function(a,b){a.addInheritableStatics(b.inheritableStatics),delete b.inheritableStatics}),a.registerPreprocessor("config",function(a,b){var c=a.prototype;Ext.Object.each(b.config,function(a){var d=a.charAt(0).toUpperCase()+a.substr(1),e=a,f="apply"+d,i="set"+d,j="get"+d;!(f in c)&&!b.hasOwnProperty(f)&&(b[f]=function(a){return a}),!(i in c)&&!b.hasOwnProperty(i)&&(b[i]=function(a){var b=this[f].call(this,a,this[e]);return typeof b!="undefined"&&(this[e]=b),this}),!(j in c)&&!b.hasOwnProperty(j)&&(b[j]=function(){return this[e]})}),Ext.Object.merge(c.config,b.config),delete b.config}),a.registerPreprocessor("mixins",function(a,b){var c=b.mixins,d,e,f,g;delete b.mixins,Ext.Function.interceptBefore(b,"onClassCreated",function(a){if(c instanceof Array)for(f=0,g=c.length;f<g;f++)e=c[f],d=e.prototype.mixinId||e.$className,a.mixin(d,e);else for(d in c)c.hasOwnProperty(d)&&a.mixin(d,c[d])})}),a.setDefaultPreprocessors(["extend","statics","inheritableStatics","config","mixins"]),Ext.extend=function(b,c,d){arguments.length===2&&Ext.isObject(c)&&(d=c,c=b,b=null);var e;return c||Ext.Error.raise("Attempting to extend from a class which has not been loaded on the page."),d.extend=c,d.preprocessors=["extend","statics","inheritableStatics","mixins","config"],b?e=new a(b,d):e=new a(d),e.prototype.override=function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])},e}}(),function(a,b){var c=Array.prototype.slice,d=Ext.ClassManager={classes:{},existCache:{},namespaceRewrites:[{from:"Ext.",to:Ext}],maps:{alternateToName:{},aliasToName:{},nameToAliases:{}},enableNamespaceParseCache:!0,namespaceParseCache:{},instantiators:[],isCreated:function(a){var b,c,d,e,f;if(this.classes.hasOwnProperty(a)||this.existCache.hasOwnProperty(a))return!0;e=Ext.global,f=this.parseNamespace(a);for(b=0,c=f.length;b<c;b++){d=f[b];if(typeof d!="string")e=d;else{if(!e||!e[d])return!1;e=e[d]}}return Ext.Loader.historyPush(a),this.existCache[a]=!0,!0},parseNamespace:function(a){var b=this.namespaceParseCache;if(this.enableNamespaceParseCache&&b.hasOwnProperty(a))return b[a];var c=[],d=this.namespaceRewrites,e,f,g,h,i,j=Ext.global;for(h=0,i=d.length;h<i;h++){e=d[h],f=e.from,g=e.to;if(a===f||a.substring(0,f.length)===f){a=a.substring(f.length),typeof g!="string"?j=g:c=c.concat(g.split("."));break}}return c.push(j),c=c.concat(a.split(".")),this.enableNamespaceParseCache&&(b[a]=c),c},setNamespace:function(a,b){var c=Ext.global,d=this.parseNamespace(a),e=d.length-1,f=d[e],g,h;for(g=0;g<e;g++)h=d[g],typeof h!="string"?c=h:(c[h]||(c[h]={}),c=c[h]);return c[f]=b,c[f]},createNamespaces:function(){var a=Ext.global,b,c,d,e,f,g;for(d=0,f=arguments.length;d<f;d++){b=this.parseNamespace(arguments[d]);for(e=0,g=b.length;e<g;e++)c=b[e],typeof c!="string"?a=c:(a[c]||(a[c]={}),a=a[c])}return a},set:function(a,b){var c=this.getName(b);return this.classes[a]=this.setNamespace(a,b),c&&c!==a&&(this.maps.alternateToName[a]=c),this},get:function(a){if(this.classes.hasOwnProperty(a))return this.classes[a];var b=Ext.global,c=this.parseNamespace(a),d,e,f;for(e=0,f=c.length;e<f;e++){d=c[e];if(typeof d!="string")b=d;else{if(!b||!b[d])return null;b=b[d]}}return b},setAlias:function(a,b){var c=this.maps.aliasToName,d=this.maps.nameToAliases,e;return typeof a=="string"?e=a:e=this.getName(a),b&&c[b]!==e&&(c[b]=e),d[e]||(d[e]=[]),b&&Ext.Array.include(d[e],b),this},getByAlias:function(a){return this.get(this.getNameByAlias(a))},getNameByAlias:function(a){return this.maps.aliasToName[a]||""},getNameByAlternate:function(a){return this.maps.alternateToName[a]||""},getAliasesByName:function(a){return this.maps.nameToAliases[a]||[]},getName:function(a){return a&&a.$className||""},getClass:function(a){return a&&a.self||null},create:function(b,c,d){var e=this;return c.$className=b,new a(c,function(){var a=c.postprocessors||e.defaultPostprocessors,f=e.postprocessors,k=0,l=[],m,n,o,p;delete c.postprocessors;for(o=0,p=a.length;o<p;o++)m=a[o],typeof m=="string"?(m=f[m],m.always?l.push(m.fn):c[m.name]!==undefined&&l.push(m.fn)):l.push(m);n=function(a,c,f){m=l[k++];if(!m){e.set(b,c),Ext.Loader.historyPush(b),d&&d.call(c,c);return}m.call(this,a,c,f,n)!==!1&&n.apply(this,arguments)},n.call(e,b,this,c)})},instantiateByAlias:function(){var a=arguments[0],b=c.call(arguments),d=this.getNameByAlias(a);return d||(d=this.maps.aliasToName[a],Ext.syncRequire(d)),b[0]=d,this.instantiate.apply(this,b)},instantiate:function(){var a=arguments[0],b=c.call(arguments,1),d=a,e,f;return typeof a!="function"?f=this.get(a):f=a,f||(e=this.getNameByAlias(a),e&&(a=e,f=this.get(a))),f||(e=this.getNameByAlternate(a),e&&(a=e,f=this.get(a))),f||(Ext.syncRequire(a),f=this.get(a)),this.getInstantiator(b.length)(f,b)},dynInstantiate:function(a,b){return b=Ext.Array.from(b,!0),b.unshift(a),this.instantiate.apply(this,b)},getInstantiator:function(a){if(!this.instantiators[a]){var b=a,c=[];for(b=0;b<a;b++)c.push("a["+b+"]");this.instantiators[a]=new Function("c","a","return new c("+c.join(",")+")")}return this.instantiators[a]},postprocessors:{},defaultPostprocessors:[],registerPostprocessor:function(a,b,c){return this.postprocessors[a]={name:a,always:c||!1,fn:b},this},setDefaultPostprocessors:function(a){return this.defaultPostprocessors=Ext.Array.from(a),this},setDefaultPostprocessorPosition:function(a,b,c){var d=this.defaultPostprocessors,e;if(typeof b=="string"){if(b==="first")return d.unshift(a),this;if(b==="last")return d.push(a),this;b=b==="after"?1:-1}return e=Ext.Array.indexOf(d,c),e!==-1&&Ext.Array.splice(d,Math.max(0,e+b),0,a),this},getNamesByExpression:function(a){var b=this.maps.nameToAliases,c=[],d,e,f,g,h,i,j;if(a.indexOf("*")!==-1){a=a.replace(/\*/g,"(.*?)"),h=new RegExp("^"+a+"$");for(d in b)if(b.hasOwnProperty(d)){f=b[d];if(d.search(h)!==-1)c.push(d);else for(i=0,j=f.length;i<j;i++){e=f[i];if(e.search(h)!==-1){c.push(d);break}}}}else g=this.getNameByAlias(a),g?c.push(g):(g=this.getNameByAlternate(a),g?c.push(g):c.push(a));return c}},e=d.defaultPostprocessors;d.registerPostprocessor("alias",function(a,c,d){var e=d.alias,f,g;delete d.alias;for(f=0,g=e.length;f<g;f++)b=e[f],this.setAlias(c,b)}),d.registerPostprocessor("singleton",function(a,b,c,d){return d.call(this,a,new b,c),!1}),d.registerPostprocessor("alternateClassName",function(a,b,c){var d=c.alternateClassName,e,f,g;d instanceof Array||(d=[d]);for(e=0,f=d.length;e<f;e++)g=d[e],this.set(g,b)}),d.setDefaultPostprocessors(["alias","singleton","alternateClassName"]),Ext.apply(Ext,{create:b(d,"instantiate"),factory:function(a,b){if(a instanceof Array){var c,d;for(c=0,d=a.length;c<d;c++)a[c]=Ext.factory(a[c],b);return a}var e=typeof a=="string";if(e||a instanceof Object&&a.constructor===Object){var f,g={};return e?f=a:(f=a.className,g=a,delete g.className),b!==undefined&&f.indexOf(b)===-1&&(f=b+"."+Ext.String.capitalize(f)),Ext.create(f,g)}return typeof a=="function"?Ext.create(a):a},widget:function(a){var b=c.call(arguments);return b[0]="widget."+a,d.instantiateByAlias.apply(d,b)},createByAlias:b(d,"instantiateByAlias"),define:function(a,b,c){if(!b.override)return d.create.apply(d,arguments);var e=b.requires,f=b.uses,g=a;return a=b.override,b=Ext.apply({},b),delete b.requires,delete b.uses,delete b.override,typeof e=="string"?e=[a,e]:e?(e=e.slice(0),e.unshift(a)):e=[a],d.create(g,{requires:e,uses:f,isPartial:!0,constructor:function(){}},function(){var e=d.get(a);e.override?e.override(b):e.self.override(b),c&&c.call(e)})},getClassName:b(d,"getName"),getDisplayName:function(a){return a.displayName?a.displayName:a.$name&&a.$class?Ext.getClassName(a.$class)+"#"+a.$name:a.$className?a.$className:"Anonymous"},getClass:b(d,"getClass"),namespace:b(d,"createNamespaces")}),Ext.createWidget=Ext.widget,Ext.ns=Ext.namespace,a.registerPreprocessor("className",function(a,b){b.$className&&(a.$className=b.$className)},!0),a.setDefaultPreprocessorPosition("className","first"),a.registerPreprocessor("xtype",function(a,b){var c=Ext.Array.from(b.xtype),d="widget.",e=Ext.Array.from(b.alias),f,g,h;b.xtype=c[0],b.xtypes=c,e=b.alias=Ext.Array.from(b.alias);for(f=0,g=c.length;f<g;f++)h=c[f],e.push(d+h);b.alias=e}),a.setDefaultPreprocessorPosition("xtype","last"),a.registerPreprocessor("alias",function(a,b){var c=Ext.Array.from(b.alias),d=Ext.Array.from(b.xtypes),e="widget.",f=e.length,g,h,i,j;for(g=0,h=c.length;g<h;g++)i=c[g],i.substring(0,f)===e&&(j=i.substring(f),Ext.Array.include(d,j),a.xtype||(a.xtype=b.xtype=j));b.alias=c,b.xtypes=d}),a.setDefaultPreprocessorPosition("alias","last")}(Ext.Class,Ext.Function.alias),function(a,b,c,d){var e=["extend","mixins","requires"],f;f=Ext.Loader={documentHead:typeof document!="undefined"&&(document.head||document.getElementsByTagName("head")[0]),isLoading:!1,queue:[],isFileLoaded:{},readyListeners:[],optionalRequires:[],requiresMap:{},numPendingFiles:0,numLoadedFiles:0,hasFileLoadError:!1,classNameToFilePathMap:{},history:[],config:{enabled:!1,disableCaching:!0,disableCachingParam:"_dc",paths:{Ext:"."}},setConfig:function(a,b){return Ext.isObject(a)&&arguments.length===1?Ext.Object.merge(this.config,a):this.config[a]=Ext.isObject(b)?Ext.Object.merge(this.config[a],b):b,this},getConfig:function(a){return a?this.config[a]:this.config},setPath:c(function(a,b){return this.config.paths[a]=b,this}),getPath:function(a){var b="",c=this.config.paths,d=this.getPrefix(a);if(d.length>0){if(d===a)return c[d];b=c[d],a=a.substring(d.length+1)}return b.length>0&&(b+="/"),b.replace(/\/\.\//g,"/")+a.replace(/\./g,"/")+".js"},getPrefix:function(a){var b=this.config.paths,c,d="";if(b.hasOwnProperty(a))return a;for(c in b)b.hasOwnProperty(c)&&c+"."===a.substring(0,c.length+1)&&c.length>d.length&&(d=c);return d},refreshQueue:function(){var b=this.queue.length,c,d,e,f;if(b===0){this.triggerReady();return}for(c=0;c<b;c++){d=this.queue[c];if(d){f=d.requires;if(f.length>this.numLoadedFiles)continue;e=0;do a.isCreated(f[e])?Ext.Array.erase(f,e,1):e++;while(e<f.length);if(d.requires.length===0){Ext.Array.erase(this.queue,c,1),d.callback.call(d.scope),this.refreshQueue();break}}}return this},injectScriptElement:function(a,b,c,d){var e=document.createElement("script"),f=this,g=function(){f.cleanupScriptElement(e),b.call(d)},h=function(){f.cleanupScriptElement(e),c.call(d)};return e.type="text/javascript",e.src=a,e.onload=g,e.onerror=h,e.onreadystatechange=function(){(this.readyState==="loaded"||this.readyState==="complete")&&g()},this.documentHead.appendChild(e),e},cleanupScriptElement:function(a){return a.onload=null,a.onreadystatechange=null,a.onerror=null,this},loadScriptFile:function(a,b,c,d,e){var f=this,g=a+(this.getConfig("disableCaching")?"?"+this.getConfig("disableCachingParam")+"="+Ext.Date.now():""),h=a.split("/").pop(),i=!1,j,k,l;d=d||this,this.isLoading=!0;if(!e)l=function(){c.call(d,"Failed loading '"+a+"', please verify that the file exists",e)},!Ext.isReady&&Ext.onDocumentReady?Ext.onDocumentReady(function(){f.injectScriptElement(g,b,l,d)}):this.injectScriptElement(g,b,l,d);else{typeof XMLHttpRequest!="undefined"?j=new XMLHttpRequest:j=new ActiveXObject("Microsoft.XMLHTTP");try{j.open("GET",g,!1),j.send(null)}catch(m){i=!0}k=j.status===1223?204:j.status,i||(i=k===0),i?c.call(this,"Failed loading synchronously via XHR: '"+a+"'; It's likely that the file is either being loaded from a different domain or from the local file system whereby cross origin requests are not allowed due to security reasons. Use asynchronous loading with Ext.require instead.",e):k>=200&&k<300?((new Function(j.responseText+"\n//@ sourceURL="+h))(),b.call(d)):c.call(this,"Failed loading synchronously via XHR: '"+a+"'; please verify that the file exists. XHR status code: "+k,e),j=null}},exclude:function(a){var b=this;return{require:function(c,d,e){return b.require(c,d,e,a)},syncRequire:function(c,d,e){return b.syncRequire(c,d,e,a)}}},syncRequire:function(){this.syncModeEnabled=!0,this.require.apply(this,arguments),this.refreshQueue(),this.syncModeEnabled=!1},require:function(b,c,d,e){var f,g,h,i,j={},k=[],l=[],m,n=[],o,p,q,r;b=Ext.Array.from(b),e=Ext.Array.from(e),c=c||Ext.emptyFn,d=d||Ext.global;for(o=0,q=e.length;o<q;o++){h=e[o];if(typeof h=="string"&&h.length>0){k=a.getNamesByExpression(h);for(p=0,r=k.length;p<r;p++)j[k[p]]=!0}}for(o=0,q=b.length;o<q;o++){g=b[o];if(typeof g=="string"&&g.length>0){l=a.getNamesByExpression(g);for(p=0,r=l.length;p<r;p++)m=l[p],!j.hasOwnProperty(m)&&!a.isCreated(m)&&Ext.Array.include(n,m)}}this.config.enabled||n.length>0&&Ext.Error.raise({sourceClass:"Ext.Loader",sourceMethod:"require",msg:"Ext.Loader is not enabled, so dependencies cannot be resolved dynamically. Missing required class"+(n.length>1?"es":"")+": "+n.join(", ")});if(n.length===0)return c.call(d),this;this.queue.push({requires:n,callback:c,scope:d}),n=n.slice();for(o=0,q=n.length;o<q;o++)i=n[o],this.isFileLoaded.hasOwnProperty(i)||(this.isFileLoaded[i]=!1,f=this.getPath(i),this.classNameToFilePathMap[i]=f,this.numPendingFiles++,this.loadScriptFile(f,Ext.Function.pass(this.onFileLoaded,[i,f],this),Ext.Function.pass(this.onFileLoadError,[i,f]),this,this.syncModeEnabled));return this},onFileLoaded:function(a,b){this.numLoadedFiles++,this.isFileLoaded[a]=!0,this.numPendingFiles--,this.numPendingFiles===0&&this.refreshQueue()},onFileLoadError:function(a,b,c,d){this.numPendingFiles--,this.hasFileLoadError=!0},addOptionalRequires:function(a){var b=this.optionalRequires,c,d,e;a=Ext.Array.from(a);for(c=0,d=a.length;c<d;c++)e=a[c],Ext.Array.include(b,e);return this},triggerReady:function(a){var b=this.readyListeners,c,d;if(this.isLoading||a){this.isLoading=!1;if(this.optionalRequires.length)return c=Ext.Array.clone(this.optionalRequires),this.optionalRequires.length=0,this.require(c,Ext.Function.pass(this.triggerReady,[!0],this),this),this;while(b.length){d=b.shift(),d.fn.call(d.scope);if(this.isLoading)return this}}return this},onReady:function(a,b,c,d){var e;c!==!1&&Ext.onDocumentReady&&(e=a,a=function(){Ext.onDocumentReady(e,b,d)}),this.isLoading?this.readyListeners.push({fn:a,scope:b}):a.call(b)},historyPush:function(a){return a&&this.isFileLoaded.hasOwnProperty(a)&&Ext.Array.include(this.history,a),this}},Ext.require=d(f,"require"),Ext.syncRequire=d(f,"syncRequire"),Ext.exclude=d(f,"exclude"),Ext.onReady=function(a,b,c){f.onReady(a,b,!0,c)},b.registerPreprocessor("loader",function(b,c,d){var h=this,i=[],j=a.getName(b),k,l,m,n,o,p,q;for(k=0,m=e.length;k<m;k++){p=e[k];if(c.hasOwnProperty(p)){q=c[p];if(typeof q=="string")i.push(q);else if(q instanceof Array)for(l=0,n=q.length;l<n;l++)o=q[l],typeof o=="string"&&i.push(o);else if(typeof q!="function")for(l in q)q.hasOwnProperty(l)&&(o=q[l],typeof o=="string"&&i.push(o))}}if(i.length===0)return;return f.require(i,function(){for(k=0,m=e.length;k<m;k++){p=e[k];if(c.hasOwnProperty(p)){q=c[p];if(typeof q=="string")c[p]=a.get(q);else if(q instanceof Array)for(l=0,n=q.length;l<n;l++)o=q[l],typeof o=="string"&&(c[p][l]=a.get(o));else if(typeof q!="function")for(var f in q)q.hasOwnProperty(f)&&(o=q[f],typeof o=="string"&&(c[p][f]=a.get(o)))}}d.call(h,b,c)}),!1},!0),b.setDefaultPreprocessorPosition("loader","after","className"),a.registerPostprocessor("uses",function(a,b,c){var d=Ext.Array.from(c.uses),e=[],h,i,j;for(h=0,i=d.length;h<i;h++)j=d[h],typeof j=="string"&&e.push(j);f.addOptionalRequires(e)}),a.setDefaultPostprocessorPosition("uses","last")}(Ext.ClassManager,Ext.Class,Ext.Function.flexSetter,Ext.Function.alias),Ext.Error=Ext.extend(Error,{statics:{ignore:!1,raise:function(a){a=a||{},Ext.isString(a)&&(a={msg:a});var b=this.raise.caller;b&&(b.$name&&(a.sourceMethod=b.$name),b.$owner&&(a.sourceClass=b.$owner.$className));if(Ext.Error.handle(a)!==!0){var c=Ext.Error.prototype.toString.call(a);throw Ext.log({msg:c,level:"error",dump:a,stack:!0}),new Ext.Error(a)}},handle:function(){return Ext.Error.ignore}},name:"Ext.Error",constructor:function(a){Ext.isString(a)&&(a={msg:a});var b=this;Ext.apply(b,a),b.message=b.message||b.msg},toString:function(){var a=this,b=a.className?a.className:"",c=a.methodName?"."+a.methodName+"(): ":"",d=a.msg||"(No description provided)";return b+c+d}}),Ext.JSON=new function(){var useHasOwn=!!{}.hasOwnProperty,isNative=function(){var a=null;return function(){return a===null&&(a=Ext.USE_NATIVE_JSON&&window.JSON&&JSON.toString()=="[object JSON]"),a}}(),pad=function(a){return a<10?"0"+a:a},doDecode=function(json){return eval("("+json+")")},doEncode=function(a){return!Ext.isDefined(a)||a===null?"null":Ext.isArray(a)?encodeArray(a):Ext.isDate(a)?Ext.JSON.encodeDate(a):Ext.isString(a)?encodeString(a):typeof a=="number"?isFinite(a)?String(a):"null":Ext.isBoolean(a)?String(a):Ext.isObject(a)?encodeObject(a):typeof a=="function"?"null":"undefined"},m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","":"\\u000b"},charToReplace=/[\\\"\x00-\x1f\x7f-\uffff]/g,encodeString=function(a){return'"'+a.replace(charToReplace,function(a){var b=m[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"'},encodeArray=function(a){var b=["[",""],c=a.length,d;for(d=0;d<c;d+=1)b.push(doEncode(a[d]),",");return b[b.length-1]="]",b.join("")},encodeObject=function(a){var b=["{",""],c;for(c in a)(!useHasOwn||a.hasOwnProperty(c))&&b.push(doEncode(c),":",doEncode(a[c]),",");return b[b.length-1]="}",b.join("")};this.encodeDate=function(a){return'"'+a.getFullYear()+"-"+pad(a.getMonth()+1)+"-"+pad(a.getDate())+"T"+pad(a.getHours())+":"+pad(a.getMinutes())+":"+pad(a.getSeconds())+'"'},this.encode=function(){var a;return function(b){return a||(a=isNative()?JSON.stringify:doEncode),a(b)}}(),this.decode=function(){var a;return function(b,c){a||(a=isNative()?JSON.parse:doDecode);try{return a(b)}catch(d){if(c===!0)return null;Ext.Error.raise({sourceClass:"Ext.JSON",sourceMethod:"decode",msg:"You're trying to decode an invalid JSON String: "+b})}}}()},Ext.encode=Ext.JSON.encode,Ext.decode=Ext.JSON.decode,Ext.apply(Ext,{userAgent:navigator.userAgent.toLowerCase(),cache:{},idSeed:1e3,windowId:"ext-window",documentId:"ext-document",isReady:!1,enableGarbageCollector:!0,enableListenerCollection:!0,id:function(a,b){var c=this,d="";return a=Ext.getDom(a,!0)||{},a===document?a.id=c.documentId:a===window&&(a.id=c.windowId),a.id||(c.isSandboxed&&(c.uniqueGlobalNamespace||c.getUniqueGlobalNamespace(),d=c.uniqueGlobalNamespace+"-"),a.id=d+(b||"ext-gen")+ ++Ext.idSeed),a.id},getBody:function(){return Ext.get(document.body||!1)},getHead:function(){var a;return function(){return a==undefined&&(a=Ext.get(document.getElementsByTagName("head")[0])),a}}(),getDoc:function(){return Ext.get(document)},getCmp:function(a){return Ext.ComponentManager.get(a)},getOrientation:function(){return window.innerHeight>window.innerWidth?"portrait":"landscape"},destroy:function(){var a=arguments.length,b,c;for(b=0;b<a;b++)c=arguments[b],c&&(Ext.isArray(c)?this.destroy.apply(this,c):Ext.isFunction(c.destroy)?c.destroy():c.dom&&c.remove())},callback:function(a,b,c,d){Ext.isFunction(a)&&(c=c||[],b=b||window,d?Ext.defer(a,d,b,c):a.apply(b,c))},htmlEncode:function(a){return Ext.String.htmlEncode(a)},htmlDecode:function(a){return Ext.String.htmlDecode(a)},urlAppend:function(a,b){return Ext.isEmpty(b)?a:a+(a.indexOf("?")===-1?"?":"&")+b}}),Ext.ns=Ext.namespace,window.undefined=window.undefined,function(){var a=function(a){return a.test(Ext.userAgent)},b=document.compatMode=="CSS1Compat",c=function(a,b){var c;return a&&(c=b.exec(Ext.userAgent))?parseFloat(c[1]):0},d=document.documentMode,e=a(/opera/),f=e&&a(/version\/10\.5/),g=a(/\bchrome\b/),h=a(/webkit/),i=!g&&a(/safari/),j=i&&a(/applewebkit\/4/),k=i&&a(/version\/3/),l=i&&a(/version\/4/),m=i&&a(/version\/5/),n=!e&&a(/msie/),o=n&&(a(/msie 7/)||d==7),p=n&&(a(/msie 8/)&&d!=7&&d!=9||d==8),q=n&&(a(/msie 9/)&&d!=7&&d!=8||d==9),r=n&&a(/msie 6/),s=!h&&a(/gecko/),t=s&&a(/rv:1\.9/),u=s&&a(/rv:2\.0/),v=s&&a(/rv:5\./),w=t&&a(/rv:1\.9\.0/),x=t&&a(/rv:1\.9\.1/),y=t&&a(/rv:1\.9\.2/),z=a(/windows|win32/),A=a(/macintosh|mac os x/),B=a(/linux/),C=null,D=c(!0,/\bchrome\/(\d+\.\d+)/),E=c(!0,/\bfirefox\/(\d+\.\d+)/),F=c(n,/msie (\d+\.\d+)/),G=c(e,/version\/(\d+\.\d+)/),H=c(i,/version\/(\d+\.\d+)/),I=c(h,/webkit\/(\d+\.\d+)/),J=/^https/i.test(window.location.protocol);try{document.execCommand("BackgroundImageCache",!1,!0)}catch(K){}Ext.setVersion("extjs","4.0.7"),Ext.apply(Ext,{SSL_SECURE_URL:J&&n?'javascript:""':"about:blank",scopeResetCSS:Ext.buildSettings.scopeResetCSS,enableNestedListenerRemoval:!1,USE_NATIVE_JSON:!1,getDom:function(a,b){if(!a||!document)return null;if(a.dom)return a.dom;if(typeof a=="string"){var c=document.getElementById(a);return c&&n&&b?a==c.getAttribute("id")?c:null:c}return a},removeNode:r||o?function(){var a;return function(b){b&&b.tagName!="BODY"&&(Ext.enableNestedListenerRemoval?Ext.EventManager.purgeElement(b):Ext.EventManager.removeAll(b),a=a||document.createElement("div"),a.appendChild(b),a.innerHTML="",delete Ext.cache[b.id])}}():function(a){a&&a.parentNode&&a.tagName!="BODY"&&(Ext.enableNestedListenerRemoval?Ext.EventManager.purgeElement(a):Ext.EventManager.removeAll(a),a.parentNode.removeChild(a),delete Ext.cache[a.id])},isStrict:b,isIEQuirks:n&&!b,isOpera:e,isOpera10_5:f,isWebKit:h,isChrome:g,isSafari:i,isSafari3:k,isSafari4:l,isSafari5:m,isSafari2:j,isIE:n,isIE6:r,isIE7:o,isIE8:p,isIE9:q,isGecko:s,isGecko3:t,isGecko4:u,isGecko5:v,isFF3_0:w,isFF3_5:x,isFF3_6:y,isFF4:4<=E&&E<5,isFF5:5<=E&&E<6,isLinux:B,isWindows:z,isMac:A,chromeVersion:D,firefoxVersion:E,ieVersion:F,operaVersion:G,safariVersion:H,webKitVersion:I,isSecure:J,BLANK_IMAGE_URL:r||o?"//www.sencha.com/s.gif":"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",value:function(a,b,c){return Ext.isEmpty(a,c)?b:a},escapeRe:function(a){return a.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},addBehaviors:function(a){if(!Ext.isReady)Ext.onReady(function(){Ext.addBehaviors(a)});else{var b={},c,d,e;for(d in a)(c=d.split("@"))[1]&&(e=c[0],b[e]||(b[e]=Ext.select(e)),b[e].on(c[1],a[d]));b=null}},getScrollbarSize:function(a){if(!Ext.isReady)return 0;if(a===!0||C===null){var b=Ext.isIE9?"":Ext.baseCSSPrefix+"hide-offsets",c=Ext.getBody().createChild('<div class="'+b+'" style="width:100px;height:50px;overflow:hidden;"><div style="height:200px;"></div></div>'),d=c.child("div",!0),e=d.offsetWidth;c.setStyle("overflow",Ext.isWebKit||Ext.isGecko?"auto":"scroll");var f=d.offsetWidth,g=e-f;c.remove(),C={width:g,height:g}}return C},getScrollBarWidth:function(a){var b=Ext.getScrollbarSize(a);return b.width+2},copyTo:function(a,b,c,d){return typeof c=="string"&&(c=c.split(/[,;\s]/)),Ext.each(c,function(c){if(d||b.hasOwnProperty(c))a[c]=b[c]},this),a},destroyMembers:function(a){for(var b=1,c=arguments,d=c.length;b<d;b++)Ext.destroy(a[c[b]]),delete a[c[b]]},log:Ext.emptyFn,partition:function(a,b){var c=[[],[]];return Ext.each(a,function(a,d,e){c[b&&b(a,d,e)||!b&&a?0:1].push(a)}),c},invoke:function(a,b){var c=[],d=Array.prototype.slice.call(arguments,2);return Ext.each(a,function(a,e){a&&typeof a[b]=="function"?c.push(a[b].apply(a,d)):c.push(undefined)}),c},zip:function(){var a=Ext.partition(arguments,function(a){return typeof a!="function"}),b=a[0],c=a[1][0],d=Ext.max(Ext.pluck(b,"length")),e=[];for(var f=0;f<d;f++){e[f]=[];if(c)e[f]=c.apply(c,Ext.pluck(b,f));else for(var g=0,h=b.length;g<h;g++)e[f].push(b[g][f])}return e},toSentence:function(a,b){var c=a.length;if(c<=1)return a[0];var d=a.slice(0,c-1),e=a[c-1];return Ext.util.Format.format("{0} {1} {2}",d.join(", "),b||"and",e)},useShims:r})}(),Ext.application=function(a){Ext.require("Ext.app.Application"),Ext.onReady(function(){Ext.create("Ext.app.Application",a)})},function(){Ext.ns("Ext.util"),Ext.util.Format={};var a=Ext.util.Format,b=/<\/?[^>]+>/gi,c=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,d=/\r?\n/g,e=/[^\d\.]/g,f;Ext.apply(a,{thousandSeparator:",",decimalSeparator:".",currencyPrecision:2,currencySign:"$",currencyAtEnd:!1,undef:function(a){return a!==undefined?a:""},defaultValue:function(a,b){return a!==undefined&&a!==""?a:b},substr:function(a,b,c){return String(a).substr(b,c)},lowercase:function(a){return String(a).toLowerCase()},uppercase:function(a){return String(a).toUpperCase()},usMoney:function(b){return a.currency(b,"$",2)},currency:function(b,c,d,e){var f="",h=",0",i=0;b-=0,b<0&&(b=-b,f="-"),d=d||a.currencyPrecision,h+=h+(d>0?".":"");for(;i<d;i++)h+="0";return b=a.number(b,h),(e||a.currencyAtEnd)===!0?Ext.String.format("{0}{1}{2}",f,b,c||a.currencySign):Ext.String.format("{0}{1}{2}",f,c||a.currencySign,b)},date:function(a,b){return a?(Ext.isDate(a)||(a=new Date(Date.parse(a))),Ext.Date.dateFormat(a,b||Ext.Date.defaultFormat)):""},dateRenderer:function(b){return function(c){return a.date(c,b)}},stripTags:function(a){return a?String(a).replace(b,""):a},stripScripts:function(a){return a?String(a).replace(c,""):a},fileSize:function(a){return a<1024?a+" bytes":a<1048576?Math.round(a*10/1024)/10+" KB":Math.round(a*10/1048576)/10+" MB"},math:function(){var a={};return function(b,c){return a[c]||(a[c]=Ext.functionFactory("v","return v "+c+";")),a[c](b)}}(),round:function(a,b){var c=Number(a);return typeof b=="number"&&(b=Math.pow(10,b),c=Math.round(a*b)/b),c},number:function(b,c){if(!c)return b;b=Ext.Number.from(b,NaN);if(isNaN(b))return"";var d=a.thousandSeparator,h=a.decimalSeparator,i=!1,j=b<0,k,l;b=Math.abs(b),c.substr(c.length-2)=="/i"?(f||(f=new RegExp("[^\\d\\"+a.decimalSeparator+"]","g")),c=c.substr(0,c.length-2),i=!0,k=c.indexOf(d)!=-1,l=c.replace(f,"").split(h)):(k=c.indexOf(",")!=-1,l=c.replace(e,"").split(".")),1<l.length?b=b.toFixed(l[1].length):2<l.length||(b=b.toFixed(0));var m=b.toString();l=m.split(".");if(k){var n=l[0],o=[],p=n.length,q=Math.floor(p/3),r=n.length%3||3,s;for(s=0;s<p;s+=r)s!==0&&(r=3),o[o.length]=n.substr(s,r),q-=1;m=o.join(d),l[1]&&(m+=h+l[1])}else l[1]&&(m=l[0]+h+l[1]);return j&&(j=m.replace(/[^1-9]/g,"")!==""),(j?"-":"")+c.replace(/[\d,?\.?]+/,m)},numberRenderer:function(b){return function(c){return a.number(c,b)}},plural:function(a,b,c){return a+" "+(a==1?b:c?c:b+"s")},nl2br:function(a){return Ext.isEmpty(a)?"":a.replace(d,"<br/>")},capitalize:Ext.String.capitalize,ellipsis:Ext.String.ellipsis,format:Ext.String.format,htmlDecode:Ext.String.htmlDecode,htmlEncode:Ext.String.htmlEncode,leftPad:Ext.String.leftPad,trim:Ext.String.trim,parseBox:function(a){Ext.isNumber(a)&&(a=a.toString());var b=a.split(" "),c=b.length;return c==1?b[1]=b[2]=b[3]=b[0]:c==2?(b[2]=b[0],b[3]=b[1]):c==3&&(b[3]=b[1]),{top:parseInt(b[0],10)||0,right:parseInt(b[1],10)||0,bottom:parseInt(b[2],10)||0,left:parseInt(b[3],10)||0}},escapeRegex:function(a){return a.replace(/([\-.*+?\^${}()|\[\]\/\\])/g,"\\$1")}})}(),Ext.ns("Ext.util"),Ext.util.TaskRunner=function(a){a=a||10;var b=[],c=[],d=0,e=!1,f=function(){e=!1,clearInterval(d),d=0},g=function(){e||(e=!0,d=setInterval(i,a))},h=function(a){c.push(a),a.onStop&&a.onStop.apply(a.scope||a)},i=function(){var a=c.length,d=(new Date).getTime(),e;if(a>0){for(e=0;e<a;e++)Ext.Array.remove(b,c[e]);c=[];if(b.length<1){f();return}}e=0;var g,i,j,k=b.length;for(;e<k;++e){g=b[e],i=d-g.taskRunTime;if(g.interval<=i){j=g.run.apply(g.scope||g,g.args||[++g.taskRunCount]),g.taskRunTime=d;if(j===!1||g.taskRunCount===g.repeat){h(g);return}}g.duration&&g.duration<=d-g.taskStartTime&&h(g)}};this.start=function(a){return b.push(a),a.taskStartTime=(new Date).getTime(),a.taskRunTime=0,a.taskRunCount=0,g(),a},this.stop=function(a){return h(a),a},this.stopAll=function(){f();for(var a=0,d=b.length;a<d;a++)b[a].onStop&&b[a].onStop();b=[],c=[]}},Ext.TaskManager=Ext.create("Ext.util.TaskRunner"),Ext.is={init:function(a){var b=this.platforms,c=b.length,d,e;a=a||window.navigator;for(d=0;d<c;d++)e=b[d],this[e.identity]=e.regex.test(a[e.property]);this.Desktop=this.Mac||this.Windows||this.Linux&&!this.Android,this.Tablet=this.iPad,this.Phone=!this.Desktop&&!this.Tablet,this.iOS=this.iPhone||this.iPad||this.iPod,this.Standalone=!!window.navigator.standalone},platforms:[{property:"platform",regex:/iPhone/i,identity:"iPhone"},{property:"platform",regex:/iPod/i,identity:"iPod"},{property:"userAgent",regex:/iPad/i,identity:"iPad"},{property:"userAgent",regex:/Blackberry/i,identity:"Blackberry"},{property:"userAgent",regex:/Android/i,identity:"Android"},{property:"platform",regex:/Mac/i,identity:"Mac"},{property:"platform",regex:/Win/i,identity:"Windows"},{property:"platform",regex:/Linux/i,identity:"Linux"}]},Ext.is.init(),Ext.supports={init:function(){var a=document,b=a.createElement("div"),c=this.tests,d=c.length,e,f;b.innerHTML=['<div style="height:30px;width:50px;">','<div style="height:20px;width:20px;"></div>',"</div>",'<div style="width: 200px; height: 200px; position: relative; padding: 5px;">','<div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div>',"</div>",'<div style="float:left; background-color:transparent;"></div>'].join(""),a.body.appendChild(b);for(e=0;e<d;e++)f=c[e],this[f.identity]=f.fn.call(this,a,b);a.body.removeChild(b)},CSS3BoxShadow:Ext.isDefined(document.documentElement.style.boxShadow),ClassList:!!document.documentElement.classList,OrientationChange:typeof window.orientation!="undefined"&&"onorientationchange"in window,DeviceMotion:"ondevicemotion"in window,Touch:"ontouchstart"in window&&!Ext.is.Desktop,tests:[{identity:"Transitions",fn:function(a,b){var c=["webkit","Moz","o","ms","khtml"],d="TransitionEnd",e=[c[0]+d,"transitionend",c[2]+d,c[3]+d,c[4]+d],f=c.length,g=0,h=!1;b=Ext.get(b);for(;g<f;g++)if(b.getStyle(c[g]+"TransitionProperty")){Ext.supports.CSS3Prefix=c[g],Ext.supports.CSS3TransitionEnd=e[g],h=!0;break}return h}},{identity:"RightMargin",fn:function(a,b){var c=a.defaultView;return!c||c.getComputedStyle(b.firstChild.firstChild,null).marginRight=="0px"}},{identity:"DisplayChangeInputSelectionBug",fn:function(){var a=Ext.webKitVersion;return 0<a&&a<533}},{identity:"DisplayChangeTextAreaSelectionBug",fn:function(){var a=Ext.webKitVersion;return 0<a&&a<534.24}},{identity:"TransparentColor",fn:function(a,b,c){return c=a.defaultView,!c||c.getComputedStyle(b.lastChild,null).backgroundColor=="transparent"}},{identity:"ComputedStyle",fn:function(a,b,c){return c=a.defaultView,c&&c.getComputedStyle}},{identity:"Svg",fn:function(a){return!!a.createElementNS&&!!a.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect}},{identity:"Canvas",fn:function(a){return!!a.createElement("canvas").getContext}},{identity:"Vml",fn:function(a){var b=a.createElement("div");return b.innerHTML="<!--[if vml]><br><br><![endif]-->",b.childNodes.length==2}},{identity:"Float",fn:function(a,b){return!!b.lastChild.style.cssFloat}},{identity:"AudioTag",fn:function(a){return!!a.createElement("audio").canPlayType}},{identity:"History",fn:function(){return!!window.history&&!!history.pushState}},{identity:"CSS3DTransform",fn:function(){return typeof WebKitCSSMatrix!="undefined"&&(new WebKitCSSMatrix).hasOwnProperty("m41")}},{identity:"CSS3LinearGradient",fn:function(a,b){var c="background-image:",d="-webkit-gradient(linear, left top, right bottom, from(black), to(white))",e="linear-gradient(left top, black, white)",f="-moz-"+e,g=[c+d,c+e,c+f];return b.style.cssText=g.join(";"),(""+b.style.backgroundImage).indexOf("gradient")!==-1}},{identity:"CSS3BorderRadius",fn:function(a,b){var c=["borderRadius","BorderRadius","MozBorderRadius","WebkitBorderRadius","OBorderRadius","KhtmlBorderRadius"],d=!1,e;for(e=0;e<c.length;e++)if(document.body.style[c[e]]!==undefined)return!0;return d}},{identity:"GeoLocation",fn:function(){return typeof navigator!="undefined"&&typeof navigator.geolocation!="undefined"||typeof google!="undefined"&&typeof google.gears!="undefined"}},{identity:"MouseEnterLeave",fn:function(a,b){return"onmouseenter"in b&&"onmouseleave"in b}},{identity:"MouseWheel",fn:function(a,b){return"onmousewheel"in b}},{identity:"Opacity",fn:function(a,b){return Ext.isIE6||Ext.isIE7||Ext.isIE8?!1:(b.firstChild.style.cssText="opacity:0.73",b.firstChild.style.opacity=="0.73")}},{identity:"Placeholder",fn:function(a){return"placeholder"in a.createElement("input")}},{identity:"Direct2DBug",fn:function(){return Ext.isString(document.body.style.msTransformOrigin)}},{identity:"BoundingClientRect",fn:function(a,b){return Ext.isFunction(b.getBoundingClientRect)}},{identity:"IncludePaddingInWidthCalculation",fn:function(a,b){var c=Ext.get(b.childNodes[1].firstChild);return c.getWidth()==210}},{identity:"IncludePaddingInHeightCalculation",fn:function(a,b){var c=Ext.get(b.childNodes[1].firstChild);return c.getHeight()==210}},{identity:"ArraySort",fn:function(){var a=[1,2,3,4,5].sort(function(){return 0});return a[0]===1&&a[1]===2&&a[2]===3&&a[3]===4&&a[4]===5}},{identity:"Range",fn:function(){return!!document.createRange}},{identity:"CreateContextualFragment",fn:function(){var a=Ext.supports.Range?document.createRange():!1;return a&&!!a.createContextualFragment}},{identity:"WindowOnError",fn:function(){return Ext.isIE||Ext.isGecko||Ext.webKitVersion>=534.16}}]},Ext.ns("Ext.core"),Ext.core.DomHelper=Ext.DomHelper=function(){function r(a,b,c,d,e,f){a=Ext.getDom(a);var h;return g.useDom?(h=s(b,null),f?a.appendChild(h):(e=="firstChild"?a:a.parentNode).insertBefore(h,a[e]||a)):h=Ext.DomHelper.insertHtml(d,a,Ext.DomHelper.createHtml(b)),c?Ext.get(h,!0):h}function s(a,b){var c,e=document,f,g,h,i;if(Ext.isArray(a)){c=e.createDocumentFragment();for(var j=0,k=a.length;j<k;j++)s(a[j],c)}else if(typeof a=="string")c=e.createTextNode(a);else{c=e.createElement(a.tag||"div"),f=!!c.setAttribute;for(g in a)d.test(g)||(h=a[g],g=="cls"?c.className=h:f?c.setAttribute(g,h):c[g]=h);Ext.DomHelper.applyStyles(c,a.style),(i=a.children||a.cn)?s(i,c):a.html&&(c.innerHTML=a.html)}return b&&b.appendChild(c),c}function t(a){var c="",e,f,g,h,i;if(typeof a=="string")c=a;else if(Ext.isArray(a))for(i=0;i<a.length;i++)a[i]&&(c+=t(a[i]));else{c+="<"+(a.tag=a.tag||"div");for(e in a){f=a[e];if(!d.test(e))if(typeof f=="object"){c+=" "+e+'="';for(g in f)c+=g+":"+f[g]+";";c+='"'}else c+=" "+({cls:"class",htmlFor:"for"}[e]||e)+'="'+f+'"'}b.test(a.tag)?c+="/>":(c+=">",(h=a.children||a.cn)?c+=t(h):a.html&&(c+=a.html),c+="</"+a.tag+">")}return c}function u(b,c,d,e){a.innerHTML=[c,d,e].join("");var f=-1,g=a,h;while(++f<b)g=g.firstChild;h=g.nextSibling;if(h){var i=document.createDocumentFragment();while(g)h=g.nextSibling,i.appendChild(g),g=h;g=i}return g}function v(b,c,d,f){var g,r;a=a||document.createElement("div");if(b=="td"&&(c==h||c==k)||!e.test(b)&&(c==j||c==i))return null;r=c==j?d:c==i?d.nextSibling:c==h?d.firstChild:null;if(c==j||c==i)d=d.parentNode;return b=="td"||b=="tr"&&(c==k||c==h)?g=u(4,p,f,q):b=="tbody"&&(c==k||c==h)||b=="tr"&&(c==j||c==i)?g=u(3,n,f,o):g=u(2,l,f,m),d.insertBefore(g,r),g}function w(a){var b=document.createElement("div"),c=document.createDocumentFragment(),d=0,e,f;b.innerHTML=a,f=b.childNodes,e=f.length;for(;d<e;d++)c.appendChild(f[d].cloneNode(!0));return c}var a=null,b=/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,c=/^table|tbody|tr|td$/i,d=/tag|children|cn|html$/i,e=/td|tr|tbody/i,f=/end/i,g,h="afterbegin",i="afterend",j="beforebegin",k="beforeend",l="<table>",m="</table>",n=l+"<tbody>",o="</tbody>"+m,p=n+"<tr>",q="</tr>"+o;return g={markup:function(a){return t(a)},applyStyles:function(a,b){b&&(a=Ext.fly(a),typeof b=="function"&&(b=b.call()),typeof b=="string"&&(b=Ext.Element.parseStyles(b)),typeof b=="object"&&a.setStyle(b))},insertHtml:function(a,b,d){var e={},g,l,m,n,o,p;a=a.toLowerCase(),e[j]=["BeforeBegin","previousSibling"],e[i]=["AfterEnd","nextSibling"];if(!b.insertAdjacentHTML)return Ext.isTextNode(b)&&(a=a==="afterbegin"?"beforebegin":a,a=a==="beforeend"?"afterend":a),l=Ext.supports.CreateContextualFragment?b.ownerDocument.createRange():undefined,n="setStart"+(f.test(a)?"After":"Before"),e[a]?(l?(l[n](b),o=l.createContextualFragment(d)):o=w(d),b.parentNode.insertBefore(o,a==j?b:b.nextSibling),b[(a==j?"previous":"next")+"Sibling"]):(m=(a==h?"first":"last")+"Child",b.firstChild?(l?(l[n](b[m]),o=l.createContextualFragment(d)):o=w(d),a==h?b.insertBefore(o,b.firstChild):b.appendChild(o)):b.innerHTML=d,b[m]);if(c.test(b.tagName)&&(p=v(b.tagName.toLowerCase(),a,b,d)))return p;e[h]=["AfterBegin","firstChild"],e[k]=["BeforeEnd","lastChild"];if(g=e[a])return b.insertAdjacentHTML(g[0],d),b[g[1]]},insertBefore:function(a,b,c){return r(a,b,c,j)},insertAfter:function(a,b,c){return r(a,b,c,i,"nextSibling")},insertFirst:function(a,b,c){return r(a,b,c,h,"firstChild")},append:function(a,b,c){return r(a,b,c,k,"",!0)},overwrite:function(a,b,c){return a=Ext.getDom(a),a.innerHTML=t(b),c?Ext.get(a.firstChild):a.firstChild},createHtml:t,createDom:s,useDom:!1,createTemplate:function(a){var b=Ext.DomHelper.createHtml(a);return Ext.create("Ext.Template",b)}},g}(),Ext.ns("Ext.core"),Ext.core.DomQuery=Ext.DomQuery=function(){function child(a,b){var c=0,d=a.firstChild;while(d){if(d.nodeType==1&&++c==b)return d;d=d.nextSibling}return null}function next(a){while((a=a.nextSibling)&&a.nodeType!=1);return a}function prev(a){while((a=a.previousSibling)&&a.nodeType!=1);return a}function children(a){var b=a.firstChild,c=-1,d;while(b)d=b.nextSibling,b.nodeType==3&&!nonSpace.test(b.nodeValue)?a.removeChild(b):b.nodeIndex=++c,b=d;return this}function byClassName(a,b){if(!b)return a;var c=[],d=-1;for(var e=0,f;f=a[e];e++)(" "+f.className+" ").indexOf(b)!=-1&&(c[++d]=f);return c}function attrValue(a,b){return!a.tagName&&typeof a.length!="undefined"&&(a=a[0]),a?b=="for"?a.htmlFor:b=="class"||b=="className"?a.className:a.getAttribute(b)||a[b]:null}function getNodes(a,b,c){var d=[],e=-1,f;if(!a)return d;c=c||"*",typeof a.getElementsByTagName!="undefined"&&(a=[a]);if(!b)for(var g=0,h;h=a[g];g++){f=h.getElementsByTagName(c);for(var i=0,j;j=f[i];i++)d[++e]=j}else if(b=="/"||b==">"){var k=c.toUpperCase();for(var g=0,h,l;h=a[g];g++){l=h.childNodes;for(var i=0,m;m=l[i];i++)if(m.nodeName==k||m.nodeName==c||c=="*")d[++e]=m}}else if(b=="+"){var k=c.toUpperCase();for(var g=0,n;n=a[g];g++){while((n=n.nextSibling)&&n.nodeType!=1);n&&(n.nodeName==k||n.nodeName==c||c=="*")&&(d[++e]=n)}}else if(b=="~"){var k=c.toUpperCase();for(var g=0,n;n=a[g];g++)while(n=n.nextSibling)if(n.nodeName==k||n.nodeName==c||c=="*")d[++e]=n}return d}function concat(a,b){if(b.slice)return a.concat(b);for(var c=0,d=b.length;c<d;c++)a[a.length]=b[c];return a}function byTag(a,b){if(a.tagName||a==document)a=[a];if(!b)return a;var c=[],d=-1;b=b.toLowerCase();for(var e=0,f;f=a[e];e++)f.nodeType==1&&f.tagName.toLowerCase()==b&&(c[++d]=f);return c}function byId(a,b){if(a.tagName||a==document)a=[a];if(!b)return a;var c=[],d=-1;for(var e=0,f;f=a[e];e++)if(f&&f.id==b)return c[++d]=f,c;return c}function byAttribute(a,b,c,d,e){var f=[],g=-1,h=e=="{",i=Ext.DomQuery.operators[d],j,k,l;for(var m=0,n;n=a[m];m++){if(n.nodeType!=1)continue;l||(k=Ext.DomQuery.isXml(n),l=!0),k?j=n.getAttribute(b):h?j=Ext.DomQuery.getStyle(n,b):b=="class"||b=="className"?j=n.className:b=="for"?j=n.htmlFor:b=="href"?j=n.getAttribute("href",2):j=n.getAttribute(b);if(i&&i(j,c)||!i&&j)f[++g]=n}return f}function byPseudo(a,b,c){return Ext.DomQuery.pseudos[b](a,c)}function nodupIEXml(a){var b=++key,c;a[0].setAttribute("_nodup",b),c=[a[0]];for(var d=1,e=a.length;d<e;d++){var f=a[d];!f.getAttribute("_nodup")!=b&&(f.setAttribute("_nodup",b),c[c.length]=f)}for(var d=0,e=a.length;d<e;d++)a[d].removeAttribute("_nodup");return c}function nodup(a){if(!a)return[];var b=a.length,c,d,e=a,f,g=-1;if(!b||typeof a.nodeType!="undefined"||b==1)return a;if(isIE&&typeof a[0].selectSingleNode!="undefined")return nodupIEXml(a);var h=++key;a[0]._nodup=h;for(d=1;c=a[d];d++){if(c._nodup==h){e=[];for(var i=0;i<d;i++)e[++g]=a[i];for(i=d+1;f=a[i];i++)f._nodup!=h&&(f._nodup=h,e[++g]=f);return e}c._nodup=h}return e}function quickDiffIEXml(a,b){var c=++key,d=[];for(var e=0,f=a.length;e<f;e++)a[e].setAttribute("_qdiff",c);for(var e=0,f=b.length;e<f;e++)b[e].getAttribute("_qdiff")!=c&&(d[d.length]=b[e]);for(var e=0,f=a.length;e<f;e++)a[e].removeAttribute("_qdiff");return d}function quickDiff(a,b){var c=a.length,d=++key,e=[];if(!c)return b;if(isIE&&typeof a[0].selectSingleNode!="undefined")return quickDiffIEXml(a,b);for(var f=0;f<c;f++)a[f]._qdiff=d;for(var f=0,g=b.length;f<g;f++)b[f]._qdiff!=d&&(e[e.length]=b[f]);return e}function quickId(a,b,c,d){if(a==c){var e=c.ownerDocument||c;return e.getElementById(d)}return a=getNodes(a,b,"*"),byId(a,d)}var cache={},simpleCache={},valueCache={},nonSpace=/\S/,trimRe=/^\s+|\s+$/g,tplRe=/\{(\d+)\}/g,modeRe=/^(\s?[\/>+~]\s?|\s|$)/,tagTokenRe=/^(#)?([\w-\*]+)/,nthRe=/(\d*)n\+?(\d*)/,nthRe2=/\D/,startIdRe=/^\s*\#/,isIE=window.ActiveXObject?!0:!1,key=30803;return eval("var batch = 30803;"),{getStyle:function(a,b){return Ext.fly(a).getStyle(b)},compile:function(path,type){type=type||"select";var fn=["var f = function(root){\n var mode; ++batch; var n = root || document;\n"],mode,lastPath,matchers=Ext.DomQuery.matchers,matchersLn=matchers.length,modeMatch,lmode=path.match(modeRe);lmode&&lmode[1]&&(fn[fn.length]='mode="'+lmode[1].replace(trimRe,"")+'";',path=path.replace(lmode[1],""));while(path.substr(0,1)=="/")path=path.substr(1);while(path&&lastPath!=path){lastPath=path;var tokenMatch=path.match(tagTokenRe);type=="select"?tokenMatch?(tokenMatch[1]=="#"?fn[fn.length]='n = quickId(n, mode, root, "'+tokenMatch[2]+'");':fn[fn.length]='n = getNodes(n, mode, "'+tokenMatch[2]+'");',path=path.replace(tokenMatch[0],"")):path.substr(0,1)!="@"&&(fn[fn.length]='n = getNodes(n, mode, "*");'):tokenMatch&&(tokenMatch[1]=="#"?fn[fn.length]='n = byId(n, "'+tokenMatch[2]+'");':fn[fn.length]='n = byTag(n, "'+tokenMatch[2]+'");',path=path.replace(tokenMatch[0],""));while(!(modeMatch=path.match(modeRe))){var matched=!1;for(var j=0;j<matchersLn;j++){var t=matchers[j],m=path.match(t.re);if(m){fn[fn.length]=t.select.replace(tplRe,function(a,b){return m[b]}),path=path.replace(m[0],""),matched=!0;break}}!!matched}modeMatch[1]&&(fn[fn.length]='mode="'+modeMatch[1].replace(trimRe,"")+'";',path=path.replace(modeMatch[1],""))}return fn[fn.length]="return nodup(n);\n}",eval(fn.join("")),f},jsSelect:function(a,b,c){b=b||document,typeof b=="string"&&(b=document.getElementById(b));var d=a.split(","),e=[];for(var f=0,g=d.length;f<g;f++){var h=d[f].replace(trimRe,"");cache[h]||(cache[h]=Ext.DomQuery.compile(h),!!cache[h]);var i=cache[h](b);i&&i!=document&&(e=e.concat(i))}return d.length>1?nodup(e):e},isXml:function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1},select:document.querySelectorAll?function(a,b,c){b=b||document;if(!Ext.DomQuery.isXml(b)&&(!Ext.isSafari3||!!Ext.isStrict))try{var d=b.nodeType===9,e=a,f=b;return!d&&a.indexOf(",")===-1&&!startIdRe.test(a)&&(e="#"+Ext.id(b)+" "+a,f=b.parentNode),Ext.Array.toArray(f.querySelectorAll(e))}catch(g){}return Ext.DomQuery.jsSelect.call(this,a,b,c)}:function(a,b,c){return Ext.DomQuery.jsSelect.call(this,a,b,c)},selectNode:function(a,b){return Ext.DomQuery.select(a,b)[0]},selectValue:function(a,b,c){a=a.replace(trimRe,""),valueCache[a]||(valueCache[a]=Ext.DomQuery.compile(a,"select"));var d=valueCache[a](b),e;return d=d[0]?d[0]:d,typeof d.normalize=="function"&&d.normalize(),e=d&&d.firstChild?d.firstChild.nodeValue:null,e===null||e===undefined||e===""?c:e},selectNumber:function(a,b,c){var d=Ext.DomQuery.selectValue(a,b,c||0);return parseFloat(d)},is:function(a,b){typeof a=="string"&&(a=document.getElementById(a));var c=Ext.isArray(a),d=Ext.DomQuery.filter(c?a:[a],b);return c?d.length==a.length:d.length>0},filter:function(a,b,c){b=b.replace(trimRe,""),simpleCache[b]||(simpleCache[b]=Ext.DomQuery.compile(b,"simple"));var d=simpleCache[b](a);return c?quickDiff(d,a):d},matchers:[{re:/^\.([\w-]+)/,select:'n = byClassName(n, " {1} ");'},{re:/^\:([\w-]+)(?:\(((?:[^\s>\/]*|.*?))\))?/,select:'n = byPseudo(n, "{1}", "{2}");'},{re:/^(?:([\[\{])(?:@)?([\w-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]\}])/,select:'n = byAttribute(n, "{2}", "{4}", "{3}", "{1}");'},{re:/^#([\w-]+)/,select:'n = byId(n, "{1}");'},{re:/^@([\w-]+)/,select:'return {firstChild:{nodeValue:attrValue(n, "{1}")}};'}],operators:{"=":function(a,b){return a==b},"!=":function(a,b){return a!=b},"^=":function(a,b){return a&&a.substr(0,b.length)==b},"$=":function(a,b){return a&&a.substr(a.length-b.length)==b},"*=":function(a,b){return a&&a.indexOf(b)!==-1},"%=":function(a,b){return a%b==0},"|=":function(a,b){return a&&(a==b||a.substr(0,b.length+1)==b+"-")},"~=":function(a,b){return a&&(" "+a+" ").indexOf(" "+b+" ")!=-1}},pseudos:{"first-child":function(a){var b=[],c=-1,d;for(var e=0,f;f=d=a[e];e++){while((d=d.previousSibling)&&d.nodeType!=1);d||(b[++c]=f)}return b},"last-child":function(a){var b=[],c=-1,d;for(var e=0,f;f=d=a[e];e++){while((d=d.nextSibling)&&d.nodeType!=1);d||(b[++c]=f)}return b},"nth-child":function(a,b){var c=[],d=-1,e=nthRe.exec(b=="even"&&"2n"||b=="odd"&&"2n+1"||!nthRe2.test(b)&&"n+"+b||b),f=(e[1]||1)-0,g=e[2]-0;for(var h=0,i;i=a[h];h++){var j=i.parentNode;if(batch!=j._batch){var k=0;for(var l=j.firstChild;l;l=l.nextSibling)l.nodeType==1&&(l.nodeIndex=++k);j._batch=batch}if(f==1){if(g==0||i.nodeIndex==g)c[++d]=i}else(i.nodeIndex+g)%f==0&&(c[++d]=i)}return c},"only-child":function(a){var b=[],c=-1;for(var d=0,e;e=a[d];d++)!prev(e)&&!next(e)&&(b[++c]=e);return b},empty:function(a){var b=[],c=-1;for(var d=0,e;e=a[d];d++){var f=e.childNodes,g=0,h,i=!0;while(h=f[g]){++g;if(h.nodeType==1||h.nodeType==3){i=!1;break}}i&&(b[++c]=e)}return b},contains:function(a,b){var c=[],d=-1;for(var e=0,f;f=a[e];e++)(f.textContent||f.innerText||"").indexOf(b)!=-1&&(c[++d]=f);return c},nodeValue:function(a,b){var c=[],d=-1;for(var e=0,f;f=a[e];e++)f.firstChild&&f.firstChild.nodeValue==b&&(c[++d]=f);return c},checked:function(a){var b=[],c=-1;for(var d=0,e;e=a[d];d++)e.checked==1&&(b[++c]=e);return b},not:function(a,b){return Ext.DomQuery.filter(a,b,!0)},any:function(a,b){var c=b.split("|"),d=[],e=-1,f;for(var g=0,h;h=a[g];g++)for(var i=0;f=c[i];i++)if(Ext.DomQuery.is(h,f)){d[++e]=h;break}return d},odd:function(a){return this["nth-child"](a,"odd")},even:function(a){return this["nth-child"](a,"even")},nth:function(a,b){return a[b-1]||[]},first:function(a){return a[0]||[]},last:function(a){return a[a.length-1]||[]},has:function(a,b){var c=Ext.DomQuery.select,d=[],e=-1;for(var f=0,g;g=a[f];f++)c(b,g).length>0&&(d[++e]=g);return d},next:function(a,b){var c=Ext.DomQuery.is,d=[],e=-1;for(var f=0,g;g=a[f];f++){var h=next(g);h&&c(h,b)&&(d[++e]=g)}return d},prev:function(a,b){var c=Ext.DomQuery.is,d=[],e=-1;for(var f=0,g;g=a[f];f++){var h=prev(g);h&&c(h,b)&&(d[++e]=g)}return d}}}}(),Ext.query=Ext.DomQuery.select,function(){function h(){if(!Ext.enableGarbageCollector)clearInterval(d.collectorThreadId);else{var c,e,f,g;for(c in b){if(!b.hasOwnProperty(c))continue;g=b[c];if(g.skipGarbageCollection)continue;e=g.el,f=e.dom;if(!f||!f.parentNode||!f.offsetParent&&!a.getElementById(c))f&&Ext.enableListenerCollection&&Ext.EventManager.removeAll(f),delete b[c]}if(Ext.isIE){var h={};for(c in b){if(!b.hasOwnProperty(c))continue;h[c]=b[c]}b=Ext.cache=h}}}var a=document,b=Ext.cache;Ext.Element=Ext.core.Element=function(c,d){var e=typeof c=="string"?a.getElementById(c):c,f;if(!e)return null;f=e.id;if(!d&&f&&b[f])return b[f].el;this.dom=e,this.id=f||Ext.id(e)};var c=Ext.DomHelper,d=Ext.Element;d.prototype={set:function(a,b){var d=this.dom,e,f;b=b!==!1&&!!d.setAttribute;for(e in a)a.hasOwnProperty(e)&&(f=a[e],e=="style"?c.applyStyles(d,f):e=="cls"?d.className=f:b?d.setAttribute(e,f):d[e]=f);return this},defaultUnit:"px",is:function(a){return Ext.DomQuery.is(this.dom,a)},focus:function(a,b){var c=this;b=b||c.dom;try{Number(a)?Ext.defer(c.focus,a,null,[null,b]):b.focus()}catch(d){}return c},blur:function(){try{this.dom.blur()}catch(a){}return this},getValue:function(a){var b=this.dom.value;return a?parseInt(b,10):b},addListener:function(a,b,c,d){return Ext.EventManager.on(this.dom,a,b,c||this,d),this},removeListener:function(a,b,c){return Ext.EventManager.un(this.dom,a,b,c||this),this},removeAllListeners:function(){return Ext.EventManager.removeAll(this.dom),this},purgeAllListeners:function(){return Ext.EventManager.purgeElement(this),this},addUnits:function(a,b){return Ext.isNumber(a)?a+(b||this.defaultUnit||"px"):a===""||a=="auto"||a==null?a||"":f.test(a)?a:a||""},isBorderBox:function(){return Ext.isBorderBox||j[(this.dom.tagName||"").toLowerCase()]},remove:function(){var a=this,b=a.dom;b&&(delete a.dom,Ext.removeNode(b))},hover:function(a,b,c,d){var e=this;return e.on("mouseenter",a,c||e.dom,d),e.on("mouseleave",b,c||e.dom,d),e},contains:function(a){return a?Ext.Element.isAncestor(this.dom,a.dom?a.dom:a):!1},getAttributeNS:function(a,b){return this.getAttribute(b,a)},getAttribute:Ext.isIE&&(!Ext.isIE9||document.documentMode!==9)?function(a,b){var c=this.dom,d;return b?(d=typeof c[b+":"+a],d!="undefined"&&d!="unknown"?c[b+":"+a]||null:null):(a==="for"&&(a="htmlFor"),c[a]||null)}:function(a,b){var c=this.dom;return b?c.getAttributeNS(b,a)||c.getAttribute(b+":"+a):c.getAttribute(a)||c[a]||null},update:function(a){return this.dom&&(this.dom.innerHTML=a),this}};var e=d.prototype;d.addMethods=function(a){Ext.apply(e,a)},e.on=e.addListener,e.un=e.removeListener,e.clearListeners=e.removeAllListeners,e.destroy=e.remove,e.autoBoxAdjust=!0;var f=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,g;d.get=function(c){var e,f,h;if(!c)return null;if(typeof c=="string")return(f=a.getElementById(c))?(b[c]&&b[c].el?(e=b[c].el,e.dom=f):e=d.addToCache(new d(f)),e):null;if(c.tagName)return(h=c.id)||(h=Ext.id(c)),b[h]&&b[h].el?(e=b[h].el,e.dom=c):e=d.addToCache(new d(c)),e;if(c instanceof d)return c!=g&&(!Ext.isIE||c.id!=undefined&&c.id!=""?c.dom=a.getElementById(c.id)||c.dom:c.dom=c.dom),c;if(c.isComposite)return c;if(Ext.isArray(c))return d.select(c);if(c==a){if(!g){var i=function(){};i.prototype=d.prototype,g=new i,g.dom=a}return g}return null},e.getById=!Ext.isIE6&&!Ext.isIE7&&!Ext.isIE8?d.get:function(a){var c=this.dom,e,f,g;if(c){f=c.all[a];if(f)return e=b[a],e&&e.el?(g=e.el,g.dom=f):g=d.addToCache(new d(f)),g}return d.get(a)},d.addToCache=function(a,c){return a&&(c=c||a.id,b[c]={el:a,data:{},events:{}}),a},d.data=function(a,c,e){a=d.get(a);if(!a)return null;var f=b[a.id].data;return arguments.length==2?f[c]:f[c]=e},d.collectorThreadId=setInterval(h,3e4);var i=function(){};i.prototype=d.prototype,d.Flyweight=function(a){this.dom=a},d.Flyweight.prototype=new i,d.Flyweight.prototype.isFlyweight=!0,d._flyweights={},d.fly=function(a,b){var c=null;return b=b||"_global",a=Ext.getDom(a),a&&((d._flyweights[b]=d._flyweights[b]||new d.Flyweight).dom=a,c=d._flyweights[b]),c},Ext.get=d.get,Ext.fly=d.fly;var j=Ext.isStrict?{select:1}:{input:1,select:1,textarea:1};if(Ext.isIE||Ext.isGecko)j.button=1}(),Ext.Element.addMethods({findParent:function(a,b,c){var d=this.dom,e=document.body,f=0,g;b=b||50,isNaN(b)&&(g=Ext.getDom(b),b=Number.MAX_VALUE);while(d&&d.nodeType==1&&f<b&&d!=e&&d!=g){if(Ext.DomQuery.is(d,a))return c?Ext.get(d):d;f++,d=d.parentNode}return null},findParentNode:function(a,b,c){var d=Ext.fly(this.dom.parentNode,"_internal");return d?d.findParent(a,b,c):null},up:function(a,b){return this.findParentNode(a,b,!0)},select:function(a){return Ext.Element.select(a,!1,this.dom)},query:function(a){return Ext.DomQuery.select(a,this.dom)},down:function(a,b){var c=Ext.DomQuery.selectNode(a,this.dom);return b?c:Ext.get(c)},child:function(a,b){var c,d=this,e;return e=Ext.get(d).id,e=e.replace(/[\.:]/g,"\\$0"),c=Ext.DomQuery.selectNode("#"+e+" > "+a,d.dom),b?c:Ext.get(c)},parent:function(a,b){return this.matchNode("parentNode","parentNode",a,b)},next:function(a,b){return this.matchNode("nextSibling","nextSibling",a,b)},prev:function(a,b){return this.matchNode("previousSibling","previousSibling",a,b)},first:function(a,b){return this.matchNode("nextSibling","firstChild",a,b)},last:function(a,b){return this.matchNode("previousSibling","lastChild",a,b)},matchNode:function(a,b,c,d){if(!this.dom)return null;var e=this.dom[b];while(e){if(e.nodeType==1&&(!c||Ext.DomQuery.is(e,c)))return d?e:Ext.get(e);e=e[a]}return null}}),Ext.Element.addMethods({appendChild:function(a){return Ext.get(a).appendTo(this)},appendTo:function(a){return Ext.getDom(a).appendChild(this.dom),this},insertBefore:function(a){return a=Ext.getDom(a),a.parentNode.insertBefore(this.dom,a),this},insertAfter:function(a){return a=Ext.getDom(a),a.parentNode.insertBefore(this.dom,a.nextSibling),this},insertFirst:function(a,b){return a=a||{},a.nodeType||a.dom||typeof a=="string"?(a=Ext.getDom(a),this.dom.insertBefore(a,this.dom.firstChild),b?a:Ext.get(a)):this.createChild(a,this.dom.firstChild,b)},insertSibling:function(a,b,c){var d=this,e,f=(b||"before").toLowerCase()=="after",g;return Ext.isArray(a)?(g=d,Ext.each(a,function(a){e=Ext.fly(g,"_internal").insertSibling(a,b,c),f&&(g=e)}),e):(a=a||{},a.nodeType||a.dom?(e=d.dom.parentNode.insertBefore(Ext.getDom(a),f?d.dom.nextSibling:d.dom),c||(e=Ext.get(e))):f&&!d.dom.nextSibling?e=Ext.DomHelper.append(d.dom.parentNode,a,!c):e=Ext.DomHelper[f?"insertAfter":"insertBefore"](d.dom,a,!c),e)},replace:function(a){return a=Ext.get(a),this.insertBefore(a),a.remove(),this},replaceWith:function(a){var b=this;return a.nodeType||a.dom||typeof a=="string"?(a=Ext.get(a),b.dom.parentNode.insertBefore(a,b.dom)):a=Ext.DomHelper.insertBefore(b.dom,a),delete Ext.cache[b.id],Ext.removeNode(b.dom),b.id=Ext.id(b.dom=a),Ext.Element.addToCache(b.isFlyweight?new Ext.Element(b.dom):b),b},createChild:function(a,b,c){return a=a||{tag:"div"},b?Ext.DomHelper.insertBefore(b,a,c!==!0):Ext.DomHelper[this.dom.firstChild?"append":"insertFirst"](this.dom,a,c!==!0)},wrap:function(a,b){var c=Ext.DomHelper.insertBefore(this.dom,a||{tag:"div"},!b),d=c.dom||c;return d.appendChild(this.dom),c},insertHtml:function(a,b,c){var d=Ext.DomHelper.insertHtml(a,this.dom,b);return c?Ext.get(d):d}}),function(){var a=Ext.Element,b=Ext.supports,c=document.defaultView,d=/alpha\(opacity=(.*)\)/i,e=/^\s+|\s+$/g,f=/\s+/,g=/\w/g,h=/table-row|table-.*-group/,i="_internal",j="padding",k="margin",l="border",m="-left",n="-right",o="-top",p="-bottom",q="-width",r=Math,s="hidden",t="isClipped",u="overflow",v="overflow-x",w="overflow-y",x="originalClip",y={l:l+m+q,r:l+n+q,t:l+o+q,b:l+p+q},z={l:j+m,r:j+n,t:j+o,b:j+p},A={l:k+m,r:k+n,t:k+o,b:k+p},B=a.data;a.boxMarkup='<div class="{0}-tl"><div class="{0}-tr"><div class="{0}-tc"></div></div></div><div class="{0}-ml"><div class="{0}-mr"><div class="{0}-mc"></div></div></div><div class="{0}-bl"><div class="{0}-br"><div class="{0}-bc"></div></div></div>',a.inheritedProps={fontSize:1,fontStyle:1,opacity:1},Ext.override(a,{adjustWidth:function(a){var b=this,c=typeof a=="number";return c&&b.autoBoxAdjust&&!b.isBorderBox()&&(a-=b.getBorderWidth("lr")+b.getPadding("lr")),c&&a<0?0:a},adjustHeight:function(a){var b=this,c=typeof a=="number";return c&&b.autoBoxAdjust&&!b.isBorderBox()&&(a-=b.getBorderWidth("tb")+b.getPadding("tb")),c&&a<0?0:a},addCls:function(a){var b=this,c=[],d=b.dom.className.replace(e,"")==""?"":" ",g,h,i;if(a===undefined)return b;if(Object.prototype.toString.call(a)!=="[object Array]")typeof a=="string"&&(a=a.replace(e,"").split(f),a.length===1?(a=a[0],b.hasCls(a)||(b.dom.className+=d+a)):this.addCls(a));else{for(g=0,h=a.length;g<h;g++)i=a[g],typeof i=="string"&&(" "+b.dom.className+" ").indexOf(" "+i+" ")==-1&&c.push(i);c.length&&(b.dom.className+=d+c.join(" "))}return b},removeCls:function(a){var b=this,c,d,g,h,i;if(a===undefined)return b;Object.prototype.toString.call(a)!=="[object Array]"&&(a=a.replace(e,"").split(f));if(b.dom&&b.dom.className){i=b.dom.className.replace(e,"").split(f);for(c=0,g=a.length;c<g;c++)h=a[c],typeof h=="string"&&(h=h.replace(e,""),d=Ext.Array.indexOf(i,h),d!=-1&&Ext.Array.erase(i,d,1));b.dom.className=i.join(" ")}return b},radioCls:function(a){var b=this.dom.parentNode.childNodes,c,d,e;a=Ext.isArray(a)?a:[a];for(d=0,e=b.length;d<e;d++)c=b[d],c&&c.nodeType==1&&Ext.fly(c,"_internal").removeCls(a);return this.addCls(a)},toggleCls:Ext.supports.ClassList?function(a){return this.dom.classList.toggle(Ext.String.trim(a)),this}:function(a){return this.hasCls(a)?this.removeCls(a):this.addCls(a)},hasCls:Ext.supports.ClassList?function(a){if(!a)return!1;a=a.split(f);var b=a.length,c=0;for(;c<b;c++)if(a[c]&&this.dom.classList.contains(a[c]))return!0;return!1}:function(a){return a&&(" "+this.dom.className+" ").indexOf(" "+a+" ")!=-1},replaceCls:function(a,b){return this.removeCls(a).addCls(b)},isStyle:function(a,b){return this.getStyle(a)==b},getStyle:function(){return c&&c.getComputedStyle?function(d){var e=this.dom,f,g,h,i,j;return e==document?null:(d=a.normalize(d),h=(f=e.style[d])?f:(g=c.getComputedStyle(e,""))?g[d]:null,d=="marginRight"&&h!="0px"&&!b.RightMargin&&(j=a.getRightMarginFixCleaner(e),i=this.getStyle("display"),e.style.display="inline-block",h=c.getComputedStyle(e,"").marginRight,e.style.display=i,j()),d=="backgroundColor"&&h=="rgba(0, 0, 0, 0)"&&!b.TransparentColor&&(h="transparent"),h)}:function(b){var c=this.dom,e,f;if(c==document)return null;b=a.normalize(b);do{if(b=="opacity"){if(c.style.filter.match){e=c.style.filter.match(d);if(e){var g=parseFloat(e[1]);if(!isNaN(g))return g?g/100:0}}return 1}if(!Ext.isIE6)return c.style[b]||((f=c.currentStyle)?f[b]:null);try{return c.style[b]||((f=c.currentStyle)?f[b]:null)}catch(h){}if(!a.inheritedProps[b])break;c=c.parentNode}while(c);return null}}(),getColor:function(a,b,c){var d=this.getStyle(a),e=c||c===""?c:"#",f;return!d||/transparent|inherit/.test(d)?b:(/^r/.test(d)?Ext.each(d.slice(4,d.length-1).split(","),function(a){f=parseInt(a,10),e+=(f<16?"0":"")+f.toString(16)}):(d=d.replace("#",""),e+=d.length==3?d.replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"):d),e.length>5?e.toLowerCase():b)},setStyle:function(b,c){var d=this,e,f;if(!d.dom)return d;typeof b=="string"&&(e={},e[b]=c,b=e);for(f in b)b.hasOwnProperty(f)&&(c=Ext.value(b[f],""),f=="opacity"?d.setOpacity(c):d.dom.style[a.normalize(f)]=c);return d},setOpacity:function(a,b){var c=this,f=c.dom,g,h;return c.dom?(h=c.dom.style,!b||!c.anim?Ext.supports.Opacity?h.opacity=a:(a=a<1?"alpha(opacity="+a*100+")":"",g=h.filter.replace(d,"").replace(e,""),h.zoom=1,h.filter=g+(g.length>0?" ":"")+a):(Ext.isObject(b)||(b={duration:350,easing:"ease-in"}),c.animate(Ext.applyIf({to:{opacity:a}},b))),c):c},clearOpacity:function(){var a=this.dom.style;return Ext.supports.Opacity?a.opacity=a["-moz-opacity"]=a["-khtml-opacity"]="":Ext.isEmpty(a.filter)||(a.filter=a.filter.replace(d,"").replace(e,"")),this},adjustDirect2DDimension:function(a){var b=this,c=b.dom,d=b.getStyle("display"),e=c.style.display,f=c.style.position,g=a==="width"?0:1,i;return d==="inline"&&(c.style.display="inline-block"),c.style.position=d.match(h)?"absolute":"static",i=(parseFloat(b.getStyle(a))||parseFloat(c.currentStyle.msTransformOrigin.split(" ")[g])*2)%1,c.style.position=f,d==="inline"&&(c.style.display=e),i},getHeight:function(a,b){var c=this,d=c.dom,e=Ext.isIE&&c.isStyle("display","none"),f,g,h,i;return Ext.isIEQuirks&&(h=d.style,g=h.overflow,c.setStyle({overflow:"hidden"})),f=d.offsetHeight,f=r.max(f,e?0:d.clientHeight)||0,!e&&Ext.supports.Direct2DBug&&(i=c.adjustDirect2DDimension("height"),b?f+=i:i>0&&i<.5&&f++),a&&(f-=c.getBorderWidth("tb")+c.getPadding("tb")),Ext.isIEQuirks&&c.setStyle({overflow:g}),f<0&&(f=0),f},getWidth:function(a,b){var c=this,d=c.dom,e=Ext.isIE&&c.isStyle("display","none"),f,g,h,i,j,k;return Ext.isIEQuirks&&(i=d.style,h=i.overflow,c.setStyle({overflow:"hidden"})),Ext.isOpera10_5?(d.parentNode.currentStyle.position==="relative"&&(k=d.parentNode.style.position,d.parentNode.style.position="static",g=d.offsetWidth,d.parentNode.style.position=k),g=Math.max(g||0,d.offsetWidth)):Ext.supports.BoundingClientRect?(f=d.getBoundingClientRect(),g=f.right-f.left,g=b?g:Math.ceil(g)):g=d.offsetWidth,g=r.max(g,e?0:d.clientWidth)||0,!e&&Ext.supports.Direct2DBug&&(j=c.adjustDirect2DDimension("width"),b?g+=j:j>0&&j<.5&&g++),a&&(g-=c.getBorderWidth("lr")+c.getPadding("lr")),Ext.isIEQuirks&&c.setStyle({overflow:h}),g<0&&(g=0),g},setWidth:function(a,b){var c=this;return a=c.adjustWidth(a),!b||!c.anim?c.dom.style.width=c.addUnits(a):(Ext.isObject(b)||(b={}),c.animate(Ext.applyIf({to:{width:a}},b))),c},setHeight:function(a,b){var c=this;return a=c.adjustHeight(a),!b||!c.anim?c.dom.style.height=c.addUnits(a):(Ext.isObject(b)||(b={}),c.animate(Ext.applyIf({to:{height:a}},b))),c},getBorderWidth:function(a){return this.addStyles(a,y)},getPadding:function(a){return this.addStyles(a,z)},clip:function(){var a=this,b=a.dom;return B(b,t)||(B(b,t,!0),B(b,x,{o:a.getStyle(u),x:a.getStyle(v),y:a.getStyle(w)}),a.setStyle(u,s),a.setStyle(v,s),a.setStyle(w,s)),a},unclip:function(){var a=this,b=a.dom,c;return B(b,t)&&(B(b,t,!1),c=B(b,x),c.o&&a.setStyle(u,c.o),c.x&&a.setStyle(v,c.x),c.y&&a.setStyle(w,c.y)),a},addStyles:function(a,b){var c=0,d=a.match(g),e=0,f=d.length,h,i;for(;e<f;e++)h=d[e],i=h&&parseInt(this.getStyle(b[h]),10),i&&(c+=r.abs(i));return c},margins:A,applyStyles:function(a){return Ext.DomHelper.applyStyles(this.dom,a),this},getStyles:function(){var a={},b=arguments.length,c=0,d;for(;c<b;++c)d=arguments[c],a[d]=this.getStyle(d);return a},boxWrap:function(b){b=b||Ext.baseCSSPrefix+"box";var c=Ext.get(this.insertHtml("beforeBegin","<div class='"+b+"'>"+Ext.String.format(a.boxMarkup,b)+"</div>"));return Ext.DomQuery.selectNode("."+b+"-mc",c.dom).appendChild(this.dom),c},setSize:function(a,b,c){var d=this;return Ext.isObject(a)&&(c=b,b=a.height,a=a.width),a=d.adjustWidth(a),b=d.adjustHeight(b),!c||!d.anim?(!Ext.isIEQuirks&&(Ext.isIE6||Ext.isIE7)&&d.dom.offsetTop,d.dom.style.width=d.addUnits(a),d.dom.style.height=d.addUnits(b)):(c===!0&&(c={}),d.animate(Ext.applyIf({to:{width:a,height:b}},c))),d},getComputedHeight:function(){var a=this,b=Math.max(a.dom.offsetHeight,a.dom.clientHeight);return b||(b=parseFloat(a.getStyle("height"))||0,a.isBorderBox()||(b+=a.getFrameWidth("tb"))),b},getComputedWidth:function(){var a=this,b=Math.max(a.dom.offsetWidth,a.dom.clientWidth);return b||(b=parseFloat(a.getStyle("width"))||0,a.isBorderBox()||(b+=a.getFrameWidth("lr"))),b},getFrameWidth:function(a,b){return b&&this.isBorderBox()?0:this.getPadding(a)+this.getBorderWidth(a)},addClsOnOver:function(a){var b=this.dom;return this.hover(function(){Ext.fly(b,i).addCls(a)},function(){Ext.fly(b,i).removeCls(a)}),this},addClsOnFocus:function(a){var b=this,c=b.dom;return b.on("focus",function(){Ext.fly(c,i).addCls(a)}),b.on("blur",function(){Ext.fly(c,i).removeCls(a)}),b},addClsOnClick:function(a){var b=this.dom;return this.on("mousedown",function(){Ext.fly(b,i).addCls(a);var c=Ext.getDoc(),d=function(){Ext.fly(b,i).removeCls(a),c.removeListener("mouseup",d)};c.on("mouseup",d)}),this},getViewSize:function(){var b=this,c=b.dom,d=c==Ext.getDoc().dom||c==Ext.getBody().dom,e,f,g;if(d)g={width:a.getViewWidth(),height:a.getViewHeight()};else{if(Ext.isIE6||Ext.isIEQuirks)e=c.style,f=e.overflow,b.setStyle({overflow:"hidden"});g={width:c.clientWidth,height:c.clientHeight},(Ext.isIE6||Ext.isIEQuirks)&&b.setStyle({overflow:f})}return g},getStyleSize:function(){var b=this,c=document,d=this.dom,e=d==c||d==c.body,f=d.style,g,h;return e?{width:a.getViewWidth(),height:a.getViewHeight()}:(f.width&&f.width!="auto"&&(g=parseFloat(f.width),b.isBorderBox()&&(g-=b.getFrameWidth("lr"))),f.height&&f.height!="auto"&&(h=parseFloat(f.height),b.isBorderBox()&&(h-=b.getFrameWidth("tb"))),{width:g||b.getWidth(!0),height:h||b.getHeight(!0)})},getSize:function(a){return{width:this.getWidth(a),height:this.getHeight(a)}},repaint:function(){var a=this.dom;return this.addCls(Ext.baseCSSPrefix+"repaint"),setTimeout(function(){Ext.fly(a).removeCls(Ext.baseCSSPrefix+"repaint")},1),this},selectable:function(){var a=this;return a.dom.unselectable="off",a.on("selectstart",function(a){return a.stopPropagation(),!0}),a.applyStyles("-moz-user-select: text; -khtml-user-select: text;"),a.removeCls(Ext.baseCSSPrefix+"unselectable"),a},unselectable:function(){var a=this;return a.dom.unselectable="on",a.swallowEvent("selectstart",!0),a.applyStyles("-moz-user-select:-moz-none;-khtml-user-select:none;"),a.addCls(Ext.baseCSSPrefix+"unselectable"),a},getMargin:function(a){var b=this,c={t:"top",l:"left",r:"right",b:"bottom"},d={},e;if(!a){for(e in b.margins)d[c[e]]=parseFloat(b.getStyle(b.margins[e]))||0;return d}return b.addStyles.call(b,a,b.margins)}})}(),Ext.Element.VISIBILITY=1,Ext.Element.DISPLAY=2,Ext.Element.OFFSETS=3,Ext.Element.ASCLASS=4,Ext.Element.visibilityCls=Ext.baseCSSPrefix+"hide-nosize",Ext.Element.addMethods(function(){var a=Ext.Element,b="opacity",c="visibility",d="display",e="hidden",f="offsets",g="asclass",h="none",i="nosize",j="originalDisplay",k="visibilityMode",l="isVisible",m=a.data,n=function(a){var b=m(a,j);return b===undefined&&m(a,j,b=""),b},o=function(a){var b=m(a,k);return b===undefined&&m(a,k,b=1),b};return{originalDisplay:"",visibilityMode:1,setVisibilityMode:function(a){return m(this.dom,k,a),this},isVisible:function(){var b=this,f=b.dom,g=m(f,l);return typeof g=="boolean"?g:(g=!b.isStyle(c,e)&&!b.isStyle(d,h)&&(o(f)!=a.ASCLASS||!b.hasCls(b.visibilityCls||a.visibilityCls)),m(f,l,g),g)},setVisible:function(b,h){var j=this,k,n,q,r,s=j.dom,t=o(s);if(typeof h=="string"){switch(h){case d:t=a.DISPLAY;break;case c:t=a.VISIBILITY;break;case f:t=a.OFFSETS;break;case i:case g:t=a.ASCLASS}j.setVisibilityMode(t),h=!1}if(!h||!j.anim)if(t==a.ASCLASS)j[b?"removeCls":"addCls"](j.visibilityCls||a.visibilityCls);else{if(t==a.DISPLAY)return j.setDisplayed(b);t==a.OFFSETS?b?j.hideModeStyles&&(j.applyStyles(j.hideModeStyles||{position:"",top:"",left:""}),delete j.hideModeStyles):(j.hideModeStyles||(j.hideModeStyles={position:j.getStyle("position"),top:j.getStyle("top"),left:j.getStyle("left")}),j.applyStyles({position:"absolute",top:"-10000px",left:"-10000px"})):(j.fixDisplay(),s.style.visibility=b?"":e)}else b&&(j.setOpacity(.01),j.setVisible(!0)),Ext.isObject(h)||(h={duration:350,easing:"ease-in"}),j.animate(Ext.applyIf({callback:function(){b||j.setVisible(!1).setOpacity(1)},to:{opacity:b?1:0}},h));return m(s,l,b),j},hasMetrics:function(){var b=this.dom;return this.isVisible()||o(b)==a.OFFSETS||o(b)==a.VISIBILITY},toggle:function(a){var b=this;return b.setVisible(!b.isVisible(),b.anim(a)),b},setDisplayed:function(a){return typeof a=="boolean"&&(a=a?n(this.dom):h),this.setStyle(d,a),this},fixDisplay:function(){var a=this;a.isStyle(d,h)&&(a.setStyle(c,e),a.setStyle(d,n(this.dom)),a.isStyle(d,h)&&a.setStyle(d,"block"))},hide:function(a){return typeof a=="string"?(this.setVisible(!1,a),this):(this.setVisible(!1,this.anim(a)),this)},show:function(a){return typeof a=="string"?(this.setVisible(!0,a),this):(this.setVisible(!0,this.anim(a)),this)}}}()),Ext.applyIf(Ext.Element.prototype,{animate:function(a){var b=this;return b.id||(b=Ext.get(b.dom)),Ext.fx.Manager.hasFxBlock(b.id)?b:(Ext.fx.Manager.queueFx(Ext.create("Ext.fx.Anim",b.anim(a))),this)},anim:function(a){if(!Ext.isObject(a))return a?{}:!1;var b=this,c=a.duration||Ext.fx.Anim.prototype.duration,d=a.easing||"ease",e;return a.stopAnimation&&b.stopAnimation(),Ext.applyIf(a,Ext.fx.Manager.getFxDefaults(b.id)),Ext.fx.Manager.setFxDefaults(b.id,{delay:0}),e={target:b,remove:a.remove,alternate:a.alternate||!1,duration:c,easing:d,callback:a.callback,listeners:a.listeners,iterations:a.iterations||1,scope:a.scope,block:a.block,concurrent:a.concurrent,delay:a.delay||0,paused:!0,keyframes:a.keyframes,from:a.from||{},to:Ext.apply({},a)},Ext.apply(e.to,a.to),delete e.to.to,delete e.to.from,delete e.to.remove,delete e.to.alternate,delete e.to.keyframes,delete e.to.iterations,delete e.to.listeners,delete e.to.target,delete e.to.paused,delete e.to.callback,delete e.to.scope,delete e.to.duration,delete e.to.easing,delete e.to.concurrent,delete e.to.block,delete e.to.stopAnimation,delete e.to.delay,e},slideIn:function(a,b,c){var d=this,e=d.dom.style,f,g;return a=a||"t",b=b||{},f=function(){var f=this,i=b.listeners,j,k,l,m,n;c||d.fixDisplay(),j=d.getBox(),a!="t"&&a!="b"||j.height!==0?(a=="l"||a=="r")&&j.width===0&&(j.width=d.dom.scrollWidth):j.height=d.dom.scrollHeight,k=d.getPositioning(),d.setSize(j.width,j.height),m=d.wrap({style:{visibility:c?"visible":"hidden"}}),m.setPositioning(k),m.isStyle("position","static")&&m.position("relative"),d.clearPositioning("auto"),m.clip(),d.setStyle({visibility:"",position:"absolute"}),c&&m.setSize(j.width,j.height);switch(a){case"t":n={from:{width:j.width+"px",height:"0px"},to:{width:j.width+"px",height:j.height+"px"}},e.bottom="0px";break;case"l":n={from:{width:"0px",height:j.height+"px"},to:{width:j.width+"px",height:j.height+"px"}},e.right="0px";break;case"r":n={from:{x:j.x+j.width,width:"0px",height:j.height+"px"},to:{x:j.x,width:j.width+"px",height:j.height+"px"}};break;case"b":n={from:{y:j.y+j.height,width:j.width+"px",height:"0px"},to:{y:j.y,width:j.width+"px",height:j.height+"px"}};break;case"tl":n={from:{x:j.x,y:j.y,width:"0px",height:"0px"},to:{width:j.width+"px",height:j.height+"px"}},e.bottom="0px",e.right="0px";break;case"bl":n={from:{x:j.x+j.width,width:"0px",height:"0px"},to:{x:j.x,width:j.width+"px",height:j.height+"px"}},e.right="0px";break;case"br":n={from:{x:j.x+j.width,y:j.y+j.height,width:"0px",height:"0px"},to:{x:j.x,y:j.y,width:j.width+"px",height:j.height+"px"}};break;case"tr":n={from:{y:j.y+j.height,width:"0px",height:"0px"},to:{y:j.y,width:j.width+"px",height:j.height+"px"}},e.bottom="0px"}m.show(),g=Ext.apply({},b),delete g.listeners,g=Ext.create("Ext.fx.Anim",Ext.applyIf(g,{target:m,duration:500,easing:"ease-out",from:c?n.to:n.from,to:c?n.from:n.to})),g.on("afteranimate",function(){c?(d.setPositioning(k),b.useDisplay?d.setDisplayed(!1):d.hide()):(d.clearPositioning(),d.setPositioning(k)),m.dom&&(m.dom.parentNode.insertBefore(d.dom,m.dom),m.remove()),d.setSize(j.width,j.height),f.end()}),i&&g.on(i)},d.animate({duration:b.duration?b.duration*2:1e3,listeners:{beforeanimate:{fn:f},afteranimate:{fn:function(){g&&g.running&&g.end()}}}}),d},slideOut:function(a,b){return this.slideIn(a,b,!0)},puff:function(a){var b=this,c;return a=Ext.applyIf(a||{},{easing:"ease-out",duration:500,useDisplay:!1}),c=function(){b.clearOpacity(),b.show();var c=b.getBox(),d=b.getStyle("fontSize"),e=b.getPositioning();this.to={width:c.width*2,height:c.height*2,x:c.x-c.width/2,y:c.y-c.height/2,opacity:0,fontSize:"200%"},this.on("afteranimate",function(){b.dom&&(a.useDisplay?b.setDisplayed(!1):b.hide(),b.clearOpacity(),b.setPositioning(e),b.setStyle({fontSize:d}))})},b.animate({duration:a.duration,easing:a.easing,listeners:{beforeanimate:{fn:c}}}),b},switchOff:function(a){var b=this,c;return a=Ext.applyIf(a||{},{easing:"ease-in",duration:500,remove:!1,useDisplay:!1}),c=function(){var c=this,d=b.getSize(),e=b.getXY(),f,g;b.clearOpacity(),b.clip(),g=b.getPositioning(),f=Ext.create("Ext.fx.Animator",{target:b,duration:a.duration,easing:a.easing,keyframes:{33:{opacity:.3},66:{height:1,y:e[1]+d.height/2},100:{width:1,x:e[0]+d.width/2}}}),f.on("afteranimate",function(){a.useDisplay?b.setDisplayed(!1):b.hide(),b.clearOpacity(),b.setPositioning(g),b.setSize(d),c.end()})},b.animate({duration:a.duration*2,listeners:{beforeanimate:{fn:c}}}),b},frame:function(a,b,c){var d=this,e;return a=a||"#C3DAF9",b=b||1,c=c||{},e=function(){d.show();var e=this,f=d.getBox(),g=Ext.getBody().createChild({style:{position:"absolute","pointer-events":"none","z-index":35e3,border:"0px solid "+a}}),h;h=Ext.create("Ext.fx.Anim",{target:g,duration:c.duration||1e3,iterations:b,from:{top:f.y,left:f.x,borderWidth:0,opacity:1,height:f.height,width:f.width},to:{top:f.y-20,left:f.x-20,borderWidth:10,opacity:0,height:f.height+40,width:f.width+40}}),h.on("afteranimate",function(){g.remove(),e.end()})},d.animate({duration:c.duration*2||2e3,listeners:{beforeanimate:{fn:e}}}),d},ghost:function(a,b){var c=this,d;return a=a||"b",d=function(){var b=c.getWidth(),d=c.getHeight(),e=c.getXY(),f=c.getPositioning(),g={opacity:0};switch(a){case"t":g.y=e[1]-d;break;case"l":g.x=e[0]-b;break;case"r":g.x=e[0]+b;break;case"b":g.y=e[1]+d;break;case"tl":g.x=e[0]-b,g.y=e[1]-d;break;case"bl":g.x=e[0]-b,g.y=e[1]+d;break;case"br":g.x=e[0]+b,g.y=e[1]+d;break;case"tr":g.x=e[0]+b,g.y=e[1]-d}this.to=g,this.on("afteranimate",function(){c.dom&&(c.hide(),c.clearOpacity(),c.setPositioning(f))})},c.animate(Ext.applyIf(b||{},{duration:500,easing:"ease-out",listeners:{beforeanimate:{fn:d}}})),c},highlight:function(a,b){var c=this,d=c.dom,e={},f,g,h,i,j,k;return b=b||{},i=b.listeners||{},h=b.attr||"backgroundColor",e[h]=a||"ffff9c",b.to?g=b.to:(g={},g[h]=b.endColor||c.getColor(h,"ffffff","")),b.listeners=Ext.apply(Ext.apply({},i),{beforeanimate:function(){f=d.style[h],c.clearOpacity(),c.show(),j=i.beforeanimate;if(j)return k=j.fn||j,k.apply(j.scope||i.scope||window,arguments)},afteranimate:function(){d&&(d.style[h]=f),j=i.afteranimate,j&&(k=j.fn||j,k.apply(j.scope||i.scope||window,arguments))}}),c.animate(Ext.apply({},b,{duration:1e3,easing:"ease-in",from:e,to:g})),c},pause:function(a){var b=this;return Ext.fx.Manager.setFxDefaults(b.id,{delay:a}),b},fadeIn:function(a){return this.animate(Ext.apply({},a,{opacity:1})),this},fadeOut:function(a){return this.animate(Ext.apply({},a,{opacity:0})),this},scale:function(a,b,c){return this.animate(Ext.apply({},c,{width:a,height:b})),this},shift:function(a){return this.animate(a),this}}),Ext.applyIf(Ext.Element,{unitRe:/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,camelRe:/(-[a-z])/gi,opacityRe:/alpha\(opacity=(.*)\)/i,cssRe:/([a-z0-9-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*);?/gi,propertyCache:{},defaultUnit:"px",borders:{l:"border-left-width",r:"border-right-width",t:"border-top-width",b:"border-bottom-width"},paddings:{l:"padding-left",r:"padding-right",t:"padding-top",b:"padding-bottom"},margins:{l:"margin-left",r:"margin-right",t:"margin-top",b:"margin-bottom"},addUnits:Ext.Element.prototype.addUnits,parseBox:function(a){if(Ext.isObject(a))return{top:a.top||0,right:a.right||0,bottom:a.bottom||0,left:a.left||0};typeof a!="string"&&(a=a.toString());var b=a.split(" "),c=b.length;return c==1?b[1]=b[2]=b[3]=b[0]:c==2?(b[2]=b[0],b[3]=b[1]):c==3&&(b[3]=b[1]),{top:parseFloat(b[0])||0,right:parseFloat(b[1])||0,bottom:parseFloat(b[2])||0,left:parseFloat(b[3])||0}},unitizeBox:function(a,b){var c=this.addUnits,d=this.parseBox(a);return c(d.top,b)+" "+c(d.right,b)+" "+c(d.bottom,b)+" "+c(d.left,b)},camelReplaceFn:function(a,b){return b.charAt(1).toUpperCase()},normalize:function(a){return a=="float"&&(a=Ext.supports.Float?"cssFloat":"styleFloat"),this.propertyCache[a]||(this.propertyCache[a]=a.replace(this.camelRe,this.camelReplaceFn))},getDocumentHeight:function(){return Math.max(Ext.isStrict?document.documentElement.scrollHeight:document.body.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return Math.max(Ext.isStrict?document.documentElement.scrollWidth:document.body.scrollWidth,this.getViewportWidth())},getViewportHeight:function(){return window.innerHeight},getViewportWidth:function(){return window.innerWidth},getViewSize:function(){return{width:window.innerWidth,height:window.innerHeight}},getOrientation:function(){return Ext.supports.OrientationChange?window.orientation==0?"portrait":"landscape":window.innerHeight>window.innerWidth?"portrait":"landscape"},fromPoint:function(a,b){return Ext.get(document.elementFromPoint(a,b))},parseStyles:function(a){var b={},c=this.cssRe,d;if(a){c.lastIndex=0;while(d=c.exec(a))b[d[1]]=d[2]}return b}}),Ext.CompositeElementLite=function(a,b){this.elements=[],this.add(a,b),this.el=new Ext.Element.Flyweight},Ext.CompositeElementLite.prototype={isComposite:!0,getElement:function(a){var b=this.el;return b.dom=a,b.id=a.id,b},transformElement:function(a){return Ext.getDom(a)},getCount:function(){return this.elements.length},add:function(a,b){var c=this,d=c.elements;if(!a)return this;typeof a=="string"?a=Ext.Element.selectorFunction(a,b):a.isComposite?a=a.elements:Ext.isIterable(a)||(a=[a]);for(var e=0,f=a.length;e<f;++e)d.push(c.transformElement(a[e]));return c},invoke:function(a,b){var c=this,d=c.elements,e=d.length,f,g;for(g=0;g<e;g++)f=d[g],f&&Ext.Element.prototype[a].apply(c.getElement(f),b);return c},item:function(a){var b=this,c=b.elements[a],d=null;return c&&(d=b.getElement(c)),d},addListener:function(a,b,c,d){var e=this.elements,f=e.length,g,h;for(g=0;g<f;g++)h=e[g],h&&Ext.EventManager.on(h,a,b,c||h,d);return this},each:function(a,b){var c=this,d=c.elements,e=d.length,f,g;for(f=0;f<e;f++){g=d[f];if(g){g=this.getElement(g);if(a.call(b||g,g,c,f)===!1)break}}return c},fill:function(a){var b=this;return b.elements=[],b.add(a),b},filter:function(a){var b=[],c=this,d=Ext.isFunction(a)?a:function(b){return b.is(a)};return c.each(function(a,e,f){d(a,f)!==!1&&(b[b.length]=c.transformElement(a))}),c.elements=b,c},indexOf:function(a){return Ext.Array.indexOf(this.elements,this.transformElement(a))},replaceElement:function(a,b,c){var d=isNaN(a)?this.indexOf(a):a,e;return d>-1&&(b=Ext.getDom(b),c&&(e=this.elements[d],e.parentNode.insertBefore(b,e),Ext.removeNode(e)),Ext.Array.splice(this.elements,d,1,b)),this},clear:function(){this.elements=[]}},Ext.CompositeElementLite.prototype.on=Ext.CompositeElementLite.prototype.addListener,Ext.CompositeElementLite.importElementMethods=function(){var a,b=Ext.Element.prototype,c=Ext.CompositeElementLite.prototype;for(a in b)typeof b[a]=="function"&&function(a){c[a]=c[a]||function(){return this.invoke(a,arguments)}}.call(c,a)},Ext.CompositeElementLite.importElementMethods(),Ext.DomQuery&&(Ext.Element.selectorFunction=Ext.DomQuery.select),Ext.Element.select=function(a,b){var c;return typeof a=="string"?c=Ext.Element.selectorFunction(a,b):a.length!==undefined&&(c=a),new Ext.CompositeElementLite(c)},Ext.select=Ext.Element.select,Ext.util.DelayedTask=function(a,b,c){var d=this,e,f=function(){clearInterval(e),e=null,a.apply(b,c||[])};this.delay=function(h,i,j,k){d.cancel(),a=i||a,b=j||b,c=k||c,e=setInterval(f,h)},this.cancel=function(){e&&(clearInterval(e),e=null)}},Ext.require("Ext.util.DelayedTask",function(){Ext.util.Event=Ext.extend(Object,function(){function a(a,b,c,d){return b.task=new Ext.util.DelayedTask,function(){b.task.delay(c.buffer,a,d,Ext.Array.toArray(arguments))}}function b(a,b,c,d){return function(){var f=new Ext.util.DelayedTask;b.tasks||(b.tasks=[]),b.tasks.push(f),f.delay(c.delay||10,a,d,Ext.Array.toArray(arguments))}}function c(a,b,c,d){return function(){return b.ev.removeListener(b.fn,d),a.apply(d,arguments)}}return{isEvent:!0,constructor:function(a,b){this.name=b,this.observable=a,this.listeners=[]},addListener:function(a,b,c){var d=this,e;b=b||d.observable,d.isListening(a,b)||(e=d.createListener(a,b,c),d.firing&&(d.listeners=d.listeners.slice(0)),d.listeners.push(e))},createListener:function(d,e,f){f=f||{},e=e||this.observable;var g={fn:d,scope:e,o:f,ev:this},h=d;return f.single&&(h=c(h,g,f,e)),f.delay&&(h=b(h,g,f,e)),f.buffer&&(h=a(h,g,f,e)),g.fireFn=h,g},findListener:function(a,b){var c=this.listeners,d=c.length,e,f;while(d--){e=c[d];if(e){f=e.scope;if(e.fn==a&&(f==b||f==this.observable))return d}}return-1},isListening:function(a,b){return this.findListener(a,b)!==-1},removeListener:function(a,b){var c=this,d,e,f;d=c.findListener(a,b);if(d!=-1){e=c.listeners[d],c.firing&&(c.listeners=c.listeners.slice(0)),e.task&&(e.task.cancel(),delete e.task),f=e.tasks&&e.tasks.length;if(f){while(f--)e.tasks[f].cancel();delete e.tasks}return Ext.Array.erase(c.listeners,d,1),!0}return!1},clearListeners:function(){var a=this.listeners,b=a.length;while(b--)this.removeListener(a[b].fn,a[b].scope)},fire:function(){var a=this,b=a.listeners,c=b.length,d,e,f;if(c>0){a.firing=!0;for(d=0;d<c;d++){f=b[d],e=arguments.length?Array.prototype.slice.call(arguments,0):[],f.o&&e.push(f.o);if(f&&f.fireFn.apply(f.scope||a.observable,e)===!1)return a.firing=!1}}return a.firing=!1,!0}}}())}),Ext.EventManager={hasBoundOnReady:!1,hasFiredReady:!1,readyTimeout:null,hasOnReadyStateChange:!1,readyEvent:new Ext.util.Event,checkReadyState:function(){var a=Ext.EventManager;if(window.attachEvent){if(window!=top)return!1;try{document.documentElement.doScroll("left")}catch(b){return!1}return a.fireDocReady(),!0}return document.readyState=="complete"?(a.fireDocReady(),!0):(a.readyTimeout=setTimeout(arguments.callee,2),!1)},bindReadyEvent:function(){var a=Ext.EventManager;if(a.hasBoundOnReady)return;document.addEventListener?(document.addEventListener("DOMContentLoaded",a.fireDocReady,!1),window.addEventListener("load",a.fireDocReady,!1)):(a.checkReadyState()||(document.attachEvent("onreadystatechange",a.checkReadyState),a.hasOnReadyStateChange=!0),window.attachEvent("onload",a.fireDocReady,!1)),a.hasBoundOnReady=!0},fireDocReady:function(){var a=Ext.EventManager;a.hasFiredReady||(a.hasFiredReady=!0,document.addEventListener?(document.removeEventListener("DOMContentLoaded",a.fireDocReady,!1),window.removeEventListener("load",a.fireDocReady,!1)):(a.readyTimeout!==null&&clearTimeout(a.readyTimeout),a.hasOnReadyStateChange&&document.detachEvent("onreadystatechange",a.checkReadyState),window.detachEvent("onload",a.fireDocReady)),Ext.supports.init()),Ext.isReady||(Ext.isReady=!0,a.onWindowUnload(),a.readyEvent.fire())},onDocumentReady:function(a,b,c){c=c||{};var d=Ext.EventManager,e=d.readyEvent;c.single=!0,Ext.isReady?(e.addListener(a,b,c),e.fire()):(c.delay=c.delay||1,e.addListener(a,b,c),d.bindReadyEvent())},stoppedMouseDownEvent:new Ext.util.Event,propRe:/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate|freezeEvent)$/,getId:function(a){var b=!1,c;return a=Ext.getDom(a),a===document||a===window?c=a===document?Ext.documentId:Ext.windowId:c=Ext.id(a),a&&(a.getElementById||a.navigator)&&(b=!0),Ext.cache[c]||(Ext.Element.addToCache(new Ext.Element(a),c),b&&(Ext.cache[c].skipGarbageCollection=!0)),c},prepareListenerConfig:function(a,b,c){var d=this,e=d.propRe,f,g,h;for(f in b)b.hasOwnProperty(f)&&(e.test(f)||(g=b[f],Ext.isFunction(g)?h=[a,f,g,b.scope,b]:h=[a,f,g.fn,g.scope,g],c===!0?d.removeListener.apply(this,h):d.addListener.apply(d,h)))},normalizeEvent:function(a,b){return/mouseenter|mouseleave/.test(a)&&!Ext.supports.MouseEnterLeave?(b&&(b=Ext.Function.createInterceptor(b,this.contains,this)),a=a=="mouseenter"?"mouseover":"mouseout"):a=="mousewheel"&&!Ext.supports.MouseWheel&&!Ext.isOpera&&(a="DOMMouseScroll"),{eventName:a,fn:b}},contains:function(a){var b=a.browserEvent.currentTarget,c=this.getRelatedTarget(a);if(b&&b.firstChild)while(c){if(c===b)return!1;c=c.parentNode,c&&c.nodeType!=1&&(c=null)}return!0},addListener:function(a,b,c,d,e){if(typeof b!="string"){this.prepareListenerConfig(a,b);return}var f=Ext.getDom(a),g,h;e=e||{},g=this.normalizeEvent(b,c),h=this.createListenerWrap(f,b,g.fn,d,e),f.attachEvent?f.attachEvent("on"+g.eventName,h):f.addEventListener(g.eventName,h,e.capture||!1),f==document&&b=="mousedown"&&this.stoppedMouseDownEvent.addListener(h),this.getEventListenerCache(f,b).push({fn:c,wrap:h,scope:d})},removeListener:function(a,b,c,d){if(typeof b!="string"){this.prepareListenerConfig(a,b,!0);return}var e=Ext.getDom(a),f=this.getEventListenerCache(e,b),g=this.normalizeEvent(b).eventName,h=f.length,i,j,k,l;while(h--){j=f[h];if(j&&(!c||j.fn==c)&&(!d||j.scope===d)){k=j.wrap,k.task&&(clearTimeout(k.task),delete k.task),i=k.tasks&&k.tasks.length;if(i){while(i--)clearTimeout(k.tasks[i]);delete k.tasks}e.detachEvent?e.detachEvent("on"+g,k):e.removeEventListener(g,k,!1),k&&e==document&&b=="mousedown"&&this.stoppedMouseDownEvent.removeListener(k),Ext.Array.erase(f,h,1)}}},removeAll:function(a){var b=Ext.getDom(a),c,d;if(!b)return;c=this.getElementEventCache(b);for(d in c)c.hasOwnProperty(d)&&this.removeListener(b,d);Ext.cache[b.id].events={}},purgeElement:function(a,b){var c=Ext.getDom(a),d=0,e;b?this.removeListener(c,b):this.removeAll(c);if(c&&c.childNodes)for(e=a.childNodes.length;d<e;d++)this.purgeElement(a.childNodes[d],b)},createListenerWrap:function(a,b,c,d,e){e=e||{};var f,g;return function h(j,k){g||(f=["if(!Ext) {return;}"],e.buffer||e.delay||e.freezeEvent?f.push("e = new Ext.EventObjectImpl(e, "+(e.freezeEvent?"true":"false")+");"):f.push("e = Ext.EventObject.setEvent(e);"),e.delegate?(f.push('var t = e.getTarget("'+e.delegate+'", this);'),f.push("if(!t) {return;}")):f.push("var t = e.target;"),e.target&&f.push("if(e.target !== options.target) {return;}"),e.stopEvent?f.push("e.stopEvent();"):(e.preventDefault&&f.push("e.preventDefault();"),e.stopPropagation&&f.push("e.stopPropagation();")),e.normalized===!1&&f.push("e = e.browserEvent;"),e.buffer&&(f.push("(wrap.task && clearTimeout(wrap.task));"),f.push("wrap.task = setTimeout(function(){")),e.delay&&(f.push("wrap.tasks = wrap.tasks || [];"),f.push("wrap.tasks.push(setTimeout(function(){")),f.push("fn.call(scope || dom, e, t, options);"),e.single&&f.push("Ext.EventManager.removeListener(dom, ename, fn, scope);"),e.delay&&f.push("}, "+e.delay+"));"),e.buffer&&f.push("}, "+e.buffer+");"),g=Ext.functionFactory("e","options","fn","scope","ename","dom","wrap","args",f.join("\n"))),g.call(a,j,e,c,d,b,a,h,k)}},getEventListenerCache:function(a,b){if(!a)return[];var c=this.getElementEventCache(a);return c[b]||(c[b]=[])},getElementEventCache:function(a){if(!a)return{};var b=Ext.cache[this.getId(a)];return b.events||(b.events={})},mouseLeaveRe:/(mouseout|mouseleave)/,mouseEnterRe:/(mouseover|mouseenter)/,stopEvent:function(a){this.stopPropagation(a),this.preventDefault(a)},stopPropagation:function(a){a=a.browserEvent||a,a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},preventDefault:function(a){a=a.browserEvent||a;if(a.preventDefault)a.preventDefault();else{a.returnValue=!1;try{if(a.ctrlKey||a.keyCode>111&&a.keyCode<124)a.keyCode=-1}catch(b){}}},getRelatedTarget:function(a){a=a.browserEvent||a;var b=a.relatedTarget;return b||(this.mouseLeaveRe.test(a.type)?b=a.toElement:this.mouseEnterRe.test(a.type)&&(b=a.fromElement)),this.resolveTextNode(b)},getPageX:function(a){return this.getXY(a)[0]},getPageY:function(a){return this.getXY(a)[1]},getPageXY:function(a){a=a.browserEvent||a;var b=a.pageX,c=a.pageY,d=document.documentElement,e=document.body;return!b&&b!==0&&(b=a.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),c=a.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),[b,c]},getTarget:function(a){return a=a.browserEvent||a,this.resolveTextNode(a.target||a.srcElement)},resolveTextNode:Ext.isGecko?function(a){if(!a)return;var b=HTMLElement.prototype.toString.call(a);if(b=="[xpconnect wrapped native prototype]"||b=="[object XULElement]")return;return a.nodeType==3?a.parentNode:a}:function(a){return a&&a.nodeType==3?a.parentNode:a},curWidth:0,curHeight:0,onWindowResize:function(a,b,c){var d=this.resizeEvent;d||(this.resizeEvent=d=new Ext.util.Event,this.on(window,"resize",this.fireResize,this,{buffer:100})),d.addListener(a,b,c)},fireResize:function(){var a=this,b=Ext.Element.getViewWidth(),c=Ext.Element.getViewHeight();if(a.curHeight!=c||a.curWidth!=b)a.curHeight=c,a.curWidth=b,a.resizeEvent.fire(b,c)},removeResizeListener:function(a,b){this.resizeEvent&&this.resizeEvent.removeListener(a,b)},onWindowUnload:function(){var a=this.unloadEvent;a||(this.unloadEvent=a=new Ext.util.Event,this.addListener(window,"unload",this.fireUnload,this))},fireUnload:function(){try{this.removeUnloadListener();if(Ext.isGecko3){var a=Ext.ComponentQuery.query("gridview"),b=0,c=a.length;for(;b<c;b++)a[b].scrollToTop()}var d,e=Ext.cache;for(d in e)e.hasOwnProperty(d)&&Ext.EventManager.removeAll(d)}catch(f){}},removeUnloadListener:function(){this.unloadEvent&&this.removeListener(window,"unload",this.fireUnload)},useKeyDown:Ext.isWebKit?parseInt(navigator.userAgent.match(/AppleWebKit\/(\d+)/)[1],10)>=525:!(Ext.isGecko&&!Ext.isWindows||Ext.isOpera),getKeyEvent:function(){return this.useKeyDown?"keydown":"keypress"}},Ext.onReady=function(a,b,c){Ext.Loader.onReady(a,b,!0,c)},Ext.onDocumentReady=Ext.EventManager.onDocumentReady,Ext.EventManager.on=Ext.EventManager.addListener,Ext.EventManager.un=Ext.EventManager.removeListener,function(){var a=function(){function f(a){c.push(b+a)}var a=document.body||document.getElementsByTagName("body")[0],b=Ext.baseCSSPrefix,c=[b+"body"],d=[],e;return a?(e=a.parentNode,Ext.isIE&&(f("ie"),Ext.isIE6?f("ie6"):(f("ie7p"),Ext.isIE7?f("ie7"):(f("ie8p"),Ext.isIE8?f("ie8"):(f("ie9p"),Ext.isIE9&&f("ie9")))),(Ext.isIE6||Ext.isIE7)&&f("ie7m"),(Ext.isIE6||Ext.isIE7||Ext.isIE8)&&f("ie8m"),(Ext.isIE7||Ext.isIE8)&&f("ie78")),Ext.isGecko&&(f("gecko"),Ext.isGecko3&&f("gecko3"),Ext.isGecko4&&f("gecko4"),Ext.isGecko5&&f("gecko5")),Ext.isOpera&&f("opera"),Ext.isWebKit&&f("webkit"),Ext.isSafari&&(f("safari"),Ext.isSafari2&&f("safari2"),Ext.isSafari3&&f("safari3"),Ext.isSafari4&&f("safari4"),Ext.isSafari5&&f("safari5")),Ext.isChrome&&f("chrome"),Ext.isMac&&f("mac"),Ext.isLinux&&f("linux"),Ext.supports.CSS3BorderRadius||f("nbr"),Ext.supports.CSS3LinearGradient||f("nlg"),Ext.scopeResetCSS||f("reset"),e&&(Ext.isStrict&&(Ext.isIE6||Ext.isIE7)?Ext.isBorderBox=!1:Ext.isBorderBox=!0,d.push(b+(Ext.isBorderBox?"border-box":"strict")),Ext.isStrict||d.push(b+"quirks"),Ext.fly(e,"_internal").addCls(d)),Ext.fly(a,"_internal").addCls(c),!0):!1};Ext.onReady(a)}(),Ext.define("Ext.EventObjectImpl",{uses:["Ext.util.Point"],BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,WHEEL_SCALE:function(){var a;return Ext.isGecko?a=3:Ext.isMac?(Ext.isSafari&&Ext.webKitVersion>=532?a=120:a=12,a*=3):a=120,a}(),clickRe:/(dbl)?click/,safariKeys:{3:13,63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35},btnMap:Ext.isIE?{1:0,4:1,2:2}:{0:0,1:1,2:2},constructor:function(a,b){a&&this.setEvent(a.browserEvent||a,b)},setEvent:function(a,b){var c=this,d,e;return a==c||a&&a.browserEvent?a:(c.browserEvent=a,a?(d=a.button?c.btnMap[a.button]:a.which?a.which-1:-1,c.clickRe.test(a.type)&&d==-1&&(d=0),e={type:a.type,button:d,shiftKey:a.shiftKey,ctrlKey:a.ctrlKey||a.metaKey||!1,altKey:a.altKey,keyCode:a.keyCode,charCode:a.charCode,target:Ext.EventManager.getTarget(a),relatedTarget:Ext.EventManager.getRelatedTarget(a),currentTarget:a.currentTarget,xy:b?c.getXY():null}):e={button:-1,shiftKey:!1,ctrlKey:!1,altKey:!1,keyCode:0,charCode:0,target:null,xy:[0,0]},Ext.apply(c,e),c)},stopEvent:function(){this.stopPropagation(),this.preventDefault()},preventDefault:function(){this.browserEvent&&Ext.EventManager.preventDefault(this.browserEvent)},stopPropagation:function(){var a=this.browserEvent;a&&(a.type=="mousedown"&&Ext.EventManager.stoppedMouseDownEvent.fire(this),Ext.EventManager.stopPropagation(a))},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.normalizeKey(this.keyCode||this.charCode)},normalizeKey:function(a){return Ext.isWebKit?this.safariKeys[a]||a:a},getPageX:function(){return this.getX()},getPageY:function(){return this.getY()},getX:function(){return this.getXY()[0]},getY:function(){return this.getXY()[1]},getXY:function(){return this.xy||(this.xy=Ext.EventManager.getPageXY(this.browserEvent)),this.xy},getTarget:function(a,b,c){return a?Ext.fly(this.target).findParent(a,b,c):c?Ext.get(this.target):this.target},getRelatedTarget:function(a,b,c){return a?Ext.fly(this.relatedTarget).findParent(a,b,c):c?Ext.get(this.relatedTarget):this.relatedTarget},correctWheelDelta:function(a){var b=this.WHEEL_SCALE,c=Math.round(a/b);return!c&&a&&(c=a<0?-1:1),c},getWheelDeltas:function(){var a=this,b=a.browserEvent,c=0,d=0;return Ext.isDefined(b.wheelDeltaX)?(c=b.wheelDeltaX,d=b.wheelDeltaY):b.wheelDelta?d=b.wheelDelta:b.detail&&(d=-b.detail,d>100?d=3:d<-100&&(d=-3),Ext.isDefined(b.axis)&&b.axis===b.HORIZONTAL_AXIS&&(c=d,d=0)),{x:a.correctWheelDelta(c),y:a.correctWheelDelta(d)}},getWheelDelta:function(){var a=this.getWheelDeltas();return a.y},within:function(a,b,c){if(a){var d=b?this.getRelatedTarget():this.getTarget(),e;if(d)return e=Ext.fly(a).contains(d),!e&&c&&(e=d==Ext.getDom(a)),e}return!1},isNavKeyPress:function(){var a=this,b=this.normalizeKey(a.keyCode);return b>=33&&b<=40||b==a.RETURN||b==a.TAB||b==a.ESC},isSpecialKey:function(){var a=this.normalizeKey(this.keyCode);return this.type=="keypress"&&this.ctrlKey||this.isNavKeyPress()||a==this.BACKSPACE||a>=16&&a<=20||a>=44&&a<=46},getPoint:function(){var a=this.getXY();return Ext.create("Ext.util.Point",a[0],a[1])},hasModifier:function(){return this.ctrlKey||this.altKey||this.shiftKey||this.metaKey},injectEvent:function(){function d(b,c){var d=b!="mousemove";return function(e,f){var j=f.getXY(),k=a.createMouseEvent(e.ownerDocument,b,!0,d,c,j[0],j[1],f.ctrlKey,f.altKey,f.shiftKey,f.metaKey,f.button,f.relatedTarget);a.fireEvent(e,b,k)}}function e(a,b){}var a,b={};if(!Ext.isIE&&document.createEvent)a={createHtmlEvent:function(a,b,c,d){var e=a.createEvent("HTMLEvents");return e.initEvent(b,c,d),e},createMouseEvent:function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=a.createEvent("MouseEvents"),o=a.defaultView||window;return n.initMouseEvent?n.initMouseEvent(b,c,d,o,e,f,g,f,g,h,i,j,k,l,m):(n=a.createEvent("UIEvents"),n.initEvent(b,c,d),n.view=o,n.detail=e,n.screenX=f,n.screenY=g,n.clientX=f,n.clientY=g,n.ctrlKey=h,n.altKey=i,n.metaKey=k,n.shiftKey=j,n.button=l,n.relatedTarget=m),n},createUIEvent:function(a,b,c,d,e){var f=a.createEvent("UIEvents"),g=a.defaultView||window;return f.initUIEvent(b,c,d,g,e),f},fireEvent:function(a,b,c){a.dispatchEvent(c)},fixTarget:function(a){return a==window&&!a.dispatchEvent?document:a}};else if(document.createEventObject){var c={0:1,1:4,2:2};a={createHtmlEvent:function(a,b,c,d){var e=a.createEventObject();return e.bubbles=c,e.cancelable=d,e},createMouseEvent:function(a,b,d,e,f,g,h,i,j,k,l,m,n){var o=a.createEventObject();return o.bubbles=d,o.cancelable=e,o.detail=f,o.screenX=g,o.screenY=h,o.clientX=g,o.clientY=h,o.ctrlKey=i,o.altKey=j,o.shiftKey=k,o.metaKey=l,o.button=c[m]||m,o.relatedTarget=n,o},createUIEvent:function(a,b,c,d,e){var f=a.createEventObject();return f.bubbles=c,f.cancelable=d,f},fireEvent:function(a,b,c){a.fireEvent("on"+b,c)},fixTarget:function(a){return a==document?document.documentElement:a}}}return Ext.Object.each({load:[!1,!1],unload:[!1,!1],select:[!0,!1],change:[!0,!1],submit:[!0,!0],reset:[!0,!1],resize:[!0,!1],scroll:[!0,!1]},function(c,d){var e=d[0],f=d[1];b[c]=function(b,d){var j=a.createHtmlEvent(c,e,f);a.fireEvent(b,c,j)}}),Ext.each(["click","dblclick","mousedown","mouseup","mouseover","mousemove","mouseout"],function(a){b[a]=d(a,1)}),Ext.Object.each({focusin:[!0,!1],focusout:[!0,!1],activate:[!0,!0],focus:[!1,!1],blur:[!1,!1]},function(c,d){var e=d[0],f=d[1];b[c]=function(b,d){var j=a.createUIEvent(b.ownerDocument,c,e,f,1);a.fireEvent(b,c,j)}}),a||(b={},a={fixTarget:function(a){return a}}),function(c){var d=this,f=b[d.type]||e,g=c?c.dom||c:d.getTarget();g=a.fixTarget(g),f(g,d)}}()},function(){Ext.EventObject=new Ext.EventObjectImpl}),function(){function g(a,b,c){return function(){a.selectionStart=b,a.selectionEnd=c}}var a=document,b=null,c=a.compatMode=="CSS1Compat",d=Ext.Element,e=function(a){return f||(f=new Ext.Element.Flyweight),f.dom=a,f},f;!("activeElement"in a)&&a.addEventListener&&a.addEventListener("focus",function(c){c&&c.target&&(b=c.target==a?null:c.target)},!0),Ext.apply(d,{isAncestor:function(a,b){var c=!1;a=Ext.getDom(a),b=Ext.getDom(b);if(a&&b){if(a.contains)return a.contains(b);if(a.compareDocumentPosition)return!!(a.compareDocumentPosition(b)&16);while(b=b.parentNode)c=b==a||c}return c},getActiveElement:function(){return a.activeElement||b},getRightMarginFixCleaner:function(c){var e=Ext.supports,f=e.DisplayChangeInputSelectionBug,i=e.DisplayChangeTextAreaSelectionBug;if(f||i){var j=a.activeElement||b,k=j&&j.tagName,l,m;if(i&&k=="TEXTAREA"||f&&k=="INPUT"&&j.type=="text")if(d.isAncestor(c,j)){l=j.selectionStart,m=j.selectionEnd;if(Ext.isNumber(l)&&Ext.isNumber(m))return g(j,l,m)}}return Ext.emptyFn},getViewWidth:function(a){return a?d.getDocumentWidth():d.getViewportWidth()},getViewHeight:function(a){return a?d.getDocumentHeight():d.getViewportHeight()},getDocumentHeight:function(){return Math.max(c?a.documentElement.scrollHeight:a.body.scrollHeight,d.getViewportHeight())},getDocumentWidth:function(){return Math.max(c?a.documentElement.scrollWidth:a.body.scrollWidth,d.getViewportWidth())},getViewportHeight:function(){return Ext.isIE?Ext.isStrict?a.documentElement.clientHeight:a.body.clientHeight:self.innerHeight},getViewportWidth:function(){return!Ext.isStrict&&!Ext.isOpera?a.body.clientWidth:Ext.isIE?a.documentElement.clientWidth:self.innerWidth},getY:function(a){return d.getXY(a)[1]},getX:function(a){return d.getXY(a)[0]},getOffsetParent:function(a){a=Ext.getDom(a);try{return a.offsetParent}catch(b){var c=document.body;return a==c?null:c}},getXY:function(b){var c,f,g,i,j,k,l=0,m=0,n,o,p=a.body||a.documentElement,q;b=Ext.getDom(b);if(b!=p){o=e(b).isStyle("position","absolute");if(b.getBoundingClientRect)try{g=b.getBoundingClientRect(),n=e(document).getScroll(),q=[Math.round(g.left+n.left),Math.round(g.top+n.top)]}catch(r){}if(!q){for(c=b;c;c=d.getOffsetParent(c))f=e(c),l+=c.offsetLeft,m+=c.offsetTop,o=o||f.isStyle("position","absolute"),Ext.isGecko&&(m+=i=parseInt(f.getStyle("borderTopWidth"),10)||0,l+=j=parseInt(f.getStyle("borderLeftWidth"),10)||0,c!=b&&!f.isStyle("overflow","visible")&&(l+=j,m+=i));Ext.isSafari&&o&&(l-=p.offsetLeft,m-=p.offsetTop),Ext.isGecko&&!o&&(k=e(p),l+=parseInt(k.getStyle("borderLeftWidth"),10)||0,m+=parseInt(k.getStyle("borderTopWidth"),10)||0),c=b.parentNode;while(c&&c!=p){if(!Ext.isOpera||c.tagName!="TR"&&!e(c).isStyle("display","inline"))l-=c.scrollLeft,m-=c.scrollTop;c=c.parentNode}q=[l,m]}}return q||[0,0]},setXY:function(a,b){(a=Ext.fly(a,"_setXY")).position();var c=a.translatePoints(b),d=a.dom.style,e;for(e in c)isNaN(c[e])||(d[e]=c[e]+"px")},setX:function(a,b){d.setXY(a,[b,!1])},setY:function(a,b){d.setXY(a,[!1,b])},serializeForm:function(a){var b=a.elements||(document.forms[a]||Ext.getDom(a)).elements,c=!1,d=encodeURIComponent,e,f="",g,h;return Ext.each(b,function(a){e=a.name,g=a.type,!a.disabled&&e&&(/select-(one|multiple)/i.test(g)?Ext.each(a.options,function(a){a.selected&&(h=a.hasAttribute?a.hasAttribute("value"):a.getAttributeNode("value").specified,f+=Ext.String.format("{0}={1}&",d(e),d(h?a.value:a.text)))}):/file|undefined|reset|button/i.test(g)||(!/radio|checkbox/i.test(g)||!!a.checked)&&(g!="submit"||!c)&&(f+=d(e)+"="+d(a.value)+"&",c=/submit/i.test(g)))}),f.substr(0,f.length-1)}})}(),Ext.Element.addMethods(function(){var a=/button|input|textarea|select|object/;return{monitorMouseLeave:function(a,b,c){var d=this,e,f={mouseleave:function(f){e=setTimeout(Ext.Function.bind(b,c||d,[f]),a)},mouseenter:function(){clearTimeout(e)},freezeEvent:!0};return d.on(f),f},swallowEvent:function(a,b){function d(a){a.stopPropagation(),b&&a.preventDefault()}var c=this;return Ext.isArray(a)?(Ext.each(a,function(a){c.on(a,d)}),c):(c.on(a,d),c)},relayEvent:function(a,b){this.on(a,function(c){b.fireEvent(a,c)})},clean:function(a){var b=this,c=b.dom,d=c.firstChild,e,f=-1;if(Ext.Element.data(c,"isCleaned")&&a!==!0)return b;while(d)e=d.nextSibling,d.nodeType==3?/\S/.test(d.nodeValue)?e&&e.nodeType==3&&(d.appendData(Ext.String.trim(e.data)),c.removeChild(e),e=d.nextSibling,d.nodeIndex=++f):c.removeChild(d):(Ext.fly(d).clean(),d.nodeIndex=++f),d=e;return Ext.Element.data(c,"isCleaned",!0),b},load:function(a){return this.getLoader().load(a),this},getLoader:function(){var a=this.dom,b=Ext.Element.data,c=b(a,"loader");return c||(c=Ext.create("Ext.ElementLoader",{target:this}),b(a,"loader",c)),c},update:function(a,b,c){var d=this,e,f,g;return d.dom?(a=a||"",f=d.dom,b!==!0?(f.innerHTML=a,Ext.callback(c,d),d):(e=Ext.id(),a+='<span id="'+e+'"></span>',g=setInterval(function(){if(!document.getElementById(e))return!1;clearInterval(g);var b=document,f=b.getElementsByTagName("head")[0],h=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig,i=/\ssrc=([\'\"])(.*?)\1/i,j=/\stype=([\'\"])(.*?)\1/i,k,l,m,n,o,p;while(k=h.exec(a))l=k[1],m=l?l.match(i):!1,m&&m[2]?(p=b.createElement("script"),p.src=m[2],n=l.match(j),n&&n[2]&&(p.type=n[2]),f.appendChild(p)):k[2]&&k[2].length>0&&(window.execScript?window.execScript(k[2]):window.eval(k[2]));o=b.getElementById(e),o&&Ext.removeNode(o),Ext.callback(c,d)},20),f.innerHTML=a.replace(/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,""),d)):d},removeAllListeners:function(){return this.removeAnchor(),Ext.EventManager.removeAll(this.dom),this},getScopeParent:function(){var a=this.dom.parentNode;return Ext.scopeResetCSS?a.parentNode:a},createProxy:function(a,b,c){a=typeof a=="object"?a:{tag:"div",cls:a};var d=this,e=b?Ext.DomHelper.append(b,a,!0):Ext.DomHelper.insertBefore(d.dom,a,!0);return e.setVisibilityMode(Ext.Element.DISPLAY),e.hide(),c&&d.setBox&&d.getBox&&e.setBox(d.getBox()),e},focusable:function(){var b=this.dom,c=b.nodeName.toLowerCase(),d=!1,e=!isNaN(b.tabIndex);return b.disabled||(a.test(c)?d=!0:d=c=="a"?b.href||e:e),d&&this.isVisible(!0)}}}()),Ext.Element.prototype.clearListeners=Ext.Element.prototype.removeAllListeners,Ext.Element.addMethods({getAnchorXY:function(a,b,c){a=(a||"tl").toLowerCase(),c=c||{};var d=this,e=d.dom==document.body||d.dom==document,f=c.width||e?Ext.Element.getViewWidth():d.getWidth(),g=c.height||e?Ext.Element.getViewHeight():d.getHeight(),h,i=Math.round,j=d.getXY(),k=d.getScroll(),l=e?k.left:b?0:j[0],m=e?k.top:b?0:j[1],n={c:[i(f*.5),i(g*.5)],t:[i(f*.5),0],l:[0,i(g*.5)],r:[f,i(g*.5)],b:[i(f*.5),g],tl:[0,0],bl:[0,g],br:[f,g],tr:[f,0]};return h=n[a],[h[0]+l,h[1]+m]},anchorTo:function(a,b,c,d,e,f){var g=this,h=g.dom,i=!Ext.isEmpty(e),j=function(){Ext.fly(h).alignTo(a,b,c,d),Ext.callback(f,Ext.fly(h))},k=this.getAnchor();return this.removeAnchor(),Ext.apply(k,{fn:j,scroll:i}),Ext.EventManager.onWindowResize(j,null),i&&Ext.EventManager.on(window,"scroll",j,null,{buffer:isNaN(e)?50:e}),j.call(g),g},removeAnchor:function(){var a=this,b=this.getAnchor();return b&&b.fn&&(Ext.EventManager.removeResizeListener(b.fn),b.scroll&&Ext.EventManager.un(window,"scroll",b.fn),delete b.fn),a},getAnchor:function(){var a=Ext.Element.data,b=this.dom;if(!b)return;var c=a(b,"_anchor");return c||(c=a(b,"_anchor",{})),c},getAlignVector:function(a,b,c){var d=this,e={t:"top",l:"left",r:"right",b:"bottom"},f=d.getRegion(),g;a=Ext.get(a),!!a&&!!a.dom,g=a.getRegion()},getAlignToXY:function(a,b,c){a=Ext.get(a),!!a&&!!a.dom,c=c||[0,0],b=(!b||b=="?"?"tl-bl?":!/-/.test(b)&&b!==""?"tl-"+b:b||"tl-bl").toLowerCase();var d=this,e=d.dom,f,g,h,i,j,k,l,m=Ext.Element.getViewWidth()-10,n=Ext.Element.getViewHeight()-10,o,p,q,r,s,t,u=document,v=u.documentElement,w=u.body,x=(v.scrollLeft||w.scrollLeft||0)+5,y=(v.scrollTop||w.scrollTop||0)+5,z=!1,A="",B="",C=b.match(/^([a-z]+)-([a-z]+)(\?)?$/);return!!C,A=C[1],B=C[2],z=!!C[3],f=d.getAnchorXY(A,!0),g=a.getAnchorXY(B,!1),h=g[0]-f[0]+c[0],i=g[1]-f[1]+c[1],z&&(j=d.getWidth(),k=d.getHeight(),l=a.getRegion(),o=A.charAt(0),p=A.charAt(A.length-1),q=B.charAt(0),r=B.charAt(B.length-1),s=o=="t"&&q=="b"||o=="b"&&q=="t",t=p=="r"&&r=="l"||p=="l"&&r=="r",h+j>m+x&&(h=t?l.left-j:m+x-j),h<x&&(h=t?l.right:x),i+k>n+y&&(i=s?l.top-k:n+y-k),i<y&&(i=s?l.bottom:y)),[h,i]},alignTo:function(a,b,c,d){var e=this;return e.setXY(e.getAlignToXY(a,b,c),e.anim&&!!d?e.anim(d):!1)},adjustForConstraints:function(a,b){var c=this.getConstrainVector(b,a);return c&&(a[0]+=c[0],a[1]+=c[1]),a},getConstrainVector:function(a,b){a instanceof Ext.util.Region||(a=Ext.get(a).getViewRegion());var c=this.getRegion(),d=[0,0],e=this.shadow&&this.shadow.offset,f=!1;return b&&c.translateBy(b[0]-c.x,b[1]-c.y),e&&a.adjust(0,-e,-e,e),c.right>a.right&&(f=!0,d[0]=a.right-c.right),c.left+d[0]<a.left&&(f=!0,d[0]=a.left-c.left),c.bottom>a.bottom&&(f=!0,d[1]=a.bottom-c.bottom),c.top+d[1]<a.top&&(f=!0,d[1]=a.top-c.top),f?d:!1},getCenterXY:function(){return this.getAlignToXY(document,"c-c")},center:function(a){return this.alignTo(a||document,"c-c")}}),function(){var a=Ext.Element,b="left",c="right",d="top",e="bottom",f="position",g="static",h="relative",i="auto",j="z-index";Ext.override(Ext.Element,{getX:function(){return a.getX(this.dom)},getY:function(){return a.getY(this.dom)},getXY:function(){return a.getXY(this.dom)},getOffsetsTo:function(a){var b=this.getXY(),c=Ext.fly(a,"_internal").getXY();return[b[0]-c[0],b[1]-c[1]]},setX:function(a,b){return this.setXY([a,this.getY()],b)},setY:function(a,b){return this.setXY([this.getX(),a],b)},setLeft:function(a){return this.setStyle(b,this.addUnits(a)),this},setTop:function(a){return this.setStyle(d,this.addUnits(a)),this},setRight:function(a){return this.setStyle(c,this.addUnits(a)),this},setBottom:function(a){return this.setStyle(e,this.addUnits(a)),this},setXY:function(b,c){var d=this;return!c||!d.anim?a.setXY(d.dom,b):(Ext.isObject(c)||(c={}),d.animate(Ext.applyIf({to:{x:b[0],y:b[1]}},c))),d},setLocation:function(a,b,c){return this.setXY([a,b],c)},moveTo:function(a,b,c){return this.setXY([a,b],c)},getLeft:function(a){return a?parseInt(this.getStyle(b),10)||0:this.getX()},getRight:function(a){var b=this;return a?b.getLeft(!0)+b.getWidth()||0:b.getX()+b.getWidth()},getTop:function(a){return a?parseInt(this.getStyle(d),10)||0:this.getY()},getBottom:function(a){var b=this;return a?b.getTop(!0)+b.getHeight()||0:b.getY()+b.getHeight()},position:function(a,b,c,d){var e=this;!a&&e.isStyle(f,g)?e.setStyle(f,h):a&&e.setStyle(f,a),b&&e.setStyle(j,b),(c||d)&&e.setXY([c||!1,d||!1])},clearPositioning:function(a){return a=a||"",this.setStyle({left:a,right:a,top:a,bottom:a,"z-index":"",position:g}),this},getPositioning:function(){var a=this.getStyle(b),g=this.getStyle(d);return{position:this.getStyle(f),left:a,right:a?"":this.getStyle(c),top:g,bottom:g?"":this.getStyle(e),"z-index":this.getStyle(j)}},setPositioning:function(a){var b=this,c=b.dom.style;return b.setStyle(a),a.right==i&&(c.right=""),a.bottom==i&&(c.bottom=""),b},translatePoints:function(a,c){Ext.isArray(a)&&(c=a[1],a=a[0]);var e=this,g=e.isStyle(f,h),i=e.getXY(),j=parseInt(e.getStyle(b),10),k=parseInt(e.getStyle(d),10);return Ext.isNumber(j)||(j=g?0:e.dom.offsetLeft),Ext.isNumber(k)||(k=g?0:e.dom.offsetTop),j=Ext.isNumber(a)?a-i[0]+j:undefined,k=Ext.isNumber(c)?c-i[1]+k:undefined,{left:j,top:k}},setBox:function(a,b,c){var d=this,e=a.width,f=a.height;return b&&!d.autoBoxAdjust&&!d.isBorderBox()&&(e-=d.getBorderWidth("lr")+d.getPadding("lr"),f-=d.getBorderWidth("tb")+d.getPadding("tb")),d.setBounds(a.x,a.y,e,f,c),d},getBox:function(a,b){var c=this,d,e,f,g=c.getBorderWidth,h=c.getPadding,i,j,k,l,m,n,o;return b?(e=parseInt(c.getStyle("left"),10)||0,f=parseInt(c.getStyle("top"),10)||0,d=[e,f]):d=c.getXY(),m=c.getWidth(),n=c.getHeight(),a?(i=g.call(c,"l")+h.call(c,"l"),j=g.call(c,"r")+h.call(c,"r"),k=g.call(c,"t")+h.call(c,"t"),l=g.call(c,"b")+h.call(c,"b"),o={x:d[0]+i,y:d[1]+k,0:d[0]+i,1:d[1]+k,width:m-(i+j),height:n-(k+l)}):o={x:d[0],y:d[1],0:d[0],1:d[1],width:m,height:n},o.right=o.x+o.width,o.bottom=o.y+o.height,o},move:function(a,b,c){var d=this,e=d.getXY(),f=e[0],g=e[1],h=[f-b,g],i=[f+b,g],j=[f,g-b],k=[f,g+b],l={l:h,left:h,r:i,right:i,t:j,top:j,up:j,b:k,bottom:k,down:k};a=a.toLowerCase(),d.moveTo(l[a][0],l[a][1],c)},setLeftTop:function(a,b){var c=this,d=c.dom.style;return d.left=c.addUnits(a),d.top=c.addUnits(b),c},getRegion:function(){return this.getPageBox(!0)},getViewRegion:function(){var a=this,b=a.dom===document.body,c,d,e,f,g,h;return b?(c=a.getScroll(),f=c.left,e=c.top,g=Ext.Element.getViewportWidth(),h=Ext.Element.getViewportHeight()):(d=a.getXY(),f=d[0]+a.getBorderWidth("l")+a.getPadding("l"),e=d[1]+a.getBorderWidth("t")+a.getPadding("t"),g=a.getWidth(!0),h=a.getHeight(!0)),Ext.create("Ext.util.Region",e,f+g,e+h,f)},getPageBox:function(a){var b=this,c=b.dom,d=c===document.body,e=d?Ext.Element.getViewWidth():c.offsetWidth,f=d?Ext.Element.getViewHeight():c.offsetHeight,g=b.getXY(),h=g[1],i=g[0]+e,j=g[1]+f,k=g[0];return a?Ext.create("Ext.util.Region",h,i,j,k):{left:k,top:h,width:e,height:f,right:i,bottom:j}},setBounds:function(a,b,c,d,e){var f=this;return!e||!f.anim?(f.setSize(c,d),f.setLocation(a,b)):(Ext.isObject(e)||(e={}),f.animate(Ext.applyIf({to:{x:a,y:b,width:f.adjustWidth(c),height:f.adjustHeight(d)}},e))),f},setRegion:function(a,b){return this.setBounds(a.left,a.top,a.right-a.left,a.bottom-a.top,b)}})}(),Ext.override(Ext.Element,{isScrollable:function(){var a=this.dom;return a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth},getScroll:function(){var a=this.dom,b=document,c=b.body,d=b.documentElement,e,f,g;return a==b||a==c?(Ext.isIE&&Ext.isStrict?(e=d.scrollLeft,f=d.scrollTop):(e=window.pageXOffset,f=window.pageYOffset),g={left:e||(c?c.scrollLeft:0),top:f||(c?c.scrollTop:0)}):g={left:a.scrollLeft,top:a.scrollTop},g},scrollTo:function(a,b,c){var d=/top/i.test(a),e=this,f=e.dom,g={},h;return!c||!e.anim?(h="scroll"+(d?"Top":"Left"),f[h]=b):(Ext.isObject(c)||(c={}),g["scroll"+(d?"Top":"Left")]=b,e.animate(Ext.applyIf({to:g},c))),e},scrollIntoView:function(a,b){a=Ext.getDom(a)||Ext.getBody().dom;var c=this.dom,d=this.getOffsetsTo(a),e=d[0]+a.scrollLeft,f=d[1]+a.scrollTop,g=f+c.offsetHeight,h=e+c.offsetWidth,i=a.clientHeight,j=parseInt(a.scrollTop,10),k=parseInt(a.scrollLeft,10),l=j+i,m=k+a.clientWidth;return c.offsetHeight>i||f<j?a.scrollTop=f:g>l&&(a.scrollTop=g-i),a.scrollTop=a.scrollTop,b!==!1&&(c.offsetWidth>a.clientWidth||e<k?a.scrollLeft=e:h>m&&(a.scrollLeft=h-a.clientWidth),a.scrollLeft=a.scrollLeft),this},scrollChildIntoView:function(a,b){Ext.fly(a,"_scrollChildIntoView").scrollIntoView(this,b)},scroll:function(a,b,c){if(!this.isScrollable())return!1;var d=this.dom,e=d.scrollLeft,f=d.scrollTop,g=d.scrollWidth,h=d.scrollHeight,i=d.clientWidth,j=d.clientHeight,k=!1,l,m={l:Math.min(e+b,g-i),r:l=Math.max(e-b,0),t:Math.max(f-b,0),b:Math.min(f+b,h-j)};return m.d=m.b,m.u=m.t,a=a.substr(0,1),(l=m[a])>-1&&(k=!0,this.scrollTo(a=="l"||a=="r"?"left":"top",l,this.anim(c))),k}}),Ext.Element.addMethods(function(){var a="visibility",b="display",c="hidden",d="none",e=Ext.baseCSSPrefix+"masked",f=Ext.baseCSSPrefix+"masked-relative",g=Ext.Element.data;return{isVisible:function(e){var f=!this.isStyle(a,c)&&!this.isStyle(b,d),g=this.dom.parentNode;if(e!==!0||!f)return f;while(g&&!/^body/i.test(g.tagName)){if(!Ext.fly(g,"_isVisible").isVisible())return!1;g=g.parentNode}return!0},isDisplayed:function(){return!this.isStyle(b,d)},enableDisplayMode:function(a){return this.setVisibilityMode(Ext.Element.DISPLAY),Ext.isEmpty(a)||g(this.dom,"originalDisplay",a),this},mask:function(a,b){var c=this,d=c.dom,h=d.style.setExpression,i=Ext.DomHelper,j=Ext.baseCSSPrefix+"mask-msg",k,l;(!/^body/i.test(d.tagName)||c.getStyle("position")!="static")&&c.addCls(f),k=g(d,"maskMsg"),k&&k.remove(),k=g(d,"mask"),k&&k.remove(),l=i.append(d,{cls:Ext.baseCSSPrefix+"mask"},!0),g(d,"mask",l),c.addCls(e),l.setDisplayed(!0);if(typeof a=="string"){var m=i.append(d,{cls:j,cn:{tag:"div"}},!0);g(d,"maskMsg",m),m.dom.className=b?j+" "+b:j,m.dom.firstChild.innerHTML=a,m.setDisplayed(!0),m.center(c)}return!Ext.supports.IncludePaddingInWidthCalculation&&h&&l.dom.style.setExpression("width",'this.parentNode.offsetWidth + "px"'),!Ext.supports.IncludePaddingInHeightCalculation&&h?l.dom.style.setExpression("height",'this.parentNode.offsetHeight + "px"'):Ext.isIE&&(!Ext.isIE7||!Ext.isStrict)&&c.getStyle("height")=="auto"&&l.setSize(undefined,c.getHeight()),l},unmask:function(){var a=this,b=a.dom,c=g(b,"mask"),d=g(b,"maskMsg");c&&(c.dom.style.clearExpression&&(c.dom.style.clearExpression("width"),c.dom.style.clearExpression("height")),d&&(d.remove(),g(b,"maskMsg",undefined)),c.remove(),g(b,"mask",undefined),a.removeCls([e,f]))},isMasked:function(){var a=this,b=g(a.dom,"mask"),c=g(a.dom,"maskMsg");return b&&b.isVisible()?(c&&c.center(a),!0):!1},createShim:function(){var a=document.createElement("iframe"),b;return a.frameBorder="0",a.className=Ext.baseCSSPrefix+"shim",a.src=Ext.SSL_SECURE_URL,b=Ext.get(this.dom.parentNode.insertBefore(a,this.dom)),b.autoBoxAdjust=!1,b}}}()),Ext.Element.addMethods({addKeyListener:function(a,b,c){var d;return typeof a!="object"||Ext.isArray(a)?d={key:a,fn:b,scope:c}:d={key:a.key,shift:a.shift,ctrl:a.ctrl,alt:a.alt,fn:b,scope:c},Ext.create("Ext.util.KeyMap",this,d)},addKeyMap:function(a){return Ext.create("Ext.util.KeyMap",this,a)}}),Ext.CompositeElementLite.importElementMethods(),Ext.apply(Ext.CompositeElementLite.prototype,{addElements:function(a,b){if(!a)return this;typeof a=="string"&&(a=Ext.Element.selectorFunction(a,b));var c=this.elements;return Ext.each(a,function(a){c.push(Ext.get(a))}),this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(a){return this.indexOf(a)!=-1},removeElement:function(a,b){var c=this,d=this.elements,e;return Ext.each(a,function(a){if(e=d[a]||d[a=c.indexOf(a)])b&&(e.dom?e.remove():Ext.removeNode(e)),Ext.Array.erase(d,a,1)}),this}}),Ext.CompositeElement=Ext.extend(Ext.CompositeElementLite,{constructor:function(a,b){this.elements=[],this.add(a,b)},getElement:function(a){return a},transformElement:function(a){return Ext.get(a)}}),Ext.Element.select=function(a,b,c){var d;return typeof a=="string"?d=Ext.Element.selectorFunction(a,c):a.length!==undefined&&(d=a),b===!0?new Ext.CompositeElement(d):new Ext.CompositeElementLite(d)},Ext.select=Ext.Element.select,Ext.define("Ext.util.Observable",{requires:["Ext.util.Event"],statics:{releaseCapture:function(a){a.fireEvent=this.prototype.fireEvent},capture:function(a,b,c){a.fireEvent=Ext.Function.createInterceptor(a.fireEvent,b,c)},observe:function(a,b){if(a)return a.isObservable||(Ext.applyIf(a,new this),this.capture(a.prototype,a.fireEvent,a)),Ext.isObject(b)&&a.on(b),a}},isObservable:!0,constructor:function(a){var b=this;Ext.apply(b,a),b.listeners&&(b.on(b.listeners),delete b.listeners),b.events=b.events||{},b.bubbleEvents&&b.enableBubble(b.bubbleEvents)},eventOptionsRe:/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate|element|vertical|horizontal|freezeEvent)$/,addManagedListener:function(a,b,c,d,e){var f=this,g=f.managedListeners=f.managedListeners||[],h;if(typeof b!="string"){e=b;for(b in e)e.hasOwnProperty(b)&&(h=e[b],f.eventOptionsRe.test(b)||f.addManagedListener(a,b,h.fn||h,h.scope||e.scope,h.fn?h:e))}else g.push({item:a,ename:b,fn:c,scope:d,options:e}),a.on(b,c,d,e)},removeManagedListener:function(a,b,c,d){var e=this,f,g,h,i,j;if(typeof b!="string"){f=b;for(b in f)f.hasOwnProperty(b)&&(g=f[b],e.eventOptionsRe.test(b)||e.removeManagedListener(a,b,g.fn||g,g.scope||f.scope))}h=e.managedListeners?e.managedListeners.slice():[];for(j=0,i=h.length;j<i;j++)e.removeManagedListenerItem(!1,h[j],a,b,c,d)},fireEvent:function(a){var b=a.toLowerCase(),c=this.events,d=c&&c[b],e=d&&d.bubble;return this.continueFireEvent(b,Ext.Array.slice(arguments,1),e)},continueFireEvent:function(a,b,c){var d=this,e,f,g=!0;do{if(d.eventsSuspended===!0)return(e=d.eventQueue)&&e.push([a,b,c]),g;f=d.events[a];if(f&&f!=1&&(g=f.fire.apply(f,b))===!1)break}while(c&&(d=d.getBubbleParent()));return g},getBubbleParent:function(){var a=this,b=a.getBubbleTarget&&a.getBubbleTarget();return b&&b.isObservable?b:null},addListener:function(a,b,c,d){var e=this,f,g;if(typeof a!="string"){d=a;for(a in d)d.hasOwnProperty(a)&&(f=d[a],e.eventOptionsRe.test(a)||e.addListener(a,f.fn||f,f.scope||d.scope,f.fn?f:d))}else a=a.toLowerCase(),e.events[a]=e.events[a]||!0,g=e.events[a]||!0,Ext.isBoolean(g)&&(e.events[a]=g=new Ext.util.Event(e,a)),g.addListener(b,c,Ext.isObject(d)?d:{})},removeListener:function(a,b,c){var d=this,e,f,g;if(typeof a!="string"){g=a;for(a in g)g.hasOwnProperty(a)&&(e=g[a],d.eventOptionsRe.test(a)||d.removeListener(a,e.fn||e,e.scope||g.scope))}else a=a.toLowerCase(),f=d.events[a],f&&f.isEvent&&f.removeListener(b,c)},clearListeners:function(){var a=this.events,b,c;for(c in a)a.hasOwnProperty(c)&&(b=a[c],b.isEvent&&b.clearListeners());this.clearManagedListeners()},clearManagedListeners:function(){var a=this.managedListeners||[],b=0,c=a.length;for(;b<c;b++)this.removeManagedListenerItem(!0,a[b]);this.managedListeners=[]},removeManagedListenerItem:function(a,b,c,d,e,f){if(a||b.item===c&&b.ename===d&&(!e||b.fn===e)&&(!f||b.scope===f))b.item.un(b.ename,b.fn,b.scope),a||Ext.Array.remove(this.managedListeners,b)},addEvents:function(a){var b=this,c,d,e;b.events=b.events||{};if(Ext.isString(a)){c=arguments,e=c.length;while(e--)b.events[c[e]]=b.events[c[e]]||!0}else Ext.applyIf(b.events,a)},hasListener:function(a){var b=this.events[a.toLowerCase()];return b&&b.isEvent===!0&&b.listeners.length>0},suspendEvents:function(a){this.eventsSuspended=!0,a&&!this.eventQueue&&(this.eventQueue=[])},resumeEvents:function(){var a=this,b=a.eventQueue;a.eventsSuspended=!1,delete a.eventQueue,b&&Ext.each(b,function(b){a.continueFireEvent.apply(a,b)})},relayEvents:function(a,b,c){c=c||"";var d=this,e=b.length,f=0,g,h;for(;f<e;f++)g=b[f].substr(c.length),h=c+g,d.events[h]=d.events[h]||!0,a.on(g,d.createRelayer(h))},createRelayer:function(a){var b=this;return function(){return b.fireEvent.apply(b,[a].concat(Array.prototype.slice.call(arguments,0,-1)))}},enableBubble:function(a){var b=this;Ext.isEmpty(a)||(a=Ext.isArray(a)?a:Ext.Array.toArray(arguments),Ext.each(a,function(a){a=a.toLowerCase();var c=b.events[a]||!0;Ext.isBoolean(c)&&(c=new Ext.util.Event(b,a),b.events[a]=c),c.bubble=!0}))}},function(){this.createAlias({on:"addListener",un:"removeListener",mon:"addManagedListener",mun:"removeManagedListener"}),this.observeClass=this.observe,Ext.apply(Ext.util.Observable.prototype,function(){function a(a){var b=(this.methodEvents=this.methodEvents||{})[a],c,d,e,f=this;if(!b){this.methodEvents[a]=b={},b.originalFn=this[a],b.methodName=a,b.before=[],b.after=[];var g=function(a,b,g){(d=a.apply(b||f,g))!==undefined&&(typeof d=="object"?(d.returnValue!==undefined?c=d.returnValue:c=d,e=!!d.cancel):d===!1?e=!0:c=d)};this[a]=function(){var a=Array.prototype.slice.call(arguments,0),j,k,l;c=d=undefined,e=!1;for(k=0,l=b.before.length;k<l;k++){j=b.before[k],g(j.fn,j.scope,a);if(e)return c}(d=b.originalFn.apply(f,a))!==undefined&&(c=d);for(k=0,l=b.after.length;k<l;k++){j=b.after[k],g(j.fn,j.scope,a);if(e)return c}return c}}return b}return{beforeMethod:function(b,c,d){a.call(this,b).before.push({fn:c,scope:d})},afterMethod:function(b,c,d){a.call(this,b).after.push({fn:c,scope:d})},removeMethodListener:function(a,b,c){var d=this.getMethodEvent(a),e,f;for(e=0,f=d.before.length;e<f;e++)if(d.before[e].fn==b&&d.before[e].scope==c){Ext.Array.erase(d.before,e,1);return}for(e=0,f=d.after.length;e<f;e++)if(d.after[e].fn==b&&d.after[e].scope==c){Ext.Array.erase(d.after,e,1);return}},toggleEventLogging:function(a){Ext.util.Observable[a?"capture":"releaseCapture"](this,function(a){Ext.isDefined(Ext.global.console)&&Ext.global.console.log(a,arguments)})}}}())}),Ext.define("Ext.util.Animate",{uses:["Ext.fx.Manager","Ext.fx.Anim"],animate:function(a){var b=this;return Ext.fx.Manager.hasFxBlock(b.id)?b:(Ext.fx.Manager.queueFx(Ext.create("Ext.fx.Anim",b.anim(a))),this)},anim:function(a){if(!Ext.isObject(a))return a?{}:!1;var b=this;return a.stopAnimation&&b.stopAnimation(),Ext.applyIf(a,Ext.fx.Manager.getFxDefaults(b.id)),Ext.apply({target:b,paused:!0},a)},stopFx:Ext.Function.alias(Ext.util.Animate,"stopAnimation"),stopAnimation:function(){return Ext.fx.Manager.stopAnimation(this.id),this},syncFx:function(){return Ext.fx.Manager.setFxDefaults(this.id,{concurrent:!0}),this},sequenceFx:function(){return Ext.fx.Manager.setFxDefaults(this.id,{concurrent:!1}),this},hasActiveFx:Ext.Function.alias(Ext.util.Animate,"getActiveAnimation"),getActiveAnimation:function(){return Ext.fx.Manager.getActiveAnimation(this.id)}},function(){Ext.applyIf(Ext.Element.prototype,this.prototype),Ext.CompositeElementLite.importElementMethods()}),Ext.define("Ext.state.Provider",{mixins:{observable:"Ext.util.Observable"},prefix:"ext-",constructor:function(a){a=a||{};var b=this;Ext.apply(b,a),b.addEvents("statechange"),b.state={},b.mixins.observable.constructor.call(b)},get:function(a,b){return typeof this.state[a]=="undefined"?b:this.state[a]},clear:function(a){var b=this;delete b.state[a],b.fireEvent("statechange",b,a,null)},set:function(a,b){var c=this;c.state[a]=b,c.fireEvent("statechange",c,a,b)},decodeValue:function(a){var b=this,c=/^(a|n|d|b|s|o|e)\:(.*)$/,d=c.exec(unescape(a)),e,f,a,g;if(!d||!d[1])return;f=d[1],a=d[2];switch(f){case"e":return null;case"n":return parseFloat(a);case"d":return new Date(Date.parse(a));case"b":return a=="1";case"a":return e=[],a!=""&&Ext.each(a.split("^"),function(a){e.push(b.decodeValue(a))},b),e;case"o":return e={},a!=""&&Ext.each(a.split("^"),function(a){g=a.split("="),e[g[0]]=b.decodeValue(g[1])},b),e;default:return a}},encodeValue:function(a){var b="",c=0,d,e,f;if(a==null)return"e:1";if(typeof a=="number")d="n:"+a;else if(typeof a=="boolean")d="b:"+(a?"1":"0");else if(Ext.isDate(a))d="d:"+a.toGMTString();else if(Ext.isArray(a)){for(e=a.length;c<e;c++)b+=this.encodeValue(a[c]),c!=e-1&&(b+="^");d="a:"+b}else if(typeof a=="object"){for(f in a)typeof a[f]!="function"&&a[f]!==undefined&&(b+=f+"="+this.encodeValue(a[f])+"^");d="o:"+b.substring(0,b.length-1)}else d="s:"+a;return escape(d)}}),Ext.define("Ext.ComponentQuery",{singleton:!0,uses:["Ext.ComponentManager"]},function(){var a=this,b=["var r = [],","i = 0,","it = items,","l = it.length,","c;","for (; i < l; i++) {","c = it[i];","if (c.{0}) {","r.push(c);","}","}","return r;"].join(""),c=function(a,b){return b.method.apply(this,[a].concat(b.args))},d=function(a,b){var c=[],d=0,e=a.length,f,g=b!==">";for(;d<e;d++)f=a[d],f.getRefItems&&(c=c.concat(f.getRefItems(g)));return c},e=function(a){var b=[],c=0,d=a.length,e;for(;c<d;c++){e=a[c];while(!!(e=e.ownerCt||e.floatParent))b.push(e)}return b},f=function(a,b,c){if(b==="*")return a.slice();var d=[],e=0,f=a.length,g;for(;e<f;e++)g=a[e],g.isXType(b,c)&&d.push(g);return d},g=function(a,b){var c=Ext.Array,d=[],e=0,f=a.length,g;for(;e<f;e++)g=a[e],(g.el?g.el.hasCls(b):c.contains(g.initCls(),b))&&d.push(g);return d},h=function(a,b,c,d){var e=[],f=0,g=a.length,h;for(;f<g;f++)h=a[f],(d?String(h[b])===d:!!h[b])&&e.push(h);return e},i=function(a,b){var c=[],d=0,e=a.length,f;for(;d<e;d++)f=a[d],f.getItemId()===b&&c.push(f);return c},j=function(b,c,d){return a.pseudos[c](b,d)},k=/^(\s?([>\^])\s?|\s|$)/,l=/^(#)?([\w\-]+|\*)(?:\((true|false)\))?/,m=[{re:/^\.([\w\-]+)(?:\((true|false)\))?/,method:f},{re:/^(?:[\[](?:@)?([\w\-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]])/,method:h},{re:/^#([\w\-]+)/,method:i},{re:/^\:([\w\-]+)(?:\(((?:\{[^\}]+\})|(?:(?!\{)[^\s>\/]*?(?!\})))\))?/,method:j},{re:/^(?:\{([^\}]+)\})/,method:b}];a.Query=Ext.extend(Object,{constructor:function(a){a=a||{},Ext.apply(this,a)},execute:function(a){var b=this.operations,f=0,g=b.length,h,i;a?Ext.isArray(a)&&(i=a):i=Ext.ComponentManager.all.getArray();for(;f<g;f++){h=b[f],h.mode==="^"?i=e(i||[a]):h.mode?i=d(i||[a],h.mode):i=c(i||d([a]),h);if(f===g-1)return i}return[]},is:function(a){var b=this.operations,d=Ext.isArray(a)?a:[a],e=d.length,f=b[b.length-1],g,h;d=c(d,f);if(d.length===e){if(b.length>1)for(h=0,g=d.length;h<g;h++)if(Ext.Array.indexOf(this.execute(),d[h])===-1)return!1;return!0}return!1}}),Ext.apply(this,{cache:{},pseudos:{not:function(a,b){var c=Ext.ComponentQuery,d=0,e=a.length,f=[],g=-1,h;for(;d<e;++d)h=a[d],c.is(h,b)||(f[++g]=h);return f},last:function(a){return a[a.length-1]}},query:function(a,b){var c=a.split(","),d=c.length,e=0,f=[],g=[],h={},i,j,k;for(;e<d;e++)a=Ext.String.trim(c[e]),i=this.cache[a],i||(this.cache[a]=i=this.parse(a)),f=f.concat(i.execute(b));if(d>1){j=f.length;for(e=0;e<j;e++)k=f[e],h[k.id]||(g.push(k),h[k.id]=!0);f=g}return f},is:function(a,b){if(!b)return!0;var c=this.cache[b];return c||(this.cache[b]=c=this.parse(b)),c.is(a)},parse:function(b){var c=[],d=m.length,e,h,j,n,o,p,q,r;while(b&&e!==b){e=b,h=b.match(l),h&&(j=h[1],j==="#"?c.push({method:i,args:[Ext.String.trim(h[2])]}):j==="."?c.push({method:g,args:[Ext.String.trim(h[2])]}):c.push({method:f,args:[Ext.String.trim(h[2]),Boolean(h[3])]}),b=b.replace(h[0],""));while(!(n=b.match(k)))for(p=0;b&&p<d;p++){q=m[p],o=b.match(q.re),r=q.method;if(o){c.push({method:Ext.isString(q.method)?Ext.functionFactory("items",Ext.String.format.apply(Ext.String,[r].concat(o.slice(1)))):q.method,args:o.slice(1)}),b=b.replace(o[0],"");break}}n[1]&&(c.push({mode:n[2]||n[1]}),b=b.replace(n[0],""))}return new a.Query({operations:c})}})}),Ext.define("Ext.util.HashMap",{mixins:{observable:"Ext.util.Observable"},constructor:function(a){a=a||{};var b=this,c=a.keyFn;b.addEvents("add","clear","remove","replace"),b.mixins.observable.constructor.call(b,a),b.clear(!0),c&&(b.getKey=c)},getCount:function(){return this.length},getData:function(a,b){return b===undefined&&(b=a,a=this.getKey(b)),[a,b]},getKey:function(a){return a.id},add:function(a,b){var c=this,d;return arguments.length===1&&(b=a,a=c.getKey(b)),c.containsKey(a)?c.replace(a,b):(d=c.getData(a,b),a=d[0],b=d[1],c.map[a]=b,++c.length,c.fireEvent("add",c,a,b),b)},replace:function(a,b){var c=this,d=c.map,e;return c.containsKey(a)||c.add(a,b),e=d[a],d[a]=b,c.fireEvent("replace",c,a,b,e),b},remove:function(a){var b=this.findKey(a);return b!==undefined?this.removeAtKey(b):!1},removeAtKey:function(a){var b=this,c;return b.containsKey(a)?(c=b.map[a],delete b.map[a],--b.length,b.fireEvent("remove",b,a,c),!0):!1},get:function(a){return this.map[a]},clear:function(a){var b=this;return b.map={},b.length=0,a!==!0&&b.fireEvent("clear",b),b},containsKey:function(a){return this.map[a]!==undefined},contains:function(a){return this.containsKey(this.findKey(a))},getKeys:function(){return this.getArray(!0)},getValues:function(){return this.getArray(!1)},getArray:function(a){var b=[],c,d=this.map;for(c in d)d.hasOwnProperty(c)&&b.push(a?c:d[c]);return b},each:function(a,b){var c=Ext.apply({},this.map),d,e=this.length;b=b||this;for(d in c)if(c.hasOwnProperty(d)&&a.call(b,d,c[d],e)===!1)break;return this},clone:function(){var a=new this.self,b=this.map,c;a.suspendEvents();for(c in b)b.hasOwnProperty(c)&&a.add(c,b[c]);return a.resumeEvents(),a},findKey:function(a){var b,c=this.map;for(b in c)if(c.hasOwnProperty(b)&&c[b]===a)return b;return undefined}}),Ext.define("Ext.state.Manager",{singleton:!0,requires:["Ext.state.Provider"],constructor:function(){this.provider=Ext.create("Ext.state.Provider")},setProvider:function(a){this.provider=a},get:function(a,b){return this.provider.get(a,b)},set:function(a,b){this.provider.set(a,b)},clear:function(a){this.provider.clear(a)},getProvider:function(){return this.provider}}),Ext.define("Ext.state.Stateful",{mixins:{observable:"Ext.util.Observable"},requires:["Ext.state.Manager"],stateful:!0,saveDelay:100,autoGenIdRe:/^((\w+-)|(ext-comp-))\d{4,}$/i,constructor:function(a){var b=this;a=a||{},Ext.isDefined(a.stateful)&&(b.stateful=a.stateful),Ext.isDefined(a.saveDelay)&&(b.saveDelay=a.saveDelay),b.stateId=b.stateId||a.stateId,b.stateEvents||(b.stateEvents=[]),a.stateEvents&&b.stateEvents.concat(a.stateEvents),this.addEvents("beforestaterestore","staterestore","beforestatesave","statesave"),b.mixins.observable.constructor.call(b),b.stateful!==!1&&(b.initStateEvents(),b.initState())},initStateEvents:function(){this.addStateEvents(this.stateEvents)},addStateEvents:function(a){Ext.isArray(a)||(a=[a]);var b=this,c=0,d=a.length;for(;c<d;++c)b.on(a[c],b.onStateChange,b)},onStateChange:function(){var a=this,b=a.saveDelay;b>0?(a.stateTask||(a.stateTask=Ext.create("Ext.util.DelayedTask",a.saveState,a)),a.stateTask.delay(a.saveDelay)):a.saveState()},saveState:function(){var a=this,b,c;a.stateful!==!1&&(b=a.getStateId(),b&&(c=a.getState(),a.fireEvent("beforestatesave",a,c)!==!1&&(Ext.state.Manager.set(b,c),a.fireEvent("statesave",a,c))))},getState:function(){return null},applyState:function(a){a&&Ext.apply(this,a)},getStateId:function(){var a=this,b=a.stateId;return b||(b=a.autoGenIdRe.test(String(a.id))?null:a.id),b},initState:function(){var a=this,b=a.getStateId(),c;a.stateful!==!1&&b&&(c=Ext.state.Manager.get(b),c&&(c=Ext.apply({},c),a.fireEvent("beforestaterestore",a,c)!==!1&&(a.applyState(c),a.fireEvent("staterestore",a,c))))},savePropToState:function(a,b,c){var d=this,e=d[a],f=d.initialConfig;if(d.hasOwnProperty(a))if(!f||f[a]!==e)return b&&(b[c||a]=e),!0;return!1},savePropsToState:function(a,b){var c=this;return Ext.each(a,function(a){c.savePropToState(a,b)}),b},destroy:function(){var a=this.stateTask;a&&a.cancel(),this.clearListeners()}}),Ext.define("Ext.AbstractManager",{requires:["Ext.util.HashMap"],typeName:"type",constructor:function(a){Ext.apply(this,a||{}),this.all=Ext.create("Ext.util.HashMap"),this.types={}},get:function(a){return this.all.get(a)},register:function(a){this.all.add(a)},unregister:function(a){this.all.remove(a)},registerType:function(a,b){this.types[a]=b,b[this.typeName]=a},isRegistered:function(a){return this.types[a]!==undefined},create:function(a,b){var c=a[this.typeName]||a.type||b,d=this.types[c];return new d(a)},onAvailable:function(a,b,c){var d=this.all,e;d.containsKey(a)?(e=d.get(a),b.call(c||e,e)):d.on("add",function(e,f,g){f==a&&(b.call(c||g,g),d.un("add",b,c))})},each:function(a,b){this.all.each(a,b||this)},getCount:function(){return this.all.getCount()}}),Ext.define("Ext.ComponentManager",{extend:"Ext.AbstractManager",alternateClassName:"Ext.ComponentMgr",singleton:!0,typeName:"xtype",create:function(a,b){if(a instanceof Ext.AbstractComponent)return a;if(Ext.isString(a))return Ext.createByAlias("widget."+a);var c=a.xtype||b,d=a;return Ext.createByAlias("widget."+c,d)},registerType:function(a,b){this.types[a]=b,b[this.typeName]=a,b.prototype[this.typeName]=a}}),Ext.define("Ext.AbstractComponent",{requires:["Ext.ComponentQuery","Ext.ComponentManager"],mixins:{observable:"Ext.util.Observable",animate:"Ext.util.Animate",state:"Ext.state.Stateful"},uses:["Ext.PluginManager","Ext.ComponentManager","Ext.Element","Ext.DomHelper","Ext.XTemplate","Ext.ComponentQuery","Ext.ComponentLoader","Ext.EventManager","Ext.layout.Layout","Ext.layout.component.Auto","Ext.LoadMask","Ext.ZIndexManager"],statics:{AUTO_ID:1e3},isComponent:!0,getAutoId:function(){return++Ext.AbstractComponent.AUTO_ID},renderTpl:null,tplWriteMode:"overwrite",baseCls:Ext.baseCSSPrefix+"component",disabledCls:Ext.baseCSSPrefix+"item-disabled",ui:"default",uiCls:[],hidden:!1,disabled:!1,draggable:!1,floating:!1,hideMode:"display",styleHtmlContent:!1,styleHtmlCls:Ext.baseCSSPrefix+"html",autoShow:!1,autoRender:!1,needsLayout:!1,allowDomMove:!0,rendered:!1,componentLayoutCounter:0,weight:0,trimRe:/^\s+|\s+$/g,spacesRe:/\s+/,maskOnDisable:!0,constructor:function(a){var b=this,c,d;a=a||{},b.initialConfig=a,Ext.apply(b,a),b.addEvents("beforeactivate","activate","beforedeactivate","deactivate","added","disable","enable","beforeshow","show","beforehide","hide","removed","beforerender","render","afterrender","beforedestroy","destroy","resize","move"),b.getId(),b.mons=[],b.additionalCls=[],b.renderData=b.renderData||{},b.renderSelectors=b.renderSelectors||{},b.plugins&&(b.plugins=[].concat(b.plugins),b.constructPlugins()),b.initComponent(),Ext.ComponentManager.register(b),b.mixins.observable.constructor.call(b),b.mixins.state.constructor.call(b,a),this.addStateEvents("resize");if(b.plugins){b.plugins=[].concat(b.plugins);for(c=0,d=b.plugins.length;c<d;c++)b.plugins[c]=b.initPlugin(b.plugins[c])}b.loader=b.getLoader(),b.renderTo&&b.render(b.renderTo),b.autoShow&&b.show()},initComponent:function(){this.constructPlugins()},getState:function(){var a=this,b=a.ownerCt?(a.shadowOwnerCt||a.ownerCt).getLayout():null,c={collapsed:a.collapsed},d=a.width,e=a.height,f=a.collapseMemento,g;return a.collapsed&&f&&(Ext.isDefined(f.data.width)&&(d=f.width),Ext.isDefined(f.data.height)&&(e=f.height)),b&&a.flex?(c.flex=a.flex,b.perpendicularPrefix&&(c[b.perpendicularPrefix]=a["get"+b.perpendicularPrefixCap]())):b&&a.anchor?(c.anchor=a.anchor,g=a.anchor.split(" ").concat(null),g[0]||a.width&&(c.width=d),g[1]||a.height&&(c.height=e)):(a.width&&(c.width=d),a.height&&(c.height=e)),c.width==a.initialConfig.width&&delete c.width,c.height==a.initialConfig.height&&delete c.height,b&&b.align&&b.align.indexOf("stretch")!==-1&&delete c[b.perpendicularPrefix],c},show:Ext.emptyFn,animate:function(a){var b=this,c;a=a||{},c=a.to||{};if(Ext.fx.Manager.hasFxBlock(b.id))return b;if(!a.dynamic&&(c.height||c.width)){var d=b.getWidth(),e=d,f=b.getHeight(),g=f,h=!1;c.height&&c.height>f&&(g=c.height,h=!0),c.width&&c.width>d&&(e=c.width,h=!0);if(h){var i=!Ext.isNumber(b.width),j=!Ext.isNumber(b.height);b.componentLayout.childrenChanged=!0,b.setSize(e,g,b.ownerCt),b.el.setSize(d,f),i&&delete b.width,j&&delete b.height}}return b.mixins.animate.animate.apply(b,arguments)},findLayoutController:function(){return this.findParentBy(function(a){return!a.ownerCt||a.layout.layoutBusy&&!a.ownerCt.layout.layoutBusy})},onShow:function(){var a=this.needsLayout;Ext.isObject(a)&&this.doComponentLayout(a.width,a.height,a.isSetSize,a.ownerCt)},constructPlugin:function(a){return a.ptype&&typeof a.init!="function"?(a.cmp=this,a=Ext.PluginManager.create(a)):typeof a=="string"&&(a=Ext.PluginManager.create({ptype:a,cmp:this})),a},constructPlugins:function(){var a=this,b=a.plugins,c,d;if(b)for(c=0,d=b.length;c<d;c++)b[c]=a.constructPlugin(b[c])},initPlugin:function(a){return a.init(this),a},doAutoRender:function(){var a=this;a.floating?a.render(document.body):a.render(Ext.isBoolean(a.autoRender)?Ext.getBody():a.autoRender)},render:function(a,b){var c=this;return!c.rendered&&c.fireEvent("beforerender",c)!==!1&&(c.rendering=!0,c.el&&(c.el=Ext.get(c.el)),c.floating&&c.onFloatRender(),a=c.initContainer(a),c.onRender(a,b),c.el.setVisibilityMode(Ext.Element[c.hideMode.toUpperCase()]),c.overCls&&c.el.hover(c.addOverCls,c.removeOverCls,c),c.fireEvent("render",c),c.initContent(),c.afterRender(a),c.fireEvent("afterrender",c),c.initEvents(),c.hidden&&c.el.hide(),c.disabled&&c.disable(!0),delete c.rendering),c},onRender:function(a,b){var c=this,d=c.el,e=c.initStyles(),f,g,h;b=c.getInsertPosition(b),d?c.allowDomMove!==!1&&(b?a.dom.insertBefore(d.dom,b):a.dom.appendChild(d.dom)):b?d=Ext.DomHelper.insertBefore(b,c.getElConfig(),!0):d=Ext.DomHelper.append(a,c.getElConfig(),!0),Ext.scopeResetCSS&&!c.ownerCt&&(d.dom==Ext.getBody().dom?d.parent().addCls(Ext.baseCSSPrefix+"reset"):c.resetEl=d.wrap({cls:Ext.baseCSSPrefix+"reset"})),c.setUI(c.ui),d.addCls(c.initCls()),d.setStyle(e),c.el=d,c.initFrame(),f=c.initRenderTpl(),f&&(g=c.initRenderData(),f.append(c.getTargetEl(),g)),c.applyRenderSelectors(),c.rendered=!0},afterRender:function(){var a=this,b,c;a.getComponentLayout(),a.collapsed||!a.ownerCt||a.height||a.width?a.setSize(a.width,a.height):a.renderChildren(),a.floating&&(a.x===undefined||a.y===undefined)&&(a.floatParent?(c=a.el.getAlignToXY(a.floatParent.getTargetEl(),"c-c"),b=a.floatParent.getTargetEl().translatePoints(c[0],c[1])):(c=a.el.getAlignToXY(a.container,"c-c"),b=a.container.translatePoints(c[0],c[1])),a.x=a.x===undefined?b.left:a.x,a.y=a.y===undefined?b.top:a.y),(Ext.isDefined(a.x)||Ext.isDefined(a.y))&&a.setPosition(a.x,a.y),a.styleHtmlContent&&a.getTargetEl().addCls(a.styleHtmlCls)},registerFloatingItem:function(a){var b=this;b.floatingItems||(b.floatingItems=Ext.create("Ext.ZIndexManager",b)),b.floatingItems.register(a)},renderChildren:function(){var a=this,b=a.getComponentLayout();a.suspendLayout=!0,b.renderChildren(),delete a.suspendLayout},frameCls:Ext.baseCSSPrefix+"frame",frameIdRegex:/[-]frame\d+[TMB][LCR]$/,frameElementCls:{tl:[],tc:[],tr:[],ml:[],mc:[],mr:[],bl:[],bc:[],br:[]},frameTpl:['<tpl if="top">','<tpl if="left"><div id="{fgid}TL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl></tpl>" style="background-position: {tl}; padding-left: {frameWidth}px" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}TR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl></tpl>" style="background-position: {tr}; padding-right: {frameWidth}px" role="presentation"></tpl>','<div id="{fgid}TC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl></tpl>" style="background-position: {tc}; height: {frameWidth}px" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>",'<tpl if="left"><div id="{fgid}ML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl></tpl>" style="background-position: {ml}; padding-left: {frameWidth}px" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}MR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl></tpl>" style="background-position: {mr}; padding-right: {frameWidth}px" role="presentation"></tpl>','<div id="{fgid}MC" class="{frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl></tpl>" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>','<tpl if="bottom">','<tpl if="left"><div id="{fgid}BL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl></tpl>" style="background-position: {bl}; padding-left: {frameWidth}px" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}BR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl></tpl>" style="background-position: {br}; padding-right: {frameWidth}px" role="presentation"></tpl>','<div id="{fgid}BC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl></tpl>" style="background-position: {bc}; height: {frameWidth}px" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>"],frameTableTpl:["<table><tbody>",'<tpl if="top">',"<tr>",'<tpl if="left"><td id="{fgid}TL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl></tpl>" style="background-position: {tl}; padding-left:{frameWidth}px" role="presentation"></td></tpl>','<td id="{fgid}TC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl></tpl>" style="background-position: {tc}; height: {frameWidth}px" role="presentation"></td>','<tpl if="right"><td id="{fgid}TR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl></tpl>" style="background-position: {tr}; padding-left: {frameWidth}px" role="presentation"></td></tpl>',"</tr>","</tpl>","<tr>",'<tpl if="left"><td id="{fgid}ML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl></tpl>" style="background-position: {ml}; padding-left: {frameWidth}px" role="presentation"></td></tpl>','<td id="{fgid}MC" class="{frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl></tpl>" style="background-position: 0 0;" role="presentation"></td>','<tpl if="right"><td id="{fgid}MR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl></tpl>" style="background-position: {mr}; padding-left: {frameWidth}px" role="presentation"></td></tpl>',"</tr>",'<tpl if="bottom">',"<tr>",'<tpl if="left"><td id="{fgid}BL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl></tpl>" style="background-position: {bl}; padding-left: {frameWidth}px" role="presentation"></td></tpl>','<td id="{fgid}BC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl></tpl>" style="background-position: {bc}; height: {frameWidth}px" role="presentation"></td>','<tpl if="right"><td id="{fgid}BR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl if="uiCls"><tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl></tpl>" style="background-position: {br}; padding-left: {frameWidth}px" role="presentation"></td></tpl>',"</tr>","</tpl>","</tbody></table>"],initFrame:function(){if(Ext.supports.CSS3BorderRadius)return!1;var a=this,b=a.getFrameInfo(),c=b.width,d=a.getFrameTpl(b.table),e;a.frame&&(a.frameGenId=e=(a.frameGenId||0)+1,e=a.id+"-frame"+e,d.insertFirst(a.el,Ext.apply({},{fgid:e,ui:a.ui,uiCls:a.uiCls,frameCls:a.frameCls,baseCls:a.baseCls,frameWidth:c,top:!!b.top,left:!!b.left,right:!!b.right,bottom:!!b.bottom},a.getFramePositions(b))),a.frameBody=a.el.down("."+a.frameCls+"-mc"),a.removeChildEls(function(b){return b.id&&a.frameIdRegex.test(b.id)}),Ext.each(["TL","TC","TR","ML","MC","MR","BL","BC","BR"],function(b){a.childEls.push({name:"frame"+b,id:e+b})}))},updateFrame:function(){if(Ext.supports.CSS3BorderRadius)return!1;var a=this,b=this.frameSize&&this.frameSize.table,c=this.frameTL,d=this.frameBL,e=this.frameML,f=this.frameMC,g;this.initFrame(),f?a.frame&&(delete a.frameTL,delete a.frameTC,delete a.frameTR,delete a.frameML,delete a.frameMC,delete a.frameMR,delete a.frameBL,delete a.frameBC,delete a.frameBR,this.applyRenderSelectors(),g=this.frameMC.dom.className,f.insertAfter(this.frameMC),this.frameMC.remove(),this.frameBody=this.frameMC=f,f.dom.className=g,b?a.el.query("> table")[1].remove():(c&&c.remove(),d&&d.remove(),e.remove())):a.frame&&this.applyRenderSelectors()},getFrameInfo:function(){if(Ext.supports.CSS3BorderRadius)return!1;var a=this,b=a.el.getStyle("background-position-x"),c=a.el.getStyle("background-position-y"),d,e=!1,f;return!b&&!c&&(d=a.el.getStyle("background-position").split(" "),b=d[0],c=d[1]),parseInt(b,10)>=1e6&&parseInt(c,10)>=1e6&&(f=Math.max,e={table:b.substr(0,3)=="110",vertical:c.substr(0,3)=="110",top:f(b.substr(3,2),b.substr(5,2)),right:f(b.substr(5,2),c.substr(3,2)),bottom:f(c.substr(3,2),c.substr(5,2)),left:f(c.substr(5,2),b.substr(3,2))},e.width=f(e.top,e.right,e.bottom,e.left),a.el.setStyle("background-image","none")),a.frame!==!0||!!e,a.frame=a.frame||!!e,a.frameSize=e||!1,e},getFramePositions:function(a){var b=this,c=a.width,d=b.dock,e,f,g,h,i;return a.vertical?(f="0 -"+c*0+"px",g="0 -"+c*1+"px",d&&d=="right"&&(f="right -"+c*0+"px",g="right -"+c*1+"px"),e={tl:"0 -"+c*0+"px",tr:"0 -"+c*1+"px",bl:"0 -"+c*2+"px",br:"0 -"+c*3+"px",ml:"-"+c*1+"px 0",mr:"right 0",tc:f,bc:g}):(h="-"+c*0+"px 0",i="right 0",d&&d=="bottom"&&(h="left bottom",i="right bottom"),e={tl:"0 -"+c*2+"px",tr:"right -"+c*3+"px",bl:"0 -"+c*4+"px",br:"right -"+c*5+"px",ml:h,mr:i,tc:"0 -"+c*0+"px",bc:"0 -"+c*1+"px"}),e},getFrameTpl:function(a){return a?this.getTpl("frameTableTpl"):this.getTpl("frameTpl")},initCls:function(){var a=this,b=[];return b.push(a.baseCls),Ext.isDefined(a.cmpCls)&&(Ext.isDefined(Ext.global.console)&&Ext.global.console.warn("Ext.Component: cmpCls has been deprecated. Please use componentCls."),a.componentCls=a.cmpCls,delete a.cmpCls),a.componentCls?b.push(a.componentCls):a.componentCls=a.baseCls,a.cls&&(b.push(a.cls),delete a.cls),b.concat(a.additionalCls)},setUI:function(a){var b=this,c=Ext.Array.clone(b.uiCls),d=[],e=[],f,g;for(g=0;g<c.length;g++)f=c[g],e=e.concat(b.removeClsWithUI(f,!0)),d.push(f);e.length&&b.removeCls(e),b.removeUIFromElement(),b.ui=a,b.addUIToElement(),e=[];for(g=0;g<d.length;g++)f=d[g],e=e.concat(b.addClsWithUI(f,!0));e.length&&b.addCls(e)},addClsWithUI:function(a,b){var c=this,d=[],e;Ext.isArray(a)||(a=[a]);for(e=0;e<a.length;e++)a[e]&&!c.hasUICls(a[e])&&(c.uiCls=Ext.Array.clone(c.uiCls),c.uiCls.push(a[e]),d=d.concat(c.addUIClsToElement(a[e])));return b!==!0&&c.addCls(d),d},removeClsWithUI:function(a,b){var c=this,d=[],e;Ext.isArray(a)||(a=[a]);for(e=0;e<a.length;e++)a[e]&&c.hasUICls(a[e])&&(c.uiCls=Ext.Array.remove(c.uiCls,a[e]),d=d.concat(c.removeUIClsFromElement(a[e])));return b!==!0&&c.removeCls(d),d},hasUICls:function(a){var b=this,c=b.uiCls||[];return Ext.Array.contains(c,a)},addUIClsToElement:function(a,b){var c=this,d=[],e=c.frameElementCls;d.push(Ext.baseCSSPrefix+a),d.push(c.baseCls+"-"+a),d.push(c.baseCls+"-"+c.ui+"-"+a);if(!b&&c.frame&&!Ext.supports.CSS3BorderRadius){var f=["tl","tc","tr","ml","mc","mr","bl","bc","br"],g,h,i,j;for(h=0;h<f.length;h++){j=c["frame"+f[h].toUpperCase()],g=[c.baseCls+"-"+c.ui+"-"+f[h],c.baseCls+"-"+c.ui+"-"+a+"-"+f[h]];if(j&&j.dom)j.addCls(g);else for(i=0;i<g.length;i++)Ext.Array.indexOf(e[f[h]],g[i])==-1&&e[f[h]].push(g[i])}}return c.frameElementCls=e,d},removeUIClsFromElement:function(a,b){var c=this,d=[],e=c.frameElementCls;d.push(Ext.baseCSSPrefix+a),d.push(c.baseCls+"-"+a),d.push(c.baseCls+"-"+c.ui+"-"+a);if(!b&&c.frame&&!Ext.supports.CSS3BorderRadius){var f=["tl","tc","tr","ml","mc","mr","bl","bc","br"],g,h;a=c.baseCls+"-"+c.ui+"-"+a+"-"+f[g];for(g=0;g<f.length;g++)h=c["frame"+f[g].toUpperCase()],h&&h.dom?h.removeCls(a):Ext.Array.remove(e[f[g]],a)}return c.frameElementCls=e,d},addUIToElement:function(a){var b=this,c=b.frameElementCls;b.addCls(b.baseCls+"-"+b.ui);if(b.frame&&!Ext.supports.CSS3BorderRadius){var d=["tl","tc","tr","ml","mc","mr","bl","bc","br"],e,f,g;for(e=0;e<d.length;e++)f=b["frame"+d[e].toUpperCase()],g=b.baseCls+"-"+b.ui+"-"+d[e],f?f.addCls(g):Ext.Array.contains(c[d[e]],g)||c[d[e]].push(g)}},removeUIFromElement:function(){var a=this,b=a.frameElementCls;a.removeCls(a.baseCls+"-"+a.ui);if(a.frame&&!Ext.supports.CSS3BorderRadius){var c=["tl","tc","tr","ml","mc","mr","bl","bc","br"],d,e,f,g;for(d=0;d<c.length;d++)f=a["frame"+c[d].toUpperCase()],g=a.baseCls+"-"+a.ui+"-"+c[d],f?f.removeCls(g):Ext.Array.remove(b[c[d]],g)}},getElConfig:function(){Ext.isString(this.autoEl)&&(this.autoEl={tag:this.autoEl});var a=this.autoEl||{tag:"div"};return a.id=this.id,a},getInsertPosition:function(a){return a!==undefined&&(Ext.isNumber(a)?a=this.container.dom.childNodes[a]:a=Ext.getDom(a)),a},initContainer:function(a){var b=this;return!a&&b.el&&(a=b.el.dom.parentNode,b.allowDomMove=!1),b.container=Ext.get(a),b.ctCls&&b.container.addCls(b.ctCls),b.container},initRenderData:function(){var a=this;return Ext.applyIf(a.renderData,{id:a.id,ui:a.ui,uiCls:a.uiCls,baseCls:a.baseCls,componentCls:a.componentCls,frame:a.frame})},getTpl:function(a){var b=this,c=b.self.prototype,d,e;if(b.hasOwnProperty(a))return e=b[a],e&&!(e instanceof Ext.XTemplate)&&(b[a]=Ext.ClassManager.dynInstantiate("Ext.XTemplate",e)),b[a];if(!(c[a]instanceof Ext.XTemplate)){d=c;do{if(d.hasOwnProperty(a)){e=d[a];if(e&&!(e instanceof Ext.XTemplate)){d[a]=Ext.ClassManager.dynInstantiate("Ext.XTemplate",e);break}}d=d.superclass}while(d)}return c[a]},initRenderTpl:function(){return this.getTpl("renderTpl")},initStyles:function(){var a={},b=this,c=Ext.Element;return Ext.isString(b.style)?a=c.parseStyles(b.style):a=Ext.apply({},b.style),b.padding!==undefined&&(a.padding=c.unitizeBox(b.padding===!0?5:b.padding)),b.margin!==undefined&&(a.margin=c.unitizeBox(b.margin===!0?5:b.margin)),delete b.style,a},initContent:function(){var a=this,b=a.getTargetEl(),c,d;a.html&&(b.update(Ext.DomHelper.markup(a.html)),delete a.html),a.contentEl&&(c=Ext.get(a.contentEl),d=Ext.baseCSSPrefix,c.removeCls([d+"hidden",d+"hide-display",d+"hide-offsets",d+"hide-nosize"]),b.appendChild(c.dom)),a.tpl&&(a.tpl.isTemplate||(a.tpl=Ext.create("Ext.XTemplate",a.tpl)),a.data&&(a.tpl[a.tplWriteMode](b,a.data),delete a.data))},initEvents:function(){var a=this,b=a.afterRenderEvents,c,d,e=function(b){a.mon(c,b)};if(b)for(d in b)b.hasOwnProperty(d)&&(c=a[d],c&&c.on&&Ext.each(b[d],e))},addChildEls:function(){var a=this,b=a.childEls||(a.childEls=[]);b.push.apply(b,arguments)},removeChildEls:function(a){var b=this,c=b.childEls,d=b.childEls=[],e,f,g;for(f=0,e=c.length;f<e;++f)g=c[f],a(g)||d.push(g)},applyRenderSelectors:function(){var a=this,b=a.childEls,c=a.renderSelectors,d=a.el,e=d.dom,f,g,h,i,j;if(b){f=a.id+"-";for(i=b.length;i--;)g=h=b[i],typeof g!="string"?(h=g.id||f+g.itemId,g=g.name):h=f+h,a[g]=d.getById(h)}if(c)for(j in c)c.hasOwnProperty(j)&&c[j]&&(a[j]=Ext.get(Ext.DomQuery.selectNode(c[j],e)))},is:function(a){return Ext.ComponentQuery.is(this,a)},up:function(a){var b=this.ownerCt;if(a)for(;b;b=b.ownerCt)if(Ext.ComponentQuery.is(b,a))return b;return b},nextSibling:function(a){var b=this.ownerCt,c,d,e,f;if(b){c=b.items,e=c.indexOf(this)+1;if(e)if(a){for(d=c.getCount();e<d;e++)if((f=c.getAt(e)).is(a))return f}else if(e<c.getCount())return c.getAt(e)}return null},previousSibling:function(a){var b=this.ownerCt,c,d,e;if(b){c=b.items,d=c.indexOf(this);if(d!=-1)if(a){for(--d;d>=0;d--)if((e=c.getAt(d)).is(a))return e}else if(d)return c.getAt(--d)}return null},previousNode:function(a,b){var c=this,d,e,f,g;if(b&&c.is(a))return c;d=this.prev(a);if(d)return d;if(c.ownerCt){for(e=c.ownerCt.items.items,g=Ext.Array.indexOf(e,c)-1;g>-1;g--)if(e[g].query){d=e[g].query(a),d=d[d.length-1];if(d)return d}return c.ownerCt.previousNode(a,!0)}},nextNode:function(a,b){var c=this,d,e,f,g;if(b&&c.is(a))return c;d=this.next(a);if(d)return d;if(c.ownerCt){for(e=c.ownerCt.items,g=e.indexOf(c)+1,e=e.items,f=e.length;g<f;g++)if(e[g].down){d=e[g].down(a);if(d)return d}return c.ownerCt.nextNode(a)}},getId:function(){return this.id||(this.id="ext-comp-"+this.getAutoId())},getItemId:function(){return this.itemId||this.id},getEl:function(){return this.el},getTargetEl:function(){return this.frameBody||this.el},isXType:function(a,b){return Ext.isFunction(a)?a=a.xtype:Ext.isObject(a)&&(a=a.statics().xtype),b?this.self.xtype==a:("/"+this.getXTypes()+"/").indexOf("/"+a+"/")!=-1},getXTypes:function(){var a=this.self,b,c,d;if(!a.xtypes){b=[],c=this;while(c)d=c.xtypes,d!==undefined&&b.unshift.apply(b,d),c=c.superclass;a.xtypeChain=b,a.xtypes=b.join("/")}return a.xtypes},update:function(a,b,c){var d=this;d.tpl&&!Ext.isString(a)?(d.data=a,d.rendered&&d.tpl[d.tplWriteMode](d.getTargetEl(),a||{})):(d.html=Ext.isObject(a)?Ext.DomHelper.markup(a):a,d.rendered&&d.getTargetEl().update(d.html,b,c)),d.rendered&&d.doComponentLayout()},setVisible:function(a){return this[a?"show":"hide"]()},isVisible:function(a){var b=this,c=b,d=!b.hidden,e=b.ownerCt;b.hiddenAncestor=!1;if(b.destroyed)return!1;if(a&&d&&b.rendered&&e)while(e){if(e.hidden||e.collapsed&&(!e.getDockedItems||!Ext.Array.contains(e.getDockedItems(),c))){b.hiddenAncestor=e,d=!1;break}c=e,e=e.ownerCt}return d},enable:function(a){var b=this;return b.rendered&&(b.el.removeCls(b.disabledCls),b.el.dom.disabled=!1,b.onEnable()),b.disabled=!1,a!==!0&&b.fireEvent("enable",b),b},disable:function(a){var b=this;return b.rendered&&(b.el.addCls(b.disabledCls),b.el.dom.disabled=!0,b.onDisable()),b.disabled=!0,a!==!0&&b.fireEvent("disable",b),b},onEnable:function(){this.maskOnDisable&&this.el.unmask()},onDisable:function(){this.maskOnDisable&&this.el.mask()},isDisabled:function(){return this.disabled},setDisabled:function(a){return this[a?"disable":"enable"]()},isHidden:function(){return this.hidden},addCls:function(a){var b=this;return a?(Ext.isArray(a)||(a=a.replace(b.trimRe,"").split(b.spacesRe)),b.rendered?b.el.addCls(a):b.additionalCls=Ext.Array.unique(b.additionalCls.concat(a)),b):b},addClass:function(){return this.addCls.apply(this,arguments)},removeCls:function(a){var b=this;return a?(Ext.isArray(a)||(a=a.replace(b.trimRe,"").split(b.spacesRe)),b.rendered?b.el.removeCls(a):b.additionalCls.length&&Ext.each(a,function(a){Ext.Array.remove(b.additionalCls,a)}),b):b},addOverCls:function(){var a=this;a.disabled||a.el.addCls(a.overCls)},removeOverCls:function(){this.el.removeCls(this.overCls)},addListener:function(a,b,c,d){var e=this,f,g;if(Ext.isString(a)&&(Ext.isObject(b)||d&&d.element)){if(d.element){f=b,b={},b[a]=f,a=d.element,c&&(b.scope=c);for(g in d)d.hasOwnProperty(g)&&e.eventOptionsRe.test(g)&&(b[g]=d[g])}e[a]&&e[a].on?e.mon(e[a],b):(e.afterRenderEvents=e.afterRenderEvents||{},e.afterRenderEvents[a]||(e.afterRenderEvents[a]=[]),e.afterRenderEvents[a].push(b))}return e.mixins.observable.addListener.apply(e,arguments)},removeManagedListenerItem:function(a,b,c,d,e,f){var g=this,h=b.options?b.options.element:null;if(!h)return g.mixins.observable.removeManagedListenerItem.apply(g,arguments);h=g[h],h&&h.un&&(a||b.item===c&&b.ename===d&&(!e||b.fn===e)&&(!f||b.scope===f))&&(h.un(b.ename,b.fn,b.scope),a||Ext.Array.remove(g.managedListeners,b))},getBubbleTarget:function(){return this.ownerCt},isFloating:function(){return this.floating},isDraggable:function(){return!!this.draggable},isDroppable:function(){return!!this.droppable},onAdded:function(a,b){this.ownerCt=a,this.fireEvent("added",this,a,b)},onRemoved:function(){var a=this;a.fireEvent("removed",a,a.ownerCt),delete a.ownerCt},beforeDestroy:Ext.emptyFn,onResize:Ext.emptyFn,setSize:function(a,b){var c=this,d;return Ext.isObject(a)&&(b=a.height,a=a.width),Ext.isNumber(a)&&(a=Ext.Number.constrain(a,c.minWidth,c.maxWidth)),Ext.isNumber(b)&&(b=Ext.Number.constrain(b,c.minHeight,c.maxHeight)),!c.rendered||!c.isVisible()?(c.hiddenAncestor&&(d=c.hiddenAncestor.layoutOnShow,d.remove(c),d.add(c)),c.needsLayout={width:a,height:b,isSetSize:!0},c.rendered||(c.width=a!==undefined?a:c.width,c.height=b!==undefined?b:c.height),c):(c.doComponentLayout(a,b,!0),c)},isFixedWidth:function(){var a=this,b=a.layoutManagedWidth;return Ext.isDefined(a.width)||b==1?!0:b==2?!1:a.ownerCt&&a.ownerCt.isFixedWidth()},isFixedHeight:function(){var a=this,b=a.layoutManagedHeight;return Ext.isDefined(a.height)||b==1?!0:b==2?!1:a.ownerCt&&a.ownerCt.isFixedHeight()},setCalculatedSize:function(a,b,c){var d=this,e;return Ext.isObject(a)&&(c=a.ownerCt,b=a.height,a=a.width),Ext.isNumber(a)&&(a=Ext.Number.constrain(a,d.minWidth,d.maxWidth)),Ext.isNumber(b)&&(b=Ext.Number.constrain(b,d.minHeight,d.maxHeight)),!d.rendered||!d.isVisible()?(d.hiddenAncestor&&(e=d.hiddenAncestor.layoutOnShow,e.remove(d),e.add(d)),d.needsLayout={width:a,height:b,isSetSize:!1,ownerCt:c},d):(d.doComponentLayout(a,b,!1,c),d)},doComponentLayout:function(a,b,c,d){var e=this,f=e.getComponentLayout(),g=f.lastComponentSize||{width:undefined,height:undefined};return e.rendered&&f&&(Ext.isDefined(a)||e.isFixedWidth()&&(a=Ext.isDefined(e.width)?e.width:g.width),Ext.isDefined(b)||e.isFixedHeight()&&(b=Ext.isDefined(e.height)?e.height:g.height),c&&(e.width=a,e.height=b),f.layout(a,b,c,d)),e},forceComponentLayout:function(){this.doComponentLayout()},setComponentLayout:function(a){var b=this.componentLayout;b&&b.isLayout&&b!=a&&b.setOwner(null),this.componentLayout=a,a.setOwner(this)},getComponentLayout:function(){var a=this;return(!a.componentLayout||!a.componentLayout.isLayout)&&a.setComponentLayout(Ext.layout.Layout.create(a.componentLayout,"autocomponent")),a.componentLayout},afterComponentLayout:function(a,b,c,d){var e=this,f=e.componentLayout,g=e.preLayoutSize;++e.componentLayoutCounter,(!g||a!==g.width||b!==g.height)&&e.fireEvent("resize",e,a,b)},beforeComponentLayout:function(a,b,c,d){return this.preLayoutSize=this.componentLayout.lastComponentSize,!0},setPosition:function(a,b){var c=this;Ext.isObject(a)&&(b=a.y,a=a.x);if(!c.rendered)return c;if(a!==undefined||b!==undefined)c.el.setBox(a,b),c.onPosition(a,b),c.fireEvent("move",c,a,b);return c},onPosition:Ext.emptyFn,setWidth:function(a){return this.setSize(a)},setHeight:function(a){return this.setSize(undefined,a)},getSize:function(){return this.el.getSize()},getWidth:function(){return this.el.getWidth()},getHeight:function(){return this.el.getHeight()},getLoader:function(){var a=this,b=a.autoLoad?Ext.isObject(a.autoLoad)?a.autoLoad:{url:a.autoLoad}:null,c=a.loader||b;return c?(c.isLoader?c.setTarget(a):a.loader=Ext.create("Ext.ComponentLoader",Ext.apply({target:a,autoLoad:b},c)),a.loader):null},setLoading:function(a,b){var c=this,d;return c.rendered&&(a!==!1&&!c.collapsed?(Ext.isObject(a)?d=a:Ext.isString(a)?d={msg:a}:d={},c.loadMask=c.loadMask||Ext.create("Ext.LoadMask",b?c.getTargetEl():c.el,d),c.loadMask.show()):c.loadMask&&(Ext.destroy(c.loadMask),c.loadMask=null)),c.loadMask},setDocked:function(a,b){var c=this;return c.dock=a,b&&c.ownerCt&&c.rendered&&c.ownerCt.doComponentLayout(),c},onDestroy:function(){var a=this;a.monitorResize&&Ext.EventManager.resizeEvent&&Ext.EventManager.resizeEvent.removeListener(a.setSize,a),Ext.destroy(a.componentLayout,a.loadMask,a.floatingItems)},cleanElementRefs:function(){var a=this,b=0,c=a.childEls,d=a.renderSelectors,e,f,g;if(a.rendered){if(c)for(g=c.length;b<g;++b)f=c[b],typeof f!="string"&&(f=f.name),delete a[f];if(d)for(e in d)d.hasOwnProperty(e)&&delete a[e]}delete a.rendered,delete a.el,delete a.frameBody},destroy:function(){var a=this;a.isDestroyed||a.fireEvent("beforedestroy",a)!==!1&&(a.destroying=!0,a.beforeDestroy(),a.floating?(delete a.floatParent,a.zIndexManager&&a.zIndexManager.unregister(a)):a.ownerCt&&a.ownerCt.remove&&a.ownerCt.remove(a,!1),a.onDestroy(),Ext.destroy(a.plugins),a.rendered&&a.el.remove(),a.fireEvent("destroy",a),Ext.ComponentManager.unregister(a),a.mixins.state.destroy.call(a),a.clearListeners(),a.cleanElementRefs(),a.destroying=!1,a.isDestroyed=!0)},getPlugin:function(a){var b=0,c=this.plugins,d=c.length;for(;b<d;b++)if(c[b].pluginId===a)return c[b]},isDescendantOf:function(a){return!!this.findParentBy(function(b){return b===a})}},function(){this.createAlias({on:"addListener",prev:"previousSibling",next:"nextSibling"})}),Ext.define("Ext.AbstractPlugin",{disabled:!1,constructor:function(a){Ext.apply(this,a)},getCmp:function(){return this.cmp},init:Ext.emptyFn,destroy:Ext.emptyFn,enable:function(){this.disabled=!1},disable:function(){this.disabled=!0}}),Ext.define("Ext.data.Connection",{mixins:{observable:"Ext.util.Observable"},statics:{requestId:0},url:null,async:!0,method:null,username:"",password:"",disableCaching:!0,withCredentials:!1,cors:!1,disableCachingParam:"_dc",timeout:3e4,useDefaultHeader:!0,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:!0,defaultXhrHeader:"XMLHttpRequest",constructor:function(a){a=a||{},Ext.apply(this,a),this.addEvents("beforerequest","requestcomplete","requestexception"),this.requests={},this.mixins.observable.constructor.call(this)},request:function(a){a=a||{};var b=this,c=a.scope||window,d=a.username||b.username,e=a.password||b.password||"",f,g,h,i,j;if(b.fireEvent("beforerequest",b,a)!==!1){g=b.setOptions(a,c);if(this.isFormUpload(a)===!0)return this.upload(a.form,g.url,g.data,a),null;(a.autoAbort===!0||b.autoAbort)&&b.abort(),(a.cors===!0||b.cors===!0)&&Ext.isIe&&Ext.ieVersion>=8?j=new XDomainRequest:j=this.getXhrInstance(),f=a.async!==!1?a.async||b.async:!1,d?j.open(g.method,g.url,f,d,e):j.open(g.method,g.url,f);if(a.withCredentials===!0||b.withCredentials===!0)j.withCredentials=!0;return i=b.setupHeaders(j,a,g.data,g.params),h={id:++Ext.data.Connection.requestId,xhr:j,headers:i,options:a,async:f,timeout:setTimeout(function(){h.timedout=!0,b.abort(h)},a.timeout||b.timeout)},b.requests[h.id]=h,b.latestId=h.id,f&&(j.onreadystatechange=Ext.Function.bind(b.onStateChange,b,[h])),j.send(g.data),f?h:this.onComplete(h)}return Ext.callback(a.callback,a.scope,[a,undefined,undefined]),null},upload:function(a,b,c,d){a=Ext.getDom(a),d=d||{};var e=Ext.id(),f=document.createElement("iframe"),g=[],h="multipart/form-data",i={target:a.target,method:a.method,encoding:a.encoding,enctype:a.enctype,action:a.action},j;Ext.fly(f).set({id:e,name:e,cls:Ext.baseCSSPrefix+"hide-display",src:Ext.SSL_SECURE_URL}),document.body.appendChild(f),document.frames&&(document.frames[e].name=e),Ext.fly(a).set({target:e,method:"POST",enctype:h,encoding:h,action:b||i.action}),c&&Ext.iterate(Ext.Object.fromQueryString(c),function(b,c){j=document.createElement("input"),Ext.fly(j).set({type:"hidden",value:c,name:b}),a.appendChild(j),g.push(j)}),Ext.fly(f).on("load",Ext.Function.bind(this.onUploadComplete,this,[f,d]),null,{single:!0}),a.submit(),Ext.fly(a).set(i),Ext.each(g,function(a){Ext.removeNode(a)})},onUploadComplete:function(a,b){var c=this,d={responseText:"",responseXML:null},e,f;try{e=a.contentWindow.document||a.contentDocument||window.frames[a.id].document,e&&(e.body&&(/textarea/i.test((f=e.body.firstChild||{}).tagName)?d.responseText=f.value:d.responseText=e.body.innerHTML),d.responseXML=e.XMLDocument||e)}catch(g){}c.fireEvent("requestcomplete",c,d,b),Ext.callback(b.success,b.scope,[d,b]),Ext.callback(b.callback,b.scope,[b,!0,d]),setTimeout(function(){Ext.removeNode(a)},100)},isFormUpload:function(a){var b=this.getForm(a);return b?a.isUpload||/multipart\/form-data/i.test(b.getAttribute("enctype")):!1},getForm:function(a){return Ext.getDom(a.form)||null},setOptions:function(a,b){var c=this,d=a.params||{},e=c.extraParams,f=a.urlParams,g=a.url||c.url,h=a.jsonData,i,j,k;return Ext.isFunction(d)&&(d=d.call(b,a)),Ext.isFunction(g)&&(g=g.call(b,a)),g=this.setupUrl(a,g),k=a.rawData||a.xmlData||h||null,h&&!Ext.isPrimitive(h)&&(k=Ext.encode(k)),Ext.isObject(d)&&(d=Ext.Object.toQueryString(d)),Ext.isObject(e)&&(e=Ext.Object.toQueryString(e)),d+=e?(d?"&":"")+e:"",f=Ext.isObject(f)?Ext.Object.toQueryString(f):f,d=this.setupParams(a,d),i=(a.method||c.method||(d||k?"POST":"GET")).toUpperCase(),this.setupMethod(a,i),j=a.disableCaching!==!1?a.disableCaching||c.disableCaching:!1,i==="GET"&&j&&(g=Ext.urlAppend(g,(a.disableCachingParam||c.disableCachingParam)+"="+(new Date).getTime())),(i=="GET"||k)&&d&&(g=Ext.urlAppend(g,d),d=null),f&&(g=Ext.urlAppend(g,f)),{url:g,method:i,data:k||d||null}},setupUrl:function(a,b){var c=this.getForm(a);return c&&(b=b||c.action),b},setupParams:function(a,b){var c=this.getForm(a),d;return c&&!this.isFormUpload(a)&&(d=Ext.Element.serializeForm(c),b=b?b+"&"+d:d),b},setupMethod:function(a,b){return this.isFormUpload(a)?"POST":b},setupHeaders:function(a,b,c,d){var e=this,f=Ext.apply({},b.headers||{},e.defaultHeaders||{}),g=e.defaultPostHeader,h=b.jsonData,i=b.xmlData,j,k;!f["Content-Type"]&&(c||d)&&(c&&(b.rawData?g="text/plain":i&&Ext.isDefined(i)?g="text/xml":h&&Ext.isDefined(h)&&(g="application/json")),f["Content-Type"]=g),e.useDefaultXhrHeader&&!f["X-Requested-With"]&&(f["X-Requested-With"]=e.defaultXhrHeader);try{for(j in f)f.hasOwnProperty(j)&&(k=f[j],a.setRequestHeader(j,k))}catch(l){e.fireEvent("exception",j,k)}return f},getXhrInstance:function(){var a=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")},function(){return new ActiveXObject("MSXML2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],b=0,c=a.length,d;for(;b<c;++b)try{d=a[b],d();break}catch(e){}return d}(),isLoading:function(a){a||(a=this.getLatest());if(!a||!a.xhr)return!1;var b=a.xhr.readyState;return b!==0&&b!=4},abort:function(a){var b=this;a||(a=b.getLatest()),a&&b.isLoading(a)&&(a.xhr.onreadystatechange=null,a.xhr.abort(),b.clearTimeout(a),a.timedout||(a.aborted=!0),b.onComplete(a),b.cleanup(a))},abortAll:function(){var a=this.requests,b;for(b in a)a.hasOwnProperty(b)&&this.abort(a[b])},getLatest:function(){var a=this.latestId,b;return a&&(b=this.requests[a]),b||null},onStateChange:function(a){a.xhr.readyState==4&&(this.clearTimeout(a),this.onComplete(a),this.cleanup(a))},clearTimeout:function(a){clearTimeout(a.timeout),delete a.timeout},cleanup:function(a){a.xhr=null,delete a.xhr},onComplete:function(a){var b=this,c=a.options,d,e,f;try{d=b.parseStatus(a.xhr.status)}catch(g){d={success:!1,isException:!1}}return e=d.success,e?(f=b.createResponse(a),b.fireEvent("requestcomplete",b,f,c),Ext.callback(c.success,c.scope,[f,c])):(d.isException||a.aborted||a.timedout?f=b.createException(a):f=b.createResponse(a),b.fireEvent("requestexception",b,f,c),Ext.callback(c.failure,c.scope,[f,c])),Ext.callback(c.callback,c.scope,[c,e,f]),delete b.requests[a.id],f},parseStatus:function(a){a=a==1223?204:a;var b=a>=200&&a<300||a==304,c=!1;if(!b)switch(a){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:c=!0}return{success:b,isException:c}},createResponse:function(a){var b=a.xhr,c={},d=b.getAllResponseHeaders().replace(/\r\n/g,"\n").split("\n"),e=d.length,f,g,h,i,j;while(e--)f=d[e],g=f.indexOf(":"),g>=0&&(h=f.substr(0,g).toLowerCase(),f.charAt(g+1)==" "&&++g,c[h]=f.substr(g+1));return a.xhr=null,delete a.xhr,j={request:a,requestId:a.id,status:b.status,statusText:b.statusText,getResponseHeader:function(a){return c[a.toLowerCase()]},getAllResponseHeaders:function(){return c},responseText:b.responseText,responseXML:b.responseXML},b=null,j},createException:function(a){return{request:a,requestId:a.id,status:a.aborted?-1:0,statusText:a.aborted?"transaction aborted":"communication failure",aborted:a.aborted,timedout:a.timedout}}}),Ext.define("Ext.Ajax",{extend:"Ext.data.Connection",singleton:!0,autoAbort:!1}),Ext.define("Ext.ElementLoader",{mixins:{observable:"Ext.util.Observable"},uses:["Ext.data.Connection","Ext.Ajax"],statics:{Renderer:{Html:function(a,b,c){return a.getTarget().update(b.responseText,c.scripts===!0),!0}}},url:null,params:null,baseParams:null,autoLoad:!1,target:null,loadMask:!1,ajaxOptions:null,scripts:!1,isLoader:!0,constructor:function(a){var b=this,c;a=a||{},Ext.apply(b,a),b.setTarget(b.target),b.addEvents("beforeload","exception","load"),b.mixins.observable.constructor.call(b),b.autoLoad&&(c=b.autoLoad,c===!0&&(c={}),b.load(c))},setTarget:function(a){var b=this;a=Ext.get(a),b.target&&b.target!=a&&b.abort(),b.target=a},getTarget:function(){return this.target||null},abort:function(){var a=this.active;a!==undefined&&(Ext.Ajax.abort(a.request),a.mask&&this.removeMask(),delete this.active)},removeMask:function(){this.target.unmask()},addMask:function(a){this.target.mask(a===!0?null:a)},load:function(a){a=Ext.apply({},a);var b=this,c=b.target,d=Ext.isDefined(a.loadMask)?a.loadMask:b.loadMask,e=Ext.apply({},a.params),f=Ext.apply({},a.ajaxOptions),g=a.callback||b.callback,h=a.scope||b.scope||b,i;Ext.applyIf(f,b.ajaxOptions),Ext.applyIf(a,f),Ext.applyIf(e,b.params),Ext.apply(e,b.baseParams),Ext.applyIf(a,{url:b.url}),Ext.apply(a,{scope:b,params:e,callback:b.onComplete});if(b.fireEvent("beforeload",b,a)===!1)return;d&&b.addMask(d),i=Ext.Ajax.request(a),b.active={request:i,options:a,mask:d,scope:h,callback:g,success:a.success||b.success,failure:a.failure||b.failure,renderer:a.renderer||b.renderer,scripts:Ext.isDefined(a.scripts)?a.scripts:b.scripts},b.setOptions(b.active,a)},setOptions:Ext.emptyFn,onComplete:function(a,b,c){var d=this,e=d.active,f=e.scope,g=d.getRenderer(e.renderer);b&&(b=g.call(d,d,c,e)),b?(Ext.callback(e.success,f,[d,c,a]),d.fireEvent("load",d,c,a)):(Ext.callback(e.failure,f,[d,c,a]),d.fireEvent("exception",d,c,a)),Ext.callback(e.callback,f,[d,b,c,a]),e.mask&&d.removeMask(),delete d.active},getRenderer:function(a){return Ext.isFunction(a)?a:this.statics().Renderer.Html},startAutoRefresh:function(a,b){var c=this;c.stopAutoRefresh(),c.autoRefresh=setInterval(function(){c.load(b)},a)},stopAutoRefresh:function(){clearInterval(this.autoRefresh),delete this.autoRefresh},isAutoRefreshing:function(){return Ext.isDefined(this.autoRefresh)},destroy:function(){var a=this;a.stopAutoRefresh(),delete a.target,a.abort(),a.clearListeners()}}),Ext.define("Ext.ComponentLoader",{extend:"Ext.ElementLoader",statics:{Renderer:{Data:function(a,b,c){var d=!0;try{a.getTarget().update(Ext.decode(b.responseText))}catch(e){d=!1}return d},Component:function(a,b,c){var d=!0,e=a.getTarget(),f=[];try{f=Ext.decode(b.responseText)}catch(g){d=!1}return d&&(c.removeAll&&e.removeAll(),e.add(f)),d}}},target:null,loadMask:!1,renderer:"html",setTarget:function(a){var b=this;Ext.isString(a)&&(a=Ext.getCmp(a)),b.target&&b.target!=a&&b.abort(),b.target=a},removeMask:function(){this.target.setLoading(!1)},addMask:function(a){this.target.setLoading(a)},setOptions:function(a,b){a.removeAll=Ext.isDefined(b.removeAll)?b.removeAll:this.removeAll},getRenderer:function(a){if(Ext.isFunction(a))return a;var b=this.statics().Renderer;switch(a){case"component":return b.Component;case"data":return b.Data;default:return Ext.ElementLoader.Renderer.Html}}}),Ext.define("Ext.data.Association",{primaryKey:"id",defaultReaderType:"json",statics:{create:function(a){if(!a.isAssociation){Ext.isString(a)&&(a={type:a});switch(a.type){case"belongsTo":return Ext.create("Ext.data.BelongsToAssociation",a);case"hasMany":return Ext.create("Ext.data.HasManyAssociation",a);default:}}return a}},constructor:function(a){Ext.apply(this,a);var b=Ext.ModelManager.types,c=a.ownerModel,d=a.associatedModel,e=b[c],f=b[d],g;this.ownerModel=e,this.associatedModel=f,Ext.applyIf(this,{ownerName:c,associatedName:d})},getReader:function(){var a=this,b=a.reader,c=a.associatedModel;return b&&(Ext.isString(b)&&(b={type:b}),b.isReader?b.setModel(c):Ext.applyIf(b,{model:c,type:a.defaultReaderType}),a.reader=Ext.createByAlias("reader."+b.type,b)),a.reader||null}}),Ext.define("Ext.ModelManager",{extend:"Ext.AbstractManager",alternateClassName:"Ext.ModelMgr",requires:["Ext.data.Association"],singleton:!0,typeName:"mtype",associationStack:[],registerType:function(a,b){var c=b.prototype,d;return c&&c.isModel?d=b:(b.extend||(b.extend="Ext.data.Model"),d=Ext.define(a,b)),this.types[a]=d,d},onModelDefined:function(a){var b=this.associationStack,c=b.length,d=[],e,f,g;for(f=0;f<c;f++)e=b[f],e.associatedModel==a.modelName&&d.push(e);for(f=0,c=d.length;f<c;f++)g=d[f],this.types[g.ownerModel].prototype.associations.add(Ext.data.Association.create(g)),Ext.Array.remove(b,g)},registerDeferredAssociation:function(a){this.associationStack.push(a)},getModel:function(a){var b=a;return typeof b=="string"&&(b=this.types[b]),b},create:function(a,b,c){var d=typeof b=="function"?b:this.types[b||a.name];return new d(a,c)}},function(){Ext.regModel=function(){return this.ModelManager.registerType.apply(this.ModelManager,arguments)}}),Ext.define("Ext.PluginManager",{extend:"Ext.AbstractManager",alternateClassName:"Ext.PluginMgr",singleton:!0,typeName:"ptype",create:function(a,b){return a.init?a:Ext.createByAlias("plugin."+(a.ptype||b),a)},findByType:function(a,b){var c=[],d=this.types;for(var e in d){if(!d.hasOwnProperty(e))continue;var f=d[e];f.type==a&&(!b||b===!0&&f.isDefault)&&c.push(f)}return c}},function(){Ext.preg=function(){return Ext.PluginManager.registerType.apply(Ext.PluginManager,arguments)}}),Ext.define("Ext.Template",{requires:["Ext.DomHelper","Ext.util.Format"],inheritableStatics:{from:function(a,b){return a=Ext.getDom(a),new this(a.value||a.innerHTML,b||"")}},constructor:function(a){var b=this,c=arguments,d=[],e=0,f=c.length,g;b.initialConfig={};if(f>1){for(;e<f;e++)g=c[e],typeof g=="object"?(Ext.apply(b.initialConfig,g),Ext.apply(b,g)):d.push(g);a=d.join("")}else Ext.isArray(a)?d.push(a.join("")):d.push(a);b.html=d.join(""),b.compiled&&b.compile()},isTemplate:!0,disableFormats:!1,re:/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,applyTemplate:function(a){function f(b,f,g,h){return g&&c?(h?h=[a[f]].concat(Ext.functionFactory("return ["+h+"];")()):h=[a[f]],g.substr(0,5)=="this."?e[g.substr(5)].apply(e,h):d[g].apply(d,h)):a[f]!==undefined?a[f]:""}var b=this,c=b.disableFormats!==!0,d=Ext.util.Format,e=b;return b.compiled?b.compiled(a):b.html.replace(b.re,f)},set:function(a,b){var c=this;return c.html=a,c.compiled=null,b?c.compile():c},compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,compile:function(){function fn(a,b,c,d){return c&&useFormat?(d=d?","+d:"",c.substr(0,5)!="this."?c="fm."+c+"(":c="this."+c.substr(5)+"("):(d="",c="(values['"+b+"'] == undefined ? '' : "),"',"+c+"values['"+b+"']"+d+") ,'"}var me=this,fm=Ext.util.Format,useFormat=me.disableFormats!==!0,body,bodyReturn;return bodyReturn=me.html.replace(me.compileARe,"\\\\").replace(me.compileBRe,"\\n").replace(me.compileCRe,"\\'").replace(me.re,fn),body="this.compiled = function(values){ return ['"+bodyReturn+"'].join('');};",eval(body),me},insertFirst:function(a,b,c){return this.doInsert("afterBegin",a,b,c)},insertBefore:function(a,b,c){return this.doInsert("beforeBegin",a,b,c)},insertAfter:function(a,b,c){return this.doInsert("afterEnd",a,b,c)},append:function(a,b,c){return this.doInsert("beforeEnd",a,b,c)},doInsert:function(a,b,c,d){b=Ext.getDom(b);var e=Ext.DomHelper.insertHtml(a,b,this.applyTemplate(c));return d?Ext.get(e,!0):e},overwrite:function(a,b,c){return a=Ext.getDom(a),a.innerHTML=this.applyTemplate(b),c?Ext.get(a.firstChild,!0):a.firstChild}},function(){this.createAlias("apply","applyTemplate")}),Ext.define("Ext.XTemplate",{extend:"Ext.Template",argsRe:/<tpl\b[^>]*>((?:(?=([^<]+))\2|<(?!tpl\b[^>]*>))*?)<\/tpl>/,nameRe:/^<tpl\b[^>]*?for="(.*?)"/,ifRe:/^<tpl\b[^>]*?if="(.*?)"/,execRe:/^<tpl\b[^>]*?exec="(.*?)"/,constructor:function(){this.callParent(arguments);var a=this,b=a.html,c=a.argsRe,d=a.nameRe,e=a.ifRe,f=a.execRe,g=0,h=[],i="values",j="parent",k="xindex",l="xcount",m="return ",n="with(values){ ",o,p,q,r,s,t,u,v,w;b=["<tpl>",b,"</tpl>"].join("");while(o=b.match(c))s=null,t=null,u=null,p=o[0].match(d),q=o[0].match(e),r=o[0].match(f),s=q?q[1]:null,s&&(t=Ext.functionFactory(i,j,k,l,n+"try{"+m+Ext.String.htmlDecode(s)+";}catch(e){return;}}")),s=r?r[1]:null,s&&(u=Ext.functionFactory(i,j,k,l,n+Ext.String.htmlDecode(s)+";}")),v=p?p[1]:null,v&&(v==="."?v=i:v===".."&&(v=j),v=Ext.functionFactory(i,j,"try{"+n+m+v+";}}catch(e){return;}")),h.push({id:g,target:v,exec:u,test:t,body:o[1]||""}),b=b.replace(o[0],"{xtpl"+g+"}"),g+=1;for(w=h.length-1;w>=0;--w)a.compileTpl(h[w]);a.master=h[h.length-1],a.tpls=h},applySubTemplate:function(a,b,c,d,e){var f=this,g=f.tpls[a];return g.compiled.call(f,b,c,d,e)},codeRe:/\{\[((?:\\\]|.|\n)*?)\]\}/g,re:/\{([\w-\.\#]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\/]\s?[\d\.\+\-\*\/\(\)]+)?\}/g,compileTpl:function(tpl){function fn(a,b,c,d,e){var f;return b.substr(0,4)=="xtpl"?"',this.applySubTemplate("+b.substr(4)+", values, parent, xindex, xcount),'":(b=="."?f='Ext.Array.indexOf(["string", "number", "boolean"], typeof values) > -1 || Ext.isDate(values) ? values : ""':b=="#"?f="xindex":b.substr(0,7)=="parent."?f=b:b.indexOf(".")!=-1?f="values."+b:f="values['"+b+"']",e&&(f="("+f+e+")"),c&&useFormat?(d=d?","+d:"",c.substr(0,5)!="this."?c="fm."+c+"(":c="this."+c.substr(5)+"("):(d="",c="("+f+" === undefined ? '' : "),"',"+c+f+d+"),'")}function codeFn(a,b){return"',("+b.replace(me.compileARe,"'")+"),'"}var fm=Ext.util.Format,me=this,useFormat=me.disableFormats!==!0,body,bodyReturn,evaluatedFn;return bodyReturn=tpl.body.replace(me.compileBRe,"\\n").replace(me.compileCRe,"\\'").replace(me.re,fn).replace(me.codeRe,codeFn),body="evaluatedFn = function(values, parent, xindex, xcount){return ['"+bodyReturn+"'].join('');};",eval(body),tpl.compiled=function(a,b,c,d){var e,f,g,h;if(tpl.test&&!tpl.test.call(me,a,b,c,d))return"";e=tpl.target?tpl.target.call(me,a,b):a;if(!e)return"";b=tpl.target?a:b;if(tpl.target&&Ext.isArray(e)){g=[],f=e.length;if(tpl.exec)for(h=0;h<f;h++)g[g.length]=evaluatedFn.call(me,e[h],b,h+1,f),tpl.exec.call(me,e[h],b,h+1,f);else for(h=0;h<f;h++)g[g.length]=evaluatedFn.call(me,e[h],b,h+1,f);return g.join("")}return tpl.exec&&tpl.exec.call(me,e,b,c,d),evaluatedFn.call(me,e,b,c,d)},this},applyTemplate:function(a){return this.master.compiled.call(this,a,{},1,1)},compile:function(){return this}},function(){this.createAlias("apply","applyTemplate")}),Ext.define("Ext.app.Controller",{mixins:{observable:"Ext.util.Observable"},onClassExtended:function(a,b){var c=Ext.getClassName(a),d=c.match(/^(.*)\.controller\./);if(d!==null){var e=Ext.Loader.getPrefix(c)||d[1],f=b.onBeforeClassCreated,g=[],h=["model","view","store"],i;b.onBeforeClassCreated=function(a,b){var c,d,k,l,m,n,o;for(c=0,d=h.length;c<d;c++){k=h[c],l=Ext.Array.from(b[k+"s"]);for(m=0,n=l.length;m<n;m++)o=l[m],i=Ext.Loader.getPrefix(o),i===""||i===o?g.push(e+"."+k+"."+o):g.push(o)}Ext.require(g,Ext.Function.pass(f,arguments,this))}}},constructor:function(a){this.mixins.observable.constructor.call(this,a),Ext.apply(this,a||{}),this.createGetters("model",this.models),this.createGetters("store",this.stores),this.createGetters("view",this.views),this.refs&&this.ref(this.refs)},init:function(a){},onLaunch:function(a){},createGetters:function(a,b){a=Ext.String.capitalize(a),Ext.Array.each(b,function(b){var c="get",d=b.split(".");Ext.Array.each(d,function(a){c+=Ext.String.capitalize(a)}),c+=a,this[c]||(this[c]=Ext.Function.pass(this["get"+a],[b],this)),this[c](b)},this)},ref:function(a){var b=this;a=Ext.Array.from(a),Ext.Array.each(a,function(a){var c=a.ref,d="get"+Ext.String.capitalize(c);b[d]||(b[d]=Ext.Function.pass(b.getRef,[c,a],b))})},getRef:function(a,b,c){this.refCache=this.refCache||{},b=b||{},c=c||{},Ext.apply(b,c);if(b.forceCreate)return Ext.ComponentManager.create(b,"component");var d=this,e=b.selector,f=d.refCache[a];return f||(d.refCache[a]=f=Ext.ComponentQuery.query(b.selector)[0],!f&&b.autoCreate&&(d.refCache[a]=f=Ext.ComponentManager.create(b,"component")),f&&f.on("beforedestroy",function(){d.refCache[a]=null})),f},control:function(a,b){this.application.control(a,b,this)},getController:function(a){return this.application.getController(a)},getStore:function(a){return this.application.getStore(a)},getModel:function(a){return this.application.getModel(a)},getView:function(a){return this.application.getView(a)}}),Ext.define("Ext.data.IdGenerator",{isGenerator:!0,constructor:function(a){var b=this;Ext.apply(b,a),b.id&&(Ext.data.IdGenerator.all[b.id]=b)},getRecId:function(a){return a.modelName+"-"+a.internalId},statics:{all:{},get:function(a){var b,c,d;if(typeof a=="string")c=d=a,a=null;else{if(a.isGenerator)return a;c=a.id||a.type,d=a.type}return b=this.all[c],b||(b=Ext.create("idgen."+d,a)),b}}}),Ext.define("Ext.data.SortTypes",{singleton:!0,none:function(a){return a},stripTagsRE:/<\/?[^>]+>/gi,asText:function(a){return String(a).replace(this.stripTagsRE,"")},asUCText:function(a){return String(a).toUpperCase().replace(this.stripTagsRE,"")},asUCString:function(a){return String(a).toUpperCase()},asDate:function(a){return a?Ext.isDate(a)?a.getTime():Date.parse(String(a)):0},asFloat:function(a){var b=parseFloat(String(a).replace(/,/g,""));return isNaN(b)?0:b},asInt:function(a){var b=parseInt(String(a).replace(/,/g,""),10);return isNaN(b)?0:b}}),Ext.define("Ext.util.Filter",{anyMatch:!1,exactMatch:!1,caseSensitive:!1,constructor:function(a){var b=this;Ext.apply(b,a),b.filter=b.filter||b.filterFn,b.filter===undefined&&(b.property!==undefined&&b.value!==undefined&&(b.filter=b.createFilterFn()),b.filterFn=b.filter)},createFilterFn:function(){var a=this,b=a.createValueMatcher(),c=a.property;return function(d){var e=a.getRoot.call(a,d)[c];return b===null?e===null:b.test(e)}},getRoot:function(a){var b=this.root;return b===undefined?a:a[b]},createValueMatcher:function(){var a=this,b=a.value,c=a.anyMatch,d=a.exactMatch,e=a.caseSensitive,f=Ext.String.escapeRegex;return b===null?b:(b.exec||(b=String(b),c===!0?b=f(b):(b="^"+f(b),d===!0&&(b+="$")),b=new RegExp(b,e?"":"i")),b)}}),Ext.define("Ext.util.Sorter",{direction:"ASC",constructor:function(a){var b=this;Ext.apply(b,a),b.updateSortFunction()},createSortFunction:function(a){var b=this,c=b.property,d=b.direction||"ASC",e=d.toUpperCase()=="DESC"?-1:1;return function(c,d){return e*a.call(b,c,d)}},defaultSorterFn:function(a,b){var c=this,d=c.transform,e=c.getRoot(a)[c.property],f=c.getRoot(b)[c.property];return d&&(e=d(e),f=d(f)),e>f?1:e<f?-1:0},getRoot:function(a){return this.root===undefined?a:a[this.root]},setDirection:function(a){var b=this;b.direction=a,b.updateSortFunction()},toggle:function(){var a=this;a.direction=Ext.String.toggle(a.direction,"ASC","DESC"),a.updateSortFunction()},updateSortFunction:function(a){var b=this;a=a||b.sorterFn||b.defaultSorterFn,b.sort=b.createSortFunction(a)}}),Ext.define("Ext.data.Operation",{synchronous:!0,action:undefined,filters:undefined,sorters:undefined,group:undefined,start:undefined,limit:undefined,batch:undefined,callback:undefined,scope:undefined,started:!1,running:!1,complete:!1,success:undefined,exception:!1,error:undefined,actionCommitRecordsRe:/^(?:create|update)$/i,actionSkipSyncRe:/^destroy$/i,constructor:function(a){Ext.apply(this,a||{})},commitRecords:function(a){var b=this,c,d,e,f,g;if(!b.actionSkipSyncRe.test(b.action)){e=b.records;if(e&&e.length){c=Ext.create("Ext.util.MixedCollection",!0,function(a){return a.getId()}),c.addAll(e);for(d=a?a.length:0;d--;)f=a[d],g=c.get(f.getId()),g&&(g.beginEdit(),g.set(f.data),g.endEdit(!0));if(b.actionCommitRecordsRe.test(b.action))for(d=e.length;d--;)e[d].commit()}}},setStarted:function(){this.started=!0,this.running=!0},setCompleted:function(){this.complete=!0,this.running=!1},setSuccessful:function(){this.success=!0},setException:function(a){this.exception=!0,this.success=!1,this.running=!1,this.error=a},hasException:function(){return this.exception===!0},getError:function(){return this.error},getRecords:function(){var a=this.getResultSet();return a===undefined?this.records:a.records},getResultSet:function(){return this.resultSet},isStarted:function(){return this.started===!0},isRunning:function(){return this.running===!0},isComplete:function(){return this.complete===!0},wasSuccessful:function(){return this.isComplete()&&this.success===!0},setBatch:function(a){this.batch=a},allowWrite:function(){return this.action!="read"}}),Ext.define("Ext.data.validations",{singleton:!0,presenceMessage:"must be present",lengthMessage:"is the wrong length",formatMessage:"is the wrong format",inclusionMessage:"is not included in the list of acceptable values",exclusionMessage:"is not an acceptable value",emailMessage:"is not a valid email address",emailRe:/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,presence:function(a,b){return b===undefined&&(b=a),!!b||b===0},length:function(a,b){if(b===undefined||b===null)return!1;var c=b.length,d=a.min,e=a.max;return d&&c<d||e&&c>e?!1:!0},email:function(a,b){return Ext.data.validations.emailRe.test(b)},format:function(a,b){return!!a.matcher&&!!a.matcher.test(b)},inclusion:function(a,b){return a.list&&Ext.Array.indexOf(a.list,b)!=-1},exclusion:function(a,b){return a.list&&Ext.Array.indexOf(a.list,b)==-1}}),Ext.define("Ext.data.ResultSet",{loaded:!0,count:0,total:0,success:!1,constructor:function(a){Ext.apply(this,a),this.totalRecords=this.total,a.count===undefined&&(this.count=this.records.length)}}),Ext.define("Ext.data.writer.Writer",{alias:"writer.base",alternateClassName:["Ext.data.DataWriter","Ext.data.Writer"],writeAllFields:!0,nameProperty:"name",constructor:function(a){Ext.apply(this,a)},write:function(a){var b=a.operation,c=b.records||[],d=c.length,e=0,f=[];for(;e<d;e++)f.push(this.getRecordData(c[e]));return this.writeRecords(a,f)},getRecordData:function(a){var b=a.phantom===!0,c=this.writeAllFields||b,d=this.nameProperty,e=a.fields,f={},g,h,i,j;if(c)e.each(function(b){b.persist&&(h=b[d]||b.name,f[h]=a.get(b.name))});else{g=a.getChanges();for(j in g)g.hasOwnProperty(j)&&(i=e.get(j),h=i[d]||i.name,f[h]=g[j]);b||(f[a.idProperty]=a.getId())}return f}}),Ext.define("Ext.util.Floating",{uses:["Ext.Layer","Ext.window.Window"],focusOnToFront:!0,shadow:"sides",constructor:function(a){var b=this;b.floating=!0,b.el=Ext.create("Ext.Layer",Ext.apply({},a,{hideMode:b.hideMode,hidden:b.hidden,shadow:Ext.isDefined(b.shadow)?b.shadow:"sides",shadowOffset:b.shadowOffset,constrain:!1,shim:b.shim===!1?!1:undefined}),b.el)},onFloatRender:function(){var a=this;a.zIndexParent=a.getZIndexParent(),a.setFloatParent(a.ownerCt),delete a.ownerCt,a.zIndexParent?a.zIndexParent.registerFloatingItem(a):Ext.WindowManager.register(a)},setFloatParent:function(a){var b=this;b.floatParent&&b.mun(b.floatParent,{hide:b.onFloatParentHide,show:b.onFloatParentShow,scope:b}),b.floatParent=a,a&&b.mon(b.floatParent,{hide:b.onFloatParentHide,show:b.onFloatParentShow,scope:b}),(b.constrain||b.constrainHeader)&&!b.constrainTo&&(b.constrainTo=a?a.getTargetEl():b.container)},onFloatParentHide:function(){var a=this;a.hideOnParentHide!==!1&&(a.showOnParentShow=a.isVisible(),a.hide())},onFloatParentShow:function(){this.showOnParentShow&&(delete this.showOnParentShow,this.show())},getZIndexParent:function(){var a=this.ownerCt,b;if(a){while(a)b=a,a=a.ownerCt;if(b.floating)return b}},setZIndex:function(a){var b=this;return b.el.setZIndex(a),a+=10,b.floatingItems&&(a=Math.floor(b.floatingItems.setBase(a)/100)*100+1e4),a},doConstrain:function(a){var b=this,c=b.getConstrainVector(a||b.el.getScopeParent()),d;c&&(d=b.getPosition(),d[0]+=c[0],d[1]+=c[1],b.setPosition(d))},getConstrainVector:function(a){var b=this,c;if(b.constrain||b.constrainHeader)return c=b.constrainHeader?b.header.el:b.el,a=a||b.floatParent&&b.floatParent.getTargetEl()||b.container,c.getConstrainVector(a)},alignTo:function(a,b,c){a.isComponent&&(a=a.getEl());var d=this.el.getAlignToXY(a,b,c);return this.setPagePosition(d),this},toFront:function(a){var b=this;return b.zIndexParent&&b.zIndexParent.toFront(!0),b.zIndexManager.bringToFront(b)&&(Ext.isDefined(a)||(a=!b.focusOnToFront),a||b.focus(!1,!0)),b},setActive:function(a,b){var c=this;a?(c.el.shadow&&!c.maximized&&c.el.enableShadow(!0),c.fireEvent("activate",c)):(c instanceof Ext.window.Window&&b instanceof Ext.window.Window&&c.el.disableShadow(),c.fireEvent("deactivate",c))},toBack:function(){return this.zIndexManager.sendToBack(this),this},center:function(){var a=this,b=a.el.getAlignToXY(a.container,"c-c");return a.setPagePosition(b),a},syncShadow:function(){this.floating&&this.el.sync(!0)},fitContainer:function(){var a=this.floatParent,b=a?a.getTargetEl():this.container,c=b.getViewSize(!1);this.setSize(c)}}),Ext.define("Ext.layout.Layout",{isLayout:!0,initialized:!1,statics:{create:function(a,b){var c;return a instanceof Ext.layout.Layout?Ext.createByAlias("layout."+a):(!a||typeof a=="string"?(c=a||b,a={}):c=a.type||b,Ext.createByAlias("layout."+c,a||{}))}},constructor:function(a){this.id=Ext.id(null,this.type+"-"),Ext.apply(this,a)},layout:function(){var a=this;a.layoutBusy=!0,a.initLayout(),a.beforeLayout.apply(a,arguments)!==!1?(a.layoutCancelled=!1,a.onLayout.apply(a,arguments),a.childrenChanged=!1,a.owner.needsLayout=!1,a.layoutBusy=!1,a.afterLayout.apply(a,arguments)):a.layoutCancelled=!0,a.layoutBusy=!1,a.doOwnerCtLayouts()},beforeLayout:function(){return this.renderChildren(),!0},renderChildren:function(){this.renderItems(this.getLayoutItems(),this.getRenderTarget())},renderItems:function(a,b){var c=this,d=a.length,e=0,f;for(;e<d;e++)f=a[e],f&&!f.rendered?c.renderItem(f,b,e):c.isValidParent(f,b,e)?c.configureItem(f):c.moveItem(f,b,e)},isValidParent:function(a,b,c){var d=a.el?a.el.dom:Ext.getDom(a);return d&&b&&b.dom?Ext.isNumber(c)&&d!==b.dom.childNodes[c]?!1:d.parentNode==(b.dom||b):!1},renderItem:function(a,b,c){var d=this;a.rendered||(d.itemCls&&a.addCls(d.itemCls),d.owner.itemCls&&a.addCls(d.owner.itemCls),a.render(b,c),d.configureItem(a),d.childrenChanged=!0)},moveItem:function(a,b,c){b=b.dom||b,typeof c=="number"&&(c=b.childNodes[c]),b.insertBefore(a.el.dom,c||null),a.container=Ext.get(b),this.configureItem(a),this.childrenChanged=!0},initLayout:function(){var a=this,b=a.targetCls;!a.initialized&&!Ext.isEmpty(b)&&a.getTarget().addCls(b),a.initialized=!0},setOwner:function(a){this.owner=a},getLayoutItems:function(){return[]},configureItem:Ext.emptyFn,onLayout:Ext.emptyFn,afterLayout:Ext.emptyFn,onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,doOwnerCtLayouts:Ext.emptyFn,afterRemove:function(a){var b=a.el,c=this.owner,d=this.itemCls,e=c.itemCls;a.rendered&&!a.isDestroyed&&(d&&b.removeCls(d),e&&b.removeCls(e)),delete a.layoutManagedWidth,delete a.layoutManagedHeight},destroy:function(){var a=this.targetCls,b;Ext.isEmpty(a)||(b=this.getTarget(),b&&b.removeCls(a)),this.onDestroy()}}),Ext.define("Ext.ZIndexManager",{alternateClassName:"Ext.WindowGroup",statics:{zBase:9e3},constructor:function(a){var b=this;b.list={},b.zIndexStack=[],b.front=null,a?a.isContainer?(a.on("resize",b._onContainerResize,b),b.zseed=Ext.Number.from(a.getEl().getStyle("zIndex"),b.getNextZSeed()),b.targetEl=a.getTargetEl(),b.container=a):(Ext.EventManager.onWindowResize(b._onContainerResize,b),b.zseed=b.getNextZSeed(),b.targetEl=Ext.get(a)):(Ext.EventManager.onWindowResize(b._onContainerResize,b),b.zseed=b.getNextZSeed(),Ext.onDocumentReady(function(){b.targetEl=Ext.getBody()}))},getNextZSeed:function(){return Ext.ZIndexManager.zBase+=1e4},setBase:function(a){return this.zseed=a,this.assignZIndices()},assignZIndices:function(){var a=this.zIndexStack,b=a.length,c=0,d=this.zseed,e;for(;c<b;c++)e=a[c],e&&!e.hidden&&(d=e.setZIndex(d));return this._activateLast(),d},_setActiveChild:function(a){a!==this.front&&(this.front&&this.front.setActive(!1,a),this.front=a,a&&(a.setActive(!0),a.modal&&this._showModalMask(a)))},_activateLast:function(a){var b,c=!1,d;for(d=this.zIndexStack.length-1;d>=0;--d){b=this.zIndexStack[d];if(!b.hidden){c||(this._setActiveChild(b),c=!0);if(b.modal){this._showModalMask(b);return}}}this._hideModalMask(),c||this._setActiveChild(null)},_showModalMask:function(a){var b=a.el.getStyle("zIndex")-4,c=a.floatParent?a.floatParent.getTargetEl():Ext.get(a.getEl().dom.parentNode),d;if(!c)return;d=c.getBox(),this.mask||(this.mask=Ext.getBody().createChild({cls:Ext.baseCSSPrefix+"mask"}),this.mask.setVisibilityMode(Ext.Element.DISPLAY),this.mask.on("click",this._onMaskClick,this)),c.dom===document.body&&(d.height=Ext.Element.getViewHeight()),c.addCls(Ext.baseCSSPrefix+"body-masked"),this.mask.setBox(d),this.mask.setStyle("zIndex",b),this.mask.show()},_hideModalMask:function(){this.mask&&this.mask.dom.parentNode&&(Ext.get(this.mask.dom.parentNode).removeCls(Ext.baseCSSPrefix+"body-masked"),this.mask.hide())},_onMaskClick:function(){this.front&&this.front.focus()},_onContainerResize:function(){this.mask&&this.mask.isVisible()&&this.mask.setSize(Ext.get(this.mask.dom.parentNode).getViewSize(!0))},register:function(a){a.zIndexManager&&a.zIndexManager.unregister(a),a.zIndexManager=this,this.list[a.id]=a,this.zIndexStack.push(a),a.on("hide",this._activateLast,this)},unregister:function(a){delete a.zIndexManager,this.list&&this.list[a.id]&&(delete this.list[a.id],a.un("hide",this._activateLast),Ext.Array.remove(this.zIndexStack,a),this._activateLast(a))},get:function(a){return typeof a=="object"?a:this.list[a]},bringToFront:function(a){return a=this.get(a),a!==this.front?(Ext.Array.remove(this.zIndexStack,a),this.zIndexStack.push(a),this.assignZIndices(),!0):(a.modal&&this._showModalMask(a),!1)},sendToBack:function(a){return a=this.get(a),Ext.Array.remove(this.zIndexStack,a),this.zIndexStack.unshift(a),this.assignZIndices(),a},hideAll:function(){for(var a in this.list)this.list[a].isComponent&&this.list[a].isVisible()&&this.list[a].hide()},hide:function(){var a=0,b=this.zIndexStack.length,c;this.tempHidden=[];for(;a<b;a++)c=this.zIndexStack[a],c.isVisible()&&(this.tempHidden.push(c),c.hide())},show:function(){var a=0,b=this.tempHidden.length,c,d,e;for(;a<b;a++)c=this.tempHidden[a],d=c.x,e=c.y,c.show(),c.setPosition(d,e);delete this.tempHidden},getActive:function(){return this.front},getBy:function(a,b){var c=[],d=0,e=this.zIndexStack.length,f;for(;d<e;d++)f=this.zIndexStack[d],a.call(b||f,f)!==!1&&c.push(f);return c},each:function(a,b){var c;for(var d in this.list){c=this.list[d];if(c.isComponent&&a.call(b||c,c)===!1)return}},eachBottomUp:function(a,b){var c,d=this.zIndexStack,e,f;for(e=0,f=d.length;e<f;e++){c=d[e];if(c.isComponent&&a.call(b||c,c)===!1)return}},eachTopDown:function(a,b){var c,d=this.zIndexStack,e;for(e=d.length;e-->0;){c=d[e];if(c.isComponent&&a.call(b||c,c)===!1)return}},destroy:function(){this.each(function(a){a.destroy()}),delete this.zIndexStack,delete this.list,delete this.container,delete this.targetEl}},function(){Ext.WindowManager=Ext.WindowMgr=new this}),Ext.define("Ext.layout.container.boxOverflow.None",{alternateClassName:"Ext.layout.boxOverflow.None",constructor:function(a,b){this.layout=a,Ext.apply(this,b||{})},handleOverflow:Ext.emptyFn,clearOverflow:Ext.emptyFn,onRemove:Ext.emptyFn,getItem:function(a){return this.layout.owner.getComponent(a)},onRemove:Ext.emptyFn}),Ext.define("Ext.util.KeyMap",{alternateClassName:"Ext.KeyMap",constructor:function(a,b,c){var d=this;Ext.apply(d,{el:Ext.get(a),eventName:c||d.eventName,bindings:[]}),b&&d.addBinding(b),d.enable()},eventName:"keydown",addBinding:function(a){if(Ext.isArray(a)){Ext.each(a,this.addBinding,this);return}var b=a.key,c=!1,d,e,f,g,h;if(Ext.isString(b)){e=[],f=b.toUpperCase();for(g=0,h=f.length;g<h;++g)e.push(f.charCodeAt(g));b=e,c=!0}Ext.isArray(b)||(b=[b]);if(!c)for(g=0,h=b.length;g<h;++g)d=b[g],Ext.isString(d)&&(b[g]=d.toUpperCase().charCodeAt(0));this.bindings.push(Ext.apply({keyCode:b},a))},handleKeyDown:function(a){if(this.enabled){var b=this.bindings,c=0,d=b.length;a=this.processEvent(a);for(;c<d;++c)this.processBinding(b[c],a)}},processEvent:function(a){return a},processBinding:function(a,b){if(this.checkModifiers(a,b)){var c=b.getKey(),d=a.fn||a.handler,e=a.scope||this,f=a.keyCode,g=a.defaultEventAction,h,i,j=new Ext.EventObjectImpl(b);for(h=0,i=f.length;h<i;++h)if(c===f[h]){d.call(e,c,b)!==!0&&g&&j[g]();break}}},checkModifiers:function(a,b){var c=["shift","ctrl","alt"],d=0,e=c.length,f,g;for(;d<e;++d){g=c[d],f=a[g];if(f!==undefined&&f!==b[g+"Key"])return!1}return!0},on:function(a,b,c){var d,e,f,g;Ext.isObject(a)&&!Ext.isArray(a)?(d=a.key,e=a.shift,f=a.ctrl,g=a.alt):d=a,this.addBinding({key:d,shift:e,ctrl:f,alt:g,fn:b,scope:c})},isEnabled:function(){return this.enabled},enable:function(){var a=this;a.enabled||(a.el.on(a.eventName,a.handleKeyDown,a),a.enabled=!0)},disable:function(){var a=this;a.enabled&&(a.el.removeListener(a.eventName,a.handleKeyDown,a),a.enabled=!1)},setDisabled:function(a){a?this.disable():this.enable()},destroy:function(a){var b=this;b.bindings=[],b.disable(),a===!0&&b.el.remove(),delete b.el}}),Ext.define("Ext.util.ClickRepeater",{extend:"Ext.util.Observable",constructor:function(a,b){this.el=Ext.get(a),this.el.unselectable(),Ext.apply(this,b),this.addEvents("mousedown","click","mouseup"),this.disabled||(this.disabled=!0,this.enable()),this.handler&&this.on("click",this.handler,this.scope||this),this.callParent()},interval:20,delay:250,preventDefault:!0,stopDefault:!1,timer:0,enable:function(){this.disabled&&(this.el.on("mousedown",this.handleMouseDown,this),Ext.isIE&&this.el.on("dblclick",this.handleDblClick,this),(this.preventDefault||this.stopDefault)&&this.el.on("click",this.eventOptions,this)),this.disabled=!1},disable:function(a){if(a||!this.disabled)clearTimeout(this.timer),this.pressedCls&&this.el.removeCls(this.pressedCls),Ext.getDoc().un("mouseup",this.handleMouseUp,this),this.el.removeAllListeners();this.disabled=!0},setDisabled:function(a){this[a?"disable":"enable"]()},eventOptions:function(a){this.preventDefault&&a.preventDefault(),this.stopDefault&&a.stopEvent()},destroy:function(){this.disable(!0),Ext.destroy(this.el),this.clearListeners()},handleDblClick:function(a){clearTimeout(this.timer),this.el.blur(),this.fireEvent("mousedown",this,a),this.fireEvent("click",this,a)},handleMouseDown:function(a){clearTimeout(this.timer),this.el.blur(),this.pressedCls&&this.el.addCls(this.pressedCls),this.mousedownTime=new Date,Ext.getDoc().on("mouseup",this.handleMouseUp,this),this.el.on("mouseout",this.handleMouseOut,this),this.fireEvent("mousedown",this,a),this.fireEvent("click",this,a),this.accelerate&&(this.delay=400),a=new Ext.EventObjectImpl(a),this.timer=Ext.defer(this.click,this.delay||this.interval,this,[a])},click:function(a){this.fireEvent("click",this,a),this.timer=Ext.defer(this.click,this.accelerate?this.easeOutExpo(Ext.Date.getElapsed(this.mousedownTime),400,-390,12e3):this.interval,this,[a])},easeOutExpo:function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},handleMouseOut:function(){clearTimeout(this.timer),this.pressedCls&&this.el.removeCls(this.pressedCls),this.el.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(){this.el.un("mouseover",this.handleMouseReturn,this),this.pressedCls&&this.el.addCls(this.pressedCls),this.click()},handleMouseUp:function(a){clearTimeout(this.timer),this.el.un("mouseover",this.handleMouseReturn,this),this.el.un("mouseout",this.handleMouseOut,this),Ext.getDoc().un("mouseup",this.handleMouseUp,this),this.pressedCls&&this.el.removeCls(this.pressedCls),this.fireEvent("mouseup",this,a)}}),Ext.define("Ext.layout.component.Component",{extend:"Ext.layout.Layout",type:"component",monitorChildren:!0,initLayout:function(){var a=this,b=a.owner,c=b.el;a.initialized||(b.frameSize?a.frameSize=b.frameSize:b.frameSize=a.frameSize={top:0,left:0,bottom:0,right:0}),a.callParent(arguments)},beforeLayout:function(a,b,c,d){this.callParent(arguments);var e=this,f=e.owner,g=f.ownerCt,h=f.layout,i=f.isVisible(!0),j=f.el.child,k;return e.previousComponentSize=e.lastComponentSize,!c&&(!Ext.isNumber(a)&&f.isFixedWidth()||!Ext.isNumber(b)&&f.isFixedHeight())&&d&&d!==g?(e.doContainerLayout(),!1):(!i&&(f.hiddenAncestor||f.floating)&&(f.hiddenAncestor&&(k=f.hiddenAncestor.layoutOnShow,k.remove(f),k.add(f)),f.needsLayout={width:a,height:b,isSetSize:!1}),i&&this.needsLayout(a,b)?f.beforeComponentLayout(a,b,c,d):!1)},needsLayout:function(a,b){var c=this,d,e;return c.lastComponentSize=c.lastComponentSize||{width:-Infinity,height:-Infinity},d=!Ext.isDefined(a)||c.lastComponentSize.width!==a,e=!Ext.isDefined(b)||c.lastComponentSize.height!==b,!c.isSizing&&(c.childrenChanged||d||e)},setElementSize:function(a,b,c){b!==undefined&&c!==undefined?a.setSize(b,c):c!==undefined?a.setHeight(c):b!==undefined&&a.setWidth(b)},getTarget:function(){return this.owner.el},getRenderTarget:function(){return this.owner.el},setTargetSize:function(a,b){var c=this;c.setElementSize(c.owner.el,a,b);if(c.owner.frameBody){var d=c.getTargetInfo(),e=d.padding,f=d.border,g=c.frameSize;c.setElementSize(c.owner.frameBody,Ext.isNumber(a)?a-g.left-g.right-e.left-e.right-f.left-f.right:a,Ext.isNumber(b)?b-g.top-g.bottom-e.top-e.bottom-f.top-f.bottom:b)}c.autoSized={width:!Ext.isNumber(a),height:!Ext.isNumber(b)},c.lastComponentSize={width:a,height:b}},getTargetInfo:function(){if(!this.targetInfo){var a=this.getTarget(),b=this.owner.getTargetEl();this.targetInfo={padding:{top:a.getPadding("t"),right:a.getPadding("r"),bottom:a.getPadding("b"),left:a.getPadding("l")},border:{top:a.getBorderWidth("t"),right:a.getBorderWidth("r"),bottom:a.getBorderWidth("b"),left:a.getBorderWidth("l")},bodyMargin:{top:b.getMargin("t"),right:b.getMargin("r"),bottom:b.getMargin("b"),left:b.getMargin("l")}}}return this.targetInfo},doOwnerCtLayouts:function(){var a=this.owner,b=a.ownerCt,c,d,e=this.lastComponentSize,f=this.previousComponentSize,g=f&&e&&Ext.isNumber(e.width)?e.width!==f.width:!0,h=f&&e&&Ext.isNumber(e.height)?e.height!==f.height:!0;if(!b||!g&&!h)return;c=b.componentLayout,d=b.layout,!a.floating&&c&&c.monitorChildren&&!c.layoutBusy&&!b.suspendLayout&&d&&!d.layoutBusy&&(g&&!b.isFixedWidth()||h&&!b.isFixedHeight()?(this.isSizing=!0,b.doComponentLayout(),this.isSizing=!1):d.bindToOwnerCtContainer===!0&&d.layout())},doContainerLayout:function(){var a=this,b=a.owner,c=b.ownerCt,d=b.layout,e;!b.suspendLayout&&d&&d.isLayout&&!d.layoutBusy&&!d.isAutoDock&&d.layout(),c&&c.componentLayout&&(e=c.componentLayout,!b.floating&&e.monitorChildren&&!e.layoutBusy&&(e.childrenChanged=!0))},afterLayout:function(a,b,c,d){this.doContainerLayout(),this.owner.afterComponentLayout(a,b,c,d)}}),Ext.define("Ext.util.TextMetrics",{statics:{shared:null,measure:function(a,b,c){var d=this,e=d.shared;return e||(e=d.shared=new d(a,c)),e.bind(a),e.setFixedWidth(c||"auto"),e.getSize(b)},destroy:function(){var a=this;Ext.destroy(a.shared),a.shared=null}},constructor:function(a,b){var c=this.measure=Ext.getBody().createChild({cls:"x-textmetrics"});this.el=Ext.get(a),c.position("absolute"),c.setLeftTop(-1e3,-1e3),c.hide(),b&&c.setWidth(b)},getSize:function(a){var b=this.measure,c;return b.update(a),c=b.getSize(),b.update(""),c},bind:function(a){var b=this;b.el=Ext.get(a),b.measure.setStyle(b.el.getStyles("font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"))},setFixedWidth:function(a){this.measure.setWidth(a)},getWidth:function(a){return this.measure.dom.style.width="auto",this.getSize(a).width},getHeight:function(a){return this.getSize(a).height},destroy:function(){var a=this;a.measure.remove(),delete a.el,delete a.measure}},function(){Ext.Element.addMethods({getTextWidth:function(a,b,c){return Ext.Number.constrain(Ext.util.TextMetrics.measure(this.dom,Ext.value(a,this.dom.innerHTML,!0)).width,b||0,c||1e6)}})}),Ext.define("Ext.layout.container.boxOverflow.Scroller",{extend:"Ext.layout.container.boxOverflow.None",requires:["Ext.util.ClickRepeater","Ext.Element"],alternateClassName:"Ext.layout.boxOverflow.Scroller",mixins:{observable:"Ext.util.Observable"},animateScroll:!1,scrollIncrement:20,wheelIncrement:10,scrollRepeatInterval:60,scrollDuration:400,scrollerCls:Ext.baseCSSPrefix+"box-scroller",constructor:function(a,b){this.layout=a,Ext.apply(this,b||{}),this.addEvents("scroll")},initCSSClasses:function(){var a=this,b=a.layout;a.CSSinitialized||(a.beforeCtCls=a.beforeCtCls||Ext.baseCSSPrefix+"box-scroller-"+b.parallelBefore,a.afterCtCls=a.afterCtCls||Ext.baseCSSPrefix+"box-scroller-"+b.parallelAfter,a.beforeScrollerCls=a.beforeScrollerCls||Ext.baseCSSPrefix+b.owner.getXType()+"-scroll-"+b.parallelBefore,a.afterScrollerCls=a.afterScrollerCls||Ext.baseCSSPrefix+b.owner.getXType()+"-scroll-"+b.parallelAfter,a.CSSinitializes=!0)},handleOverflow:function(a,b){var c=this,d=c.layout,e="get"+d.parallelPrefixCap,f={};return c.initCSSClasses(),c.callParent(arguments),this.createInnerElements(),this.showScrollers(),f[d.perpendicularPrefix]=b[d.perpendicularPrefix],f[d.parallelPrefix]=b[d.parallelPrefix]-(c.beforeCt[e]()+c.afterCt[e]()),{targetSize:f}},createInnerElements:function(){var a=this,b=a.layout.getRenderTarget();a.beforeCt||(b.addCls(Ext.baseCSSPrefix+a.layout.direction+"-box-overflow-body"),a.beforeCt=b.insertSibling({cls:Ext.layout.container.Box.prototype.innerCls+" "+a.beforeCtCls},"before"),a.afterCt=b.insertSibling({cls:Ext.layout.container.Box.prototype.innerCls+" "+a.afterCtCls},"after"),a.createWheelListener())},createWheelListener:function(){this.layout.innerCt.on({scope:this,mousewheel:function(a){a.stopEvent(),this.scrollBy(a.getWheelDelta()*this.wheelIncrement*-1,!1)}})},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){this.createScrollers(),this.beforeScroller.show(),this.afterScroller.show(),this.updateScrollButtons(),this.layout.owner.addClsWithUI("scroller")},hideScrollers:function(){this.beforeScroller!=undefined&&(this.beforeScroller.hide(),this.afterScroller.hide(),this.layout.owner.removeClsWithUI("scroller"))},createScrollers:function(){if(!this.beforeScroller&&!this.afterScroller){var a=this.beforeCt.createChild({cls:Ext.String.format("{0} {1} ",this.scrollerCls,this.beforeScrollerCls)}),b=this.afterCt.createChild({cls:Ext.String.format("{0} {1}",this.scrollerCls,this.afterScrollerCls)});a.addClsOnOver(this.beforeScrollerCls+"-hover"),b.addClsOnOver(this.afterScrollerCls+"-hover"),a.setVisibilityMode(Ext.Element.DISPLAY),b.setVisibilityMode(Ext.Element.DISPLAY),this.beforeRepeater=Ext.create("Ext.util.ClickRepeater",a,{interval:this.scrollRepeatInterval,handler:this.scrollLeft,scope:this}),this.afterRepeater=Ext.create("Ext.util.ClickRepeater",b,{interval:this.scrollRepeatInterval,handler:this.scrollRight,scope:this}),this.beforeScroller=a,this.afterScroller=b}},destroy:function(){Ext.destroy(this.beforeRepeater,this.afterRepeater,this.beforeScroller,this.afterScroller,this.beforeCt,this.afterCt)},scrollBy:function(a,b){this.scrollTo(this.getScrollPosition()+a,b)},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){if(this.beforeScroller==undefined||this.afterScroller==undefined)return;var a=this.atExtremeBefore()?"addCls":"removeCls",b=this.atExtremeAfter()?"addCls":"removeCls",c=this.beforeScrollerCls+"-disabled",d=this.afterScrollerCls+"-disabled";this.beforeScroller[a](c),this.afterScroller[b](d),this.scrolling=!1},atExtremeBefore:function(){return this.getScrollPosition()===0},scrollLeft:function(){this.scrollBy(-this.scrollIncrement,!1)},scrollRight:function(){this.scrollBy(this.scrollIncrement,!1)},getScrollPosition:function(){var a=this.layout;return parseInt(a.innerCt.dom["scroll"+a.parallelBeforeCap],10)||0},getMaxScrollPosition:function(){var a=this.layout;return a.innerCt.dom["scroll"+a.parallelPrefixCap]-this.layout.innerCt["get"+a.parallelPrefixCap]()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollPosition()},scrollTo:function(a,b){var c=this,d=c.layout,e=c.getScrollPosition(),f=Ext.Number.constrain(a,0,c.getMaxScrollPosition());f!=e&&!c.scrolling&&(b==undefined&&(b=c.animateScroll),d.innerCt.scrollTo(d.parallelBefore,f,b?c.getScrollAnim():!1),b?c.scrolling=!0:(c.scrolling=!1,c.updateScrollButtons()),c.fireEvent("scroll",c,f,b?c.getScrollAnim():!1))},scrollToItem:function(a,b){var c=this,d=c.layout,e,f,g;a=c.getItem(a),a!=undefined&&(e=this.getItemVisibility(a),e.fullyVisible||(f=a.getBox(!0,!0),g=f[d.parallelPosition],e.hiddenEnd&&(g-=this.layout.innerCt["get"+d.parallelPrefixCap]()-f[d.parallelPrefix]),this.scrollTo(g,b)))},getItemVisibility:function(a){var b=this,c=b.getItem(a).getBox(!0,!0),d=b.layout,e=c[d.parallelPosition],f=e+c[d.parallelPrefix],g=b.getScrollPosition(),h=g+d.innerCt["get"+d.parallelPrefixCap]();return{hiddenStart:e<g,hiddenEnd:f>h,fullyVisible:e>g&&f<h}}}),Ext.define("Ext.util.Offset",{statics:{fromObject:function(a){return new this(a.x,a.y)}},constructor:function(a,b){return this.x=a!=null&&!isNaN(a)?a:0,this.y=b!=null&&!isNaN(b)?b:0,this},copy:function(){return new Ext.util.Offset(this.x,this.y)},copyFrom:function(a){this.x=a.x,this.y=a.y},toString:function(){return"Offset["+this.x+","+this.y+"]"},equals:function(a){return this.x==a.x&&this.y==a.y},round:function(a){if(!isNaN(a)){var b=Math.pow(10,a);this.x=Math.round(this.x*b)/b,this.y=Math.round(this.y*b)/b}else this.x=Math.round(this.x),this.y=Math.round(this.y)},isZero:function(){return this.x==0&&this.y==0}}),Ext.define("Ext.util.KeyNav",{alternateClassName:"Ext.KeyNav",requires:["Ext.util.KeyMap"],statics:{keyOptions:{left:37,right:39,up:38,down:40,space:32,pageUp:33,pageDown:34,del:46,backspace:8,home:36,end:35,enter:13,esc:27,tab:9}},constructor:function(a,b){this.setConfig(a,b||{})},setConfig:function(a,b){this.map&&this.map.destroy();var c=Ext.create("Ext.util.KeyMap",a,null,this.getKeyEvent("forceKeyDown"in b?b.forceKeyDown:this.forceKeyDown)),d=Ext.util.KeyNav.keyOptions,e=b.scope||this,f;this.map=c;for(f in d)d.hasOwnProperty(f)&&b[f]&&c.addBinding({scope:e,key:d[f],handler:Ext.Function.bind(this.handleEvent,e,[b[f]],!0),defaultEventAction:b.defaultEventAction||this.defaultEventAction});c.disable(),b.disabled||c.enable()},handleEvent:function(a,b,c){return c.call(this,b)},disabled:!1,defaultEventAction:"stopEvent",forceKeyDown:!1,destroy:function(a){this.map.destroy(a),delete this.map},enable:function(){this.map.enable(),this.disabled=!1},disable:function(){this.map.disable(),this.disabled=!0},setDisabled:function(a){this.map.setDisabled(a),this.disabled=a},getKeyEvent:function(a){return a||Ext.EventManager.useKeyDown?"keydown":"keypress"}}),Ext.define("Ext.fx.Queue",{requires:["Ext.util.HashMap"],constructor:function(){this.targets=Ext.create("Ext.util.HashMap"),this.fxQueue={}},getFxDefaults:function(a){var b=this.targets.get(a);return b?b.fxDefaults:{}},setFxDefaults:function(a,b){var c=this.targets.get(a);c&&(c.fxDefaults=Ext.apply(c.fxDefaults||{},b))},stopAnimation:function(a){var b=this,c=b.getFxQueue(a),d=c.length;while(d)c[d-1].end(),d--},getActiveAnimation:function(a){var b=this.getFxQueue(a);return b&&!!b.length?b[0]:!1},hasFxBlock:function(a){var b=this.getFxQueue(a);return b&&b[0]&&b[0].block},getFxQueue:function(a){if(!a)return!1;var b=this,c=b.fxQueue[a],d=b.targets.get(a);return d?(c||(b.fxQueue[a]=[],d.type!="element"&&d.target.on("destroy",function(){b.fxQueue[a]=[]})),b.fxQueue[a]):!1},queueFx:function(a){var b=this,c=a.target,d,e;if(!c)return;d=b.getFxQueue(c.getId()),e=d.length,e?a.concurrent?a.paused=!1:d[e-1].on("afteranimate",function(){a.paused=!1}):a.paused=!1,a.on("afteranimate",function(){Ext.Array.remove(d,a);if(a.remove&&c.type=="element"){var b=Ext.get(c.id);b&&b.remove()}},this),d.push(a)}}),Ext.define("Ext.fx.target.Target",{isAnimTarget:!0,constructor:function(a){this.target=a,this.id=this.getId()},getId:function(){return this.target.id}}),Ext.define("Ext.fx.target.Sprite",{extend:"Ext.fx.target.Target",type:"draw",getFromPrim:function(a,b){var c;return b=="translate"?c={x:a.attr.translation.x||0,y:a.attr.translation.y||0}:b=="rotate"?c={degrees:a.attr.rotation.degrees||0,x:a.attr.rotation.x,y:a.attr.rotation.y}:c=a.attr[b],c},getAttr:function(a,b){return[[this.target,b!=undefined?b:this.getFromPrim(this.target,a)]]},setAttr:function(a){var b=a.length,c=[],d,e,f,g,h,i,j,k,l,m,n,o;for(k=0;k<b;k++){d=a[k].attrs;for(e in d){f=d[e],o=f.length;for(l=0;l<o;l++)h=f[l][0],g=f[l][1],e==="translate"?j={x:g.x,y:g.y}:e==="rotate"?(m=g.x,isNaN(m)&&(m=null),n=g.y,isNaN(n)&&(n=null),j={degrees:g.degrees,x:m,y:n}):e==="width"||e==="height"||e==="x"||e==="y"?j=parseFloat(g):j=g,i=Ext.Array.indexOf(c,h),i==-1&&(c.push([h,{}]),i=c.length-1),c[i][1][e]=j}}b=c.length;for(k=0;k<b;k++)h=c[k],h[0].setAttributes(h[1]);this.target.redraw()}}),Ext.define("Ext.fx.target.CompositeSprite",{extend:"Ext.fx.target.Sprite",getAttr:function(a,b){var c=[],d=this.target;return d.each(function(d){c.push([d,b!=undefined?b:this.getFromPrim(d,a)])},this),c}}),Ext.define("Ext.fx.target.Component",{extend:"Ext.fx.target.Target",type:"component",getPropMethod:{top:function(){return this.getPosition(!0)[1]},left:function(){return this.getPosition(!0)[0]},x:function(){return this.getPosition()[0]},y:function(){return this.getPosition()[1]},height:function(){return this.getHeight()},width:function(){return this.getWidth()},opacity:function(){return this.el.getStyle("opacity")}},compMethod:{top:"setPosition",left:"setPosition",x:"setPagePosition",y:"setPagePosition",height:"setSize",width:"setSize",opacity:"setOpacity"},getAttr:function(a,b){return[[this.target,b!==undefined?b:this.getPropMethod[a].call(this.target)]]},setAttr:function(a,b,c){var d=this,e=d.target,f=a.length,g,h,i,j,k,l,m,n,o,p,q;for(j=0;j<f;j++){g=a[j].attrs;for(h in g){m=g[h].length,l={setPosition:{},setPagePosition:{},setSize:{},setOpacity:{}};for(k=0;k<m;k++)i=g[h][k],l[d.compMethod[h]].target=i[0],l[d.compMethod[h]][h]=i[1];l.setPosition.target&&(i=l.setPosition,n=i.left===undefined?undefined:parseInt(i.left,10),o=i.top===undefined?undefined:parseInt(i.top,10),i.target.setPosition(n,o)),l.setPagePosition.target&&(i=l.setPagePosition,i.target.setPagePosition(i.x,i.y)),l.setSize.target&&l.setSize.target.el&&(i=l.setSize,p=i.width===undefined?i.target.getWidth():parseInt(i.width,10),q=i.height===undefined?i.target.getHeight():parseInt(i.height,10),c||d.dynamic?(i.target.componentLayout.childrenChanged=!0,d.layoutAnimation?i.target.setCalculatedSize(p,q):i.target.setSize(p,q)):i.target.el.setSize(p,q)),l.setOpacity.target&&(i=l.setOpacity,i.target.el.setStyle("opacity",i.opacity))}}}}),Ext.define("Ext.fx.CubicBezier",{singleton:!0,cubicBezierAtTime:function(a,b,c,d,e,f){function m(a){return((i*a+h)*a+g)*a}function n(a,b){var c=o(a,b);return((l*c+k)*c+j)*c}function o(a,b){var c,d,e,f,j,k;for(e=a,k=0;k<8;k++){f=m(e)-a;if(Math.abs(f)<b)return e;j=(3*i*e+2*h)*e+g;if(Math.abs(j)<1e-6)break;e-=f/j}c=0,d=1,e=a;if(e<c)return c;if(e>d)return d;while(c<d){f=m(e);if(Math.abs(f-a)<b)return e;a>f?c=e:d=e,e=(d-c)/2+c}return e}var g=3*b,h=3*(d-b)-g,i=1-g-h,j=3*c,k=3*(e-c)-j,l=1-j-k;return n(a,1/(200*f))},cubicBezier:function(a,b,c,d){var e=function(e){return Ext.fx.CubicBezier.cubicBezierAtTime(e,a,b,c,d,1)};return e.toCSS3=function(){return"cubic-bezier("+[a,b,c,d].join(",")+")"},e.reverse=function(){return Ext.fx.CubicBezier.cubicBezier(1-c,1-d,1-a,1-b)},e}}),Ext.define("Ext.draw.Color",{colorToHexRe:/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/,rgbRe:/\s*rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)\s*/,hexRe:/\s*#([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)\s*/,lightnessFactor:.2,constructor:function(a,b,c){var d=this,e=Ext.Number.constrain;d.r=e(a,0,255),d.g=e(b,0,255),d.b=e(c,0,255)},getRed:function(){return this.r},getGreen:function(){return this.g},getBlue:function(){return this.b},getRGB:function(){var a=this;return[a.r,a.g,a.b]},getHSL:function(){var a=this,b=a.r/255,c=a.g/255,d=a.b/255,e=Math.max(b,c,d),f=Math.min(b,c,d),g=e-f,h,i=0,j=.5*(e+f);return f!=e&&(i=j<.5?g/(e+f):g/(2-e-f),b==e?h=60*(c-d)/g:c==e?h=120+60*(d-b)/g:h=240+60*(b-c)/g,h<0&&(h+=360),h>=360&&(h-=360)),[h,i,j]},getLighter:function(a){var b=this.getHSL();return a=a||this.lightnessFactor,b[2]=Ext.Number.constrain(b[2]+a,0,1),this.fromHSL(b[0],b[1],b[2])},getDarker:function(a){return a=a||this.lightnessFactor,this.getLighter(-a)},toString:function(){var a=this,b=Math.round,c=b(a.r).toString(16),d=b(a.g).toString(16),e=b(a.b).toString(16);return c=c.length==1?"0"+c:c,d=d.length==1?"0"+d:d,e=e.length==1?"0"+e:e,["#",c,d,e].join("")},toHex:function(a){Ext.isArray(a)&&(a=a[0]);if(!Ext.isString(a))return"";if(a.substr(0,1)==="#")return a;var b=this.colorToHexRe.exec(a);if(Ext.isArray(b)){var c=parseInt(b[2],10),d=parseInt(b[3],10),e=parseInt(b[4],10),f=e|d<<8|c<<16;return b[1]+"#"+("000000"+f.toString(16)).slice(-6)}return""},fromString:function(a){var b,c,d,e,f=parseInt;return a.length!=4&&a.length!=7||a.substr(0,1)!=="#"?(b=a.match(this.rgbRe),b&&(c=b[1],d=b[2],e=b[3])):(b=a.match(this.hexRe),b&&(c=f(b[1],16)>>0,d=f(b[2],16)>>0,e=f(b[3],16)>>0,a.length==4&&(c+=c*16,d+=d*16,e+=e*16))),typeof c=="undefined"?undefined:Ext.create("Ext.draw.Color",c,d,e)},getGrayscale:function(){return this.r*.3+this.g*.59+this.b*.11},fromHSL:function(a,b,c){var d,e,f,g,h=[],i=Math.abs,j=Math.floor;if(b==0||a==null)h=[c,c,c];else{a/=60,d=b*(1-i(2*c-1)),e=d*(1-i(a-2*j(a/2)-1)),f=c-d/2;switch(j(a)){case 0:h=[d,e,0];break;case 1:h=[e,d,0];break;case 2:h=[0,d,e];break;case 3:h=[0,e,d];break;case 4:h=[e,0,d];break;case 5:h=[d,0,e]}h=[h[0]+f,h[1]+f,h[2]+f]}return Ext.create("Ext.draw.Color",h[0]*255,h[1]*255,h[2]*255)}},function(){var a=this.prototype;this.addStatics({fromHSL:function(){return a.fromHSL.apply(a,arguments)},fromString:function(){return a.fromString.apply(a,arguments)},toHex:function(){return a.toHex.apply(a,arguments)}})}),Ext.define("Ext.dd.StatusProxy",{animRepair:!1,constructor:function(a){Ext.apply(this,a),this.id=this.id||Ext.id(),this.proxy=Ext.createWidget("component",{floating:!0,stateful:!1,id:this.id,html:'<div class="'+Ext.baseCSSPrefix+'dd-drop-icon"></div><div class="'+Ext.baseCSSPrefix+'dd-drag-ghost"></div>',cls:Ext.baseCSSPrefix+"dd-drag-proxy "+this.dropNotAllowed,shadow:!a||a.shadow!==!1,renderTo:document.body}),this.el=this.proxy.el,this.el.show(),this.el.setVisibilityMode(Ext.Element.VISIBILITY),this.el.hide(),this.ghost=Ext.get(this.el.dom.childNodes[1]),this.dropStatus=this.dropNotAllowed},dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",setStatus:function(a){a=a||this.dropNotAllowed,this.dropStatus!=a&&(this.el.replaceCls(this.dropStatus,a),this.dropStatus=a)},reset:function(a){this.el.dom.className=Ext.baseCSSPrefix+"dd-drag-proxy "+this.dropNotAllowed,this.dropStatus=this.dropNotAllowed,a&&this.ghost.update("")},update:function(a){typeof a=="string"?this.ghost.update(a):(this.ghost.update(""),a.style.margin="0",this.ghost.dom.appendChild(a));var b=this.ghost.dom.firstChild;b&&Ext.fly(b).setStyle("float","none")},getEl:function(){return this.el},getGhost:function(){return this.ghost},hide:function(a){this.proxy.hide(),a&&this.reset(!0)},stop:function(){this.anim&&this.anim.isAnimated&&this.anim.isAnimated()&&this.anim.stop()},show:function(){this.proxy.show(),this.proxy.toFront()},sync:function(){this.proxy.el.sync()},repair:function(a,b,c){this.callback=b,this.scope=c,a&&this.animRepair!==!1?(this.el.addCls(Ext.baseCSSPrefix+"dd-drag-repair"),this.el.hideUnders(!0),this.anim=this.el.animate({duration:this.repairDuration||500,easing:"ease-out",to:{x:a[0],y:a[1]},stopAnimation:!0,callback:this.afterRepair,scope:this})):this.afterRepair()},afterRepair:function(){this.hide(!0),typeof this.callback=="function"&&this.callback.call(this.scope||this),this.callback=null,this.scope=null},destroy:function(){Ext.destroy(this.ghost,this.proxy,this.el)}}),Ext.define("Ext.panel.Proxy",{alternateClassName:"Ext.dd.PanelProxy",constructor:function(a,b){this.panel=a,this.id=this.panel.id+"-ddproxy",Ext.apply(this,b)},insertProxy:!0,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost.el},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){this.ghost&&(this.proxy&&(this.proxy.remove(),delete this.proxy),this.panel.unghost(null,!1),delete this.ghost)},show:function(){if(!this.ghost){var a=this.panel.getSize();this.panel.el.setVisibilityMode(Ext.Element.DISPLAY),this.ghost=this.panel.ghost(),this.insertProxy&&(this.proxy=this.panel.el.insertSibling({cls:Ext.baseCSSPrefix+"panel-dd-spacer"}),this.proxy.setSize(a))}},repair:function(a,b,c){this.hide(),typeof b=="function"&&b.call(c||this)},moveProxy:function(a,b){this.proxy&&a.insertBefore(this.proxy.dom,b)}}),Ext.define("Ext.layout.component.AbstractDock",{extend:"Ext.layout.component.Component",type:"dock",autoSizing:!0,beforeLayout:function(){var a=this.callParent(arguments);return a!==!1&&(!this.initializedBorders||this.childrenChanged)&&(!this.owner.border||this.owner.manageBodyBorders)&&(this.handleItemBorders(),this.initializedBorders=!0),a},handleItemBorders:function(){var a=this.owner,b=a.body,c=this.getLayoutItems(),d={top:[],right:[],bottom:[],left:[]},e=this.borders,f={top:"bottom",right:"left",bottom:"top",left:"right"},g,h,i,j,k;for(g=0,h=c.length;g<h;g++){i=c[g],j=i.dock;if(i.ignoreBorderManagement)continue;d[j].satisfied||(d[j].push(i),d[j].satisfied=!0),!d.top.satisfied&&f[j]!=="top"&&d.top.push(i),!d.right.satisfied&&f[j]!=="right"&&d.right.push(i),!d.bottom.satisfied&&f[j]!=="bottom"&&d.bottom.push(i),!d.left.satisfied&&f[j]!=="left"&&d.left.push(i)}if(e)for(k in e)if(e.hasOwnProperty(k)){h=e[k].length;if(!a.manageBodyBorders){for(g=0;g<h;g++)e[k][g].removeCls(Ext.baseCSSPrefix+"docked-noborder-"+k);!e[k].satisfied&&!a.bodyBorder&&b.removeCls(Ext.baseCSSPrefix+"docked-noborder-"+k)}else e[k].satisfied&&b.setStyle("border-"+k+"-width","")}for(k in d)if(d.hasOwnProperty(k)){h=d[k].length;if(!a.manageBodyBorders){for(g=0;g<h;g++)d[k][g].addCls(Ext.baseCSSPrefix+"docked-noborder-"+k);(!d[k].satisfied&&!a.bodyBorder||a.bodyBorder===!1)&&b.addCls(Ext.baseCSSPrefix+"docked-noborder-"+k)}else d[k].satisfied&&b.setStyle("border-"+k+"-width","1px")}this.borders=d},onLayout:function(a,b){if(this.onLayout_running)return;this.onLayout_running=!0;var c=this,d=c.owner,e=d.body,f=d.layout,g=c.getTarget(),h=!1,i=!1,j,k,l,m=c.info={boxes:[],size:{width:a,height:b},bodyBox:{}};delete f.isAutoDock,Ext.applyIf(m,c.getTargetInfo()),d&&d.ownerCt&&d.ownerCt.layout&&d.ownerCt.layout.isLayout&&(!Ext.isNumber(d.height)||!Ext.isNumber(d.width)?d.ownerCt.layout.bindToOwnerCtComponent=!0:d.ownerCt.layout.bindToOwnerCtComponent=!1),b==null||a==null?(j=m.padding,k=m.border,l=c.frameSize,b==null&&a==null?(i=!0,h=!0,c.setTargetSize(null),c.setBodyBox({width:null,height:null})):b==null?(i=!0,c.setTargetSize(a),c.setBodyBox({width:a-j.left-k.left-j.right-k.right-l.left-l.right,height:null})):(h=!0,c.setTargetSize(null,b),c.setBodyBox({width:null,height:b-j.top-j.bottom-k.top-k.bottom-l.top-l.bottom})),f&&f.isLayout&&(f.bindToOwnerCtComponent=!0,f.isAutoDock=f.autoSize!==!0,f.layout(),m.autoSizedCtLayout=f.autoSize===!0,m.autoHeight=i,m.autoWidth=h),c.dockItems(),c.setTargetSize(m.size.width,m.size.height)):(c.setTargetSize(a,b),c.dockItems()),c.callParent(arguments),this.onLayout_running=!1},dockItems:function(){this.calculateDockBoxes();var a=this.info,b=a.autoWidth,c=a.autoHeight,d=a.boxes,e=d.length,f,g,h;for(g=0;g<e;g++)f=d[g],h=f.item,h.setPosition(f.x,f.y),(b||c)&&h.layout&&h.layout.isLayout&&(h.layout.bindToOwnerCtComponent=!0);a.autoSizedCtLayout||(b&&(a.bodyBox.width=null),c&&(a.bodyBox.height=null)),this.setBodyBox(a.bodyBox)},calculateDockBoxes:function(){if(this.calculateDockBoxes_running)return;this.calculateDockBoxes_running=!0;var a=this,b=a.getTarget(),c=a.getLayoutItems(),d=a.owner,e=d.body,f=a.info,g=f.autoWidth,h=f.autoHeight,i=f.size,j=c.length,k=f.padding,l=f.border,m=a.frameSize,n,o,p,q;h?i.height=e.getHeight()+k.top+l.top+k.bottom+l.bottom+m.top+m.bottom:i.height=b.getHeight(),g?i.width=e.getWidth()+k.left+l.left+k.right+l.right+m.left+m.right:i.width=b.getWidth(),f.bodyBox={x:k.left+m.left,y:k.top+m.top,width:i.width-k.left-l.left-k.right-l.right-m.left-m.right,height:i.height-l.top-k.top-l.bottom-k.bottom-m.top-m.bottom};for(o=0;o<j;o++)n=c[o],p=a.initBox(n),h===!0?p=a.adjustAutoBox(p,o):p=a.adjustSizedBox(p,o),f.boxes.push(p);this.calculateDockBoxes_running=!1},adjustSizedBox:function(a,b){var c=this.info.bodyBox,d=this.frameSize,e=this.info,f=e.padding,g=a.type,h=e.border;switch(g){case"top":a.y=c.y;break;case"left":a.x=c.x;break;case"bottom":a.y=c.y+c.height-a.height;break;case"right":a.x=c.x+c.width-a.width}a.ignoreFrame&&(g=="bottom"?a.y+=d.bottom+f.bottom+h.bottom:a.y-=d.top+f.top+h.top,g=="right"?a.x+=d.right+f.right+h.right:a.x-=d.left+f.left+h.left);if(!a.overlay)switch(g){case"top":c.y+=a.height,c.height-=a.height;break;case"left":c.x+=a.width,c.width-=a.width;break;case"bottom":c.height-=a.height;break;case"right":c.width-=a.width}return a},adjustAutoBox:function(a,b){var c=this.info,d=this.owner,e=c.bodyBox,f=c.size,g=c.boxes,h=g.length,i=a.type,j=this.frameSize,k=c.padding,l=c.border,m=c.autoSizedCtLayout,n=h<b?h:b,o,p;if(i=="top"||i=="bottom")for(o=0;o<n;o++)p=g[o],p.stretched&&p.type=="left"||p.type=="right"?p.height+=a.height:p.type=="bottom"&&(p.y+=a.height);switch(i){case"top":a.y=e.y,a.overlay||(e.y+=a.height,c.autoHeight?f.height+=a.height:e.height-=a.height);break;case"bottom":a.overlay||(c.autoHeight?f.height+=a.height:e.height-=a.height),a.y=e.y+e.height;break;case"left":a.x=e.x,a.overlay||(e.x+=a.width,c.autoWidth?f.width+=a.width:e.width-=a.width);break;case"right":a.overlay||(c.autoWidth?f.width+=a.width:e.width-=a.width),a.x=e.x+e.width}return a.ignoreFrame&&(i=="bottom"?a.y+=j.bottom+k.bottom+l.bottom:a.y-=j.top+k.top+l.top,i=="right"?a.x+=j.right+k.right+l.right:a.x-=j.left+k.left+l.left),a},initBox:function(a){var b=this,c=b.info.bodyBox,d=a.dock=="top"||a.dock=="bottom",e=b.owner,f=b.frameSize,g=b.info,h=g.padding,i=g.border,j={item:a,overlay:a.overlay,type:a.dock,offsets:Ext.Element.parseBox(a.offsets||{}),ignoreFrame:a.ignoreParentFrame};return a.stretch!==!1?(j.stretched=!0,d?(j.x=c.x+j.offsets.left,j.width=c.width-(j.offsets.left+j.offsets.right),j.ignoreFrame&&(j.width+=f.left+f.right+i.left+i.right+h.left+h.right),a.setCalculatedSize(j.width-a.el.getMargin("lr"),undefined,e)):(j.y=c.y+j.offsets.top,j.height=c.height-(j.offsets.bottom+j.offsets.top),j.ignoreFrame&&(j.height+=f.top+f.bottom+i.top+i.bottom+h.top+h.bottom),a.setCalculatedSize(undefined,j.height-a.el.getMargin("tb"),e),Ext.supports.ComputedStyle||a.el.repaint())):(a.doComponentLayout(),j.width=a.getWidth()-(j.offsets.left+j.offsets.right),j.height=a.getHeight()-(j.offsets.bottom+j.offsets.top),j.y+=j.offsets.top,d&&(j.x=a.align=="right"?c.width-j.width:c.x,j.x+=j.offsets.left)),j.width===undefined&&(j.width=a.getWidth()+a.el.getMargin("lr")),j.height===undefined&&(j.height=a.getHeight()+a.el.getMargin("tb")),j},getLayoutItems:function(){var a=this.owner.getDockedItems(),b=a.length,c=0,d=[];for(;c<b;c++)a[c].isVisible(!0)&&d.push(a[c]);return d},renderItems:function(a,b){var c=b.dom.childNodes,d=c.length,e=a.length,f=0,g,h,i,j;for(g=0;g<d;g++){i=Ext.get(c[g]);for(h=0;h<e;h++){j=a[h];if(j.rendered&&(i.id==j.el.id||i.contains(j.el.id)))break}h===e&&f++}for(g=0,h=0;g<e;g++,h++)j=a[g],g===h&&(j.dock==="right"||j.dock==="bottom")&&(h+=f),j&&!j.rendered?this.renderItem(j,b,h):this.isValidParent(j,b,h)||this.moveItem(j,b,h)},setBodyBox:function(a){var b=this,c=b.owner,d=c.body,e=b.info,f=e.bodyMargin,g=e.padding,h=e.border,i=b.frameSize;if(c.collapsed)return;Ext.isNumber(a.width)&&(a.width-=f.left+f.right),Ext.isNumber(a.height)&&(a.height-=f.top+f.bottom),b.setElementSize(d,a.width,a.height),Ext.isNumber(a.x)&&d.setLeft(a.x-g.left-i.left),Ext.isNumber(a.y)&&d.setTop(a.y-g.top-i.top)},configureItem:function(a,b){this.callParent(arguments),a.dock=="top"||a.dock=="bottom"?(a.layoutManagedWidth=1,a.layoutManagedHeight=2):(a.layoutManagedWidth=2,a.layoutManagedHeight=1),a.addCls(Ext.baseCSSPrefix+"docked"),a.addClsWithUI("docked-"+a.dock)},afterRemove:function(a){this.callParent(arguments),this.itemCls&&a.el.removeCls(this.itemCls+"-"+a.dock);var b=a.el.dom;!a.destroying&&b&&b.parentNode.removeChild(b),this.childrenChanged=!0}}),Ext.define("Ext.util.Memento",function(){function a(a,b,c){a[c]=b[c]}function b(a,b,c){delete a[c]}function c(a,b,c){var e=a[c];(e||a.hasOwnProperty(c))&&d(b,c,e)}function d(a,b,c){Ext.isDefined(c)?a[b]=c:delete a[b]}function e(a,b,c,d){b&&(Ext.isArray(d)?Ext.each(d,function(d){a(b,c,d)}):a(b,c,d))}return{data:null,target:null,constructor:function(a,b){a&&(this.target=a,b&&this.capture(b))},capture:function(b,c){e(a,this.data||(this.data={}),c||this.target,b)},remove:function(a){e(b,this.data,null,a)},restore:function(a,b,d){e(c,this.data,d||this.target,a),b!==!1&&this.remove(a)},restoreAll:function(a,b){var c=this,e=b||this.target;Ext.Object.each(c.data,function(a,b){d(e,a,b)}),a!==!1&&delete c.data}}}()),Ext.define("Ext.app.EventBus",{requires:["Ext.util.Event"],mixins:{observable:"Ext.util.Observable"},constructor:function(){this.mixins.observable.constructor.call(this),this.bus={};var a=this;Ext.override(Ext.Component,{fireEvent:function(b){return Ext.util.Observable.prototype.fireEvent.apply(this,arguments)!==!1?a.dispatch.call(a,b,this,arguments):!1}})},dispatch:function(a,b,c){var d=this.bus,e=d[a],f,g,h,i,j,k,l;if(e)for(f in e)if(b.is(f)){g=e[f];for(h in g){i=g[h];for(k=0,l=i.length;k<l;k++){j=i[k];if(j.fire.apply(j,Array.prototype.slice.call(c,1))===!1)return!1}}}},control:function(a,b,c){var d=this.bus,e,f;if(Ext.isString(a)){e=a,a={},a[e]=b,this.control(a,null,c);return}Ext.Object.each(a,function(a,b){Ext.Object.each(b,function(b,e){var f={},g=c,i=Ext.create("Ext.util.Event",c,b);Ext.isObject(e)&&(f=e,e=f.fn,g=f.scope||c,delete f.fn,delete f.scope),i.addListener(e,g,f),d[b]=d[b]||{},d[b][a]=d[b][a]||{},d[b][a][c.id]=d[b][a][c.id]||[],d[b][a][c.id].push(i)})})}}),Ext.define("Ext.data.Types",{singleton:!0,requires:["Ext.data.SortTypes"]},function(){var a=Ext.data.SortTypes;Ext.apply(Ext.data.Types,{stripRe:/[\$,%]/g,AUTO:{convert:function(a){return a},sortType:a.none,type:"auto"},STRING:{convert:function(a){var b=this.useNull?null:"";return a===undefined||a===null?b:String(a)},sortType:a.asUCString,type:"string"},INT:{convert:function(a){return a!==undefined&&a!==null&&a!==""?parseInt(String(a).replace(Ext.data.Types.stripRe,""),10):this.useNull?null:0},sortType:a.none,type:"int"},FLOAT:{convert:function(a){return a!==undefined&&a!==null&&a!==""?parseFloat(String(a).replace(Ext.data.Types.stripRe,""),10):this.useNull?null:0},sortType:a.none,type:"float"},BOOL:{convert:function(a){return!this.useNull||a!==undefined&&a!==null&&a!==""?a===!0||a==="true"||a==1:null},sortType:a.none,type:"bool"},DATE:{convert:function(a){var b=this.dateFormat,c;return a?Ext.isDate(a)?a:b?b=="timestamp"?new Date(a*1e3):b=="time"?new Date(parseInt(a,10)):Ext.Date.parse(a,b):(c=Date.parse(a),c?new Date(c):null):null},sortType:a.asDate,type:"date"}}),Ext.apply(Ext.data.Types,{BOOLEAN:this.BOOL,INTEGER:this.INT,NUMBER:this.FLOAT})}),Ext.define("Ext.data.Field",{requires:["Ext.data.Types","Ext.data.SortTypes"],alias:"data.field",constructor:function(a){Ext.isString(a)&&(a={name:a}),Ext.apply(this,a);var b=Ext.data.Types,c=this.sortType,d;this.type?Ext.isString(this.type)&&(this.type=b[this.type.toUpperCase()]||b.AUTO):this.type=b.AUTO,Ext.isString(c)?this.sortType=Ext.data.SortTypes[c]:Ext.isEmpty(c)&&(this.sortType=this.type.sortType),this.convert||(this.convert=this.type.convert)},dateFormat:null,useNull:!1,defaultValue:"",mapping:null,sortType:null,sortDir:"ASC",allowBlank:!0,persist:!0}),Ext.define("Ext.util.AbstractMixedCollection",{requires:["Ext.util.Filter"],mixins:{observable:"Ext.util.Observable"},constructor:function(a,b){var c=this;c.items=[],c.map={},c.keys=[],c.length=0,c.addEvents("clear","add","replace","remove"),c.allowFunctions=a===!0,b&&(c.getKey=b),c.mixins.observable.constructor.call(c)},allowFunctions:!1,add:function(a,b){var c=this,d=b,e=a,f;arguments.length==1&&(d=e,e=c.getKey(d));if(typeof e!="undefined"&&e!==null){f=c.map[e];if(typeof f!="undefined")return c.replace(e,d);c.map[e]=d}return c.length++,c.items.push(d),c.keys.push(e),c.fireEvent("add",c.length-1,d,e),d},getKey:function(a){return a.id},replace:function(a,b){var c=this,d,e;return arguments.length==1&&(b=arguments[0],a=c.getKey(b)),d=c.map[a],typeof a=="undefined"||a===null||typeof d=="undefined"?c.add(a,b):(e=c.indexOfKey(a),c.items[e]=b,c.map[a]=b,c.fireEvent("replace",a,d,b),b)},addAll:function(a){var b=this,c=0,d,e,f;if(arguments.length>1||Ext.isArray(a)){d=arguments.length>1?arguments:a;for(e=d.length;c<e;c++)b.add(d[c])}else for(f in a)a.hasOwnProperty(f)&&(b.allowFunctions||typeof a[f]!="function")&&b.add(f,a[f])},each:function(a,b){var c=[].concat(this.items),d=0,e=c.length,f;for(;d<e;d++){f=c[d];if(a.call(b||f,f,d,e)===!1)break}},eachKey:function(a,b){var c=this.keys,d=this.items,e=0,f=c.length;for(;e<f;e++)a.call(b||window,c[e],d[e],e,f)},findBy:function(a,b){var c=this.keys,d=this.items,e=0,f=d.length;for(;e<f;e++)if(a.call(b||window,d[e],c[e]))return d[e];return null},find:function(){return Ext.isDefined(Ext.global.console)&&Ext.global.console.warn("Ext.util.MixedCollection: find has been deprecated. Use findBy instead."),this.findBy.apply(this,arguments)},insert:function(a,b,c){var d=this,e=b,f=c;return arguments.length==2&&(f=e,e=d.getKey(f)),d.containsKey(e)&&(d.suspendEvents(),d.removeAtKey(e),d.resumeEvents()),a>=d.length?d.add(e,f):(d.length++,Ext.Array.splice(d.items,a,0,f),typeof e!="undefined"&&e!==null&&(d.map[e]=f),Ext.Array.splice(d.keys,a,0,e),d.fireEvent("add",a,f,e),f)},remove:function(a){return this.removeAt(this.indexOf(a))},removeAll:function(a){return Ext.each(a||[],function(a){this.remove(a)},this),this},removeAt:function(a){var b=this,c,d;return a<b.length&&a>=0?(b.length--,c=b.items[a],Ext.Array.erase(b.items,a,1),d=b.keys[a],typeof d!="undefined"&&delete b.map[d],Ext.Array.erase(b.keys,a,1),b.fireEvent("remove",c,d),c):!1},removeAtKey:function(a){return this.removeAt(this.indexOfKey(a))},getCount:function(){return this.length},indexOf:function(a){return Ext.Array.indexOf(this.items,a)},indexOfKey:function(a){return Ext.Array.indexOf(this.keys,a)},get:function(a){var b=this,c=b.map[a],d=c!==undefined?c:typeof a=="number"?b.items[a]:undefined;return typeof d!="function"||b.allowFunctions?d:null},getAt:function(a){return this.items[a]},getByKey:function(a){return this.map[a]},contains:function(a){return Ext.Array.contains(this.items,a)},containsKey:function(a){return typeof this.map[a]!="undefined"},clear:function(){var a=this;a.length=0,a.items=[],a.keys=[],a.map={},a.fireEvent("clear")},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},sum:function(a,b,c,d){var e=this.extractValues(a,b),f=e.length,g=0,h;c=c||0,d=d||d===0?d:f-1;for(h=c;h<=d;h++)g+=e[h];return g},collect:function(a,b,c){var d=this.extractValues(a,b),e=d.length,f={},g=[],h,i,j;for(j=0;j<e;j++)h=d[j],i=String(h),(c||!Ext.isEmpty(h))&&!f[i]&&(f[i]=!0,g.push(h));return g},extractValues:function(a,b){var c=this.items;return b&&(c=Ext.Array.pluck(c,b)),Ext.Array.pluck(c,a)},getRange:function(a,b){var c=this,d=c.items,e=[],f;if(d.length<1)return e;a=a||0,b=Math.min(typeof b=="undefined"?c.length-1:b,c.length-1);if(a<=b)for(f=a;f<=b;f++)e[e.length]=d[f];else for(f=a;f>=b;f--)e[e.length]=d[f];return e},filter:function(a,b,c,d){var e=[],f;if(Ext.isString(a))e.push(Ext.create("Ext.util.Filter",{property:a,value:b,anyMatch:c,caseSensitive:d}));else if(Ext.isArray(a)||a instanceof Ext.util.Filter)e=e.concat(a);return f=function(a){var b=!0,c=e.length,d;for(d=0;d<c;d++){var f=e[d],g=f.filterFn,h=f.scope;b=b&&g.call(h,a)}return b},this.filterBy(f)},filterBy:function(a,b){var c=this,d=new this.self,e=c.keys,f=c.items,g=f.length,h;d.getKey=c.getKey;for(h=0;h<g;h++)a.call(b||c,f[h],e[h])&&d.add(e[h],f[h]);return d},findIndex:function(a,b,c,d,e){return Ext.isEmpty(b,!1)?-1:(b=this.createValueMatcher(b,d,e),this.findIndexBy(function(c){return c&&b.test(c[a])},null,c))},findIndexBy:function(a,b,c){var d=this,e=d.keys,f=d.items,g=c||0,h=f.length;for(;g<h;g++)if(a.call(b||d,f[g],e[g]))return g;return-1},createValueMatcher:function(a,b,c,d){if(!a.exec){var e=Ext.String.escapeRegex;a=String(a),b===!0?a=e(a):(a="^"+e(a),d===!0&&(a+="$")),a=new RegExp(a,c?"":"i")}return a},clone:function(){var a=this,b=new this.self,c=a.keys,d=a.items,e=0,f=d.length;for(;e<f;e++)b.add(c[e],d[e]);return b.getKey=a.getKey,b}}),Ext.define("Ext.util.Sortable",{isSortable:!0,defaultSortDirection:"ASC",requires:["Ext.util.Sorter"],initSortable:function(){var a=this,b=a.sorters;a.sorters=Ext.create("Ext.util.AbstractMixedCollection",!1,function(a){return a.id||a.property}),b&&a.sorters.addAll(a.decodeSorters(b))},sort:function(a,b,c,d){var e=this,f,g,h;return Ext.isArray(a)?(d=c,c=b,h=a):Ext.isObject(a)?(d=c,c=b,h=[a]):Ext.isString(a)&&(f=e.sorters.get(a),f?b===undefined?f.toggle():f.setDirection(b):(f={property:a,direction:b},h=[f])),h&&h.length&&(h=e.decodeSorters(h),Ext.isString(c)?c==="prepend"?(a=e.sorters.clone().items,e.sorters.clear(),e.sorters.addAll(h),e.sorters.addAll(a)):e.sorters.addAll(h):(e.sorters.clear(),e.sorters.addAll(h))),d!==!1&&(e.onBeforeSort(h),a=e.sorters.items,a.length&&(g=function(b,c){var d=a[0].sort(b,c),e=a.length,f;for(f=1;f<e;f++)d=d||a[f].sort.call(this,b,c);return d},e.doSort(g))),a},onBeforeSort:Ext.emptyFn,decodeSorters:function(a){Ext.isArray(a)||(a===undefined?a=[]:a=[a]);var b=a.length,c=Ext.util.Sorter,d=this.model?this.model.prototype.fields:null,e,f,g;for(g=0;g<b;g++)f=a[g],f instanceof c||(Ext.isString(f)&&(f={property:f}),Ext.applyIf(f,{root:this.sortRoot,direction:"ASC"}),f.fn&&(f.sorterFn=f.fn),typeof f=="function"&&(f={sorterFn:f}),d&&!f.transform&&(e=d.get(f.property),f.transform=e?e.sortType:undefined),a[g]=Ext.create("Ext.util.Sorter",f));return a},getSorters:function(){return this.sorters.items}}),Ext.define("Ext.util.MixedCollection",{extend:"Ext.util.AbstractMixedCollection",mixins:{sortable:"Ext.util.Sortable"},constructor:function(){var a=this;a.callParent(arguments),a.addEvents("sort"),a.mixins.sortable.initSortable.call(a)},doSort:function(a){this.sortBy(a)},_sort:function(a,b,c){var d=this,e,f,g=String(b).toUpperCase()=="DESC"?-1:1,h=[],i=d.keys,j=d.items;c=c||function(a,b){return a-b};for(e=0,f=j.length;e<f;e++)h[h.length]={key:i[e],value:j[e],index:e};Ext.Array.sort(h,function(b,d){var e=c(b[a],d[a])*g;return e===0&&(e=b.index<d.index?-1:1),e});for(e=0,f=h.length;e<f;e++)j[e]=h[e].value,i[e]=h[e].key;d.fireEvent("sort",d)},sortBy:function(a){var b=this,c=b.items,d=b.keys,e=c.length,f=[],g;for(g=0;g<e;g++)f[g]={key:d[g],value:c[g],index:g};Ext.Array.sort(f,function(b,c){var d=a(b.value,c.value);return d===0&&(d=b.index<c.index?-1:1),d});for(g=0;g<e;g++)c[g]=f[g].value,d[g]=f[g].key;b.fireEvent("sort",b,c,d)},reorder:function(a){var b=this,c=b.items,d=0,e=c.length,f=[],g=[],h;b.suspendEvents();for(h in a)f[a[h]]=c[h];for(d=0;d<e;d++)a[d]==undefined&&g.push(c[d]);for(d=0;d<e;d++)f[d]==undefined&&(f[d]=g.shift());b.clear(),b.addAll(f),b.resumeEvents(),b.fireEvent("sort",b)},sortByKey:function(a,b){this._sort("key",a,b||function(a,b){var c=String(a).toUpperCase(),d=String(b).toUpperCase();return c>d?1:c<d?-1:0})}}),Ext.define("Ext.data.Errors",{extend:"Ext.util.MixedCollection",isValid:function(){return this.length===0},getByField:function(a){var b=[],c,d,e;for(e=0;e<this.length;e++)c=this.items[e],c.field==a&&b.push(c);return b}}),Ext.define("Ext.data.reader.Reader",{requires:["Ext.data.ResultSet"],alternateClassName:["Ext.data.Reader","Ext.data.DataReader"],totalProperty:"total",successProperty:"success",root:"",implicitIncludes:!0,isReader:!0,constructor:function(a){var b=this;Ext.apply(b,a||{}),b.fieldCount=0,b.model=Ext.ModelManager.getModel(a.model),b.model&&b.buildExtractors()},setModel:function(a,b){var c=this;c.model=Ext.ModelManager.getModel(a),c.buildExtractors(!0),b&&c.proxy&&c.proxy.setModel(c.model,!0)},read:function(a){var b=a;return a&&a.responseText&&(b=this.getResponseData(a)),b?this.readRecords(b):this.nullResultSet},readRecords:function(a){var b=this;b.fieldCount!==b.getFields().length&&b.buildExtractors(!0),b.rawData=a,a=b.getData(a);var c=Ext.isArray(a)?a:b.getRoot(a),d=!0,e=0,f,g,h,i;c&&(f=c.length),b.totalProperty&&(g=parseInt(b.getTotal(a),10),isNaN(g)||(f=g));if(b.successProperty){g=b.getSuccess(a);if(g===!1||g==="false")d=!1}return b.messageProperty&&(i=b.getMessage(a)),c?(h=b.extractData(c),e=h.length):(e=0,h=[]),Ext.create("Ext.data.ResultSet",{total:f||e,count:e,records:h,success:d,message:i})},extractData:function(a){var b=this,c=[],d=[],e=b.model,f=0,g=a.length,h=b.getIdProperty(),i,j,k;!a.length&&Ext.isObject(a)&&(a=[a],g=1);for(;f<g;f++)i=a[f],c=b.extractValues(i),j=b.getId(i),k=new e(c,j,i),d.push(k),b.implicitIncludes&&b.readAssociated(k,i);return d},readAssociated:function(a,b){var c=a.associations.items,d=0,e=c.length,f,g,h,i;for(;d<e;d++)f=c[d],g=this.getAssociatedDataRoot(b,f.associationKey||f.name),g&&(i=f.getReader(),i||(h=f.associatedModel.proxy,h?i=h.getReader():i=new this.constructor({model:f.associatedName})),f.read(a,i,g))},getAssociatedDataRoot:function(a,b){return a[b]},getFields:function(){return this.model.prototype.fields.items},extractValues:function(a){var b=this.getFields(),c=0,d=b.length,e={},f,g;for(;c<d;c++)f=b[c],g=this.extractorFunctions[c](a),e[f.name]=g;return e},getData:function(a){return a},getRoot:function(a){return a},getResponseData:function(a){},onMetaChange:function(a){var b=a.fields,c;Ext.apply(this,a),b?(c=Ext.define("Ext.data.reader.Json-Model"+Ext.id(),{extend:"Ext.data.Model",fields:b}),this.setModel(c,!0)):this.buildExtractors(!0)},getIdProperty:function(){var a=this.idProperty;return Ext.isEmpty(a)&&(a=this.model.prototype.idProperty),a},buildExtractors:function(a){var b=this,c=b.getIdProperty(),d=b.totalProperty,e=b.successProperty,f=b.messageProperty,g;a===!0&&delete b.extractorFunctions;if(b.extractorFunctions)return;d&&(b.getTotal=b.createAccessor(d)),e&&(b.getSuccess=b.createAccessor(e)),f&&(b.getMessage=b.createAccessor(f)),c?(g=b.createAccessor(c),b.getId=function(a){var c=g.call(b,a);return c===undefined||c===""?null:c}):b.getId=function(){return null},b.buildFieldExtractors()},buildFieldExtractors:function(){var a=this,b=a.getFields(),c=b.length,d=0,e=[],f,g;for(;d<c;d++)f=b[d],g=f.mapping!==undefined&&f.mapping!==null?f.mapping:f.name,e.push(a.createAccessor(g));a.fieldCount=c,a.extractorFunctions=e}},function(){Ext.apply(this,{nullResultSet:Ext.create("Ext.data.ResultSet",{total:0,count:0,records:[],success:!0})})}),Ext.define("Ext.data.reader.Json",{extend:"Ext.data.reader.Reader",alternateClassName:"Ext.data.JsonReader",alias:"reader.json",root:"",useSimpleAccessors:!1,readRecords:function(a){return a.metaData&&this.onMetaChange(a.metaData),this.jsonData=a,this.callParent([a])},getResponseData:function(a){var b;try{b=Ext.decode(a.responseText)}catch(c){Ext.Error.raise({response:a,json:a.responseText,parseError:c,msg:"Unable to parse the JSON returned by the server: "+c.toString()})}return b},buildExtractors:function(){var a=this;a.callParent(arguments),a.root?a.getRoot=a.createAccessor(a.root):a.getRoot=function(a){return a}},extractData:function(a){var b=this.record,c=[],d,e;if(b){d=a.length,!d&&Ext.isObject(a)&&(d=1,a=[a]);for(e=0;e<d;e++)c[e]=a[e][b]}else c=a;return this.callParent([c])},createAccessor:function(){var a=/[\[\.]/;return function(b){if(Ext.isEmpty(b))return Ext.emptyFn;if(Ext.isFunction(b))return b;if(this.useSimpleAccessors!==!0){var c=String(b).search(a);if(c>=0)return Ext.functionFactory("obj","return obj"+(c>0?".":"")+b)}return function(a){return a[b]}}}()}),Ext.define("Ext.data.writer.Json",{extend:"Ext.data.writer.Writer",alternateClassName:"Ext.data.JsonWriter",alias:"writer.json",root:undefined,encode:!1,allowSingle:!0,writeRecords:function(a,b){var c=this.root;return this.allowSingle&&b.length==1&&(b=b[0]),this.encode?c&&(a.params[c]=Ext.encode(b)):(a.jsonData=a.jsonData||{},c?a.jsonData[c]=b:a.jsonData=b),a}}),Ext.define("Ext.data.proxy.Proxy",{alias:"proxy.proxy",alternateClassName:["Ext.data.DataProxy","Ext.data.Proxy"],requires:["Ext.data.reader.Json","Ext.data.writer.Json"],uses:["Ext.data.Batch","Ext.data.Operation","Ext.data.Model"],mixins:{observable:"Ext.util.Observable"},batchOrder:"create,update,destroy",batchActions:!0,defaultReaderType:"json",defaultWriterType:"json",isProxy:!0,constructor:function(a){a=a||{},a.model===undefined&&delete a.model,this.mixins.observable.constructor.call(this,a),this.model!==undefined&&!(this.model instanceof Ext.data.Model)&&this.setModel(this.model)},setModel:function(a,b){this.model=Ext.ModelManager.getModel(a);var c=this.reader,d=this.writer;this.setReader(c),this.setWriter(d),b&&this.store&&this.store.setModel(this.model)},getModel:function(){return this.model},setReader:function(a){var b=this;if(a===undefined||typeof a=="string")a={type:a};return a.isReader?a.setModel(b.model):(Ext.applyIf(a,{proxy:b,model:b.model,type:b.defaultReaderType}),a=Ext.createByAlias("reader."+a.type,a)),b.reader=a,b.reader},getReader:function(){return this.reader},setWriter:function(a){if(a===undefined||typeof a=="string")a={type:a};return a instanceof Ext.data.writer.Writer||(Ext.applyIf(a,{model:this.model,type:this.defaultWriterType}),a=Ext.createByAlias("writer."+a.type,a)),this.writer=a,this.writer},getWriter:function(){return this.writer},create:Ext.emptyFn,read:Ext.emptyFn,update:Ext.emptyFn,destroy:Ext.emptyFn,batch:function(a,b){var c=this,d=Ext.create("Ext.data.Batch",{proxy:c,listeners:b||{}}),e=c.batchActions,f;return Ext.each(c.batchOrder.split(","),function(b){f=a[b],f&&(e?d.add(Ext.create("Ext.data.Operation",{action:b,records:f})):Ext.each(f,function(a){d.add(Ext.create("Ext.data.Operation",{action:b,records:[a]}))}))},c),d.start(),d}},function(){Ext.data.DataProxy=this}),Ext.define("Ext.data.proxy.Server",{extend:"Ext.data.proxy.Proxy",alias:"proxy.server",alternateClassName:"Ext.data.ServerProxy",uses:["Ext.data.Request"],pageParam:"page",startParam:"start",limitParam:"limit",groupParam:"group",sortParam:"sort",filterParam:"filter",directionParam:"dir",simpleSortMode:!1,noCache:!0,cacheString:"_dc",timeout:3e4,constructor:function(a){var b=this;a=a||{},this.addEvents("exception"),b.callParent([a]),b.extraParams=a.extraParams||{},b.api=a.api||{},b.nocache=b.noCache},create:function(){return this.doRequest.apply(this,arguments)},read:function(){return this.doRequest.apply(this,arguments)},update:function(){return this.doRequest.apply(this,arguments)},destroy:function(){return this.doRequest.apply(this,arguments)},buildRequest:function(a){var b=Ext.applyIf(a.params||{},this.extraParams||{}),c;return b=Ext.applyIf(b,this.getParams(a)),a.id&&!b.id&&(b.id=a.id),c=Ext.create("Ext.data.Request",{params:b,action:a.action,records:a.records,operation:a,url:a.url}),c.url=this.buildUrl(c),a.request=c,c},processResponse:function(a,b,c,d,e,f){var g=this,h,i;a===!0?(h=g.getReader(),i=h.read(g.extractResponseData(d)),i.success!==!1?(Ext.apply(b,{response:d,resultSet:i}),b.commitRecords(i.records),b.setCompleted(),b.setSuccessful()):(b.setException(i.message),g.fireEvent("exception",this,d,b))):(g.setException(b,d),g.fireEvent("exception",this,d,b)),typeof e=="function"&&e.call(f||g,b),g.afterRequest(c,a)},setException:function(a,b){a.setException({status:b.status,statusText:b.statusText})},extractResponseData:function(a){return a},applyEncoding:function(a){return Ext.encode(a)},encodeSorters:function(a){var b=[],c=a.length,d=0;for(;d<c;d++)b[d]={property:a[d].property,direction:a[d].direction};return this.applyEncoding(b)},encodeFilters:function(a){var b=[],c=a.length,d=0;for(;d<c;d++)b[d]={property:a[d].property,value:a[d].value};return this.applyEncoding(b)},getParams:function(a){var b=this,c={},d=Ext.isDefined,e=a.groupers,f=a.sorters,g=a.filters,h=a.page,i=a.start,j=a.limit,k=b.simpleSortMode,l=b.pageParam,m=b.startParam,n=b.limitParam,o=b.groupParam,p=b.sortParam,q=b.filterParam,r=b.directionParam;return l&&d(h)&&(c[l]=h),m&&d(i)&&(c[m]=i),n&&d(j)&&(c[n]=j),o&&e&&e.length>0&&(c[o]=b.encodeSorters(e)),p&&f&&f.length>0&&(k?(c[p]=f[0].property,c[r]=f[0].direction):c[p]=b.encodeSorters(f)),q&&g&&g.length>0&&(c[q]=b.encodeFilters(g)),c},buildUrl:function(a){var b=this,c=b.getUrl(a);return b.noCache&&(c=Ext.urlAppend(c,Ext.String.format("{0}={1}",b.cacheString,Ext.Date.now()))),c},getUrl:function(a){return a.url||this.api[a.action]||this.url},doRequest:function(a,b,c){},afterRequest:Ext.emptyFn,onDestroy:function(){Ext.destroy(this.reader,this.writer)}}),Ext.define("Ext.data.proxy.Ajax",{requires:["Ext.util.MixedCollection","Ext.Ajax"],extend:"Ext.data.proxy.Server",alias:"proxy.ajax",alternateClassName:["Ext.data.HttpProxy","Ext.data.AjaxProxy"],actionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"},doRequest:function(a,b,c){var d=this.getWriter(),e=this.buildRequest(a,b,c);return a.allowWrite()&&(e=d.write(e)),Ext.apply(e,{headers:this.headers,timeout:this.timeout,scope:this,callback:this.createRequestCallback(e,a,b,c),method:this.getMethod(e),disableCaching:!1}),Ext.Ajax.request(e),e},getMethod:function(a){return this.actionMethods[a.action]},createRequestCallback:function(a,b,c,d){var e=this;return function(f,g,h){e.processResponse(g,b,a,h,c,d)}}},function(){Ext.data.HttpProxy=this}),Ext.define("Ext.data.Model",{alternateClassName:"Ext.data.Record",mixins:{observable:"Ext.util.Observable"},requires:["Ext.ModelManager","Ext.data.IdGenerator","Ext.data.Field","Ext.data.Errors","Ext.data.Operation","Ext.data.validations","Ext.data.proxy.Ajax","Ext.util.MixedCollection"],onClassExtended:function(a,b){var c=b.onBeforeClassCreated;b.onBeforeClassCreated=function(a,b){var d=this,e=Ext.getClassName(a),f=a.prototype,g=a.prototype.superclass,h=b.validations||[],i=b.fields||[],j=b.associations||[],k=b.belongsTo,l=b.hasMany,m=b.idgen,n=new Ext.util.MixedCollection(!1,function(a){return a.name}),o=new Ext.util.MixedCollection(!1,function(a){return a.name}),p=g.validations,q=g.fields,r=g.associations,s,t,u,v=[];a.modelName=e,f.modelName=e,p&&(h=p.concat(h)),b.validations=h,q&&(i=q.items.concat(i));for(t=0,u=i.length;t<u;++t)n.add(new Ext.data.Field(i[t]));b.fields=n,m&&(b.idgen=Ext.data.IdGenerator.get(m));if(k){k=Ext.Array.from(k);for(t=0,u=k.length;t<u;++t)s=k[t],Ext.isObject(s)||(s={model:s}),s.type="belongsTo",j.push(s);delete b.belongsTo}if(l){l=Ext.Array.from(l);for(t=0,u=l.length;t<u;++t)s=l[t],Ext.isObject(s)||(s={model:s}),s.type="hasMany",j.push(s);delete b.hasMany}r&&(j=r.items.concat(j));for(t=0,u=j.length;t<u;++t)v.push("association."+j[t].type.toLowerCase());b.proxy&&(typeof b.proxy=="string"?v.push("proxy."+b.proxy):typeof b.proxy.type=="string"&&v.push("proxy."+b.proxy.type)),Ext.require(v,function(){Ext.ModelManager.registerType(e,a);for(t=0,u=j.length;t<u;++t)s=j[t],Ext.apply(s,{ownerModel:e,associatedModel:s.model}),Ext.ModelManager.getModel(s.model)===undefined?Ext.ModelManager.registerDeferredAssociation(s):o.add(Ext.data.Association.create(s));b.associations=o,c.call(d,a,b),a.setProxy(a.prototype.proxy||a.prototype.defaultProxyType),Ext.ModelManager.onModelDefined(a)})}},inheritableStatics:{setProxy:function(a){return a.isProxy||(typeof a=="string"&&(a={type:a}),a=Ext.createByAlias("proxy."+a.type,a)),a.setModel(this),this.proxy=this.prototype.proxy=a,a},getProxy:function(){return this.proxy},load:function(a,b){b=Ext.apply({},b),b=Ext.applyIf(b,{action:"read",id:a});var c=Ext.create("Ext.data.Operation",b),d=b.scope||this,e=null,f;f=function(a){a.wasSuccessful()?(e=a.getRecords()[0],Ext.callback(b.success,d,[e,a])):Ext.callback(b.failure,d,[e,a]),Ext.callback(b.callback,d,[e,a])},this.proxy.read(c,f,this)}},statics:{PREFIX:"ext-record",AUTO_ID:1,EDIT:"edit",REJECT:"reject",COMMIT:"commit",id:function(a){var b=[this.PREFIX,"-",this.AUTO_ID++].join("");return a.phantom=!0,a.internalId=b,b}},idgen:{isGenerator:!0,type:"default",generate:function(){return null},getRecId:function(a){return a.modelName+"-"+a.internalId}},editing:!1,dirty:!1,persistenceProperty:"data",evented:!1,isModel:!0,phantom:!1,idProperty:"id",defaultProxyType:"ajax",constructor:function(a,b,c){a=a||{};var d=this,e,f,g,h,i,j,k=Ext.isArray(a),l=k?{}:null;d.internalId=b||b===0?b:Ext.data.Model.id(d),d.raw=c,Ext.applyIf(d,{data:{}}),d.modified={},d.persistanceProperty&&(d.persistenceProperty=d.persistanceProperty),d[d.persistenceProperty]={},d.mixins.observable.constructor.call(d),e=d.fields.items,f=e.length;for(i=0;i<f;i++)g=e[i],h=g.name,k?l[h]=a[i]:a[h]===undefined&&(a[h]=g.defaultValue);d.set(l||a),d.getId()?d.phantom=!1:d.phantom&&(j=d.idgen.generate(),j!==null&&d.setId(j)),d.dirty=!1,d.modified={},typeof d.init=="function"&&d.init(),d.id=d.idgen.getRecId(d)},get:function(a){return this[this.persistenceProperty][a]},set:function(a,b){var c=this,d=c.fields,e=c.modified,f=[],g,h,i,j,k,l,m;if(arguments.length==1&&Ext.isObject(a)){k=!c.editing,l=0;for(h in a)if(a.hasOwnProperty(h)){g=d.get(h);if(g&&g.convert!==g.type.convert){f.push(h);continue}!l&&k&&c.beginEdit(),++l,c.set(h,a[h])}m=f.length;if(m){!l&&k&&c.beginEdit(),l+=m;for(i=0;i<m;i++)g=f[i],c.set(g,a[g])}k&&l&&c.endEdit()}else{d&&(g=d.get(a),g&&g.convert&&(b=g.convert(b,c))),j=c.get(a),c[c.persistenceProperty][a]=b;if(g&&g.persist&&!c.isEqual(j,b))if(c.isModified(a)){if(c.isEqual(e[a],b)){delete e[a],c.dirty=!1;for(h in e)if(e.hasOwnProperty(h)){c.dirty=!0;break}}}else c.dirty=!0,e[a]=j;c.editing||c.afterEdit()}},isEqual:function(a,b){return Ext.isDate(a)&&Ext.isDate(b)?a.getTime()===b.getTime():a===b},beginEdit:function(){var a=this;a.editing||(a.editing=!0,a.dirtySave=a.dirty,a.dataSave=Ext.apply({},a[a.persistenceProperty]),a.modifiedSave=Ext.apply({},a.modified))},cancelEdit:function(){var a=this;a.editing&&(a.editing=!1,a.modified=a.modifiedSave,a[a.persistenceProperty]=a.dataSave,a.dirty=a.dirtySave,delete a.modifiedSave,delete a.dataSave,delete a.dirtySave)},endEdit:function(a){var b=this,c;b.editing&&(b.editing=!1,c=b.dirty||b.changedWhileEditing(),delete b.modifiedSave,delete b.dataSave,delete b.dirtySave,a!==!0&&c&&b.afterEdit())},changedWhileEditing:function(){var a=this,b=a.dataSave,c=a[a.persistenceProperty],d;for(d in c)if(c.hasOwnProperty(d)&&!a.isEqual(c[d],b[d]))return!0;return!1},getChanges:function(){var a=this.modified,b={},c;for(c in a)a.hasOwnProperty(c)&&(b[c]=this.get(c));return b},isModified:function(a){return this.modified.hasOwnProperty(a)},setDirty:function(){var a=this,b;a.dirty=!0,a.fields.each(function(c){c.persist&&(b=c.name,a.modified[b]=a.get(b))},a)},reject:function(a){var b=this,c=b.modified,d;for(d in c)c.hasOwnProperty(d)&&typeof c[d]!="function"&&(b[b.persistenceProperty][d]=c[d]);b.dirty=!1,b.editing=!1,b.modified={},a!==!0&&b.afterReject()},commit:function(a){var b=this;b.phantom=b.dirty=b.editing=!1,b.modified={},a!==!0&&b.afterCommit()},copy:function(a){var b=this;return new b.self(Ext.apply({},b[b.persistenceProperty]),a||b.internalId)},setProxy:function(a){return a.isProxy||(typeof a=="string"&&(a={type:a}),a=Ext.createByAlias("proxy."+a.type,a)),a.setModel(this.self),this.proxy=a,a},getProxy:function(){return this.proxy},validate:function(){var a=Ext.create("Ext.data.Errors"),b=this.validations,c=Ext.data.validations,d,e,f,g,h,i;if(b){d=b.length;for(i=0;i<d;i++)e=b[i],f=e.field||e.name,h=e.type,g=c[h](e,this.get(f)),g||a.add({field:f,message:e.message||c[h+"Message"]})}return a},isValid:function(){return this.validate().isValid()},save:function(a){a=Ext.apply({},a);var b=this,c=b.phantom?"create":"update",d=null,e=a.scope||b,f,g;return Ext.apply(a,{records:[b],action:c}),f=Ext.create("Ext.data.Operation",a),g=function(c){c.wasSuccessful()?(d=c.getRecords()[0],b.set(d.data),d.dirty=!1,Ext.callback(a.success,e,[d,c])):Ext.callback(a.failure,e,[d,c]),Ext.callback(a.callback,e,[d,c])},b.getProxy()[c](f,g,b),b},destroy:function(a){a=Ext.apply({},a);var b=this,c=null,d=a.scope||b,e,f;return Ext.apply(a,{records:[b],action:"destroy"}),e=Ext.create("Ext.data.Operation",a),f=function(b){b.wasSuccessful()?Ext.callback(a.success,d,[c,b]):Ext.callback(a.failure,d,[c,b]),Ext.callback(a.callback,d,[c,b])},b.getProxy().destroy(e,f,b),b},getId:function(){return this.get(this.idProperty)},setId:function(a){this.set(this.idProperty,a)},join:function(a){this.store=a},unjoin:function(a){delete this.store},afterEdit:function(){this.callStore("afterEdit")},afterReject:function(){this.callStore("afterReject")},afterCommit:function(){this.callStore("afterCommit")},callStore:function(a){var b=this.store;b!==undefined&&typeof b[a]=="function"&&b[a](this)},getAssociatedData:function(){return this.prepareAssociatedData(this,[],null)},prepareAssociatedData:function(a,b,c){var d=a.associations.items,e=d.length,f={},g,h,i,j,k,l,m,n,o,p,q;for(n=0;n<e;n++){l=d[n],p=l.type,q=!0,c&&(q=p==c);if(q&&p=="hasMany"){g=a[l.storeName],f[l.name]=[];if(g&&g.data.length>0){i=g.data.items,k=i.length;for(o=0;o<k;o++)j=i[o],m=j.id,Ext.Array.indexOf(b,m)==-1&&(b.push(m),f[l.name][o]=j.data,Ext.apply(f[l.name][o],this.prepareAssociatedData(j,b,p)))}}else q&&p=="belongsTo"&&(j=a[l.instanceName],j!==undefined&&(m=j.id,Ext.Array.indexOf(b,m)==-1&&(b.push(m),f[l.name]=j.data,Ext.apply(f[l.name],this.prepareAssociatedData(j,b,p)))))}return f}}),Ext.define("Ext.data.StoreManager",{extend:"Ext.util.MixedCollection",alternateClassName:["Ext.StoreMgr","Ext.data.StoreMgr","Ext.StoreManager"],singleton:!0,uses:["Ext.data.ArrayStore"],register:function(){for(var a=0,b;b=arguments[a];a++)this.add(b)},unregister:function(){for(var a=0,b;b=arguments[a];a++)this.remove(this.lookup(b))},lookup:function(a){if(Ext.isArray(a)){var b=["field1"],c=!Ext.isArray(a[0]),d=a,e,f;if(c){d=[];for(e=0,f=a.length;e<f;++e)d.push([a[e]])}else for(e=2,f=a[0].length;e<=f;++e)b.push("field"+e);return Ext.create("Ext.data.ArrayStore",{data:d,fields:b,autoDestroy:!0,autoCreated:!0,expanded:c})}return Ext.isString(a)?this.get(a):Ext.data.AbstractStore.create(a)},getKey:function(a){return a.storeId}},function(){Ext.regStore=function(a,b){var c;return Ext.isObject(a)?b=a:b.storeId=a,b instanceof Ext.data.Store?c=b:c=Ext.create("Ext.data.Store",b),Ext.data.StoreManager.register(c)},Ext.getStore=function(a){return Ext.data.StoreManager.lookup(a)}}),Ext.define("Ext.Component",{alias:["widget.component","widget.box"],extend:"Ext.AbstractComponent",requires:["Ext.util.DelayedTask"],uses:["Ext.Layer","Ext.resizer.Resizer","Ext.util.ComponentDragger"],mixins:{floating:"Ext.util.Floating"},statics:{DIRECTION_TOP:"top",DIRECTION_RIGHT:"right",DIRECTION_BOTTOM:"bottom",DIRECTION_LEFT:"left",VERTICAL_DIRECTION_Re:/^(?:top|bottom)$/,INVALID_ID_CHARS_Re:/[\.,\s]/g},resizeHandles:"all",floating:!1,toFrontOnShow:!0,hideMode:"display",hideParent:!1,ariaRole:"presentation",bubbleEvents:[],actionMode:"el",monPropRe:/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,constructor:function(a){var b=this;a=a||{};if(a.initialConfig)a.isAction&&(b.baseAction=a),a=a.initialConfig;else if(a.tagName||a.dom||Ext.isString(a))a={applyTo:a,id:a.id||a};b.callParent([a]),b.baseAction&&b.baseAction.addComponent(b)},initComponent:function(){var a=this;a.callParent(),a.listeners&&(a.on(a.listeners),delete a.listeners),a.enableBubble(a.bubbleEvents),a.mons=[]},afterRender:function(){var a=this,b=a.resizable;a.floating?a.makeFloating(a.floating):a.el.setVisibilityMode(Ext.Element[a.hideMode.toUpperCase()]),Ext.isDefined(a.autoScroll)&&a.setAutoScroll(a.autoScroll),a.callParent(),(!a.x||!a.y)&&(a.pageX||a.pageY)&&a.setPagePosition(a.pageX,a.pageY),b&&a.initResizable(b),a.draggable&&a.initDraggable(),a.initAria()},initAria:function(){var a=this.getActionEl(),b=this.ariaRole;b&&a.dom.setAttribute("role",b)},setAutoScroll:function(a){var b=this,c;return a=!!a,b.rendered&&(c=b.getTargetEl(),c.setStyle("overflow",a?"auto":""),a&&(Ext.isIE6||Ext.isIE7)&&c.position()),b.autoScroll=a,b},makeFloating:function(a){this.mixins.floating.constructor.call(this,a)},initResizable:function(a){var b=this;a=Ext.apply({target:b,dynamic:!1,constrainTo:b.constrainTo||(b.floatParent?b.floatParent.getTargetEl():b.el.getScopeParent()),handles:b.resizeHandles},a),a.target=b,b.resizer=Ext.create("Ext.resizer.Resizer",a)},getDragEl:function(){return this.el},initDraggable:function(){var a=this,b=Ext.applyIf({el:a.getDragEl(),constrainTo:a.constrain?a.constrainTo||(a.floatParent?a.floatParent.getTargetEl():a.el.getScopeParent()):undefined},a.draggable);if(a.constrain||a.constrainDelegate)b.constrain=a.constrain,b.constrainDelegate=a.constrainDelegate;a.dd=Ext.create("Ext.util.ComponentDragger",a,b)},setPosition:function(a,b,c){var d=this,e=d.el,f={},g,h,i,j,k;Ext.isArray(a)&&(c=b,b=a[1],a=a[0]),d.x=a,d.y=b;if(!d.rendered)return d;g=d.adjustPosition(a,b),h=g.x,i=g.y,j=Ext.isNumber(h),k=Ext.isNumber(i);if(j||k)c?(j&&(f.left=h),k&&(f.top=i),d.stopAnimation(),d.animate(Ext.apply({duration:1e3,listeners:{afteranimate:Ext.Function.bind(d.afterSetPosition,d,[h,i])},to:f},c))):(j?k?e.setLeftTop(h,i):e.setLeft(h):e.setTop(i),d.afterSetPosition(h,i));return d},afterSetPosition:function(a,b){this.onPosition(a,b),this.fireEvent("move",this,a,b)},showAt:function(a,b,c){var d=this;d.floating?d.setPosition(a,b,c):d.setPagePosition(a,b,c),d.show()},setPagePosition:function(a,b,c){var d=this,e;return Ext.isArray(a)&&(b=a[1],a=a[0]),d.pageX=a,d.pageY=b,d.floating&&d.floatParent?(e=d.floatParent.getTargetEl().getViewRegion(),Ext.isNumber(a)&&Ext.isNumber(e.left)&&(a-=e.left),Ext.isNumber(b)&&Ext.isNumber(e.top)&&(b-=e.top),d.setPosition(a,b,c)):(e=d.el.translatePoints(a,b),d.setPosition(e.left,e.top,c)),d},getBox:function(a){var b=this.getPosition(a),c=this.getSize();return c.x=b[0],c.y=b[1],c},updateBox:function(a){return this.setSize(a.width,a.height),this.setPagePosition(a.x,a.y),this},getOuterSize:function(){var a=this.el;return{width:a.getWidth()+a.getMargin("lr"),height:a.getHeight()+a.getMargin("tb")}},adjustPosition:function(a,b){if(this.floating&&this.floatParent){var c=this.floatParent.getTargetEl().getViewRegion();a+=c.left,b+=c.top}return{x:a,y:b}},getPosition:function(a){var b=this,c=b.el,d,e;return a===!0||b.floating&&!b.floatParent?[c.getLeft(!0),c.getTop(!0)]:(d=b.xy||c.getXY(),b.floating&&(e=b.floatParent.getTargetEl().getViewRegion(),d[0]-=e.left,d[1]-=e.top),d)},getId:function(){var a=this,b;return a.id||(b=a.getXType(),b=b?b.replace(Ext.Component.INVALID_ID_CHARS_Re,"-"):"ext-comp",a.id=b+"-"+a.getAutoId()),a.id},onEnable:function(){var a=this.getActionEl();a.dom.removeAttribute("aria-disabled"),a.dom.disabled=!1,this.callParent()},onDisable:function(){var a=this.getActionEl();a.dom.setAttribute("aria-disabled",!0),a.dom.disabled=!0,this.callParent()},show:function(a,b,c){var d=this;return d.rendered&&d.isVisible()?d.toFrontOnShow&&d.floating&&d.toFront():d.fireEvent("beforeshow",d)!==!1&&(d.hidden=!1,!d.rendered&&(d.autoRender||d.floating)&&d.doAutoRender(),d.rendered&&(d.beforeShow(),d.onShow.apply(d,arguments),d.ownerCt&&!d.floating&&!d.ownerCt.suspendLayout&&!d.ownerCt.layout.layoutBusy&&d.ownerCt.doLayout(),d.afterShow.apply(d,arguments))),d},beforeShow:Ext.emptyFn,onShow:function(){var a=this;a.el.show(),a.callParent(arguments),a.floating&&a.constrain&&a.doConstrain()},afterShow:function(a,b,c){var d=this,e,f,g;a=a||d.animateTarget,d.ghost||(a=null),a?(a=a.el?a.el:Ext.get(a),f=d.el.getBox(),e=a.getBox(),d.el.addCls(Ext.baseCSSPrefix+"hide-offsets"),g=d.ghost(),g.el.stopAnimation(),g.el.setX(-1e4),g.el.animate({from:e,to:f,listeners:{afteranimate:function(){delete g.componentLayout.lastComponentSize,d.unghost(),d.el.removeCls(Ext.baseCSSPrefix+"hide-offsets"),d.onShowComplete(b,c)}}})):d.onShowComplete(b,c)},onShowComplete:function(a,b){var c=this;c.floating&&c.toFront(),Ext.callback(a,b||c),c.fireEvent("show",c)},hide:function(){var a=this;return a.showOnParentShow=!1,(!a.rendered||!!a.isVisible())&&a.fireEvent("beforehide",a)!==!1&&(a.hidden=!0,a.rendered&&(a.onHide.apply(a,arguments),a.ownerCt&&!a.floating&&!a.ownerCt.suspendLayout&&!a.ownerCt.layout.layoutBusy&&a.ownerCt.doLayout())),a},onHide:function(a,b,c){var d=this,e,f;a=a||d.animateTarget,d.ghost||(a=null),a&&(a=a.el?a.el:Ext.get(a),e=d.ghost(),e.el.stopAnimation(),f=a.getBox(),f.width+="px",f.height+="px",e.el.animate({to:f,listeners:{afteranimate:function(){delete e.componentLayout.lastComponentSize,e.el.hide(),d.afterHide(b,c)}}})),d.el.hide(),a||d.afterHide(b,c)},afterHide:function(a,b){Ext.callback(a,b||this),this.fireEvent("hide",this)},onDestroy:function(){var a=this;a.rendered&&(Ext.destroy(a.proxy,a.proxyWrap,a.resizer),(a.actionMode=="container"||a.removeMode=="container")&&a.container.remove()),delete a.focusTask,a.callParent()},deleteMembers:function(){var a=arguments,b=a.length,c=0;for(;c<b;++c)delete this[a[c]]},focus:function(a,b){var c=this,d;return b?(c.focusTask||(c.focusTask=Ext.create("Ext.util.DelayedTask",c.focus)),c.focusTask.delay(Ext.isNumber(b)?b:10,null,c,[a,!1]),c):(c.rendered&&!c.isDestroyed&&(d=c.getFocusEl(),d.focus(),d.dom&&a===!0&&d.dom.select(),c.floating&&c.toFront(!0)),c)},getFocusEl:function(){return this.el},blur:function(){return this.rendered&&this.getFocusEl().blur(),this},getEl:function(){return this.el},getResizeEl:function(){return this.el},getPositionEl:function(){return this.el},getActionEl:function(){return this.el},getVisibilityEl:function(){return this.el},onResize:Ext.emptyFn,getBubbleTarget:function(){return this.ownerCt},getContentTarget:function(){return this.el},cloneConfig:function(a){a=a||{};var b=a.id||Ext.id(),c=Ext.applyIf(a,this.initialConfig),d;return c.id=b,d=Ext.getClass(this),new d(c)},getXType:function(){return this.self.xtype},findParentBy:function(a){var b;for(b=this.ownerCt;b&&!a(b,this);b=b.ownerCt);return b||null},findParentByType:function(a){return Ext.isFunction(a)?this.findParentBy(function(b){return b.constructor===a}):this.up(a)},bubble:function(a,b,c){var d=this;while(d){if(a.apply(b||d,c||[d])===!1)break;d=d.ownerCt}return this},getProxy:function(){var a=this,b;return a.proxy||(b=Ext.getBody(),Ext.scopeResetCSS&&(a.proxyWrap=b=Ext.getBody().createChild({cls:Ext.baseCSSPrefix+"reset"})),a.proxy=a.el.createProxy(Ext.baseCSSPrefix+"proxy-el",b,!0)),a.proxy}}),Ext.define("Ext.layout.container.AbstractContainer",{extend:"Ext.layout.Layout",type:"container",bindToOwnerCtComponent:!1,bindToOwnerCtContainer:!1,setItemSize:function(a,b,c){Ext.isObject(b)&&(c=b.height,b=b.width),a.setCalculatedSize(b,c,this.owner)},getLayoutItems:function(){return this.owner&&this.owner.items&&this.owner.items.items||[]},beforeLayout:function(){return!this.owner.collapsed&&this.callParent(arguments)},afterLayout:function(){this.owner.afterLayout(this)},getTarget:function(){return this.owner.getTargetEl()},getRenderTarget:function(){return this.owner.getTargetEl()}}),Ext.define("Ext.layout.container.Container",{extend:"Ext.layout.container.AbstractContainer",alternateClassName:"Ext.layout.ContainerLayout",layoutItem:function(a,b){b?a.doComponentLayout(b.width,b.height):a.doComponentLayout()},getLayoutTargetSize:function(){var a=this.getTarget(),b;return a&&(b=a.getViewSize(),Ext.isIE&&b.width==0&&(b=a.getStyleSize()),b.width-=a.getPadding("lr"),b.height-=a.getPadding("tb")),b},beforeLayout:function(){return this.owner.beforeLayout(arguments)!==!1?this.callParent(arguments):!1},getRenderedItems:function(){var a=this,b=a.getTarget(),c=a.getLayoutItems(),d=c.length,e=[],f,g;for(f=0;f<d;f++)g=c[f],g.rendered&&a.isValidParent(g,b,f)&&e.push(g);return e},getVisibleItems:function(){var a=this.getTarget(),b=this.getLayoutItems(),c=b.length,d=[],e,f;for(e=0;e<c;e++)f=b[e],f.rendered&&this.isValidParent(f,a,e)&&f.hidden!==!0&&d.push(f);return d}}),Ext.define("Ext.layout.container.Auto",{alias:["layout.auto","layout.autocontainer"],extend:"Ext.layout.container.Container",type:"autocontainer",bindToOwnerCtComponent:!0,onLayout:function(a,b){var c=this,d=c.getLayoutItems(),e=d.length,f;if(e){c.clearEl||(c.clearEl=c.getRenderTarget().createChild({cls:Ext.baseCSSPrefix+"clear",role:"presentation"}));for(f=0;f<e;f++)c.setItemSize(d[f])}},configureItem:function(a){this.callParent(arguments),a.layoutManagedHeight=2,a.layoutManagedWidth=2}}),Ext.define("Ext.container.AbstractContainer",{extend:"Ext.Component",requires:["Ext.util.MixedCollection","Ext.layout.container.Auto","Ext.ZIndexManager"],suspendLayout:!1,autoDestroy:!0,defaultType:"panel",isContainer:!0,layoutCounter:0,baseCls:Ext.baseCSSPrefix+"container",bubbleEvents:["add","remove"],initComponent:function(){var a=this;a.addEvents("afterlayout","beforeadd","beforeremove","add","remove"),a.layoutOnShow=Ext.create("Ext.util.MixedCollection"),a.callParent(),a.initItems()},initItems:function(){var a=this,b=a.items;a.items=Ext.create("Ext.util.MixedCollection",!1,a.getComponentId),b&&(Ext.isArray(b)||(b=[b]),a.add(b))},afterRender:function(){this.getLayout(),this.callParent()},renderChildren:function(){var a=this,b=a.getLayout();a.callParent(),b&&(a.suspendLayout=!0,b.renderChildren(),delete a.suspendLayout)},setLayout:function(a){var b=this.layout;b&&b.isLayout&&b!=a&&b.setOwner(null),this.layout=a,a.setOwner(this)},getLayout:function(){var a=this;return(!a.layout||!a.layout.isLayout)&&a.setLayout(Ext.layout.Layout.create(a.layout,"autocontainer")),a.layout},doLayout:function(){var a=this,b=a.getLayout();return a.rendered&&b&&!a.suspendLayout&&(!a.isFixedWidth()||!a.isFixedHeight()?a.componentLayout.layoutBusy!==!0&&(a.doComponentLayout(),a.componentLayout.layoutCancelled===!0&&b.layout()):b.layoutBusy!==!0&&b.layout()),a},afterLayout:function(a){++this.layoutCounter,this.fireEvent("afterlayout",this,a)},prepareItems:function(a,b){Ext.isArray(a)||(a=[a]);var c=0,d=a.length,e;for(;c<d;c++)e=a[c],b&&(e=this.applyDefaults(e)),a[c]=this.lookupComponent(e);return a},applyDefaults:function(a){var b=this.defaults;return b&&(Ext.isFunction(b)&&(b=b.call(this,a)),Ext.isString(a)&&(a=Ext.ComponentManager.get(a)),Ext.applyIf(a,b)),a},lookupComponent:function(a){return Ext.isString(a)?Ext.ComponentManager.get(a):this.createComponent(a)},createComponent:function(a,b){return Ext.ComponentManager.create(a,b||this.defaultType)},getComponentId:function(a){return a.getItemId()},add:function(){var a=this,b=Array.prototype.slice.call(arguments),c,d,e=[],f,g,h,i=-1,j;typeof b[0]=="number"&&(i=b.shift()),c=b.length>1;if(c||Ext.isArray(b[0])){d=c?b:b[0],a.suspendLayout=!0;for(f=0,g=d.length;f<g;f++)h=d[f],i!=-1?h=a.add(i+f,h):h=a.add(h),e.push(h);return a.suspendLayout=!1,a.doLayout(),e}return j=a.prepareItems(b[0],!0)[0],j.floating?j.onAdded(a,i):(i=i!==-1?i:a.items.length,a.fireEvent("beforeadd",a,j,i)!==!1&&a.onBeforeAdd(j)!==!1&&(a.items.insert(i,j),j.onAdded(a,i),a.onAdd(j,i),a.fireEvent("add",a,j,i)),a.doLayout()),j},onAdd:Ext.emptyFn,onRemove:Ext.emptyFn,insert:function(a,b){return this.add(a,b)},move:function(a,b){var c=this.items,d;return d=c.removeAt(a),d===!1?!1:(c.insert(b,d),this.doLayout(),d)},onBeforeAdd:function(a){var b=this;a.ownerCt&&a.ownerCt.remove(a,!1);if(b.border===!1||b.border===0)a.border=a.border===!0},remove:function(a,b){var c=this,d=c.getComponent(a);return d&&c.fireEvent("beforeremove",c,d)!==!1&&(c.doRemove(d,b),c.fireEvent("remove",c,d)),d},doRemove:function(a,b){var c=this,d=c.layout,e=d&&c.rendered;c.items.remove(a),a.onRemoved(),e&&d.onRemove(a),c.onRemove(a,b),(b===!0||b!==!1&&c.autoDestroy)&&a.destroy(),e&&!b&&d.afterRemove(a),c.destroying||c.doLayout()},removeAll:function(a){var b=this,c=b.items.items.slice(),d=[],e=0,f=c.length,g;b.suspendLayout=!0;for(;e<f;e++)g=c[e],b.remove(g,a),g.ownerCt!==b&&d.push(g);return b.suspendLayout=!1,f&&b.doLayout(),d},getRefItems:function(a){var b=this,c=b.items.items,d=c.length,e=0,f,g=[];for(;e<d;e++)f=c[e],g.push(f),a&&f.getRefItems&&g.push.apply(g,f.getRefItems(!0));return b.floatingItems&&b.floatingItems.accessList&&g.push.apply(g,b.floatingItems.accessList),g},cascade:function(a,b,c){var d=this,e=d.items?d.items.items:[],f=e.length,g=0,h,i=c?c.concat(d):[d],j=i.length-1;if(a.apply(b||d,i)!==!1)for(;g<f;g++)h=e[g],h.cascade?h.cascade(a,b,c):(i[j]=h,a.apply(b||e,i));return this},getComponent:function(a){return Ext.isObject(a)&&(a=a.getItemId()),this.items.get(a)},query:function(a){return a=a||"*",Ext.ComponentQuery.query(a,this)},child:function(a){return a=a||"",this.query("> "+a)[0]||null},down:function(a){return this.query(a)[0]||null},show:function(){return this.callParent(arguments),this.performDeferredLayouts(),this},performDeferredLayouts:function(){var a=this.layoutOnShow,b=a.getCount(),c=0,d,e;for(;c<b;c++)e=a.get(c),d=e.needsLayout,Ext.isObject(d)&&e.doComponentLayout(d.width,d.height,d.isSetSize,d.ownerCt);a.clear()},onEnable:function(){Ext.Array.each(this.query("[isFormField]"),function(a){a.resetDisable&&(a.enable(),delete a.resetDisable)}),this.callParent()},onDisable:function(){Ext.Array.each(this.query("[isFormField]"),function(a){a.resetDisable!==!1&&!a.disabled&&(a.disable(),a.resetDisable=!0)}),this.callParent()},beforeLayout:function(){return!0},beforeDestroy:function(){var a=this,b=a.items,c;if(b)while(c=b.first())a.doRemove(c,!0);Ext.destroy(a.layout),a.callParent()}}),Ext.define("Ext.container.Container",{extend:"Ext.container.AbstractContainer",alias:"widget.container",alternateClassName:"Ext.Container",getChildByElement:function(a){var b,c,d=0,e=this.items.items,f=e.length;a=Ext.getDom(a);for(;d<f;d++){b=e[d],c=b.getEl();if(c.dom===a||c.contains(a))return b}return null}}),Ext.define("Ext.toolbar.Fill",{extend:"Ext.Component",alias:"widget.tbfill",alternateClassName:"Ext.Toolbar.Fill",isFill:!0,flex:1}),Ext.define("Ext.toolbar.Item",{extend:"Ext.Component",alias:"widget.tbitem",alternateClassName:"Ext.Toolbar.Item",enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn}),Ext.define("Ext.toolbar.Separator",{extend:"Ext.toolbar.Item",alias:"widget.tbseparator",alternateClassName:"Ext.Toolbar.Separator",baseCls:Ext.baseCSSPrefix+"toolbar-separator",focusable:!1}),Ext.define("Ext.menu.Manager",{singleton:!0,requires:["Ext.util.MixedCollection","Ext.util.KeyMap"],alternateClassName:"Ext.menu.MenuMgr",uses:["Ext.menu.Menu"],menus:{},groups:{},attached:!1,lastShow:new Date,init:function(){var a=this;a.active=Ext.create("Ext.util.MixedCollection"),Ext.getDoc().addKeyListener(27,function(){a.active.length>0&&a.hideAll()},a)},hideAll:function(){var a=this.active,b;return a&&a.length>0?(b=a.clone(),b.each(function(a){a.hide()}),!0):!1},onHide:function(a){var b=this,c=b.active;c.remove(a),c.length<1&&(Ext.getDoc().un("mousedown",b.onMouseDown,b),b.attached=!1)},onShow:function(a){var b=this,c=b.active,d=c.last(),e=b.attached,f=a.getEl(),g;b.lastShow=new Date,c.add(a),e||(Ext.getDoc().on("mousedown",b.onMouseDown,b),b.attached=!0),a.toFront()},onBeforeHide:function(a){a.activeChild&&a.activeChild.hide(),a.autoHideTimer&&(clearTimeout(a.autoHideTimer),delete a.autoHideTimer)},onBeforeShow:function(a){var b=this.active,c=a.parentMenu;b.remove(a),!c&&!a.allowOtherMenus?this.hideAll():c&&c.activeChild&&a!=c.activeChild&&c.activeChild.hide()},onMouseDown:function(a){var b=this,c=b.active,d=b.lastShow,e=a.target;Ext.Date.getElapsed(d)>50&&c.length>0&&!a.getTarget("."+Ext.baseCSSPrefix+"menu")&&(b.hideAll(),Ext.isIE&&Ext.fly(e).focusable()&&e.focus())},register:function(a){var b=this;b.active||b.init(),a.floating&&(b.menus[a.id]=a,a.on({beforehide:b.onBeforeHide,hide:b.onHide,beforeshow:b.onBeforeShow,show:b.onShow,scope:b}))},get:function(a){var b=this.menus;return typeof a=="string"?b?b[a]:null:a.isMenu?a:Ext.isArray(a)?Ext.create("Ext.menu.Menu",{items:a}):Ext.ComponentManager.create(a,"menu")},unregister:function(a){var b=this,c=b.menus,d=b.active;delete c[a.id],d.remove(a),a.un({beforehide:b.onBeforeHide,hide:b.onHide,beforeshow:b.onBeforeShow,show:b.onShow,scope:b})},registerCheckable:function(a){var b=this.groups,c=a.group;c&&(b[c]||(b[c]=[]),b[c].push(a))},unregisterCheckable:function(a){var b=this.groups,c=a.group;c&&Ext.Array.remove(b[c],a)},onCheckChange:function(a,b){var c=this.groups,d=a.group,e=0,f,g,h;if(d&&b){f=c[d],g=f.length;for(;e<g;e++)h=f[e],h!=a&&h.setChecked(!1)}}}),Ext.define("Ext.layout.component.Button",{alias:["layout.button"],extend:"Ext.layout.component.Component",type:"button",cellClsRE:/-btn-(tl|br)\b/,htmlRE:/<.*>/,beforeLayout:function(){return this.callParent(arguments)||this.lastText!==this.owner.text},onLayout:function(a,b){var c=this,d=Ext.isNumber,e=c.owner,f=e.el,g=e.btnEl,h=e.btnInnerEl,i=e.btnIconEl,j=(e.icon||e.iconCls)&&(e.iconAlign=="top"||e.iconAlign=="bottom"),k=e.minWidth,l=e.maxWidth,m,n,o;c.getTargetInfo(),c.callParent(arguments),h.unclip(),c.setTargetSize(a,b);if(!d(a)){e.text&&(Ext.isIE6||Ext.isIE7)&&Ext.isStrict&&g&&g.getWidth()>20?(n=c.btnFrameWidth,o=Ext.util.TextMetrics.measure(h,e.text),f.setWidth(o.width+n+c.adjWidth),g.setWidth(o.width+n),h.setWidth(o.width+n),j&&i.setWidth(o.width+n)):(f.setWidth(null),g.setWidth(null),h.setWidth(null),i.setWidth(null));if(k||l)m=f.getWidth(),k&&m<k?c.setTargetSize(k,b):l&&m>l&&(h.clip(),c.setTargetSize(l,b))}this.lastText=e.text},setTargetSize:function(a,b){var c=this,d=c.owner,e=Ext.isNumber,f=d.btnInnerEl,g=e(a)?a-c.adjWidth:a,h=e(b)?b-c.adjHeight:b,i=c.btnFrameHeight,j=d.getText(),k;c.callParent(arguments),c.setElementSize(d.btnEl,g,h),c.setElementSize(f,g,h),h>=0&&f.setStyle("line-height",h-i+"px"),j&&this.htmlRE.test(j)&&(f.setStyle("line-height","normal"),k=Ext.util.TextMetrics.measure(f,j).height,f.setStyle("padding-top",c.btnFrameTop+Math.max(f.getHeight()-i-k,0)/2+"px"),c.setElementSize(f,g,h))},getTargetInfo:function(){var a=this,b=a.owner,c=b.el,d=a.frameSize,e=b.frameBody,f=b.btnWrap,g=b.btnInnerEl;return"adjWidth"in a||Ext.apply(a,{adjWidth:d.left+d.right+c.getBorderWidth("lr")+c.getPadding("lr")+f.getPadding("lr")+(e?e.getFrameWidth("lr"):0),adjHeight:d.top+d.bottom+c.getBorderWidth("tb")+c.getPadding("tb")+f.getPadding("tb")+(e?e.getFrameWidth("tb"):0),btnFrameWidth:g.getFrameWidth("lr"),btnFrameHeight:g.getFrameWidth("tb"),btnFrameTop:g.getFrameWidth("t")}),a.callParent()}}),Ext.define("Ext.button.Button",{alias:"widget.button",extend:"Ext.Component",requires:["Ext.menu.Manager","Ext.util.ClickRepeater","Ext.layout.component.Button","Ext.util.TextMetrics","Ext.util.KeyMap"],alternateClassName:"Ext.Button",isButton:!0,componentLayout:"button",hidden:!1,disabled:!1,pressed:!1,enableToggle:!1,menuAlign:"tl-bl?",textAlign:"center",type:"button",clickEvent:"click",preventDefault:!0,handleMouseEvents:!0,tooltipType:"qtip",baseCls:Ext.baseCSSPrefix+"btn",pressedCls:"pressed",overCls:"over",focusCls:"focus",menuActiveCls:"menu-active",ariaRole:"button",renderTpl:'<em id="{id}-btnWrap" class="{splitCls}"><tpl if="href"><a id="{id}-btnEl" href="{href}" target="{target}"<tpl if="tabIndex"> tabIndex="{tabIndex}"</tpl> role="link"><span id="{id}-btnInnerEl" class="{baseCls}-inner">{text}</span><span id="{id}-btnIconEl" class="{baseCls}-icon"></span></a></tpl><tpl if="!href"><button id="{id}-btnEl" type="{type}" hidefocus="true"<tpl if="tabIndex"> tabIndex="{tabIndex}"</tpl> role="button" autocomplete="off"><span id="{id}-btnInnerEl" class="{baseCls}-inner" style="{innerSpanStyle}">{text}</span><span id="{id}-btnIconEl" class="{baseCls}-icon {iconCls}">&#160;</span></button></tpl></em>',scale:"small",allowedScales:["small","medium","large"],iconAlign:"left",arrowAlign:"right",arrowCls:"arrow",maskOnDisable:!1,initComponent:function(){var a=this;a.callParent(arguments),a.addEvents("click","toggle","mouseover","mouseout","menushow","menuhide","menutriggerover","menutriggerout"),a.menu&&(a.split=!0,a.menu=Ext.menu.Manager.get(a.menu),a.menu.ownerCt=a),a.url&&(a.href=a.url),a.href&&!a.hasOwnProperty("preventDefault")&&(a.preventDefault=!1),Ext.isString(a.toggleGroup)&&(a.enableToggle=!0)},initAria:function(){this.callParent();var a=this.getActionEl();this.menu&&a.dom.setAttribute("aria-haspopup",!0)},getActionEl:function(){return this.btnEl},getFocusEl:function(){return this.btnEl},setButtonCls:function(){var a=this,b=[],c=a.btnIconEl,d="x-hide-display";a.useSetClass&&(Ext.isEmpty(a.oldCls)||(a.removeClsWithUI(a.oldCls),a.removeClsWithUI(a.pressedCls)),a.iconCls||a.icon?(a.text?b.push("icon-text-"+a.iconAlign):b.push("icon"),c&&c.removeCls(d)):(a.text&&b.push("noicon"),c&&c.addCls(d)),a.oldCls=b,a.addClsWithUI(b),a.addClsWithUI(a.pressed?a.pressedCls:null))},onRender:function(a,b){var c=this,d,e;Ext.applyIf(c.renderData,c.getTemplateArgs()),c.addChildEls("btnEl","btnWrap","btnInnerEl","btnIconEl"),c.scale&&(c.ui=c.ui+"-"+c.scale),c.callParent(arguments),c.split&&c.arrowTooltip&&c.arrowEl.dom.setAttribute(c.getTipAttr(),c.arrowTooltip),c.mon(c.btnEl,{scope:c,focus:c.onFocus,blur:c.onBlur}),e=c.el,c.icon&&c.setIcon(c.icon),c.iconCls&&c.setIconCls(c.iconCls),c.tooltip&&c.setTooltip(c.tooltip,!0),c.textAlign&&c.setTextAlign(c.textAlign),c.handleMouseEvents&&(c.mon(e,{scope:c,mouseover:c.onMouseOver,mouseout:c.onMouseOut,mousedown:c.onMouseDown}),c.split&&c.mon(e,{mousemove:c.onMouseMove,scope:c})),c.menu&&(c.mon(c.menu,{scope:c,show:c.onMenuShow,hide:c.onMenuHide}),c.keyMap=Ext.create("Ext.util.KeyMap",c.el,{key:Ext.EventObject.DOWN,handler:c.onDownKey,scope:c})),c.repeat?(d=Ext.create("Ext.util.ClickRepeater",e,Ext.isObject(c.repeat)?c.repeat:{}),c.mon(d,"click",c.onRepeatClick,c)):c.mon(e,c.clickEvent,c.onClick,c),Ext.ButtonToggleManager.register(c)},getTemplateArgs:function(){var a=this,b=a.getPersistentBtnPadding(),c="";return Math.max.apply(Math,b)>0&&(c="margin:"+Ext.Array.map(b,function(a){return-a+"px"}).join(" ")),{href:a.getHref(),target:a.target||"_blank",type:a.type,splitCls:a.getSplitCls(),cls:a.cls,iconCls:a.iconCls||"",text:a.text||"&#160;",tabIndex:a.tabIndex,innerSpanStyle:c}},getHref:function(){var a=this,b=Ext.apply({},a.baseParams);return b=Ext.apply(b,a.params),a.href?Ext.urlAppend(a.href,Ext.Object.toQueryString(b)):!1},setParams:function(a){this.params=a,this.btnEl.dom.href=this.getHref()},getSplitCls:function(){var a=this;return a.split?a.baseCls+"-"+a.arrowCls+" "+(a.baseCls+"-"+a.arrowCls+"-"+a.arrowAlign):""},afterRender:function(){var a=this;a.useSetClass=!0,a.setButtonCls(),a.doc=Ext.getDoc(),this.callParent(arguments)},setIconCls:function(a){var b=this,c=b.btnIconEl,d=b.iconCls;return b.iconCls=a,c&&(c.removeCls(d),c.addCls(a||""),b.setButtonCls()),b},setTooltip:function(a,b){var c=this;return c.rendered?(b||c.clearTip(),Ext.isObject(a)?(Ext.tip.QuickTipManager.register(Ext.apply({target:c.btnEl.id},a)),c.tooltip=a):c.btnEl.dom.setAttribute(c.getTipAttr(),a)):c.tooltip=a,c},setTextAlign:function(a){var b=this,c=b.btnEl;return c&&(c.removeCls(b.baseCls+"-"+b.textAlign),c.addCls(b.baseCls+"-"+a)),b.textAlign=a,b},getTipAttr:function(){return this.tooltipType=="qtip"?"data-qtip":"title"},getRefItems:function(a){var b=this.menu,c;return b&&(c=b.getRefItems(a),c.unshift(b)),c||[]},clearTip:function(){Ext.isObject(this.tooltip)&&Ext.tip.QuickTipManager.unregister(this.btnEl)},beforeDestroy:function(){var a=this;a.rendered&&a.clearTip(),a.menu&&a.destroyMenu!==!1&&Ext.destroy(a.menu),Ext.destroy(a.btnInnerEl,a.repeater),a.callParent()},onDestroy:function(){var a=this;a.rendered&&(a.doc.un("mouseover",a.monitorMouseOver,a),a.doc.un("mouseup",a.onMouseUp,a),delete a.doc,Ext.ButtonToggleManager.unregister(a),Ext.destroy(a.keyMap),delete a.keyMap),a.callParent()},setHandler:function(a,b){return this.handler=a,this.scope=b,this},setText:function(a){var b=this;return b.text=a,b.el&&(b.btnInnerEl.update(a||"&#160;"),b.setButtonCls()),b.doComponentLayout(),b},setIcon:function(a){var b=this,c=b.btnIconEl;return b.icon=a,c&&(c.setStyle("background-image",a?"url("+a+")":""),b.setButtonCls()),b},getText:function(){return this.text},toggle:function(a,b){var c=this;return a=a===undefined?!c.pressed:!!a,a!==c.pressed&&(c.rendered&&c[a?"addClsWithUI":"removeClsWithUI"](c.pressedCls),c.btnEl.dom.setAttribute("aria-pressed",a),c.pressed=a,b||(c.fireEvent("toggle",c,a),Ext.callback(c.toggleHandler,c.scope||c,[c,a]))),c},maybeShowMenu:function(){var a=this;a.menu&&!a.hasVisibleMenu()&&!a.ignoreNextClick&&a.showMenu()},showMenu:function(){var a=this;return a.rendered&&a.menu&&(a.tooltip&&a.getTipAttr()!="title"&&Ext.tip.QuickTipManager.getQuickTip().cancelShow(a.btnEl),a.menu.isVisible()&&a.menu.hide(),a.menu.showBy(a.el,a.menuAlign)),a},hideMenu:function(){return this.hasVisibleMenu()&&this.menu.hide(),this},hasVisibleMenu:function(){var a=this.menu;return a&&a.rendered&&a.isVisible()},onRepeatClick:function(a,b){this.onClick(b)},onClick:function(a){var b=this;(b.preventDefault||b.disabled&&b.getHref()&&a)&&a.preventDefault();if(a.button!==0)return;b.disabled||(b.doToggle(),b.maybeShowMenu(),b.fireHandler(a))},fireHandler:function(a){var b=this,c=b.handler;b.fireEvent("click",b,a),c&&c.call(b.scope||b,b,a),b.onBlur()},doToggle:function(){var a=this;a.enableToggle&&(a.allowDepress!==!1||!a.pressed)&&a.toggle()},onMouseOver:function(a){var b=this;!b.disabled&&!a.within(b.el,!0,!0)&&b.onMouseEnter(a)},onMouseOut:function(a){var b=this;a.within(b.el,!0,!0)||(b.overMenuTrigger&&b.onMenuTriggerOut(a),b.onMouseLeave(a))},onMouseMove:function(a){var b=this,c=b.el,d=b.overMenuTrigger,e,f;b.split&&(b.arrowAlign==="right"?(e=a.getX()-c.getX(),f=c.getWidth()):(e=a.getY()-c.getY(),f=c.getHeight()),e>f-b.getTriggerSize()?d||b.onMenuTriggerOver(a):d&&b.onMenuTriggerOut(a))},getTriggerSize:function(){var a=this,b=a.triggerSize,c,d,e;return b===e&&(c=a.arrowAlign,d=c.charAt(0),b=a.triggerSize=a.el.getFrameWidth(d)+a.btnWrap.getFrameWidth(d)+(a.frameSize&&a.frameSize[c]||0)),b},onMouseEnter:function(a){var b=this;b.addClsWithUI(b.overCls),b.fireEvent("mouseover",b,a)},onMouseLeave:function(a){var b=this;b.removeClsWithUI(b.overCls),b.fireEvent("mouseout",b,a)},onMenuTriggerOver:function(a){var b=this;b.overMenuTrigger=!0,b.fireEvent("menutriggerover",b,b.menu,a)},onMenuTriggerOut:function(a){var b=this;delete b.overMenuTrigger,b.fireEvent("menutriggerout",b,b.menu,a)},enable:function(a){var b=this;return b.callParent(arguments),b.removeClsWithUI("disabled"),b},disable:function(a){var b=this;return b.callParent(arguments),b.addClsWithUI("disabled"),b.removeClsWithUI(b.overCls),b},setScale:function(a){var b=this,c=b.ui.replace("-"+b.scale,"");if(!Ext.Array.contains(b.allowedScales,a))throw"#setScale: scale must be an allowed scale ("+b.allowedScales.join(", ")+")";b.scale=a,b.setUI(c)},setUI:function(a){var b=this;b.scale&&!a.match(b.scale)&&(a=a+"-"+b.scale),b.callParent([a])},onFocus:function(a){var b=this;b.disabled||b.addClsWithUI(b.focusCls)},onBlur:function(a){var b=this;b.removeClsWithUI(b.focusCls)},onMouseDown:function(a){var b=this;!b.disabled&&a.button===0&&(b.addClsWithUI(b.pressedCls),b.doc.on("mouseup",b.onMouseUp,b))},onMouseUp:function(a){var b=this;a.button===0&&(b.pressed||b.removeClsWithUI(b.pressedCls),b.doc.un("mouseup",b.onMouseUp,b))},onMenuShow:function(a){var b=this;b.ignoreNextClick=0,b.addClsWithUI(b.menuActiveCls),b.fireEvent("menushow",b,b.menu)},onMenuHide:function(a){var b=this;b.removeClsWithUI(b.menuActiveCls),b.ignoreNextClick=Ext.defer(b.restoreClick,250,b),b.fireEvent("menuhide",b,b.menu)},restoreClick:function(){this.ignoreNextClick=0},onDownKey:function(){var a=this;a.disabled||a.menu&&a.showMenu()},getPersistentBtnPadding:function(){var a=Ext.button.Button,b=a.persistentPadding,c,d,e,f;return b||(b=a.persistentPadding=[0,0,0,0],Ext.isIE||(c=Ext.create("Ext.button.Button",{renderTo:Ext.getBody(),text:"test",style:"position:absolute;top:-999px;"}),e=c.btnEl,f=c.btnInnerEl,e.setSize(null,null),d=f.getOffsetsTo(e),b[0]=d[1],b[1]=e.getWidth()-f.getWidth()-d[0],b[2]=e.getHeight()-f.getHeight()-d[1],b[3]=d[0],c.destroy())),b}},function(){function b(b,c){var d,e,f;if(c){d=a[b.toggleGroup];for(e=0,f=d.length;e<f;e++)d[e]!==b&&d[e].toggle(!1)}}var a={};Ext.ButtonToggleManager={register:function(c){if(!c.toggleGroup)return;var d=a[c.toggleGroup];d||(d=a[c.toggleGroup]=[]),d.push(c),c.on("toggle",b)},unregister:function(c){if(!c.toggleGroup)return;var d=a[c.toggleGroup];d&&(Ext.Array.remove(d,c),c.un("toggle",b))},getPressed:function(b){var c=a[b],d=0,e;if(c)for(e=c.length;d<e;d++)if(c[d].pressed===!0)return c[d];return null}}}),Ext.define("Ext.layout.container.boxOverflow.Menu",{extend:"Ext.layout.container.boxOverflow.None",requires:["Ext.toolbar.Separator","Ext.button.Button"],alternateClassName:"Ext.layout.boxOverflow.Menu",noItemsMenuText:'<div class="'+Ext.baseCSSPrefix+'toolbar-no-items">(None)</div>',constructor:function(a){var b=this;b.callParent(arguments),a.beforeLayout=Ext.Function.createInterceptor(a.beforeLayout,this.clearOverflow,this),b.afterCtCls=b.afterCtCls||Ext.baseCSSPrefix+"box-menu-"+a.parallelAfter,b.menuItems=[]},onRemove:function(a){Ext.Array.remove(this.menuItems,a)},handleOverflow:function(a,b){var c=this,d=c.layout,e="get"+d.parallelPrefixCap,f={},g=[null,null];return c.callParent(arguments),this.createMenu(a,b),f[d.perpendicularPrefix]=b[d.perpendicularPrefix],f[d.parallelPrefix]=b[d.parallelPrefix]-c.afterCt[e](),g[d.perpendicularSizeIndex]=(a.meta.maxSize-c.menuTrigger["get"+d.perpendicularPrefixCap]())/2,c.menuTrigger.setPosition.apply(c.menuTrigger,g),{targetSize:f}},clearOverflow:function(a,b){var c=this,d=b?b.width+(c.afterCt?c.afterCt.getWidth():0):0,e=c.menuItems,f=0,g=e.length,h;c.hideTrigger();for(;f<g;f++)e[f].show();return e.length=0,b?{targetSize:{height:b.height,width:d}}:null},showTrigger:function(){this.menuTrigger.show()},hideTrigger:function(){this.menuTrigger!==undefined&&this.menuTrigger.hide()},beforeMenuShow:function(a){var b=this,c=b.menuItems,d=0,e=c.length,f,g,h=function(a,b){return a.isXType("buttongroup")&&!(b instanceof Ext.toolbar.Separator)};b.clearMenu(),a.removeAll();for(;d<e;d++){f=c[d];if(!d&&f instanceof Ext.toolbar.Separator)continue;g&&(h(f,g)||h(g,f))&&a.add("-"),b.addComponentToMenu(a,f),g=f}a.items.length<1&&a.add(b.noItemsMenuText)},createMenuConfig:function(a,b){var c=Ext.apply({},a.initialConfig),d=a.toggleGroup;return Ext.copyTo(c,a,["iconCls","icon","itemId","disabled","handler","scope","menu"]),Ext.apply(c,{text:a.overflowText||a.text,hideOnClick:b,destroyMenu:!1}),(d||a.enableToggle)&&Ext.apply(c,{group:d,checked:a.pressed,listeners:{checkchange:function(b,c){a.toggle(c)}}}),delete c.ownerCt,delete c.xtype,delete c.id,c},addComponentToMenu:function(a,b){var c=this;b instanceof Ext.toolbar.Separator?a.add("-"):b.isComponent&&(b.isXType("splitbutton")?a.add(c.createMenuConfig(b,!0)):b.isXType("button")?a.add(c.createMenuConfig(b,!b.menu)):b.isXType("buttongroup")?b.items.each(function(b){c.addComponentToMenu(a,b)}):a.add(Ext.create(Ext.getClassName(b),c.createMenuConfig(b))))},clearMenu:function(){var a=this.moreMenu;a&&a.items&&a.items.each(function(a){a.menu&&delete a.menu})},createMenu:function(a,b){var c=this,d=c.layout,e=d.parallelBefore,f=d.parallelPrefix,g=b[f],h=a.boxes,i=0,j=h.length,k;c.menuTrigger||(c.createInnerElements(),c.menu=Ext.create("Ext.menu.Menu",{listeners:{scope:c,beforeshow:c.beforeMenuShow}}),c.menuTrigger=Ext.create("Ext.button.Button",{ownerCt:c.layout.owner,iconCls:c.layout.owner.menuTriggerCls,ui:d.owner instanceof Ext.toolbar.Toolbar?"default-toolbar":"default",menu:c.menu,getSplitCls:function(){return""},renderTo:c.afterCt})),c.showTrigger(),g-=c.afterCt.getWidth(),c.menuItems.length=0;for(;i<j;i++)k=h[i],k[e]+k[f]>g&&(c.menuItems.push(k.component),k.component.hide())},createInnerElements:function(){var a=this,b=a.layout.getRenderTarget();this.afterCt||(b.addCls(Ext.baseCSSPrefix+a.layout.direction+"-box-overflow-body"),this.afterCt=b.insertSibling({cls:Ext.layout.container.Box.prototype.innerCls+" "+this.afterCtCls},"before"))},destroy:function(){Ext.destroy(this.menu,this.menuTrigger)}}),Ext.define("Ext.util.Region",{requires:["Ext.util.Offset"],statics:{getRegion:function(a){return Ext.fly(a).getPageBox(!0)},from:function(a){return new this(a.top,a.right,a.bottom,a.left)}},constructor:function(a,b,c,d){var e=this;e.y=e.top=e[1]=a,e.right=b,e.bottom=c,e.x=e.left=e[0]=d},contains:function(a){var b=this;return a.x>=b.x&&a.right<=b.right&&a.y>=b.y&&a.bottom<=b.bottom},intersect:function(a){var b=this,c=Math.max(b.y,a.y),d=Math.min(b.right,a.right),e=Math.min(b.bottom,a.bottom),f=Math.max(b.x,a.x);return e>c&&d>f?new this.self(c,d,e,f):!1},union:function(a){var b=this,c=Math.min(b.y,a.y),d=Math.max(b.right,a.right),e=Math.max(b.bottom,a.bottom),f=Math.min(b.x,a.x);return new this.self(c,d,e,f)},constrainTo:function(a){var b=this,c=Ext.Number.constrain;return b.top=b.y=c(b.top,a.y,a.bottom),b.bottom=c(b.bottom,a.y,a.bottom),b.left=b.x=c(b.left,a.x,a.right),b.right=c(b.right,a.x,a.right),b},adjust:function(a,b,c,d){var e=this;return e.top=e.y+=a,e.left=e.x+=d,e.right+=b,e.bottom+=c,e},getOutOfBoundOffset:function(a,b){if(!Ext.isObject(a))return a=="x"?this.getOutOfBoundOffsetX(b):this.getOutOfBoundOffsetY(b);b=a;var c=Ext.create("Ext.util.Offset");return c.x=this.getOutOfBoundOffsetX(b.x),c.y=this.getOutOfBoundOffsetY(b.y),c},getOutOfBoundOffsetX:function(a){return a<=this.x?this.x-a:a>=this.right?this.right-a:0},getOutOfBoundOffsetY:function(a){return a<=this.y?this.y-a:a>=this.bottom?this.bottom-a:0},isOutOfBound:function(a,b){return Ext.isObject(a)?(b=a,this.isOutOfBoundX(b.x)||this.isOutOfBoundY(b.y)):a=="x"?this.isOutOfBoundX(b):this.isOutOfBoundY(b)},isOutOfBoundX:function(a){return a<this.x||a>this.right},isOutOfBoundY:function(a){return a<this.y||a>this.bottom},restrict:function(a,b,c){if(Ext.isObject(a)){var d;return c=b,b=a,b.copy?d=b.copy():d={x:b.x,y:b.y},d.x=this.restrictX(b.x,c),d.y=this.restrictY(b.y,c),d}return a=="x"?this.restrictX(b,c):this.restrictY(b,c)},restrictX:function(a,b){return b||(b=1),a<=this.x?a-=(a-this.x)*b:a>=this.right&&(a-=(a-this.right)*b),a},restrictY:function(a,b){return b||(b=1),a<=this.y?a-=(a-this.y)*b:a>=this.bottom&&(a-=(a-this.bottom)*b),a},getSize:function(){return{width:this.right-this.x,height:this.bottom-this.y}},copy:function(){return new this.self(this.y,this.right,this.bottom,this.x)},copyFrom:function(a){var b=this;return b.top=b.y=b[1]=a.y,b.right=a.right,b.bottom=a.bottom,b.left=b.x=b[0]=a.x,this},toString:function(){return"Region["+this.top+","+this.right+","+this.bottom+","+this.left+"]"},translateBy:function(a,b){arguments.length==1&&(b=a.y,a=a.x);var c=this;return c.top=c.y+=b,c.right+=a,c.bottom+=b,c.left=c.x+=a,c},round:function(){var a=this;return a.top=a.y=Math.round(a.y),a.right=Math.round(a.right),a.bottom=Math.round(a.bottom),a.left=a.x=Math.round(a.x),a},equals:function(a){return this.top==a.top&&this.right==a.right&&this.bottom==a.bottom&&this.left==a.left}}),Ext.define("Ext.dd.DragDropManager",{singleton:!0,requires:["Ext.util.Region"],uses:["Ext.tip.QuickTipManager"],alternateClassName:["Ext.dd.DragDropMgr","Ext.dd.DDM"],ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:!0,stopPropagation:!0,initialized:!1,locked:!1,init:function(){this.initialized=!0},POINT:0,INTERSECT:1,mode:0,_execOnAll:function(a,b){for(var c in this.ids)for(var d in this.ids[c]){var e=this.ids[c][d];if(!this.isTypeOfDD(e))continue;e[a].apply(e,b)}},_onLoad:function(){this.init();var a=Ext.EventManager;a.on(document,"mouseup",this.handleMouseUp,this,!0),a.on(document,"mousemove",this.handleMouseMove,this,!0),a.on(window,"unload",this._onUnload,this,!0),a.on(window,"resize",this._onResize,this,!0)},_onResize:function(a){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},isLocked:function(){return this.locked},locationCache:{},useCache:!0,clickPixelThresh:3,clickTimeThresh:350,dragThreshMet:!1,clickTimeout:null,startX:0,startY:0,regDragDrop:function(a,b){this.initialized||this.init(),this.ids[b]||(this.ids[b]={}),this.ids[b][a.id]=a},removeDDFromGroup:function(a,b){this.ids[b]||(this.ids[b]={});var c=this.ids[b];c&&c[a.id]&&delete c[a.id]},_remove:function(a){for(var b in a.groups)b&&this.ids[b]&&this.ids[b][a.id]&&delete this.ids[b][a.id];delete this.handleIds[a.id]},regHandle:function(a,b){this.handleIds[a]||(this.handleIds[a]={}),this.handleIds[a][b]=b},isDragDrop:function(a){return this.getDDById(a)?!0:!1},getRelated:function(a,b){var c=[];for(var d in a.groups)for(var e in this.ids[d]){var f=this.ids[d][e];if(!this.isTypeOfDD(f))continue;if(!b||f.isTarget)c[c.length]=f}return c},isLegalTarget:function(a,b){var c=this.getRelated(a,!0);for(var d=0,e=c.length;d<e;++d)if(c[d].id==b.id)return!0;return!1},isTypeOfDD:function(a){return a&&a.__ygDragDrop},isHandle:function(a,b){return this.handleIds[a]&&this.handleIds[a][b]},getDDById:function(a){for(var b in this.ids)if(this.ids[b][a])return this.ids[b][a];return null},handleMouseDown:function(a,b){Ext.tip.QuickTipManager&&Ext.tip.QuickTipManager.ddDisable(),this.dragCurrent&&this.handleMouseUp(a),this.currentTarget=a.getTarget(),this.dragCurrent=b;var c=b.getEl();this.startX=a.getPageX(),this.startY=a.getPageY(),this.deltaX=this.startX-c.offsetLeft,this.deltaY=this.startY-c.offsetTop,this.dragThreshMet=!1,this.clickTimeout=setTimeout(function(){var a=Ext.dd.DragDropManager;a.startDrag(a.startX,a.startY)},this.clickTimeThresh)},startDrag:function(a,b){clearTimeout(this.clickTimeout),this.dragCurrent&&(this.dragCurrent.b4StartDrag(a,b),this.dragCurrent.startDrag(a,b)),this.dragThreshMet=!0},handleMouseUp:function(a){Ext.tip&&Ext.tip.QuickTipManager&&Ext.tip.QuickTipManager.ddEnable();if(!this.dragCurrent)return;clearTimeout(this.clickTimeout),this.dragThreshMet&&this.fireEvents(a,!0),this.stopDrag(a),this.stopEvent(a)},stopEvent:function(a){this.stopPropagation&&a.stopPropagation(),this.preventDefault&&a.preventDefault()},stopDrag:function(a){this.dragCurrent&&(this.dragThreshMet&&(this.dragCurrent.b4EndDrag(a),this.dragCurrent.endDrag(a)),this.dragCurrent.onMouseUp(a)),this.dragCurrent=null,this.dragOvers={}},handleMouseMove:function(a){if(!this.dragCurrent)return!0;if(Ext.isIE&&a.button!==0&&a.button!==1&&a.button!==2)return this.stopEvent(a),this.handleMouseUp(a);if(!this.dragThreshMet){var b=Math.abs(this.startX-a.getPageX()),c=Math.abs(this.startY-a.getPageY());(b>this.clickPixelThresh||c>this.clickPixelThresh)&&this.startDrag(this.startX,this.startY)}return this.dragThreshMet&&(this.dragCurrent.b4Drag(a),this.dragCurrent.onDrag(a),this.dragCurrent.moveOnly||this.fireEvents(a,!1)),this.stopEvent(a),!0},fireEvents:function(a,b){var c=this.dragCurrent;if(!c||c.isLocked())return;var d=a.getPoint(),e=[],f=[],g=[],h=[],i=[];for(var j in this.dragOvers){var k=this.dragOvers[j];if(!this.isTypeOfDD(k))continue;this.isOverTarget(d,k,this.mode)||f.push(k),e[j]=!0,delete this.dragOvers[j]}for(var l in c.groups){if("string"!=typeof l)continue;for(j in this.ids[l]){var m=this.ids[l][j];if(!this.isTypeOfDD(m))continue;m.isTarget&&!m.isLocked()&&(m!=c||c.ignoreSelf===!1)&&this.isOverTarget(d,m,this.mode)&&(b?h.push(m):(e[m.id]?g.push(m):i.push(m),this.dragOvers[m.id]=m))}}if(this.mode)f.length&&(c.b4DragOut(a,f),c.onDragOut(a,f)),i.length&&c.onDragEnter(a,i),g.length&&(c.b4DragOver(a,g),c.onDragOver(a,g)),h.length&&(c.b4DragDrop(a,h),c.onDragDrop(a,h));else{var n=0;for(j=0,n=f.length;j<n;++j)c.b4DragOut(a,f[j].id),c.onDragOut(a,f[j].id);for(j=0,n=i.length;j<n;++j)c.onDragEnter(a,i[j].id);for(j=0,n=g.length;j<n;++j)c.b4DragOver(a,g[j].id),c.onDragOver(a,g[j].id);for(j=0,n=h.length;j<n;++j)c.b4DragDrop(a,h[j].id),c.onDragDrop(a,h[j].id)}b&&!h.length&&c.onInvalidDrop(a)},getBestMatch:function(a){var b=null,c=a.length;if(c==1)b=a[0];else for(var d=0;d<c;++d){var e=a[d];if(e.cursorIsOver){b=e;break}if(!b||b.overlap.getArea()<e.overlap.getArea())b=e}return b},refreshCache:function(a){for(var b in a){if("string"!=typeof b)continue;for(var c in this.ids[b]){var d=this.ids[b][c];if(this.isTypeOfDD(d)){var e=this.getLocation(d);e?this.locationCache[d.id]=e:delete this.locationCache[d.id]}}}},verifyEl:function(a){if(a){var b;if(Ext.isIE)try{b=a.offsetParent}catch(c){}else b=a.offsetParent;if(b)return!0}return!1},getLocation:function(a){if(!this.isTypeOfDD(a))return null;if(a.getRegion)return a.getRegion();var b=a.getEl(),c,d,e,f,g,h,i,j,k;try{c=Ext.Element.getXY(b)}catch(l){}return c?(d=c[0],e=d+b.offsetWidth,f=c[1],g=f+b.offsetHeight,h=f-a.padding[0],i=e+a.padding[1],j=g+a.padding[2],k=d-a.padding[3],Ext.create("Ext.util.Region",h,i,j,k)):null},isOverTarget:function(a,b,c){var d=this.locationCache[b.id];if(!d||!this.useCache)d=this.getLocation(b),this.locationCache[b.id]=d;if(!d)return!1;b.cursorIsOver=d.contains(a);var e=this.dragCurrent;if(!e||!e.getTargetCoord||!c&&!e.constrainX&&!e.constrainY)return b.cursorIsOver;b.overlap=null;var f=e.getTargetCoord(a.x,a.y),g=e.getDragEl(),h=Ext.create("Ext.util.Region",f.y,f.x+g.offsetWidth,f.y+g.offsetHeight,f.x),i=h.intersect(d);return i?(b.overlap=i,c?!0:b.cursorIsOver):!1},_onUnload:function(a,b){Ext.dd.DragDropManager.unregAll()},unregAll:function(){this.dragCurrent&&(this.stopDrag(),this.dragCurrent=null),this._execOnAll("unreg",[]);for(var a in this.elementCache)delete this.elementCache[a];this.elementCache={},this.ids={}},elementCache:{},getElWrapper:function(a){var b=this.elementCache[a];if(!b||!b.el)b=this.elementCache[a]=new this.ElementWrapper(Ext.getDom(a));return b},getElement:function(a){return Ext.getDom(a)},getCss:function(a){var b=Ext.getDom(a);return b?b.style:null},ElementWrapper:function(a){this.el=a||null,this.id=this.el&&a.id,this.css=this.el&&a.style},getPosX:function(a){return Ext.Element.getX(a)},getPosY:function(a){return Ext.Element.getY(a)},swapNode:function(a,b){if(a.swapNode)a.swapNode(b);else{var c=b.parentNode,d=b.nextSibling;d==a?c.insertBefore(a,b):b==a.nextSibling?c.insertBefore(b,a):(a.parentNode.replaceChild(b,a),c.insertBefore(a,d))}},getScroll:function(){var a=window.document,b=a.documentElement,c=a.body,d=0,e=0;return Ext.isGecko4?(d=window.scrollYOffset,e=window.scrollXOffset):b&&(b.scrollTop||b.scrollLeft)?(d=b.scrollTop,e=b.scrollLeft):c&&(d=c.scrollTop,e=c.scrollLeft),{top:d,left:e}},getStyle:function(a,b){return Ext.fly(a).getStyle(b)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(a,b){var c=Ext.Element.getXY(b);Ext.Element.setXY(a,c)},numericSort:function(a,b){return a-b},_timeoutCount:0,_addListeners:function(){document?this._onLoad():this._timeoutCount>2e3||(setTimeout(this._addListeners,10),document&&document.body&&(this._timeoutCount+=1))},handleWasClicked:function(a,b){if(this.isHandle(b,a.id))return!0;var c=a.parentNode;while(c){if(this.isHandle(b,c.id))return!0;c=c.parentNode}return!1}},function(){this._addListeners()}),Ext.define("Ext.layout.container.Box",{alias:["layout.box"],extend:"Ext.layout.container.Container",alternateClassName:"Ext.layout.BoxLayout",requires:["Ext.layout.container.boxOverflow.None","Ext.layout.container.boxOverflow.Menu","Ext.layout.container.boxOverflow.Scroller","Ext.util.Format","Ext.dd.DragDropManager"],defaultMargins:{top:0,right:0,bottom:0,left:0},padding:"0",pack:"start",type:"box",scrollOffset:0,itemCls:Ext.baseCSSPrefix+"box-item",targetCls:Ext.baseCSSPrefix+"box-layout-ct",innerCls:Ext.baseCSSPrefix+"box-inner",bindToOwnerCtContainer:!0,availableSpaceOffset:0,reserveOffset:!0,shrinkToFit:!0,clearInnerCtOnLayout:!1,flexSortFn:function(a,b){var c="max"+this.parallelPrefixCap,d=Infinity;return a=a.component[c]||d,b=b.component[c]||d,!isFinite(a)&&!isFinite(b)?!1:a-b},minSizeSortFn:function(a,b){return b.available-a.available},constructor:function(a){var b=this;b.callParent(arguments),b.flexSortFn=Ext.Function.bind(b.flexSortFn,b),b.initOverflowHandler()},getChildBox:function(a){a=a.el||this.owner.getComponent(a).el;var b=a.getBox(!1,!0);return{left:b.left,top:b.top,width:b.width,height:b.height}},calculateChildBox:function(a){var b=this,c=b.calculateChildBoxes(b.getVisibleItems(),b.getLayoutTargetSize()).boxes,d=c.length,e=0;a=b.owner.getComponent(a);for(;e<d;e++)if(c[e].component===a)return c[e]},calculateChildBoxes:function(a,b){var c=this,d=Math,e=d.max,f=Infinity,g,h=c.parallelPrefix,i=c.parallelPrefixCap,j=c.perpendicularPrefix,k=c.perpendicularPrefixCap,l="min"+i,m="min"+k,n="max"+k,o=b[h]-c.scrollOffset,p=b[j],q=c.padding,r=q[c.parallelBefore],s=r+q[c.parallelAfter],t=q[c.perpendicularLeftTop],u=t+q[c.perpendicularRightBottom],v=e(0,p-u),w=c.innerCt.getBorderWidth(c.perpendicularLT+c.perpendicularRB),x=c.pack=="start",y=c.pack=="center",z=c.pack=="end",A=Ext.Number.constrain,B=a.length,C=0,D=0,E=0,F=0,G=0,H=[],I=[],J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk;for(K=0;K<B;K++){L=a[K],N=L[j],(!L.flex||c.align!="stretch"&&c.align!="stretchmax")&&L.componentLayout.initialized!==!0&&c.layoutItem(L),O=L.margins,bg=O[c.parallelBefore]+O[c.parallelAfter],R={component:L,margins:O};if(L.flex)D+=L.flex,M=g;else{if(!L[h]||!N)P=L.getSize();M=L[h]||P[h],N=N||P[j]}C+=bg+(M||0),E+=bg+(L.flex?L[l]||0:M),F+=bg+(L[l]||M||0),typeof N!="number"&&(N=L["get"+k]()),G=e(G,e(N,L[m]||0)+O[c.perpendicularLeftTop]+O[c.perpendicularRightBottom]),R[h]=M||g,R.dirtySize=L.componentLayout.lastComponentSize?R[h]!==L.componentLayout.lastComponentSize[h]:!1,R[j]=N||g,H.push(R)}c.autoSize||(S=E-o,T=F>o),U=e(0,o-C-s-(c.reserveOffset?c.availableSpaceOffset:0));if(T)for(K=0;K<B;K++)Z=H[K],V=a[K][l]||a[K][h]||Z[h],Z.dirtySize=Z.dirtySize||Z[h]!=V,Z[h]=V;else if(S>0){for(K=0;K<B;K++)W=a[K],V=W[l]||0,W.flex?(Z=H[K],Z.dirtySize=Z.dirtySize||Z[h]!=V,Z[h]=V):c.shrinkToFit&&I.push({minSize:V,available:H[K][h]-V,index:K});Ext.Array.sort(I,c.minSizeSortFn);for(K=0,X=I.length;K<X;K++){Y=I[K].index;if(Y==g)continue;W=a[Y],V=I[K].minSize,Z=H[Y],$=Z[h],_=e(V,$-d.ceil(S/(X-K))),ba=$-_,Z.dirtySize=Z.dirtySize||Z[h]!=_,Z[h]=_,S-=ba}T=S>0}else{bd=U,be=D,bc=[];for(K=0;K<B;K++)L=a[K],x&&L.flex&&bc.push(H[Ext.Array.indexOf(a,L)]);Ext.Array.sort(bc,c.flexSortFn);for(K=0;K<bc.length;K++)bh=bc[K],L=bh.component,O=bh.margins,bf=d.ceil(L.flex/be*bd),bf=Math.max(L["min"+i]||0,d.min(L["max"+i]||f,bf)),bd-=bf,be-=L.flex,bh.dirtySize=bh.dirtySize||bh[h]!=bf,bh[h]=bf}y?r+=U/2:z&&(r+=U),c.owner.dock&&(Ext.isIE6||Ext.isIE7||Ext.isIEQuirks)&&!c.owner.width&&c.direction=="vertical"&&(J=G+c.owner.el.getPadding("lr")+c.owner.el.getBorderWidth("lr"),c.owner.frameSize&&(J+=c.owner.frameSize.left+c.owner.frameSize.right),v=Math.min(v,b.width=G+q.left+q.right));for(K=0;K<B;K++)L=a[K],bh=H[K],O=bh.margins,bj=O[c.perpendicularLeftTop]+O[c.perpendicularRightBottom],r+=O[c.parallelBefore],bh[c.parallelBefore]=r,bh[c.perpendicularLeftTop]=t+O[c.perpendicularLeftTop],c.align=="stretch"?(bk=A(v-bj,L[m]||0,L[n]||f),bh.dirtySize=bh.dirtySize||bh[j]!=bk,bh[j]=bk):c.align=="stretchmax"?(bk=A(G-bj,L[m]||0,L[n]||f),bh.dirtySize=bh.dirtySize||bh[j]!=bk,bh[j]=bk):c.align==c.alignCenteringString&&(bb=e(v,G)-w-bh[j],bb>0&&(bh[c.perpendicularLeftTop]=t+Math.round(bb/2))),r+=(bh[h]||0)+O[c.parallelAfter];return{boxes:H,meta:{calculatedWidth:J,maxSize:G,nonFlexSize:C,desiredSize:E,minimumSize:F,shortfall:S,tooNarrow:T}}},onRemove:function(a){this.callParent(arguments),this.overflowHandler&&this.overflowHandler.onRemove(a)},initOverflowHandler:function(){var a=this.overflowHandler;typeof a=="string"&&(a={type:a});var b="None";a&&a.type!==undefined&&(b=a.type);var c=Ext.layout.container.boxOverflow[b];c[this.type]&&(c=c[this.type]),this.overflowHandler=Ext.create("Ext.layout.container.boxOverflow."+b,this,a)},onLayout:function(){this.callParent(),this.clearInnerCtOnLayout===!0&&this.adjustmentPass!==!0&&this.innerCt.setSize(null,null);var a=this,b=a.getLayoutTargetSize(),c=a.getVisibleItems(),d=a.calculateChildBoxes(c,b),e=d.boxes,f=d.meta,g,h,i;a.autoSize&&d.meta.desiredSize&&(b[a.parallelPrefix]=d.meta.desiredSize),f.shortfall>0?(g=a.overflowHandler,h=f.tooNarrow?"handleOverflow":"clearOverflow",i=g[h](d,b),i&&(i.targetSize&&(b=i.targetSize),i.recalculate&&(c=a.getVisibleItems(),d=a.calculateChildBoxes(c,b),e=d.boxes))):a.overflowHandler.clearOverflow(),a.layoutTargetLastSize=b,a.childBoxCache=d,a.updateInnerCtSize(b,d),a.updateChildBoxes(e),a.handleTargetOverflow(b)},animCallback:Ext.emptyFn,updateChildBoxes:function(a){var b=this,c=0,d=a.length,e=[],f=Ext.dd.DDM.getDDById(b.innerCt.id),g,h,i,j,k,l;for(;c<d;c++){h=a[c],j=h.component;if(f&&f.getDragEl()===j.el.dom)continue;i=!1,g=b.getChildBox(j);if(b.animate)l=b.animate.callback||b.animate,k={layoutAnimation:!0,target:j,from:{},to:{},listeners:{}},!isNaN(h.width)&&h.width!=g.width&&(i=!0,k.to.width=h.width),!isNaN(h.height)&&h.height!=g.height&&(i=!0,k.to.height=h.height),!isNaN(h.left)&&h.left!=g.left&&(i=!0,k.to.left=h.left),!isNaN(h.top)&&h.top!=g.top&&(i=!0,k.to.top=h.top),i&&e.push(k);else{h.dirtySize&&(h.width!==g.width||h.height!==g.height)&&b.setItemSize(j,h.width,h.height);if(isNaN(h.left)||isNaN(h.top))continue;j.setPosition(h.left,h.top)}}d=e.length;if(d){var m=function(a){d-=1,d||(b.animCallback(a),b.layoutBusy=!1,Ext.isFunction(l)&&l())},n=function(){b.layoutBusy=!0};for(c=0,d=e.length;c<d;c++)k=e[c],k.listeners.afteranimate=m,c||(k.listeners.beforeanimate=n),b.animate.duration&&(k.duration=b.animate.duration),j=k.target,delete k.target,j.stopAnimation(),j.animate(k)}},updateInnerCtSize:function(a,b){var c=this,d=Math.max,e=c.align,f=c.padding,g=a.width,h=a.height,i=b.meta,j,k;c.direction=="horizontal"?(j=g,k=i.maxSize+f.top+f.bottom+c.innerCt.getBorderWidth("tb"),e=="stretch"?k=h:e=="middle"&&(k=d(h,k))):(k=h,j=i.maxSize+f.left+f.right+c.innerCt.getBorderWidth("lr"),e=="stretch"?j=g:e=="center"&&(j=d(g,j))),c.getRenderTarget().setSize(j||undefined,k||undefined),i.calculatedWidth&&c.owner.el.getWidth()>i.calculatedWidth&&c.owner.el.setWidth(i.calculatedWidth),c.innerCt.dom.scrollTop&&(c.innerCt.dom.scrollTop=0)},handleTargetOverflow:function(a){var b=this.getTarget(),c=b.getStyle("overflow"),d;if(c&&c!="hidden"&&!this.adjustmentPass){d=this.getLayoutTargetSize();if(d.width!=a.width||d.height!=a.height)return this.adjustmentPass=!0,this.onLayout(),!0}delete this.adjustmentPass},isValidParent:function(a,b,c){var d=a.el?a.el.dom:Ext.getDom(a);return d&&this.innerCt&&d.parentNode===this.innerCt.dom||!1},getRenderTarget:function(){return this.innerCt||(this.innerCt=this.getTarget().createChild({cls:this.innerCls,role:"presentation"}),this.padding=Ext.util.Format.parseBox(this.padding)),this.innerCt},renderItem:function(a,b){this.callParent(arguments);var c=this,d=a.getEl(),e=d.dom.style,f=a.margins||a.margin;f?Ext.isString(f)||Ext.isNumber(f)?f=Ext.util.Format.parseBox(f):Ext.applyIf(f,{top:0,right:0,bottom:0,left:0}):f=Ext.apply({},c.defaultMargins),f.top+=d.getMargin("t"),f.right+=d.getMargin("r"),f.bottom+=d.getMargin("b"),f.left+=d.getMargin("l"),f.height=f.top+f.bottom,f.width=f.left+f.right,e.marginTop=e.marginRight=e.marginBottom=e.marginLeft="0",a.margins=f},destroy:function(){Ext.destroy(this.innerCt,this.overflowHandler),this.callParent(arguments)}}),Ext.define("Ext.layout.container.HBox",{alias:["layout.hbox"],extend:"Ext.layout.container.Box",alternateClassName:"Ext.layout.HBoxLayout",align:"top",alignCenteringString:"middle",type:"hbox",direction:"horizontal",parallelSizeIndex:0,perpendicularSizeIndex:1,parallelPrefix:"width",parallelPrefixCap:"Width",parallelLT:"l",parallelRB:"r",parallelBefore:"left",parallelBeforeCap:"Left",parallelAfter:"right",parallelPosition:"x",perpendicularPrefix:"height",perpendicularPrefixCap:"Height",perpendicularLT:"t",perpendicularRB:"b",perpendicularLeftTop:"top",perpendicularRightBottom:"bottom",perpendicularPosition:"y",configureItem:function(a){a.flex?a.layoutManagedWidth=1:a.layoutManagedWidth=2,this.align==="stretch"||this.align==="stretchmax"?a.layoutManagedHeight=1:a.layoutManagedHeight=2,this.callParent(arguments)}}),Ext.define("Ext.layout.container.VBox",{alias:["layout.vbox"],extend:"Ext.layout.container.Box",alternateClassName:"Ext.layout.VBoxLayout",align:"left",alignCenteringString:"center",type:"vbox",direction:"vertical",parallelSizeIndex:1,perpendicularSizeIndex:0,parallelPrefix:"height",parallelPrefixCap:"Height",parallelLT:"t",parallelRB:"b",parallelBefore:"top",parallelBeforeCap:"Top",parallelAfter:"bottom",parallelPosition:"y",perpendicularPrefix:"width",perpendicularPrefixCap:"Width",perpendicularLT:"l",perpendicularRB:"r",perpendicularLeftTop:"left",perpendicularRightBottom:"right",perpendicularPosition:"x",configureItem:function(a){a.flex?a.layoutManagedHeight=1:a.layoutManagedHeight=2,this.align==="stretch"||this.align==="stretchmax"?a.layoutManagedWidth=1:a.layoutManagedWidth=2,this.callParent(arguments)}}),Ext.define("Ext.FocusManager",{singleton:!0,alternateClassName:"Ext.FocusMgr",mixins:{observable:"Ext.util.Observable"},requires:["Ext.ComponentManager","Ext.ComponentQuery","Ext.util.HashMap","Ext.util.KeyNav"],enabled:!1,focusElementCls:Ext.baseCSSPrefix+"focus-element",focusFrameCls:Ext.baseCSSPrefix+"focus-frame",whitelist:["textfield"],tabIndexWhitelist:["a","button","embed","frame","iframe","img","input","object","select","textarea"],constructor:function(){var a=this,b=Ext.ComponentQuery;a.addEvents("beforecomponentfocus","componentfocus","disable","enable"),a.keyNav=Ext.create("Ext.util.KeyNav",Ext.getDoc(),{disabled:!0,scope:a,backspace:a.focusLast,enter:a.navigateIn,esc:a.navigateOut,tab:a.navigateSiblings}),a.focusData={},a.subscribers=Ext.create("Ext.util.HashMap"),a.focusChain={},Ext.apply(b.pseudos,{focusable:function(a){var c=a.length,d=[],e=0,f,g=function(a){return a&&a.focusable!==!1&&b.is(a,"[rendered]:not([destroying]):not([isDestroyed]):not([disabled]){isVisible(true)}{el && c.el.dom && c.el.isVisible()}")};for(;e<c;e++)f=a[e],g(f)&&d.push(f);return d},nextFocus:function(a,c,d){d=d||1,c=parseInt(c,10);var e=a.length,f=c+d,g;for(;f!=c;f+=d){f>=e?f=0:f<0&&(f=e-1),g=a[f];if(b.is(g,":focusable"))return[g];if(g.placeholder&&b.is(g.placeholder,":focusable"))return[g.placeholder]}return[]},prevFocus:function(a,b){return this.nextFocus(a,b,-1)},root:function(a){var b=a.length,c=[],d=0,e;for(;d<b;d++)e=a[d],e.ownerCt||c.push(e);return c}})},addXTypeToWhitelist:function(a){var b=this;if(Ext.isArray(a)){Ext.Array.forEach(a,b.addXTypeToWhitelist,b);return}Ext.Array.contains(b.whitelist,a)||b.whitelist.push(a)},clearComponent:function(a){clearTimeout(this.cmpFocusDelay),a.isDestroyed||a.blur()},disable:function(){var a=this;if(!a.enabled)return;delete a.options,a.enabled=!1,Ext.ComponentManager.all.un("add",a.onComponentCreated,a),a.removeDOM(),a.keyNav.disable(),a.setFocusAll(!1),a.fireEvent("disable",a)},enable:function(a){var b=this;a===!0&&(a={focusFrame:!0}),b.options=a=a||{};if(b.enabled)return;Ext.ComponentManager.all.on("add",b.onComponentCreated,b),b.initDOM(a),b.keyNav.enable(),b.setFocusAll(!0,a),b.focusEl.focus(),delete b.focusedCmp,b.enabled=!0,b.fireEvent("enable",b)},focusLast:function(a){var b=this;if(b.isWhitelisted(b.focusedCmp))return!0;b.previousFocusedCmp&&b.previousFocusedCmp.focus()},getRootComponents:function(){var a=this,b=Ext.ComponentQuery,c=b.query(":focusable:root:not([floating])"),d=b.query(":focusable:root[floating]");return d.sort(function(a,b){return a.el.getZIndex()>b.el.getZIndex()}),d.concat(c)},initDOM:function(a){var b=this,c="&#160",d=b.focusFrameCls;if(!Ext.isReady){Ext.onReady(b.initDOM,b);return}b.focusEl||(b.focusEl=Ext.getBody().createChild({tabIndex:"-1",cls:b.focusElementCls,html:c})),!b.focusFrame&&a.focusFrame&&(b.focusFrame=Ext.getBody().createChild({cls:d,children:[{cls:d+"-top"},{cls:d+"-bottom"},{cls:d+"-left"},{cls:d+"-right"}],style:"top: -100px; left: -100px;"}),b.focusFrame.setVisibilityMode(Ext.Element.DISPLAY),b.focusFrameWidth=2,b.focusFrame.hide().setLeftTop(0,0))},isWhitelisted:function(a){return a&&Ext.Array.some(this.whitelist,function(b){return a.isXType(b)})},navigateIn:function(a){var b=this,c=b.focusedCmp,d,e;c?(e=Ext.ComponentQuery.query(">:focusable",c)[0],e?e.focus():Ext.isFunction(c.onClick)&&(a.button=0,c.onClick(a),c.focus())):(d=b.getRootComponents(),d.length&&d[0].focus())},navigateOut:function(a){var b=this,c;return!b.focusedCmp||!(c=b.focusedCmp.up(":focusable"))?b.focusEl.focus():c.focus(),!0},navigateSiblings:function(a,b,c){var d=this,e=b||d,f=a.getKey(),g=Ext.EventObject,h=a.shiftKey||f==g.LEFT||f==g.UP,i=f==g.LEFT||f==g.RIGHT||f==g.UP||f==g.DOWN,j=h?"prev":"next",k,l,m;m=e.focusedCmp&&e.focusedCmp.comp||e.focusedCmp;if(!m&&!c)return;if(i&&d.isWhitelisted(m))return!0;c=c||m.up();if(c){k=m?Ext.Array.indexOf(c.getRefItems(),m):-1,l=Ext.ComponentQuery.query(">:"+j+"Focus("+k+")",c)[0];if(l&&m!==l)return l.focus(),l}},onComponentBlur:function(a,b){var c=this;c.focusedCmp===a&&(c.previousFocusedCmp=a,delete c.focusedCmp),c.focusFrame&&c.focusFrame.hide()},onComponentCreated:function(a,b,c){this.setFocus(c,!0,this.options)},onComponentDestroy:function(a){this.setFocus(a,!1)},onComponentFocus:function(a,b){var c=this,d=c.focusChain;if(!Ext.ComponentQuery.is(a,":focusable")){c.clearComponent(a);if(d[a.id])return;var e=a.up();e&&(d[a.id]=!0,e.focus());return}c.focusChain={},clearTimeout(c.cmpFocusDelay);if(arguments.length!==2){c.cmpFocusDelay=Ext.defer(c.onComponentFocus,90,c,[a,b]);return}if(c.fireEvent("beforecomponentfocus",c,a,c.previousFocusedCmp)===!1){c.clearComponent(a);return}c.focusedCmp=a;if(c.shouldShowFocusFrame(a)){var f="."+c.focusFrameCls+"-",g=c.focusFrame,h=c.focusFrameWidth,i=a.el.getPageBox(),j=i.top,k=i.left,l=i.width,m=i.height,n=g.child(f+"top"),o=g.child(f+"bottom"),p=g.child(f+"left"),q=g.child(f+"right");n.setWidth(l).setLeftTop(k,j),o.setWidth(l).setLeftTop(k,j+m-h),p.setHeight(m-h-h).setLeftTop(k,j+h),q.setHeight(m-h-h).setLeftTop(k+l-h,j+h),g.show()}c.fireEvent("componentfocus",c,a,c.previousFocusedCmp)},onComponentHide:function(a){var b=this,c=Ext.ComponentQuery,d=!1,e,f;b.focusedCmp&&(e=c.query("[id="+b.focusedCmp.id+"]",a)[0],d=b.focusedCmp.id===a.id||e,e&&b.clearComponent(e)),b.clearComponent(a),d&&(f=c.query("^:focusable",a)[0],f&&f.focus())},removeDOM:function(){var a=this;if(a.enabled||a.subscribers.length)return;Ext.destroy(a.focusEl,a.focusFrame),delete a.focusEl,delete a.focusFrame,delete a.focusFrameWidth},removeXTypeFromWhitelist:function(a){var b=this;if(Ext.isArray(a)){Ext.Array.forEach(a,b.removeXTypeFromWhitelist,b);return}Ext.Array.remove(b.whitelist,a)},setFocus:function(a,b,c){var d=this,e,f,g,h=function(a){return!Ext.Array.contains(d.tabIndexWhitelist,a.tagName.toLowerCase())&&a.tabIndex<=0};c=c||{};if(!a.rendered){a.on("afterrender",Ext.pass(d.setFocus,arguments,d),d,{single:!0});return}e=a.getFocusEl(),f=e.dom;if(b&&!d.focusData[a.id]||!b&&d.focusData[a.id])b?(g={focusFrame:c.focusFrame},h(f)&&(g.tabIndex=f.tabIndex,f.tabIndex=-1),e.on({focus:g.focusFn=Ext.bind(d.onComponentFocus,d,[a],0),blur:g.blurFn=Ext.bind(d.onComponentBlur,d,[a],0),scope:d}),a.on({hide:d.onComponentHide,close:d.onComponentHide,beforedestroy:d.onComponentDestroy,scope:d}),d.focusData[a.id]=g):(g=d.focusData[a.id],"tabIndex"in g&&(f.tabIndex=g.tabIndex),e.un("focus",g.focusFn,d),e.un("blur",g.blurFn,d),a.un("hide",d.onComponentHide,d),a.un("close",d.onComponentHide,d),a.un("beforedestroy",d.onComponentDestroy,d),delete d.focusData[a.id])},setFocusAll:function(a,b){var c=this,d=Ext.ComponentManager.all.getArray(),e=d.length,f,g=0;for(;g<e;g++)c.setFocus(d[g],a,b)},setupSubscriberKeys:function(a,b){var c=this,d=a.getFocusEl(),e=b.scope,f={backspace:c.focusLast,enter:c.navigateIn,esc:c.navigateOut,scope:c},g=function(b){return c.focusedCmp===a?c.navigateSiblings(b,c,a):c.navigateSiblings(b)};return Ext.iterate(b,function(b,c){f[b]=function(b){var d=g(b);return Ext.isFunction(c)&&c.call(e||a,b,d)===!0?!0:d}},c),Ext.create("Ext.util.KeyNav",d,f)},shouldShowFocusFrame:function(a){var b=this,c=b.options||{};return!b.focusFrame||!a?!1:c.focusFrame?!0:b.focusData[a.id].focusFrame?!0:!1},subscribe:function(a,b){var c=this,d=Ext.Array,e={},f=c.subscribers,g=function(a){a.isContainer&&!f.containsKey(a.id)?(d.forEach(a.query(">"),g),c.setFocus(a,!0,b),a.on("add",e.onAdd,c)):a.isContainer||c.setFocus(a,!0,b)};if(!a||!a.isContainer)return;if(!a.rendered){a.on("afterrender",Ext.pass(c.subscribe,arguments,c),c,{single:!0});return}c.initDOM(b),e.keyNav=c.setupSubscriberKeys(a,b.keys),e.onAdd=function(a,b,c){g(b)},a.on("beforedestroy",c.unsubscribe,c),g(a),f.add(a.id,e)},unsubscribe:function(a){var b=this,c=Ext.Array,d=b.subscribers,e,f=function(a){a.isContainer&&!d.containsKey(a.id)?(c.forEach(a.query(">"),f),b.setFocus(a,!1),a.un("add",e.onAdd,b)):a.isContainer||b.setFocus(a,!1)};if(!a||!d.containsKey(a.id))return;e=d.get(a.id),e.keyNav.destroy(),a.un("beforedestroy",b.unsubscribe,b),d.removeAtKey(a.id),f(a),b.removeDOM()}}),Ext.define("Ext.toolbar.Toolbar",{extend:"Ext.container.Container",requires:["Ext.toolbar.Fill","Ext.layout.container.HBox","Ext.layout.container.VBox","Ext.FocusManager"],uses:["Ext.toolbar.Separator"],alias:"widget.toolbar",alternateClassName:"Ext.Toolbar",isToolbar:!0,baseCls:Ext.baseCSSPrefix+"toolbar",ariaRole:"toolbar",defaultType:"button",vertical:!1,enableOverflow:!1,menuTriggerCls:Ext.baseCSSPrefix+"toolbar-more-icon",trackMenus:!0,itemCls:Ext.baseCSSPrefix+"toolbar-item",initComponent:function(){var a=this,b;!a.layout&&a.enableOverflow&&(a.layout={overflowHandler:"Menu"});if(a.dock==="right"||a.dock==="left")a.vertical=!0;a.layout=Ext.applyIf(Ext.isString(a.layout)?{type:a.layout}:a.layout||{},{type:a.vertical?"vbox":"hbox",align:a.vertical?"stretchmax":"middle",clearInnerCtOnLayout:!0}),a.vertical&&a.addClsWithUI("vertical"),a.ui==="footer"&&(a.ignoreBorderManagement=!0),a.callParent(),a.addEvents("overflowchange"),b=a.vertical?["up","down"]:["left","right"],Ext.FocusManager.subscribe(a,{keys:b})},getRefItems:function(a){var b=this,c=b.callParent(arguments),d=b.layout,e;return a&&b.enableOverflow&&(e=d.overflowHandler,e&&e.menu&&(c=c.concat(e.menu.getRefItems(a)))),c},lookupComponent:function(a){if(Ext.isString(a)){var b=Ext.toolbar.Toolbar.shortcuts[a];b?a={xtype:b}:a={xtype:"tbtext",text:a},this.applyDefaults(a)}return this.callParent(arguments)},applyDefaults:function(a){if(!Ext.isString(a)){a=this.callParent(arguments);var b=this.internalDefaults;a.events?(Ext.applyIf(a.initialConfig,b),Ext.apply(a,b)):Ext.applyIf(a,b)}return a},trackMenu:function(a,b){if(this.trackMenus&&a.menu){var c=b?"mun":"mon",d=this;d[c](a,"mouseover",d.onButtonOver,d),d[c](a,"menushow",d.onButtonMenuShow,d),d[c](a,"menuhide",d.onButtonMenuHide,d)}},constructButton:function(a){return a.events?a:this.createComponent(a,a.split?"splitbutton":this.defaultType)},onBeforeAdd:function(a){if(a.is("field")||a.is("button")&&this.ui!="footer")a.ui=a.ui+"-toolbar";a instanceof Ext.toolbar.Separator&&a.setUI(this.vertical?"vertical":"horizontal"),this.callParent(arguments)},onAdd:function(a){this.callParent(arguments),this.trackMenu(a),this.disabled&&a.disable()},onRemove:function(a){this.callParent(arguments),this.trackMenu(a,!0)},onButtonOver:function(a){this.activeMenuBtn&&this.activeMenuBtn!=a&&(this.activeMenuBtn.hideMenu(),a.showMenu(),this.activeMenuBtn=a)},onButtonMenuShow:function(a){this.activeMenuBtn=a},onButtonMenuHide:function(a){delete this.activeMenuBtn}},function(){this.shortcuts={"-":"tbseparator"," ":"tbspacer","->":"tbfill"}}),Ext.define("Ext.panel.AbstractPanel",{extend:"Ext.container.Container",requires:["Ext.util.MixedCollection","Ext.Element","Ext.toolbar.Toolbar"],baseCls:Ext.baseCSSPrefix+"panel",isPanel:!0,componentLayout:"dock",defaultDockWeights:{top:1,left:3,right:5,bottom:7},renderTpl:['<div id="{id}-body" class="{baseCls}-body<tpl if="bodyCls"> {bodyCls}</tpl>',' {baseCls}-body-{ui}<tpl if="uiCls">','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl>','</tpl>"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>>',"</div>"],border:!0,initComponent:function(){var a=this;a.addEvents("bodyresize"),a.addChildEls("body"),a.frame&&a.border&&a.bodyBorder===undefined&&(a.bodyBorder=!1),a.frame&&a.border&&(a.bodyBorder===!1||a.bodyBorder===0)&&(a.manageBodyBorders=!0),a.callParent()},initItems:function(){var a=this,b=a.dockedItems;a.callParent(),a.dockedItems=Ext.create("Ext.util.MixedCollection",!1,a.getComponentId),b&&a.addDocked(b)},getDockedComponent:function(a){return Ext.isObject(a)&&(a=a.getItemId()),this.dockedItems.get(a)},getComponent:function(a){var b=this.callParent(arguments);return b===undefined&&!Ext.isNumber(a)&&(b=this.getDockedComponent(a)),b},initBodyStyles:function(){var a=this,b=a.bodyStyle,c=[],d=Ext.Element,e;Ext.isFunction(b)&&(b=b());if(Ext.isString(b))c=b.split(";");else for(e in b)b.hasOwnProperty(e)&&c.push(e+":"+b[e]);return a.bodyPadding!==undefined&&c.push("padding: "+d.unitizeBox(a.bodyPadding===!0?5:a.bodyPadding)),a.frame&&a.bodyBorder&&(Ext.isNumber(a.bodyBorder)||(a.bodyBorder=1),c.push("border-width: "+d.unitizeBox(a.bodyBorder))),delete a.bodyStyle,c.length?c.join(";"):undefined},initBodyCls:function(){var a=this,b="",c=a.bodyCls;return c&&(Ext.each(c,function(a){b+=" "+a}),delete a.bodyCls),b.length>0?b:undefined},initRenderData:function(){return Ext.applyIf(this.callParent(),{bodyStyle:this.initBodyStyles(),bodyCls:this.initBodyCls()})},addDocked:function(a,b){var c=this,d=0,e,f;a=c.prepareItems(a),f=a.length;for(;d<f;d++)e=a[d],e.dock=e.dock||"top",c.border!==!1,b!==undefined?c.dockedItems.insert(b+d,e):c.dockedItems.add(e),e.onAdded(c,d),c.onDockedAdd(e);return c.componentLayout.childrenChanged=!0,c.rendered&&!c.suspendLayout&&c.doComponentLayout(),a},onDockedAdd:Ext.emptyFn,onDockedRemove:Ext.emptyFn,insertDocked:function(a,b){this.addDocked(b,a)},removeDocked:function(a,b){var c=this,d,e;return c.dockedItems.contains(a)?(d=c.componentLayout,e=d&&c.rendered,e&&d.onRemove(a),c.dockedItems.remove(a),a.onRemoved(),c.onDockedRemove(a),b===!0||b!==!1&&c.autoDestroy?a.destroy():e&&d.afterRemove(a),c.componentLayout.childrenChanged=!0,!c.destroying&&!c.suspendLayout&&c.doComponentLayout(),a):a},getDockedItems:function(a){var b=this,c=b.defaultDockWeights,d;return b.dockedItems&&b.dockedItems.items.length?(a?d=Ext.ComponentQuery.query(a,b.dockedItems.items):d=b.dockedItems.items.slice(),Ext.Array.sort(d,function(a,b){var d=a.weight||c[a.dock],e=b.weight||c[b.dock];return Ext.isNumber(d)&&Ext.isNumber(e)?d-e:0}),d):[]},addUIClsToElement:function(a,b){var c=this,d=c.callParent(arguments),e=[Ext.baseCSSPrefix+a,c.baseCls+"-body-"+a,c.baseCls+"-body-"+c.ui+"-"+a],f,g;if(!b&&c.rendered)c.bodyCls?c.body.addCls(c.bodyCls):c.body.addCls(e);else if(c.bodyCls){f=c.bodyCls.split(" ");for(g=0;g<e.length;g++)Ext.Array.contains(f,e[g])||f.push(e[g]);c.bodyCls=f.join(" ")}else c.bodyCls=e.join(" ");return d},removeUIClsFromElement:function(a,b){var c=this,d=c.callParent(arguments),e=[Ext.baseCSSPrefix+a,c.baseCls+"-body-"+a,c.baseCls+"-body-"+c.ui+"-"+a],f,g;if(!b&&c.rendered)c.bodyCls?c.body.removeCls(c.bodyCls):c.body.removeCls(e);else if(c.bodyCls){f=c.bodyCls.split(" ");for(g=0;g<e.length;g++)Ext.Array.remove(f,e[g]);c.bodyCls=f.join(" ")}return d},addUIToElement:function(a){var b=this,c=b.baseCls+"-body-"+b.ui,d;b.callParent(arguments),!a&&b.rendered?b.bodyCls?b.body.addCls(b.bodyCls):b.body.addCls(c):b.bodyCls?(d=b.bodyCls.split(" "),Ext.Array.contains(d,c)||d.push(c),b.bodyCls=d.join(" ")):b.bodyCls=c},removeUIFromElement:function(){var a=this,b=a.baseCls+"-body-"+a.ui,c;a.callParent(arguments),a.rendered?a.bodyCls?a.body.removeCls(a.bodyCls):a.body.removeCls(b):a.bodyCls?(c=a.bodyCls.split(" "),Ext.Array.remove(c,b),a.bodyCls=c.join(" ")):a.bodyCls=b},getTargetEl:function(){return this.body},getRefItems:function(a){var b=this.callParent(arguments),c=this.getDockedItems(a?"*,* *":undefined),d=c.length,e=0,f;for(;e<d;e++){f=c[e];if(f.dock==="right"||f.dock==="bottom")break}return Ext.Array.splice(c,0,e).concat(b).concat(c)},beforeDestroy:function(){var a=this.dockedItems,b;if(a)while(b=a.first())this.removeDocked(b,!0);this.callParent()},setBorder:function(a){var b=this;b.border=a!==undefined?a:!0,b.rendered&&b.doComponentLayout()}}),Ext.define("Ext.panel.Header",{extend:"Ext.container.Container",uses:["Ext.panel.Tool","Ext.draw.Component","Ext.util.CSS"],alias:"widget.header",isHeader:!0,defaultType:"tool",indicateDrag:!1,weight:-1,renderTpl:['<div id="{id}-body" class="{baseCls}-body<tpl if="bodyCls"> {bodyCls}</tpl>','<tpl if="uiCls">','<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl>','</tpl>"','<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>></div>'],initComponent:function(){var a=this,b,c,d,e,f;a.indicateDragCls=a.baseCls+"-draggable",a.title=a.title||"&#160;",a.tools=a.tools||[],a.items=a.items||[],a.orientation=a.orientation||"horizontal",a.dock=a.dock?a.dock:a.orientation=="horizontal"?"top":"left",a.addClsWithUI(a.orientation),a.addClsWithUI(a.dock),a.addChildEls("body"),Ext.isEmpty(a.iconCls)||(a.initIconCmp(),a.items.push(a.iconCmp)),a.orientation=="vertical"?(Ext.isIE6||Ext.isIE7?a.width=this.width||24:Ext.isIEQuirks&&(a.width=this.width||25),a.layout={type:"vbox",align:"center",clearInnerCtOnLayout:!0,bindToOwnerCtContainer:!1},a.textConfig={cls:a.baseCls+"-text",type:"text",text:a.title,rotate:{degrees:90}},f=a.ui,Ext.isArray(f)&&(f=f[0]),b="."+a.baseCls+"-text-"+f,Ext.scopeResetCSS&&(b="."+Ext.baseCSSPrefix+"reset "+b),c=Ext.util.CSS.getRule(b),c&&(d=c.style),d&&Ext.apply(a.textConfig,{"font-family":d.fontFamily,"font-weight":d.fontWeight,"font-size":d.fontSize,fill:d.color}),a.titleCmp=Ext.create("Ext.draw.Component",{ariaRole:"heading",focusable:!1,viewBox:!1,flex:1,autoSize:!0,margins:"5 0 0 0",items:[a.textConfig],renderSelectors:{textEl:"."+a.baseCls+"-text"}})):(a.layout={type:"hbox",align:"middle",clearInnerCtOnLayout:!0,bindToOwnerCtContainer:!1},a.titleCmp=Ext.create("Ext.Component",{xtype:"component",ariaRole:"heading",focusable:!1,flex:1,cls:a.baseCls+"-text-container",renderTpl:['<span id="{id}-textEl" class="{cls}-text {cls}-text-{ui}">{title}</span>'],renderData:{title:a.title,cls:a.baseCls,ui:a.ui},childEls:["textEl"]})),a.items.push(a.titleCmp),a.items=a.items.concat(a.tools),this.callParent()},initIconCmp:function(){this.iconCmp=Ext.create("Ext.Component",{focusable:!1,renderTpl:['<img id="{id}-iconEl" alt="" src="{blank}" class="{cls}-icon {iconCls}"/>'],renderData:{blank:Ext.BLANK_IMAGE_URL,cls:this.baseCls,iconCls:this.iconCls,orientation:this.orientation},childEls:["iconEl"],iconCls:this.iconCls})},afterRender:function(){var a=this;a.el.unselectable(),a.indicateDrag&&a.el.addCls(a.indicateDragCls),a.mon(a.el,{click:a.onClick,scope:a}),a.callParent()},afterLayout:function(){var a=this;a.callParent(arguments),Ext.isIE7&&a.el.repaint()},addUIClsToElement:function(a,b){var c=this,d=c.callParent(arguments),e=[c.baseCls+"-body-"+a,c.baseCls+"-body-"+c.ui+"-"+a],f,g;if(!b&&c.rendered)c.bodyCls?c.body.addCls(c.bodyCls):c.body.addCls(e);else if(c.bodyCls){f=c.bodyCls.split(" ");for(g=0;g<e.length;g++)Ext.Array.contains(f,e[g])||f.push(e[g]);c.bodyCls=f.join(" ")}else c.bodyCls=e.join(" ");return d},removeUIClsFromElement:function(a,b){var c=this,d=c.callParent(arguments),e=[c.baseCls+"-body-"+a,c.baseCls+"-body-"+c.ui+"-"+a],f,g;if(!b&&c.rendered)c.bodyCls?c.body.removeCls(c.bodyCls):c.body.removeCls(e);else if(c.bodyCls){f=c.bodyCls.split(" ");for(g=0;g<e.length;g++)Ext.Array.remove(f,e[g]);c.bodyCls=f.join(" ")}return d},addUIToElement:function(a){var b=this,c,d;b.callParent(arguments),d=b.baseCls+"-body-"+b.ui,!a&&b.rendered?b.bodyCls?b.body.addCls(b.bodyCls):b.body.addCls(d):b.bodyCls?(c=b.bodyCls.split(" "),Ext.Array.contains(c,d)||c.push(d),b.bodyCls=c.join(" ")):b.bodyCls=d,!a&&b.titleCmp&&b.titleCmp.rendered&&b.titleCmp.textEl&&b.titleCmp.textEl.addCls(b.baseCls+"-text-"+b.ui)},removeUIFromElement:function(){var a=this,b,c;a.callParent(arguments),c=a.baseCls+"-body-"+a.ui,a.rendered?a.bodyCls?a.body.removeCls(a.bodyCls):a.body.removeCls(c):a.bodyCls?(b=a.bodyCls.split(" "),Ext.Array.remove(b,c),a.bodyCls=b.join(" ")):a.bodyCls=c,a.titleCmp&&a.titleCmp.rendered&&a.titleCmp.textEl&&a.titleCmp.textEl.removeCls(a.baseCls+"-text-"+a.ui)},onClick:function(a){a.getTarget(Ext.baseCSSPrefix+"tool")||this.fireEvent("click",a)},getTargetEl:function(){return this.body||this.frameBody||this.el},setTitle:function(a){var b=this;if(b.rendered)if(b.titleCmp.rendered)if(b.titleCmp.surface){b.title=a||"";var c=b.titleCmp.surface.items.items[0],d=b.titleCmp.surface;d.remove(c),b.textConfig.type="text",b.textConfig.text=a,c=d.add(b.textConfig),c.setAttributes({rotate:{degrees:90}},!0),b.titleCmp.autoSizeSurface()}else b.title=a||"&#160;",b.titleCmp.textEl.update(b.title);else b.titleCmp.on({render:function(){b.setTitle(a)},single:!0});else b.on({render:function(){b.layout.layout(),b.setTitle(a)},single:!0})},setIconCls:function(a){var b=this,c=!a||!a.length,d=b.iconCmp,e;b.iconCls=a,!b.iconCmp&&!c?(b.initIconCmp(),b.insert(0,b.iconCmp)):d&&(c?b.iconCmp.destroy():(e=d.iconEl,e.removeCls(d.iconCls),e.addCls(a),d.iconCls=a))},addTool:function(a){this.tools.push(this.add(a))},onAdd:function(a,b){this.callParent([arguments]),a instanceof Ext.panel.Tool&&(a.bindTo(this.ownerCt),this.tools[a.type]=a)}}),Ext.define("Ext.fx.target.Element",{extend:"Ext.fx.target.Target",type:"element",getElVal:function(a,b,c){return c==undefined&&(b==="x"?c=a.getX():b==="y"?c=a.getY():b==="scrollTop"?c=a.getScroll().top:b==="scrollLeft"?c=a.getScroll().left:b==="height"?c=a.getHeight():b==="width"?c=a.getWidth():c=a.getStyle(b)),c},getAttr:function(a,b){var c=this.target;return[[c,this.getElVal(c,a,b)]]},setAttr:function(a){var b=this.target,c=a.length,d,e,f,g,h,i,j,k;for(g=0;g<c;g++){d=a[g].attrs;for(e in d)if(d.hasOwnProperty(e)){i=d[e].length;for(h=0;h<i;h++)f=d[e][h],j=f[0],k=f[1],e==="x"?j.setX(k):e==="y"?j.setY(k):e==="scrollTop"?j.scrollTo("top",k):e==="scrollLeft"?j.scrollTo("left",k):j.setStyle(e,k)}}}}),Ext.define("Ext.fx.target.CompositeElement",{extend:"Ext.fx.target.Element",isComposite:!0,constructor:function(a){a.id=a.id||Ext.id(null,"ext-composite-"),this.callParent([a])},getAttr:function(a,b){var c=[],d=this.target;return d.each(function(d){c.push([d,this.getElVal(d,a,b)])},this),c}}),Ext.define("Ext.fx.Manager",{singleton:!0,requires:["Ext.util.MixedCollection","Ext.fx.target.Element","Ext.fx.target.CompositeElement","Ext.fx.target.Sprite","Ext.fx.target.CompositeSprite","Ext.fx.target.Component"],mixins:{queue:"Ext.fx.Queue"},constructor:function(){this.items=Ext.create("Ext.util.MixedCollection"),this.mixins.queue.constructor.call(this)},interval:16,forceJS:!0,createTarget:function(a){var b=this,c=!b.forceJS&&Ext.supports.Transitions,d;b.useCSS3=c,Ext.isString(a)&&(a=Ext.get(a));if(a&&a.tagName)return a=Ext.get(a),d=Ext.create("Ext.fx.target.Element"+(c?"CSS":""),a),b.targets.add(d),d;if(Ext.isObject(a)){if(a.dom)d=Ext.create("Ext.fx.target.Element"+(c?"CSS":""),a);else if(a.isComposite)d=Ext.create("Ext.fx.target.CompositeElement"+(c?"CSS":""),a);else if(a.isSprite)d=Ext.create("Ext.fx.target.Sprite",a);else if(a.isCompositeSprite)d=Ext.create("Ext.fx.target.CompositeSprite",a);else{if(!a.isComponent)return a.isAnimTarget?a:null;d=Ext.create("Ext.fx.target.Component",a)}return b.targets.add(d),d}return null},addAnim:function(a){var b=this.items,c=this.task;b.add(a),!c&&b.length&&(c=this.task={run:this.runner,interval:this.interval,scope:this},Ext.TaskManager.start(c))},removeAnim:function(a){var b=this.items,c=this.task;b.remove(a),c&&!b.length&&(Ext.TaskManager.stop(c),delete this.task)},startingFilter:function(a){return a.paused===!1&&a.running===!1&&a.iterations>0},runningFilter:function(a){return a.paused===!1&&a.running===!0&&a.isAnimator!==!0},runner:function(){var a=this,b=a.items;a.targetData={},a.targetArr={},a.timestamp=new Date,b.filterBy(a.startingFilter).each(a.startAnim,a),b.filterBy(a.runningFilter).each(a.runAnim,a),a.applyPendingAttrs()},startAnim:function(a){a.start(this.timestamp)},runAnim:function(a){if(!a)return;var b=this,c=a.target.getId(),d=b.useCSS3&&a.target.type=="element",e=b.timestamp-a.startTime,f,g;this.collectTargetData(a,e,d),d?(a.target.setAttr(b.targetData[c],!0),b.targetData[c]=[],b.collectTargetData(a,a.duration,d),a.paused=!0,f=a.target.target,a.target.isComposite&&(f=a.target.target.last()),g={},g[Ext.supports.CSS3TransitionEnd]=a.lastFrame,g.scope=a,g.single=!0,f.on(g)):e>=a.duration&&(b.applyPendingAttrs(!0),delete b.targetData[c],delete b.targetArr[c],a.lastFrame())},collectTargetData:function(a,b,c){var d=a.target.getId(),e=this.targetData[d],f;e||(e=this.targetData[d]=[],this.targetArr[d]=a.target),f={duration:a.duration,easing:c&&a.reverse?a.easingFn.reverse().toCSS3():a.easing,attrs:{}},Ext.apply(f.attrs,a.runAnim(b)),e.push(f)},applyPendingAttrs:function(a){var b=this.targetData,c=this.targetArr,d;for(d in b)b.hasOwnProperty(d)&&c[d].setAttr(b[d],!1,a)}}),Ext.define("Ext.fx.Animator",{mixins:{observable:"Ext.util.Observable"},requires:["Ext.fx.Manager"],isAnimator:!0,duration:250,delay:0,delayStart:0,dynamic:!1,easing:"ease",running:!1,paused:!1,damper:1,iterations:1,currentIteration:0,keyframeStep:0,animKeyFramesRE:/^(from|to|\d+%?)$/,constructor:function(a){var b=this;a=Ext.apply(b,a||{}),b.config=a,b.id=Ext.id(null,"ext-animator-"),b.addEvents("beforeanimate","keyframe","afteranimate"),b.mixins.observable.constructor.call(b,a),b.timeline=[],b.createTimeline(b.keyframes),b.target&&(b.applyAnimator(b.target),Ext.fx.Manager.addAnim(b))},sorter:function(a,b){return a.pct-b.pct},createTimeline:function(a){var b=this,c=[],d=b.to||{},e=b.duration,f,g,h,i,j,k,l,m;for(j in a)a.hasOwnProperty(j)&&b.animKeyFramesRE.test(j)&&(m={attrs:Ext.apply(a[j],d)},j=="from"?j=0:j=="to"&&(j=100),m.pct=parseInt(j,10),c.push(m));Ext.Array.sort(c,b.sorter),i=c.length;for(h=0;h<i;h++)f=c[h-1]?e*(c[h-1].pct/100):0,g=e*(c[h].pct/100),b.timeline.push({duration:g-f,attrs:c[h].attrs})},applyAnimator:function(a){var b=this,c=[],d=b.timeline,e=b.reverse,f=d.length,g,h,i,j,k,l,m;if(b.fireEvent("beforeanimate",b)!==!1){for(m=0;m<f;m++)g=d[m],k=g.attrs,h=k.easing||b.easing,i=k.damper||b.damper,delete k.easing,delete k.damper,g=Ext.create("Ext.fx.Anim",{target:a,easing:h,damper:i,duration:g.duration,paused:!0,to:k}),c.push(g);b.animations=c,b.target=g.target;for(m=0;m<f-1;m++)g=c[m],g.nextAnim=c[m+1],g.on("afteranimate",function(){this.nextAnim.paused=!1}),g.on("afteranimate",function(){this.fireEvent("keyframe",this,++this.keyframeStep)},b);c[f-1].on("afteranimate",function(){this.lastFrame()},b)}},start:function(a){var b=this,c=b.delay,d=b.delayStart,e;if(c){if(!d){b.delayStart=a;return}e=a-d;if(e<c)return;a=new Date(d.getTime()+c)}b.fireEvent("beforeanimate",b)!==!1&&(b.startTime=a,b.running=!0,b.animations[b.keyframeStep].paused=!1)},lastFrame:function(){var a=this,b=a.iterations,c=a.currentIteration;c++,c<b?(a.startTime=new Date,a.currentIteration=c,a.keyframeStep=0,a.applyAnimator(a.target),a.animations[a.keyframeStep].paused=!1):(a.currentIteration=0,a.end())},end:function(){var a=this;a.fireEvent("afteranimate",a,a.startTime,new Date-a.startTime)}}),Ext.ns("Ext.fx"),Ext.require("Ext.fx.CubicBezier",function(){var a=Math,b=a.PI,c=a.pow,d=a.sin,e=a.sqrt,f=a.abs,g=1.70158;Ext.fx.Easing={},Ext.apply(Ext.fx.Easing,{linear:function(a){return a},ease:function(a){var b=.07813-a/2,d=-0.25,g=e(.0066+b*b),h=g-b,i=c(f(h),1/3)*(h<0?-1:1),j=-g-b,k=c(f(j),1/3)*(j<0?-1:1),l=i+k+.25;return c(1-l,2)*3*l*.1+(1-l)*3*l*l+l*l*l},easeIn:function(a){return c(a,1.7)},easeOut:function(a){return c(a,.48)},easeInOut:function(a){var b=.48-a/1.04,d=e(.1734+b*b),g=d-b,h=c(f(g),1/3)*(g<0?-1:1),i=-d-b,j=c(f(i),1/3)*(i<0?-1:1),k=h+j+.5;return(1-k)*3*k*k+k*k*k},backIn:function(a){return a*a*((g+1)*a-g)},backOut:function(a){return a-=1,a*a*((g+1)*a+g)+1},elasticIn:function(a){if(a===0||a===1)return a;var e=.3,f=e/4;return c(2,-10*a)*d((a-f)*2*b/e)+1},elasticOut:function(a){return 1-Ext.fx.Easing.elasticIn(1-a)},bounceIn:function(a){return 1-Ext.fx.Easing.bounceOut(1-a)},bounceOut:function(a){var b=7.5625,c=2.75,d;return a<1/c?d=b*a*a:a<2/c?(a-=1.5/c,d=b*a*a+.75):a<2.5/c?(a-=2.25/c,d=b*a*a+.9375):(a-=2.625/c,d=b*a*a+.984375),d}}),Ext.apply(Ext.fx.Easing,{"back-in":Ext.fx.Easing.backIn,"back-out":Ext.fx.Easing.backOut,"ease-in":Ext.fx.Easing.easeIn,"ease-out":Ext.fx.Easing.easeOut,"elastic-in":Ext.fx.Easing.elasticIn,"elastic-out":Ext.fx.Easing.elasticIn,"bounce-in":Ext.fx.Easing.bounceIn,"bounce-out":Ext.fx.Easing.bounceOut,"ease-in-out":Ext.fx.Easing.easeInOut})}),Ext.define("Ext.draw.Draw",{singleton:!0,requires:["Ext.draw.Color"],pathToStringRE:/,?([achlmqrstvxz]),?/gi,pathCommandRE:/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,pathValuesRE:/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,stopsRE:/^(\d+%?)$/,radian:Math.PI/180,availableAnimAttrs:{along:"along",blur:null,"clip-rect":"csv",cx:null,cy:null,fill:"color","fill-opacity":null,"font-size":null,height:null,opacity:null,path:"path",r:null,rotation:"csv",rx:null,ry:null,scale:"csv",stroke:"color","stroke-opacity":null,"stroke-width":null,translation:"csv",width:null,x:null,y:null},is:function(a,b){return b=String(b).toLowerCase(),b=="object"&&a===Object(a)||b=="undefined"&&typeof a==b||b=="null"&&a===null||b=="array"&&Array.isArray&&Array.isArray(a)||Object.prototype.toString.call(a).toLowerCase().slice(8,-1)==b},ellipsePath:function(a){var b=a.attr;return Ext.String.format("M{0},{1}A{2},{3},0,1,1,{0},{4}A{2},{3},0,1,1,{0},{1}z",b.x,b.y-b.ry,b.rx,b.ry,b.y+b.ry)},rectPath:function(a){var b=a.attr;return b.radius?Ext.String.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",b.x+b.radius,b.y,b.width-b.radius*2,b.radius,-b.radius,b.height-b.radius*2,b.radius*2-b.width,b.radius*2-b.height):Ext.String.format("M{0},{1}l{2},0,0,{3},{4},0z",b.x,b.y,b.width,b.height,-b.width)},path2string:function(){return this.join(",").replace(Ext.draw.Draw.pathToStringRE,"$1")},pathToString:function(a){return a.join(",").replace(Ext.draw.Draw.pathToStringRE,"$1")},parsePathString:function(a){if(!a)return null;var b={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},c=[],d=this;return d.is(a,"array")&&d.is(a[0],"array")&&(c=d.pathClone(a)),c.length||String(a).replace(d.pathCommandRE,function(a,e,f){var g=[],h=e.toLowerCase();f.replace(d.pathValuesRE,function(a,b){b&&g.push(+b)}),h=="m"&&g.length>2&&(c.push([e].concat(Ext.Array.splice(g,0,2))),h="l",e=e=="m"?"l":"L");while(g.length>=b[h]){c.push([e].concat(Ext.Array.splice(g,0,b[h])));if(!b[h])break}}),c.toString=d.path2string,c},mapPath:function(a,b){if(!b)return a;var c,d,e,f,g,h,i;a=this.path2curve(a);for(e=0,f=a.length;e<f;e++){i=a[e];for(g=1,h=i.length;g<h-1;g+=2)c=b.x(i[g],i[g+1]),d=b.y(i[g],i[g+1]),i[g]=c,i[g+1]=d}return a},pathClone:function(a){var b=[],c,d,e,f;if(!this.is(a,"array")||!this.is(a&&a[0],"array"))a=this.parsePathString(a);for(e=0,f=a.length;e<f;e++){b[e]=[];for(c=0,d=a[e].length;c<d;c++)b[e][c]=a[e][c]}return b.toString=this.path2string,b},pathToAbsolute:function(a){if(!this.is(a,"array")||!this.is(a&&a[0],"array"))a=this.parsePathString(a);var b=[],c=0,d=0,e=0,f=0,g=0,h=a.length,i,j,k,l;h&&a[0][0]=="M"&&(c=+a[0][1],d=+a[0][2],e=c,f=d,g++,b[0]=["M",c,d]);for(;g<h;g++){i=b[g]=[],j=a[g];if(j[0]!=j[0].toUpperCase()){i[0]=j[0].toUpperCase();switch(i[0]){case"A":i[1]=j[1],i[2]=j[2],i[3]=j[3],i[4]=j[4],i[5]=j[5],i[6]=+(j[6]+c),i[7]=+(j[7]+d);break;case"V":i[1]=+j[1]+d;break;case"H":i[1]=+j[1]+c;break;case"M":e=+j[1]+c,f=+j[2]+d;default:k=1,l=j.length;for(;k<l;k++)i[k]=+j[k]+(k%2?c:d)}}else{k=0,l=j.length;for(;k<l;k++)b[g][k]=j[k]}switch(i[0]){case"Z":c=e,d=f;break;case"H":c=i[1];break;case"V":d=i[1];break;case"M":j=b[g],l=j.length,e=j[l-2],f=j[l-1];default:j=b[g],l=j.length,c=j[l-2],d=j[l-1]}}return b.toString=this.path2string,b},pathToRelative:function(a){if(!this.is(a,"array")||!this.is(a&&a[0],"array"))a=this.parsePathString(a);var b=[],c=0,d=0,e=0,f=0,g=0;a[0][0]=="M"&&(c=a[0][1],d=a[0][2],e=c,f=d,g++,b.push(["M",c,d]));for(var h=g,i=a.length;h<i;h++){var j=b[h]=[],k=a[h];if(k[0]!=k[0].toLowerCase()){j[0]=k[0].toLowerCase();switch(j[0]){case"a":j[1]=k[1],j[2]=k[2],j[3]=k[3],j[4]=k[4],j[5]=k[5],j[6]=+(k[6]-c).toFixed(3),j[7]=+(k[7]-d).toFixed(3);break;case"v":j[1]=+(k[1]-d).toFixed(3);break;case"m":e=k[1],f=k[2];default:for(var l=1,m=k.length;l<m;l++)j[l]=+(k[l]-(l%2?c:d)).toFixed(3)}}else{j=b[h]=[],k[0]=="m"&&(e=k[1]+c,f=k[2]+d);for(var n=0,o=k.length;n<o;n++)b[h][n]=k[n]}var p=b[h].length;switch(b[h][0]){case"z":c=e,d=f;break;case"h":c+=+b[h][p-1];break;case"v":d+=+b[h][p-1];break;default:c+=+b[h][p-2],d+=+b[h][p-1]}}return b.toString=this.path2string,b},path2curve:function(a){var b=this,c=b.pathToAbsolute(a),d=c.length,e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},f,g,h,i;for(f=0;f<d;f++){c[f]=b.command2curve(c[f],e);if(c[f].length>7){c[f].shift(),i=c[f];while(i.length)Ext.Array.splice(c,f++,0,["C"].concat(Ext.Array.splice(i,0,6)));Ext.Array.erase(c,f,1),d=c.length}g=c[f],h=g.length,e.x=g[h-2],e.y=g[h-1],e.bx=parseFloat(g[h-4])||e.x,e.by=parseFloat(g[h-3])||e.y}return c},interpolatePaths:function(a,b){var c=this,d=c.pathToAbsolute(a),e=c.pathToAbsolute(b),f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},g={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h=function(a,b){if(a[b].length>7){a[b].shift();var c=a[b];while(c.length)Ext.Array.splice(a,b++,0,["C"].concat(Ext.Array.splice(c,0,6)));Ext.Array.erase(a,b,1),k=Math.max(d.length,e.length||0)}},i=function(a,b,c,f,g){a&&b&&a[g][0]=="M"&&b[g][0]!="M"&&(Ext.Array.splice(b,g,0,["M",f.x,f.y]),c.bx=0,c.by=0,c.x=a[g][1],c.y=a[g][2],k=Math.max(d.length,e.length||0))};for(var j=0,k=Math.max(d.length,e.length||0);j<k;j++){d[j]=c.command2curve(d[j],f),h(d,j),e[j]=c.command2curve(e[j],g),h(e,j),i(d,e,f,g,j),i(e,d,g,f,j);var l=d[j],m=e[j],n=l.length,o=m.length;f.x=l[n-2],f.y=l[n-1],f.bx=parseFloat(l[n-4])||f.x,f.by=parseFloat(l[n-3])||f.y,g.bx=parseFloat(m[o-4])||g.x,g.by=parseFloat(m[o-3])||g.y,g.x=m[o-2],g.y=m[o-1]}return[d,e]},command2curve:function(a,b){var c=this;if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];a[0]!="T"&&a[0]!="Q"&&(b.qx=b.qy=null);switch(a[0]){case"M":b.X=a[1],b.Y=a[2];break;case"A":a=["C"].concat(c.arc2curve.apply(c,[b.x,b.y].concat(a.slice(1))));break;case"S":a=["C",b.x+(b.x-(b.bx||b.x)),b.y+(b.y-(b.by||b.y))].concat(a.slice(1));break;case"T":b.qx=b.x+(b.x-(b.qx||b.x)),b.qy=b.y+(b.y-(b.qy||b.y)),a=["C"].concat(c.quadratic2curve(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case"Q":b.qx=a[1],b.qy=a[2],a=["C"].concat(c.quadratic2curve(b.x,b.y,a[1],a[2],a[3],a[4]));break;case"L":a=["C"].concat(b.x,b.y,a[1],a[2],a[1],a[2]);break;case"H":a=["C"].concat(b.x,b.y,a[1],b.y,a[1],b.y);break;case"V":a=["C"].concat(b.x,b.y,b.x,a[1],b.x,a[1]);break;case"Z":a=["C"].concat(b.x,b.y,b.X,b.Y,b.X,b.Y)}return a},quadratic2curve:function(a,b,c,d,e,f){var g=1/3,h=2/3;return[g*a+h*c,g*b+h*d,g*e+h*c,g*f+h*d,e,f]},rotate:function(a,b,c){var d=Math.cos(c),e=Math.sin(c),f=a*d-b*e,g=a*e+b*d;return{x:f,y:g}},arc2curve:function(a,b,c,d,e,f,g,h,i,j){var k=this,l=Math.PI,m=k.radian,n=l*120/180,o=m*(+e||0),p=[],q=Math,r=q.cos,s=q.sin,t=q.sqrt,u=q.abs,v=q.asin,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$;j?(H=j[0],I=j[1],F=j[2],G=j[3]):(w=k.rotate(a,b,-o),a=w.x,b=w.y,w=k.rotate(h,i,-o),h=w.x,i=w.y,x=r(m*e),y=s(m*e),z=(a-h)/2,A=(b-i)/2,B=z*z/(c*c)+A*A/(d*d),B>1&&(B=t(B),c=B*c,d=B*d),C=c*c,D=d*d,E=(f==g?-1:1)*t(u((C*D-C*A*A-D*z*z)/(C*A*A+D*z*z))),F=E*c*A/d+(a+h)/2,G=E*-d*z/c+(b+i)/2,H=v(((b-G)/d).toFixed(7)),I=v(((i-G)/d).toFixed(7)),H=a<F?l-H:H,I=h<F?l-I:I,H<0&&(H=l*2+H),I<0&&(I=l*2+I),g&&H>I&&(H-=l*2),!g&&I>H&&(I-=l*2)),J=I-H,u(J)>n&&(Y=I,Z=h,$=i,I=H+n*(g&&I>H?1:-1),h=F+c*r(I),i=G+d*s(I),p=k.arc2curve(h,i,c,d,e,0,g,Z,$,[I,Y,F,G])),J=I-H,K=r(H),L=s(H),M=r(I),N=s(I),O=q.tan(J/4),P=4/3*c*O,Q=4/3*d*O,R=[a,b],S=[a+P*L,b-Q*K],T=[h+P*N,i-Q*M],U=[h,i],S[0]=2*R[0]-S[0],S[1]=2*R[1]-S[1];if(j)return[S,T,U].concat(p);p=[S,T,U].concat(p).join().split(","),V=[],X=p.length;for(W=0;W<X;W++)V[W]=W%2?k.rotate(p[W-1],p[W],o).y:k.rotate(p[W],p[W+1],o).x;return V},rotateAndTranslatePath:function(a){var b=a.rotation.degrees,c=a.rotation.x,d=a.rotation.y,e=a.translation.x,f=a.translation.y,g,h,i,j,k,l=[];if(!b&&!e&&!f)return this.pathToAbsolute(a.attr.path);e=e||0,f=f||0,g=this.pathToAbsolute(a.attr.path);for(h=g.length;h--;){i=l[h]=g[h].slice();if(i[0]=="A")j=this.rotatePoint(i[6],i[7],b,c,d),i[6]=j.x+e,i[7]=j.y+f;else{k=1;while(i[k+1]!=null)j=this.rotatePoint(i[k],i[k+1],b,c,d),i[k]=j.x+e,i[k+1]=j.y+f,k+=2}}return l},rotatePoint:function(a,b,c,d,e){if(!c)return{x:a,y:b};d=d||0,e=e||0,a-=d,b-=e,c*=this.radian;var f=Math.cos(c),g=Math.sin(c);return{x:a*f-b*g+d,y:a*g+b*f+e}},pathDimensions:function(a){if(!a||!(a+""))return{x:0,y:0,width:0,height:0};a=this.path2curve(a);var b=0,c=0,d=[],e=[],f=0,g=a.length,h,i,j,k;for(;f<g;f++)h=a[f],h[0]=="M"?(b=h[1],c=h[2],d.push(b),e.push(c)):(k=this.curveDim(b,c,h[1],h[2],h[3],h[4],h[5],h[6]),d=d.concat(k.min.x,k.max.x),e=e.concat(k.min.y,k.max.y),b=h[5],c=h[6]);return i=Math.min.apply(0,d),j=Math.min.apply(0,e),{x:i,y:j,path:a,width:Math.max.apply(0,d)-i,height:Math.max.apply(0,e)-j}},intersectInside:function(a,b,c){return(c[0]-b[0])*(a[1]-b[1])>(c[1]-b[1])*(a[0]-b[0])},intersectIntersection:function(a,b,c,d){var e=[],f=c[0]-d[0],g=c[1]-d[1],h=a[0]-b[0],i=a[1]-b[1],j=c[0]*d[1]-c[1]*d[0],k=a[0]*b[1]-a[1]*b[0],l=1/(f*i-g*h);return e[0]=(j*h-k*f)*l,e[1]=(j*i-k*g)*l,e},intersect:function(a,b){var c=this,d=0,e=b.length,f=b[e-1],g=a,h,i,j,k,l,m,n;for(;d<e;++d){h=b[d],m=g,g=[],i=m[m.length-1],n=0,l=m.length;for(;n<l;n++)j=m[n],c.intersectInside(j,f,h)?(c.intersectInside(i,f,h)||g.push(c.intersectIntersection(i,j,f,h)),g.push(j)):c.intersectInside(i,f,h)&&g.push(c.intersectIntersection(i,j,f,h)),i=j;f=h}return g},curveDim:function(a,b,c,d,e,f,g,h){var i=e-2*c+a-(g-2*e+c),j=2*(c-a)-2*(e-c),k=a-c,l=(-j+Math.sqrt(j*j-4*i*k))/2/i,m=(-j-Math.sqrt(j*j-4*i*k))/2/i,n=[b,h],o=[a,g],p;return Math.abs(l)>1e12&&(l=.5),Math.abs(m)>1e12&&(m=.5),l>0&&l<1&&(p=this.findDotAtSegment(a,b,c,d,e,f,g,h,l),o.push(p.x),n.push(p.y)),m>0&&m<1&&(p=this.findDotAtSegment(a,b,c,d,e,f,g,h,m),o.push(p.x),n.push(p.y)),i=f-2*d+b-(h-2*f+d),j=2*(d-b)-2*(f-d),k=b-d,l=(-j+Math.sqrt(j*j-4*i*k))/2/i,m=(-j-Math.sqrt(j*j-4*i*k))/2/i,Math.abs(l)>1e12&&(l=.5),Math.abs(m)>1e12&&(m=.5),l>0&&l<1&&(p=this.findDotAtSegment(a,b,c,d,e,f,g,h,l),o.push(p.x),n.push(p.y)),m>0&&m<1&&(p=this.findDotAtSegment(a,b,c,d,e,f,g,h,m),o.push(p.x),n.push(p.y)),{min:{x:Math.min.apply(0,o),y:Math.min.apply(0,n)},max:{x:Math.max.apply(0,o),y:Math.max.apply(0,n)}}},getAnchors:function(a,b,c,d,e,f,g){g=g||4;var h=Math,i=h.PI,j=i/2,k=h.abs,l=h.sin,m=h.cos,n=h.atan,o,p,q,r,s,t,u,v,w;o=(c-a)/g,p=(e-c)/g,d>=b&&d>=f||d<=b&&d<=f?q=r=j:(q=n((c-a)/k(d-b)),b<d&&(q=i-q),r=n((e-c)/k(d-f)),f<d&&(r=i-r)),w=j-(q+r)%(i*2)/2,w>j&&(w-=i),q+=w,r+=w,s=c-o*l(q),t=d+o*m(q),u=c+p*l(r),v=d+p*m(r);if(d>b&&t<b||d<b&&t>b)s+=k(b-t)*(s-c)/(t-d),t=b;if(d>f&&v<f||d<f&&v>f)u-=k(f-v)*(u-c)/(v-d),v=f;return{x1:s,y1:t,x2:u,y2:v}},smooth:function(a,b){var c=this.path2curve(a),d=[c[0]],e=c[0][1],f=c[0][2],g,h,i=1,j=c.length,k=1,l=e,m=f,n=0,o=0;for(;i<j;i++){var p=c[i],q=p.length,r=c[i-1],s=r.length,t=c[i+1],u=t&&t.length;if(p[0]=="M"){l=p[1],m=p[2],g=i+1;while(c[g][0]!="C")g++;n=c[g][5],o=c[g][6],d.push(["M",l,m]),k=d.length,e=l,f=m;continue}if(p[q-2]!=l||p[q-1]!=m||!!t&&t[0]!="M")!t||t[0]=="M"?h={x1:p[q-2],y1:p[q-1]}:h=this.getAnchors(r[s-2],r[s-1],p[q-2],p[q-1],t[u-2],t[u-1],b);else{var v=d[k].length;h=this.getAnchors(r[s-2],r[s-1],l,m,d[k][v-2],d[k][v-1],b),d[k][1]=h.x2,d[k][2]=h.y2}d.push(["C",e,f,h.x1,h.y1,p[q-2],p[q-1]]),e=h.x2,f=h.y2}return d},findDotAtSegment:function(a,b,c,d,e,f,g,h,i){var j=1-i;return{x:Math.pow(j,3)*a+Math.pow(j,2)*3*i*c+j*3*i*i*e+Math.pow(i,3)*g,y:Math.pow(j,3)*b+Math.pow(j,2)*3*i*d+j*3*i*i*f+Math.pow(i,3)*h}},snapEnds:function(a,b,c){if(Ext.isDate(a))return this.snapEndsByDate(a,b,c);var d=(b-a)/c,e=Math.floor(Math.log(d)/Math.LN10)+1,f=Math.pow(10,e),g,h=Math.round(d%f*Math.pow(10,2-e)),i=[[0,15],[20,4],[30,2],[40,4],[50,9],[60,4],[70,2],[80,4],[100,15]],j=0,k,l,m,n,o=1e9,p=i.length;g=a=Math.floor(a/f)*f;for(m=0;m<p;m++)k=i[m][0],l=k-h<0?1e6:(k-h)/i[m][1],l<o&&(n=k,o=l);d=Math.floor(d*Math.pow(10,-e))*Math.pow(10,e)+n*Math.pow(10,e-2);while(g<b)g+=d,j++;return b=+g.toFixed(10),{from:a,to:b,power:e,step:d,steps:j}},snapEndsByDate:function(a,b,c,d){var e=!1,f=[[Ext.Date.MILLI,[1,2,3,5,10,20,30,50,100,200,300,500]],[Ext.Date.SECOND,[1,2,3,5,10,15,30]],[Ext.Date.MINUTE,[1,2,3,5,10,20,30]],[Ext.Date.HOUR,[1,2,3,4,6,12]],[Ext.Date.DAY,[1,2,3,7,14]],[Ext.Date.MONTH,[1,2,3,4,6]]],g,h;return Ext.each(f,function(d,f){for(g=0;g<d[1].length;g++)if(b<Ext.Date.add(a,d[0],d[1][g]*c))return e=[d[0],d[1][g]],!1}),e||(h=this.snapEnds(a.getFullYear(),b.getFullYear()+1,c,d),e=[Date.YEAR,Math.round(h.step)]),this.snapEndsByDateAndStep(a,b,e,d)},snapEndsByDateAndStep:function(a,b,c,d){var e=[a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()],f=0,g,h;if(d)g=a;else switch(c[0]){case Ext.Date.MILLI:g=new Date(e[0],e[1],e[2],e[3],e[4],e[5],Math.floor(e[6]/c[1])*c[1]);break;case Ext.Date.SECOND:g=new Date(e[0],e[1],e[2],e[3],e[4],Math.floor(e[5]/c[1])*c[1],0);break;case Ext.Date.MINUTE:g=new Date(e[0],e[1],e[2],e[3],Math.floor(e[4]/c[1])*c[1],0,0);break;case Ext.Date.HOUR:g=new Date(e[0],e[1],e[2],Math.floor(e[3]/c[1])*c[1],0,0,0);break;case Ext.Date.DAY:g=new Date(e[0],e[1],Math.floor(e[2]-1/c[1])*c[1]+1,0,0,0,0);break;case Ext.Date.MONTH:g=new Date(e[0],Math.floor(e[1]/c[1])*c[1],1,0,0,0,0);break;default:g=new Date(Math.floor(e[0]/c[1])*c[1],0,1,0,0,0,0)}h=g;while(h<b)h=Ext.Date.add(h,c[0],c[1]),f++;return d&&(h=b),{from:+g,to:+h,step:(h-g)/f,steps:f}},sorter:function(a,b){return a.offset-b.offset},rad:function(a){return a%360*Math.PI/180},degrees:function(a){return a*180/Math.PI%360},withinBox:function(a,b,c){return c=c||{},a>=c.x&&a<=c.x+c.width&&b>=c.y&&b<=c.y+c.height},parseGradient:function(a){var b=this,c=a.type||"linear",d=a.angle||0,e=b.radian,f=a.stops,g=[],h,i,j,k;c=="linear"&&(i=[0,0,Math.cos(d*e),Math.sin(d*e)],j=1/(Math.max(Math.abs(i[2]),Math.abs(i[3]))||1),i[2]*=j,i[3]*=j,i[2]<0&&(i[0]=-i[2],i[2]=0),i[3]<0&&(i[1]=-i[3],i[3]=0));for(h in f)f.hasOwnProperty(h)&&b.stopsRE.test(h)&&(k={offset:parseInt(h,10),color:Ext.draw.Color.toHex(f[h].color)||"#ffffff",opacity:f[h].opacity||1},g.push(k));return Ext.Array.sort(g,b.sorter),c=="linear"?{id:a.id,type:c,vector:i,stops:g}:{id:a.id,type:c,centerX:a.centerX,centerY:a.centerY,focalX:a.focalX,focalY:a.focalY,radius:a.radius,vector:i,stops:g}}}),Ext.define("Ext.fx.PropertyHandler",{requires:["Ext.draw.Draw"],statics:{defaultHandler:{pixelDefaultsRE:/width|height|top$|bottom$|left$|right$/i,unitRE:/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/,scrollRE:/^scroll/i,computeDelta:function(a,b,c,d,e){c=typeof c=="number"?c:1;var f=this.unitRE,g=f.exec(a),h,i;return g&&(a=g[1],i=g[2],!this.scrollRE.test(e)&&!i&&this.pixelDefaultsRE.test(e)&&(i="px")),a=+a||0,g=f.exec(b),g&&(b=g[1],i=g[2]||i),b=+b||0,h=d!=null?d:a,{from:a,delta:(b-h)*c,units:i}},get:function(a,b,c,d,e){var f=a.length,g=[],h,i,j,k,l;for(h=0;h<f;h++){d&&(i=d[h][1].from);if(Ext.isArray(a[h][1])&&Ext.isArray(b)){j=[],k=0,l=a[h][1].length;for(;k<l;k++)j.push(this.computeDelta(a[h][1][k],b[k],c,i,e));g.push([a[h][0],j])}else g.push([a[h][0],this.computeDelta(a[h][1],b,c,i,e)])}return g},set:function(a,b){var c=a.length,d=[],e,f,g,h,i;for(e=0;e<c;e++){f=a[e][1];if(Ext.isArray(f)){g=[],i=0,h=f.length;for(;i<h;i++)g.push(f[i].from+f[i].delta*b+(f[i].units||0));d.push([a[e][0],g])}else d.push([a[e][0],f.from+f.delta*b+(f.units||0)])}return d}},color:{rgbRE:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,hexRE:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,hex3RE:/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,parseColor:function(a,b){b=typeof b=="number"?b:1;var c,d=!1,e;return Ext.each([this.hexRE,this.rgbRE,this.hex3RE],function(b,f){c=f%2==0?16:10,e=b.exec(a);if(e&&e.length==4)return f==2&&(e[1]+=e[1],e[2]+=e[2],e[3]+=e[3]),d={red:parseInt(e[1],c),green:parseInt(e[2],c),blue:parseInt(e[3],c)},!1}),d||a},computeDelta:function(a,b,c,d){a=this.parseColor(a),b=this.parseColor(b,c);var e=d?d:a,f=typeof e,g=typeof b;return f=="string"||f=="undefined"||g=="string"||g=="undefined"?b||e:{from:a,delta:{red:Math.round((b.red-e.red)*c),green:Math.round((b.green-e.green)*c),blue:Math.round((b.blue-e.blue)*c)}}},get:function(a,b,c,d){var e=a.length,f=[],g,h;for(g=0;g<e;g++)d&&(h=d[g][1].from),f.push([a[g][0],this.computeDelta(a[g][1],b,c,h)]);return f},set:function(a,b){var c=a.length,d=[],e,f,g,h,i;for(e=0;e<c;e++){f=a[e][1];if(f){h=f.from,i=f.delta,f=typeof f=="object"&&"red"in f?"rgb("+f.red+", "+f.green+", "+f.blue+")":f,f=typeof f=="object"&&f.length?f[0]:f;if(typeof f=="undefined")return[];g=typeof f=="string"?f:"rgb("+[(h.red+Math.round(i.red*b))%256,(h.green+Math.round(i.green*b))%256,(h.blue+Math.round(i.blue*b))%256].join(",")+")",d.push([a[e][0],g])}}return d}},object:{interpolate:function(a,b){b=typeof b=="number"?b:1;var c={},d;for(d in a)c[d]=parseInt(a[d],10)*b;return c},computeDelta:function(a,b,c,d){a=this.interpolate(a),b=this.interpolate(b,c);var e=d?d:a,f={},g;for(g in b)f[g]=b[g]-e[g];return{from:a,delta:f}},get:function(a,b,c,d){var e=a.length,f=[],g,h;for(g=0;g<e;g++)d&&(h=d[g][1].from),f.push([a[g][0],this.computeDelta(a[g][1],b,c,h)]);return f},set:function(a,b){var c=a.length,d=[],e={},f,g,h,i,j;for(f=0;f<c;f++){i=a[f][1],g=i.from,h=i.delta;for(j in g)e[j]=Math.round(g[j]+h[j]*b);d.push([a[f][0],e])}return d}},path:{computeDelta:function(a,b,c,d){c=typeof c=="number"?c:1;var e;return a=+a||0,b=+b||0,e=d!=null?d:a,{from:a,delta:(b-e)*c}},forcePath:function(a){return!Ext.isArray(a)&&!Ext.isArray(a[0])&&(a=Ext.draw.Draw.parsePathString(a)),a},get:function(a,b,c,d){var e=this.forcePath(b),f=[],g=a.length,h,i,j,k,l,m,n,o,p;for(j=0;j<g;j++){p=this.forcePath(a[j][1]),k=Ext.draw.Draw.interpolatePaths(p,e),p=k[0],e=k[1],h=p.length,o=[];for(m=0;m<h;m++){k=[p[m][0]],i=p[m].length;for(n=1;n<i;n++)l=d&&d[0][1][m][n].from,k.push(this.computeDelta(p[m][n],e[m][n],c,l));o.push(k)}f.push([a[j][0],o])}return f},set:function(a,b){var c=a.length,d=[],e,f,g,h,i,j,k,l;for(e=0;e<c;e++){j=a[e][1],h=[],k=j.length;for(f=0;f<k;f++){i=[j[f][0]],l=j[f].length;for(g=1;g<l;g++)i.push(j[f][g].from+j[f][g].delta*b);h.push(i.join(","))}d.push([a[e][0],h.join(",")])}return d}}}},function(){Ext.each(["outlineColor","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fill","stroke"],function(a){this[a]=this.color},this)}),Ext.define("Ext.fx.Anim",{mixins:{observable:"Ext.util.Observable"},requires:["Ext.fx.Manager","Ext.fx.Animator","Ext.fx.Easing","Ext.fx.CubicBezier","Ext.fx.PropertyHandler"],isAnimation:!0,duration:250,delay:0,delayStart:0,dynamic:!1,easing:"ease",damper:1,bezierRE:/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,reverse:!1,running:!1,paused:!1,iterations:1,alternate:!1,currentIteration:0,startTime:0,constructor:function(a){var b=this,c;return a=a||{},a.keyframes?Ext.create("Ext.fx.Animator",a):(a=Ext.apply(b,a),b.from===undefined&&(b.from={}),b.propHandlers={},b.config=a,b.target=Ext.fx.Manager.createTarget(b.target),b.easingFn=Ext.fx.Easing[b.easing],b.target.dynamic=b.dynamic,b.easingFn||(b.easingFn=String(b.easing).match(b.bezierRE),b.easingFn&&b.easingFn.length==5&&(c=b.easingFn,b.easingFn=Ext.fx.CubicBezier.cubicBezier(+c[1],+c[2],+c[3],+c[4]))),b.id=Ext.id(null,"ext-anim-"),Ext.fx.Manager.addAnim(b),b.addEvents("beforeanimate","afteranimate","lastframe"),b.mixins.observable.constructor.call(b,a),a.callback&&b.on("afteranimate",a.callback,a.scope),b)},setAttr:function(a,b){return Ext.fx.Manager.items.get(this.id).setAttr(this.target,a,b)},initAttrs:function(){var a=this,b=a.from,c=a.to,d=a.initialFrom||{},e={},f,g,h,i;for(i in c)c.hasOwnProperty(i)&&(f=a.target.getAttr(i,b[i]),g=c[i],Ext.fx.PropertyHandler[i]?h=a.propHandlers[i]=Ext.fx.PropertyHandler[i]:Ext.isObject(g)?h=a.propHandlers[i]=Ext.fx.PropertyHandler.object:h=a.propHandlers[i]=Ext.fx.PropertyHandler.defaultHandler,e[i]=h.get(f,g,a.damper,d[i],i));a.currentAttrs=e},start:function(a){var b=this,c=b.delay,d=b.delayStart,e;if(c){if(!d){b.delayStart=a;return}e=a-d;if(e<c)return;a=new Date(d.getTime()+c)}b.fireEvent("beforeanimate",b)!==!1&&(b.startTime=a,!b.paused&&!b.currentAttrs&&b.initAttrs(),b.running=!0)},runAnim:function(a){var b=this,c=b.currentAttrs,d=b.duration,e=b.easingFn,f=b.propHandlers,g={},h,i,j,k;a>=d&&(a=d,k=!0),b.reverse&&(a=d-a);for(j in c)c.hasOwnProperty(j)&&(i=c[j],h=k?1:e(a/d),g[j]=f[j].set(i,h));return g},lastFrame:function(){var a=this,b=a.iterations,c=a.currentIteration;c++,c<b?(a.alternate&&(a.reverse=!a.reverse),a.startTime=new Date,a.currentIteration=c,a.paused=!1):(a.currentIteration=0,a.end(),a.fireEvent("lastframe",a,a.startTime))},end:function(){var a=this;a.startTime=0,a.paused=!1,a.running=!1,Ext.fx.Manager.removeAnim(a),a.fireEvent("afteranimate",a,a.startTime)}}),Ext.enableFx=!0,Ext.define("Ext.dd.DragDrop",{requires:["Ext.dd.DragDropManager"],constructor:function(a,b,c){a&&this.init(a,b,c)},id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:!1,lock:function(){this.locked=!0},moveOnly:!1,unlock:function(){this.locked=!1},isTarget:!0,padding:null,_domRef:null,__ygDragDrop:!0,constrainX:!1,constrainY:!1,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:!1,xTicks:null,yTicks:null,primaryButtonOnly:!0,available:!1,hasOuterHandles:!1,b4StartDrag:function(a,b){},startDrag:function(a,b){},b4Drag:function(a){},onDrag:function(a){},onDragEnter:function(a,b){},b4DragOver:function(a){},onDragOver:function(a,b){},b4DragOut:function(a){},onDragOut:function(a,b){},b4DragDrop:function(a){},onDragDrop:function(a,b){},onInvalidDrop:function(a){},b4EndDrag:function(a){},endDrag:function(a){},b4MouseDown:function(a){},onMouseDown:function(a){},onMouseUp:function(a){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(a,b,c){Ext.isNumber(b)&&(b={left:b,right:b,top:b,bottom:b}),b=b||this.defaultPadding;var d=Ext.get(this.getEl()).getBox(),e=Ext.get(a),f=e.getScroll(),g,h=e.dom;if(h==document.body)g={x:f.left,y:f.top,width:Ext.Element.getViewWidth(),height:Ext.Element.getViewHeight()};else{var i=e.getXY();g={x:i[0],y:i[1],width:h.clientWidth,height:h.clientHeight}}var j=d.y-g.y,k=d.x-g.x;this.resetConstraints(),this.setXConstraint(k-(b.left||0),g.width-k-d.width-(b.right||0),this.xTickSize),this.setYConstraint(j-(b.top||0),g.height-j-d.height-(b.bottom||0),this.yTickSize)},getEl:function(){return this._domRef||(this._domRef=Ext.getDom(this.id)),this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(a,b,c){this.initTarget(a,b,c),Ext.EventManager.on(this.id,"mousedown",this.handleMouseDown,this)},initTarget:function(a,b,c){this.config=c||{},this.DDMInstance=Ext.dd.DragDropManager,this.groups={},typeof a!="string"&&(a=Ext.id(a)),this.id=a,this.addToGroup(b?b:"default"),this.handleElId=a,this.setDragElId(a),this.invalidHandleTypes={A:"A"},this.invalidHandleIds={},this.invalidHandleClasses=[],this.applyConfig(),this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0],this.isTarget=this.config.isTarget!==!1,this.maintainOffset=this.config.maintainOffset,this.primaryButtonOnly=this.config.primaryButtonOnly!==!1},handleOnAvailable:function(){this.available=!0,this.resetConstraints(),this.onAvailable()},setPadding:function(a,b,c,d){!b&&0!==b?this.padding=[a,a,a,a]:!c&&0!==c?this.padding=[a,b,a,b]:this.padding=[a,b,c,d]},setInitPosition:function(a,b){var c=this.getEl();if(!this.DDMInstance.verifyEl(c))return;var d=a||0,e=b||0,f=Ext.Element.getXY(c);this.initPageX=f[0]-d,this.initPageY=f[1]-e,this.lastPageX=f[0],this.lastPageY=f[1],this.setStartPosition(f)},setStartPosition:function(a){var b=a||Ext.Element.getXY(this.getEl());this.deltaSetXY=null,this.startPageX=b[0],this.startPageY=b[1]},addToGroup:function(a){this.groups[a]=!0,this.DDMInstance.regDragDrop(this,a)},removeFromGroup:function(a){this.groups[a]&&delete this.groups[a],this.DDMInstance.removeDDFromGroup(this,a)},setDragElId:function(a){this.dragElId=a},setHandleElId:function(a){typeof a!="string"&&(a=Ext.id(a)),this.handleElId=a,this.DDMInstance.regHandle(this.id,a)},setOuterHandleElId:function(a){typeof a!="string"&&(a=Ext.id(a)),Ext.EventManager.on(a,"mousedown",this.handleMouseDown,this),this.setHandleElId(a),this.hasOuterHandles=!0},unreg:function(){Ext.EventManager.un(this.id,"mousedown",this.handleMouseDown,this),this._domRef=null,this.DDMInstance._remove(this)},destroy:function(){this.unreg()},isLocked:function(){return this.DDMInstance.isLocked()||this.locked},handleMouseDown:function(a,b){if(this.primaryButtonOnly&&a.button!=0)return;if(this.isLocked())return;this.DDMInstance.refreshCache(this.groups);var c=a.getPoint();(!!this.hasOuterHandles||!!this.DDMInstance.isOverTarget(c,this))&&this.clickValidator(a)&&(this.setStartPosition(),this.b4MouseDown(a),this.onMouseDown(a),this.DDMInstance.handleMouseDown(a,this),this.DDMInstance.stopEvent(a))},clickValidator:function(a){var b=a.getTarget();return this.isValidHandleChild(b)&&(this.id==this.handleElId||this.DDMInstance.handleWasClicked(b,this.id))},addInvalidHandleType:function(a){var b=a.toUpperCase();this.invalidHandleTypes[b]=b},addInvalidHandleId:function(a){typeof a!="string"&&(a=Ext.id(a)),this.invalidHandleIds[a]=a},addInvalidHandleClass:function(a){this.invalidHandleClasses.push(a)},removeInvalidHandleType:function(a){var b=a.toUpperCase();delete this.invalidHandleTypes[b]},removeInvalidHandleId:function(a){typeof a!="string"&&(a=Ext.id(a)),delete this.invalidHandleIds[a]},removeInvalidHandleClass:function(a){for(var b=0,c=this.invalidHandleClasses.length;b<c;++b)this.invalidHandleClasses[b]==a&&delete this.invalidHandleClasses[b]},isValidHandleChild:function(a){var b=!0,c;try{c=a.nodeName.toUpperCase()}catch(d){c=a.nodeName}b=b&&!this.invalidHandleTypes[c],b=b&&!this.invalidHandleIds[a.id];for(var e=0,f=this.invalidHandleClasses.length;b&&e<f;++e)b=!Ext.fly(a).hasCls(this.invalidHandleClasses[e]);return b},setXTicks:function(a,b){this.xTicks=[],this.xTickSize=b;var c={};for(var d=this.initPageX;d>=this.minX;d-=b)c[d]||(this.xTicks[this.xTicks.length]=d,c[d]=!0);for(d=this.initPageX;d<=this.maxX;d+=b)c[d]||(this.xTicks[this.xTicks.length]=d,c[d]=!0);Ext.Array.sort(this.xTicks,this.DDMInstance.numericSort)},setYTicks:function(a,b){this.yTicks=[],this.yTickSize=b;var c={};for(var d=this.initPageY;d>=this.minY;d-=b)c[d]||(this.yTicks[this.yTicks.length]=d,c[d]=!0);for(d=this.initPageY;d<=this.maxY;d+=b)c[d]||(this.yTicks[this.yTicks.length]=d,c[d]=!0);Ext.Array.sort(this.yTicks,this.DDMInstance.numericSort)},setXConstraint:function(a,b,c){this.leftConstraint=a,this.rightConstraint=b,this.minX=this.initPageX-a,this.maxX=this.initPageX+b,c&&this.setXTicks(this.initPageX,c),this.constrainX=!0},clearConstraints:function(){this.constrainX=!1,this.constrainY=!1,this.clearTicks()},clearTicks:function(){this.xTicks=null,this.yTicks=null,this.xTickSize=0,this.yTickSize=0},setYConstraint:function(a,b,c){this.topConstraint=a,this.bottomConstraint=b,this.minY=this.initPageY-a,this.maxY=this.initPageY+b,c&&this.setYTicks(this.initPageY,c),this.constrainY=!0},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var a=this.maintainOffset?this.lastPageX-this.initPageX:0,b=this.maintainOffset?this.lastPageY-this.initPageY:0;this.setInitPosition(a,b)}else this.setInitPosition();this.constrainX&&this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize),this.constrainY&&this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)},getTick:function(a,b){if(!b)return a;if(b[0]>=a)return b[0];for(var c=0,d=b.length;c<d;++c){var e=c+1;if(b[e]&&b[e]>=a){var f=a-b[c],g=b[e]-a;return g>f?b[c]:b[e]}}return b[b.length-1]},toString:function(){return"DragDrop "+this.id}}),Ext.define("Ext.dd.DD",{extend:"Ext.dd.DragDrop",requires:["Ext.dd.DragDropManager"],constructor:function(a,b,c){a&&this.init(a,b,c)},scroll:!0,autoOffset:function(a,b){var c=a-this.startPageX,d=b-this.startPageY;this.setDelta(c,d)},setDelta:function(a,b){this.deltaX=a,this.deltaY=b},setDragElPos:function(a,b){var c=this.getDragEl();this.alignElWithMouse(c,a,b)},alignElWithMouse:function(a,b,c){var d=this.getTargetCoord(b,c),e=a.dom?a:Ext.fly(a,"_dd"),f=e.getSize(),g=Ext.Element,h;if(!this.deltaSetXY){h=this.cachedViewportSize={width:g.getDocumentWidth(),height:g.getDocumentHeight()};var i=[Math.max(0,Math.min(d.x,h.width-f.width)),Math.max(0,Math.min(d.y,h.height-f.height))];e.setXY(i);var j=e.getLeft(!0),k=e.getTop(!0);this.deltaSetXY=[j-d.x,k-d.y]}else h=this.cachedViewportSize,e.setLeftTop(Math.max(0,Math.min(d.x+this.deltaSetXY[0],h.width-f.width)),Math.max(0,Math.min(d.y+this.deltaSetXY[1],h.height-f.height)));return this.cachePosition(d.x,d.y),this.autoScroll(d.x,d.y,a.offsetHeight,a.offsetWidth),d},cachePosition:function(a,b){if(a)this.lastPageX=a,this.lastPageY=b;else{var c=Ext.Element.getXY(this.getEl());this.lastPageX=c[0],this.lastPageY=c[1]}},autoScroll:function(a,b,c,d){if(this.scroll){var e=Ext.Element.getViewHeight(),f=Ext.Element.getViewWidth(),g=this.DDMInstance.getScrollTop(),h=this.DDMInstance.getScrollLeft(),i=c+b,j=d+a,k=e+g-b-this.deltaY,l=f+h-a-this.deltaX,m=40,n=document.all?80:30;i>e&&k<m&&window.scrollTo(h,g+n),b<g&&g>0&&b-g<m&&window.scrollTo(h,g-n),j>f&&l<m&&window.scrollTo(h+n,g),a<h&&h>0&&a-h<m&&window.scrollTo(h-n,g)}},getTargetCoord:function(a,b){var c=a-this.deltaX,d=b-this.deltaY;return this.constrainX&&(c<this.minX&&(c=this.minX),c>this.maxX&&(c=this.maxX)),this.constrainY&&(d<this.minY&&(d=this.minY),d>this.maxY&&(d=this.maxY)),c=this.getTick(c,this.xTicks),d=this.getTick(d,this.yTicks),{x:c,y:d}},applyConfig:function(){this.callParent(),this.scroll=this.config.scroll!==!1},b4MouseDown:function(a){this.autoOffset(a.getPageX(),a.getPageY())},b4Drag:function(a){this.setDragElPos(a.getPageX(),a.getPageY())},toString:function(){return"DD "+this.id}}),Ext.define("Ext.dd.DDProxy",{extend:"Ext.dd.DD",statics:{dragElId:"ygddfdiv"},constructor:function(a,b,c){a&&(this.init(a,b,c),this.initFrame())},resizeFrame:!0,centerFrame:!1,createFrame:function(){var a=this,b=document.body;if(!b||!b.firstChild){setTimeout(function(){a.createFrame()},50);return}var c=this.getDragEl();if(!c){c=document.createElement("div"),c.id=this.dragElId;var d=c.style;d.position="absolute",d.visibility="hidden",d.cursor="move",d.border="2px solid #aaa",d.zIndex=999,b.insertBefore(c,b.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){this.callParent(),this.resizeFrame=this.config.resizeFrame!==!1,this.centerFrame=this.config.centerFrame,this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(a,b){var c=this.getEl(),d=this.getDragEl(),e=d.style;this._resizeProxy(),this.centerFrame&&this.setDelta(Math.round(parseInt(e.width,10)/2),Math.round(parseInt(e.height,10)/2)),this.setDragElPos(a,b),Ext.fly(d).show()},_resizeProxy:function(){if(this.resizeFrame){var a=this.getEl();Ext.fly(this.getDragEl()).setSize(a.offsetWidth,a.offsetHeight)}},b4MouseDown:function(a){var b=a.getPageX(),c=a.getPageY();this.autoOffset(b,c),this.setDragElPos(b,c)},b4StartDrag:function(a,b){this.showFrame(a,b)},b4EndDrag:function(a){Ext.fly(this.getDragEl()).hide()},endDrag:function(a){var b=this.getEl(),c=this.getDragEl();c.style.visibility="",this.beforeMove(),b.style.visibility="hidden",Ext.dd.DDM.moveToEl(b,c),c.style.visibility="hidden",b.style.visibility="",this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return"DDProxy "+this.id}}),Ext.define("Ext.dd.DragSource",{extend:"Ext.dd.DDProxy",requires:["Ext.dd.StatusProxy","Ext.dd.DragDropManager"],dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",animRepair:!0,repairHighlightColor:"c3daf9",constructor:function(a,b){this.el=Ext.get(a),this.dragData||(this.dragData={}),Ext.apply(this,b),this.proxy||(this.proxy=Ext.create("Ext.dd.StatusProxy",{animRepair:this.animRepair})),this.callParent([this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:!1,isTarget:!1,scroll:this.scroll===!0}]),this.dragging=!1},getDragData:function(a){return this.dragData},onDragEnter:function(a,b){var c=Ext.dd.DragDropManager.getDDById(b);this.cachedTarget=c;if(this.beforeDragEnter(c,a,b)!==!1){if(c.isNotifyTarget){var d=c.notifyEnter(this,a,this.dragData);this.proxy.setStatus(d)}else this.proxy.setStatus(this.dropAllowed);this.afterDragEnter&&this.afterDragEnter(c,a,b)}},beforeDragEnter:function(a,b,c){return!0},alignElWithMouse:function(){this.callParent(arguments),this.proxy.sync()},onDragOver:function(a,b){var c=this.cachedTarget||Ext.dd.DragDropManager.getDDById(b);if(this.beforeDragOver(c,a,b)!==!1){if(c.isNotifyTarget){var d=c.notifyOver(this,a,this.dragData);this.proxy.setStatus(d)}this.afterDragOver&&this.afterDragOver(c,a,b)}},beforeDragOver:function(a,b,c){return!0},onDragOut:function(a,b){var c=this.cachedTarget||Ext.dd.DragDropManager.getDDById(b);this.beforeDragOut(c,a,b)!==!1&&(c.isNotifyTarget&&c.notifyOut(this,a,this.dragData),this.proxy.reset(),this.afterDragOut&&this.afterDragOut(c,a,b)),this.cachedTarget=null},beforeDragOut:function(a,b,c){return!0},onDragDrop:function(a,b){var c=this.cachedTarget||Ext.dd.DragDropManager.getDDById(b);this.beforeDragDrop(c,a,b)!==!1&&(c.isNotifyTarget?c.notifyDrop(this,a,this.dragData)!==!1?this.onValidDrop(c,a,b):this.onInvalidDrop(c,a,b):this.onValidDrop(c,a,b),this.afterDragDrop&&this.afterDragDrop(c,a,b)),delete this.cachedTarget},beforeDragDrop:function(a,b,c){return!0},onValidDrop:function(a,b,c){this.hideProxy(),this.afterValidDrop&&this.afterValidDrop(a,b,c)},getRepairXY:function(a,b){return this.el.getXY()},onInvalidDrop:function(a,b,c){this.beforeInvalidDrop(a,b,c),this.cachedTarget&&(this.cachedTarget.isNotifyTarget&&this.cachedTarget.notifyOut(this,b,this.dragData),this.cacheTarget=null),this.proxy.repair(this.getRepairXY(b,this.dragData),this.afterRepair,this),this.afterInvalidDrop&&this.afterInvalidDrop(b,c)},afterRepair:function(){var a=this;Ext.enableFx&&a.el.highlight(a.repairHighlightColor),a.dragging=!1},beforeInvalidDrop:function(a,b,c){return!0},handleMouseDown:function(a){if(this.dragging)return;var b=this.getDragData(a);b&&this.onBeforeDrag(b,a)!==!1&&(this.dragData=b,this.proxy.stop(),this.callParent(arguments))},onBeforeDrag:function(a,b){return!0},onStartDrag:Ext.emptyFn,startDrag:function(a,b){this.proxy.reset(),this.dragging=!0,this.proxy.update(""),this.onInitDrag(a,b),this.proxy.show()},onInitDrag:function(a,b){var c=this.el.dom.cloneNode(!0);return c.id=Ext.id(),this.proxy.update(c),this.onStartDrag(a,b),!0},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide(),this.proxy.reset(!0),this.dragging=!1},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(a){},endDrag:function(a){this.onEndDrag(this.dragData,a)},onEndDrag:function(a,b){},autoOffset:function(a,b){this.setDelta(-12,-20)},destroy:function(){this.callParent(),Ext.destroy(this.proxy)}}),Ext.define("Ext.panel.DD",{extend:"Ext.dd.DragSource",requires:["Ext.panel.Proxy"],constructor:function(a,b){this.panel=a,this.dragData={panel:a},this.proxy=Ext.create("Ext.panel.Proxy",a,b),this.callParent([a.el,b]),Ext.defer(function(){var b=a.header,c=a.body;b&&(this.setHandleElId(b.id),c=b.el),c.setStyle("cursor","move"),this.scroll=!1},200,this)},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(a,b){this.proxy.show()},b4MouseDown:function(a){var b=a.getPageX(),c=a.getPageY();this.autoOffset(b,c)},onInitDrag:function(a,b){return this.onStartDrag(a,b),!0},createFrame:Ext.emptyFn,getDragEl:function(a){return this.proxy.ghost.el.dom},endDrag:function(a){this.proxy.hide(),this.panel.saveState()},autoOffset:function(a,b){a-=this.startPageX,b-=this.startPageY,this.setDelta(a,b)}}),Ext.define("Ext.layout.component.Dock",{alias:["layout.dock"],extend:"Ext.layout.component.AbstractDock"}),Ext.define("Ext.panel.Panel",{extend:"Ext.panel.AbstractPanel",requires:["Ext.panel.Header","Ext.fx.Anim","Ext.util.KeyMap","Ext.panel.DD","Ext.XTemplate","Ext.layout.component.Dock","Ext.util.Memento"],alias:"widget.panel",alternateClassName:"Ext.Panel",collapsedCls:"collapsed",animCollapse:Ext.enableFx,minButtonWidth:75,collapsed:!1,collapseFirst:!0,hideCollapseTool:!1,titleCollapse:!1,floatable:!0,collapsible:!1,closable:!1,closeAction:"destroy",preventHeader:!1,headerPosition:"top",frame:!1,frameHeader:!0,initComponent:function(){var a=this,b;a.addEvents("beforeclose","beforeexpand","beforecollapse","expand","collapse","titlechange","iconchange"),this.addStateEvents("expand","collapse"),a.unstyled&&a.setUI("plain"),a.frame&&a.setUI(a.ui+"-framed"),a.bridgeToolbars(),a.callParent(),a.collapseDirection=a.collapseDirection||a.headerPosition||Ext.Component.DIRECTION_TOP},setBorder:function(a){this.callParent(arguments)},beforeDestroy:function(){Ext.destroy(this.ghostPanel,this.dd),this.callParent()},initAria:function(){this.callParent(),this.initHeaderAria()},initHeaderAria:function(){var a=this,b=a.el,c=a.header;b&&c&&b.dom.setAttribute("aria-labelledby",c.titleCmp.id)},getHeader:function(){return this.header},setTitle:function(a){var b=this,c=this.title;b.title=a,b.header?b.header.setTitle(a):b.updateHeader(),b.reExpander&&b.reExpander.setTitle(a),b.fireEvent("titlechange",b,a,c)},setIconCls:function(a){var b=this,c=b.iconCls;b.iconCls=a;var d=b.header;d&&d.setIconCls(a),b.fireEvent("iconchange",b,a,c)},bridgeToolbars:function(){function f(b,c,d){Ext.isArray(b)?b={xtype:"toolbar",items:b}:b.xtype||(b.xtype="toolbar"),b.dock=c;if(c=="left"||c=="right")b.vertical=!0;return d&&(b.layout=Ext.applyIf(b.layout||{},{pack:{left:"start",center:"center"}[a.buttonAlign]||"end"})),b}var a=this,b=[],c,d,e=a.minButtonWidth;a.tbar&&(b.push(f(a.tbar,"top")),a.tbar=null),a.bbar&&(b.push(f(a.bbar,"bottom")),a.bbar=null),a.buttons&&(a.fbar=a.buttons,a.buttons=null),a.fbar&&(c=f(a.fbar,"bottom",!0),c.ui="footer",e&&(d=c.defaults,c.defaults=function(a){var b=d||{};return(!a.xtype||a.xtype==="button"||a.isComponent&&a.isXType("button"))&&!("minWidth"in b)&&(b=Ext.apply({minWidth:e},b)),b}),b.push(c),a.fbar=null),a.lbar&&(b.push(f(a.lbar,"left")),a.lbar=null),a.rbar&&(b.push(f(a.rbar,"right")),a.rbar=null),a.dockedItems?(Ext.isArray(a.dockedItems)||(a.dockedItems=[a.dockedItems]),a.dockedItems=a.dockedItems.concat(b)):a.dockedItems=b},initTools:function(){var a=this;a.tools=a.tools?Ext.Array.clone(a.tools):[],a.collapsible&&!a.hideCollapseTool&&a.header!==!1&&(a.collapseDirection=a.collapseDirection||a.headerPosition||"top",a.collapseTool=a.expandTool=a.createComponent({xtype:"tool",type:"collapse-"+a.collapseDirection,expandType:a.getOppositeDirection(a.collapseDirection),handler:a.toggleCollapse,scope:a}),a.collapseFirst&&a.tools.unshift(a.collapseTool)),a.addTools(),a.closable&&(a.addClsWithUI("closable"),a.addTool({type:"close",handler:Ext.Function.bind(a.close,this,[])})),a.collapseTool&&!a.collapseFirst&&a.tools.push(a.collapseTool)},addTools:Ext.emptyFn,close:function(){this.fireEvent("beforeclose",this)!==!1&&this.doClose()},doClose:function(){this.fireEvent("close",this),this[this.closeAction]()},onRender:function(a,b){var c=this,d;c.initTools(),c.updateHeader(),c.callParent(arguments)},afterRender:function(){var a=this;a.callParent(arguments),a.collapsed&&(a.collapsed=!1,a.collapse(null,!1,!0))},updateHeader:function(a){var b=this,c=b.header,d=b.title,e=b.tools;!b.preventHeader&&(a||d||e&&e.length)?(c||(c=b.header=Ext.create("Ext.panel.Header",{title:d,orientation:b.headerPosition=="left"||b.headerPosition=="right"?"vertical":"horizontal",dock:b.headerPosition||"top",textCls:b.headerTextCls,iconCls:b.iconCls,baseCls:b.baseCls+"-header",tools:e,ui:b.ui,indicateDrag:b.draggable,border:b.border,frame:b.frame&&b.frameHeader,ignoreParentFrame:b.frame||b.overlapHeader,ignoreBorderManagement:b.frame||b.ignoreHeaderBorderManagement,listeners:b.collapsible&&b.titleCollapse?{click:b.toggleCollapse,scope:b}:null}),b.addDocked(c,0),b.tools=c.tools),c.show(),b.initHeaderAria()):c&&c.hide()},setUI:function(a){var b=this;b.callParent(arguments),b.header&&b.header.setUI(a)},getContentTarget:function(){return this.body},getTargetEl:function(){return this.body||this.frameBody||this.el},isVisible:function(a){var b=this;return b.collapsed&&b.placeholder?b.placeholder.isVisible(a):b.callParent(arguments)},onHide:function(){var a=this;a.collapsed&&a.placeholder?a.placeholder.hide():a.callParent(arguments)},onShow:function(){var a=this;a.collapsed&&a.placeholder?(a.hidden=!0,a.placeholder.show()):a.callParent(arguments)},addTool:function(a){var b=this,c=b.header;if(Ext.isArray(a)){Ext.each(a,b.addTool,b);return}b.tools.push(a),c&&c.addTool(a),b.updateHeader()},getOppositeDirection:function(a){var b=Ext.Component;switch(a){case b.DIRECTION_TOP:return b.DIRECTION_BOTTOM;case b.DIRECTION_RIGHT:return b.DIRECTION_LEFT;case b.DIRECTION_BOTTOM:return b.DIRECTION_TOP;case b.DIRECTION_LEFT:return b.DIRECTION_RIGHT}},collapse:function(a,b,c){var d=this,e=Ext.Component,f=d.getHeight(),g=d.getWidth(),h,i=0,j=d.dockedItems.items,k=j.length,l=0,m,n,o={from:{height:f,width:g},to:{height:f,width:g},listeners:{afteranimate:d.afterCollapse,scope:d},duration:Ext.Number.from(b,Ext.fx.Anim.prototype.duration)},p,q,r,s,t;a||(a=d.collapseDirection);if(c)b=!1;else if(d.collapsed||d.fireEvent("beforecollapse",d,a,b)===!1)return!1;r=a,d.expandDirection=d.getOppositeDirection(a),d.hiddenDocked=[];switch(a){case e.DIRECTION_TOP:case e.DIRECTION_BOTTOM:q="horizontal",t="height",s="getHeight";for(;l<k;l++)m=j[l],m.isVisible()?m.isXType("header",!0)&&(!m.dock||m.dock=="top"||m.dock=="bottom")?p=m:d.hiddenDocked.push(m):m===d.reExpander&&(p=m);a==Ext.Component.DIRECTION_BOTTOM&&(n=d.getPosition()[1]-Ext.fly(d.el.dom.offsetParent).getRegion().top,o.from.top=n);break;case e.DIRECTION_LEFT:case e.DIRECTION_RIGHT:q="vertical",t="width",s="getWidth";for(;l<k;l++)m=j[l],m.isVisible()?!m.isHeader||m.dock!="left"&&m.dock!="right"?d.hiddenDocked.push(m):p=m:m===d.reExpander&&(p=m);a==Ext.Component.DIRECTION_RIGHT&&(n=d.getPosition()[0]-Ext.fly(d.el.dom.offsetParent).getRegion().left,o.from.left=n);break;default:throw"Panel collapse must be passed a valid Component collapse direction"}return b&&d.collapseTool&&d.collapseTool.disable(),d.addClsWithUI(d.collapsedCls),p&&p.rendered?(p.addClsWithUI(d.collapsedCls),p.addClsWithUI(d.collapsedCls+"-"+p.dock),d.border&&(!d.frame||d.frame&&Ext.supports.CSS3BorderRadius)&&p.addClsWithUI(d.collapsedCls+"-border-"+p.dock),h=p.getFrameInfo(),i=p[s]()+(h?h[a]:0),p.removeClsWithUI(d.collapsedCls),p.removeClsWithUI(d.collapsedCls+"-"+p.dock),d.border&&(!d.frame||d.frame&&Ext.supports.CSS3BorderRadius)&&p.removeClsWithUI(d.collapsedCls+"-border-"+p.dock)):(p={hideMode:"offsets",temporary:!0,title:d.title,orientation:q,dock:r,textCls:d.headerTextCls,iconCls:d.iconCls,baseCls:d.baseCls+"-header",ui:d.ui,frame:d.frame&&d.frameHeader,ignoreParentFrame:d.frame||d.overlapHeader,indicateDrag:d.draggable,cls:d.baseCls+"-collapsed-placeholder  "+Ext.baseCSSPrefix+"docked "+d.baseCls+"-"+d.ui+"-collapsed",renderTo:d.el},d.hideCollapseTool||(p[p.orientation=="horizontal"?"tools":"items"]=[{xtype:"tool",type:"expand-"+d.expandDirection,handler:d.toggleCollapse,scope:d}]),p=d.reExpander=Ext.create("Ext.panel.Header",p),i=p[s]()+(p.frame?p.frameSize[a]:0),p.hide(),d.insertDocked(0,p)),d.reExpander=p,d.reExpander.addClsWithUI(d.collapsedCls),d.reExpander.addClsWithUI(d.collapsedCls+"-"+p.dock),d.border&&(!d.frame||d.frame&&Ext.supports.CSS3BorderRadius)&&d.reExpander.addClsWithUI(d.collapsedCls+"-border-"+d.reExpander.dock),a==Ext.Component.DIRECTION_RIGHT?o.to.left=n+(g-i):a==Ext.Component.DIRECTION_BOTTOM&&(o.to.top=n+(f-i)),o.to[t]=i,d.collapseMemento||(d.collapseMemento=new Ext.util.Memento(d)),d.collapseMemento.capture(["width","height","minWidth","minHeight","layoutManagedHeight","layoutManagedWidth"]),d.savedFlex=d.flex,d.minWidth=0,d.minHeight=0,delete d.flex,d.suspendLayout=!0,b?d.animate(o):(d.setSize(o.to.width,o.to.height),(Ext.isDefined(o.to.left)||Ext.isDefined(o.to.top))&&d.setPosition(o.to.left,o.to.top),d.afterCollapse(!1,c)),d},afterCollapse:function(a,b){var c=this,d=0,e=c.hiddenDocked.length;c.collapseMemento.restore(["minWidth","minHeight"]),Ext.Component.VERTICAL_DIRECTION_Re.test(c.expandDirection)?(c.layoutManagedHeight=2,c.collapseMemento.restore("width",!1)):(c.layoutManagedWidth=2,c.collapseMemento.restore("height",!1)),c.saveScrollTop=c.body.dom.scrollTop,c.body.setStyle("display","none");for(;d<e;d++)c.hiddenDocked[d].hide();c.reExpander&&(c.reExpander.updateFrame(),c.reExpander.show()),c.collapsed=!0,c.suspendLayout=!1,b||(c.ownerCt?a&&c.ownerCt.layout.layout():c.reExpander.temporary&&c.doComponentLayout()),c.resizer&&c.resizer.disable(),c.collapseTool&&c.collapseTool.setType("expand-"+c.expandDirection),b||c.fireEvent("collapse",c),a&&c.collapseTool&&c.collapseTool.enable()},expand:function(a){var b=this;if(!b.collapsed||b.fireEvent("beforeexpand",b,a)===!1)return!1;var c=0,d=b.hiddenDocked.length,e=b.expandDirection,f=b.getHeight(),g=b.getWidth(),h,i;a&&b.collapseTool&&b.collapseTool.disable();for(;c<d;c++)b.hiddenDocked[c].hidden=!1,b.hiddenDocked[c].el.show();b.reExpander&&(b.reExpander.temporary?b.reExpander.hide():(b.reExpander.removeClsWithUI(b.collapsedCls),b.reExpander.removeClsWithUI(b.collapsedCls+"-"+b.reExpander.dock),b.border&&(!b.frame||b.frame&&Ext.supports.CSS3BorderRadius)&&b.reExpander.removeClsWithUI(b.collapsedCls+"-border-"+b.reExpander.dock),b.reExpander.updateFrame())),b.collapseTool&&b.collapseTool.setType("collapse-"+b.collapseDirection),b.body.setStyle("display",""),b.body.dom.scrollTop=b.saveScrollTop,b.collapsed=!1,b.removeClsWithUI(b.collapsedCls),i={to:{},from:{height:f,width:g},listeners:{afteranimate:b.afterExpand,scope:b}};if(e==Ext.Component.DIRECTION_TOP||e==Ext.Component.DIRECTION_BOTTOM)b.collapseMemento.restore("height",!1),b.height===undefined?(b.setCalculatedSize(b.width,null),i.to.height=b.getHeight(),b.setCalculatedSize(b.width,i.from.height)):b.savedFlex?(b.flex=b.savedFlex,i.to.height=b.ownerCt.layout.calculateChildBox(b).height,delete b.flex):i.to.height=b.height,e==Ext.Component.DIRECTION_TOP&&(h=b.getPosition()[1]-Ext.fly(b.el.dom.offsetParent).getRegion().top,i.from.top=h,i.to.top=h-(i.to.height-f));else if(e==Ext.Component.DIRECTION_LEFT||e==Ext.Component.DIRECTION_RIGHT)b.collapseMemento.restore("width",!1),b.width===undefined?(b.setCalculatedSize(null,b.height),i.to.width=b.getWidth(),b.setCalculatedSize(i.from.width,b.height)):b.savedFlex?(b.flex=b.savedFlex,i.to.width=b.ownerCt.layout.calculateChildBox(b).width,delete b.flex):i.to.width=b.width,e==Ext.Component.DIRECTION_LEFT&&(h=b.getPosition()[0]-Ext.fly(b.el.dom.offsetParent).getRegion().left,i.from.left=h,i.to.left=h-(i.to.width-g));return a?b.animate(i):(b.setCalculatedSize(i.to.width,i.to.height),i.to.x&&b.setLeft(i.to.x),i.to.y&&b.setTop(i.to.y),b.afterExpand(!1)),b},afterExpand:function(a){var b=this;b.savedFlex&&(b.flex=b.savedFlex,delete b.savedFlex,delete b.width,delete b.height),b.collapseMemento&&b.collapseMemento.restoreAll(),a&&b.ownerCt&&Ext.defer(b.ownerCt.doLayout,Ext.isIE6?1:0,b),b.resizer&&b.resizer.enable(),b.fireEvent("expand",b),a&&b.collapseTool&&b.collapseTool.enable()},toggleCollapse:function(){return this.collapsed?this.expand(this.animCollapse):this.collapse(this.collapseDirection,this.animCollapse),this},getKeyMap:function(){return this.keyMap||(this.keyMap=Ext.create("Ext.util.KeyMap",this.el,this.keys)),this.keyMap},initDraggable:function(){this.dd=Ext.create("Ext.panel.DD",this,Ext.isBoolean(this.draggable)?null:this.draggable)},ghostTools:function(){var a=[],b=this.header.query("tool[hidden=false]");return b.length?Ext.each(b,function(b){a.push({type:b.type})}):a=[{type:"placeholder"}],a},ghost:function(a){var b=this,c=b.ghostPanel,d=b.getBox(),e;return c||(c=Ext.create("Ext.panel.Panel",{renderTo:b.floating?b.el.dom.parentNode:document.body,floating:{shadow:!1},frame:Ext.supports.CSS3BorderRadius?b.frame:!1,overlapHeader:b.overlapHeader,headerPosition:b.headerPosition,baseCls:b.baseCls,cls:b.baseCls+"-ghost "+(a||"")}),b.ghostPanel=c),c.floatParent=b.floatParent,b.floating?c.setZIndex(Ext.Number.from(b.el.getStyle("zIndex"),0)):c.toFront(),e=c.header,e&&(e.suspendLayout=!0,Ext.Array.forEach(e.query("tool"),function(a){e.remove(a)}),e.suspendLayout=!1),c.addTool(b.ghostTools()),c.setTitle(b.title),c.setIconCls(b.iconCls),c.el.show(),c.setPosition(d.x,d.y),c.setSize(d.width,d.height),b.el.hide(),b.floatingItems&&b.floatingItems.hide(),c},unghost:function(a,b){var c=this;if(!c.ghostPanel)return;a!==!1&&(c.el.show(),b!==!1&&c.setPosition(c.ghostPanel.getPosition()),c.floatingItems&&c.floatingItems.show(),Ext.defer(c.focus,10,c)),c.ghostPanel.el.hide()},initResizable:function(a){this.collapsed&&(a.disabled=!0),this.callParent([a])}},function(){this.prototype.animCollapse=Ext.enableFx}),Ext.define("Ext.layout.component.Tip",{alias:["layout.tip"],extend:"Ext.layout.component.Dock",type:"tip",onLayout:function(a,b){var c=this,d=c.owner,e=d.el,f,g,h,i,j=e.getXY();e.setXY([-9999,-9999]),this.callParent(arguments),Ext.isNumber(a)||(f=d.minWidth,g=d.maxWidth,Ext.isStrict&&(Ext.isIE6||Ext.isIE7)?i=c.doAutoWidth():h=e.getWidth(),h<f?i=f:h>g&&(i=g),i&&this.callParent([i,b])),e.setXY(j)},doAutoWidth:function(){var a=this,b=a.owner,c=b.body,d=c.getTextWidth();return b.header&&(d=Math.max(d,b.header.getWidth())),Ext.isDefined(a.frameWidth)||(a.frameWidth=b.el.getWidth()-c.getWidth()),d+=a.frameWidth+c.getPadding("lr"),d}}),Ext.define("Ext.tip.Tip",{extend:"Ext.panel.Panel",requires:["Ext.layout.component.Tip"],alternateClassName:"Ext.Tip",minWidth:40,maxWidth:300,shadow:"sides",defaultAlign:"tl-bl?",constrainPosition:!0,frame:!1,autoRender:!0,hidden:!0,baseCls:Ext.baseCSSPrefix+"tip",floating:{shadow:!0,shim:!0,constrain:!0},focusOnToFront:!1,componentLayout:"tip",closeAction:"hide",ariaRole:"tooltip",initComponent:function(){var a=this;a.floating=Ext.apply({},{shadow:a.shadow},a.self.prototype.floating),a.callParent(arguments),a.constrain=a.constrain||a.constrainPosition},showAt:function(a){var b=this;this.callParent(arguments),b.isVisible()&&(b.setPagePosition(a[0],a[1]),(b.constrainPosition||b.constrain)&&b.doConstrain(),b.toFront(!0))},showBy:function(a,b){this.showAt(this.el.getAlignToXY(a,b||this.defaultAlign))},initDraggable:function(){var a=this;a.draggable={el:a.getDragEl(),delegate:a.header.el,constrain:a,constrainTo:a.el.getScopeParent()},Ext.Component.prototype.initDraggable.call(a)},ghost:undefined,unghost:undefined}),Ext.define("Ext.tip.ToolTip",{extend:"Ext.tip.Tip",alias:"widget.tooltip",alternateClassName:"Ext.ToolTip",showDelay:500,hideDelay:200,dismissDelay:5e3,trackMouse:!1,anchorToTarget:!0,anchorOffset:0,targetCounter:0,quickShowInterval:250,initComponent:function(){var a=this;a.callParent(arguments),a.lastActive=new Date,a.setTarget(a.target),a.origAnchor=a.anchor},onRender:function(a,b){var c=this;c.callParent(arguments),c.anchorCls=Ext.baseCSSPrefix+"tip-anchor-"+c.getAnchorPosition(),c.anchorEl=c.el.createChild({cls:Ext.baseCSSPrefix+"tip-anchor "+c.anchorCls})},afterRender:function(){var a=this,b;a.callParent(arguments),b=parseInt(a.el.getZIndex(),10)||0,a.anchorEl.setStyle("z-index",b+1).setVisibilityMode(Ext.Element.DISPLAY)},setTarget:function(a){var b=this,c=Ext.get(a),d;b.target&&(d=Ext.get(b.target),b.mun(d,"mouseover",b.onTargetOver,b),b.mun(d,"mouseout",b.onTargetOut,b),b.mun(d,"mousemove",b.onMouseMove,b)),b.target=c,c&&b.mon(c,{freezeEvent:!0,mouseover:b.onTargetOver,mouseout:b.onTargetOut,mousemove:b.onMouseMove,scope:b}),b.anchor&&(b.anchorTarget=b.target)},onMouseMove:function(a){var b=this,c=b.delegate?a.getTarget(b.delegate):b.triggerElement=!0,d;c?(b.targetXY=a.getXY(),c===b.triggerElement?!b.hidden&&b.trackMouse&&(d=b.getTargetXY(),b.constrainPosition&&(d=b.el.adjustForConstraints(d,b.el.getScopeParent())),b.setPagePosition(d)):(b.hide(),b.lastActive=new Date(0),b.onTargetOver(a))):!b.closable&&b.isVisible()&&b.autoHide!==!1&&b.hide()},getTargetXY:function(){var a=this,b;a.delegate&&(a.anchorTarget=a.triggerElement);if(a.anchor){a.targetCounter++;var c=a.getOffsets(),d=a.anchorToTarget&&!a.trackMouse?a.el.getAlignToXY(a.anchorTarget,a.getAnchorAlign()):a.targetXY,e=Ext.Element.getViewWidth()-5,f=Ext.Element.getViewHeight()-5,g=document.documentElement,h=document.body,i=(g.scrollLeft||h.scrollLeft||0)+5,j=(g.scrollTop||h.scrollTop||0)+5,k=[d[0]+c[0],d[1]+c[1]],l=a.getSize(),m=a.constrainPosition;a.anchorEl.removeCls(a.anchorCls);if(a.targetCounter<2&&m){if(k[0]<i)return a.anchorToTarget&&(a.defaultAlign="l-r",a.mouseOffset&&(a.mouseOffset[0]*=-1)),a.anchor="left",a.getTargetXY();if(k[0]+l.width>e)return a.anchorToTarget&&(a.defaultAlign="r-l",a.mouseOffset&&(a.mouseOffset[0]*=-1)),a.anchor="right",a.getTargetXY();if(k[1]<j)return a.anchorToTarget&&(a.defaultAlign="t-b",a.mouseOffset&&(a.mouseOffset[1]*=-1)),a.anchor="top",a.getTargetXY();if(k[1]+l.height>f)return a.anchorToTarget&&(a.defaultAlign="b-t",a.mouseOffset&&(a.mouseOffset[1]*=-1)),a.anchor="bottom",a.getTargetXY()}return a.anchorCls=Ext.baseCSSPrefix+"tip-anchor-"+a.getAnchorPosition(),a.anchorEl.addCls(a.anchorCls),a.targetCounter=0,k}return b=a.getMouseOffset(),a.targetXY?[a.targetXY[0]+b[0],a.targetXY[1]+b[1]]:b},getMouseOffset:function(){var a=this,b=a.anchor?[0,0]:[15,18];return a.mouseOffset&&(b[0]+=a.mouseOffset[0],b[1]+=a.mouseOffset[1]),b},getAnchorPosition:function(){var a=this,b;a.anchor?a.tipAnchor=a.anchor.charAt(0):(b=a.defaultAlign.match(/^([a-z]+)-([a-z]+)(\?)?$/),a.tipAnchor=b[1].charAt(0));switch(a.tipAnchor){case"t":return"top";case"b":return"bottom";case"r":return"right"}return"left"},getAnchorAlign:function(){switch(this.anchor){case"top":return"tl-bl";case"left":return"tl-tr";case"right":return"tr-tl";default:return"bl-tl"}},getOffsets:function(){var a=this,b,c,d=a.getAnchorPosition().charAt(0);if(a.anchorToTarget&&!a.trackMouse)switch(d){case"t":c=[0,9];break;case"b":c=[0,-13];break;case"r":c=[-13,0];break;default:c=[9,0]}else switch(d){case"t":c=[-15-a.anchorOffset,30];break;case"b":c=[-19-a.anchorOffset,-13-a.el.dom.offsetHeight];break;case"r":c=[-15-a.el.dom.offsetWidth,-13-a.anchorOffset];break;default:c=[25,-13-a.anchorOffset]}return b=a.getMouseOffset(),c[0]+=b[0],c[1]+=b[1],c},onTargetOver:function(a){var b=this,c;if(b.disabled||a.within(b.target.dom,!0))return;c=a.getTarget(b.delegate),c&&(b.triggerElement=c,b.clearTimer("hide"),b.targetXY=a.getXY(),b.delayShow())},delayShow:function(){var a=this;a.hidden&&!a.showTimer?Ext.Date.getElapsed(a.lastActive)<a.quickShowInterval?a.show():a.showTimer=Ext.defer(a.show,a.showDelay,a):!a.hidden&&a.autoHide!==!1&&a.show()},onTargetOut:function(a){var b=this;if(b.disabled||a.within(b.target.dom,!0))return;b.clearTimer("show"),b.autoHide!==!1&&b.delayHide()},delayHide:function(){var a=this;!a.hidden&&!a.hideTimer&&(a.hideTimer=Ext.defer(a.hide,a.hideDelay,a))},hide:function(){var a=this;a.clearTimer("dismiss"),a.lastActive=new Date,a.anchorEl&&a.anchorEl.hide(),a.callParent(arguments),delete a.triggerElement},show:function(){var a=this;this.callParent(),this.hidden===!1&&(a.setPagePosition(-1e4,-1e4),a.anchor&&(a.anchor=a.origAnchor),a.showAt(a.getTargetXY()),a.anchor?(a.syncAnchor(),a.anchorEl.show()):a.anchorEl.hide())},showAt:function(a){var b=this;b.lastActive=new Date,b.clearTimers(),b.isVisible()||this.callParent(arguments),b.isVisible()&&(b.setPagePosition(a[0],a[1]),(b.constrainPosition||b.constrain)&&b.doConstrain(),b.toFront(!0)),b.dismissDelay&&b.autoHide!==!1&&(b.dismissTimer=Ext.defer(b.hide,b.dismissDelay,b)),b.anchor?(b.syncAnchor(),b.anchorEl.isVisible()||b.anchorEl.show()):b.anchorEl.hide()},syncAnchor:function(){var a=this,b,c,d;switch(a.tipAnchor.charAt(0)){case"t":b="b",c="tl",d=[20+a.anchorOffset,1];break;case"r":b="l",c="tr",d=[-1,12+a.anchorOffset];break;case"b":b="t",c="bl",d=[20+a.anchorOffset,-1];break;default:b="r",c="tl",d=[1,12+a.anchorOffset]}a.anchorEl.alignTo(a.el,b+"-"+c,d)},setPagePosition:function(a,b){var c=this;c.callParent(arguments),c.anchor&&c.syncAnchor()},clearTimer:function(a){a+="Timer",clearTimeout(this[a]),delete this[a]},clearTimers:function(){var a=this;a.clearTimer("show"),a.clearTimer("dismiss"),a.clearTimer("hide")},onShow:function(){var a=this;a.callParent(),a.mon(Ext.getDoc(),"mousedown",a.onDocMouseDown,a)},onHide:function(){var a=this;a.callParent(),a.mun(Ext.getDoc(),"mousedown",a.onDocMouseDown,a)},onDocMouseDown:function(a){var b=this;b.autoHide!==!0&&!b.closable&&!a.within(b.el.dom)&&(b.disable(),Ext.defer(b.doEnable,100,b))},doEnable:function(){this.isDestroyed||this.enable()},onDisable:function(){this.callParent(),this.clearTimers(),this.hide()},beforeDestroy:function(){var a=this;a.clearTimers(),Ext.destroy(a.anchorEl),delete a.anchorEl,delete a.target,delete a.anchorTarget,delete a.triggerElement,a.callParent()},onDestroy:function(){Ext.getDoc().un("mousedown",this.onDocMouseDown,this),this.callParent()}}),Ext.define("Ext.tip.QuickTip",{extend:"Ext.tip.ToolTip",alternateClassName:"Ext.QuickTip",interceptTitles:!1,title:"&#160;",tagConfig:{namespace:"data-",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor"},initComponent:function(){var a=this;a.target=a.target||Ext.getDoc(),a.targets=a.targets||{},a.callParent()},register:function(a){var b=Ext.isArray(a)?a:arguments,c=0,d=b.length,e,f,g;for(;c<d;c++){a=b[c],e=a.target;if(e)if(Ext.isArray(e))for(f=0,g=e.length;f<g;f++)this.targets[Ext.id(e[f])]=a;else this.targets[Ext.id(e)]=a}},unregister:function(a){delete this.targets[Ext.id(a)]},cancelShow:function(a){var b=this,c=b.activeTarget;a=Ext.get(a).dom,b.isVisible()?c&&c.el==a&&b.hide():c&&c.el==a&&b.clearTimer("show")},getTipCfg:function(a){var b=a.getTarget(),c=b.title,d;if(this.interceptTitles&&c&&Ext.isString(c))return b.qtip=c,b.removeAttribute("title"),a.preventDefault(),{text:c};d=this.tagConfig,b=a.getTarget("["+d.namespace+d.attribute+"]");if(b)return{target:b,text:b.getAttribute(d.namespace+d.attribute)}},onTargetOver:function(a){var b=this,c=a.getTarget(),d,e,f,g,h;if(b.disabled)return;b.targetXY=a.getXY();if(!c||c.nodeType!==1||c==document||c==document.body)return;if(b.activeTarget&&(c==b.activeTarget.el||Ext.fly(b.activeTarget.el).contains(c))){b.clearTimer("hide"),b.show();return}if(c){Ext.Object.each(b.targets,function(a,b){var e=Ext.fly(b.target);if(e&&(e.dom===c||e.contains(c)))return d=e.dom,!1});if(d){b.activeTarget=b.targets[d.id],b.activeTarget.el=c,b.anchor=b.activeTarget.anchor,b.anchor&&(b.anchorTarget=c),b.delayShow();return}}d=Ext.get(c),e=b.tagConfig,f=e.namespace,g=b.getTipCfg(a),g&&(g.target&&(c=g.target,d=Ext.get(c)),h=d.getAttribute(f+e.hide),b.activeTarget={el:c,text:g.text,width:+d.getAttribute(f+e.width)||null,autoHide:h!="user"&&h!=="false",title:d.getAttribute(f+e.title),cls:d.getAttribute(f+e.cls),align:d.getAttribute(f+e.align)},b.anchor=d.getAttribute(f+e.anchor),b.anchor&&(b.anchorTarget=c),b.delayShow())},onTargetOut:function(a){var b=this;if(b.activeTarget&&a.within(b.activeTarget.el)&&!b.getTipCfg(a))return;b.clearTimer("show"),b.autoHide!==!1&&b.delayHide()},showAt:function(a){var b=this,c=b.activeTarget;c&&(b.rendered||(b.render(Ext.getBody()),b.activeTarget=c),c.title?(b.setTitle(c.title||""),b.header.show()):b.header.hide(),b.body.update(c.text),b.autoHide=c.autoHide,b.dismissDelay=c.dismissDelay||b.dismissDelay,b.lastCls&&(b.el.removeCls(b.lastCls),delete b.lastCls),c.cls&&(b.el.addCls(c.cls),b.lastCls=c.cls),b.setWidth(c.width),b.anchor?b.constrainPosition=!1:c.align?(a=b.el.getAlignToXY(c.el,c.align),b.constrainPosition=!1):b.constrainPosition=!0),b.callParent([a])},hide:function(){delete this.activeTarget,this.callParent()}}),Ext.define("Ext.tip.QuickTipManager",function(){var a,b=!1;return{requires:["Ext.tip.QuickTip"],singleton:!0,alternateClassName:"Ext.QuickTips",init:function(c,d){if(!a){if(!Ext.isReady){Ext.onReady(function(){Ext.tip.QuickTipManager.init(c)});return}var e=Ext.apply({disabled:b},d),f=e.className,g=e.xtype;f?delete e.className:g&&(f="widget."+g,delete e.xtype),c!==!1&&(e.renderTo=document.body),a=Ext.create(f||"Ext.tip.QuickTip",e)}},destroy:function(){if(a){var b;a.destroy(),a=b}},ddDisable:function(){a&&!b&&a.disable()},ddEnable:function(){a&&!b&&a.enable()},enable:function(){a&&a.enable(),b=!1},disable:function(){a&&a.disable(),b=!0},isEnabled:function(){return a!==undefined&&!a.disabled},getQuickTip:function(){return a},register:function(){a.register.apply(a,arguments)},unregister:function(){a.unregister.apply(a,arguments)},tips:function(){a.register.apply(a,arguments)}}}()),Ext.define("Ext.app.Application",{extend:"Ext.app.Controller",requires:["Ext.ModelManager","Ext.data.Model","Ext.data.StoreManager","Ext.tip.QuickTipManager","Ext.ComponentManager","Ext.app.EventBus"],scope:undefined,enableQuickTips:!0,appFolder:"app",autoCreateViewport:!1,constructor:function(a){a=a||{},Ext.apply(this,a);var b=a.requires||[];Ext.Loader.setPath(this.name,this.appFolder),this.paths&&Ext.Object.each(this.paths,function(a,b){Ext.Loader.setPath(a,b)}),this.callParent(arguments),this.eventbus=Ext.create("Ext.app.EventBus");var c=Ext.Array.from(this.controllers),d=c&&c.length,e,f;this.controllers=Ext.create("Ext.util.MixedCollection"),this.autoCreateViewport&&b.push(this.getModuleClassName("Viewport","view"));for(e=0;e<d;e++)b.push(this.getModuleClassName(c[e],"controller"));Ext.require(b),Ext.onReady(function(){for(e=0;e<d;e++)f=this.getController(c[e]),f.init(this);this.onBeforeLaunch.call(this)},this)},control:function(a,b,c){this.eventbus.control(a,b,c)},launch:Ext.emptyFn,onBeforeLaunch:function(){this.enableQuickTips&&Ext.tip.QuickTipManager.init(),this.autoCreateViewport&&this.getView("Viewport").create(),this.launch.call(this.scope||this),this.launched=!0,this.fireEvent("launch",this),this.controllers.each(function(a){a.onLaunch(this)},this)},getModuleClassName:function(a,b){var c=Ext.Loader.getPrefix(a);return c.length>0&&c!==a?a:this.name+"."+b+"."+a},getController:function(a){var b=this.controllers.get(a);return b||(b=Ext.create(this.getModuleClassName(a,"controller"),{application:this,id:a}),this.controllers.add(b)),b},getStore:function(a){var b=Ext.StoreManager.get(a);return b||(b=Ext.create(this.getModuleClassName(a,"store"),{storeId:a})),b},getModel:function(a){return a=this.getModuleClassName(a,"model"),Ext.ModelManager.getModel(a)},getView:function(a){return a=this.getModuleClassName(a,"view"),Ext.ClassManager.get(a)}}),Ext.define("Ext.chart.Callout",{constructor:function(a){a.callouts&&(a.callouts.styles=Ext.applyIf(a.callouts.styles||{},{color:"#000",font:"11px Helvetica, sans-serif"}),this.callouts=Ext.apply(this.callouts||{},a.callouts),this.calloutsArray=[])},renderCallouts:function(){if(!this.callouts)return;var a=this,b=a.items,c=a.chart.animate,d=a.callouts,e=d.styles,f=a.calloutsArray,g=a.chart.store,h=g.getCount(),i=b.length/h,j=[],k,l,m,n;for(k=0,l=0;k<h;k++)for(m=0;m<i;m++){var o=b[l],p=f[l],q=g.getAt(k),r;r=d.filter(q);if(!r&&!p){l++;continue}p||(f[l]=p=a.onCreateCallout(q,o,k,r,m,l));for(n in p)p[n]&&p[n].setAttributes&&p[n].setAttributes(e,!0);if(!r)for(n in p)p[n]&&(p[n].setAttributes?p[n].setAttributes({hidden:!0},!0):p[n].setVisible&&p[n].setVisible(!1));d.renderer(p,q),a.onPlaceCallout(p,q,o,k,r,c,m,l,j),j.push(p),l++}this.hideCallouts(l)},onCreateCallout:function(a,b,c,d){var e=this,f=e.calloutsGroup,g=e.callouts,h=g.styles,i=h.width,j=h.height,k=e.chart,l=k.surface,m={lines:!1};return m.lines=l.add(Ext.apply({},{type:"path",path:"M0,0",stroke:e.getLegendColor()||"#555"},h)),g.items&&(m.panel=Ext.create("widget.panel",{style:"position: absolute;",width:i,height:j,items:g.items,renderTo:k.el})),m},hideCallouts:function(a){var b=this.calloutsArray,c=b.length,d,e;while(c-->a){d=b[c];for(e in d)d[e]&&d[e].hide(!0)}}}),Ext.define("Ext.draw.CompositeSprite",{extend:"Ext.util.MixedCollection",mixins:{animate:"Ext.util.Animate"},isCompositeSprite:!0,constructor:function(a){var b=this;a=a||{},Ext.apply(b,a),b.addEvents("mousedown","mouseup","mouseover","mouseout","click"),b.id=Ext.id(null,"ext-sprite-group-"),b.callParent()},onClick:function(a){this.fireEvent("click",a)},onMouseUp:function(a){this.fireEvent("mouseup",a)},onMouseDown:function(a){this.fireEvent("mousedown",a)},onMouseOver:function(a){this.fireEvent("mouseover",a)},onMouseOut:function(a){this.fireEvent("mouseout",a)},attachEvents:function(a){var b=this;a.on({scope:b,mousedown:b.onMouseDown,mouseup:b.onMouseUp,mouseover:b.onMouseOver,mouseout:b.onMouseOut,click:b.onClick})},add:function(a,b){var c=this.callParent(arguments);return this.attachEvents(c),c},insert:function(a,b,c){return this.callParent(arguments)},remove:function(a){var b=this;return a.un({scope:b,mousedown:b.onMouseDown,mouseup:b.onMouseUp,mouseover:b.onMouseOver,mouseout:b.onMouseOut,click:b.onClick}),b.callParent(arguments)},getBBox:function(){var a=0,b,c,d=this.items,e=this.length,f=Infinity,g=f,h=-f,i=f,j=-f,k,l;for(;a<e;a++)b=d[a],b.el&&(c=b.getBBox(),g=Math.min(g,c.x),i=Math.min(i,c.y),h=Math.max(h,c.height+c.y),j=Math.max(j,c.width+c.x));return{x:g,y:i,height:h-i,width:j-g}},setAttributes:function(a,b){var c=0,d=this.items,e=this.length;for(;c<e;c++)d[c].setAttributes(a,b);return this},hide:function(a){var b=0,c=this.items,d=this.length;for(;b<d;b++)c[b].hide(a);return this},show:function(a){var b=0,c=this.items,d=this.length;for(;b<d;b++)c[b].show(a);return this},redraw:function(){var a=this,b=0,c=a.items,d=a.getSurface(),e=a.length;if(d)for(;b<e;b++)d.renderItem(c[b]);return a},setStyle:function(a){var b=0,c=this.items,d=this.length,e,f;for(;b<d;b++)e=c[b],f=e.el,f&&f.setStyle(a)},addCls:function(a){var b=0,c=this.items,d=this.getSurface(),e=this.length;if(d)for(;b<e;b++)d.addCls(c[b],a)},removeCls:function(a){var b=0,c=this.items,d=this.getSurface(),e=this.length;if(d)for(;b<e;b++)d.removeCls(c[b],a)},getSurface:function(){var a=this.first();return a?a.surface:null},destroy:function(){var a=this,b=a.getSurface(),c;if(b)while(a.getCount()>0)c=a.first(),a.remove(c),b.remove(c);a.clearListeners()}}),Ext.define("Ext.layout.component.Auto",{alias:"layout.autocomponent",extend:"Ext.layout.component.Component",type:"autocomponent",onLayout:function(a,b){this.setTargetSize(a,b)}}),Ext.define("Ext.chart.theme.Theme",{requires:["Ext.draw.Color"],theme:"Base",themeAttrs:!1,initTheme:function(a){var b=this,c=Ext.chart.theme,d,e;if(a){a=a.split(":");for(d in c)if(d==a[0]){e=a[1]=="gradients",b.themeAttrs=new c[d]({useGradients:e}),e&&(b.gradients=b.themeAttrs.gradients),b.themeAttrs.background&&(b.background=b.themeAttrs.background);return}}}},function(){(function(){Ext.chart.theme=function(a,b){a=a||{};var c=0,d,e,f,g,h,i,j,k,l=[],m,n;a.baseColor&&(m=Ext.draw.Color.fromString(a.baseColor),n=m.getHSL()[2],n<.15?m=m.getLighter(.3):n<.3?m=m.getLighter(.15):n>.85?m=m.getDarker(.3):n>.7&&(m=m.getDarker(.15)),a.colors=[m.getDarker(.3).toString(),m.getDarker(.15).toString(),m.toString(),m.getLighter(.15).toString(),m.getLighter(.3).toString()],delete a.baseColor);if(a.colors){e=a.colors.slice(),h=b.markerThemes,g=b.seriesThemes,d=e.length,b.colors=e;for(;c<d;c++)f=e[c],j=h[c]||{},i=g[c]||{},j.fill=i.fill=j.stroke=i.stroke=f,h[c]=j,g[c]=i;b.markerThemes=h.slice(0,d),b.seriesThemes=g.slice(0,d)}for(k in b)k in a&&(Ext.isObject(a[k])&&Ext.isObject(b[k])?Ext.apply(b[k],a[k]):b[k]=a[k]);if(a.useGradients){e=b.colors||function(){var a=[];for(c=0,g=b.seriesThemes,d=g.length;c<d;c++)a.push(g[c].fill||g[c].stroke);return a}();for(c=0,d=e.length;c<d;c++)m=Ext.draw.Color.fromString(e[c]),m&&(f=m.getDarker(.1).toString(),m=m.toString(),k="theme-"+m.substr(1)+"-"+f.substr(1),l.push({id:k,angle:45,stops:{0:{color:m.toString()},100:{color:f.toString()}}}),e[c]="url(#"+k+")");b.gradients=l,b.colors=e}Ext.apply(this,b)}})()}),Ext.define("Ext.chart.Mask",{require:["Ext.chart.MaskLayer"],constructor:function(a){var b=this;b.addEvents("select"),a&&Ext.apply(b,a),b.mask&&b.on("afterrender",function(){var a=Ext.create("Ext.chart.MaskLayer",{renderTo:b.el});a.el.on({mousemove:function(a){b.onMouseMove(a)},mouseup:function(a){b.resized(a)}});var c=Ext.create("Ext.resizer.Resizer",{el:a.el,handles:"all",pinned:!0});c.on({resize:function(a){b.resized(a)}}),a.initDraggable(),b.maskType=b.mask,b.mask=a,b.maskSprite=b.surface.add({type:"path",path:["M",0,0],zIndex:1001,opacity:.7,hidden:!0,stroke:"#444"})},b,{single:!0})},resized:function(a){var b=this,c=b.bbox||b.chartBBox,d=c.x,e=c.y,f=c.width,g=c.height,h=b.mask.getBox(!0),i=Math.max,j=Math.min,k=h.x-d,l=h.y-e;k=i(k,d),l=i(l,e),k=j(k,f),l=j(l,g),h.x=k,h.y=l,b.fireEvent("select",b,h)},onMouseUp:function(a){var b=this,c=b.bbox||b.chartBBox,d=b.maskSelection;b.maskMouseDown=!1,b.mouseDown=!1,b.mouseMoved&&(b.onMouseMove(a),b.mouseMoved=!1,b.fireEvent("select",b,{x:d.x-c.x,y:d.y-c.y,width:d.width,height:d.height}))},onMouseDown:function(a){var b=this;b.mouseDown=!0,b.mouseMoved=!1,b.maskMouseDown={x:a.getPageX()-b.el.getX(),y:a.getPageY()-b.el.getY()}},onMouseMove:function(a){var b=this,c=b.maskType,d=b.bbox||b.chartBBox,e=d.x,f=d.y,g=Math,h=g.floor,i=g.abs,j=g.min,k=g.max,l=h(f+d.height),m=h(e+d.width),n=a.getPageX(),o=a.getPageY(),p=n-b.el.getX(),q=o-b.el.getY(),r=b.maskMouseDown,s;b.mouseMoved=b.mouseDown,p=k(p,e),q=k(q,f),p=j(p,m),q=j(q,l),r&&b.mouseDown?(c=="horizontal"?(q=f,r.y=l,o=b.el.getY()+d.height+b.insetPadding):c=="vertical"&&(p=e,r.x=m),m=r.x-p,l=r.y-q,s=["M",p,q,"l",m,0,0,l,-m,0,"z"],b.maskSelection={x:m>0?p:p+m,y:l>0?q:q+l,width:i(m),height:i(l)},b.mask.updateBox(b.maskSelection),b.mask.show(),b.maskSprite.setAttributes({hidden:!0},!0)):(c=="horizontal"?s=["M",p,f,"L",p,l]:c=="vertical"?s=["M",e,q,"L",m,q]:s=["M",p,f,"L",p,l,"M",e,q,"L",m,q],b.maskSprite.setAttributes({path:s,fill:b.maskMouseDown?b.maskSprite.stroke:!1,"stroke-width":c===!0?1:3,hidden:!1},!0))},onMouseLeave:function(a){var b=this;b.mouseMoved=!1,b.mouseDown=!1,b.maskMouseDown=!1,b.mask.hide(),b.maskSprite.hide(!0)}}),Ext.define("Ext.chart.Navigation",{constructor:function(){this.originalStore=this.store},setZoom:function(a){var b=this,c=b.axes,d=b.chartBBox,e=1/d.width,f=1/d.height,g={x:a.x*e,y:a.y*f,width:a.width*e,height:a.height*f};c.each(function(a){var b=a.calcEnds();if(a.position=="bottom"||a.position=="top"){var c=(b.to-b.from)*g.x+b.from,d=(b.to-b.from)*g.width+c;a.minimum=c,a.maximum=d}else{var d=(b.to-b.from)*(1-g.y)+b.from,c=d-(b.to-b.from)*g.height;a.minimum=c,a.maximum=d}}),b.redraw(!1)},restoreZoom:function(){this.store=this.substore=this.originalStore,this.redraw(!0)}}),Ext.define("Ext.chart.Shape",{singleton:!0,circle:function(a,b){return a.add(Ext.apply({type:"circle",x:b.x,y:b.y,stroke:null,radius:b.radius},b))},line:function(a,b){return a.add(Ext.apply({type:"rect",x:b.x-b.radius,y:b.y-b.radius,height:2*b.radius,width:2*b.radius/5},b))},square:function(a,b){return a.add(Ext.applyIf({type:"rect",x:b.x-b.radius,y:b.y-b.radius,height:2*b.radius,width:2*b.radius,radius:null},b))},triangle:function(a,b){return b.radius*=1.75,a.add(Ext.apply({type:"path",stroke:null,path:"M".concat(b.x,",",b.y,"m0-",b.radius*.58,"l",b.radius*.5,",",b.radius*.87,"-",b.radius,",0z")},b))},diamond:function(a,b){var c=b.radius;return c*=1.5,a.add(Ext.apply({type:"path",stroke:null,path:["M",b.x,b.y-c,"l",c,c,-c,c,-c,-c,c,-c,"z"]},b))},cross:function(a,b){var c=b.radius;return c/=1.7,a.add(Ext.apply({type:"path",stroke:null,path:"M".concat(b.x-c,",",b.y,"l",[-c,-c,c,-c,c,c,c,-c,c,c,-c,c,c,c,-c,c,-c,-c,-c,c,-c,-c,"z"])},b))},plus:function(a,b){var c=b.radius/1.3;return a.add(Ext.apply({type:"path",stroke:null,path:"M".concat(b.x-c/2,",",b.y-c/2,"l",[0,-c,c,0,0,c,c,0,0,c,-c,0,0,c,-c,0,0,-c,-c,0,0,-c,"z"])},b))},arrow:function(a,b){var c=b.radius;return a.add(Ext.apply({type:"path",path:"M".concat(b.x-c*.7,",",b.y-c*.4,"l",[c*.6,0,0,-c*.4,c,c*.8,-c,c*.8,0,-c*.4,-c*.6,0],"z")},b))},drop:function(a,b,c,d,e,f){e=e||30,f=f||0,a.add({type:"path",path:["M",b,c,"l",e,0,"A",e*.4,e*.4,0,1,0,b+e*.7,c-e*.7,"z"],fill:"#000",stroke:"none",rotate:{degrees:22.5-f,x:b,y:c}}),f=(f+90)*Math.PI/180,a.add({type:"text",x:b+e*Math.sin(f)-10,y:c+e*Math.cos(f)+5,text:d,"font-size":e*12/40,stroke:"none",fill:"#fff"})}}),Ext.define("Ext.draw.Surface",{mixins:{observable:"Ext.util.Observable"},requires:["Ext.draw.CompositeSprite"],uses:["Ext.draw.engine.Svg","Ext.draw.engine.Vml"],separatorRe:/[, ]+/,statics:{create:function(a,b){b=b||["Svg","Vml"];var c=0,d=b.length,e;for(;c<d;c++)if(Ext.supports[b[c]])return Ext.create("Ext.draw.engine."+b[c],a);return!1}},availableAttrs:{blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,"dominant-baseline":"auto",fill:"none","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:"",height:0,hidden:!1,href:"http://sencha.com/",opacity:1,path:"M0,0",radius:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank",text:"","text-anchor":"middle",title:"Ext Draw",width:0,x:0,y:0,zIndex:0},container:undefined,height:352,width:512,x:0,y:0,orderSpritesByZIndex:!0,constructor:function(a){var b=this;a=a||{},Ext.apply(b,a),b.domRef=Ext.getDoc().dom,b.customAttributes={},b.addEvents("mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","click"),b.mixins.observable.constructor.call(b),b.getId(),b.initGradients(),b.initItems(),b.renderTo&&(b.render(b.renderTo),delete b.renderTo),b.initBackground(a.background)},initSurface:Ext.emptyFn,renderItem:Ext.emptyFn,renderItems:Ext.emptyFn,setViewBox:function(a,b,c,d){isFinite(a)&&isFinite(b)&&isFinite(c)&&isFinite(d)&&(this.viewBox={x:a,y:b,width:c,height:d},this.applyViewBox())},addCls:Ext.emptyFn,removeCls:Ext.emptyFn,setStyle:Ext.emptyFn,initGradients:function(){var a=this.gradients;a&&Ext.each(a,this.addGradient,this)},initItems:function(){var a=this.items;this.items=Ext.create("Ext.draw.CompositeSprite"),this.groups=Ext.create("Ext.draw.CompositeSprite"),a&&this.add(a)},initBackground:function(a){var b=this,c=b.width,d=b.height,e,f,g;a&&(a.gradient?(f=a.gradient,e=f.id,b.addGradient(f),b.background=b.add({type:"rect",x:0,y:0,width:c,height:d,fill:"url(#"+e+")"})):a.fill?b.background=b.add({type:"rect",x:0,y:0,width:c,height:d,fill:a.fill}):a.image&&(b.background=b.add({type:"image",x:0,y:0,width:c,height:d,src:a.image})))},setSize:function(a,b){this.background&&this.background.setAttributes({width:a,height:b,hidden:!1},!0),this.applyViewBox()},scrubAttrs:function(a){var b,c={},d={},e=a.attr;for(b in e)this.translateAttrs.hasOwnProperty(b)?(c[this.translateAttrs[b]]=e[b],d[this.translateAttrs[b]]=!0):this.availableAttrs.hasOwnProperty(b)&&!d[b]&&(c[b]=e[b]);return c},onClick:function(a){this.processEvent("click",a)},onMouseUp:function(a){this.processEvent("mouseup",a)},onMouseDown:function(a){this.processEvent("mousedown",a)},onMouseOver:function(a){this.processEvent("mouseover",a)},onMouseOut:function(a){this.processEvent("mouseout",a)},onMouseMove:function(a){this.fireEvent("mousemove",a)},onMouseEnter:Ext.emptyFn,onMouseLeave:Ext.emptyFn,addGradient:Ext.emptyFn,add:function(){var a=Array.prototype.slice.call(arguments),b,c,d=a.length>1;if(d||Ext.isArray(a[0])){var e=d?a:a[0],f=[],g,h,i;for(g=0,h=e.length;g<h;g++)i=e[g],i=this.add(i),f.push(i);return f}return b=this.prepareItems(a[0],!0)[0],this.insertByZIndex(b),this.onAdd(b),b},insertByZIndex:function(a){var b=this,c=b.items.items,d=c.length,e=Math.ceil,f=a.attr.zIndex,g=d,h=g-1,i=0,j;if(b.orderSpritesByZIndex&&d&&f<c[h].attr.zIndex){while(i<=h){g=e((i+h)/2),j=c[g].attr.zIndex;if(j>f)h=g-1;else{if(!(j<f))break;i=g+1}}while(g<d&&c[g].attr.zIndex<=f)g++}return b.items.insert(g,a),g},onAdd:function(a){var b=a.group,c=a.draggable,d,e,f;if(b){d=[].concat(b),e=d.length;for(f=0;f<e;f++)b=d[f],this.getGroup(b).add(a);delete a.group}c&&a.initDraggable()},remove:function(a,b){a&&(this.items.remove(a),this.groups.each(function(b){b.remove(a)}),a.onRemove(),b===!0&&a.destroy())},removeAll:function(a){var b=this.items.items,c=b.length,d;for(d=c-1;d>-1;d--)this.remove(b[d],a)},onRemove:Ext.emptyFn,onDestroy:Ext.emptyFn,applyViewBox:function(){var a=this,b=a.viewBox,c=a.width,d=a.height,e,f,g,h,i,j,k;b&&(c||d)&&(e=b.x,f=b.y,g=b.width,h=b.height,i=d/h,j=c/g,g*i<c&&(e-=(c-g*i)/2/i),h*j<d&&(f-=(d-h*j)/2/j),k=1/Math.min(g,i),a.viewBoxShift={dx:-e,dy:-f,scale:k})},transformToViewBox:function(a,b){if(this.viewBoxShift){var c=this,d=c.viewBoxShift;return[a*d.scale-d.dx,b*d.scale-d.dy]}return[a,b]},applyTransformations:function(a){a.bbox.transform=0,this.transform(a);var b=this,c=!1,d=a.attr;if(d.translation.x!=null||d.translation.y!=null)b.translate(a),c=!0;if(d.scaling.x!=null||d.scaling.y!=null)b.scale(a),c=!0;d.rotation.degrees!=null&&(b.rotate(a),c=!0),c&&(a.bbox.transform=0,this.transform(a),a.transformations=[])},rotate:function(a){var b,c=a.attr.rotation.degrees,d=a.attr.rotation.x,e=a.attr.rotation.y;if(!Ext.isNumber(d)||!Ext.isNumber(e))b=this.getBBox(a),d=Ext.isNumber(d)?d:b.x+b.width/2,e=Ext.isNumber(e)?e:b.y+b.height/2;a.transformations.push({type:"rotate",degrees:c,x:d,y:e})},translate:function(a){var b=a.attr.translation.x||0,c=a.attr.translation.y||0;a.transformations.push({type:"translate",x:b,y:c})},scale:function(a){var b,c=a.attr.scaling.x||1,d=a.attr.scaling.y||1,e=a.attr.scaling.centerX,f=a.attr.scaling.centerY;if(!Ext.isNumber(e)||!Ext.isNumber(f))b=this.getBBox(a),e=Ext.isNumber(e)?e:b.x+b.width/2,f=Ext.isNumber(f)?f:b.y+b.height/2;a.transformations.push({type:"scale",x:c,y:d,centerX:e,centerY:f})},rectPath:function(a,b,c,d,e){return e?[["M",a+e,b],["l",c-e*2,0],["a",e,e,0,0,1,e,e],["l",0,d-e*2],["a",e,e,0,0,1,-e,e],["l",e*2-c,0],["a",e,e,0,0,1,-e,-e],["l",0,e*2-d],["a",e,e,0,0,1,e,-e],["z"]]:[["M",a,b],["l",c,0],["l",0,d],["l",-c,0],["z"]]},ellipsePath:function(a,b,c,d){return d==null&&(d=c),[["M",a,b],["m",0,-d],["a",c,d,0,1,1,0,2*d],["a",c,d,0,1,1,0,-2*d],["z"]]},getPathpath:function(a){return a.attr.path},getPathcircle:function(a){var b=a.attr;return this.ellipsePath(b.x,b.y,b.radius,b.radius)},getPathellipse:function(a){var b=a.attr;return this.ellipsePath(b.x,b.y,b.radiusX||b.width/2||0,b.radiusY||b.height/2||0)},getPathrect:function(a){var b=a.attr;return this.rectPath(b.x,b.y,b.width,b.height,b.r)},getPathimage:function(a){var b=a.attr;return this.rectPath(b.x||0,b.y||0,b.width,b.height)},getPathtext:function(a){var b=this.getBBoxText(a);return this.rectPath(b.x,b.y,b.width,b.height)},createGroup:function(a){var b=this.groups.get(a);return b||(b=Ext.create("Ext.draw.CompositeSprite",{surface:this}),b.id=a||Ext.id(null,"ext-surface-group-"),this.groups.add(b)),b},getGroup:function(a){if(typeof a=="string"){var b=this.groups.get(a);b||(b=this.createGroup(a))}else b=a;return b},prepareItems:function(a,b){a=[].concat(a);var c,d,e;for(d=0,e=a.length;d<e;d++)c=a[d],c instanceof Ext.draw.Sprite?c.surface=this:(c.surface=this,a[d]=this.createItem(c));return a},setText:Ext.emptyFn,createItem:Ext.emptyFn,getId:function(){return this.id||(this.id=Ext.id(null,"ext-surface-"))},destroy:function(){delete this.domRef,this.removeAll()}}),Ext.define("Ext.layout.component.Draw",{alias:"layout.draw",extend:"Ext.layout.component.Auto",type:"draw",onLayout:function(a,b){this.owner.surface.setSize(a,b),this.callParent(arguments)}}),Ext.define("Ext.draw.Component",{alias:"widget.draw",extend:"Ext.Component",requires:["Ext.draw.Surface","Ext.layout.component.Draw"],enginePriority:["Svg","Vml"],baseCls:Ext.baseCSSPrefix+"surface",componentLayout:"draw",viewBox:!0,autoSize:!1,initComponent:function(){this.callParent(arguments),this.addEvents("mousedown","mouseup","mousemove","mouseenter","mouseleave","click")},onRender:function(){var a=this,b=a.viewBox,c=a.autoSize,d,e,f,g,h,i;a.callParent(arguments);if(a.createSurface()!==!1){e=a.surface.items;if(b||c)d=e.getBBox(),f=d.width,g=d.height,h=d.x,i=d.y,a.viewBox?a.surface.setViewBox(h,i,f,g):a.autoSizeSurface()}},autoSizeSurface:function(){var a=this,b=a.surface.items,c=b.getBBox(),d=c.width,e=c.height;b.setAttributes({translate:{x:-c.x,y:-c.y+ +Ext.isOpera}},!0),a.rendered?(a.setSize(d,e),a.surface.setSize(d,e)):a.surface.setSize(d,e),a.el.setSize(d,e)},createSurface:function(){function b(a){return function(b){this.fireEvent(a,b)}}var a=Ext.draw.Surface.create(Ext.apply({},{width:this.width,height:this.height,renderTo:this.el},this.initialConfig));if(!a)return!1;this.surface=a,a.on({scope:this,mouseup:b("mouseup"),mousedown:b("mousedown"),mousemove:b("mousemove"),mouseenter:b("mouseenter"),mouseleave:b("mouseleave"),click:b("click")})},onDestroy:function(){var a=this.surface;a&&a.destroy(),this.callParent(arguments)}}),Ext.define("Ext.chart.LegendItem",{extend:"Ext.draw.CompositeSprite",requires:["Ext.chart.Shape"],x:0,y:0,zIndex:500,constructor:function(a){this.callParent(arguments),this.createLegend(a)},createLegend:function(a){function s(a){var b=d[a];return Ext.isArray(b)?b[f]:b}var b=this,c=a.yFieldIndex,d=b.series,e=d.type,f=b.yFieldIndex,g=b.legend,h=b.surface,i=g.x+b.x,j=g.y+b.y,k,l=b.zIndex,m,n,o,p,q=!1,r=Ext.apply(d.seriesStyle,d.style);n=b.add("label",h.add({type:"text",x:20,y:0,zIndex:l||0,font:g.labelFont,text:s("title")||s("yField")}));if(e==="line"||e==="scatter"){e==="line"&&b.add("line",h.add({type:"path",path:"M0.5,0.5L16.5,0.5",zIndex:l,"stroke-width":d.lineWidth,"stroke-linejoin":"round","stroke-dasharray":d.dash,stroke:r.stroke||"#000",style:{cursor:"pointer"}}));if(d.showMarkers||e==="scatter")m=Ext.apply(d.markerStyle,d.markerConfig||{}),b.add("marker",Ext.chart.Shape[m.type](h,{fill:m.fill,x:8.5,y:.5,zIndex:l,radius:m.radius||m.size,style:{cursor:"pointer"}}))}else b.add("box",h.add({type:"rect",zIndex:l,x:0,y:0,width:12,height:12,fill:d.getLegendColor(c),style:{cursor:"pointer"}}));b.setAttributes({hidden:!1},!0),k=b.getBBox(),o=b.add("mask",h.add({type:"rect",x:k.x,y:k.y,width:k.width||20,height:k.height||20,zIndex:(l||0)+1e3,fill:"#f00",opacity:0,style:{cursor:"pointer"}})),b.on("mouseover",function(){n.setStyle({"font-weight":"bold"}),o.setStyle({cursor:"pointer"}),d._index=c,d.highlightItem()},b),b.on("mouseout",function(){n.setStyle({"font-weight":"normal"}),d._index=c,d.unHighlightItem()},b),d.visibleInLegend(c)||(q=!0,n.setAttributes({opacity:.5},!0)),b.on("mousedown",function(){q?(d.showAll(),n.setAttributes({opacity:1},!0)):(d.hideAll(),n.setAttributes({opacity:.5},!0)),q=!q},b),b.updatePosition({x:0,y:0})},updatePosition:function(a){var b=this,c=b.items,d=c.length,e=0,f;a||(a=b.legend);for(;e<d;e++){f=c[e];switch(f.type){case"text":f.setAttributes({x:20+a.x+b.x,y:a.y+b.y},!0);break;case"rect":f.setAttributes({translate:{x:a.x+b.x,y:a.y+b.y-6}},!0);break;default:f.setAttributes({translate:{x:a.x+b.x,y:a.y+b.y}},!0)}}}}),Ext.define("Ext.chart.Legend",{requires:["Ext.chart.LegendItem"],visible:!0,position:"bottom",x:0,y:0,labelFont:"12px Helvetica, sans-serif",boxStroke:"#000",boxStrokeWidth:1,boxFill:"#FFF",itemSpacing:10,padding:5,width:0,height:0,boxZIndex:100,constructor:function(a){var b=this;a&&Ext.apply(b,a),b.items=[],b.isVertical="left|right|float".indexOf(b.position)!==-1,b.origX=b.x,b.origY=b.y},create:function(){var a=this;a.createBox(),a.createItems(),!a.created&&a.isDisplayed()&&(a.created=!0,a.chart.series.each(function(b){b.on("titlechange",function(){a.create(),a.updatePosition()})}))},isDisplayed:function(){return this.visible&&this.chart.series.findIndex("showInLegend",!0)!==-1},createItems:function(){var a=this,b=a.chart,c=b.surface,d=a.items,e=a.padding,f=a.itemSpacing,g=2,h=0,i=0,j=0,k=0,l=a.isVertical,m=Math,n=m.floor,o=m.max,p=0,q=0,r=d?d.length:0,s,t,u,v,w,x,y;if(r)for(;q<r;q++)d[q].destroy();d.length=[],b.series.each(function(a,c){a.showInLegend&&Ext.each([].concat(a.yField),function(g,m){v=Ext.create("Ext.chart.LegendItem",{legend:this,series:a,surface:b.surface,yFieldIndex:m}),w=v.getBBox(),y=w.width,x=w.height,c+m===0?u=l?e+x/2:e:u=f/(l?2:1),v.x=n(l?e:j+u),v.y=n(l?k+u:e+x/2),j+=y+u,k+=x+u,h=o(h,y),i=o(i,x),d.push(v)},this)},a),a.width=n((l?h:j)+e*2),l&&d.length===1&&(g=1),a.height=n((l?k-g*u:i)+e*2),a.itemHeight=i},getBBox:function(){var a=this;return{x:Math.round(a.x)-a.boxStrokeWidth/2,y:Math.round(a.y)-a.boxStrokeWidth/2,width:a.width,height:a.height}},createBox:function(){var a=this,b;a.boxSprite&&a.boxSprite.destroy(),b=a.boxSprite=a.chart.surface.add(Ext.apply({type:"rect",stroke:a.boxStroke,"stroke-width":a.boxStrokeWidth,fill:a.boxFill,zIndex:a.boxZIndex},a.getBBox())),b.redraw()},updatePosition:function(){var a=this,b,c,d=a.width,e=a.height,f=a.padding,g=a.chart,h=g.chartBBox,i=g.insetPadding,j=h.width-i*2,k=h.height-i*2,l=h.x+i,m=h.y+i,n=g.surface,o=Math.floor;if(a.isDisplayed()){switch(a.position){case"left":b=i,c=o(m+k/2-e/2);break;case"right":b=o(n.width-d)-i,c=o(m+k/2-e/2);break;case"top":b=o(l+j/2-d/2),c=i;break;case"bottom":b=o(l+j/2-d/2),c=o(n.height-e)-i;break;default:b=o(a.origX)+i,c=o(a.origY)+i}a.x=b,a.y=c,Ext.each(a.items,function(a){a.updatePosition()}),a.boxSprite.setAttributes(a.getBBox(),!0)}}}),Ext.define("Ext.chart.Chart",{alias:"widget.chart",extend:"Ext.draw.Component",mixins:{themeManager:"Ext.chart.theme.Theme",mask:"Ext.chart.Mask",navigation:"Ext.chart.Navigation"},requires:["Ext.util.MixedCollection","Ext.data.StoreManager","Ext.chart.Legend","Ext.util.DelayedTask"],viewBox:!1,animate:!1,legend:!1,insetPadding:10,enginePriority:["Svg","Vml"],background:!1,constructor:function(a){var b=this,c;a=Ext.apply({},a),b.initTheme(a.theme||b.theme),b.gradients&&Ext.apply(a,{gradients:b.gradients}),b.background&&Ext.apply(a,{background:b.background}),a.animate&&(c={easing:"ease",duration:500},Ext.isObject(a.animate)?a.animate=Ext.applyIf(a.animate,c):a.animate=c),b.mixins.mask.constructor.call(b,a),b.mixins.navigation.constructor.call(b,a),b.callParent([a])},getChartStore:function(){return this.substore||this.store},initComponent:function(){var a=this,b,c;a.callParent(),a.addEvents("itemmousedown","itemmouseup","itemmouseover","itemmouseout","itemclick","itemdoubleclick","itemdragstart","itemdrag","itemdragend","beforerefresh","refresh"),Ext.applyIf(a,{zoom:{width:1,height:1,x:0,y:0}}),a.maxGutter=[0,0],a.store=Ext.data.StoreManager.lookup(a.store),b=a.axes,a.axes=Ext.create("Ext.util.MixedCollection",!1,function(a){return a.position}),b&&a.axes.addAll(b),c=a.series,a.series=Ext.create("Ext.util.MixedCollection",!1,function(a){return a.seriesId||(a.seriesId=Ext.id(null,"ext-chart-series-"))}),c&&a.series.addAll(c),a.legend!==!1&&(a.legend=Ext.create("Ext.chart.Legend",Ext.applyIf({chart:a},a.legend))),a.on({mousemove:a.onMouseMove,mouseleave:a.onMouseLeave,mousedown:a.onMouseDown,mouseup:a.onMouseUp,scope:a})},afterComponentLayout:function(a,b){var c=this;Ext.isNumber(a)&&Ext.isNumber(b)&&(c.curWidth=a,c.curHeight=b,c.redraw(!0)),this.callParent(arguments)},redraw:function(a){var b=this,c=b.chartBBox={x:0,y:0,height:b.curHeight,width:b.curWidth},d=b.legend;b.surface.setSize(c.width,c.height),b.series.each(b.initializeSeries,b),b.axes.each(b.initializeAxis,b),b.axes.each(function(a){a.processView()}),b.axes.each(function(a){a.drawAxis(!0)}),d!==!1&&d.create(),b.alignAxes(),b.legend!==!1&&d.updatePosition(),b.getMaxGutter(),b.resizing=!!a,b.axes.each(b.drawAxis,b),b.series.each(b.drawCharts,b),b.resizing=!1},afterRender:function(){var a,b=this;this.callParent(),b.categoryNames&&b.setCategoryNames(b.categoryNames),b.tipRenderer&&(a=b.getFunctionRef(b.tipRenderer),b.setTipRenderer(a.fn,a.scope)),b.bindStore(b.store,!0),b.refresh()},getEventXY:function(a){var b=this,c=this.surface.getRegion(),d=a.getXY(),e=d[0]-c.left,f=d[1]-c.top;return[e,f]},onClick:function(a){var b=this,c=b.getEventXY(a),d;b.series.each(function(a){Ext.draw.Draw.withinBox(c[0],c[1],a.bbox)&&a.getItemForPoint&&(d=a.getItemForPoint(c[0],c[1]),d&&a.fireEvent("itemclick",d))},b)},onMouseDown:function(a){var b=this,c=b.getEventXY(a),d;b.mask&&b.mixins.mask.onMouseDown.call(b,a),b.series.each(function(a){Ext.draw.Draw.withinBox(c[0],c[1],a.bbox)&&a.getItemForPoint&&(d=a.getItemForPoint(c[0],c[1]),d&&a.fireEvent("itemmousedown",d))},b)},onMouseUp:function(a){var b=this,c=b.getEventXY(a),d;b.mask&&b.mixins.mask.onMouseUp.call(b,a),b.series.each(function(a){Ext.draw.Draw.withinBox(c[0],c[1],a.bbox)&&a.getItemForPoint&&(d=a.getItemForPoint(c[0],c[1]),d&&a.fireEvent("itemmouseup",d))},b)},onMouseMove:function(a){var b=this,c=b.getEventXY(a),d,e,f,g;b.mask&&b.mixins.mask.onMouseMove.call(b,a),b.series.each(function(a){if(Ext.draw.Draw.withinBox(c[0],c[1],a.bbox)){if(a.getItemForPoint){d=a.getItemForPoint(c[0],c[1]),e=a._lastItemForPoint,f=a._lastStoreItem,g=a._lastStoreField;if(d!==e||d&&(d.storeItem!=f||d.storeField!=g))e&&(a.fireEvent("itemmouseout",e),delete a._lastItemForPoint,delete a._lastStoreField,delete a._lastStoreItem),d&&(a.fireEvent("itemmouseover",d),a._lastItemForPoint=d,a._lastStoreItem=d.storeItem,a._lastStoreField=d.storeField)}}else e=a._lastItemForPoint,e&&(a.fireEvent("itemmouseout",e),delete a._lastItemForPoint,delete a._lastStoreField,delete a._lastStoreItem)},b)},onMouseLeave:function(a){var b=this;b.mask&&b.mixins.mask.onMouseLeave.call(b,a),b.series.each(function(a){delete a._lastItemForPoint})},delayRefresh:function(){var a=this;a.refreshTask||(a.refreshTask=Ext.create("Ext.util.DelayedTask",a.refresh,a)),a.refreshTask.delay(a.refreshBuffer)},refresh:function(){var a=this;a.rendered&&a.curWidth!==undefined&&a.curHeight!==undefined&&a.fireEvent("beforerefresh",a)!==!1&&(a.redraw(),a.fireEvent("refresh",a))},bindStore:function(a,b){var c=this;!b&&c.store&&(a!==c.store&&c.store.autoDestroy?c.store.destroyStore():(c.store.un("datachanged",c.refresh,c),c.store.un("add",c.delayRefresh,c),c.store.un("remove",c.delayRefresh,c),c.store.un("update",c.delayRefresh,c),c.store.un("clear",c.refresh,c))),a&&(a=Ext.data.StoreManager.lookup(a),a.on({scope:c,datachanged:c.refresh,add:c.delayRefresh,remove:c.delayRefresh,update:c.delayRefresh,clear:c.refresh})),c.store=a,a&&!b&&c.refresh()},initializeAxis:function(a){var b=this,c=b.chartBBox,d=c.width,e=c.height,f=c.x,g=c.y,h=b.themeAttrs,i={chart:b};h&&(i.axisStyle=Ext.apply({},h.axis),i.axisLabelLeftStyle=Ext.apply({},h.axisLabelLeft),i.axisLabelRightStyle=Ext.apply({},h.axisLabelRight),i.axisLabelTopStyle=Ext.apply({},h.axisLabelTop),i.axisLabelBottomStyle=Ext.apply({},h.axisLabelBottom),i.axisTitleLeftStyle=Ext.apply({},h.axisTitleLeft),i.axisTitleRightStyle=Ext.apply({},h.axisTitleRight),i.axisTitleTopStyle=Ext.apply({},h.axisTitleTop),i.axisTitleBottomStyle=Ext.apply({},h.axisTitleBottom));switch(a.position){case"top":Ext.apply(i,{length:d,width:e,x:f,y:g});break;case"bottom":Ext.apply(i,{length:d,width:e,x:f,y:e});break;case"left":Ext.apply(i,{length:e,width:d,x:f,y:e});break;case"right":Ext.apply(i,{length:e,width:d,x:d,y:e})}a.chart?Ext.apply(a,i):(Ext.apply(i,a),a=b.axes.replace(Ext.createByAlias("axis."+a.type.toLowerCase(),i)))},alignAxes:function(){function h(a){var c=b.findIndex("position",a);return c<0?null:b.getAt(c)}var a=this,b=a.axes,c=a.legend,d=["top","right","bottom","left"],e,f=a.insetPadding,g={top:f,right:f,bottom:f,left:f};Ext.each(d,function(a){var b=a==="left"||a==="right",d=h(a),e;c!==!1&&c.position===a&&(e=c.getBBox(),g[a]+=(b?e.width:e.height)+g[a]),d&&d.bbox&&(e=d.bbox,g[a]+=b?e.width:e.height)}),e={x:g.left,y:g.top,width:a.curWidth-g.left-g.right,height:a.curHeight-g.top-g.bottom},a.chartBBox=e,b.each(function(a){var b=a.position,c=b==="left"||b==="right";a.x=b==="right"?e.x+e.width:e.x,a.y=b==="top"?e.y:e.y+e.height,a.width=c?e.width:e.height,a.length=c?e.height:e.width})},initializeSeries:function(a,b){var c=this,d=c.themeAttrs,e,f,g,h,i,j=[],k=0,l,m={chart:c,seriesId:a.seriesId};if(d){g=d.seriesThemes,i=d.markerThemes,e=Ext.apply({},d.series),f=Ext.apply({},d.marker),m.seriesStyle=Ext.apply(e,g[b%g.length]),m.seriesLabelStyle=Ext.apply({},d.seriesLabel),m.markerStyle=Ext.apply(f,i[b%i.length]);if(d.colors)m.colorArrayStyle=d.colors;else{j=[];for(l=g.length;k<l;k++)h=g[k],(h.fill||h.stroke)&&j.push(h.fill||h.stroke);j.length&&(m.colorArrayStyle=j)}m.seriesIdx=b}a instanceof Ext.chart.series.Series?Ext.apply(a,m):(Ext.applyIf(m,a),a=c.series.replace(Ext.createByAlias("series."+a.type.toLowerCase(),m))),a.initialize&&a.initialize()},getMaxGutter:function(){var a=this,b=[0,0];a.series.each(function(a){var c=a.getGutters&&a.getGutters()||[0,0];b[0]=Math.max(b[0],c[0]),b[1]=Math.max(b[1],c[1])}),a.maxGutter=b},drawAxis:function(a){a.drawAxis()},drawCharts:function(a){a.triggerafterrender=!1,a.drawSeries(),this.animate||a.fireEvent("afterrender")},destroy:function(){Ext.destroy(this.surface),this.bindStore(null),this.callParent(arguments)}}),Ext.define("Ext.chart.Highlight",{requires:["Ext.fx.Anim"],highlight:!1,highlightCfg:null,constructor:function(a){a.highlight&&(a.highlight!==!0?this.highlightCfg=Ext.apply({},a.highlight):this.highlightCfg={fill:"#fdd",radius:20,lineWidth:5,stroke:"#f55"})},highlightItem:function(a){if(!a)return;var b=this,c=a.sprite,d=b.highlightCfg,e=b.chart.surface,f=b.chart.animate,g,h,i,j;if(!b.highlight||!c||c._highlighted)return;c._anim&&(c._anim.paused=!0),c._highlighted=!0;if(!c._defaults){c._defaults=Ext.apply({},c.attr),h={},i={};for(g in d){g in c._defaults||(c._defaults[g]=e.availableAttrs[g]),h[g]=c._defaults[g],i[g]=d[g];if(Ext.isObject(d[g])){h[g]={},i[g]={},Ext.apply(c._defaults[g],c.attr[g]),Ext.apply(h[g],c._defaults[g]);for(j in c._defaults[g])j in d[g]?i[g][j]=d[g][j]:i[g][j]=h[g][j];for(j in d[g])j in i[g]||(i[g][j]=d[g][j])}}c._from=h,c._to=i,c._endStyle=i}f?c._anim=Ext.create("Ext.fx.Anim",{target:c,from:c._from,to:c._to,duration:150}):c.setAttributes(c._to,!0)},unHighlightItem:function(){if(!this.highlight||!this.items)return;var a=this,b=a.items,c=b.length,d=a.highlightCfg,e=a.chart.animate,f=0,g,h,i;for(;f<c;f++){if(!b[f])continue;i=b[f].sprite;if(i&&i._highlighted){i._anim&&(i._anim.paused=!0),g={};for(h in d)Ext.isObject(i._defaults[h])?(g[h]={},Ext.apply(g[h],i._defaults[h])):g[h]=i._defaults[h];e?(i._endStyle=g,i._anim=Ext.create("Ext.fx.Anim",{target:i,to:g,duration:150})):i.setAttributes(g,!0),delete i._highlighted}}},cleanHighlights:function(){if(!this.highlight)return;var a=this.group,b=this.markerGroup,c=0,d;for(d=a.getCount();c<d;c++)delete a.getAt(c)._defaults;if(b)for(d=b.getCount();c<d;c++)delete b.getAt(c)._defaults}}),Ext.define("Ext.chart.Label",{requires:["Ext.draw.Color"],colorStringRe:/url\s*\(\s*#([^\/)]+)\s*\)/,constructor:function(a){var b=this;b.label=Ext.applyIf(b.label||{},{display:"none",color:"#000",field:"name",minMargin:50,font:"11px Helvetica, sans-serif",orientation:"horizontal",renderer:function(a){return a}}),b.label.display!=="none"&&(b.labelsGroup=b.chart.surface.getGroup(b.seriesId+"-labels"))},renderLabels:function(){var a=this,b=a.chart,c=b.gradients,d=a.items,e=b.animate,f=a.label,g=f.display,h=f.color,i=[].concat(f.field),j=a.labelsGroup,k=(j||0)&&j.length,l=a.chart.store,m=l.getCount(),n=(d||0)&&d.length,o=n/m,p=(c||0)&&c.length,q=Ext.draw.Color,r=[],s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J;if(g=="none")return;if(n==0)while(k--)r.push(k);else for(t=0,u=0,v=0;t<m;t++){w=0;for(x=0;x<o;x++){C=d[u],D=j.getAt(v),E=l.getAt(t);while(this.__excludes&&this.__excludes[w]&&o>1)i[x]&&r.push(v),w++;!C&&D&&(D.hide(!0),v++);if(C&&i[x]){D||(D=a.onCreateLabel(E,C,t,g,x,w)),a.onPlaceLabel(D,E,C,t,g,e,x,w),v++;if(f.contrast&&C.sprite){F=C.sprite,F._endStyle?J=F._endStyle.fill:F._to?J=F._to.fill:J=F.attr.fill,J=J||F.attr.fill,G=q.fromString(J);if(J&&!G){J=J.match(a.colorStringRe)[1];for(y=0;y<p;y++){s=c[y];if(s.id==J){B=0,z=0;for(A in s.stops)B++,z+=q.fromString(s.stops[A].color).getGrayscale();H=z/B/255;break}}}else H=G.getGrayscale()/255;D.isOutside&&(H=1),I=q.fromString(D.attr.color||D.attr.fill).getHSL(),I[2]=H>.5?.2:.8,D.setAttributes({fill:String(q.fromHSL.apply({},I))},!0)}}u++,w++}}a.hideLabels(r)},hideLabels:function(a){var b=this.labelsGroup,c=a.length;while(c--)b.getAt(a[c]).hide(!0)}}),Ext.define("Ext.chart.MaskLayer",{extend:"Ext.Component",constructor:function(a){a=Ext.apply(a||{},{style:"position:absolute;background-color:#888;cursor:move;opacity:0.6;border:1px solid #222;"}),this.callParent([a])},initComponent:function(){var a=this;a.callParent(arguments),a.addEvents("mousedown","mouseup","mousemove","mouseenter","mouseleave")},initDraggable:function(){this.callParent(arguments),this.dd.onStart=function(a){var b=this,c=b.comp;this.startPosition=c.getPosition(!0),c.ghost&&!c.liveDrag&&(b.proxy=c.ghost(),b.dragTarget=b.proxy.header.el);if(b.constrain||b.constrainDelegate)b.constrainTo=b.calculateConstrainRegion()}}}),Ext.define("Ext.chart.TipSurface",{extend:"Ext.draw.Component",spriteArray:!1,renderFirst:!0,constructor:function(a){this.callParent([a]),a.sprites&&(this.spriteArray=[].concat(a.sprites),delete a.sprites)},onRender:function(){var a=this,b=0,c=0,d,e;this.callParent(arguments),e=a.spriteArray;if(a.renderFirst&&e){a.renderFirst=!1;for(c=e.length;b<c;b++)d=a.surface.add(e[b]),d.setAttributes({hidden:!1},!0)}}}),Ext.define("Ext.chart.Tip",{requires:["Ext.tip.ToolTip","Ext.chart.TipSurface"],constructor:function(a){var b=this,c,d,e;a.tips&&(b.tipTimeout=null,b.tipConfig=Ext.apply({},a.tips,{renderer:Ext.emptyFn,constrainPosition:!1}),b.tooltip=Ext.create("Ext.tip.ToolTip",b.tipConfig),b.chart.surface.on("mousemove",b.tooltip.onMouseMove,b.tooltip),b.chart.surface.on("mouseleave",function(){b.hideTip()}),b.tipConfig.surface&&(c=b.tipConfig.surface,d=c.sprites,e=Ext.create("Ext.chart.TipSurface",{id:"tipSurfaceComponent",sprites:d}),c.width&&c.height&&e.setSize(c.width,c.height),b.tooltip.add(e),b.spriteTip=e))},showTip:function(a){var b=this;if(!b.tooltip)return;clearTimeout(b.tipTimeout);var c=b.tooltip,d=b.spriteTip,e=b.tipConfig,f=c.trackMouse,g,h,i,j,k,l;f||(c.trackMouse=!0,g=a.sprite,h=g.surface,i=Ext.get(h.getId()),i&&(j=i.getXY(),k=j[0]+(g.attr.x||0)+(g.attr.translation&&g.attr.translation.x||0),l=j[1]+(g.attr.y||0)+(g.attr.translation&&g.attr.translation.y||0),c.targetXY=[k,l])),d?e.renderer.call(c,a.storeItem,a,d.surface):e.renderer.call(c,a.storeItem,a),c.show(),c.trackMouse=f},hideTip:function(a){var b=this.tooltip;if(!b)return;clearTimeout(this.tipTimeout),this.tipTimeout=setTimeout(function(){b.hide()},0)}}),Ext.define("Ext.chart.axis.Abstract",{requires:["Ext.chart.Chart"],constructor:function(a){a=a||{};var b=this,c=a.position||"left";c=c.charAt(0).toUpperCase()+c.substring(1),a.label=Ext.apply(a["axisLabel"+c+"Style"]||{},a.label||{}),a.axisTitleStyle=Ext.apply(a["axisTitle"+c+"Style"]||{},a.labelTitle||{}),Ext.apply(b,a),b.fields=[].concat(b.fields),this.callParent(),b.labels=[],b.getId(),b.labelGroup=b.chart.surface.getGroup(b.axisId+"-labels")},alignment:null,grid:!1,steps:10,x:0,y:0,minValue:0,maxValue:0,getId:function(){return this.axisId||(this.axisId=Ext.id(null,"ext-axis-"))},processView:Ext.emptyFn,drawAxis:Ext.emptyFn,addDisplayAndLabels:Ext.emptyFn}),Ext.define("Ext.chart.axis.Axis",{extend:"Ext.chart.axis.Abstract",alternateClassName:"Ext.chart.Axis",requires:["Ext.draw.Draw"],forceMinMax:!1,dashSize:3,position:"bottom",skipFirst:!1,length:0,width:0,majorTickSteps:!1,applyData:Ext.emptyFn,getRange:function(){var a=this,b=a.chart.getChartStore(),c=a.fields,d=c.length,e=Math,f=e.max,g=e.min,h=!1,i=isNaN(a.minimum)?Infinity:a.minimum,j=isNaN(a.maximum)?-Infinity:a.maximum,k=0,l,m,n,o,p,q=[],r=a.chart.series.items;for(l=0,m=r.length;!h&&l<m;l++)h=h||r[l].stacked,q=r[l].__excludes||q;return b.each(function(a){if(h){isFinite(i)||(i=0);for(o=[0,0],l=0;l<d;l++){if(q[l])continue;p=a.get(c[l]),o[+(p>0)]+=e.abs(p)}j=f(j,-o[0],+o[1]),i=g(i,-o[0],+o[1])}else for(l=0;l<d;l++){if(q[l])continue;n=a.get(c[l]),j=f(j,+n),i=g(i,+n)}}),isFinite(j)||(j=a.prevMax||0),isFinite(i)||(i=a.prevMin||0),i!=j&&j!=Math.floor(j)&&(j=Math.floor(j)+1),isNaN(a.minimum)||(i=a.minimum),isNaN(a.maximum)||(j=a.maximum),{min:i,max:j}},calcEnds:function(){var a=this,b=a.fields,c=a.getRange(),d=c.min,e=c.max,f,g,h;return h=Ext.draw.Draw.snapEnds(d,e,a.majorTickSteps!==!1?a.majorTickSteps+1:a.steps),f=h.from,g=h.to,a.forceMinMax&&(isNaN(e)||(h.to=e),isNaN(d)||(h.from=d)),isNaN(a.maximum)||(h.to=a.maximum),isNaN(a.minimum)||(h.from=a.minimum),h.step=(h.to-h.from)/(g-f)*h.step,a.adjustMaximumByMajorUnit&&(h.to+=h.step),a.adjustMinimumByMajorUnit&&(h.from-=h.step),a.prevMin=d==e?0:d,a.prevMax=e,h},drawAxis:function(a){var b=this,c,d,e=b.x,f=b.y,g=b.chart.maxGutter[0],h=b.chart.maxGutter[1],i=b.dashSize,j=b.minorTickSteps||0,k=b.minorTickSteps||0,l=b.length,m=b.position,n=[],o=!1,p=b.applyData(),q=p.step,r=p.steps,s=p.from,t=p.to,u,v,w,x,y,z,A,B;if(b.hidden||isNaN(q)||s==t)return;b.from=p.from,b.to=p.to,m=="left"||m=="right"?(v=Math.floor(e)+.5,x=["M",v,f,"l",0,-l],u=l-h*2):(w=Math.floor(f)+.5,x=["M",e,w,"l",l,0],u=l-g*2),B=u/(r||1),z=Math.max(j+1,0),A=Math.max(k+1,0);if(b.type=="Numeric"||b.type=="Time")o=!0,b.labels=[p.from];if(m=="right"||m=="left"){w=f-h,v=e-(m=="left")*i*2;while(w>=f-h-u){x.push("M",v,Math.floor(w)+.5,"l",i*2+1,0);if(w!=f-h)for(c=1;c<A;c++)x.push("M",v+i,Math.floor(w+B*c/A)+.5,"l",i+1,0);n.push([Math.floor(e),Math.floor(w)]),w-=B,o&&b.labels.push(b.labels[b.labels.length-1]+q);if(B===0)break}if(Math.round(w+B-(f-h-u))){x.push("M",v,Math.floor(f-l+h)+.5,"l",i*2+1,0);for(c=1;c<A;c++)x.push("M",v+i,Math.floor(f-l+h+B*c/A)+.5,"l",i+1,0);n.push([Math.floor(e),Math.floor(w)]),o&&b.labels.push(b.labels[b.labels.length-1]+q)}}else{v=e+g,w=f-(m=="top")*i*2;while(v<=e+g+u){x.push("M",Math.floor(v)+.5,w,"l",0,i*2+1);if(v!=e+g)for(c=1;c<z;c++)x.push("M",Math.floor(v-B*c/z)+.5,w,"l",0,i+1);n.push([Math.floor(v),Math.floor(f)]),v+=B,o&&b.labels.push(b.labels[b.labels.length-1]+q);if(B===0)break}if(Math.round(v-B-(e+g+u))){x.push("M",Math.floor(e+l-g)+.5,w,"l",0,i*2+1);for(c=1;c<z;c++)x.push("M",Math.floor(e+l-g-B*c/z)+.5,w,"l",0,i+1);n.push([Math.floor(v),Math.floor(f)]),o&&b.labels.push(b.labels[b.labels.length-1]+q)}}b.axis||(b.axis=b.chart.surface.add(Ext.apply({type:"path",path:x},b.axisStyle))),b.axis.setAttributes({path:x},!0),b.inflections=n,!a&&b.grid&&b.drawGrid(),b.axisBBox=b.axis.getBBox(),b.drawLabel()},drawGrid:function(){var a=this,b=a.chart.surface,c=a.grid,d=c.odd,e=c.even,f=a.inflections,g=f.length-(d||e?0:1),h=a.position,i=a.chart.maxGutter,j=a.width-2,k=!1,l,m,n=1,o=[],p,q,r,s=[],t=[];if(i[1]!==0&&(h=="left"||h=="right")||i[0]!==0&&(h=="top"||h=="bottom"))n=0,g++;for(;n<g;n++)l=f[n],m=f[n-1],d||e?(o=n%2?s:t,p=(n%2?d:e)||{},q=(p.lineWidth||p["stroke-width"]||0)/2,r=2*q,h=="left"?o.push("M",m[0]+1+q,m[1]+.5-q,"L",m[0]+1+j-q,m[1]+.5-q,"L",l[0]+1+j-q,l[1]+.5+q,"L",l[0]+1+q,l[1]+.5+q,"Z"):h=="right"?o.push("M",m[0]-q,m[1]+.5-q,"L",m[0]-j+q,m[1]+.5-q,"L",l[0]-j+q,l[1]+.5+q,"L",l[0]-q,l[1]+.5+q,"Z"):h=="top"?o.push("M",m[0]+.5+q,m[1]+1+q,"L",m[0]+.5+q,m[1]+1+j-q,"L",l[0]+.5-q,l[1]+1+j-q,"L",l[0]+.5-q,l[1]+1+q,"Z"):o.push("M",m[0]+.5+q,m[1]-q,"L",m[0]+.5+q,m[1]-j+q,"L",l[0]+.5-q,l[1]-j+q,"L",l[0]+.5-q,l[1]-q,"Z")):h=="left"?o=o.concat(["M",l[0]+.5,l[1]+.5,"l",j,0]):h=="right"?o=o.concat(["M",l[0]-.5,l[1]+.5,"l",-j,0]):h=="top"?o=o.concat(["M",l[0]+.5,l[1]+.5,"l",0,j]):o=o.concat(["M",l[0]+.5,l[1]-.5,"l",0,-j]);d||e?(s.length&&(!a.gridOdd&&s.length&&(a.gridOdd=b.add({type:"path",path:s})),a.gridOdd.setAttributes(Ext.apply({path:s,hidden:!1},d||{}),!0)),t.length&&(a.gridEven||(a.gridEven=b.add({type:"path",path:t})),a.gridEven.setAttributes(Ext.apply({path:t,hidden:!1},e||{}),!0))):o.length?(a.gridLines||(a.gridLines=a.chart.surface.add({type:"path",path:o,"stroke-width":a.lineWidth||1,stroke:a.gridColor||"#ccc"})),a.gridLines.setAttributes({hidden:!1,path:o},!0)):a.gridLines&&a.gridLines.hide(!0)},getOrCreateLabel:function(a,b){var c=this,d=c.labelGroup,e=d.getAt(a),f=c.chart.surface;return e?b!=e.attr.text&&(e.setAttributes(Ext.apply({text:b},c.label),!0),e._bbox=e.getBBox()):(e=f.add(Ext.apply({group:d,type:"text",x:0,y:0,text:b},c.label)),f.renderItem(e),e._bbox=e.getBBox()),c.label.rotation?(e.setAttributes({rotation:{degrees:0}},!0),e._ubbox=e.getBBox(),e.setAttributes(c.label,!0)):e._ubbox=e._bbox,e},rect2pointArray:function(a){var b=this.chart.surface,c=b.getBBox(a,!0),d=[c.x,c.y],e=d.slice(),f=[c.x+c.width,c.y],g=f.slice(),h=[c.x+c.width,c.y+c.height],i=h.slice(),j=[c.x,c.y+c.height],k=j.slice(),l=a.matrix;return d[0]=l.x.apply(l,e),d[1]=l.y.apply(l,e),f[0]=l.x.apply(l,g),f[1]=l.y.apply(l,g),h[0]=l.x.apply(l,i),h[1]=l.y.apply(l,i),j[0]=l.x.apply(l,k),j[1]=l.y.apply(l,k),[d,f,h,j]},intersect:function(a,b){var c=this.rect2pointArray(a),d=this.rect2pointArray(b);return!!Ext.draw.Draw.intersect(c,d).length},drawHorizontalLabels:function(){var a=this,b=a.label,c=Math.floor,d=Math.max,e=a.chart.axes,f=a.position,g=a.inflections,h=g.length,i=a.labels,j=a.labelGroup,k=0,l,m=a.chart.maxGutter[1],n,o,p,q,r,s=0,t,u,v,w,x,y,z,A,B,C;y=h-1,p=g[0],C=a.getOrCreateLabel(0,a.label.renderer(i[0])),l=Math.floor(Math.abs(Math.sin(b.rotate&&b.rotate.degrees*Math.PI/180||0)));for(B=0;B<h;B++){p=g[B],w=a.label.renderer(i[B]),t=a.getOrCreateLabel(B,w),o=t._bbox,k=d(k,o.height+a.dashSize+a.label.padding),z=c(p[0]-(l?o.height:o.width)/2),a.chart.maxGutter[0]==0&&(B==0&&e.findIndex("position","left")==-1?z=p[0]:B==y&&e.findIndex("position","right")==-1&&(z=p[0]-o.width)),f=="top"?A=p[1]-a.dashSize*2-a.label.padding-o.height/2:A=p[1]+a.dashSize*2+a.label.padding+o.height/2,t.setAttributes({hidden:!1,x:z,y:A},!0);if(B!=0&&(a.intersect(t,r)||a.intersect(t,C))){t.hide(!0);continue}r=t}return k},drawVerticalLabels:function(){var a=this,b=a.inflections,c=a.position,d=b.length,e=a.labels,f=0,g=Math.max,h=Math.floor,i=Math.ceil,j=a.chart.axes,k=a.chart.maxGutter[1],l,m,n,o,p=0,q,r,s,t,u,v,w,x,y;v=d;for(y=0;y<v;y++){n=b[y],t=a.label.renderer(e[y]),q=a.getOrCreateLabel(y,t),m=q._bbox,f=g(f,m.width+a.dashSize+a.label.padding),x=n[1],k<m.height/2&&(y==v-1&&j.findIndex("position","top")==-1?x=a.y-a.length+i(m.height/2):y==0&&j.findIndex("position","bottom")==-1&&(x=a.y-h(m.height/2))),c=="left"?w=n[0]-m.width-a.dashSize-a.label.padding-2:w=n[0]+a.dashSize+a.label.padding+2,q.setAttributes(Ext.apply({hidden:!1,x:w,y:x},a.label),!0);if(y!=0&&a.intersect(q,o)){q.hide(!0);continue}o=q}return f},drawLabel:function(){var a=this,b=a.position,c=a.labelGroup,d=a.inflections,e=0,f=0,g,h;b=="left"||b=="right"?e=a.drawVerticalLabels():f=a.drawHorizontalLabels(),g=c.getCount(),h=d.length;for(;h<g;h++)c.getAt(h).hide(!0);a.bbox={},Ext.apply(a.bbox,a.axisBBox),a.bbox.height=f,a.bbox.width=e,Ext.isString(a.title)&&a.drawTitle(e,f)},elipsis:function(a,b,c,d,e){var f,g;if(c<d)return a.hide(!0),!1;while(b.length>4){b=b.substr(0,b.length-4)+"...",a.setAttributes({text:b},!0),f=a.getBBox();if(f.width<c){typeof e=="number"&&a.setAttributes({x:Math.floor(e-f.width/2)},!0);break}}return!0},setTitle:function(a){this.title=a,this.drawLabel()},drawTitle:function(a,b){var c=this,d=c.position,e=c.chart.surface,f=c.displaySprite,g=c.title,h=d=="left"||d=="right",i=c.x,j=c.y,k,l,m;f?f.setAttributes({text:g},!0):(k={type:"text",x:0,y:0,text:g},f=c.displaySprite=e.add(Ext.apply(k,c.axisTitleStyle,c.labelTitle)),e.renderItem(f)),l=f.getBBox(),m=c.dashSize+c.label.padding,h?(j-=c.length/2-l.height/2,d=="left"?i-=a+m+l.width/2:i+=a+m+l.width-l.width/2,c.bbox.width+=l.width+10):(i+=c.length/2-l.width*.5,d=="top"?j-=b+m+l.height*.3:j+=b+m+l.height*.8,c.bbox.height+=l.height+10),f.setAttributes({translate:{x:i,y:j}},!0)}}),Ext.define("Ext.chart.axis.Category",{extend:"Ext.chart.axis.Axis",alternateClassName:"Ext.chart.CategoryAxis",alias:"axis.category",categoryNames:null,calculateCategoryCount:!1,setLabels:function(){var a=this.chart.store,b=this.fields,c=b.length,d;this.labels=[],a.each(function(a){for(d=0;d<c;d++)this.labels.push(a.get(b[d]))},this)},applyData:function(){this.callParent(),this.setLabels();var a=this.chart.store.getCount();return{from:0,to:a,power:1,step:1,steps:a-1}}}),Ext.define("Ext.chart.axis.Gauge",{extend:"Ext.chart.axis.Abstract",position:"gauge",alias:"axis.gauge",drawAxis:function(a){var b=this.chart,c=b.surface,d=b.chartBBox,e=d.x+d.width/2,f=d.y+d.height,g=this.margin||10,h=Math.min(d.width,2*d.height)/2+g,i=[],j,k=this.steps,l,m=Math.PI,n=Math.cos,o=Math.sin;if(this.sprites&&!b.resizing){this.drawLabel();return}if(this.margin>=0)if(!this.sprites)for(l=0;l<=k;l++)j=c.add({type:"path",path:["M",e+(h-g)*n(l/k*m-m),f+(h-g)*o(l/k*m-m),"L",e+h*n(l/k*m-m),f+h*o(l/k*m-m),"Z"],stroke:"#ccc"}),j.setAttributes({hidden:!1},!0),i.push(j);else{i=this.sprites;for(l=0;l<=k;l++)i[l].setAttributes({path:["M",e+(h-g)*n(l/k*m-m),f+(h-g)*o(l/k*m-m),"L",e+h*n(l/k*m-m),f+h*o(l/k*m-m),"Z"],stroke:"#ccc"},!0)}this.sprites=i,this.drawLabel(),this.title&&this.drawTitle()},drawTitle:function(){var a=this,b=a.chart,c=b.surface,d=b.chartBBox,e=a.titleSprite,f;e||(a.titleSprite=e=c.add({type:"text",zIndex:2})),e.setAttributes(Ext.apply({text:a.title},a.label||{}),!0),f=e.getBBox(),e.setAttributes({x:d.x+d.width/2-f.width/2,y:d.y+d.height-f.height/2-4},!0)},setTitle:function(a){this.title=a,this.drawTitle()},drawLabel:function(){var a=this.chart,b=a.surface,c=a.chartBBox,d=c.x+c.width/2,e=c.y+c.height,f=this.margin||10,g=Math.min(c.width,2*c.height)/2+2*f,h=Math.round,i=[],j,k=this.maximum||0,l=this.steps,m=0,n,o=Math.PI,p=Math.cos,q=Math.sin,r=this.label,s=r.renderer||function(a){return a};if(!this.labelArray)for(m=0;m<=l;m++)n=m===0||m===l?7:0,j=b.add({type:"text",text:s(h(m/l*k)),x:d+g*p(m/l*o-o),y:e+g*q(m/l*o-o)-n,"text-anchor":"middle","stroke-width":.2,zIndex:10,stroke:"#333"}),j.setAttributes({hidden:!1},!0),i.push(j);else{i=this.labelArray;for(m=0;m<=l;m++)n=m===0||m===l?7:0,i[m].setAttributes({text:s(h(m/l*k)),x:d+g*p(m/l*o-o),y:e+g*q(m/l*o-o)-n},!0)}this.labelArray=i}}),Ext.define("Ext.chart.axis.Numeric",{extend:"Ext.chart.axis.Axis",alternateClassName:"Ext.chart.NumericAxis",type:"numeric",alias:"axis.numeric",constructor:function(a){var b=this,c=!!a.label&&!!a.label.renderer,d;b.callParent([a]),d=b.label;if(b.roundToDecimal===!1)return;c||(d.renderer=function(a){return b.roundToDecimal(a,b.decimals)})},roundToDecimal:function(a,b){var c=Math.pow(10,b||0);return Math.floor(a*c)/c},minimum:NaN,maximum:NaN,decimals:2,scale:"linear",position:"left",adjustMaximumByMajorUnit:!1,adjustMinimumByMajorUnit:!1,applyData:function(){return this.callParent(),this.calcEnds()}}),Ext.define("Ext.chart.axis.Radial",{extend:"Ext.chart.axis.Abstract",position:"radial",alias:"axis.radial",drawAxis:function(a){var b=this.chart,c=b.surface,d=b.chartBBox,e=b.store,f=e.getCount(),g=d.x+d.width/2,h=d.y+d.height/2,i=Math.min(d.width,d.height)/2,j=[],k,l=this.steps,m,n,o=Math.PI*2,p=Math.cos,q=Math.sin;if(this.sprites&&!b.resizing){this.drawLabel();return}if(!this.sprites){for(m=1;m<=l;m++)k=c.add({type:"circle",x:g,y:h,radius:Math.max(i*m/l,0),stroke:"#ccc"}),k.setAttributes({hidden:!1},!0),j.push(k);e.each(function(a,b){k=c.add({type:"path",path:["M",g,h,"L",g+i*p(b/f*o),h+i*q(b/f*o),"Z"],stroke:"#ccc"}),k.setAttributes({hidden:!1},!0),j.push(k)})}else{j=this.sprites;for(m=0;m<l;m++)j[m].setAttributes({x:g,y:h,radius:Math.max(i*(m+1)/l,0),stroke:"#ccc"},!0);e.each(function(a,b){j[m+b].setAttributes({path:["M",g,h,"L",g+i*p(b/f*o),h+i*q(b/f*o),"Z"],stroke:"#ccc"},!0)})}this.sprites=j,this.drawLabel()},drawLabel:function(){var a=this.chart,b=a.surface,c=a.chartBBox,d=a.store,e=c.x+c.width/2,f=c.y+c.height/2,g=Math.min(c.width,c.height)/2,h=Math.max,i=Math.round,j=[],k,l=[],m,n=[],o,p=!this.maximum,q=this.maximum||0,r=this.steps,s=0,t,u,v,w=Math.PI*2,x=Math.cos,y=Math.sin,z=this.label.display,A=z!=="none",B=10;if(!A)return;a.series.each(function(a){l.push(a.yField),o=a.xField}),d.each(function(a,b){if(p)for(b=0,m=l.length;b<m;b++)q=h(+a.get(l[b]),q);n.push(a.get(o))});if(!this.labelArray){if(z!="categories")for(s=1;s<=r;s++)k=b.add({type:"text",text:i(s/r*q),x:e,y:f-g*s/r,"text-anchor":"middle","stroke-width":.1,stroke:"#333"}),k.setAttributes({hidden:!1},!0),j.push(k);if(z!="scale")for(t=0,r=n.length;t<r;t++)u=x(t/r*w)*(g+B),v=y(t/r*w)*(g+B),k=b.add({type:"text",text:n[t],x:e+u,y:f+v,"text-anchor":u*u<=.001?"middle":u<0?"end":"start"}),k.setAttributes({hidden:!1},!0),j.push(k)}else{j=this.labelArray;if(z!="categories")for(s=0;s<r;s++)j[s].setAttributes({text:i((s+1)/r*q),x:e,y:f-g*(s+1)/r,"text-anchor":"middle","stroke-width":.1,stroke:"#333"},!0);if(z!="scale")for(t=0,r=n.length;t<r;t++)u=x(t/r*w)*(g+B),v=y(t/r*w)*(g+B),j[s+t]&&j[s+t].setAttributes({type:"text",text:n[t],x:e+u,y:f+v,"text-anchor":u*u<=.001?"middle":u<0?"end":"start"},!0)}this.labelArray=j}}),Ext.define("Ext.data.AbstractStore",{requires:["Ext.util.MixedCollection","Ext.data.Operation","Ext.util.Filter"],mixins:{observable:"Ext.util.Observable",sortable:"Ext.util.Sortable"},statics:{create:function(a){return a.isStore||(a.type||(a.type="store"),a=Ext.createByAlias("store."+a.type,a)),a}},remoteSort:!1,remoteFilter:!1,autoLoad:!1,autoSync:!1,batchUpdateMode:"operation",filterOnLoad:!0,sortOnLoad:!0,implicitModel:!1,defaultProxyType:"memory",isDestroyed:!1,isStore:!0,sortRoot:"data",constructor:function(a){var b=this,c;b.addEvents("add","remove","update","datachanged","beforeload","load","write","beforesync","clear"),Ext.apply(b,a),b.removed=[],b.mixins.observable.constructor.apply(b,arguments),b.model=Ext.ModelManager.getModel(b.model),Ext.applyIf(b,{modelDefaults:{}}),!b.model&&b.fields&&(b.model=Ext.define("Ext.data.Store.ImplicitModel-"+(b.storeId||Ext.id()),{extend:"Ext.data.Model",fields:b.fields,proxy:b.proxy||b.defaultProxyType}),delete b.fields,b.implicitModel=!0),b.setProxy(b.proxy||b.model.getProxy()),b.id&&!b.storeId&&(b.storeId=b.id,delete b.id),b.storeId&&Ext.data.StoreManager.register(b),b.mixins.sortable.initSortable.call(b),c=b.decodeFilters(b.filters),b.filters=Ext.create("Ext.util.MixedCollection"),b.filters.addAll(c)},setProxy:function(a){var b=this;return a instanceof Ext.data.proxy.Proxy?a.setModel(b.model):(Ext.isString(a)&&(a={type:a}),Ext.applyIf(a,{model:b.model}),a=Ext.createByAlias("proxy."+a.type,a)),b.proxy=a,b.proxy},getProxy:function(){return this.proxy},create:function(a,b){var c=this,d=Ext.ModelManager.create(Ext.applyIf(a,c.modelDefaults),c.model.modelName),e;return b=b||{},Ext.applyIf(b,{action:"create",records:[d]}),e=Ext.create("Ext.data.Operation",b),c.proxy.create(e,c.onProxyWrite,c),d},read:function(){return this.load.apply(this,arguments)},onProxyRead:Ext.emptyFn,update:function(a){var b=this,c;return a=a||{},Ext.applyIf(a,{action:"update",records:b.getUpdatedRecords()}),c=Ext.create("Ext.data.Operation",a),b.proxy.update(c,b.onProxyWrite,b)},onProxyWrite:function(a){var b=this,c=a.wasSuccessful(),d=a.getRecords();switch(a.action){case"create":b.onCreateRecords(d,a,c);break;case"update":b.onUpdateRecords(d,a,c);break;case"destroy":b.onDestroyRecords(d,a,c)}c&&(b.fireEvent("write",b,a),b.fireEvent("datachanged",b)),Ext.callback(a.callback,a.scope||b,[d,a,c])},destroy:function(a){var b=this,c;return a=a||{},Ext.applyIf(a,{action:"destroy",records:b.getRemovedRecords()}),c=Ext.create("Ext.data.Operation",a),b.proxy.destroy(c,b.onProxyWrite,b)},onBatchOperationComplete:function(a,b){return this.onProxyWrite(b)},onBatchComplete:function(a,b){var c=this,d=a.operations,e=d.length,f;c.suspendEvents();for(f=0;f<e;f++)c.onProxyWrite(d[f]);c.resumeEvents(),c.fireEvent("datachanged",c)},onBatchException:function(a,b){},filterNew:function(a){return a.phantom===!0&&a.isValid()},getNewRecords:function(){return[]},getUpdatedRecords:function(){return[]},filterUpdated:function(a){return a.dirty===!0&&a.phantom!==!0&&a.isValid()},getRemovedRecords:function(){return this.removed},filter:function(a,b){},decodeFilters:function(a){Ext.isArray(a)||(a===undefined?a=[]:a=[a]);var b=a.length,c=Ext.util.Filter,d,e;for(e=0;e<b;e++)d=a[e],d instanceof c||(Ext.apply(d,{root:"data"}),d.fn&&(d.filterFn=d.fn),typeof d=="function"&&(d={filterFn:d}),a[e]=new c(d));return a},clearFilter:function(a){},isFiltered:function(){},filterBy:function(a,b){},sync:function(){var a=this,b={},c=a.getNewRecords(),d=a.getUpdatedRecords(),e=a.getRemovedRecords(),f=!1;c.length>0&&(b.create=c,f=!0),d.length>0&&(b.update=d,f=!0),e.length>0&&(b.destroy=e,f=!0),f&&a.fireEvent("beforesync",b)!==!1&&a.proxy.batch(b,a.getBatchListeners())},getBatchListeners:function(){var a=this,b={scope:a,exception:a.onBatchException};return a.batchUpdateMode=="operation"?b.operationcomplete=a.onBatchOperationComplete:b.complete=a.onBatchComplete,b},save:function(){return this.sync.apply(this,arguments)},load:function(a){var b=this,c;return a=a||{},Ext.applyIf(a,{action:"read",filters:b.filters.items,sorters:b.getSorters()}),c=Ext.create("Ext.data.Operation",a),b.fireEvent("beforeload",b,c)!==!1&&(b.loading=!0,b.proxy.read(c,b.onProxyLoad,b)),b},afterEdit:function(a){var b=this;b.autoSync&&b.sync(),b.fireEvent("update",b,a,Ext.data.Model.EDIT)},afterReject:function(a){this.fireEvent("update",this,a,Ext.data.Model.REJECT)},afterCommit:function(a){this.fireEvent("update",this,a,Ext.data.Model.COMMIT)},clearData:Ext.emptyFn,destroyStore:function(){var a=this;a.isDestroyed||(a.storeId&&Ext.data.StoreManager.unregister(a),a.clearData(),a.data=null,a.tree=null,a.reader=a.writer=null,a.clearListeners(),a.isDestroyed=!0,a.implicitModel&&Ext.destroy(a.model))},doSort:function(a){var b=this;b.remoteSort?b.load():(b.data.sortBy(a),b.fireEvent("datachanged",b))},getCount:Ext.emptyFn,getById:Ext.emptyFn,removeAll:Ext.emptyFn,isLoading:function(){return!!this.loading}}),Ext.define("Ext.util.Grouper",{extend:"Ext.util.Sorter",getGroupString:function(a){return a.get(this.property)}}),Ext.define("Ext.data.Store",{extend:"Ext.data.AbstractStore",alias:"store.store",requires:["Ext.data.StoreManager","Ext.ModelManager","Ext.data.Model","Ext.util.Grouper"],uses:["Ext.data.proxy.Memory"],remoteSort:!1,remoteFilter:!1,remoteGroup:!1,groupField:undefined,groupDir:"ASC",pageSize:25,currentPage:1,clearOnPageLoad:!0,loading:!1,sortOnFilter:!0,buffered:!1,purgePageCount:5,isStore:!0,onClassExtended:function(a,b){var c=b.model;if(typeof c=="string"){var d=b.onBeforeClassCreated;b.onBeforeClassCreated=function(a,b){var e=this;Ext.require(c,function(){d.call(e,a,b)})}}},constructor:function(a){a=Ext.Object.merge({},a);var b=this,c=a.groupers||b.groupers,d=a.groupField||b.groupField,e,f;if(a.buffered||b.buffered)b.prefetchData=Ext.create("Ext.util.MixedCollection",!1,function(a){return a.index}),b.pendingRequests=[],b.pagesRequested=[],b.sortOnLoad=!1,b.filterOnLoad=!1;b.addEvents("beforeprefetch","groupchange","prefetch"),f=a.data||b.data,b.data=Ext.create("Ext.util.MixedCollection",!1,function(a){return a.internalId}),f&&(b.inlineData=f,delete a.data),!c&&d&&(c=[{property:d,direction:a.groupDir||b.groupDir}]),delete a.groupers,b.groupers=Ext.create("Ext.util.MixedCollection"),b.groupers.addAll(b.decodeGroupers(c)),this.callParent([a]),b.groupers.items.length&&b.sort(b.groupers.items,"prepend",!1),e=b.proxy,f=b.inlineData,f?(e instanceof Ext.data.proxy.Memory?(e.data=f,b.read()):b.add.apply(b,f),b.sort(),delete b.inlineData):b.autoLoad&&Ext.defer(b.load,10,b,[typeof b.autoLoad=="object"?b.autoLoad:undefined])},onBeforeSort:function(){var a=this.groupers;a.getCount()>0&&this.sort(a.items,"prepend",!1)},decodeGroupers:function(a){Ext.isArray(a)||(a===undefined?a=[]:a=[a]);var b=a.length,c=Ext.util.Grouper,d,e;for(e=0;e<b;e++)d=a[e],d instanceof c||(Ext.isString(d)&&(d={property:d}),Ext.applyIf(d,{root:"data",direction:"ASC"}),d.fn&&(d.sorterFn=d.fn),typeof d=="function"&&(d={sorterFn:d}),a[e]=new c(d));return a},group:function(a,b){var c=this,d=!1,e,f;Ext.isArray(a)?f=a:Ext.isObject(a)?f=[a]:Ext.isString(a)&&(e=c.groupers.get(a),e?b===undefined?e.toggle():e.setDirection(b):(e={property:a,direction:b},f=[e])),f&&f.length&&(d=!0,f=c.decodeGroupers(f),c.groupers.clear(),c.groupers.addAll(f)),c.remoteGroup?c.load({scope:c,callback:c.fireGroupChange}):(c.sort(null,null,null,d),c.fireGroupChange())},clearGrouping:function(){var a=this;a.groupers.each(function(b){a.sorters.remove(b)}),a.groupers.clear(),a.remoteGroup?a.load({scope:a,callback:a.fireGroupChange}):(a.sort(),a.fireEvent("groupchange",a,a.groupers))},isGrouped:function(){return this.groupers.getCount()>0},fireGroupChange:function(){this.fireEvent("groupchange",this,this.groupers)},getGroups:function(a){var b=this.data.items,c=b.length,d=[],e={},f,g,h,i;for(i=0;i<c;i++)f=b[i],g=this.getGroupString(f),h=e[g],h===undefined&&(h={name:g,children:[]},d.push(h),e[g]=h),h.children.push(f);return a?e[a]:d},getGroupsForGrouper:function(a,b){var c=a.length,d=[],e,f,g,h,i;for(i=0;i<c;i++)g=a[i],f=b.getGroupString(g),f!==e&&(h={name:f,grouper:b,records:[]},d.push(h)),h.records.push(g),e=f;return d},getGroupsForGrouperIndex:function(a,b){var c=this,d=c.groupers,e=d.getAt(b),f=c.getGroupsForGrouper(a,e),g=f.length,h;if(b+1<d.length)for(h=0;h<g;h++)f[h].children=c.getGroupsForGrouperIndex(f[h].records,b+1);for(h=0;h<g;h++)f[h].depth=b;return f},getGroupData:function(a){var b=this;return a!==!1&&b.sort(),b.getGroupsForGrouperIndex(b.data.items,0)},getGroupString:function(a){var b=this.groupers.first();return b?a.get(b.property):""},insert:function(a,b){var c=this,d=!1,e,f,g;b=[].concat(b);for(e=0,g=b.length;e<g;e++)f=c.createModel(b[e]),f.set(c.modelDefaults),b[e]=f,c.data.insert(a+e,f),f.join(c),d=d||f.phantom===!0;c.snapshot&&c.snapshot.addAll(b),c.fireEvent("add",c,b,a),c.fireEvent("datachanged",c),c.autoSync&&d&&c.sync()},add:function(a){Ext.isArray(a)||(a=Array.prototype.slice.apply(arguments));var b=this,c=0,d=a.length,e;for(;c<d;c++)e=b.createModel(a[c]),a[c]=e;return b.insert(b.data.length,a),a},createModel:function(a){return a.isModel||(a=Ext.ModelManager.create(a,this.model)),a},each:function(a,b){this.data.each(a,b)},remove:function(a,b){Ext.isArray(a)||(a=[a]),b=b===!0;var c=this,d=!1,e=0,f=a.length,g,h,i;for(;e<f;e++)i=a[e],h=c.data.indexOf(i),c.snapshot&&c.snapshot.remove(i),h>-1&&(g=i.phantom===!0,!b&&!g&&c.removed.push(i),i.unjoin(c),c.data.remove(i),d=d||!g,c.fireEvent("remove",c,i,h));c.fireEvent("datachanged",c),!b&&c.autoSync&&d&&c.sync()},removeAt:function(a){var b=this.getAt(a);b&&this.remove(b)},load:function(a){var b=this;return a=a||{},Ext.isFunction(a)&&(a={callback:a}),Ext.applyIf(a,{groupers:b.groupers.items,page:b.currentPage,start:(b.currentPage-1)*b.pageSize,limit:b.pageSize,addRecords:!1}),b.callParent([a])},onProxyLoad:function(a){var b=this,c=a.getResultSet(),d=a.getRecords(),e=a.wasSuccessful();c&&(b.totalCount=c.total),e&&b.loadRecords(d,a),b.loading=!1,b.fireEvent("load",b,d,e),b.fireEvent("read",b,d,a.wasSuccessful()),Ext.callback(a.callback,a.scope||b,[d,a,e])},onCreateRecords:function(a,b,c){if(c){var d=0,e=this.data,f=this.snapshot,g=a.length,h=b.records,i,j,k;for(;d<g;++d)i=a[d],j=h[d],j&&(k=e.indexOf(j),k>-1&&(e.removeAt(k),e.insert(k,i)),f&&(k=f.indexOf(j),k>-1&&(f.removeAt(k),f.insert(k,i))),i.phantom=!1,i.join(this))}},onUpdateRecords:function(a,b,c){if(c){var d=0,e=a.length,f=this.data,g=this.snapshot,h;for(;d<e;++d)h=a[d],f.replace(h),g&&g.replace(h),h.join(this)}},onDestroyRecords:function(a,b,c){if(c){var d=this,e=0,f=a.length,g=d.data,h=d.snapshot,i;for(;e<f;++e)i=a[e],i.unjoin(d),g.remove(i),h&&h.remove(i);d.removed=[]}},getNewRecords:function(){return this.data.filterBy(this.filterNew).items},getUpdatedRecords:function(){return this.data.filterBy(this.filterUpdated).items},filter:function(a,b){Ext.isString(a)&&(a={property:a,value:b});var c=this,d=c.decodeFilters(a),e=0,f=c.sortOnFilter&&!c.remoteSort,g=d.length;for(;e<g;e++)c.filters.replace(d[e]);c.remoteFilter?c.load():c.filters.getCount()&&(c.snapshot=c.snapshot||c.data.clone(),c.data=c.data.filter(c.filters.items),f&&c.sort(),(!f||c.sorters.length<1)&&c.fireEvent("datachanged",c))},clearFilter:function(a){var b=this;b.filters.clear(),b.remoteFilter?b.load():b.isFiltered()&&(b.data=b.snapshot.clone(),delete b.snapshot,a!==!0&&b.fireEvent("datachanged",b))},isFiltered:function(){var a=this.snapshot;return!!a&&a!==this.data},filterBy:function(a,b){var c=this;c.snapshot=c.snapshot||c.data.clone(),c.data=c.queryBy(a,b||c),c.fireEvent("datachanged",c)},queryBy:function(a,b){var c=this,d=c.snapshot||c.data;return d.filterBy(a,b||c)},loadData:function(a,b){var c=this.model,d=a.length,e=[],f,g;for(f=0;f<d;f++)g=a[f],g instanceof Ext.data.Model||(g=Ext.ModelManager.create(g,c)),e.push(g);this.loadRecords(e,{addRecords:b})},loadRawData:function(a,b){var c=this,d=c.proxy.reader.read(a),e=d.records;d.success&&(c.loadRecords(e,{addRecords:b}),c.fireEvent("load",c,e,!0))},loadRecords:function(a,b){var c=this,d=0,e=a.length;b=b||{},b.addRecords||(delete c.snapshot,c.clearData()),c.data.addAll(a);for(;d<e;d++)b.start!==undefined&&(a[d].index=b.start+d),a[d].join(c);c.suspendEvents(),c.filterOnLoad&&!c.remoteFilter&&c.filter(),c.sortOnLoad&&!c.remoteSort&&c.sort(),c.resumeEvents(),c.fireEvent("datachanged",c,a)},loadPage:function(a,b){var c=this;b=Ext.apply({},b),c.currentPage=a,c.read(Ext.applyIf(b,{page:a,start:(a-1)*c.pageSize,limit:c.pageSize,addRecords:!c.clearOnPageLoad}))},nextPage:function(a){this.loadPage(this.currentPage+1,a)},previousPage:function(a){this.loadPage(this.currentPage-1,a)},clearData:function(){var a=this;a.data.each(function(b){b.unjoin(a)}),a.data.clear()},prefetch:function(a){var b=this,c,d=b.getRequestId();return a=a||{},Ext.applyIf(a,{action:"read",filters:b.filters.items,sorters:b.sorters.items,requestId:d}),b.pendingRequests.push(d),c=Ext.create("Ext.data.Operation",a),b.fireEvent("beforeprefetch",b,c)!==!1&&(b.loading=!0,b.proxy.read(c,b.onProxyPrefetch,b)),b},prefetchPage:function(a,b){var c=this,d=c.pageSize,e=(a-1)*c.pageSize,f=e+d;Ext.Array.indexOf(c.pagesRequested,a)===-1&&!c.rangeSatisfied(e,f)&&(b=b||{},c.pagesRequested.push(a),Ext.applyIf(b,{page:a,start:e,limit:d,callback:c.onWaitForGuarantee,scope:c}),c.prefetch(b))},getRequestId:function(){return this.requestSeed=this.requestSeed||1,this.requestSeed++},onProxyPrefetch:function(a){var b=this,c=a.getResultSet(),d=a.getRecords(),e=a.wasSuccessful();c&&(b.totalCount=c.total,b.fireEvent("totalcountchange",b.totalCount)),e&&b.cacheRecords(d,a),Ext.Array.remove(b.pendingRequests,a.requestId),a.page&&Ext.Array.remove(b.pagesRequested,a.page),b.loading=!1,b.fireEvent("prefetch",b,d,e,a),a.blocking&&b.fireEvent("load",b,d,e),Ext.callback(a.callback,a.scope||b,[d,a,e])},cacheRecords:function(a,b){var c=this,d=0,e=a.length,f=b?b.start:0;Ext.isDefined(c.totalCount)||(c.totalCount=a.length,c.fireEvent("totalcountchange",c.totalCount));for(;d<e;d++)a[d].index=f+d;c.prefetchData.addAll(a),c.purgePageCount&&c.purgeRecords()},purgeRecords:function(){var a=this,b=a.prefetchData.getCount(),c=a.purgePageCount*a.pageSize,d=b-c-1,e=0;for(;e<=d;e++)a.prefetchData.removeAt(0)},rangeSatisfied:function(a,b){var c=this,d=a,e=!0;for(;d<b;d++)if(!c.prefetchData.getByKey(d)){e=!1;break}return e},getPageFromRecordIndex:function(a){return Math.floor(a/this.pageSize)+1},onGuaranteedRange:function(){var a=this,b=a.getTotalCount(),c=a.requestStart,d=b-1<a.requestEnd?b-1:a.requestEnd,e=[],f,g=c;d=Math.max(0,d);if(c!==a.guaranteedStart&&d!==a.guaranteedEnd){a.guaranteedStart=c,a.guaranteedEnd=d;for(;g<=d;g++)f=a.prefetchData.getByKey(g),f&&e.push(f);a.fireEvent("guaranteedrange",e,c,d),a.cb&&a.cb.call(a.scope||a,e)}a.unmask()},mask:function(){this.masked=!0,this.fireEvent("beforeload")},unmask:function(){this.masked&&this.fireEvent("load")},hasPendingRequests:function(){return this.pendingRequests.length},onWaitForGuarantee:function(){this.hasPendingRequests()||this.onGuaranteedRange()},guaranteeRange:function(a,b,c,d){b=b>this.totalCount?this.totalCount-1:b;var e=this,f=a,g=e.prefetchData,h=[],i=!!g.getByKey(a),j=!!g.getByKey(b),k=e.getPageFromRecordIndex(a),l=e.getPageFromRecordIndex(b);e.cb=c,e.scope=d,e.requestStart=a,e.requestEnd=b,!i||!j?k===l?(e.mask(),e.prefetchPage(k,{callback:e.onWaitForGuarantee,scope:e})):(e.mask(),e.prefetchPage(k,{callback:e.onWaitForGuarantee,scope:e}),e.prefetchPage(l,{callback:e.onWaitForGuarantee,scope:e})):e.onGuaranteedRange()},sort:function(){var a=this,b=a.prefetchData,c,d,e,f;a.buffered?a.remoteSort?(b.clear(),a.callParent(arguments)):(c=a.getSorters(),d=a.guaranteedStart,e=a.guaranteedEnd,c.length&&(b.sort(c),f=b.getRange(),b.clear(),a.cacheRecords(f),delete a.guaranteedStart,delete a.guaranteedEnd,a.guaranteeRange(d,e)),a.callParent(arguments)):a.callParent(arguments)},doSort:function(a){var b=this;if(b.remoteSort)b.load();else{b.data.sortBy(a);if(!b.buffered){var c=b.getRange(),d=c.length,e=0;for(;e<d;e++)c[e].index=e}b.fireEvent("datachanged",b)}},find:function(a,b,c,d,e,f){var g=this.createFilterFn(a,b,d,e,f);return g?this.data.findIndexBy(g,null,c):-1},findRecord:function(){var a=this,b=a.find.apply(a,arguments);return b!==-1?a.getAt(b):null},createFilterFn:function(a,b,c,d,e){return Ext.isEmpty(b)?!1:(b=this.data.createValueMatcher(b,c,d,e),function(c){return b.test(c.data[a])})},findExact:function(a,b,c){return this.data.findIndexBy(function(c){return c.get(a)==b},this,c)},findBy:function(a,b,c){return this.data.findIndexBy(a,b,c)},collect:function(a,b,c){var d=this,e=c===!0&&d.snapshot?d.snapshot:d.data;return e.collect(a,"data",b)},getCount:function(){return this.data.length||0},getTotalCount:function(){return this.totalCount},getAt:function(a){return this.data.getAt(a)},getRange:function(a,b){return this.data.getRange(a,b)},getById:function(a){return(this.snapshot||this.data).findBy(function(b){return b.getId()===a})},indexOf:function(a){return this.data.indexOf(a)},indexOfTotal:function(a){var b=a.index;return b||b===0?b:this.indexOf(a)},indexOfId:function(a){return this.indexOf(this.getById(a))},removeAll:function(a){var b=this;b.clearData(),b.snapshot&&b.snapshot.clear(),a!==!0&&b.fireEvent("clear",b)},first:function(a){var b=this;return a&&b.isGrouped()?b.aggregate(function(a){return a.length?a[0]:undefined},b,!0):b.data.first()},last:function(a){var b=this;return a&&b.isGrouped()?b.aggregate(function(a){var b=a.length;return b?a[b-1]:undefined},b,!0):b.data.last()},sum:function(a,b){var c=this;return b&&c.isGrouped()?c.aggregate(c.getSum,c,!0,[a]):c.getSum(c.data.items,a)},getSum:function(a,b){var c=0,d=0,e=a.length;for(;d<e;++d)c+=a[d].get(b);return c},count:function(a){var b=this;return a&&b.isGrouped()?b.aggregate(function(a){return a.length},b,!0):b.getCount()},min:function(a,b){var c=this;return b&&c.isGrouped()?c.aggregate(c.getMin,c,!0,[a]):c.getMin(c.data.items,a)},getMin:function(a,b){var c=1,d=a.length,e,f;d>0&&(f=a[0].get(b));for(;c<d;++c)e=a[c].get(b),e<f&&(f=e);return f},max:function(a,b){var c=this;return b&&c.isGrouped()?c.aggregate(c.getMax,c,!0,[a]):c.getMax(c.data.items,a)},getMax:function(a,b){var c=1,d=a.length,e,f;d>0&&(f=a[0].get(b));for(;c<d;++c)e=a[c].get(b),e>f&&(f=e);return f},average:function(a,b){var c=this;return b&&c.isGrouped()?c.aggregate(c.getAverage,c,!0,[a]):c.getAverage(c.data.items,a)},getAverage:function(a,b){var c=0,d=a.length,e=0;if(a.length>0){for(;c<d;++c)e+=a[c].get(b);return e/d}return 0},aggregate:function(a,b,c,d){d=d||[];if(c&&this.isGrouped()){var e=this.getGroups(),f=0,g=e.length,h={},i;for(;f<g;++f)i=e[f],h[i.name]=a.apply(b||this,[i.children].concat(d));return h}return a.apply(b||this,[this.data.items].concat(d))}},function(){Ext.regStore("ext-empty-store",{fields:[],proxy:"proxy"})}),Ext.define("Ext.data.JsonStore",{extend:"Ext.data.Store",alias:"store.json",constructor:function(a){a=a||{},Ext.applyIf(a,{proxy:{type:"ajax",reader:"json",writer:"json"}}),this.callParent([a])}}),Ext.define("Ext.chart.axis.Time",{extend:"Ext.chart.axis.Numeric",alternateClassName:"Ext.chart.TimeAxis",alias:"axis.time",requires:["Ext.data.Store","Ext.data.JsonStore"],dateFormat:!1,fromDate:!1,toDate:!1,step:[Ext.Date.DAY,1],constrain:!1,roundToDecimal:!1,constructor:function(a){var b=this,c,d,e;b.callParent([a]),c=b.label||{},e=this.dateFormat,e&&(c.renderer?(d=c.renderer,c.renderer=function(a){return a=d(a),Ext.Date.format(new Date(d(a)),e)}):c.renderer=function(a){return Ext.Date.format(new Date(a>>0),e)})},doConstrain:function(){var a=this,b=a.chart.store,c=[],d=a.chart.series.items,e=Math,f=e.max,g=e.min,h=a.fields,i=h.length,j=a.getRange(),k=j.min,l=j.max,m,n,o=[],p,q,r,c=[];for(m=0,n=d.length;m<n;m++)o[m]=d[m].__excludes;b.each(function(a){for(m=0;m<i;m++){if(o[m])continue;p=a.get(h[m]);if(+p<+k)return;if(+p>+l)return}c.push(a)}),a.chart.substore=Ext.create("Ext.data.JsonStore",{model:b.model,data:c})},processView:function(){var a=this;a.fromDate&&(a.minimum=+a.fromDate),a.toDate&&(a.maximum=+a.toDate),a.constrain&&a.doConstrain()},calcEnds:function(){var a=this,b,c=a.step;return c?(b=a.getRange(),b=Ext.draw.Draw.snapEndsByDateAndStep(new Date(b.min),new Date(b.max),Ext.isNumber(c)?[Date.MILLI,c]:c),a.minimum&&(b.from=a.minimum),a.maximum&&(b.to=a.maximum),b.step=(b.to-b.from)/b.steps,b):a.callParent(arguments)}}),Ext.define("Ext.chart.series.Series",{mixins:{observable:"Ext.util.Observable",labels:"Ext.chart.Label",highlights:"Ext.chart.Highlight",tips:"Ext.chart.Tip",callouts:"Ext.chart.Callout"},type:null,title:null,showInLegend:!0,renderer:function(a,b,c,d,e){return c},shadowAttributes:null,triggerAfterDraw:!1,constructor:function(a){var b=this;a&&Ext.apply(b,a),b.shadowGroups=[],b.mixins.labels.constructor.call(b,a),b.mixins.highlights.constructor.call(b,a),b.mixins.tips.constructor.call(b,a),b.mixins.callouts.constructor.call(b,a),b.addEvents({scope:b,itemmouseover:!0,itemmouseout:!0,itemmousedown:!0,itemmouseup:!0,mouseleave:!0,afterdraw:!0,titlechange:!0}),b.mixins.observable.constructor.call(b,a),b.on({scope:b,itemmouseover:b.onItemMouseOver,itemmouseout:b.onItemMouseOut,mouseleave:b.onMouseLeave})},eachRecord:function(a,b){var c=this.chart;(c.substore||c.store).each(a,b)},getRecordCount:function(){var a=this.chart,b=a.substore||a.store;return b?b.getCount():0},isExcluded:function(a){var b=this.__excludes;return!!b&&!!b[a]},setBBox:function(a){var b=this,c=b.chart,d=c.chartBBox,e=a?0:c.maxGutter[0],f=a?0:c.maxGutter[1],g,h;g={x:d.x,y:d.y,width:d.width,height:d.height},b.clipBox=g,h={x:g.x+e-c.zoom.x*c.zoom.width,y:g.y+f-c.zoom.y*c.zoom.height,width:(g.width-e*2)*c.zoom.width,height:(g.height-f*2)*c.zoom.height},b.bbox=h},onAnimate:function(a,b){var c=this;return a.stopAnimation(),c.triggerAfterDraw?a.animate(Ext.applyIf(b,c.chart.animate)):(c.triggerAfterDraw=!0,a.animate(Ext.apply(Ext.applyIf(b,c.chart.animate),{listeners:{afteranimate:function(){c.triggerAfterDraw=!1,c.fireEvent("afterrender")}}})))},getGutters:function(){return[0,0]},onItemMouseOver:function(a){var b=this;a.series===b&&(b.highlight&&b.highlightItem(a),b.tooltip&&b.showTip(a))},onItemMouseOut:function(a){var b=this;a.series===b&&(b.unHighlightItem(),b.tooltip&&b.hideTip(a))},onMouseLeave:function(){var a=this;a.unHighlightItem(),a.tooltip&&a.hideTip()},getItemForPoint:function(a,b){if(!this.items||!this.items.length||this.seriesIsHidden)return null;var c=this,d=c.items,e=c.bbox,f,g,h;if(!Ext.draw.Draw.withinBox(a,b,e))return null;for(g=0,h=d.length;g<h;g++)if(d[g]&&this.isItemInPoint(a,b,d[g],g))return d[g];return null},isItemInPoint:function(a,b,c,d){return!1},hideAll:function(){var a=this,b=a.items,c,d,e,f,g,h,i;a.seriesIsHidden=!0,a._prevShowMarkers=a.showMarkers,a.showMarkers=!1,a.hideLabels(0);for(e=0,d=b.length;e<d;e++){c=b[e],h=c.sprite,h&&h.setAttributes({hidden:!0},!0);if(h&&h.shadows){i=h.shadows;for(f=0,g=i.length;f<g;++f)i[f].setAttributes({hidden:!0},!0)}}},showAll:function(){var a=this,b=a.chart.animate;a.chart.animate=!1,a.seriesIsHidden=!1,a.showMarkers=a._prevShowMarkers,a.drawSeries(),a.chart.animate=b},getLegendColor:function(a){var b=this,c,d;return b.seriesStyle?(c=b.seriesStyle.fill,d=b.seriesStyle.stroke,c&&c!="none"?c:d):"#000"},visibleInLegend:function(a){var b=this.__excludes;return b?!b[a]:!this.seriesIsHidden},setTitle:function(a,b){var c=this,d=c.title;Ext.isString(a)&&(b=a,a=0),Ext.isArray(d)?d[a]=b:c.title=b,c.fireEvent("titlechange",b,a)}}),Ext.define("Ext.chart.series.Cartesian",{extend:"Ext.chart.series.Series",alternateClassName:["Ext.chart.CartesianSeries","Ext.chart.CartesianChart"],xField:null,yField:null,axis:"left",getLegendLabels:function(){var a=this,b=[],c=a.combinations;return Ext.each([].concat(a.yField),function(c,d){var e=a.title;b.push((Ext.isArray(e)?e[d]:e)||c)}),c&&Ext.each(c,function(a){var c=b[a[0]],d=b[a[1]];b[a[1]]=c+" & "+d,b.splice(a[0],1)}),b},eachYValue:function(a,b,c){Ext.each(this.getYValueAccessors(),function(d,e){b.call(c,d(a),e)})},getYValueCount:function(){return this.getYValueAccessors().length},combine:function(a,b){var c=this,d=c.getYValueAccessors(),e=d[a],f=d[b];d[b]=function(a){return e(a)+f(a)},d.splice(a,1),c.callParent([a,b])},clearCombinations:function(){delete this.yValueAccessors,this.callParent()},getYValueAccessors:function(){var a=this,b=a.yValueAccessors;return b||(b=a.yValueAccessors=[],Ext.each([].concat(a.yField),function(a){b.push(function(b){return b.get(a)})})),b},getMinMaxXValues:function(){var a=this,b,c,d=a.xField;return a.getRecordCount()>0?(b=Infinity,c=-b,a.eachRecord(function(a){var e=a.get(d);e>c&&(c=e),e<b&&(b=e)})):b=c=0,[b,c]},getMinMaxYValues:function(){function g(b,c){a.isExcluded(c)||(b<0?f+=b:e+=b)}function h(b,e){a.isExcluded(e)||(b>d&&(d=b),b<c&&(c=b))}var a=this,b=a.stacked,c,d,e,f;return a.getRecordCount()>0?(c=Infinity,d=-c,a.eachRecord(function(j){b?(e=0,f=0,a.eachYValue(j,g),e>d&&(d=e),f<c&&(c=f)):a.eachYValue(j,h)})):c=d=0,[c,d]},getAxesForXAndYFields:function(){var a=this,b=a.chart.axes,c=[].concat(a.axis),d,e;return Ext.Array.indexOf(c,"top")>-1?d="top":Ext.Array.indexOf(c,"bottom")>-1?d="bottom":b.get("top")?d="top":b.get("bottom")&&(d="bottom"),Ext.Array.indexOf(c,"left")>-1?e="left":Ext.Array.indexOf(c,"right")>-1?e="right":b.get("left")?e="left":b.get("right")&&(e="right"),{xAxis:d,yAxis:e}}}),Ext.define("Ext.chart.series.Area",{extend:"Ext.chart.series.Cartesian",alias:"series.area",requires:["Ext.chart.axis.Axis","Ext.draw.Color","Ext.fx.Anim"],type:"area",stacked:!0,style:{},constructor:function(a){this.callParent(arguments);var b=this,c=b.chart.surface,d,e;Ext.apply(b,a,{__excludes:[],highlightCfg:{lineWidth:3,stroke:"#55c",opacity:.8,color:"#f00"}}),b.highlight&&(b.highlightSprite=c.add({type:"path",path:["M",0,0],zIndex:1e3,opacity:.3,lineWidth:5,hidden:!0,stroke:"#444"})),b.group=c.getGroup(b.seriesId)},shrink:function(a,b,c){var d=a.length,e=Math.floor(d/c),f,g,h=0,i=this.areas.length,j=[],k=[],l=[];for(g=0;g<i;++g)j[g]=0;for(f=0;f<d;++f){h+=a[f];for(g=0;g<i;++g)j[g]+=b[f][g];if(f%e==0){k.push(h/e);for(g=0;g<i;++g)j[g]/=e;l.push(j),h=0;for(g=0,j=[];g<i;++g)j[g]=0}}return{x:k,y:l}},getBounds:function(){var a=this,b=a.chart,c=b.getChartStore(),d=[].concat(a.yField),e=d.length,f=[],g=[],h=Infinity,i=h,j=h,k=-h,l=-h,m=Math,n=m.min,o=m.max,p,q,r,s,t,u,v,w,x,y,z;return a.setBBox(),p=a.bbox,a.axis&&(axis=b.axes.get(a.axis),axis&&(out=axis.calcEnds(),j=out.from||axis.prevMin,l=o(out.to||axis.prevMax,0))),a.yField&&!Ext.isNumber(j)&&(axis=Ext.create("Ext.chart.axis.Axis",{chart:b,fields:[].concat(a.yField)}),out=axis.calcEnds(),j=out.from||axis.prevMin,l=o(out.to||axis.prevMax,0)),Ext.isNumber(j)||(j=0),Ext.isNumber(l)||(l=0),c.each(function(b,c){s=b.get(a.xField),t=[],typeof s!="number"&&(s=c),f.push(s),v=0;for(u=0;u<e;u++)z=b.get(d[u]),typeof z=="number"&&(j=n(j,z),t.push(z),v+=z);i=n(i,s),k=o(k,s),l=o(l,v),g.push(t)},a),q=p.width/(k-i||1),r=p.height/(l-j||1),w=f.length,w>p.width&&a.areas&&(x=a.shrink(f,g,p.width),f=x.x,g=x.y),{bbox:p,minX:i,minY:j,xValues:f,yValues:g,xScale:q,yScale:r,areasLen:e}},getPaths:function(){var a=this,b=a.chart,c=b.getChartStore(),d=!0,e=a.getBounds(),f=e.bbox,g=a.items=[],h=[],i,j=[],k,l,m,n,o,p,q,r,s,t,u;l=e.xValues.length;for(k=0;k<l;k++){o=e.xValues[k],p=e.yValues[k],m=f.x+(o-e.minX)*e.xScale,q=0;for(r=0;r<e.areasLen;r++){if(a.__excludes[r])continue;h[r]||(h[r]=[]),t=p[r],q+=t,n=f.y+f.height-(q-e.minY)*e.yScale,j[r]?(j[r].push("L",m,n),h[r].push(["L",m,n])):(j[r]=["M",m,n],h[r].push(["L",m,n])),g[r]||(g[r]={pointsUp:[],pointsDown:[],series:a}),g[r].pointsUp.push([m,n])}}for(r=0;r<e.areasLen;r++){if(a.__excludes[r])continue;u=j[r];if(r==0||d)d=!1,u.push("L",m,f.y+f.height,"L",f.x,f.y+f.height,"Z");else{i=h[s],i.reverse(),u.push("L",m,i[0][2]);for(k=0;k<l;k++)u.push(i[k][0],i[k][1],i[k][2]),g[r].pointsDown[l-k-1]=[i[k][1],i[k][2]];u.push("L",f.x,u[2],"Z")}s=r}return{paths:j,areasLen:e.areasLen}},drawSeries:function(){var a=this,b=a.chart,c=b.getChartStore(),d=b.surface,e=b.animate,f=a.group,g=Ext.apply(a.seriesStyle,a.style),h=a.colorArrayStyle,i=h&&h.length||0,j,k,l,m,n;a.unHighlightItem(),a.cleanHighlights();if(!c||!c.getCount())return;l=a.getPaths(),a.areas||(a.areas=[]);for(j=0;j<l.areasLen;j++){if(a.__excludes[j])continue;a.areas[j]||(a.items[j].sprite=a.areas[j]=d.add(Ext.apply({},{type:"path",group:f,path:l.paths[j],stroke:g.stroke||h[j%i],fill:h[j%i]},g||{}))),k=a.areas[j],m=l.paths[j],e?(n=a.renderer(k,!1,{path:m,fill:h[j%i],stroke:g.stroke||h[j%i]},j,c),a.animation=a.onAnimate(k,{to:n})):(n=a.renderer(k,!1,{path:m,hidden:!1,fill:h[j%i],stroke:g.stroke||h[j%i]},j,c),a.areas[j].setAttributes(n,!0))}a.renderLabels(),a.renderCallouts()},onAnimate:function(a,b){return a.show(),this.callParent(arguments)},onCreateLabel:function(a,b,c,d){var e=this,f=e.labelsGroup,g=e.label,h=e.bbox,i=Ext.apply(g,e.seriesLabelStyle);return e.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:f,x:b.point[0],y:h.y+h.height/2},i||{}))},onPlaceLabel:function(a,b,c,d,e,f,g){var h=this,i=h.chart,j=i.resizing,k=h.label,l=k.renderer,m=k.field,n=h.bbox,o=c.point[0],p=c.point[1],q,r,s;a.setAttributes({text:l(b.get(m[g])),hidden:!0},!0),q=a.getBBox(),r=q.width/2,s=q.height/2,o=o-r<n.x?n.x+r:o,o=o+r>n.x+n.width?o-(o+r-n.x-n.width):o,p=p-s<n.y?n.y+s:p,p=p+s>n.y+n.height?p-(p+s-n.y-n.height):p,h.chart.animate&&!h.chart.resizing?(a.show(!0),h.onAnimate(a,{to:{x:o,y:p}})):(a.setAttributes({x:o,y:p},!0),j?h.animation.on("afteranimate",function(){a.show(!0)}):a.show(!0))},onPlaceCallout:function(a,b,c,d,e,f,g){var h=this,i=h.chart,j=i.surface,k=i.resizing,l=h.callouts,m=h.items,n=d==0?!1:m[d-1].point,o=d==m.length-1?!1:m[d+1].point,p=c.point,q,r,s,t,u,v,w=a.label.getBBox(),x=30,y=10,z=3,A,B,C,D,E,F=h.clipRect,G,H;n||(n=p),o||(o=p),t=(o[1]-n[1])/(o[0]-n[0]),u=(p[1]-n[1])/(p[0]-n[0]),v=(o[1]-p[1])/(o[0]-p[0]),r=Math.sqrt(1+t*t),q=[1/r,t/r],s=[-q[1],q[0]];if(u>0&&v<0&&s[1]<0||u<0&&v>0&&s[1]>0)s[0]*=-1,s[1]*=-1;else if(Math.abs(u)<Math.abs(v)&&s[0]<0||Math.abs(u)>Math.abs(v)&&s[0]>0)s[0]*=-1,s[1]*=-1;G=p[0]+s[0]*x,H=p[1]+s[1]*x,A=G+(s[0]>0?0:-(w.width+2*z)),B=H-w.height/2-z,C=w.width+2*z,D=w.height+2*z;if(A<F[0]||A+C>F[0]+F[2])s[0]*=-1;if(B<F[1]||B+D>F[1]+F[3])s[1]*=-1;G=p[0]+s[0]*x,H=p[1]+s[1]*x,A=G+(s[0]>0?0:-(w.width+2*z)),B=H-w.height/2-z,C=w.width+2*z,D=w.height+2*z,a.lines.setAttributes({path:["M",p[0],p[1],"L",G,H,"Z"]},!0),a.box.setAttributes({x:A,y:B,width:C,height:D},!0),a.label.setAttributes({x:G+(s[0]>0?z:-(w.width+z)),y:H},!0);for(E in a)a[E].show(!0)},isItemInPoint:function(a,b,c,d){var e=this,f=c.pointsUp,g=c.pointsDown,h=Math.abs,i=Infinity,j,k,l;for(j=0,k=f.length;j<k;j++){l=[f[j][0],f[j][1]];if(!(i>h(a-l[0]))){l=f[j-1];if(b>=l[1]&&(!g.length||b<=g[j-1][1]))return c.storeIndex=j-1,c.storeField=e.yField[d],c.storeItem=e.chart.store.getAt(j-1),c._points=g.length?[l,g[j-1]]:[l],!0;break}i=h(a-l[0])}return!1},highlightSeries:function(){var a,b,c;this._index!==undefined&&(a=this.areas[this._index],a.__highlightAnim&&(a.__highlightAnim.paused=!0),a.__highlighted=!0,a.__prevOpacity=a.__prevOpacity||a.attr.opacity||1,a.__prevFill=a.__prevFill||a.attr.fill,a.__prevLineWidth=a.__prevLineWidth||a.attr.lineWidth,c=Ext.draw.Color.fromString(a.__prevFill),b={lineWidth:(a.__prevLineWidth||0)+2},c?b.fill=c.getLighter(.2).toString():b.opacity=Math.max(a.__prevOpacity-.3,0),this.chart.animate?a.__highlightAnim=Ext.create("Ext.fx.Anim",Ext.apply({target:a,to:b},this.chart.animate)):a.setAttributes(b,!0))},unHighlightSeries:function(){var a;this._index!==undefined&&(a=this.areas[this._index],a.__highlightAnim&&(a.__highlightAnim.paused=!0),a.__highlighted&&(a.__highlighted=!1,a.__highlightAnim=Ext.create("Ext.fx.Anim",{target:a,to:{fill:a.__prevFill,opacity:a.__prevOpacity,lineWidth:a.__prevLineWidth}})))},highlightItem:function(a){var b=this,c,d;if(!a){this.highlightSeries();return}c=a._points,d=c.length==2?["M",c[0][0],c[0][1],"L",c[1][0],c[1][1]]:["M",c[0][0],c[0][1],"L",c[0][0],b.bbox.y+b.bbox.height],b.highlightSprite.setAttributes({path:d,hidden:!1},!0)},unHighlightItem:function(a){a||this.unHighlightSeries(),this.highlightSprite&&this.highlightSprite.hide(!0)},hideAll:function(){isNaN(this._index)||(this.__excludes[this._index]=!0,this.areas[this._index].hide(!0),this.drawSeries())},showAll:function(){isNaN(this._index)||(this.__excludes[this._index]=!1,this.areas[this._index].show(!0),this.drawSeries())},getLegendColor:function(a){var b=this;return b.colorArrayStyle[a%b.colorArrayStyle.length]}}),Ext.define("Ext.chart.series.Area",{extend:"Ext.chart.series.Cartesian",alias:"series.area",requires:["Ext.chart.axis.Axis","Ext.draw.Color","Ext.fx.Anim"],type:"area",stacked:!0,style:{},constructor:function(a){this.callParent(arguments);var b=this,c=b.chart.surface,d,e;Ext.apply(b,a,{__excludes:[],highlightCfg:{lineWidth:3,stroke:"#55c",opacity:.8,color:"#f00"}}),b.highlight&&(b.highlightSprite=c.add({type:"path",path:["M",0,0],zIndex:1e3,opacity:.3,lineWidth:5,hidden:!0,stroke:"#444"})),b.group=c.getGroup(b.seriesId)},shrink:function(a,b,c){var d=a.length,e=Math.floor(d/c),f,g,h=0,i=this.areas.length,j=[],k=[],l=[];for(g=0;g<i;++g)j[g]=0;for(f=0;f<d;++f){h+=a[f];for(g=0;g<i;++g)j[g]+=b[f][g];if(f%e==0){k.push(h/e);for(g=0;g<i;++g)j[g]/=e;l.push(j),h=0;for(g=0,j=[];g<i;++g)j[g]=0}}return{x:k,y:l}},getBounds:function(){var a=this,b=a.chart,c=b.getChartStore(),d=[].concat(a.yField),e=d.length,f=[],g=[],h=Infinity,i=h,j=h,k=-h,l=-h,m=Math,n=m.min,o=m.max,p,q,r,s,t,u,v,w,x,y,z;return a.setBBox(),p=a.bbox,a.axis&&(axis=b.axes.get(a.axis),axis&&(out=axis.calcEnds(),j=out.from||axis.prevMin,l=o(out.to||axis.prevMax,0))),a.yField&&!Ext.isNumber(j)&&(axis=Ext.create("Ext.chart.axis.Axis",{chart:b,fields:[].concat(a.yField)}),out=axis.calcEnds(),j=out.from||axis.prevMin,l=o(out.to||axis.prevMax,0)),Ext.isNumber(j)||(j=0),Ext.isNumber(l)||(l=0),c.each(function(b,c){s=b.get(a.xField),t=[],typeof s!="number"&&(s=c),f.push(s),v=0;for(u=0;u<e;u++)z=b.get(d[u]),typeof z=="number"&&(j=n(j,z),t.push(z),v+=z);i=n(i,s),k=o(k,s),l=o(l,v),g.push(t)},a),q=p.width/(k-i||1),r=p.height/(l-j||1),w=f.length,w>p.width&&a.areas&&(x=a.shrink(f,g,p.width),f=x.x,g=x.y),{bbox:p,minX:i,minY:j,xValues:f,yValues:g,xScale:q,yScale:r,areasLen:e}},getPaths:function(){var a=this,b=a.chart,c=b.getChartStore(),d=!0,e=a.getBounds(),f=e.bbox,g=a.items=[],h=[],i,j=[],k,l,m,n,o,p,q,r,s,t,u;l=e.xValues.length;for(k=0;k<l;k++){o=e.xValues[k],p=e.yValues[k],m=f.x+(o-e.minX)*e.xScale,q=0;for(r=0;r<e.areasLen;r++){if(a.__excludes[r])continue;h[r]||(h[r]=[]),t=p[r],q+=t,n=f.y+f.height-(q-e.minY)*e.yScale,j[r]?(j[r].push("L",m,n),h[r].push(["L",m,n])):(j[r]=["M",m,n],h[r].push(["L",m,n])),g[r]||(g[r]={pointsUp:[],pointsDown:[],series:a}),g[r].pointsUp.push([m,n])}}for(r=0;r<e.areasLen;r++){if(a.__excludes[r])continue;u=j[r];if(r==0||d)d=!1,u.push("L",m,f.y+f.height,"L",f.x,f.y+f.height,"Z");else{i=h[s],i.reverse(),u.push("L",m,i[0][2]);for(k=0;k<l;k++)u.push(i[k][0],i[k][1],i[k][2]),g[r].pointsDown[l-k-1]=[i[k][1],i[k][2]];u.push("L",f.x,u[2],"Z")}s=r}return{paths:j,areasLen:e.areasLen}},drawSeries:function(){var a=this,b=a.chart,c=b.getChartStore(),d=b.surface,e=b.animate,f=a.group,g=Ext.apply(a.seriesStyle,a.style),h=a.colorArrayStyle,i=h&&h.length||0,j,k,l,m,n;a.unHighlightItem(),a.cleanHighlights();if(!c||!c.getCount())return;l=a.getPaths(),a.areas||(a.areas=[]);for(j=0;j<l.areasLen;j++){if(a.__excludes[j])continue;a.areas[j]||(a.items[j].sprite=a.areas[j]=d.add(Ext.apply({},{type:"path",group:f,path:l.paths[j],stroke:g.stroke||h[j%i],fill:h[j%i]},g||{}))),k=a.areas[j],m=l.paths[j],e?(n=a.renderer(k,!1,{path:m,fill:h[j%i],stroke:g.stroke||h[j%i]},j,c),a.animation=a.onAnimate(k,{to:n})):(n=a.renderer(k,!1,{path:m,hidden:!1,fill:h[j%i],stroke:g.stroke||h[j%i]},j,c),a.areas[j].setAttributes(n,!0))}a.renderLabels(),a.renderCallouts()},onAnimate:function(a,b){return a.show(),this.callParent(arguments)},onCreateLabel:function(a,b,c,d){var e=this,f=e.labelsGroup,g=e.label,h=e.bbox,i=Ext.apply(g,e.seriesLabelStyle);return e.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:f,x:b.point[0],y:h.y+h.height/2},i||{}))},onPlaceLabel:function(a,b,c,d,e,f,g){var h=this,i=h.chart,j=i.resizing,k=h.label,l=k.renderer,m=k.field,n=h.bbox,o=c.point[0],p=c.point[1],q,r,s;a.setAttributes({text:l(b.get(m[g])),hidden:!0},!0),q=a.getBBox(),r=q.width/2,s=q.height/2,o=o-r<n.x?n.x+r:o,o=o+r>n.x+n.width?o-(o+r-n.x-n.width):o,p=p-s<n.y?n.y+s:p,p=p+s>n.y+n.height?p-(p+s-n.y-n.height):p,h.chart.animate&&!h.chart.resizing?(a.show(!0),h.onAnimate(a,{to:{x:o,y:p}})):(a.setAttributes({x:o,y:p},!0),j?h.animation.on("afteranimate",function(){a.show(!0)}):a.show(!0))},onPlaceCallout:function(a,b,c,d,e,f,g){var h=this,i=h.chart,j=i.surface,k=i.resizing,l=h.callouts,m=h.items,n=d==0?!1:m[d-1].point,o=d==m.length-1?!1:m[d+1].point,p=c.point,q,r,s,t,u,v,w=a.label.getBBox(),x=30,y=10,z=3,A,B,C,D,E,F=h.clipRect,G,H;n||(n=p),o||(o=p),t=(o[1]-n[1])/(o[0]-n[0]),u=(p[1]-n[1])/(p[0]-n[0]),v=(o[1]-p[1])/(o[0]-p[0]),r=Math.sqrt(1+t*t),q=[1/r,t/r],s=[-q[1],q[0]];if(u>0&&v<0&&s[1]<0||u<0&&v>0&&s[1]>0)s[0]*=-1,s[1]*=-1;else if(Math.abs(u)<Math.abs(v)&&s[0]<0||Math.abs(u)>Math.abs(v)&&s[0]>0)s[0]*=-1,s[1]*=-1;G=p[0]+s[0]*x,H=p[1]+s[1]*x,A=G+(s[0]>0?0:-(w.width+2*z)),B=H-w.height/2-z,C=w.width+2*z,D=w.height+2*z;if(A<F[0]||A+C>F[0]+F[2])s[0]*=-1;if(B<F[1]||B+D>F[1]+F[3])s[1]*=-1;G=p[0]+s[0]*x,H=p[1]+s[1]*x,A=G+(s[0]>0?0:-(w.width+2*z)),B=H-w.height/2-z,C=w.width+2*z,D=w.height+2*z,a.lines.setAttributes({path:["M",p[0],p[1],"L",G,H,"Z"]},!0),a.box.setAttributes({x:A,y:B,width:C,height:D},!0),a.label.setAttributes({x:G+(s[0]>0?z:-(w.width+z)),y:H},!0);for(E in a)a[E].show(!0)},isItemInPoint:function(a,b,c,d){var e=this,f=c.pointsUp,g=c.pointsDown,h=Math.abs,i=Infinity,j,k,l;for(j=0,k=f.length;j<k;j++){l=[f[j][0],f[j][1]];if(!(i>h(a-l[0]))){l=f[j-1];if(b>=l[1]&&(!g.length||b<=g[j-1][1]))return c.storeIndex=j-1,c.storeField=e.yField[d],c.storeItem=e.chart.store.getAt(j-1),c._points=g.length?[l,g[j-1]]:[l],!0;break}i=h(a-l[0])}return!1},highlightSeries:function(){var a,b,c;this._index!==undefined&&(a=this.areas[this._index],a.__highlightAnim&&(a.__highlightAnim.paused=!0),a.__highlighted=!0,a.__prevOpacity=a.__prevOpacity||a.attr.opacity||1,a.__prevFill=a.__prevFill||a.attr.fill,a.__prevLineWidth=a.__prevLineWidth||a.attr.lineWidth,c=Ext.draw.Color.fromString(a.__prevFill),b={lineWidth:(a.__prevLineWidth||0)+2},c?b.fill=c.getLighter(.2).toString():b.opacity=Math.max(a.__prevOpacity-.3,0),this.chart.animate?a.__highlightAnim=Ext.create("Ext.fx.Anim",Ext.apply({target:a,to:b},this.chart.animate)):a.setAttributes(b,!0))},unHighlightSeries:function(){var a;this._index!==undefined&&(a=this.areas[this._index],a.__highlightAnim&&(a.__highlightAnim.paused=!0),a.__highlighted&&(a.__highlighted=!1,a.__highlightAnim=Ext.create("Ext.fx.Anim",{target:a,to:{fill:a.__prevFill,opacity:a.__prevOpacity,lineWidth:a.__prevLineWidth}})))},highlightItem:function(a){var b=this,c,d;if(!a){this.highlightSeries();return}c=a._points,d=c.length==2?["M",c[0][0],c[0][1],"L",c[1][0],c[1][1]]:["M",c[0][0],c[0][1],"L",c[0][0],b.bbox.y+b.bbox.height],b.highlightSprite.setAttributes({path:d,hidden:!1},!0)},unHighlightItem:function(a){a||this.unHighlightSeries(),this.highlightSprite&&this.highlightSprite.hide(!0)},hideAll:function(){isNaN(this._index)||(this.__excludes[this._index]=!0,this.areas[this._index].hide(!0),this.drawSeries())},showAll:function(){isNaN(this._index)||(this.__excludes[this._index]=!1,this.areas[this._index].show(!0),this.drawSeries())},getLegendColor:function(a){var b=this;return b.colorArrayStyle[a%b.colorArrayStyle.length]}}),Ext.define("Ext.chart.series.Bar",{extend:"Ext.chart.series.Cartesian",alternateClassName:["Ext.chart.BarSeries","Ext.chart.BarChart","Ext.chart.StackedBarChart"],requires:["Ext.chart.axis.Axis","Ext.fx.Anim"],type:"bar",alias:"series.bar",column:!1,style:{},gutter:38.2,groupGutter:38.2,xPadding:0,yPadding:10,constructor:function(a){this.callParent(arguments);var b=this,c=b.chart.surface,d=b.chart.shadow,e,f;Ext.apply(b,a,{highlightCfg:{lineWidth:3,stroke:"#55c",opacity:.8,color:"#f00"},shadowAttributes:[{"stroke-width":6,"stroke-opacity":.05,stroke:"rgb(200, 200, 200)",translate:{x:1.2,y:1.2}},{"stroke-width":4,"stroke-opacity":.1,stroke:"rgb(150, 150, 150)",translate:{x:.9,y:.9}},{"stroke-width":2,"stroke-opacity":.15,stroke:"rgb(100, 100, 100)",translate:{x:.6,y:.6}}]}),b.group=c.getGroup(b.seriesId+"-bars");if(d)for(e=0,f=b.shadowAttributes.length;e<f;e++)b.shadowGroups.push(c.getGroup(b.seriesId+"-shadows"+e))},getBarGirth:function(){var a=this,b=a.chart.getChartStore(),c=a.column,d=b.getCount(),e=a.gutter/100;return(a.chart.chartBBox[c?"width":"height"]-a[c?"xPadding":"yPadding"]*2)/(d*(e+1)-e)},getGutters:function(){var a=this,b=a.column,c=Math.ceil(a[b?"xPadding":"yPadding"]+a.getBarGirth()/2);return a.column?[c,0]:[0,c]},getBounds:function(){var a=this,b=a.chart,c=b.getChartStore(),d=[].concat(a.yField),e=d.length,f=e,g=a.groupGutter/100,h=a.column,i=a.xPadding,j=a.yPadding,k=a.stacked,l=a.getBarGirth(),m=Math,n=m.max,o=m.abs,p,q,r,s,t,u,v,w,x,y,z,A,B;a.setBBox(!0),q=a.bbox;if(a.__excludes)for(z=0,x=a.__excludes.length;z<x;z++)a.__excludes[z]&&f--;return a.axis&&(t=b.axes.get(a.axis),t&&(u=t.calcEnds(),r=u.from,s=u.to)),a.yField&&!Ext.isNumber(r)&&(t=Ext.create("Ext.chart.axis.Axis",{chart:b,fields:[].concat(a.yField)}),u=t.calcEnds(),r=u.from,s=u.to),Ext.isNumber(r)||(r=0),Ext.isNumber(s)||(s=0),v=(h?q.height-j*2:q.width-i*2)/(s-r),p=l/((k?1:f)*(g+1)-g),w=h?q.y+q.height-j:q.x+i,k?(x=[[],[]],c.each(function(b,c){x[0][c]=x[0][c]||0,x[1][c]=x[1][c]||0;for(z=0;z<e;z++){if(a.__excludes&&a.__excludes[z])continue;y=b.get(d[z]),x[+(y>0)][c]+=o(y)}}),x[+(s>0)].push(o(s)),x[+(r>0)].push(o(r)),B=n.apply(m,x[0]),A=n.apply(m,x[1]),v=(h?q.height-j*2:q.width-i*2)/(A+B),w+=B*v*(h?-1:1)):r/s<0&&(w-=r*v*(h?-1:1)),{bars:d,bbox:q,barsLen:e,groupBarsLen:f,barWidth:l,groupBarWidth:p,scale:v,zero:w,xPadding:i,yPadding:j,signed:r/s<0,minY:r,maxY:s}},getPaths:function(){var a=this,b=a.chart,c=b.getChartStore(),d=a.bounds=a.getBounds(),e=a.items=[],f=a.gutter/100,g=a.groupGutter/100,h=b.animate,i=a.column,j=a.group,k=b.shadow,l=a.shadowGroups,m=a.shadowAttributes,n=l.length,o=d.bbox,p=a.xPadding,q=a.yPadding,r=a.stacked,s=d.barsLen,t=a.colorArrayStyle,u=t&&t.length||0,v=Math,w=v.max,x=v.min,y=v.abs,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O;c.each(function(c,m,v){E=d.zero,F=d.zero,C=0,D=0,G=!1;for(z=0,J=0;z<s;z++){if(a.__excludes&&a.__excludes[z])continue;A=c.get(d.bars[z]),B=Math.round((A-w(d.minY,0))*d.scale),H={fill:t[(s>1?z:0)%u]},i?Ext.apply(H,{height:B,width:w(d.groupBarWidth,0),x:o.x+p+m*d.barWidth*(1+f)+J*d.groupBarWidth*(1+g)*!r,y:E-B}):(N=v-1-m,Ext.apply(H,{height:w(d.groupBarWidth,0),width:B+(E==d.zero),x:E+(E!=d.zero),y:o.y+q+N*d.barWidth*(1+f)+J*d.groupBarWidth*(1+g)*!r+1})),B<0&&(i?(H.y=F,H.height=y(B)):(H.x=F+B,H.width=y(B))),r&&(B<0?F+=B*(i?-1:1):E+=B*(i?-1:1),C+=y(B),B<0&&(D+=y(B))),H.x=Math.floor(H.x)+1,O=Math.floor(H.y),!Ext.isIE9&&H.y>O&&O--,H.y=O,H.width=Math.floor(H.width),H.height=Math.floor(H.height),e.push({series:a,storeItem:c,value:[c.get(a.xField),A],attr:H,point:i?[H.x+H.width/2,A>=0?H.y:H.y+H.height]:[A>=0?H.x+H.width:H.x,H.y+H.height/2]});if(h&&b.resizing){I=i?{x:H.x,y:d.zero,width:H.width,height:0}:{x:d.zero,y:H.y,width:0,height:H.height};if(k&&(r&&!G||!r)){G=!0;for(K=0;K<n;K++)L=l[K].getAt(r?m:m*s+z),L&&L.setAttributes(I,!0)}M=j.getAt(m*s+z),M&&M.setAttributes(I,!0)}J++}r&&e.length&&(e[m*J].totalDim=C,e[m*J].totalNegDim=D)},a)},renderShadows:function(a,b,c,d){var e=this,f=e.chart,g=f.surface,h=f.animate,i=e.stacked,j=e.shadowGroups,k=e.shadowAttributes,l=j.length,m=f.getChartStore(),n=e.column,o=e.items,p=[],q=d.zero,r,s,t,u,v,w,x;if(i&&a%d.groupBarsLen===0||!i){w=a/d.groupBarsLen;for(r=0;r<l;r++)s=Ext.apply({},k[r]),t=j[r].getAt(i?w:a),Ext.copyTo(s,b,"x,y,width,height"),t||(t=g.add(Ext.apply({type:"rect",group:j[r]},Ext.apply({},c,s)))),i&&(u=o[a].totalDim,v=o[a].totalNegDim,n?(s.y=q-v,s.height=u):(s.x=q-v,s.width=u)),h?i?(x=e.renderer(t,m.getAt(w),Ext.apply(s,{hidden:!0}),a,m),t.setAttributes(x,!0)):(x=e.renderer(t,m.getAt(w),s,a,m),e.onAnimate(t,{to:x})):(x=e.renderer(t,m.getAt(w),Ext.apply(s,{hidden:!1}),a,m),t.setAttributes(x,!0)),p.push(t)}return p},drawSeries:function(){var a=this,b=a.chart,c=b.getChartStore(),d=b.surface,e=b.animate,f=a.stacked,g=a.column,h=b.shadow,i=a.shadowGroups,j=i.length,k=a.group,l=a.seriesStyle,m,n,o,p,q,r,s,t,u,v,w,x,y,z;if(!c||!c.getCount())return;delete l.fill,w=Ext.apply(l,this.style),a.unHighlightItem(),a.cleanHighlights(),a.getPaths(),v=a.bounds,m=a.items,q=g?{y:v.zero,height:0}:{x:v.zero,width:0},n=m.length;for(o=0;o<n;o++){r=k.getAt(o),x=m[o].attr,h&&(m[o].shadows=a.renderShadows(o,x,q,v)),r||(y=Ext.apply({},q,x),y=Ext.apply(y,w||{}),r=d.add(Ext.apply({},{type:"rect",group:k},y)));if(e){s=a.renderer(r,c.getAt(o),x,o,c),r._to=s,z=a.onAnimate(r,{to:Ext.apply(s,w)});if(h&&f&&o%v.barsLen===0){p=o/v.barsLen;for(t=0;t<j;t++)z.on("afteranimate",function(){this.show(!0)},i[t].getAt(p))}}else s=a.renderer(r,c.getAt(o),Ext.apply(x,{hidden:!1}),o,c),r.setAttributes(Ext.apply(s,w),!0);m[o].sprite=r}n=k.getCount();for(p=o;p<n;p++)k.getAt(p).hide(!0);if(h)for(t=0;t<j;t++){u=i[t],n=u.getCount();for(p=o;p<n;p++)u.getAt(p).hide(!0)}a.renderLabels()},onCreateLabel:function(a,b,c,d){var e=this,f=e.chart.surface,g=e.labelsGroup,h=e.label,i=Ext.apply({},h,e.seriesLabelStyle||{}),j;return f.add(Ext.apply({type:"text",group:g},i||{}))},onPlaceLabel:function(a,b,c,d,e,f,g,h){var i=this,j=i.bounds,k=j.groupBarWidth,l=i.column,m=i.chart,n=m.chartBBox,o=m.resizing,p=c.value[0],q=c.value[1],r=c.attr,s=i.label,t=s.orientation=="vertical",u=[].concat(s.field),v=s.renderer,w=v(b.get(u[h])),x=i.getLabelSize(w),y=x.width,z=x.height,A=j.zero,B="outside",C="insideStart",D="insideEnd",E=10,F=6,G=j.signed,H,I,J;a.setAttributes({text:w}),a.isOutside=!1,l?(e==B?z+F+r.height>(q>=0?A-n.y:n.y+n.height-A)&&(e=D):z+F>r.height&&(e=B,a.isOutside=!0),H=r.x+k/2,I=e==C?A+(z/2+3)*(q>=0?-1:1):q>=0?r.y+(z/2+3)*(e==B?-1:1):r.y+r.height+(z/2+3)*(e===B?1:-1)):(e==B?y+E+r.width>(q>=0?n.x+n.width-A:A-n.x)&&(e=D):y+E>r.width&&(e=B,a.isOutside=!0),H=e==C?A+(y/2+5)*(q>=0?1:-1):q>=0?r.x+r.width+(y/2+5)*(e===B?1:-1):r.x+(y/2+5)*(e===B?-1:1),I=r.y+k/2),J={x:H,y:I},t&&(J.rotate={x:H,y:I,degrees:270}),f&&o&&(l?(H=r.x+r.width/2,I=A):(H=A,I=r.y+r.height/2),a.setAttributes({x:H,y:I},!0),t&&a.setAttributes({rotate:{x:H,y:I,degrees:270}},!0)),f?i.onAnimate(a,{to:J}):a.setAttributes(Ext.apply(J,{hidden:!1}),!0)},getLabelSize:function(a){var b=this.testerLabel,c=this.label,d=Ext.apply({},c,this.seriesLabelStyle||{}),e=c.orientation==="vertical",f,g,h,i;return b||(b=this.testerLabel=this.chart.surface.add(Ext.apply({type:"text",opacity:0},d))),b.setAttributes({text:a},!0),f=b.getBBox(),g=f.width,h=f.height,{width:e?h:g,height:e?g:h}},onAnimate:function(a,b){return a.show(),this.callParent(arguments)},isItemInPoint:function(a,b,c){var d=c.sprite.getBBox();return d.x<=a&&d.y<=b&&d.x+d.width>=a&&d.y+d.height>=b},hideAll:function(){var a=this.chart.axes;isNaN(this._index)||(this.__excludes||(this.__excludes=[]),this.__excludes[this._index]=!0,this.drawSeries(),a.each(function(a){a.drawAxis()}))},showAll:function(){var a=this.chart.axes;isNaN(this._index)||(this.__excludes||(this.__excludes=[]),this.__excludes[this._index]=!1,this.drawSeries(),a.each(function(a){a.drawAxis()}))},getLegendColor:function(a){var b=this,c=b.colorArrayStyle.length;return b.style&&b.style.fill?b.style.fill:b.colorArrayStyle[a%c]},highlightItem:function(a){this.callParent(arguments),this.renderLabels()},unHighlightItem:function(){this.callParent(arguments),this.renderLabels()},cleanHighlights:function(){this.callParent(arguments),this.renderLabels()}}),Ext.define("Ext.chart.series.Column",{alternateClassName:["Ext.chart.ColumnSeries","Ext.chart.ColumnChart","Ext.chart.StackedColumnChart"],extend:"Ext.chart.series.Bar",type:"column",alias:"series.column",column:!0,xPadding:10,yPadding:0}),Ext.define("Ext.chart.series.Gauge",{extend:"Ext.chart.series.Series",type:"gauge",alias:"series.gauge",rad:Math.PI/180,highlightDuration:150,angleField:!1,needle:!1,donut:!1,showInLegend:!1,style:{},constructor:function(a){this.callParent(arguments);var b=this,c=b.chart,d=c.surface,e=c.store,f=c.shadow,g,h,i;Ext.apply(b,a,{shadowAttributes:[{"stroke-width":6,"stroke-opacity":1,stroke:"rgb(200, 200, 200)",translate:{x:1.2,y:2}},{"stroke-width":4,"stroke-opacity":1,stroke:"rgb(150, 150, 150)",translate:{x:.9,y:1.5}},{"stroke-width":2,"stroke-opacity":1,stroke:"rgb(100, 100, 100)",translate:{x:.6,y:1}}]}),b.group=d.getGroup(b.seriesId);if(f)for(g=0,h=b.shadowAttributes.length;g<h;g++)b.shadowGroups.push(d.getGroup(b.seriesId+"-shadows"+g));d.customAttributes.segment=function(a){return b.getSegment(a)}},initialize:function(){var a=this,b=a.chart.getChartStore();a.yField=[],a.label.field&&b.each(function(b){a.yField.push(b.get(a.label.field))})},getSegment:function(a){var b=this,c=b.rad,d=Math.cos,e=Math.sin,f=Math.abs,g=b.centerX,h=b.centerY,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=.01,r=a.endRho-a.startRho,s=a.startAngle,t=a.endAngle,u=(s+t)/2*c,v=a.margin||0,w=f(t-s)>180,x=Math.min(s,t)*c,y=Math.max(s,t)*c,z=!1;return g+=v*d(u),h+=v*e(u),i=g+a.startRho*d(x),m=h+a.startRho*e(x),j=g+a.endRho*d(x),n=h+a.endRho*e(x),k=g+a.startRho*d(y),o=h+a.startRho*e(y),l=g+a.endRho*d(y),p=h+a.endRho*e(y),f(i-k)<=q&&f(m-o)<=q&&(z=!0),z?{path:[["M",i,m],["L",j,n],["A",a.endRho,a.endRho,0,+w,1,l,p],["Z"]]}:{path:[["M",i,m],["L",j,n],["A",a.endRho,a.endRho,0,+w,1,l,p],["L",k,o],["A",a.startRho,a.startRho,0,+w,0,i,m],["Z"]]}},calcMiddle:function(a){var b=this,c=b.rad,d=a.slice,e=b.centerX,f=b.centerY,g=d.startAngle,h=d.endAngle,i=Math.max("rho"in d?d.rho:b.radius,b.label.minMargin),j=+b.donut,k=Math.min(g,h)*c,l=Math.max(g,h)*c,m=-(k+(l-k)/2),n=e+(a.endRho+a.startRho)/2*Math.cos(m),o=f-(a.endRho+a.startRho)/2*Math.sin(m);a.middle={x:n,y:o}},drawSeries:function(){var a=this,b=a.chart,c=b.getChartStore(),d=a.group,e=a.chart.animate,f=a.chart.axes.get(0),g=f&&f.minimum||a.minimum||0,h=f&&f.maximum||a.maximum||0,i=a.angleField||a.field||a.xField,j=b.surface,k=b.chartBBox,l=a.rad,m=+a.donut,n={},o=[],p=a.seriesStyle,q=a.seriesLabelStyle,r=a.colorArrayStyle,s=r&&r.length||0,t=b.maxGutter[0],u=b.maxGutter[1],v=Math.cos,w=Math.sin,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T;Ext.apply(p,a.style||{}),a.setBBox(),Q=a.bbox,a.colorSet&&(r=a.colorSet,s=r.length);if(!c||!c.getCount())return;y=a.centerX=k.x+k.width/2,z=a.centerY=k.y+k.height,a.radius=Math.min(y-k.x,z-k.y),a.slices=B=[],a.items=o=[],a.value||(G=c.getAt(0),a.value=G.get(i)),D=a.value,a.needle?(S={series:a,value:D,startAngle:-180,endAngle:0,rho:a.radius},R=-180*(1-(D-g)/(h-g)),B.push(S)):(R=-180*(1-(D-g)/(h-g)),S={series:a,value:D,startAngle:-180,endAngle:R,rho:a.radius},T={series:a,value:a.maximum-D,startAngle:R,endAngle:0,rho:a.radius},B.push(S,T));for(H=0,F=B.length;H<F;H++)A=B[H],C=d.getAt(H),x=Ext.apply({segment:{startAngle:A.startAngle,endAngle:A.endAngle,margin:0,rho:A.rho,startRho:A.rho*+m/100,endRho:A.rho}},Ext.apply(p,r&&{fill:r[H%s]}||{})),E=Ext.apply({},x.segment,{slice:A,series:a,storeItem:G,index:H}),o[H]=E,C||(P=Ext.apply({type:"path",group:d},Ext.apply(p,r&&{fill:r[H%s]}||{})),C=j.add(Ext.apply(P,x))),A.sprite=A.sprite||[],E.sprite=C,A.sprite.push(C),e?(x=a.renderer(C,G,x,H,c),C._to=x,a.onAnimate(C,{to:x})):(x=a.renderer(C,G,Ext.apply(x,{hidden:!1}),H,c),C.setAttributes(x,!0));a.needle&&(R=R*Math.PI/180,a.needleSprite?e?a.onAnimate(a.needleSprite,{to:{path:["M",y+a.radius*+m/100*v(R),z+ -Math.abs(a.radius*+m/100*w(R)),"L",y+a.radius*v(R),z+ -Math.abs(a.radius*w(R))]}}):a.needleSprite.setAttributes({type:"path",path:["M",y+a.radius*+m/100*v(R),z+ -Math.abs(a.radius*+m/100*w(R)),"L",y+a.radius*v(R),z+ -Math.abs(a.radius*w(R))]}):a.needleSprite=a.chart.surface.add({type:"path",path:["M",y+a.radius*+m/100*v(R),z+ -Math.abs(a.radius*+m/100*w(R)),"L",y+a.radius*v(R),z+ -Math.abs(a.radius*w(R))],"stroke-width":4,stroke:"#222"}),a.needleSprite.setAttributes({hidden:!1},!0)),delete a.value},setValue:function(a){this.value=a,this.drawSeries()},onCreateLabel:function(a,b,c,d){},onPlaceLabel:function(a,b,c,d,e,f,g){},onPlaceCallout:function(){},onAnimate:function(a,b){return a.show(),this.callParent(arguments)},isItemInPoint:function(a,b,c,d){return!1},showAll:function(){isNaN(this._index)||(this.__excludes[this._index]=!1,this.drawSeries())},getLegendColor:function(a){var b=this;return b.colorArrayStyle[a%b.colorArrayStyle.length]}}),Ext.define("Ext.chart.series.Line",{extend:"Ext.chart.series.Cartesian",alternateClassName:["Ext.chart.LineSeries","Ext.chart.LineChart"],requires:["Ext.chart.axis.Axis","Ext.chart.Shape","Ext.draw.Draw","Ext.fx.Anim"],type:"line",alias:"series.line",selectionTolerance:20,showMarkers:!0,markerConfig:{},style:{},smooth:!1,defaultSmoothness:3,fill:!1,constructor:function(a){this.callParent(arguments);var b=this,c=b.chart.surface,d=b.chart.shadow,e,f;Ext.apply(b,a,{highlightCfg:{"stroke-width":3},shadowAttributes:[{"stroke-width":6,"stroke-opacity":.05,stroke:"rgb(0, 0, 0)",translate:{x:1,y:1}},{"stroke-width":4,"stroke-opacity":.1,stroke:"rgb(0, 0, 0)",translate:{x:1,y:1}},{"stroke-width":2,"stroke-opacity":.15,stroke:"rgb(0, 0, 0)",translate:{x:1,y:1}}]}),b.group=c.getGroup(b.seriesId),b.showMarkers&&(b.markerGroup=c.getGroup(b.seriesId+"-markers"));if(d)for(e=0,f=b.shadowAttributes.length;e<f;e++)b.shadowGroups.push(c.getGroup(b.seriesId+"-shadows"+e))},shrink:function(a,b,c){var d=a.length,e=Math.floor(d/c),f=1,g=0,h=0,i=[a[0]],j=[b[0]];for(;f<d;++f)g+=a[f]||0,h+=b[f]||0,f%e==0&&(i.push(g/e),j.push(h/e),g=0,h=0);return{x:i,y:j}},drawSeries:function(){var a=this,b=a.chart,c=b.axes,d=b.getChartStore(),e=d.getCount(),f=a.chart.surface,g={},h=a.group,i=a.showMarkers,j=a.markerGroup,k=b.shadow,l=a.shadowGroups,m=a.shadowAttributes,n=a.smooth,o=l.length,p=["M"],q=["M"],r=["M"],s=["M"],t=b.markerIndex,u=[].concat(a.axis),v,w=[],x={},y=[],z={},A=!1,B=[],C=a.markerStyle,D=a.style,E=a.colorArrayStyle,F=E&&E.length||0,G=Ext.isNumber,H=a.seriesIdx,I=a.getAxesForXAndYFields(),J=I.xAxis,K=I.yAxis,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu;if(a.fireEvent("beforedraw",a)===!1)return;if(!e||a.seriesIsHidden){bu=this.items;if(bu)for(Z=0,_=bu.length;Z<_;++Z)bu[Z].sprite&&bu[Z].sprite.hide(!0);return}bq=Ext.apply(C||{},a.markerConfig),bs=bq.type,delete bq.type,br=D,br["stroke-width"]||(br["stroke-width"]=.5);if(t&&j&&j.getCount())for(Z=0;Z<t;Z++)bc=j.getAt(Z),j.remove(bc),j.add(bc),bd=j.getAt(j.getCount()-2),bc.setAttributes({x:0,y:0,translate:{x:bd.attr.translation.x,y:bd.attr.translation.y}},!0);a.unHighlightItem(),a.cleanHighlights(),a.setBBox(),g=a.bbox,a.clipRect=[g.x,g.y,g.width,g.height];for(Z=0,_=u.length;Z<_;Z++)ba=c.get(u[Z]),ba&&(bb=ba.calcEnds(),ba.position=="top"||ba.position=="bottom"?(bk=bb.from,bl=bb.to):(bm=bb.from,bn=bb.to));a.xField&&!G(bk)&&(J=="bottom"||J=="top")&&!c.get(J)&&(ba=Ext.create("Ext.chart.axis.Axis",{chart:b,fields:[].concat(a.xField)}).calcEnds(),bk=ba.from,bl=ba.to),a.yField&&!G(bm)&&(K=="right"||K=="left")&&!c.get(K)&&(ba=Ext.create("Ext.chart.axis.Axis",{chart:b,fields:[].concat(a.yField)}).calcEnds(),bm=ba.from,bn=ba.to),isNaN(bk)?(bk=0,bi=g.width/(e-1||1)):bi=g.width/(bl-bk||e-1||1),isNaN(bm)?(bm=0,bj=g.height/(e-1||1)):bj=g.height/(bn-bm||e-1||1),a.eachRecord(function(b,d){bf=b.get(a.xField);if(typeof bf=="string"||typeof bf=="object"&&!Ext.isDate(bf)||J&&c.get(J)&&c.get(J).type=="Category")bf in x?bf=x[bf]:bf=x[bf]=d;bg=b.get(a.yField);if(typeof bg=="undefined"||typeof bg=="string"&&!bg)return;if(typeof bg=="string"||typeof bg=="object"&&!Ext.isDate(bg)||K&&c.get(K)&&c.get(K).type=="Category")bg=d;B.push(d),w.push(bf),y.push(bg)}),_=w.length,_>g.width&&(bh=a.shrink(w,y,g.width),w=bh.x,y=bh.y),a.items=[],bt=0,_=w.length;for(Z=0;Z<_;Z++){bf=w[Z],bg=y[Z];if(bg===!1){q.length==1&&(q=[]),A=!0,a.items.push(!1);continue}S=(g.x+(bf-bk)*bi).toFixed(2),T=(g.y+g.height-(bg-bm)*bj).toFixed(2),A&&(A=!1,q.push("M")),q=q.concat([S,T]),typeof X=="undefined"&&typeof T!="undefined"&&(X=T,W=S);if(!a.line||b.resizing)p=p.concat([S,g.y+g.height/2]);if(b.animate&&b.resizing&&a.line){a.line.setAttributes({path:p},!0),a.fillPath&&a.fillPath.setAttributes({path:p,opacity:.2},!0);if(a.line.shadows){L=a.line.shadows;for($=0,o=L.length;$<o;$++)M=L[$],M.setAttributes({path:p},!0)}}i&&(bc=j.getAt(bt++),bc?(bc.setAttributes({value:'"'+bf+", "+bg+'"',x:0,y:0,hidden:!1},!0),bc._to={translate:{x:+S,y:+T}}):(bc=Ext.chart.Shape[bs](f,Ext.apply({group:[h,j],x:0,y:0,translate:{x:+(U||S),y:V||g.y+g.height/2},value:'"'+bf+", "+bg+'"',zIndex:4e3},bq)),bc._to={translate:{x:+S,y:+T}})),a.items.push({series:a,value:[bf,bg],point:[S,T],sprite:bc,storeItem:d.getAt(B[Z])}),U=S,V=T}if(q.length<=1)return;a.smooth&&(s=Ext.draw.Draw.smooth(q,G(n)?n:a.defaultSmoothness)),r=n?s:q,b.markerIndex&&a.previousPath?(O=a.previousPath,n||Ext.Array.erase(O,1,2)):O=q;if(!a.line){a.line=f.add(Ext.apply({type:"path",group:h,path:p,stroke:br.stroke||br.fill},br||{})),k&&a.line.setAttributes(Ext.apply({},a.shadowOptions),!0),a.line.setAttributes({fill:"none",zIndex:3e3}),!br.stroke&&F&&a.line.setAttributes({stroke:E[H%F]},!0);if(k){L=a.line.shadows=[];for(N=0;N<o;N++)v=m[N],v=Ext.apply({},v,{path:p}),M=f.add(Ext.apply({},{type:"path",group:l[N]},v)),L.push(M)}}a.fill&&(Q=r.concat([["L",S,g.y+g.height],["L",W,g.y+g.height],["L",W,X]]),a.fillPath||(a.fillPath=f.add({group:h,type:"path",opacity:br.opacity||.3,fill:br.fill||E[H%F],path:p}))),Y=i&&j.getCount();if(b.animate){P=a.fill,bo=a.line,R=a.renderer(bo,!1,{path:r},Z,d),Ext.apply(R,br||{},{stroke:br.stroke||br.fill}),delete R.fill,bo.show(!0),b.markerIndex&&a.previousPath?a.animation=bp=a.onAnimate(bo,{to:R,from:{path:O}}):a.animation=bp=a.onAnimate(bo,{to:R});if(k){L=bo.shadows;for($=0;$<o;$++)L[$].show(!0),b.markerIndex&&a.previousPath?a.onAnimate(L[$],{to:{path:r},from:{path:O}}):a.onAnimate(L[$],{to:{path:r}})}P&&(a.fillPath.show(!0),a.onAnimate(a.fillPath,{to:Ext.apply({},{path:Q,fill:br.fill||E[H%F],"stroke-width":0},br||{})}));if(i){bt=0;for(Z=0;Z<_;Z++)a.items[Z]&&(be=j.getAt(bt++),be&&(R=a.renderer(be,d.getAt(Z),be._to,Z,d),a.onAnimate(be,{to:Ext.apply(R,bq||{})}),be.show(!0)));for(;bt<Y;bt++)be=j.getAt(bt),be.hide(!0)}}else{R=a.renderer(a.line,!1,{path:r,hidden:!1},Z,d),Ext.apply(R,br||{},{stroke:br.stroke||br.fill}),delete R.fill,a.line.setAttributes(R,!0);if(k){L=a.line.shadows;for($=0;$<o;$++)L[$].setAttributes({path:r,hidden:!1},!0)}a.fill&&a.fillPath.setAttributes({path:Q,hidden:!1},!0);if(i){bt=0;for(Z=0;Z<_;Z++)a.items[Z]&&(be=j.getAt(bt++),be&&(R=a.renderer(be,d.getAt(Z),be._to,Z,d),be.setAttributes(Ext.apply(bq||{},R||{}),!0),be.show(!0)));for(;bt<Y;bt++)be=j.getAt(bt),be.hide(!0)}}b.markerIndex&&(a.smooth?Ext.Array.erase(q,1,2):Ext.Array.splice(q,1,0,q[1],q[2]),a.previousPath=q),a.renderLabels(),a.renderCallouts(),a.fireEvent("draw",a)},onCreateLabel:function(a,b,c,d){var e=this,f=e.labelsGroup,g=e.label,h=e.bbox,i=Ext.apply(g,e.seriesLabelStyle);return e.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:f,x:b.point[0],y:h.y+h.height/2},i||{}))},onPlaceLabel:function(a,b,c,d,e,f){var g=this,h=g.chart,i=h.resizing,j=g.label,k=j.renderer,l=j.field,m=g.bbox,n=c.point[0],o=c.point[1],p=c.sprite.attr.radius,q,r,s;a.setAttributes({text:k(b.get(l)),hidden:!0},!0);if(e=="rotate")a.setAttributes({"text-anchor":"start",rotation:{x:n,y:o,degrees:-45}},!0),q=a.getBBox(),r=q.width,s=q.height,n=n<m.x?m.x:n,n=n+r>m.x+m.width?n-(n+r-m.x-m.width):n,o=o-s<m.y?m.y+s:o;else if(e=="under"||e=="over")q=c.sprite.getBBox(),q.width=q.width||p*2,q.height=q.height||p*2,o+=e=="over"?-q.height:q.height,q=a.getBBox(),r=q.width/2,s=q.height/2,n=n-r<m.x?m.x+r:n,n=n+r>m.x+m.width?n-(n+r-m.x-m.width):n,o=o-s<m.y?m.y+s:o,o=o+s>m.y+m.height?o-(o+s-m.y-m.height):o;g.chart.animate&&!g.chart.resizing?(a.show(!0),g.onAnimate(a,{to:{x:n,y:o}})):(a.setAttributes({x:n,y:o},!0),i&&g.animation?g.animation.on("afteranimate",function(){a.show(!0)}):a.show(!0))},highlightItem:function(){var a=this;a.callParent(arguments),a.line&&!a.highlighted&&("__strokeWidth"in a.line||(a.line.__strokeWidth=a.line.attr["stroke-width"]||0),a.line.__anim&&(a.line.__anim.paused=!0),a.line.__anim=Ext.create("Ext.fx.Anim",{target:a.line,to:{"stroke-width":a.line.__strokeWidth+3}}),a.highlighted=!0)},unHighlightItem:function(){var a=this;a.callParent(arguments),a.line&&a.highlighted&&(a.line.__anim=Ext.create("Ext.fx.Anim",{target:a.line,to:{"stroke-width":a.line.__strokeWidth}}),a.highlighted=!1)},onPlaceCallout:function(a,b,c,d,e,f,g){if(!e)return;var h=this,i=h.chart,j=i.surface,k=i.resizing,l=h.callouts,m=h.items,n=d==0?!1:m[d-1].point,o=d==m.length-1?!1:m[d+1].point,p=[+c.point[0],+c.point[1]],q,r,s,t,u,v,w=l.offsetFromViz||30,x=l.offsetToSide||10,y=l.offsetBox||3,z,A,B,C,D,E=h.clipRect,F={width:l.styles.width||10,height:l.styles.height||10},G,H;n||(n=p),o||(o=p),t=(o[1]-n[1])/(o[0]-n[0]),u=(p[1]-n[1])/(p[0]-n[0]),v=(o[1]-p[1])/(o[0]-p[0]),r=Math.sqrt(1+t*t),q=[1/r,t/r],s=[-q[1],q[0]];if(u>0&&v<0&&s[1]<0||u<0&&v>0&&s[1]>0)s[0]*=-1,s[1]*=-1;else if(Math.abs(u)<Math.abs(v)&&s[0]<0||Math.abs(u)>Math.abs(v)&&s[0]>0)s[0]*=-1,s[1]*=-1;G=p[0]+s[0]*w,H=p[1]+s[1]*w,z=G+(s[0]>0?0:-(F.width+2*y)),A=H-F.height/2-y,B=F.width+2*y,C=F.height+2*y;if(z<E[0]||z+B>E[0]+E[2])s[0]*=-1;if(A<E[1]||A+C>E[1]+E[3])s[1]*=-1;G=p[0]+s[0]*w,H=p[1]+s[1]*w,z=G+(s[0]>0?0:-(F.width+2*y)),A=H-F.height/2-y,B=F.width+2*y,C=F.height+2*y,i.animate?(h.onAnimate(a.lines,{to:{path:["M",p[0],p[1],"L",G,H,"Z"]}}),a.panel&&a.panel.setPosition(z,A,!0)):(a.lines.setAttributes({path:["M",p[0],p[1],"L",G,H,"Z"]},!0),a.panel&&a.panel.setPosition(z,A));for(D in a)a[D].show(!0)},isItemInPoint:function(a,b,c,d){var e=this,f=e.items,g=e.selectionTolerance,h=null,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=Math.sqrt,z=Math.abs;return j=f[d],i=d&&f[d-1],d>=m&&(i=f[m-1]),k=i&&i.point,l=j&&j.point,n=i?k[0]:l[0]-g,o=i?k[1]:l[1],p=j?l[0]:k[0]+g,q=j?l[1]:k[1],t=y((a-n)*(a-n)+(b-o)*(b-o)),u=y((a-p)*(a-p)+(b-q)*(b-q)),v=Math.min(t,u),v<=g?v==t?i:j:!1},toggleAll:function(a){var b=this,c,d,e,f;a?Ext.chart.series.Cartesian.prototype.showAll.call(b):Ext.chart.series.Cartesian.prototype.hideAll.call(b);if(b.line){b.line.setAttributes({hidden:!a},!0);if(b.line.shadows)for(c=0,f=b.line.shadows,d=f.length;c<d;c++)e=f[c],e.setAttributes({hidden:!a},!0)}b.fillPath&&b.fillPath.setAttributes({hidden:!a},!0)},hideAll:function(){this.toggleAll(!1)},showAll:function(){this.toggleAll(!0)}}),Ext.define("Ext.chart.series.Pie",{alternateClassName:["Ext.chart.PieSeries","Ext.chart.PieChart"],extend:"Ext.chart.series.Series",type:"pie",alias:"series.pie",rad:Math.PI/180,highlightDuration:150,angleField:!1,lengthField:!1,donut:!1,showInLegend:!1,style:{},constructor:function(a){this.callParent(arguments);var b=this,c=b.chart,d=c.surface,e=c.store,f=c.shadow,g,h,i;Ext.applyIf(b,{highlightCfg:{segment:{margin:20}}}),Ext.apply(b,a,{shadowAttributes:[{"stroke-width":6,"stroke-opacity":1,stroke:"rgb(200, 200, 200)",translate:{x:1.2,y:2}},{"stroke-width":4,"stroke-opacity":1,stroke:"rgb(150, 150, 150)",translate:{x:.9,y:1.5}},{"stroke-width":2,"stroke-opacity":1,stroke:"rgb(100, 100, 100)",translate:{x:.6,y:1}}]}),b.group=d.getGroup(b.seriesId);if(f)for(g=0,h=b.shadowAttributes.length;g<h;g++)b.shadowGroups.push(d.getGroup(b.seriesId+"-shadows"+g));d.customAttributes.segment=function(a){return b.getSegment(a)},b.__excludes=b.__excludes||[]},initialize:function(){var a=this,b=a.chart.getChartStore();a.yField=[],a.label.field&&b.each(function(b){a.yField.push(b.get(a.label.field))})},getSegment:function(a){var b=this,c=b.rad,d=Math.cos,e=Math.sin,f=b.centerX,g=b.centerY,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=.01,u=a.startAngle,v=a.endAngle,w=(u+v)/2*c,x=a.margin||0,y=Math.min(u,v)*c,z=Math.max(u,v)*c,A=d(y),B=e(y),C=d(z),D=e(z),E=d(w),F=e(w),G=0,H=.7071067811865476;return z-y<t?{path:""}:(x!==0&&(f+=x*E,g+=x*F),i=f+a.endRho*A,m=g+a.endRho*B,k=f+a.endRho*C,o=g+a.endRho*D,Math.abs(i-k)+Math.abs(m-o)<t&&(E=H,F=-H,G=1),r=f+a.endRho*E,s=g+a.endRho*F,a.startRho!==0?(h=f+a.startRho*A,l=g+a.startRho*B,j=f+a.startRho*C,n=g+a.startRho*D,p=f+a.startRho*E,q=g+a.startRho*F,{path:[["M",i,m],["A",a.endRho,a.endRho,0,0,1,r,s],["L",r,s],["A",a.endRho,a.endRho,0,G,1,k,o],["L",k,o],["L",j,n],["A",a.startRho,a.startRho,0,G,0,p,q],["L",p,q],["A",a.startRho,a.startRho,0,0,0,h,l],["L",h,l],["Z"]]}):{path:[["M",f,g],["L",i,m],["A",a.endRho,a.endRho,0,0,1,r,s],["L",r,s],["A",a.endRho,a.endRho,0,G,1,k,o],["L",k,o],["L",f,g],["Z"]]})},calcMiddle:function(a){var b=this,c=b.rad,d=a.slice,e=b.centerX,f=b.centerY,g=d.startAngle,h=d.endAngle,i=+b.donut,j=-(g+h)*c/2,k=(a.endRho+a.startRho)/2,l=e+k*Math.cos(j),m=f-k*Math.sin(j);a.middle={x:l,y:m}},drawSeries:function(){var a=this,b=a.chart.getChartStore(),c=a.group,d=a.chart.animate,e=a.angleField||a.field||a.xField,f=[].concat(a.lengthField),g=0,h=a.colorSet,i=a.chart,j=i.surface,k=i.chartBBox,l=i.shadow,m=a.shadowGroups,n=a.shadowAttributes,o=m.length,p=a.rad,q=f.length,r=0,s=+a.donut,t=[],u={},v,w=[],x=!1,y=0,z=0,A=9,B=!0,C=0,D=a.seriesStyle,E=a.seriesLabelStyle,F=a.colorArrayStyle,G=F&&F.length||0,H=i.maxGutter[0],I=i.maxGutter[1],J=Math.abs,K,L,M,N,O,P,Q,R,S,T=0,U,V,W,X,Y,Z,$,_,ba,bb,bc,bd,be,bf,bg,bh,bi,bj;Ext.apply(D,a.style||{}),a.setBBox(),bj=a.bbox,a.colorSet&&(F=a.colorSet,G=F.length);if(!b||!b.getCount())return;a.unHighlightItem(),a.cleanHighlights(),Q=a.centerX=k.x+k.width/2,R=a.centerY=k.y+k.height/2,a.radius=Math.min(Q-k.x,R-k.y),a.slices=V=[],a.items=w=[],b.each(function(a,b){if(this.__excludes&&this.__excludes[b])return;y+=+a.get(e);if(f[0]){for(bb=0,g=0;bb<q;bb++)g+=+a.get(f[bb]);t[b]=g,z=Math.max(z,g)}},this),y=y||1,b.each(function(b,c){this.__excludes&&this.__excludes[c]?X=0:(X=b.get(e),T==0&&(T=1));if(T==1){T=2,a.firstAngle=C=360*X/y/2;for(bb=0;bb<c;bb++)V[bb].startAngle=V[bb].endAngle=a.firstAngle}bd=C-360*X/y,U={series:a,value:X,startAngle:C,endAngle:bd,storeItem:b},f[0]?(Z=t[c],U.rho=a.radius*(Z/z)):U.rho=a.radius,V[c]=U,C=bd},a);if(l)for(ba=0,$=V.length;ba<$;ba++){U=V[ba],U.shadowAttrs=[];for(bb=0,r=0,N=[];bb<q;bb++){W=c.getAt(ba*q+bb),S=f[bb]?b.getAt(ba).get(f[bb])/t[ba]*U.rho:U.rho,K={segment:{startAngle:U.startAngle,endAngle:U.endAngle,margin:0,rho:U.rho,startRho:r+S*s/100,endRho:r+S},hidden:!U.value&&U.startAngle%360==U.endAngle%360};for(P=0,N=[];P<o;P++)M=n[P],O=m[P].getAt(ba),O||(O=i.surface.add(Ext.apply({},{type:"path",group:m[P],strokeLinejoin:"round"},K,M))),d?(M=a.renderer(O,b.getAt(ba),Ext.apply({},K,M),ba,b),a.onAnimate(O,{to:M})):(M=a.renderer(O,b.getAt(ba),M,ba,b),O.setAttributes(M,!0)),N.push(O);U.shadowAttrs[bb]=N}}for(ba=0,$=V.length;ba<$;ba++){U=V[ba];for(bb=0,r=0;bb<q;bb++)W=c.getAt(ba*q+bb),S=f[bb]?b.getAt(ba).get(f[bb])/t[ba]*U.rho:U.rho,K=Ext.apply({segment:{startAngle:U.startAngle,endAngle:U.endAngle,margin:0,rho:U.rho,startRho:r+S*s/100,endRho:r+S},hidden:!U.value&&U.startAngle%360==U.endAngle%360},Ext.apply(D,F&&{fill:F[(q>1?bb:ba)%G]}||{})),Y=Ext.apply({},K.segment,{slice:U,series:a,storeItem:U.storeItem,index:ba}),a.calcMiddle(Y),l&&(Y.shadows=U.shadowAttrs[bb]),w[ba]=Y,W||(bi=Ext.apply({type:"path",group:c,middle:Y.middle},Ext.apply(D,F&&{fill:F[(q>1?bb:ba)%G]}||{})),W=j.add(Ext.apply(bi,K))),U.sprite=U.sprite||[],Y.sprite=W,U.sprite.push(W),U.point=[Y.middle.x,Y.middle.y],d?(K=a.renderer(W,b.getAt(ba),K,ba,b),W._to=K,W._animating=!0,a.onAnimate(W,{to:K,listeners:{afteranimate:{fn:function(){this._animating=!1},scope:W}}})):(K=a.renderer(W,b.getAt(ba),Ext.apply(K,{hidden:!1}),ba,b),W.setAttributes(K,!0)),r+=S}$=c.getCount();for(ba=0;ba<$;ba++)!V[ba/q>>0]&&c.getAt(ba)&&c.getAt(ba).hide(!0);if(l){o=m.length;for(P=0;P<$;P++)if(!V[P/q>>0])for(bb=0;bb<o;bb++)m[bb].getAt(P)&&m[bb].getAt(P).hide(!0)}a.renderLabels(),a.renderCallouts()},onCreateLabel:function(a,b,c,d){var e=this,f=e.labelsGroup,g=e.label,h=e.centerX,i=e.centerY,j=b.middle,k=Ext.apply(e.seriesLabelStyle||{},g||{});return e.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:f,x:j.x,y:j.y},k))},onPlaceLabel:function(a,b,c,d,e,f,g){function y(a){return a<0&&(a+=360),a%360}var h=this,i=h.chart,j=i.resizing,k=h.label,l=k.renderer,m=[].concat(k.field),n=h.centerX,o=h.centerY,p=c.middle,q={x:p.x,y:p.y},r=p.x-n,s=p.y-o,t={},u=1,v=Math.atan2(s,r||1),w=v*180/Math.PI,x;this.__excludes&&this.__excludes[d]&&(q.hidden=!0),a.setAttributes({text:l(b.get(m[g]))},!0);switch(e){case"outside":u=Math.sqrt(r*r+s*s)*2,q.x=u*Math.cos(v)+n,q.y=u*Math.sin(v)+o;break;case"rotate":w=y(w),w=w>90&&w<270?w+180:w,x=a.attr.rotation.degrees,x!=null&&Math.abs(x-w)>180?(w>x?w-=360:w+=360,w%=360):w=y(w),q.rotate={degrees:w,x:q.x,y:q.y};break;default:}q.translate={x:0,y:0},f&&!j&&(e!="rotate"||x!=null)?h.onAnimate(a,{to:q}):a.setAttributes(q,!0),a._from=t},onPlaceCallout:function(a,b,c,d,e,f,g){var h=this,i=h.chart,j=i.resizing,k=h.callouts,l=h.centerX,m=h.centerY,n=c.middle,o={x:n.x,y:n.y},p=n.x-l,q=n.y-m,r=1,s,t=Math.atan2(q,p||1),u=a.label.getBBox(),v=20,w=10,x=10,y;r=c.endRho+v,s=(c.endRho+c.startRho)/2+(c.endRho-c.startRho)/3,o.x=r*Math.cos(t)+l,o.y=r*Math.sin(t)+m,p=s*Math.cos(t),q=s*Math.sin(t),i.animate?(h.onAnimate(a.lines,{to:{path:["M",p+l,q+m,"L",o.x,o.y,"Z","M",o.x,o.y,"l",p>0?w:-w,0,"z"]}}),h.onAnimate(a.box,{to:{x:o.x+(p>0?w:-(w+u.width+2*x)),y:o.y+(q>0?-u.height-x/2:-u.height-x/2),width:u.width+2*x,height:u.height+2*x}}),h.onAnimate(a.label,{to:{x:o.x+(p>0?w+x:-(w+u.width+x)),y:o.y+(q>0?-u.height/4:-u.height/4)}})):(a.lines.setAttributes({path:["M",p+l,q+m,"L",o.x,o.y,"Z","M",o.x,o.y,"l",p>0?w:-w,0,"z"]},!0),a.box.setAttributes({x:o.x+(p>0?w:-(w+u.width+2*x)),y:o.y+(q>0?-u.height-x/2:-u.height-x/2),width:u.width+2*x,height:u.height+2*x},!0),a.label.setAttributes({x:o.x+(p>0?w+x:-(w+u.width+x)),y:o.y+(q>0?-u.height/4:-u.height/4)},!0));for(y in a)a[y].show(!0)},onAnimate:function(a,b){return a.show(),this.callParent(arguments)},isItemInPoint:function(a,b,c,d){var e=this,f=e.centerX,g=e.centerY,h=Math.abs,i=h(a-f),j=h(b-g),k=c.startAngle,l=c.endAngle,m=Math.sqrt(i*i+j*j),n=Math.atan2(b-g,a-f)/e.rad;return n>e.firstAngle&&(n-=360),n<=k&&n>l&&m>=c.startRho&&m<=c.endRho},hideAll:function(){var a,b,c,d,e,f,g;if(!isNaN(this._index)){this.__excludes=this.__excludes||[],this.__excludes[this._index]=!0,g=this.slices[this._index].sprite;for(e=0,f=g.length;e<f;e++)g[e].setAttributes({hidden:!0},!0);if(this.slices[this._index].shadowAttrs)for(a=0,d=this.slices[this._index].shadowAttrs,b=d.length;a<b;a++){c=d[a];for(e=0,f=c.length;e<f;e++)c[e].setAttributes({hidden:!0},!0)}this.drawSeries()}},showAll:function(){isNaN(this._index)||(this.__excludes[this._index]=!1,this.drawSeries())},highlightItem:function(a){var b=this,c=b.rad;a=a||this.items[this._index],this.unHighlightItem();if(!a||a.sprite&&a.sprite._animating)return;b.callParent([a]);if(!b.highlight)return;if("segment"in b.highlightCfg){var d=b.highlightCfg.segment,e=b.chart.animate,f,g,h,i,j,k,l,m;if(b.labelsGroup){var n=b.labelsGroup,o=b.label.display,p=n.getAt(a.index),q=(a.startAngle+a.endAngle)/2*c,r=d.margin||0,s=r*Math.cos(q),t=r*Math.sin(q);Math.abs(s)<1e-10&&(s=0),Math.abs(t)<1e-10&&(t=0),e?(p.stopAnimation(),p.animate({to:{translate:{x:s,y:t}},duration:b.highlightDuration})):p.setAttributes({translate:{x:s,y:t}},!0)}if(b.chart.shadow&&a.shadows){g=0,h=a.shadows,j=h.length;for(;g<j;g++){i=h[g],k={},l=a.sprite._from.segment;for(m in l)m in d||(k[m]=l[m]);f={segment:Ext.applyIf(k,b.highlightCfg.segment)},e?(i.stopAnimation(),i.animate({to:f,duration:b.highlightDuration})):i.setAttributes(f,!0)}}}},unHighlightItem:function(){var a=this;if(!a.highlight)return;if("segment"in a.highlightCfg&&a.items){var b=a.items,c=a.chart.animate,d=!!a.chart.shadow,e=a.labelsGroup,f=b.length,g=0,h=0,i=a.label.display,j,k,l,m,n,o,p,q,r,s,t;for(;g<f;g++){r=b[g];if(!r)continue;o=r.sprite;if(o&&o._highlighted){e&&(s=e.getAt(r.index),t=Ext.apply({translate:{x:0,y:0}},i=="rotate"?{rotate:{x:s.attr.x,y:s.attr.y,degrees:s.attr.rotation.degrees}}:{}),c?(s.stopAnimation(),s.animate({to:t,duration:a.highlightDuration})):s.setAttributes(t,!0));if(d){p=r.shadows,j=p.length;for(;h<j;h++){l={},m=r.sprite._to.segment,n=r.sprite._from.segment,Ext.apply(l,n);for(k in m)k in n||(l[k]=m[k]);q=p[h],c?(q.stopAnimation(),q.animate({to:{segment:l},duration:a.highlightDuration})):q.setAttributes({segment:l},!0)}}}}}a.callParent(arguments)},getLegendColor:function(a){var b=this;return b.colorSet&&b.colorSet[a%b.colorSet.length]||b.colorArrayStyle[a%b.colorArrayStyle.length]}}),Ext.define("Ext.chart.series.Radar",{extend:"Ext.chart.series.Series",requires:["Ext.chart.Shape","Ext.fx.Anim"],type:"radar",alias:"series.radar",rad:Math.PI/180,showInLegend:!1,style:{},constructor:function(a){this.callParent(arguments);var b=this,c=b.chart.surface,d,e;b.group=c.getGroup(b.seriesId),b.showMarkers&&(b.markerGroup=c.getGroup(b.seriesId+"-markers"))},drawSeries:function(){var a=this,b=a.chart.getChartStore(),c=a.group,d,e=a.chart,f=e.animate,g=a.field||a.yField,h=e.surface,i=e.chartBBox,j,k,l,m,n,o=0,p=[],q=Math.max,r=Math.cos,s=Math.sin,t=Math.PI*2,u=b.getCount(),v,w,x,y,z,A,B,C=a.seriesStyle,D=a.seriesLabelStyle,E=e.resizing||!a.radar,F=e.axes&&e.axes.get(0),G=!F||!F.maximum;a.setBBox(),o=G?0:F.maximum||0,Ext.apply(C,a.style||{});if(!b||!b.getCount())return;a.unHighlightItem(),a.cleanHighlights(),k=a.centerX=i.x+i.width/2,l=a.centerY=i.y+i.height/2,a.radius=n=Math.min(i.width,i.height)/2,a.items=m=[],G&&(e.series.each(function(a){p.push(a.yField)}),b.each(function(a,b){for(b=0,B=p.length;b<B;b++)o=q(+a.get(p[b]),o)})),o=o||1,v=[],w=[],b.each(function(b,c){z=n*b.get(g)/o,x=z*r(c/u*t),y=z*s(c/u*t),c==0?(w.push("M",x+k,y+l),v.push("M",.01*x+k,.01*y+l)):(w.push("L",x+k,y+l),v.push("L",.01*x+k,.01*y+l)),m.push({sprite:!1,point:[k+x,l+y],series:a})}),w.push("Z"),a.radar||(a.radar=h.add(Ext.apply({type:"path",group:c,path:v},C||{}))),e.resizing&&a.radar.setAttributes({path:v},!0),e.animate?a.onAnimate(a.radar,{to:Ext.apply({path:w},C||{})}):a.radar.setAttributes(Ext.apply({path:w},C||{}),!0),a.showMarkers&&a.drawMarkers(),a.renderLabels(),a.renderCallouts()},drawMarkers:function(){var a=this,b=a.chart,c=b.surface,d=Ext.apply({},a.markerStyle||{}),e=Ext.apply(d,a.markerConfig),f=a.items,g=e.type,h=a.markerGroup,i=a.centerX,j=a.centerY,k,l,m,n;delete e.type;for(l=0,m=f.length;l<m;l++)k=f[l],n=h.getAt(l),n?n.show():n=Ext.chart.Shape[g](c,Ext.apply({group:h,x:0,y:0,translate:{x:i,y:j}},e)),b.resizing&&n.setAttributes({x:0,y:0,translate:{x:i,y:j}},!0),n._to={translate:{x:k.point[0],y:k.point[1]}},b.animate?a.onAnimate(n,{to:n._to}):n.setAttributes(Ext.apply(n._to,e||{}),!0)},isItemInPoint:function(a,b,c){var d,e=10,f=Math.abs;return d=c.point,f(d[0]-a)<=e&&f(d[1]-b)<=e},onCreateLabel:function(a,b,c,d){var e=this,f=e.labelsGroup,g=e.label,h=e.centerX,i=e.centerY,j=b.point,k=Ext.apply(e.seriesLabelStyle||{},g);return e.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:f,x:h,y:i},g||{}))},onPlaceLabel:function(a,b,c,d,e,f){var g=this,h=g.chart,i=h.resizing,j=g.label,k=j.renderer,l=j.field,m=g.centerX,n=g.centerY,o={x:c.point[0],y:c.point[1]},p=o.x-m,q=o.y-n;a.setAttributes({text:k(b.get(l)),hidden:!0},!0),i&&a.setAttributes({x:m,y:n},!0),f?(a.show(!0),g.onAnimate(a,{to:o})):(a.setAttributes(o,!0),a.show(!0))},toggleAll:function(a){var b=this,c,d,e,f;a?Ext.chart.series.Radar.superclass.showAll.call(b):Ext.chart.series.Radar.superclass.hideAll.call(b);if(b.radar){b.radar.setAttributes({hidden:!a},!0);if(b.radar.shadows)for(c=0,f=b.radar.shadows,d=f.length;c<d;c++)e=f[c],e.setAttributes({hidden:!a},!0)}},hideAll:function(){this.toggleAll(!1),this.hideMarkers(0)},showAll:function(){this.toggleAll(!0)},hideMarkers:function(a){var b=this,c=b.markerGroup&&b.markerGroup.getCount()||0,d=a||0;for(;d<c;d++)b.markerGroup.getAt(d).hide(!0)}}),Ext.define("Ext.chart.series.Scatter",{extend:"Ext.chart.series.Cartesian",requires:["Ext.chart.axis.Axis","Ext.chart.Shape","Ext.fx.Anim"],type:"scatter",alias:"series.scatter",constructor:function(a){this.callParent(arguments);var b=this,c=b.chart.shadow,d=b.chart.surface,e,f;Ext.apply(b,a,{style:{},markerConfig:{},shadowAttributes:[{"stroke-width":6,"stroke-opacity":.05,stroke:"rgb(0, 0, 0)"},{"stroke-width":4,"stroke-opacity":.1,stroke:"rgb(0, 0, 0)"},{"stroke-width":2,"stroke-opacity":.15,stroke:"rgb(0, 0, 0)"}]}),b.group=d.getGroup(b.seriesId);if(c)for(e=0,f=b.shadowAttributes.length;e<f;e++)b.shadowGroups.push(d.getGroup(b.seriesId+"-shadows"+e))},getBounds:function(){var a=this,b=a.chart,c=b.getChartStore(),d=[].concat(a.axis),e,f,g,h,i,j,k,l,m,n,o;a.setBBox(),e=a.bbox;for(m=0,h=d.length;m<h;m++)n=b.axes.get(d[m]),n&&(o=n.calcEnds(),n.position=="top"||n.position=="bottom"?(i=o.from,k=o.to):(j=o.from,l=o.to));return a.xField&&!Ext.isNumber(i)&&(n=Ext.create("Ext.chart.axis.Axis",{chart:b,fields:[].concat(a.xField)}).calcEnds(),i=n.from,k=n.to),a.yField&&!Ext.isNumber(j)&&(n=Ext.create("Ext.chart.axis.Axis",{chart:b,fields:[].concat(a.yField)}).calcEnds(),j=n.from,l=n.to),isNaN(i)?(i=0,k=c.getCount()-1,f=e.width/(c.getCount()-1)):f=e.width/(k-i),isNaN(j)?(j=0,l=c.getCount()-1,g=e.height/(c.getCount()-1)):g=e.height/(l-j),{bbox:e,minX:i,minY:j,xScale:f,yScale:g}},getPaths:function(){var a=this,b=a.chart,c=b.shadow,d=b.getChartStore(),e=a.group,f=a.bounds=a.getBounds(),g=a.bbox,h=f.xScale,i=f.yScale,j=f.minX,k=f.minY,l=g.x,m=g.y,n=g.height,o=a.items=[],p=[],q,r,s,t,u;return d.each(function(d,f){s=d.get(a.xField),t=d.get(a.yField);if(typeof t=="undefined"||typeof t=="string"&&!t)return;if(typeof s=="string"||typeof s=="object"&&!Ext.isDate(s))s=f;if(typeof t=="string"||typeof t=="object"&&!Ext.isDate(t))t=f;q=l+(s-j)*h,r=m+n-(t-k)*i,p.push({x:q,y:r}),a.items.push({series:a,value:[s,t],point:[q,r],storeItem:d}),b.animate&&b.resizing&&(u=e.getAt(f),u&&(a.resetPoint(u),c&&a.resetShadow(u)))}),p},resetPoint:function(a){var b=this.bbox;a.setAttributes({translate:{x:(b.x+b.width)/2,y:(b.y+b.height)/2}},!0)},resetShadow:function(a){var b=this,c=a.shadows,d=b.shadowAttributes,e=b.shadowGroups.length,f=b.bbox,g,h;for(g=0;g<e;g++)h=Ext.apply({},d[g]),h.translate?(h.translate.x+=(f.x+f.width)/2,h.translate.y+=(f.y+f.height)/2):h.translate={x:(f.x+f.width)/2,y:(f.y+f.height)/2},c[g].setAttributes(h,!0)},createPoint:function(a,b){var c=this,d=c.chart,e=c.group,f=c.bbox;return Ext.chart.Shape[b](d.surface,Ext.apply({},{x:0,y:0,group:e,translate:{x:(f.x+f.width)/2,y:(f.y+f.height)/2}},a))},createShadow:function(a,b,c){var d=this,e=d.chart,f=d.shadowGroups,g=d.shadowAttributes,h=f.length,i=d.bbox,j,k,l,m;a.shadows=l=[];for(j=0;j<h;j++)m=Ext.apply({},g[j]),m.translate?(m.translate.x+=(i.x+i.width)/2,m.translate.y+=(i.y+i.height)/2):Ext.apply(m,{translate:{x:(i.x+i.width)/2,y:(i.y+i.height)/2}}),Ext.apply(m,b),k=Ext.chart.Shape[c](e.surface,Ext.apply({},{x:0,y:0,group:f[j]},m)),l.push(k)},drawSeries:function(){var a=this,b=a.chart,c=b.getChartStore(),d=a.group,e=b.shadow,f=a.shadowGroups,g=a.shadowAttributes,h=f.length,i,j,k,l,m,n,o,p,q,r,s;n=Ext.apply(a.markerStyle,a.markerConfig),p=n.type,delete n.type;if(!c||!c.getCount())return;a.unHighlightItem(),a.cleanHighlights(),j=a.getPaths(),l=j.length;for(m=0;m<l;m++){k=j[m],i=d.getAt(m),Ext.apply(k,n),i||(i=a.createPoint(k,p),e&&a.createShadow(i,n,p)),q=i.shadows;if(b.animate){r=a.renderer(i,c.getAt(m),{translate:k},m,c),i._to=r,a.onAnimate(i,{to:r});for(o=0;o<h;o++)s=Ext.apply({},g[o]),r=a.renderer(q[o],c.getAt(m),Ext.apply({},{hidden:!1,translate:{x:k.x+(s.translate?s.translate.x:0),y:k.y+(s.translate?s.translate.y:0)}},s),m,c),a.onAnimate(q[o],{to:r})}else{r=a.renderer(i,c.getAt(m),{translate:k},m,c),i._to=r,i.setAttributes(r,!0);for(o=0;o<h;o++)s=Ext.apply({},g[o]),r=a.renderer(q[o],c.getAt(m),Ext.apply({},{hidden:!1,translate:{x:k.x+(s.translate?s.translate.x:0),y:k.y+(s.translate?s.translate.y:0)}},s),m,c),q[o].setAttributes(r,!0)}a.items[m].sprite=i}l=d.getCount();for(m=j.length;m<l;m++)d.getAt(m).hide(!0);a.renderLabels(),a.renderCallouts()},onCreateLabel:function(a,b,c,d){var e=this,f=e.labelsGroup,g=e.label,h=Ext.apply({},g,e.seriesLabelStyle),i=e.bbox;return e.chart.surface.add(Ext.apply({type:"text",group:f,x:b.point[0],y:i.y+i.height/2},h))},onPlaceLabel:function(a,b,c,d,e,f){var g=this,h=g.chart,i=h.resizing,j=g.label,k=j.renderer,l=j.field,m=g.bbox,n=c.point[0],o=c.point[1],p=c.sprite.attr.radius,q,r,s,t;a.setAttributes({text:k(b.get(l)),hidden:!0},!0);if(e=="rotate")a.setAttributes({"text-anchor":"start",rotation:{x:n,y:o,degrees:-45}},!0),q=a.getBBox(),r=q.width,s=q.height,n=n<m.x?m.x:n,n=n+r>m.x+m.width?n-(n+r-m.x-m.width):n,o=o-s<m.y?m.y+s:o;else if(e=="under"||e=="over")q=c.sprite.getBBox(),q.width=q.width||p*2,q.height=q.height||p*2,o+=e=="over"?-q.height:q.height,q=a.getBBox(),r=q.width/2,s=q.height/2,n=n-r<m.x?m.x+r:n,n=n+r>m.x+m.width?n-(n+r-m.x-m.width):n,o=o-s<m.y?m.y+s:o,o=o+s>m.y+m.height?o-(o+s-m.y-m.height):o;h.animate?i?(t=c.sprite.getActiveAnimation(),t?t.on("afteranimate",function(){a.setAttributes({x:n,y:o},!0),a.show(!0)}):a.show(!0)):g.onAnimate(a,{to:{x:n,y:o}}):(a.setAttributes({x:n,y:o},!0),a.show(!0))},onPlaceCallout:function(a,b,c,d,e,f,g){var h=this,i=h.chart,j=i.surface,k=i.resizing,l=h.callouts,m=h.items,n=c.point,o,p=a.label.getBBox(),q=30,r=10,s=3,t,u,v,w,x,y=h.bbox,z,A;o=[Math.cos(Math.PI/4),-Math.sin(Math.PI/4)],z=n[0]+o[0]*q,A=n[1]+o[1]*q,t=z+(o[0]>0?0:-(p.width+2*s)),u=A-p.height/2-s,v=p.width+2*s,w=p.height+2*s;if(t<y[0]||t+v>y[0]+y[2])o[0]*=-1;if(u<y[1]||u+w>y[1]+y[3])o[1]*=-1;z=n[0]+o[0]*q,A=n[1]+o[1]*q,t=z+(o[0]>0?0:-(p.width+2*s)),u=A-p.height/2-s,v=p.width+2*s,w=p.height+2*s,i.animate?(h.onAnimate(a.lines,{to:{path:["M",n[0],n[1],"L",z,A,"Z"]}},!0),h.onAnimate(a.box,{to:{x:t,y:u,width:v,height:w}},!0),h.onAnimate(a.label,{to:{x:z+(o[0]>0?s:-(p.width+s)),y:A}},!0)):(a.lines.setAttributes({path:["M",n[0],n[1],"L",z,A,"Z"]},!0),a.box.setAttributes({x:t,y:u,width:v,height:w},!0),a.label.setAttributes({x:z+(o[0]>0?s:-(p.width+s)),y:A},!0));for(x in a)a[x].show(!0)},onAnimate:function(a,b){return a.show(),this.callParent(arguments)},isItemInPoint:function(a,b,c){function g(c){var d=f(c[0]-a),e=f(c[1]-b);return Math.sqrt(d*d+e*e)}var d,e=10,f=Math.abs;return d=c.point,d[0]-e<=a&&d[0]+e>=a&&d[1]-e<=b&&d[1]+e>=b}}),Ext.define("Ext.chart.theme.Base",{requires:["Ext.chart.theme.Theme"],constructor:function(a){Ext.chart.theme.call(this,a,{background:!1,axis:{stroke:"#444","stroke-width":1},axisLabelTop:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:function(a){return a}},axisLabelRight:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:function(a){return a}},axisLabelBottom:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:function(a){return a}},axisLabelLeft:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:function(a){return a}},axisTitleTop:{font:"bold 18px Arial",fill:"#444"},axisTitleRight:{font:"bold 18px Arial",fill:"#444",rotate:{x:0,y:0,degrees:270}},axisTitleBottom:{font:"bold 18px Arial",fill:"#444"},axisTitleLeft:{font:"bold 18px Arial",fill:"#444",rotate:{x:0,y:0,degrees:270}},series:{"stroke-width":0},seriesLabel:{font:"12px Arial",fill:"#333"},marker:{stroke:"#555",fill:"#000",radius:3,size:3},colors:["#94ae0a","#115fa6","#a61120","#ff8809","#ffd13e","#a61187","#24ad9a","#7c7474","#a66111"],seriesThemes:[{fill:"#115fa6"},{fill:"#94ae0a"},{fill:"#a61120"},{fill:"#ff8809"},{fill:"#ffd13e"},{fill:"#a61187"},{fill:"#24ad9a"},{fill:"#7c7474"},{fill:"#a66111"}],markerThemes:[{fill:"#115fa6",type:"circle"},{fill:"#94ae0a",type:"cross"},{fill:"#a61120",type:"plus"}]})}},function(){var a=["#b1da5a","#4ce0e7","#e84b67","#da5abd","#4d7fe6","#fec935"],b=["Green","Sky","Red","Purple","Blue","Yellow"],c=0,d=0,e=a.length,f=Ext.chart.theme,g=[["#f0a50a","#c20024","#2044ba","#810065","#7eae29"],["#6d9824","#87146e","#2a9196","#d39006","#1e40ac"],["#fbbc29","#ce2e4e","#7e0062","#158b90","#57880e"],["#ef5773","#fcbd2a","#4f770d","#1d3eaa","#9b001f"],["#7eae29","#fdbe2a","#910019","#27b4bc","#d74dbc"],["#44dce1","#0b2592","#996e05","#7fb325","#b821a1"]],h=g.length;for(;c<e;c++)f[b[c]]=function(a){return Ext.extend(f.Base,{constructor:function(b){f.Base.prototype.constructor.call(this,Ext.apply({baseColor:a},b))}})}(a[c]);for(c=0;c<h;c++)f["Category"+(c+1)]=function(a){return Ext.extend(f.Base,{constructor:function(b){f.Base.prototype.constructor.call(this,Ext.apply({colors:a},b))}})}(g[c])}),Ext.define("Ext.data.ArrayStore",{extend:"Ext.data.Store",alias:"store.array",uses:["Ext.data.reader.Array"],constructor:function(a){a=a||{},Ext.applyIf(a,{proxy:{type:"memory",reader:"array"}}),this.callParent([a])},loadData:function(a,b){if(this.expandData===!0){var c=[],d=0,e=a.length;for(;d<e;d++)c[c.length]=[a[d]];a=c}this.callParent([a,b])}},function(){Ext.data.SimpleStore=Ext.data.ArrayStore}),Ext.define("Ext.data.Batch",{mixins:{observable:"Ext.util.Observable"},autoStart:!1,current:-1,total:0,isRunning:!1,isComplete:!1,hasException:!1,pauseOnException:!0,constructor:function(a){var b=this;b.addEvents("complete","exception","operationcomplete"),b.mixins.observable.constructor.call(b,a),b.operations=[]},add:function(a){this.total++,a.setBatch(this),this.operations.push(a)},start:function(){this.hasException=!1,this.isRunning=!0,this.runNextOperation()},runNextOperation:function(){this.runOperation(this.current+1)},pause:function(){this.isRunning=!1},runOperation:function(a){var b=this,c=b.operations,d=c[a],e;d===undefined?(b.isRunning=!1,b.isComplete=!0,b.fireEvent("complete",b,c[c.length-1])):(b.current=a,e=function(a){var c=a.hasException();c?(b.hasException=!0,b.fireEvent("exception",b,a)):b.fireEvent("operationcomplete",b,a),c&&b.pauseOnException?b.pause():(a.setCompleted(),b.runNextOperation())},d.setStarted(),b.proxy[d.action](d,e,b))}}),Ext.define("Ext.data.BelongsToAssociation",{extend:"Ext.data.Association",alias:"association.belongsto",constructor:function(a){this.callParent(arguments);var b=this,c=b.ownerModel.prototype,d=b.associatedName,e=b.getterName||"get"+d,f=b.setterName||"set"+d;Ext.applyIf(b,{name:d,foreignKey:d.toLowerCase()+"_id",instanceName:d+"BelongsToInstance",associationKey:d.toLowerCase()}),c[e]=b.createGetter(),c[f]=b.createSetter()},createSetter:function(){var a=this,b=a.ownerModel,c=a.associatedModel,d=a.foreignKey,e=a.primaryKey;return function(a,b,c){this.set(d,a),typeof b=="function"&&(b={callback:b,scope:c||this});if(Ext.isObject(b))return this.save(b)}},createGetter:function(){var a=this,b=a.ownerModel,c=a.associatedName,d=a.associatedModel,e=a.foreignKey,f=a.primaryKey,g=a.instanceName;return function(a,b){a=a||{};var i=this,j=i.get(e),k,l;return i[g]===undefined?(k=Ext.ModelManager.create({},c),k.set(f,j),typeof a=="function"&&(a={callback:a,scope:b||i}),d.load(j,a),i[g]=d,d):(k=i[g],l=[k],b=b||i,Ext.callback(a,b,l),Ext.callback(a.success,b,l),Ext.callback(a.failure,b,l),Ext.callback(a.callback,b,l),k)}},read:function(a,b,c){a[this.instanceName]=b.read([c]).records[0]}}),Ext.define("Ext.data.BufferStore",{extend:"Ext.data.Store",alias:"store.buffer",sortOnLoad:!1,filterOnLoad:!1,constructor:function(){Ext.Error.raise("The BufferStore class has been deprecated. Instead, specify the buffered config option on Ext.data.Store")}}),Ext.define("Ext.direct.Manager",{singleton:!0,mixins:{observable:"Ext.util.Observable"},requires:["Ext.util.MixedCollection"],statics:{exceptions:{TRANSPORT:"xhr",PARSE:"parse",LOGIN:"login",SERVER:"exception"}},constructor:function(){var a=this;a.addEvents("event","exception"),a.transactions=Ext.create("Ext.util.MixedCollection"),a.providers=Ext.create("Ext.util.MixedCollection"),a.mixins.observable.constructor.call(a)},addProvider:function(a){var b=this,c=arguments,d=0,e;if(c.length>1){for(e=c.length;d<e;++d)b.addProvider(c[d]);return}return a.isProvider||(a=Ext.create("direct."+a.type+"provider",a)),b.providers.add(a),a.on("data",b.onProviderData,b),a.isConnected()||a.connect(),a},getProvider:function(a){return a.isProvider?a:this.providers.get(a)},removeProvider:function(a){var b=this,c=b.providers;return a=a.isProvider?a:c.get(a),a?(a.un("data",b.onProviderData,b),c.remove(a),a):null},addTransaction:function(a){return this.transactions.add(a),a},removeTransaction:function(a){return a=this.getTransaction(a),this.transactions.remove(a),a},getTransaction:function(a){return a.isTransaction?a:this.transactions.get(a)},onProviderData:function(a,b){var c=this,d=0,e;if(Ext.isArray(b)){for(e=b.length;d<e;++d)c.onProviderData(a,b[d]);return}b.name&&b.name!="event"&&b.name!="exception"?c.fireEvent(b.name,b):b.status===!1&&c.fireEvent("exception",b),c.fireEvent("event",b,a)}},function(){Ext.Direct=Ext.direct.Manager}),Ext.define("Ext.data.proxy.Direct",{extend:"Ext.data.proxy.Server",alternateClassName:"Ext.data.DirectProxy",alias:"proxy.direct",requires:["Ext.direct.Manager"],paramOrder:undefined,paramsAsHash:!0,directFn:undefined,paramOrderRe:/[\s,|]/,constructor:function(a){var b=this;Ext.apply(b,a),Ext.isString(b.paramOrder)&&(b.paramOrder=b.paramOrder.split(b.paramOrderRe)),b.callParent(arguments)},doRequest:function(a,b,c){var d=this,e=d.getWriter(),f=d.buildRequest(a,b,c),g=d.api[f.action]||d.directFn,h=[],i=f.params,j=d.paramOrder,k,l=0,m;a.allowWrite()&&(f=e.write(f));if(a.action=="read"){k=g.directCfg.method;if(k.ordered){if(k.len>0)if(j)for(m=j.length;l<m;++l)h.push(i[j[l]]);else d.paramsAsHash&&h.push(i)}else h.push(i)}else h.push(f.jsonData);Ext.apply(f,{args:h,directFn:g}),h.push(d.createRequestCallback(f,a,b,c),d),g.apply(window,h)},applyEncoding:function(a){return a},createRequestCallback:function(a,b,c,d){var e=this;return function(f,g){e.processResponse(g.status,b,a,g,c,d)}},extractResponseData:function(a){return Ext.isDefined(a.result)?a.result:a.data},setException:function(a,b){a.setException(b.message)},buildUrl:function(){return""}}),Ext.define("Ext.data.DirectStore",{extend:"Ext.data.Store",alias:"store.direct",requires:["Ext.data.proxy.Direct"],constructor:function(a){a=Ext.apply({},a);if(!a.proxy){var b={type:"direct",reader:{type:"json"}};Ext.copyTo(b,a,"paramOrder,paramsAsHash,directFn,api,simpleSortMode"),Ext.copyTo(b.reader,a,"totalProperty,root,idProperty"),a.proxy=b}this.callParent([a])}}),Ext.define("Ext.util.Inflector",{singleton:!0,plurals:[[/(quiz)$/i,"$1zes"],[/^(ox)$/i,"$1en"],[/([m|l])ouse$/i,"$1ice"],[/(matr|vert|ind)ix|ex$/i,"$1ices"],[/(x|ch|ss|sh)$/i,"$1es"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/(hive)$/i,"$1s"],[/(?:([^f])fe|([lr])f)$/i,"$1$2ves"],[/sis$/i,"ses"],[/([ti])um$/i,"$1a"],[/(buffal|tomat|potat)o$/i,"$1oes"],[/(bu)s$/i,"$1ses"],[/(alias|status|sex)$/i,"$1es"],[/(octop|vir)us$/i,"$1i"],[/(ax|test)is$/i,"$1es"],[/^person$/,"people"],[/^man$/,"men"],[/^(child)$/,"$1ren"],[/s$/i,"s"],[/$/,"s"]],singulars:[[/(quiz)zes$/i,"$1"],[/(matr)ices$/i,"$1ix"],[/(vert|ind)ices$/i,"$1ex"],[/^(ox)en/i,"$1"],[/(alias|status)es$/i,"$1"],[/(octop|vir)i$/i,"$1us"],[/(cris|ax|test)es$/i,"$1is"],[/(shoe)s$/i,"$1"],[/(o)es$/i,"$1"],[/(bus)es$/i,"$1"],[/([m|l])ice$/i,"$1ouse"],[/(x|ch|ss|sh)es$/i,"$1"],[/(m)ovies$/i,"$1ovie"],[/(s)eries$/i,"$1eries"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/([lr])ves$/i,"$1f"],[/(tive)s$/i,"$1"],[/(hive)s$/i,"$1"],[/([^f])ves$/i,"$1fe"],[/(^analy)ses$/i,"$1sis"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i,"$1$2sis"],[/([ti])a$/i,"$1um"],[/(n)ews$/i,"$1ews"],[/people$/i,"person"],[/s$/i,""]],uncountable:["sheep","fish","series","species","money","rice","information","equipment","grass","mud","offspring","deer","means"],singular:function(a,b){this.singulars.unshift([a,b])},plural:function(a,b){this.plurals.unshift([a,b])},clearSingulars:function(){this.singulars=[]},clearPlurals:function(){this.plurals=[]},isTransnumeral:function(a){return Ext.Array.indexOf(this.uncountable,a)!=-1},pluralize:function(a){if(this.isTransnumeral(a))return a;var b=this.plurals,c=b.length,d,e,f;for(f=0;f<c;f++){d=b[f],e=d[0];if(e==a||e.test&&e.test(a))return a.replace(e,d[1])}return a},singularize:function(a){if(this.isTransnumeral(a))return a;var b=this.singulars,c=b.length,d,e,f;for(f=0;f<c;f++){d=b[f],e=d[0];if(e==a||e.test&&e.test(a))return a.replace(e,d[1])}return a},classify:function(a){return Ext.String.capitalize(this.singularize(a))},ordinalize:function(a){var b=parseInt(a,10),c=b%10,d=b%100;if(11<=d&&d<=13)return a+"th";switch(c){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd";default:return a+"th"}}},function(){var a={alumnus:"alumni",cactus:"cacti",focus:"foci",nucleus:"nuclei",radius:"radii",stimulus:"stimuli",ellipsis:"ellipses",paralysis:"paralyses",oasis:"oases",appendix:"appendices",index:"indexes",beau:"beaux",bureau:"bureaux",tableau:"tableaux",woman:"women",child:"children",man:"men",corpus:"corpora",criterion:"criteria",curriculum:"curricula",genus:"genera",memorandum:"memoranda",phenomenon:"phenomena",foot:"feet",goose:"geese",tooth:"teeth",antenna:"antennae",formula:"formulae",nebula:"nebulae",vertebra:"vertebrae",vita:"vitae"},b;for(b in a)this.plural(b,a[b]),this.singular(a[b],b)}),Ext.define("Ext.data.HasManyAssociation",{extend:"Ext.data.Association",requires:["Ext.util.Inflector"],alias:"association.hasmany",constructor:function(a){var b=this,c,d;b.callParent(arguments),b.name=b.name||Ext.util.Inflector.pluralize(b.associatedName.toLowerCase()),c=b.ownerModel.prototype,d=b.name,Ext.applyIf(b,{storeName:d+"Store",foreignKey:b.ownerName.toLowerCase()+"_id"}),c[d]=b.createStore()},createStore:function(){var a=this,b=a.associatedModel,c=a.storeName,d=a.foreignKey,e=a.primaryKey,f=a.filterProperty,g=a.autoLoad,h=a.storeConfig||{};return function(){var a=this,j,k,l={};return a[c]===undefined&&(f?k={property:f,value:a.get(f),exactMatch:!0}:k={property:d,value:a.get(e),exactMatch:!0},l[d]=a.get(e),j=Ext.apply({},h,{model:b,filters:[k],remoteFilter:!1,modelDefaults:l}),a[c]=Ext.create("Ext.data.Store",j),g&&a[c].load()),a[c]}},read:function(a,b,c){var d=a[this.name](),e;d.add(b.read(c).records),e=this.associatedModel.prototype.associations.findBy(function(b){return b.type==="belongsTo"&&b.associatedName===a.$className}),e&&d.data.each(function(b){b[e.instanceName]=a})}}),Ext.define("Ext.data.JsonP",{singleton:!0,statics:{requestCount:0,requests:{}},timeout:3e4,disableCaching:!0,disableCachingParam:"_dc",callbackKey:"callback",request:function(a){a=Ext.apply({},a);var b=this,c=Ext.isDefined(a.disableCaching)?a.disableCaching:b.disableCaching,d=a.disableCachingParam||b.disableCachingParam,e=++b.statics().requestCount,f=a.callbackName||"callback"+e,g=a.callbackKey||b.callbackKey,h=Ext.isDefined(a.timeout)?a.timeout:b.timeout,i=Ext.apply({},a.params),j=a.url,k=Ext.isSandboxed?Ext.getUniqueGlobalNamespace():"Ext",l,m;return i[g]=k+".data.JsonP."+f,c&&(i[d]=(new Date).getTime()),m=b.createScript(j,i),b.statics().requests[e]=l={url:j,params:i,script:m,id:e,scope:a.scope,success:a.success,failure:a.failure,callback:a.callback,callbackName:f},h>0&&(l.timeout=setTimeout(Ext.bind(b.handleTimeout,b,[l]),h)),b.setupErrorHandling(l),b[f]=Ext.bind(b.handleResponse,b,[l],!0),Ext.getHead().appendChild(m),l},abort:function(a){var b=this.statics().requests,c;if(a)a.id||(a=b[a]),this.abort(a);else for(c in b)b.hasOwnProperty(c)&&this.abort(b[c])},setupErrorHandling:function(a){a.script.onerror=Ext.bind(this.handleError,this,[a])},handleAbort:function(a){a.errorType="abort",this.handleResponse(null,a)},handleError:function(a){a.errorType="error",this.handleResponse(null,a)},cleanupErrorHandling:function(a){a.script.onerror=null},handleTimeout:function(a){a.errorType="timeout",this.handleResponse(null,a)},handleResponse:function(a,b){var c=!0;b.timeout&&clearTimeout(b.timeout),delete this[b.callbackName],delete this.statics()[b.id],this.cleanupErrorHandling(b),Ext.fly(b.script).remove(),b.errorType?(c=!1,Ext.callback(b.failure,b.scope,[b.errorType])):Ext.callback(b.success,b.scope,[a]),Ext.callback(b.callback,b.scope,[c,a,b.errorType])},createScript:function(a,b){var c=document.createElement("script");return c.setAttribute("src",Ext.urlAppend(a,Ext.Object.toQueryString(b))),c.setAttribute("async",!0),c.setAttribute("type","text/javascript"),c}}),Ext.define("Ext.data.JsonPStore",{extend:"Ext.data.Store",alias:"store.jsonp",constructor:function(a){this.callParent(Ext.apply(a,{reader:Ext.create("Ext.data.reader.Json",a),proxy:Ext.create("Ext.data.proxy.JsonP",a)}))}}),Ext.define("Ext.data.NodeInterface",{requires:["Ext.data.Field"],statics:{decorate:function(a){if(!a.isNode){var b=Ext.ModelManager,c=a.modelName,d=b.getModel(c),e=d.prototype.idProperty,f=[],g,h,i;d.override(this.getPrototypeBody()),f=this.applyFields(d,[{name:e,type:"string",defaultValue:null},{name:"parentId",type:"string",defaultValue:null},{name:"index",type:"int",defaultValue:null},{name:"depth",type:"int",defaultValue:0},{name:"expanded",type:"bool",defaultValue:!1,persist:!1},{name:"expandable",type:"bool",defaultValue:!0,persist:!1},{name:"checked",type:"auto",defaultValue:null},{name:"leaf",type:"bool",defaultValue:!1,persist:!1},{name:"cls",type:"string",defaultValue:null,persist:!1},{name:"iconCls",type:"string",defaultValue:null,persist:!1},{name:"icon",type:"string",defaultValue:null,persist:!1},{name:"root",type:"boolean",defaultValue:!1,persist:!1},{name:"isLast",type:"boolean",defaultValue:!1,persist:!1},{name:"isFirst",type:"boolean",defaultValue:!1,persist:!1},{name:"allowDrop",type:"boolean",defaultValue:!0,persist:!1},{name:"allowDrag",type:"boolean",defaultValue:!0,persist:!1},{name:"loaded",type:"boolean",defaultValue:!1,persist:!1},{name:"loading",type:"boolean",defaultValue:!1,persist:!1},{name:"href",type:"string",defaultValue:null,persist:!1},{name:"hrefTarget",type:"string",defaultValue:null,persist:!1},{name:"qtip",type:"string",defaultValue:null,persist:!1},{name:"qtitle",type:"string",defaultValue:null,persist:!1}]),i=f.length;for(g=0;g<i;++g)h=f[g],a.get(h.name)===undefined&&(a.data[h.name]=h.defaultValue)}return Ext.applyIf(a,{firstChild:null,lastChild:null,parentNode:null,previousSibling:null,nextSibling:null,childNodes:[]}),a.commit(!0),a.enableBubble(["append","remove","move","insert","beforeappend","beforeremove","beforemove","beforeinsert","expand","collapse","beforeexpand","beforecollapse","sort"]),a},applyFields:function(a,b){var c=a.prototype,d=c.fields,e=d.keys,f=b.length,g,h,i,j=[];for(h=0;h<f;h++)g=b[h],Ext.Array.contains(e,g.name)||(g=Ext.create("data.field",g),j.push(g),d.add(g));return j},getPrototypeBody:function(){return{isNode:!0,createNode:function(a){return Ext.isObject(a)&&!a.isModel&&(a=Ext.ModelManager.create(a,this.modelName)),Ext.data.NodeInterface.decorate(a)},isLeaf:function(){return this.get("leaf")===!0},setFirstChild:function(a){this.firstChild=a},setLastChild:function(a){this.lastChild=a},updateInfo:function(a){var b=this,c=b.isRoot(),d=b.parentNode,e=d?d.firstChild==b:!0,f=d?d.lastChild==b:!0,g=0,h=b,i=b.childNodes,j=i.length,k=0;while(h.parentNode)++g,h=h.parentNode;b.beginEdit(),b.set({isFirst:e,isLast:f,depth:g,index:d?d.indexOf(b):0,parentId:d?d.getId():null}),b.endEdit(a),a&&b.commit();for(k=0;k<j;k++)i[k].updateInfo(a)},isLast:function(){return this.get("isLast")},isFirst:function(){return this.get("isFirst")},hasChildNodes:function(){return!this.isLeaf()&&this.childNodes.length>0},isExpandable:function(){var a=this;return a.get("expandable")?!(a.isLeaf()||a.isLoaded()&&!a.hasChildNodes()):!1},appendChild:function(a,b,c){var d=this,e,f,g,h,i;if(!Ext.isArray(a)){a=d.createNode(a);if(b!==!0&&d.fireEvent("beforeappend",d,a)===!1)return!1;g=d.childNodes.length,h=a.parentNode;if(h){if(b!==!0&&a.fireEvent("beforemove",a,h,d,g)===!1)return!1;h.removeChild(a,null,!1,!0)}return g=d.childNodes.length,g===0&&d.setFirstChild(a),d.childNodes.push(a),a.parentNode=d,a.nextSibling=null,d.setLastChild(a),i=d.childNodes[g-1],i?(a.previousSibling=i,i.nextSibling=a,i.updateInfo(c)):a.previousSibling=null,a.updateInfo(c),d.isLoaded()?d.childNodes.length===1&&d.set("loaded",d.isLoaded()):d.set("loaded",!0),b!==!0&&(d.fireEvent("append",d,a,g),h&&a.fireEvent("move",a,h,d,g)),a}for(e=0,f=a.length;e<f;e++)d.appendChild(a[e])},getBubbleTarget:function(){return this.parentNode},removeChild:function(a,b,c,d){var e=this,f=e.indexOf(a);return f==-1||c!==!0&&e.fireEvent("beforeremove",e,a)===!1?!1:(Ext.Array.erase(e.childNodes,f,1),e.firstChild==a&&e.setFirstChild(a.nextSibling),e.lastChild==a&&e.setLastChild(a.previousSibling),a.previousSibling&&(a.previousSibling.nextSibling=a.nextSibling,a.previousSibling.updateInfo(d)),a.nextSibling&&(a.nextSibling.previousSibling=a.previousSibling,a.nextSibling.updateInfo(d)),c!==!0&&e.fireEvent("remove",e,a),e.childNodes.length||e.set("loaded",e.isLoaded()),b?a.destroy(!0):a.clear(),a)},copy:function(a,b){var c=this,d=c.callOverridden(arguments),e=c.childNodes?c.childNodes.length:0,f;if(b)for(f=0;f<e;f++)d.appendChild(c.childNodes[f].copy(!0));return d},clear:function(a){var b=this;b.parentNode=b.previousSibling=b.nextSibling=null,a&&(b.firstChild=b.lastChild=null)},destroy:function(a){var b=this,c=b.destroyOptions;a===!0?(b.clear(!0),Ext.each(b.childNodes,function(a){a.destroy(!0)}),b.childNodes=null,delete b.destroyOptions,b.callOverridden([c])):(b.destroyOptions=a,b.remove(!0))},insertBefore:function(a,b,c){var d=this,e=d.indexOf(b),f=a.parentNode,g=e,h;if(!b)return d.appendChild(a);if(a==b)return!1;a=d.createNode(a);if(c!==!0&&d.fireEvent("beforeinsert",d,a,b)===!1)return!1;f==d&&d.indexOf(a)<e&&g--;if(f){if(c!==!0&&a.fireEvent("beforemove",a,f,d,e,b)===!1)return!1;f.removeChild(a)}return g===0&&d.setFirstChild(a),Ext.Array.splice(d.childNodes,g,0,a),a.parentNode=d,a.nextSibling=b,b.previousSibling=a,h=d.childNodes[g-1],h?(a.previousSibling=h,h.nextSibling=a,h.updateInfo()):a.previousSibling=null,a.updateInfo(),d.isLoaded()?d.childNodes.length===1&&d.set("loaded",d.isLoaded()):d.set("loaded",!0),c!==!0&&(d.fireEvent("insert",d,a,b),f&&a.fireEvent("move",a,f,d,g,b)),a},insertChild:function(a,b){var c=this.childNodes[a];return c?this.insertBefore(b,c):this.appendChild(b)},remove:function(a,b){var c=this.parentNode;return c&&c.removeChild(this,a,b,!0),this},removeAll:function(a,b){var c=this.childNodes,d;while(d=c[0])this.removeChild(d,a,b);return this},getChildAt:function(a){return this.childNodes[a]},replaceChild:function(a,b,c){var d=b?b.nextSibling:null;return this.removeChild(b,c),this.insertBefore(a,d,c),b},indexOf:function(a){return Ext.Array.indexOf(this.childNodes,a)},getPath:function(a,b){a=a||this.idProperty,b=b||"/";var c=[this.get(a)],d=this.parentNode;while(d)c.unshift(d.get(a)),d=d.parentNode;return b+c.join(b)},getDepth:function(){return this.get("depth")},bubble:function(a,b,c){var d=this;while(d){if(a.apply(b||d,c||[d])===!1)break;d=d.parentNode}},cascade:function(){return Ext.isDefined(Ext.global.console)&&Ext.global.console.warn("Ext.data.Node: cascade has been deprecated. Please use cascadeBy instead."),this.cascadeBy.apply(this,arguments)},cascadeBy:function(a,b,c){if(a.apply(b||this,c||[this])!==!1){var d=this.childNodes,e=d.length,f;for(f=0;f<e;f++)d[f].cascadeBy(a,b,c)}},eachChild:function(a,b,c){var d=this.childNodes,e=d.length,f;for(f=0;f<e;f++)if(a.apply(b||this,c||[d[f]])===!1)break},findChild:function(a,b,c){return this.findChildBy(function(){return this.get(a)==b},null,c)},findChildBy:function(a,b,c){var d=this.childNodes,e=d.length,f=0,g,h;for(;f<e;f++){g=d[f];if(a.call(b||g,g)===!0)return g;if(c){h=g.findChildBy(a,b,c);if(h!==null)return h}}return null},contains:function(a){return a.isAncestor(this)},isAncestor:function(a){var b=this.parentNode;while(b){if(b==a)return!0;b=b.parentNode}return!1},sort:function(a,b,c){var d=this.childNodes,e=d.length,f,g;if(e>0){Ext.Array.sort(d,a);for(f=0;f<e;f++)g=d[f],g.previousSibling=d[f-1],g.nextSibling=d[f+1],f===0&&(this.setFirstChild(g),g.updateInfo()),f==e-1&&(this.setLastChild(g),g.updateInfo()),b&&!g.isLeaf()&&g.sort(a,!0,!0);c!==!0&&this.fireEvent("sort",this,d)}},isExpanded:function(){return this.get("expanded")},isLoaded:function(){return this.get("loaded")},isLoading:function(){return this.get("loading")},isRoot:function(){return!this.parentNode},isVisible:function(){var a=this.parentNode;while(a){if(!a.isExpanded())return!1;a=a.parentNode}return!0},expand:function(a,b,c){var d=this;d.isLeaf()?Ext.callback(b,c||d):d.isLoading()?d.on("expand",function(){d.expand(a,b,c)},d,{single:!0}):d.isExpanded()?a?d.expandChildren(!0,b,c):Ext.callback(b,c||d,[d.childNodes]):d.fireEvent("beforeexpand",d,function(){d.set("expanded",!0),d.fireEvent("expand",d,d.childNodes,!1),a?d.expandChildren(!0,b,c):Ext.callback(b,c||d,[d.childNodes])},d)},expandChildren:function(a,b,c){var d=this,e=0,f=d.childNodes,g=f.length,h,i=0;for(;e<g;++e)h=f[e],!h.isLeaf()&&!h.isExpanded()&&(i++,f[e].expand(a,function(){i--,b&&!i&&Ext.callback(b,c||d,[d.childNodes])}));!i&&b&&Ext.callback(b,c||d,[d.childNodes])},collapse:function(a,b,c){var d=this;d.isLeaf()?Ext.callback(b,c||d,[d.childNodes]):!d.collapsing&&d.isExpanded()?d.fireEvent("beforecollapse",d,function(){d.set("expanded",!1),d.fireEvent("collapse",d,d.childNodes,!1),a?d.collapseChildren(!0,b,c):Ext.callback(b,c||d,[d.childNodes])},d):a&&d.collapseChildren(!0,b,c)},collapseChildren:function(a,b,c){var d=this,e=0,f=d.childNodes,g=f.length,h,i=0;for(;e<g;++e)h=f[e],!h.isLeaf()&&h.isExpanded()&&(i++,f[e].collapse(a,function(){i--,b&&!i&&Ext.callback(b,c||d,[d.childNodes])}));!i&&b&&Ext.callback(b,c||d,[d.childNodes])}}}}}),Ext.define("Ext.data.NodeStore",{extend:"Ext.data.Store",alias:"store.node",requires:["Ext.data.NodeInterface"],node:null,recursive:!1,rootVisible:!1,constructor:function(a){var b=this,c;a=a||{},Ext.apply(b,a),a.proxy={type:"proxy"},b.callParent([a]),b.addEvents("expand","collapse","beforeexpand","beforecollapse"),c=b.node,c&&(b.node=null,b.setNode(c))},setNode:function(a){var b=this;b.node&&b.node!=a&&(b.mun(b.node,{expand:b.onNodeExpand,collapse:b.onNodeCollapse,append:b.onNodeAppend,insert:b.onNodeInsert,remove:b.onNodeRemove,sort:b.onNodeSort,scope:b}),b.node=null),a&&(Ext.data.NodeInterface.decorate(a),b.removeAll(),b.rootVisible&&b.add(a),b.mon(a,{expand:b.onNodeExpand,collapse:b.onNodeCollapse,append:b.onNodeAppend,insert:b.onNodeInsert,remove:b.onNodeRemove,sort:b.onNodeSort,scope:b}),b.node=a,a.isExpanded()&&a.isLoaded()&&b.onNodeExpand(a,a.childNodes,!0))},onNodeSort:function(a,b){var c=this;if(c.indexOf(a)!==-1||a===c.node&&!c.rootVisible&&a.isExpanded())c.onNodeCollapse(a,b,!0),c.onNodeExpand(a,b,!0)},onNodeExpand:function(a,b,c){var d=this,e=d.indexOf(a)+1,f=b?b.length:0,g,h;if(!d.recursive&&a!==d.node)return;if(!d.isVisible(a))return;if(!c&&d.fireEvent("beforeexpand",a,b,e)===!1)return;if(f){d.insert(e,b);for(g=0;g<f;g++)h=b[g],h.isExpanded()&&(h.isLoaded()?d.onNodeExpand(h,h.childNodes,!0):(h.set("expanded",!1),h.expand()))}c||d.fireEvent("expand",a,b)},onNodeCollapse:function(a,b,c){var d=this,e=b.length,f=d.indexOf(a)+1,g,h;if(!d.recursive&&a!==d.node)return;if(!c&&d.fireEvent("beforecollapse",a,b,f)===!1)return;for(g=0;g<e;g++)h=b[g],d.remove(h),h.isExpanded()&&d.onNodeCollapse(h,h.childNodes,!0);c||d.fireEvent("collapse",a,b,f)},onNodeAppend:function(a,b,c){var d=this,e,f;if(d.isVisible(b)){if(c===0)e=a;else{f=b.previousSibling;while(f.isExpanded()&&f.lastChild)f=f.lastChild;e=f}d.insert(d.indexOf(e)+1,b),!b.isLeaf()&&b.isExpanded()&&(b.isLoaded()?d.onNodeExpand(b,b.childNodes,!0):(b.set("expanded",!1),b.expand()))}},onNodeInsert:function(a,b,c){var d=this,e=this.indexOf(c);e!=-1&&d.isVisible(b)&&(d.insert(e,b),!b.isLeaf()&&b.isExpanded()&&(b.isLoaded()?d.onNodeExpand(b,b.childNodes,!0):(b.set("expanded",!1),b.expand())))},onNodeRemove:function(a,b,c){var d=this;d.indexOf(b)!=-1&&(!b.isLeaf()&&b.isExpanded()&&d.onNodeCollapse(b,b.childNodes,!0),d.remove(b))},isVisible:function(a){var b=a.parentNode;while(b){if(b===this.node&&!this.rootVisible&&b.isExpanded())return!0;if(this.indexOf(b)===-1||!b.isExpanded())return!1;b=b.parentNode}return!0}}),Ext.define("Ext.data.Request",{action:undefined,params:undefined,method:"GET",url:undefined,constructor:function(a){Ext.apply(this,a)}}),Ext.define("Ext.data.SequentialIdGenerator",{extend:"Ext.data.IdGenerator",alias:"idgen.sequential",constructor:function(){var a=this;a.callParent(arguments),a.parts=[a.prefix,""]},prefix:"",seed:1,generate:function(){var a=this,b=a.parts;return b[1]=a.seed++,b.join("")}}),Ext.define("Ext.data.Tree",{alias:"data.tree",mixins:{observable:"Ext.util.Observable"},root:null,constructor:function(a){var b=this;b.mixins.observable.constructor.call(b),a&&b.setRootNode(a)},getRootNode:function(){return this.root},setRootNode:function(a){var b=this;return b.root=a,Ext.data.NodeInterface.decorate(a),b.fireEvent("beforeappend",null,a)!==!1&&(a.set("root",!0),a.updateInfo(),b.relayEvents(a,["append","remove","move","insert","beforeappend","beforeremove","beforemove","beforeinsert","expand","collapse","beforeexpand","beforecollapse","rootchange"]),a.on({scope:b,insert:b.onNodeInsert,append:b.onNodeAppend,remove:b.onNodeRemove}),b.nodeHash={},b.registerNode(a),b.fireEvent("append",null,a),b.fireEvent("rootchange",a)),a},flatten:function(){var a=[],b=this.nodeHash,c;for(c in b)b.hasOwnProperty(c)&&a.push(b[c]);return a},onNodeInsert:function(a,b){this.registerNode(b,!0)},onNodeAppend:function(a,b){this.registerNode(b,!0)},onNodeRemove:function(a,b){this.unregisterNode(b,!0)},getNodeById:function(a){return this.nodeHash[a]},registerNode:function(a,b){this.nodeHash[a.getId()||a.internalId]=a,b===!0&&a.eachChild(function(a){this.registerNode(a,!0)},this)},unregisterNode:function(a,b){delete this.nodeHash[a.getId()||a.internalId],b===!0&&a.eachChild(function(a){this.unregisterNode(a,!0)},this)},sort:function(a,b){this.getRootNode().sort(a,b)},filter:function(a,b){this.getRootNode().filter(a,b)}}),Ext.define("Ext.data.TreeStore",{extend:"Ext.data.AbstractStore",alias:"store.tree",requires:["Ext.data.Tree","Ext.data.NodeInterface","Ext.data.NodeStore"],clearOnLoad:!0,nodeParam:"node",defaultRootId:"root",defaultRootProperty:"children",folderSort:!1,constructor:function(a){var b=this,c,d;a=Ext.apply({},a),d=a.fields||b.fields,d||(a.fields=[{name:"text",type:"string"}]),b.callParent([a]),b.tree=Ext.create("Ext.data.Tree"),b.relayEvents(b.tree,["append","remove","move","insert","beforeappend","beforeremove","beforemove","beforeinsert","expand","collapse","beforeexpand","beforecollapse","rootchange"]),b.tree.on({scope:b,remove:b.onNodeRemove,beforeexpand:b.onBeforeNodeExpand,beforecollapse:b.onBeforeNodeCollapse,append:b.onNodeAdded,insert:b.onNodeAdded}),b.onBeforeSort(),c=b.root,c&&(delete b.root,b.setRootNode(c)),b.addEvents("sort"),Ext.isDefined(b.nodeParameter)&&(Ext.isDefined(Ext.global.console)&&Ext.global.console.warn("Ext.data.TreeStore: nodeParameter has been deprecated. Please use nodeParam instead."),b.nodeParam=b.nodeParameter,delete b.nodeParameter)},setProxy:function(a){var b,c;a instanceof Ext.data.proxy.Proxy?c=Ext.isEmpty(a.getReader().root):Ext.isString(a)?c=!0:(b=a.reader,c=!b||!!Ext.isEmpty(b.root)),a=this.callParent(arguments),c&&(b=a.getReader(),b.root=this.defaultRootProperty,b.buildExtractors(!0))},onBeforeSort:function(){this.folderSort&&this.sort({property:"leaf",direction:"ASC"},"prepend",!1)},onBeforeNodeExpand:function(a,b,c){a.isLoaded()?Ext.callback(b,c||a,[a.childNodes]):a.isLoading()?this.on("load",function(){Ext.callback(b,c||a,[a.childNodes])},this,{single:!0}):this.read({node:a,callback:function(){Ext.callback(b,c||a,[a.childNodes])}})},getNewRecords:function(){return Ext.Array.filter(this.tree.flatten(),this.filterNew)},getUpdatedRecords:function(){return Ext.Array.filter(this.tree.flatten(),this.filterUpdated)},onBeforeNodeCollapse:function(a,b,c){b.call(c||a,a.childNodes)},onNodeRemove:function(a,b){var c=this.removed;!b.isReplace&&Ext.Array.indexOf(c,b)==-1&&c.push(b)},onNodeAdded:function(a,b){var c=this.getProxy(),d=c.getReader(),e=b.raw||b.data,f,g;Ext.Array.remove(this.removed,b),!b.isLeaf()&&!b.isLoaded()&&(f=d.getRoot(e),f&&(this.fillNode(b,d.extractData(f)),delete e[d.root]))},setRootNode:function(a){var b=this;return a=a||{},a.isNode||(Ext.applyIf(a,{id:b.defaultRootId,text:"Root",allowDrag:!1}),a=Ext.ModelManager.create(a,b.model)),Ext.data.NodeInterface.decorate(a),b.getProxy().getReader().buildExtractors(!0),b.tree.setRootNode(a),!a.isLoaded()&&(b.autoLoad===!0||a.isExpanded())&&b.load({node:a}),a},getRootNode:function(){return this.tree.getRootNode()},getNodeById:function(a){return this.tree.getNodeById(a)},load:function(a){a=a||{},a.params=a.params||{};var b=this,c=a.node||b.tree.getRootNode(),d;return c||(c=b.setRootNode({expanded:!0})),b.clearOnLoad&&c.removeAll(!0),Ext.applyIf(a,{node:c}),a.params[b.nodeParam]=c?c.getId():"root",c&&c.set("loading",!0),b.callParent([a])},fillNode:function(a,b){var c=this,d=b?b.length:0,e=0,f;d&&c.sortOnLoad&&!c.remoteSort&&c.sorters&&c.sorters.items&&(f=Ext.create("Ext.util.MixedCollection"),f.addAll(b),f.sort(c.sorters.items),b=f.items),a.set("loaded",!0);for(;e<d;e++)a.appendChild(b[e],undefined,!0);return b},onProxyLoad:function(a){var b=this,c=a.wasSuccessful(),d=a.getRecords(),e=a.node;b.loading=!1,e.set("loading",!1),c&&(d=b.fillNode(e,d)),b.fireEvent("read",b,a.node,d,c),b.fireEvent("load",b,a.node,d,c),Ext.callback(a.callback,a.scope||b,[d,a,c])},onCreateRecords:function(a,b,c){if(c){var d=0,e=a.length,f=b.records,g,h,i,j;for(;d<e;++d)h=a[d],i=f[d],i&&(g=i.parentNode,g&&(i.isReplace=!0,g.replaceChild(h,i),delete i.isReplace),h.phantom=!1)}},onUpdateRecords:function(a,b,c){if(c){var d=this,e=0,f=a.length,g=d.data,h,i,j;for(;e<f;++e)j=a[e],h=d.tree.getNodeById(j.getId()),i=h.parentNode,i&&(h.isReplace=!0,i.replaceChild(j,h),h.isReplace=!1)}},onDestroyRecords:function(a,b,c){c&&(this.removed=[])},removeAll:function(){this.getRootNode().destroy(!0),this.fireEvent("clear",this)},doSort:function(a){var b=this;b.remoteSort?b.load():(b.tree.sort(a,!0),b.fireEvent("datachanged",b)),b.fireEvent("sort",b)}}),Ext.define("Ext.data.UuidGenerator",function(){function e(a,b){var c=a.toString(16);return c.length>b?c=c.substring(c.length-b):c.length<b&&(c=Ext.String.leftPad(c,b,"0")),c}function f(a,b){var c=Math.random()*(b-a+1);return Math.floor(c)+a}function g(a){if(typeof a=="number"){var b=Math.floor(a/d);return{lo:Math.floor(a-b*d),hi:b}}return a}var a=Math.pow(2,14),b=Math.pow(2,16),c=Math.pow(2,28),d=Math.pow(2,32);return{extend:"Ext.data.IdGenerator",alias:"idgen.uuid",id:"uuid",version:4,constructor:function(){var a=this;a.callParent(arguments),a.parts=[],a.init()},generate:function(){var a=this,b=a.parts,c=a.timestamp;return b[0]=e(c.lo,8),b[1]=e(c.hi&65535,4),b[2]=e(c.hi>>>16&4095|a.version<<12,4),b[3]=e(128|a.clockSeq>>>8&63,2)+e(a.clockSeq&255,2),b[4]=e(a.salt.hi,4)+e(a.salt.lo,8),a.version==4?a.init():(++c.lo,c.lo>=d&&(c.lo=0,++c.hi)),b.join("-").toLowerCase()},getRecId:function(a){return a.getId()},init:function(){var e=this,i,j;e.version==4?(e.clockSeq=f(0,a-1),i=e.salt||(e.salt={}),j=e.timestamp||(e.timestamp={}),i.lo=f(0,d-1),i.hi=f(0,b-1),j.lo=f(0,d-1),j.hi=f(0,c-1)):(e.salt=g(e.salt),e.timestamp=g(e.timestamp),e.salt.hi|=256)},reconfigure:function(a){Ext.apply(this,a),this.init()}}}()),Ext.define("Ext.data.XmlStore",{extend:"Ext.data.Store",alternateClassName:"Ext.data.XmlStore",alias:"store.xml",constructor:function(a){a=a||{},a=a||{},Ext.applyIf(a,{proxy:{type:"ajax",reader:"xml",writer:"xml"}}),this.callParent([a])}}),Ext.define("Ext.data.proxy.Client",{extend:"Ext.data.proxy.Proxy",alternateClassName:"Ext.data.ClientProxy",clear:function(){}}),Ext.define("Ext.data.proxy.JsonP",{extend:"Ext.data.proxy.Server",alternateClassName:"Ext.data.ScriptTagProxy",alias:["proxy.jsonp","proxy.scripttag"],requires:["Ext.data.JsonP"],defaultWriterType:"base",callbackKey:"callback",recordParam:"records",autoAppendParams:!0,constructor:function(){this.addEvents("exception"),this.callParent(arguments)},doRequest:function(a,b,c){var d=this,e=d.getWriter(),f=d.buildRequest(a),g=f.params;return a.allowWrite()&&(f=e.write(f)),Ext.apply(f,{callbackKey:d.callbackKey,timeout:d.timeout,scope:d,disableCaching:!1,callback:d.createRequestCallback(f,a,b,c)}),d.autoAppendParams&&(f.params={}),f.jsonp=Ext.data.JsonP.request(f),f.params=g,a.setStarted(),d.lastRequest=f,f},createRequestCallback:function(a,b,c,d){var e=this;return function(f,g,h){delete e.lastRequest,e.processResponse(f,b,a,g,c,d)}},setException:function(a,b){a.setException(a.request.jsonp.errorType)},buildUrl:function(a){var b=this,c=b.callParent(arguments),d=Ext.apply({},a.params),e=d.filters,f,g,h;delete d.filters,b.autoAppendParams&&(c=Ext.urlAppend(c,Ext.Object.toQueryString(d)));if(e&&e.length)for(h=0;h<e.length;h++)g=e[h],g.value&&(c=Ext.urlAppend(c,g.property+"="+g.value));return f=a.records,Ext.isArray(f)&&f.length>0&&(c=Ext.urlAppend(c,Ext.String.format("{0}={1}",b.recordParam,b.encodeRecords(f)))),c},destroy:function(){this.abort(),this.callParent()},abort:function(){var a=this.lastRequest;a&&Ext.data.JsonP.abort(a.jsonp)},encodeRecords:function(a){var b="",c=0,d=a.length;for(;c<d;c++)b+=Ext.Object.toQueryString(a[c].data);return b}}),Ext.define("Ext.data.proxy.WebStorage",{extend:"Ext.data.proxy.Client",alternateClassName:"Ext.data.WebStorageProxy",id:undefined,constructor:function(a){this.callParent(arguments),this.cache={},this.id=this.id||(this.store?this.store.storeId:undefined),this.initialize()},create:function(a,b,c){var d=a.records,e=d.length,f=this.getIds(),g,h,i;a.setStarted();for(i=0;i<e;i++)h=d[i],h.phantom?(h.phantom=!1,g=this.getNextId()):g=h.getId(),this.setRecord(h,g),f.push(g);this.setIds(f),a.setCompleted(),a.setSuccessful(),typeof b=="function"&&b.call(c||this,a)},read:function(a,b,c){var d=[],e=this.getIds(),f=e.length,g,h,i;if(a.id)i=this.getRecord(a.id),i&&(d.push(i),a.setSuccessful());else{for(g=0;g<f;g++)d.push(this.getRecord(e[g]));a.setSuccessful()}a.setCompleted(),a.resultSet=Ext.create("Ext.data.ResultSet",{records:d,total:d.length,loaded:!0}),typeof b=="function"&&b.call(c||this,a)},update:function(a,b,c){var d=a.records,e=d.length,f=this.getIds(),g,h,i;a.setStarted();for(i=0;i<e;i++)g=d[i],this.setRecord(g),h=g.getId(),h!==undefined&&Ext.Array.indexOf(f,h)==-1&&f.push(h);this.setIds(f),a.setCompleted(),a.setSuccessful(),typeof b=="function"&&b.call(c||this,a)},destroy:function(a,b,c){var d=a.records,e=d.length,f=this.getIds(),g=[].concat(f),h;for(h=0;h<e;h++)Ext.Array.remove(g,d[h].getId()),this.removeRecord(d[h],!1);this.setIds(g),a.setCompleted(),a.setSuccessful(),typeof b=="function"&&b.call(c||this,a)},getRecord:function(a){if(this.cache[a]===undefined){var b=Ext.decode(this.getStorageObject().getItem(this.getRecordKey(a))),c={},d=this.model,e=d.prototype.fields.items,f=e.length,g,h,i,j;for(g=0;g<f;g++)h=e[g],i=h.name,typeof h.decode=="function"?c[i]=h.decode(b[i]):c[i]=b[i];j=new d(c,a),j.phantom=!1,this.cache[a]=j}return this.cache[a]},setRecord:function(a,b){b?a.setId(b):b=a.getId();var c=this,d=a.data,e={},f=c.model,g=f.prototype.fields.items,h=g.length,i=0,j,k,l,m;for(;i<h;i++)j=g[i],k=j.name,typeof j.encode=="function"?e[k]=j.encode(d[k],a):e[k]=d[k];l=c.getStorageObject(),m=c.getRecordKey(b),c.cache[b]=a,l.removeItem(m),l.setItem(m,Ext.encode(e))},removeRecord:function(a,b){var c=this,d;a.isModel&&(a=a.getId()),b!==!1&&(d=c.getIds(),Ext.Array.remove(d,a),c.setIds(d)),c.getStorageObject().removeItem(c.getRecordKey(a))},getRecordKey:function(a){return a.isModel&&(a=a.getId()),Ext.String.format("{0}-{1}",this.id,a)},getRecordCounterKey:function(){return Ext.String.format("{0}-counter",this.id)},getIds:function(){var a=(this.getStorageObject().getItem(this.id)||"").split(","),b=a.length,c;if(b==1&&a[0]==="")a=[];else for(c=0;c<b;c++)a[c]=parseInt(a[c],10);return a},setIds:function(a){var b=this.getStorageObject(),c=a.join(",");b.removeItem(this.id),Ext.isEmpty(c)||b.setItem(this.id,c)},getNextId:function(){var a=this.getStorageObject(),b=this.getRecordCounterKey(),c=a.getItem(b),d,e;return c===null&&(d=this.getIds(),c=d[d.length-1]||0),e=parseInt(c,10)+1,a.setItem(b,e),e},initialize:function(){var a=this.getStorageObject();a.setItem(this.id,a.getItem(this.id)||"")},clear:function(){var a=this.getStorageObject(),b=this.getIds(),c=b.length,d;for(d=0;d<c;d++)this.removeRecord(b[d]);a.removeItem(this.getRecordCounterKey()),a.removeItem(this.id)},getStorageObject:function(){}}),Ext.define("Ext.data.proxy.LocalStorage",{extend:"Ext.data.proxy.WebStorage",alias:"proxy.localstorage",alternateClassName:"Ext.data.LocalStorageProxy",getStorageObject:function(){return window.localStorage}}),Ext.define("Ext.data.proxy.Memory",{extend:"Ext.data.proxy.Client",alias:"proxy.memory",alternateClassName:"Ext.data.MemoryProxy",constructor:function(a){this.callParent([a]),this.setReader(this.reader)},read:function(a,b,c){var d=this,e=d.getReader(),f=e.read(d.data);Ext.apply(a,{resultSet:f}),a.setCompleted(),a.setSuccessful(),Ext.callback(b,c||d,[a])},clear:Ext.emptyFn}),Ext.define("Ext.data.proxy.Rest",{extend:"Ext.data.proxy.Ajax",alternateClassName:"Ext.data.RestProxy",alias:"proxy.rest",appendId:!0,batchActions:!1,buildUrl:function(a){var b=this,c=a.operation,d=c.records||[],e=d[0],f=b.format,g=b.getUrl(a),h=e?e.getId():c.id;return b.appendId&&h&&(g.match(/\/$/)||(g+="/"),g+=h),f&&(g.match(/\.$/)||(g+="."),g+=f),a.url=g,b.callParent(arguments)}},function(){Ext.apply(this.prototype,{actionMethods:{create:"POST",read:"GET",update:"PUT",destroy:"DELETE"}})}),Ext.define("Ext.data.proxy.SessionStorage",{extend:"Ext.data.proxy.WebStorage",alias:"proxy.sessionstorage",alternateClassName:"Ext.data.SessionStorageProxy",getStorageObject:function(){return window.sessionStorage}}),Ext.define("Ext.data.reader.Array",{extend:"Ext.data.reader.Json",alternateClassName:"Ext.data.ArrayReader",alias:"reader.array",buildExtractors:function(){this.callParent(arguments);var a=this.model.prototype.fields.items,b=0,c=a.length,d=[],e;for(;b<c;b++)e=a[b].mapping,d.push(function(a){return function(b){return b[a]}}(e!==null?e:b));this.extractorFunctions=d}}),Ext.define("Ext.data.reader.Xml",{extend:"Ext.data.reader.Reader",alternateClassName:"Ext.data.XmlReader",alias:"reader.xml",createAccessor:function(a){var b=this;return Ext.isEmpty(a)?Ext.emptyFn:Ext.isFunction(a)?a:function(c){return b.getNodeValue(Ext.DomQuery.selectNode(a,c))}},getNodeValue:function(a){return a&&a.firstChild?a.firstChild.nodeValue:undefined},getResponseData:function(a){var b=a.responseXML;return b},getData:function(a){return a.documentElement||a},getRoot:function(a){var b=a.nodeName,c=this.root;if(!c||b&&b==c)return a;if(Ext.DomQuery.isXml(a))return Ext.DomQuery.selectNode(c,a)},extractData:function(a){var b=this.record;return b!=a.nodeName?a=Ext.DomQuery.select(b,a):a=[a],this.callParent([a])},getAssociatedDataRoot:function(a,b){return Ext.DomQuery.select(b,a)[0]},readRecords:function(a){return Ext.isArray(a)&&(a=a[0]),this.xmlData=a,this.callParent([a])}}),Ext.define("Ext.data.writer.Xml",{extend:"Ext.data.writer.Writer",alternateClassName:"Ext.data.XmlWriter",alias:"writer.xml",documentRoot:"xmlData",defaultDocumentRoot:"xmlData",header:"",record:"record",writeRecords:function(a,b){var c=this,d=[],e=0,f=b.length,g=c.documentRoot,h=c.record,i=b.length!==1,j,k;d.push(c.header||""),!g&&i&&(g=c.defaultDocumentRoot),g&&d.push("<",g,">");for(;e<f;++e){j=b[e],d.push("<",h,">");for(k in j)j.hasOwnProperty(k)&&d.push("<",k,">",j[k],"</",k,">");d.push("</",h,">")}return g&&d.push("</",g,">"),a.xmlData=d.join(""),a}}),Ext.define("Ext.direct.Event",{alias:"direct.event",requires:["Ext.direct.Manager"],status:!0,constructor:function(a){Ext.apply(this,a)},getData:function(){return this.data}}),Ext.define("Ext.direct.RemotingEvent",{extend:"Ext.direct.Event",alias:"direct.rpc",getTransaction:function(){return this.transaction||Ext.direct.Manager.getTransaction(this.tid)}}),Ext.define("Ext.direct.ExceptionEvent",{extend:"Ext.direct.RemotingEvent",alias:"direct.exception",status:!1}),Ext.define("Ext.direct.Provider",{alias:"direct.provider",mixins:{observable:"Ext.util.Observable"},constructor:function(a){var b=this;Ext.apply(b,a),b.addEvents("connect","disconnect","data","exception"),b.mixins.observable.constructor.call(b,a)},isConnected:function(){return!1},connect:Ext.emptyFn,disconnect:Ext.emptyFn}),Ext.define("Ext.direct.JsonProvider",{extend:"Ext.direct.Provider",alias:"direct.jsonprovider",uses:["Ext.direct.ExceptionEvent"],parseResponse:function(a){return Ext.isEmpty(a.responseText)?null:Ext.isObject(a.responseText)?a.responseText:Ext.decode(a.responseText)},createEvents:function(a){var b=null,c=[],d,e=0,f;try{b=this.parseResponse(a)}catch(g){return d=Ext.create("Ext.direct.ExceptionEvent",{data:g,xhr:a,code:Ext.direct.Manager.self.exceptions.PARSE,message:"Error parsing json response: \n\n "+b}),[d]}if(Ext.isArray(b))for(f=b.length;e<f;++e)c.push(this.createEvent(b[e]));else c.push(this.createEvent(b));return c},createEvent:function(a){return Ext.create("direct."+a.type,a)}}),Ext.define("Ext.direct.PollingProvider",{extend:"Ext.direct.JsonProvider",alias:"direct.pollingprovider",uses:["Ext.direct.ExceptionEvent"],requires:["Ext.Ajax","Ext.util.DelayedTask"],interval:3e3,constructor:function(a){this.callParent(arguments),this.addEvents("beforepoll","poll")},isConnected:function(){return!!this.pollTask},connect:function(){var a=this,b=a.url;b&&!a.pollTask?(a.pollTask=Ext.TaskManager.start({run:function(){a.fireEvent("beforepoll",a)!==!1&&(Ext.isFunction(b)?b(a.baseParams):Ext.Ajax.request({url:b,callback:a.onData,scope:a,params:a.baseParams}))},interval:a.interval,scope:a}),a.fireEvent("connect",a)):!!b},disconnect:function(){var a=this;a.pollTask&&(Ext.TaskManager.stop(a.pollTask),delete a.pollTask,a.fireEvent("disconnect",a))},onData:function(a,b,c){var d=this,e=0,f,g;if(b){g=d.createEvents(c);for(f=g.length;e<f;++e)d.fireEvent("data",d,g[e])}else d.fireEvent("data",d,Ext.create("Ext.direct.ExceptionEvent",{data:null,code:Ext.direct.Manager.self.exceptions.TRANSPORT,message:"Unable to connect to the server.",xhr:c}))}}),Ext.define("Ext.direct.RemotingMethod",{constructor:function(a){var b=this,c=Ext.isDefined(a.params)?a.params:a.len,d;b.name=a.name,b.formHandler=a.formHandler,Ext.isNumber(c)?(b.len=c,b.ordered=!0):(b.params=[],Ext.each(c,function(a){d=Ext.isObject(a)?a.name:a,b.params.push(d)}))},getCallData:function(a){var b=this,c=null,d=b.len,e=b.params,f,g,h;if(b.ordered)f=a[d],g=a[d+1],d!==0&&(c=a.slice(0,d));else{c=Ext.apply({},a[0]),f=a[1],g=a[2];for(h in c)c.hasOwnProperty(h)&&(Ext.Array.contains(e,h)||delete c[h])}return{data:c,callback:f,scope:g}}}),Ext.define("Ext.direct.Transaction",{alias:"direct.transaction",alternateClassName:"Ext.Direct.Transaction",statics:{TRANSACTION_ID:0},constructor:function(a){var b=this;Ext.apply(b,a),b.id=++b.self.TRANSACTION_ID,b.retryCount=0},send:function(){this.provider.queueTransaction(this)},retry:function(){this.retryCount++,this.send()},getProvider:function(){return this.provider}}),Ext.define("Ext.direct.RemotingProvider",{alias:"direct.remotingprovider",extend:"Ext.direct.JsonProvider",requires:["Ext.util.MixedCollection","Ext.util.DelayedTask","Ext.direct.Transaction","Ext.direct.RemotingMethod"],enableBuffer:10,maxRetries:1,timeout:undefined,constructor:function(a){var b=this;b.callParent(arguments),b.addEvents("beforecall","call"),b.namespace=Ext.isString(b.namespace)?Ext.ns(b.namespace):b.namespace||window,b.transactions=Ext.create("Ext.util.MixedCollection"),b.callBuffer=[]},initAPI:function(){var a=this.actions,b=this.namespace,c,d,e,f,g,h;for(c in a){d=b[c],d||(d=b[c]={}),e=a[c];for(f=0,g=e.length;f<g;++f)h=Ext.create("Ext.direct.RemotingMethod",e[f]),d[h.name]=this.createHandler(c,h)}},createHandler:function(a,b){var c=this,d;return b.formHandler?d=function(d,e,f){c.configureFormRequest(a,b,d,e,f)}:d=function(){c.configureRequest(a,b,Array.prototype.slice.call(arguments,0))},d.directCfg={action:a,method:b},d},isConnected:function(){return!!this.connected},connect:function(){var a=this;a.url?(a.initAPI(),a.connected=!0,a.fireEvent("connect",a)):!!a.url},disconnect:function(){var a=this;a.connected&&(a.connected=!1,a.fireEvent("disconnect",a))},runCallback:function(a,b){var c=b.status?"success":"failure",d,e;a&&a.callback&&(d=a.callback,e=Ext.isDefined(b.result)?b.result:b.data,Ext.isFunction(d)?d(e,b):(Ext.callback(d[c],d.scope,[e,b]),Ext.callback(d.callback,d.scope,[e,b])))},onData:function(a,b,c){var d=this,e=0,f,g,h,i,j;if(b){g=d.createEvents(c);for(f=g.length;e<f;++e)h=g[e],i=d.getTransaction(h),d.fireEvent("data",d,h),i&&(d.runCallback(i,h,!0),Ext.direct.Manager.removeTransaction(i))}else{j=[].concat(a.transaction);for(f=j.length;e<f;++e)i=d.getTransaction(j[e]),i&&i.retryCount<d.maxRetries?i.retry():(h=Ext.create("Ext.direct.ExceptionEvent",{data:null,transaction:i,code:Ext.direct.Manager.self.exceptions.TRANSPORT,message:"Unable to connect to the server.",xhr:c}),d.fireEvent("data",d,h),i&&(d.runCallback(i,h,!1),Ext.direct.Manager.removeTransaction(i)))}},getTransaction:function(a){return a&&a.tid?Ext.direct.Manager.getTransaction(a.tid):null},configureRequest:function(a,b,c){var d=this,e=b.getCallData(c),f=e.data,g=e.callback,h=e.scope,i;i=Ext.create("Ext.direct.Transaction",{provider:d,args:c,action:a,method:b.name,data:f,callback:h&&Ext.isFunction(g)?Ext.Function.bind(g,h):g}),d.fireEvent("beforecall",d,i,b)!==!1&&(Ext.direct.Manager.addTransaction(i),d.queueTransaction(i),d.fireEvent("call",d,i,b))},getCallData:function(a){return{action:a.action,method:a.method,data:a.data,type:"rpc",tid:a.id}},sendRequest:function(a){var b=this,c={url:b.url,callback:b.onData,scope:b,transaction:a,timeout:b.timeout},d,e=b.enableUrlEncode,f=0,g,h;if(Ext.isArray(a)){d=[];for(g=a.length;f<g;++f)d.push(b.getCallData(a[f]))}else d=b.getCallData(a);e?(h={},h[Ext.isString(e)?e:"data"]=Ext.encode(d),c.params=h):c.jsonData=d,Ext.Ajax.request(c)},queueTransaction:function(a){var b=this,c=b.enableBuffer;if(a.form){b.sendFormRequest(a);return}b.callBuffer.push(a),c?(b.callTask||(b.callTask=Ext.create("Ext.util.DelayedTask",b.combineAndSend,b)),b.callTask.delay(Ext.isNumber(c)?c:10)):b.combineAndSend()},combineAndSend:function(){var a=this.callBuffer,b=a.length;b>0&&(this.sendRequest(b==1?a[0]:a),this.callBuffer=[])},configureFormRequest:function(a,b,c,d,e){var f=this,g=Ext.create("Ext.direct.Transaction",{provider:f,action:a,method:b.name,args:[c,d,e],callback:e&&Ext.isFunction(d)?Ext.Function.bind(d,e):d,isForm:!0}),h,i;f.fireEvent("beforecall",f,g,b)!==!1&&(Ext.direct.Manager.addTransaction(g),h=String(c.getAttribute("enctype")).toLowerCase()=="multipart/form-data",i={extTID:g.id,extAction:a,extMethod:b.name,extType:"rpc",extUpload:String(h)},Ext.apply(g,{form:Ext.getDom(c),isUpload:h,params:d&&Ext.isObject(d.params)?Ext.apply(i,d.params):i}),f.fireEvent("call",f,g,b),f.sendFormRequest(g))},sendFormRequest:function(a){Ext.Ajax.request({url:this.url,params:a.params,callback:this.onData,scope:this,form:a.form,isUpload:a.isUpload,transaction:a})}}),Ext.define("Ext.draw.Matrix",{requires:["Ext.draw.Draw"],constructor:function(a,b,c,d,e,f){a!=null?this.matrix=[[a,c,e],[b,d,f],[0,0,1]]:this.matrix=[[1,0,0],[0,1,0],[0,0,1]]},add:function(a,b,c,d,e,f){var g=this,h=[[],[],[]],i=[[a,c,e],[b,d,f],[0,0,1]],j,k,l,m;for(j=0;j<3;j++)for(k=0;k<3;k++){m=0;for(l=0;l<3;l++)m+=g.matrix[j][l]*i[l][k];h[j][k]=m}g.matrix=h},prepend:function(a,b,c,d,e,f){var g=this,h=[[],[],[]],i=[[a,c,e],[b,d,f],[0,0,1]],j,k,l,m;for(j=0;j<3;j++)for(k=0;k<3;k++){m=0;for(l=0;l<3;l++)m+=i[j][l]*g.matrix[l][k];h[j][k]=m}g.matrix=h},invert:function(){var a=this.matrix,b=a[0][0],c=a[1][0],d=a[0][1],e=a[1][1],f=a[0][2],g=a[1][2],h=b*e-c*d;return new Ext.draw.Matrix(e/h,-c/h,-d/h,b/h,(d*g-e*f)/h,(c*f-b*g)/h)},clone:function(){var a=this.matrix,b=a[0][0],c=a[1][0],d=a[0][1],e=a[1][1],f=a[0][2],g=a[1][2];return new Ext.draw.Matrix(b,c,d,e,f,g)},translate:function(a,b){this.prepend(1,0,0,1,a,b)},scale:function(a,b,c,d){var e=this;b==null&&(b=a),e.add(1,0,0,1,c,d),e.add(a,0,0,b,0,0),e.add(1,0,0,1,-c,-d)},rotate:function(a,b,c){a=Ext.draw.Draw.rad(a);var d=this,e=+Math.cos(a).toFixed(9),f=+Math.sin(a).toFixed(9);d.add(e,f,-f,e,b,c),d.add(1,0,0,1,-b,-c)},x:function(a,b){var c=this.matrix;return a*c[0][0]+b*c[0][1]+c[0][2]},y:function(a,b){var c=this.matrix;return a*c[1][0]+b*c[1][1]+c[1][2]},get:function(a,b){return+this.matrix[a][b].toFixed(4)},toString:function(){var a=this;return[a.get(0,0),a.get(0,1),a.get(1,0),a.get(1,1),0,0].join()},toSvg:function(){var a=this;return"matrix("+[a.get(0,0),a.get(1,0),a.get(0,1),a.get(1,1),a.get(0,2),a.get(1,2)].join()+")"},toFilter:function(){var a=this;return"progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand',FilterType=bilinear,M11="+a.get(0,0)+", M12="+a.get(0,1)+", M21="+a.get(1,0)+", M22="+a.get(1,1)+", Dx="+a.get(0,2)+", Dy="+a.get(1,2)+")"},offset:function(){var a=this.matrix;return[(a[0][2]||0).toFixed(4),(a[1][2]||0).toFixed(4)]},split:function(){function a(a){return a[0]*a[0]+a[1]*a[1]}function b(b){var c=Math.sqrt(a(b));b[0]/=c,b[1]/=c}var c=this.matrix,d={translateX:c[0][2],translateY:c[1][2]},e;return e=[[c[0][0],c[0][1]],[c[1][0],c[1][1]]],d.scaleX=Math.sqrt(a(e[0])),b(e[0]),d.shear=e[0][0]*e[1][0]+e[0][1]*e[1][1],e[1]=[e[1][0]-e[0][0]*d.shear,e[1][1]-e[0][1]*d.shear],d.scaleY=Math.sqrt(a(e[1])),b(e[1]),d.shear/=d.scaleY,d.rotate=Math.asin(-e[0][1]),d.isSimple=!+d.shear.toFixed(9)&&(d.scaleX.toFixed(9)==d.scaleY.toFixed(9)||!d.rotate),d}}),Ext.define("Ext.draw.SpriteDD",{extend:"Ext.dd.DragSource",constructor:function(a,b){var c=this,d=a.el;c.sprite=a,c.el=d,c.dragData={el:d,sprite:a},c.callParent([d,b]),c.sprite.setStyle("cursor","move")},showFrame:Ext.emptyFn,createFrame:Ext.emptyFn,getDragEl:function(a){return this.el},getRegion:function(){var a=this,b=a.el,c,d,e,f,g,h,i,j,k,l,m;m=a.sprite,l=m.getBBox();try{c=Ext.Element.getXY(b)}catch(n){}return c?(d=c[0],e=d+l.width,f=c[1],g=f+l.height,Ext.create("Ext.util.Region",f,e,g,d)):null},startDrag:function(a,b){var c=this,d=c.sprite.attr;c.prev=c.sprite.surface.transformToViewBox(a,b)},onDrag:function(a){var b=a.getXY(),c=this,d=c.sprite,e=d.attr,f,g;b=c.sprite.surface.transformToViewBox(b[0],b[1]),f=b[0]-c.prev[0],g=b[1]-c.prev[1],d.setAttributes({translate:{x:e.translation.x+f,y:e.translation.y+g}},!0),c.prev=b},setDragElPos:function(){return!1}}),Ext.define("Ext.draw.Sprite",{mixins:{observable:"Ext.util.Observable",animate:"Ext.util.Animate"},requires:["Ext.draw.SpriteDD"],dirty:!1,dirtyHidden:!1,dirtyTransform:!1,dirtyPath:!0,dirtyFont:!0,zIndexDirty:!0,isSprite:!0,zIndex:0,fontProperties:["font","font-size","font-weight","font-style","font-family","text-anchor","text"],pathProperties:["x","y","d","path","height","width","radius","r","rx","ry","cx","cy"],constructor:function(a){var b=this;a=a||{},b.id=Ext.id(null,"ext-sprite-"),b.transformations=[],Ext.copyTo(this,a,"surface,group,type,draggable"),b.bbox={},b.attr={zIndex:0,translation:{x:null,y:null},rotation:{degrees:null,x:null,y:null},scaling:{x:null,y:null,cx:null,cy:null}},delete a.surface,delete a.group,delete a.type,delete a.draggable,b.setAttributes(a),b.addEvents("beforedestroy","destroy","render","mousedown","mouseup","mouseover","mouseout","mousemove","click"),b.mixins.observable.constructor.apply(this,arguments)},initDraggable:function(){var a=this;a.draggable=!0,a.el||a.surface.createSpriteElement(a),a.dd=Ext.create("Ext.draw.SpriteDD",a,Ext.isBoolean(a.draggable)?null:a.draggable),a.on("beforedestroy",a.dd.destroy,a.dd)},setAttributes:function(a,b){var c=this,d=c.fontProperties,e=d.length,f=c.pathProperties,g=f.length,h=!!c.surface,i=h&&c.surface.customAttributes||{},j=c.attr,k,l,m,n,o,p,q,r;a=Ext.apply({},a);for(k in i)a.hasOwnProperty(k)&&typeof i[k]=="function"&&Ext.apply(a,i[k].apply(c,[].concat(a[k])));!!a.hidden!=!!j.hidden&&(c.dirtyHidden=!0);for(l=0;l<g;l++){k=f[l];if(k in a&&a[k]!==j[k]){c.dirtyPath=!0;break}}"zIndex"in a&&(c.zIndexDirty=!0);for(l=0;l<e;l++){k=d[l];if(k in a&&a[k]!==j[k]){c.dirtyFont=!0;break}}m=a.translate,n=j.translation;if(m){if(m.x&&m.x!==n.x||m.y&&m.y!==n.y)Ext.apply(n,m),c.dirtyTransform=!0;delete a.translate}o=a.rotate,p=j.rotation;if(o){if(o.x&&o.x!==p.x||o.y&&o.y!==p.y||o.degrees&&o.degrees!==p.degrees)Ext.apply(p,o),c.dirtyTransform=!0;delete a.rotate}q=a.scale,r=j.scaling;if(q){if(q.x&&q.x!==r.x||q.y&&q.y!==r.y||q.cx&&q.cx!==r.cx||q.cy&&q.cy!==r.cy)Ext.apply(r,q),c.dirtyTransform=!0;delete a.scale}return Ext.apply(j,a),c.dirty=!0,b===!0&&h&&c.redraw(),this},getBBox:function(){return this.surface.getBBox(this)},setText:function(a){return this.surface.setText(this,a)},hide:function(a){return this.setAttributes({hidden:!0},a),this},show:function(a){return this.setAttributes({hidden:!1},a),this},remove:function(){return this.surface?(this.surface.remove(this),!0):!1},onRemove:function(){this.surface.onRemove(this)},destroy:function(){var a=this;a.fireEvent("beforedestroy",a)!==!1&&(a.remove(),a.surface.onDestroy(a),a.clearListeners(),a.fireEvent("destroy"))},redraw:function(){return this.surface.renderItem(this),this},setStyle:function(){return this.el.setStyle.apply(this.el,arguments),this},addCls:function(a){return this.surface.addCls(this,a),this},removeCls:function(a){return this.surface.removeCls(this,a),this}}),Ext.define("Ext.draw.engine.Svg",{extend:"Ext.draw.Surface",requires:["Ext.draw.Draw","Ext.draw.Sprite","Ext.draw.Matrix","Ext.Element"],engine:"Svg",trimRe:/^\s+|\s+$/g,spacesRe:/\s+/,xlink:"http://www.w3.org/1999/xlink",translateAttrs:{radius:"r",radiusX:"rx",radiusY:"ry",path:"d",lineWidth:"stroke-width",fillOpacity:"fill-opacity",strokeOpacity:"stroke-opacity",strokeLinejoin:"stroke-linejoin"},parsers:{},minDefaults:{circle:{cx:0,cy:0,r:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},ellipse:{cx:0,cy:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},rect:{x:0,y:0,width:0,height:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},text:{x:0,y:0,"text-anchor":"start","font-family":null,"font-size":null,"font-weight":null,"font-style":null,fill:"#000",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},path:{d:"M0,0",fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},image:{x:0,y:0,width:0,height:0,preserveAspectRatio:"none",opacity:null}},createSvgElement:function(a,b){var c=this.domRef.createElementNS("http://www.w3.org/2000/svg",a),d;if(b)for(d in b)c.setAttribute(d,String(b[d]));return c},createSpriteElement:function(a){var b=this.createSvgElement(a.type);return b.id=a.id,b.style&&(b.style.webkitTapHighlightColor="rgba(0,0,0,0)"),a.el=Ext.get(b),this.applyZIndex(a),a.matrix=Ext.create("Ext.draw.Matrix"),a.bbox={plain:0,transform:0},a.fireEvent("render",a),b},getBBox:function(a,b){var c=this["getPath"+a.type](a);return b?(a.bbox.plain=a.bbox.plain||Ext.draw.Draw.pathDimensions(c),a.bbox.plain):(a.bbox.transform=a.bbox.transform||Ext.draw.Draw.pathDimensions(Ext.draw.Draw.mapPath(c,a.matrix)),a.bbox.transform)},getBBoxText:function(a){var b={},c,d,e,f,g,h;if(a&&a.el){h=a.el.dom;try{return b=h.getBBox(),b}catch(i){}b={x:b.x,y:Infinity,width:0,height:0},g=h.getNumberOfChars();for(f=0;f<g;f++)c=h.getExtentOfChar(f),b.y=Math.min(c.y,b.y),d=c.y+c.height-b.y,b.height=Math.max(b.height,d),e=c.x+c.width-b.x,b.width=Math.max(b.width,e);return b}},hide:function(){Ext.get(this.el).hide()},show:function(){Ext.get(this.el).show()},hidePrim:function(a){this.addCls(a,Ext.baseCSSPrefix+"hide-visibility")},showPrim:function(a){this.removeCls(a,Ext.baseCSSPrefix+"hide-visibility")},getDefs:function(){return this._defs||(this._defs=this.createSvgElement("defs"))},transform:function(a){var b=this,c=Ext.create("Ext.draw.Matrix"),d=a.transformations,e=d.length,f=0,g,h;for(;f<e;f++)g=d[f],h=g.type,h=="translate"?c.translate(g.x,g.y):h=="rotate"?c.rotate(g.degrees,g.x,g.y):h=="scale"&&c.scale(g.x,g.y,g.centerX,g.centerY);a.matrix=c,a.el.set({transform:c.toSvg()})},setSize:function(a,b){var c=this,d=c.el;a=+a||c.width,b=+b||c.height,c.width=a,c.height=b,d.setSize(a,b),d.set({width:a,height:b}),c.callParent([a,b])},getRegion:function(){var a=this.el.getXY(),b=this.bgRect.getXY(),c=Math.max,d=c(a[0],b[0]),e=c(a[1],b[1]);return{left:d,top:e,right:d+this.width,bottom:e+this.height}},onRemove:function(a){a.el&&(a.el.remove(),delete a.el),this.callParent(arguments)},setViewBox:function(a,b,c,d){isFinite(a)&&isFinite(b)&&isFinite(c)&&isFinite(d)&&(this.callParent(arguments),this.el.dom.setAttribute("viewBox",[a,b,c,d].join(" ")))},render:function(a){var b=this;if(!b.el){var c=b.width||10,d=b.height||10,e=b.createSvgElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:c,height:d}),f=b.getDefs(),g=b.createSvgElement("rect",{width:"100%",height:"100%",fill:"#000",stroke:"none",opacity:0}),h;Ext.isSafari3&&(h=b.createSvgElement("rect",{x:-10,y:-10,width:"110%",height:"110%",fill:"none",stroke:"#000"})),e.appendChild(f),Ext.isSafari3&&e.appendChild(h),e.appendChild(g),a.appendChild(e),b.el=Ext.get(e),b.bgRect=Ext.get(g),Ext.isSafari3&&(b.webkitRect=Ext.get(h),b.webkitRect.hide()),b.el.on({scope:b,mouseup:b.onMouseUp,mousedown:b.onMouseDown,mouseover:b.onMouseOver,mouseout:b.onMouseOut,mousemove:b.onMouseMove,mouseenter:b.onMouseEnter,mouseleave:b.onMouseLeave,click:b.onClick})}b.renderAll()},onMouseEnter:function(a){this.el.parent().getRegion().contains(a.getPoint())&&this.fireEvent("mouseenter",a)},onMouseLeave:function(a){this.el.parent().getRegion().contains(a.getPoint())||this.fireEvent("mouseleave",a)},processEvent:function(a,b){var c=b.getTarget(),d=this.surface,e;this.fireEvent(a,b),c.nodeName=="tspan"&&c.parentNode&&(c=c.parentNode),e=this.items.get(c.id),e&&e.fireEvent(a,e,b)},tuneText:function(a,b){var c=a.el.dom,d=[],e,f,g,h,i,j,k;b.hasOwnProperty("text")&&(d=this.setText(a,b.text));if(d.length){e=this.getBBoxText(a).height;for(h=0,i=d.length;h<i;h++)k=Ext.isFF3_0||Ext.isFF3_5?2:4,d[h].setAttribute("dy",h?e*1.2:e/k);a.dirty=!0}},setText:function(a,b){var c=this,d=a.el.dom,e=d.getAttribute("x"),f=[],g,h,i,j,k,l;while(d.firstChild)d.removeChild(d.firstChild);l=String(b).split("\n");for(j=0,k=l.length;j<k;j++)i=l[j],i&&(h=c.createSvgElement("tspan"),h.appendChild(document.createTextNode(Ext.htmlDecode(i))),h.setAttribute("x",e),d.appendChild(h),f[j]=h);return f},renderAll:function(){this.items.each(this.renderItem,this)},renderItem:function(a){if(!this.el)return;a.el||this.createSpriteElement(a),a.zIndexDirty&&this.applyZIndex(a),a.dirty&&(this.applyAttrs(a),this.applyTransformations(a))},redraw:function(a){a.dirty=a.zIndexDirty=!0,this.renderItem(a)},applyAttrs:function(a){var b=this,c=a.el,d=a.group,e=a.attr,f=b.parsers,g=b.gradientsMap||{},h=Ext.isSafari&&!Ext.isStrict,i,j,k,l,m,n,o,p,q;if(d){i=[].concat(d),k=i.length;for(j=0;j<k;j++)d=i[j],b.getGroup(d).add(a);delete a.group}l=b.scrubAttrs(a)||{},a.bbox.plain=0,a.bbox.transform=0,a.type=="circle"||a.type=="ellipse"?(l.cx=l.cx||l.x,l.cy=l.cy||l.y):a.type=="rect"?l.rx=l.ry=l.r:a.type=="path"&&l.d&&(l.d=Ext.draw.Draw.pathToString(Ext.draw.Draw.pathToAbsolute(l.d))),a.dirtyPath=!1,l["clip-rect"]&&(b.setClip(a,l),delete l["clip-rect"]),a.type=="text"&&l.font&&a.dirtyFont&&(c.set({style:"font: "+l.font}),a.dirtyFont=!1),a.type=="image"&&c.dom.setAttributeNS(b.xlink,"href",l.src),Ext.applyIf(l,b.minDefaults[a.type]),a.dirtyHidden&&(e.hidden?b.hidePrim(a):b.showPrim(a),a.dirtyHidden=!1);for(n in l)l.hasOwnProperty(n)&&l[n]!=null&&(h&&"color|stroke|fill".indexOf(n)>-1&&l[n]in g&&(l[n]=g[l[n]]),n in f?c.dom.setAttribute(n,f[n](l[n],a,b)):c.dom.setAttribute(n,l[n]));a.type=="text"&&b.tuneText(a,l),o=e.style,o&&c.setStyle(o),a.dirty=!1,Ext.isSafari3&&(b.webkitRect.show(),setTimeout(function(){b.webkitRect.hide()}))},setClip:function(a,b){var c=this,d=b["clip-rect"],e,f;d&&(a.clip&&a.clip.parentNode.parentNode.removeChild(a.clip.parentNode),e=c.createSvgElement("clipPath"),f=c.createSvgElement("rect"),e.id=Ext.id(null,"ext-clip-"),f.setAttribute("x",d.x),f.setAttribute("y",d.y),f.setAttribute("width",d.width),f.setAttribute("height",d.height),e.appendChild(f),c.getDefs().appendChild(e),a.el.dom.setAttribute("clip-path","url(#"+e.id+")"),a.clip=f)},applyZIndex:function(a){var b=this,c=b.items,d=c.indexOf(a),e=a.el,f;if(b.el.dom.childNodes[d+2]!==e.dom){if(d>0)do f=c.getAt(--d).el;while(!f&&d>0);e.insertAfter(f||b.bgRect)}a.zIndexDirty=!1},createItem:function(a){var b=Ext.create("Ext.draw.Sprite",a);return b.surface=this,b},addGradient:function(a){a=Ext.draw.Draw.parseGradient(a);var b=this,c=a.stops.length,d=a.vector,e=Ext.isSafari&&!Ext.isStrict,f,g,h,i,j;j=b.gradientsMap||{};if(!e){a.type=="linear"?(f=b.createSvgElement("linearGradient"),f.setAttribute("x1",d[0]),f.setAttribute("y1",d[1]),f.setAttribute("x2",d[2]),f.setAttribute("y2",d[3])):(f=b.createSvgElement("radialGradient"),f.setAttribute("cx",a.centerX),f.setAttribute("cy",a.centerY),f.setAttribute("r",a.radius),Ext.isNumber(a.focalX)&&Ext.isNumber(a.focalY)&&(f.setAttribute("fx",a.focalX),f.setAttribute("fy",a.focalY))),f.id=a.id,b.getDefs().appendChild(f);for(i=0;i<c;i++)g=a.stops[i],h=b.createSvgElement("stop"),h.setAttribute("offset",g.offset+"%"),h.setAttribute("stop-color",g.color),h.setAttribute("stop-opacity",g.opacity),f.appendChild(h)}else j["url(#"+a.id+")"]=a.stops[0].color;b.gradientsMap=j},hasCls:function(a,b){return b&&(" "+(a.el.dom.getAttribute("class")||"")+" ").indexOf(" "+b+" ")!=-1},addCls:function(a,b){var c=a.el,d,e,f,g=[],h=c.getAttribute("class")||"";if(!Ext.isArray(b))typeof b=="string"&&!this.hasCls(a,b)&&c.set({"class":h+" "+b});else{for(d=0,e=b.length;d<e;d++)f=b[d],typeof f=="string"&&(" "+h+" ").indexOf(" "+f+" ")==-1&&g.push(f);g.length&&c.set({"class":" "+g.join(" ")})}},removeCls:function(a,b){var c=this,d=a.el,e=d.getAttribute("class")||"",f,g,h,i,j;Ext.isArray(b)||(b=[b]);if(e){j=e.replace(c.trimRe," ").split(c.spacesRe);for(f=0,h=b.length;f<h;f++)i=b[f],typeof i=="string"&&(i=i.replace(c.trimRe,""),g=Ext.Array.indexOf(j,i),g!=-1&&Ext.Array.erase(j,g,1));d.set({"class":j.join(" ")})}},destroy:function(){var a=this;a.callParent(),a.el&&a.el.remove(),delete a.el}}),Ext.define("Ext.draw.engine.Vml",{extend:"Ext.draw.Surface",requires:["Ext.draw.Draw","Ext.draw.Color","Ext.draw.Sprite","Ext.draw.Matrix","Ext.Element"],engine:"Vml",map:{M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},bitesRe:/([clmz]),?([^clmz]*)/gi,valRe:/-?[^,\s-]+/g,fillUrlRe:/^url\(\s*['"]?([^\)]+?)['"]?\s*\)$/i,pathlike:/^(path|rect)$/,NonVmlPathRe:/[ahqstv]/ig,partialPathRe:/[clmz]/g,fontFamilyRe:/^['"]+|['"]+$/g,baseVmlCls:Ext.baseCSSPrefix+"vml-base",vmlGroupCls:Ext.baseCSSPrefix+"vml-group",spriteCls:Ext.baseCSSPrefix+"vml-sprite",measureSpanCls:Ext.baseCSSPrefix+"vml-measure-span",zoom:21600,coordsize:1e3,coordorigin:"0 0",orderSpritesByZIndex:!1,path2vml:function(a){var b=this,c=b.NonVmlPathRe,d=b.map,e=b.valRe,f=b.zoom,g=b.bitesRe,h=Ext.Function.bind(Ext.draw.Draw.pathToAbsolute,Ext.draw.Draw),i,j,k,l,m,n,o,p;if(String(a).match(c))h=Ext.Function.bind(Ext.draw.Draw.path2curve,Ext.draw.Draw);else if(!String(a).match(b.partialPathRe))return i=String(a).replace(g,function(a,b,c){var g=[],h=b.toLowerCase()=="m",i=d[b];return c.replace(e,function(a){h&&g[length]==2&&(i+=g+d[b=="m"?"l":"L"],g=[]),g.push(Math.round(a*f))}),i+g}),i;j=h(a),i=[];for(m=0,n=j.length;m<n;m++){k=j[m],l=j[m][0].toLowerCase(),l=="z"&&(l="x");for(o=1,p=k.length;o<p;o++)l+=Math.round(k[o]*b.zoom)+(o!=p-1?",":"");i.push(l)}return i.join(" ")},translateAttrs:{radius:"r",radiusX:"rx",radiusY:"ry",lineWidth:"stroke-width",fillOpacity:"fill-opacity",strokeOpacity:"stroke-opacity",strokeLinejoin:"stroke-linejoin"},minDefaults:{circle:{fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},ellipse:{cx:0,cy:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},rect:{x:0,y:0,width:0,height:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},text:{x:0,y:0,"text-anchor":"start",font:'10px "Arial"',fill:"#000",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},path:{d:"M0,0",fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},image:{x:0,y:0,width:0,height:0,preserveAspectRatio:"none",opacity:null}},onMouseEnter:function(a){this.fireEvent("mouseenter",a)},onMouseLeave:function(a){this.fireEvent("mouseleave",a)},processEvent:function(a,b){var c=b.getTarget(),d=this.surface,e;this.fireEvent(a,b),e=this.items.get(c.id),e&&e.fireEvent(a,e,b)},createSpriteElement:function(a){var b=this,c=a.attr,d=a.type,e=b.zoom,f=a.vml||(a.vml={}),g=Math.round,h=b.createNode("shape"),i,j,k;return h.coordsize=e+" "+e,h.coordorigin=c.coordorigin||"0 0",Ext.get(h).addCls(b.spriteCls),d=="text"&&(f.path=i=b.createNode("path"),i.textpathok=!0,f.textpath=k=b.createNode("textpath"),k.on=!0,h.appendChild(k),h.appendChild(i)),h.id=a.id,a.el=Ext.get(h),b.el.appendChild(h),d!=="image"&&(j=b.createNode("skew"),j.on=!0,h.appendChild(j),a.skew=j),a.matrix=Ext.create("Ext.draw.Matrix"),a.bbox={plain:null,transform:null},a.fireEvent("render",a),a.el},getBBox:function(a,b){var c=this["getPath"+a.type](a);return b?(a.bbox.plain=a.bbox.plain||Ext.draw.Draw.pathDimensions(c),a.bbox.plain):(a.bbox.transform=a.bbox.transform||Ext.draw.Draw.pathDimensions(Ext.draw.Draw.mapPath(c,a.matrix)),a.bbox.transform)},getBBoxText:function(a){var b=a.vml;return{x:b.X+(b.bbx||0)-b.W/2,y:b.Y-b.H/2,width:b.W,height:b.H}},applyAttrs:function(a){var b=this,c=a.vml,d=a.group,e=a.attr,f=a.el,g=f.dom,h,i,j,k,l,m,n,o,p;if(d){j=[].concat(d),l=j.length;for(k=0;k<l;k++)d=j[k],b.getGroup(d).add(a);delete a.group}m=b.scrubAttrs(a)||{},a.zIndexDirty&&b.setZIndex(a),Ext.applyIf(m,b.minDefaults[a.type]),g.href&&(g.href=m.href),g.title&&(g.title=m.title),g.target&&(g.target=m.target),g.cursor&&(g.cursor=m.cursor),a.dirtyHidden&&(m.hidden?b.hidePrim(a):b.showPrim(a),a.dirtyHidden=!1);if(a.dirtyPath)if(a.type=="circle"||a.type=="ellipse"){var q=m.x,r=m.y,s=m.rx||m.r||0,t=m.ry||m.r||0;g.path=Ext.String.format("ar{0},{1},{2},{3},{4},{1},{4},{1}",Math.round((q-s)*b.zoom),Math.round((r-t)*b.zoom),Math.round((q+s)*b.zoom),Math.round((r+t)*b.zoom),Math.round(q*b.zoom)),a.dirtyPath=!1}else a.type!=="text"&&(a.attr.path=m.path=b.setPaths(a,m)||m.path,g.path=b.path2vml(m.path),a.dirtyPath=!1);"clip-rect"in m&&b.setClip(a,m),a.type=="text"&&b.setTextAttributes(a,m),(a.type=="image"||m.opacity||m["fill-opacity"]||m.fill)&&b.setFill(a,m),(m.stroke||m["stroke-opacity"]||m.fill)&&b.setStroke(a,m),h=e.style,h&&f.setStyle(h),a.dirty=!1},setZIndex:function(a){a.el&&(a.attr.zIndex!=undefined&&a.el.setStyle("zIndex",a.attr.zIndex),a.zIndexDirty=!1)},setPaths:function(a,b){var c=a.attr;return a.bbox.plain=null,a.bbox.transform=null,a.type=="circle"?(c.rx=c.ry=b.r,Ext.draw.Draw.ellipsePath(a)):a.type=="ellipse"?(c.rx=b.rx,c.ry=b.ry,Ext.draw.Draw.ellipsePath(a)):a.type=="rect"||a.type=="image"?(c.rx=c.ry=b.r,Ext.draw.Draw.rectPath(a)):a.type=="path"&&c.path?Ext.draw.Draw.pathToAbsolute(c.path):!1},setFill:function(a,b){var c=this,d=a.el,e=d.dom,f=e.getElementsByTagName("fill")[0],g,h,i,j,k;f?e.removeChild(f):f=c.createNode("fill"),Ext.isArray(b.fill)&&(b.fill=b.fill[0]),a.type=="image"?(f.on=!0,f.src=b.src,f.type="tile",f.rotate=!0):b.fill=="none"?f.on=!1:(typeof b.opacity=="number"&&(f.opacity=b.opacity),typeof b["fill-opacity"]=="number"&&(f.opacity=b["fill-opacity"]),f.on=!0,typeof b.fill=="string"&&(i=b.fill.match(c.fillUrlRe),i?(i=i[1],i.charAt(0)=="#"&&(h=c.gradientsColl.getByKey(i.substring(1))),h?(j=b.rotation,k=-(h.angle+270+(j?j.degrees:0))%360,k===0&&(k=180),f.angle=k,f.type="gradient",f.method="sigma",f.colors=h.colors):(f.src=i,f.type="tile",f.rotate=!0)):(f.color=Ext.draw.Color.toHex(b.fill)||b.fill,f.src="",f.type="solid"))),e.appendChild(f)},setStroke:function(a,b){var c=this,d=a.el.dom,e=a.strokeEl,f=!1,g,h;e||(e=a.strokeEl=c.createNode("stroke"),f=!0),Ext.isArray(b.stroke)&&(b.stroke=b.stroke[0]),!b.stroke||b.stroke=="none"||b.stroke==0||b["stroke-width"]==0?e.on=!1:(e.on=!0,b.stroke&&!b.stroke.match(c.fillUrlRe)&&(e.color=Ext.draw.Color.toHex(b.stroke)),e.joinstyle=b["stroke-linejoin"],e.endcap=b["stroke-linecap"]||"round",e.miterlimit=b["stroke-miterlimit"]||8,g=parseFloat(b["stroke-width"]||1)*.75,h=b["stroke-opacity"]||1,Ext.isNumber(g)&&g<1?(e.weight=1,e.opacity=h*g):(e.weight=g,e.opacity=h)),f&&d.appendChild(e)},setClip:function(a,b){var c=this,d=a.el,e=a.clipEl,f=String(b["clip-rect"]).split(c.separatorRe);e||(e=a.clipEl=c.el.insertFirst(Ext.getDoc().dom.createElement("div")),e.addCls(Ext.baseCSSPrefix+"vml-sprite")),f.length==4?(f[2]=+f[2]+ +f[0],f[3]=+f[3]+ +f[1],e.setStyle("clip",Ext.String.format("rect({1}px {2}px {3}px {0}px)",f[0],f[1],f[2],f[3])),e.setSize(c.el.width,c.el.height)):e.setStyle("clip","")},setTextAttributes:function(a,b){var c=this,d=a.vml,e=d.textpath.style,f=c.span.style,g=c.zoom,h=Math.round,i={fontSize:"font-size",fontWeight:"font-weight",fontStyle:"font-style"},j,k;if(a.dirtyFont){b.font&&(e.font=f.font=b.font),b["font-family"]&&(e.fontFamily='"'+b["font-family"].split(",")[0].replace(c.fontFamilyRe,"")+'"',f.fontFamily=b["font-family"]);for(j in i)k=b[i[j]],k&&(e[j]=f[j]=k);c.setText(a,b.text),d.textpath.string&&(c.span.innerHTML=String(d.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>")),d.W=c.span.offsetWidth,d.H=c.span.offsetHeight+2,b["text-anchor"]=="middle"?e["v-text-align"]="center":b["text-anchor"]=="end"?(e["v-text-align"]="right",d.bbx=-Math.round(d.W/2)):(e["v-text-align"]="left",d.bbx=Math.round(d.W/2))}d.X=b.x,d.Y=b.y,d.path.v=Ext.String.format("m{0},{1}l{2},{1}",Math.round(d.X*g),Math.round(d.Y*g),Math.round(d.X*g)+1),a.bbox.plain=null,a.bbox.transform=null,a.dirtyFont=!1},setText:function(a,b){a.vml.textpath.string=Ext.htmlDecode(b)},hide:function(){this.el.hide()},show:function(){this.el.show()},hidePrim:function(a){a.el.addCls(Ext.baseCSSPrefix+"hide-visibility")},showPrim:function(a){a.el.removeCls(Ext.baseCSSPrefix+"hide-visibility")},setSize:function(a,b){var c=this;a=a||c.width,b=b||c.height,c.width=a,c.height=b,c.el&&(a!=undefined&&c.el.setWidth(a),b!=undefined&&c.el.setHeight(b),c.applyViewBox(),c.callParent(arguments))},setViewBox:function(a,b,c,d){this.callParent(arguments),this.viewBox={x:a,y:b,width:c,height:d},this.applyViewBox()},applyViewBox:function(){var a=this,b=a.viewBox,c=a.width,d=a.height,e,f,g,h,i,j,k;b&&(c||d)&&(e=b.x,f=b.y,g=b.width,h=b.height,i=d/h,j=c/g,g*i<c&&(e-=(c-g*i)/2/i),h*j<d&&(f-=(d-h*j)/2/j),k=1/Math.max(g/c,h/d),a.viewBoxShift={dx:-e,dy:-f,scale:k},a.items.each(function(b){a.transform(b)}))},onAdd:function(a){this.callParent(arguments),this.el&&this.renderItem(a)},onRemove:function(a){a.el&&(a.el.remove(),delete a.el),this.callParent(arguments)},createNode:function(){try{var a=Ext.getDoc().dom;return a.namespaces.rvml||a.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),function(b){return a.createElement("<rvml:"+b+' class="rvml">')}}catch(b){return function(b){return a.createElement("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}}(),render:function(a){var b=this,c=Ext.getDoc().dom;if(!b.el){var d=c.createElement("div");b.el=Ext.get(d),b.el.addCls(b.baseVmlCls),b.span=c.createElement("span"),Ext.get(b.span).addCls(b.measureSpanCls),d.appendChild(b.span),b.el.setSize(b.width||10,b.height||10),a.appendChild(d),b.el.on({scope:b,mouseup:b.onMouseUp,mousedown:b.onMouseDown,mouseover:b.onMouseOver,mouseout:b.onMouseOut,mousemove:b.onMouseMove,mouseenter:b.onMouseEnter,mouseleave:b.onMouseLeave,click:b.onClick})}b.renderAll()},renderAll:function(){this.items.each(this.renderItem,this)},redraw:function(a){a.dirty=!0,this.renderItem(a)},renderItem:function(a){if(!this.el)return;a.el||this.createSpriteElement(a),a.dirty&&(this.applyAttrs(a),a.dirtyTransform&&this.applyTransformations(a))},rotationCompensation:function(a,b,c){var d=Ext.create("Ext.draw.Matrix");return d.rotate(-a,.5,.5),{x:d.x(b,c),y:d.y(b,c)}},extractTransform:function(a){var b=this,c=Ext.create("Ext.draw.Matrix"),d,e,f,g,h=0,i=b.viewBoxShift;for(e=a.transformations,f=e.length;h<f;h++){g=e[h];switch(g.type){case"translate":c.translate(g.x,g.y);break;case"rotate":c.rotate(g.degrees,g.x,g.y);break;case"scale":c.scale(g.x||g.scale,g.y||g.scale,g.centerX,g.centerY)}}return i&&(c.add(1,0,0,1,i.dx,i.dy),c.prepend(i.scale,0,0,i.scale,0,0)),a.matrix=c},setSimpleCoords:function(a,b,c,d,e,f){var g=this,h=a.matrix,i=a.el.dom,j=i.style,k=1,l="",m=i.getElementsByTagName("fill")[0],n=g.zoom/b,o=g.zoom/c,p;if(!b||!c)return;i.coordsize=Math.abs(n)+" "+Math.abs(o),j.rotation=f*(b*c<0?-1:1),f&&(p=g.rotationCompensation(f,d,e),d=p.x,e=p.y),b<0&&(l+="x"),c<0&&(l+=" y",k=-1),j.flip=l,i.coordorigin=d*-n+" "+e*-o,m&&(i.removeChild(m),p=g.rotationCompensation(f,h.x(a.x,a.y),h.y(a.x,a.y)),m.position=p.x*k+" "+p.y*k,m.size=a.width*Math.abs(b)+" "+a.height*Math.abs(c),i.appendChild(m))},transform:function(a){var b=this,c=a.el,d=a.skew,e=c.dom,f=e.style,g=b.extractTransform(a).clone(),h,i=b.zoom,j=e.getElementsByTagName("fill")[0],k=!String(a.fill).indexOf("url("),l,m;if(a.type!="image"&&d&&!k)d.matrix=g.toString(),l=g.offset(),l[0]>32767?l[0]=32767:l[0]<-32768&&(l[0]=-32768),l[1]>32767?l[1]=32767:l[1]<-32768&&(l[1]=-32768),d.offset=l;else{d&&(d.matrix="1 0 0 1",d.offset="0 0"),h=g.split();if(h.isSimple)f.filter="",b.setSimpleCoords(a,h.scaleX,h.scaleY,h.translateX,h.translateY,h.rotate/Math.PI*180);else{f.filter=g.toFilter();var n=b.getBBox(a),o=n.x-a.x,p=n.y-a.y;e.coordorigin=o*-i+" "+p*-i,j&&(e.removeChild(j),j.position=o+" "+p,j.size=a.width*a.scale.x+" "+a.height*1.1,e.appendChild(j))}}},createItem:function(a){return Ext.create("Ext.draw.Sprite",a)},getRegion:function(){return this.el.getRegion()},addCls:function(a,b){a&&a.el&&a.el.addCls(b)},removeCls:function(a,b){a&&a.el&&a.el.removeCls(b)},addGradient:function(a){var b=this.gradientsColl||(this.gradientsColl=Ext.create("Ext.util.MixedCollection")),c=[],d=Ext.create("Ext.util.MixedCollection");d.addAll(a.stops),d.sortByKey("ASC",function(a,b){return a=parseInt(a,10),b=parseInt(b,10),a>b?1:a<b?-1:0}),d.eachKey(function(a,b){c.push(a+"% "+b.color)}),b.add(a.id,{colors:c.join(","),angle:a.angle})},destroy:function(){var a=this;a.callParent(arguments),a.el&&a.el.remove(),delete a.el}}),Ext.define("Ext.fx.target.ElementCSS",{extend:"Ext.fx.target.Element",setAttr:function(a,b){var c={attrs:[],duration:[],easing:[]},d=a.length,e,f,g,h,i,j,k,l,m;for(k=0;k<d;k++){f=a[k],i=f.duration,h=f.easing,f=f.attrs;for(g in f)Ext.Array.indexOf(c.attrs,g)==-1&&(c.attrs.push(g.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})),c.duration.push(i+"ms"),c.easing.push(h))}e=c.attrs.join(","),i=c.duration.join(","),h=c.easing.join(", ");for(k=0;k<d;k++){f=a[k].attrs;for(g in f){m=f[g].length;for(l=0;l<m;l++)j=f[g][l],j[0].setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",b?"":e),j[0].setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",b?"":i),j[0].setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",b?"":h),j[0].setStyle(g,j[1]),b?j=j[0].dom.offsetWidth:j[0].on(Ext.supports.CSS3TransitionEnd,function(){this.setStyle(Ext.supports.CSS3Prefix+"TransitionProperty",null),this.setStyle(Ext.supports.CSS3Prefix+"TransitionDuration",null),this.setStyle(Ext.supports.CSS3Prefix+"TransitionTimingFunction",null)},j[0],{single:!0})}}}}),Ext.define("Ext.fx.target.CompositeElementCSS",{extend:"Ext.fx.target.CompositeElement",requires:["Ext.fx.target.ElementCSS"],setAttr:function(){return Ext.fx.target.ElementCSS.prototype.setAttr.apply(this,arguments)}}),Ext.define("Ext.layout.container.AbstractFit",{extend:"Ext.layout.container.Container",itemCls:Ext.baseCSSPrefix+"fit-item",targetCls:Ext.baseCSSPrefix+"layout-fit",type:"fit"}),Ext.define("Ext.layout.container.Fit",{extend:"Ext.layout.container.AbstractFit",alias:"layout.fit",alternateClassName:"Ext.layout.FitLayout",requires:["Ext.layout.container.Box"],defaultMargins:{top:0,right:0,bottom:0,left:0},onLayout:function(){var a=this,b,c,d;a.callParent(),a.owner.items.length&&(c=a.owner.items.get(0),d=c.margins||a.defaultMargins,b=a.getLayoutTargetSize(),b.width-=d.width,b.height-=d.height,a.setItemBox(c,b),(d.left||d.top)&&c.setPosition(d.left,d.top))},getTargetBox:function(){return this.getLayoutTargetSize()},setItemBox:function(a,b){var c=this;a&&b.height>0&&(c.owner.isFixedWidth()||(b.width=undefined),c.owner.isFixedHeight()||(b.height=undefined),c.setItemSize(a,b.width,b.height))},configureItem:function(a){a.layoutManagedHeight=0,a.layoutManagedWidth=0,this.callParent(arguments)}},function(){this.prototype.renderItem=Ext.layout.container.Box.prototype.renderItem}),Ext.define("Ext.layout.container.AbstractCard",{extend:"Ext.layout.container.Fit",type:"card",sizeAllCards:!1,hideInactive:!0,deferredRender:!1,beforeLayout:function(){var a=this;return a.getActiveItem(),a.activeItem&&a.deferredRender?(a.renderItems([a.activeItem],a.getRenderTarget()),!0):this.callParent(arguments)},renderChildren:function(){this.deferredRender||(this.getActiveItem(),this.callParent())},onLayout:function(){var a=this,b=a.activeItem,c=a.getVisibleItems(),d=c.length,e=a.getTargetBox(),f,g;for(f=0;f<d;f++)g=c[f],a.setItemBox(g,e);!a.firstActivated&&b&&(b.fireEvent("beforeactivate",b)!==!1&&b.fireEvent("activate",b),a.firstActivated=!0)},isValidParent:function(a,b,c){var d=a.el?a.el.dom:Ext.getDom(a);return d&&d.parentNode===(b.dom||b)||!1},getActiveItem:function(){var a=this;return!a.activeItem&&a.owner&&(a.activeItem=a.parseActiveItem(a.owner.activeItem)),a.activeItem&&a.owner.items.indexOf(a.activeItem)!=-1?a.activeItem:null},parseActiveItem:function(a){return a&&a.isComponent?a:typeof a=="number"||a===undefined?this.getLayoutItems()[a||0]:this.owner.getComponent(a)},configureItem:function(a,b){this.callParent([a,b]),this.hideInactive&&this.activeItem!==a?a.hide():a.show()},onRemove:function(a){a===this.activeItem&&(this.activeItem=null,this.owner.items.getCount()===0&&(this.firstActivated=!1))},getAnimation:function(a,b){var c=(a||{}).cardSwitchAnimation;return c===!1?!1:c||b.cardSwitchAnimation},getNext:function(){var a=arguments[0],b=this.getLayoutItems(),c=Ext.Array.indexOf(b,this.activeItem);return b[c+1]||(a?b[0]:!1)},next:function(){var a=arguments[0],b=arguments[1];return this.setActiveItem(this.getNext(b),a)},getPrev:function(){var a=arguments[0],b=this.getLayoutItems(),c=Ext.Array.indexOf(b,this.activeItem);return b[c-1]||(a?b[b.length-1]:!1)},prev:function(){var a=arguments[0],b=arguments[1];return this.setActiveItem(this.getPrev(b),a)}}),Ext.define("Ext.selection.Model",{extend:"Ext.util.Observable",alternateClassName:"Ext.AbstractSelectionModel",requires:["Ext.data.StoreManager"],allowDeselect:!1,selected:null,pruneRemoved:!0,constructor:function(a){var b=this;a=a||{},Ext.apply(b,a),b.addEvents("selectionchange"),b.modes={SINGLE:!0,SIMPLE:!0,MULTI:!0},b.setSelectionMode(a.mode||b.mode),b.selected=Ext.create("Ext.util.MixedCollection"),b.callParent(arguments)},bind:function(a,b){var c=this;!b&&c.store&&(a!==c.store&&c.store.autoDestroy?c.store.destroyStore():(c.store.un("add",c.onStoreAdd,c),c.store.un("clear",c.onStoreClear,c),c.store.un("remove",c.onStoreRemove,c),c.store.un("update",c.onStoreUpdate,c))),a&&(a=Ext.data.StoreManager.lookup(a),a.on({add:c.onStoreAdd,clear:c.onStoreClear,remove:c.onStoreRemove,update:c.onStoreUpdate,scope:c})),c.store=a,a&&!b&&c.refresh()},selectAll:function(a){var b=this,c=b.store.getRange(),d=0,e=c.length,f=b.getSelection().length;b.bulkChange=!0;for(;d<e;d++)b.doSelect(c[d],!0,a);delete b.bulkChange,b.maybeFireSelectionChange(b.getSelection().length!==f)},deselectAll:function(a){var b=this,c=b.getSelection(),d=0,e=c.length,f=b.getSelection().length;b.bulkChange=!0;for(;d<e;d++)b.doDeselect(c[d],a);delete b.bulkChange,b.maybeFireSelectionChange(b.getSelection().length!==f)},selectWithEvent:function(a,b,c){var d=this;switch(d.selectionMode){case"MULTI":b.ctrlKey&&d.isSelected(a)?d.doDeselect(a,!1):b.shiftKey&&d.lastFocused?d.selectRange(d.lastFocused,a,b.ctrlKey):b.ctrlKey?d.doSelect(a,!0,!1):d.isSelected(a)&&!b.shiftKey&&!b.ctrlKey&&d.selected.getCount()>1?d.doSelect(a,c,!1):d.doSelect(a,!1);break;case"SIMPLE":d.isSelected(a)?d.doDeselect(a):d.doSelect(a,!0);break;case"SINGLE":d.allowDeselect&&d.isSelected(a)?d.doDeselect(a):d.doSelect(a,!1)}},selectRange:function(a,b,c,d){var e=this,f=e.store,g=0,h,i,j,k=[];if(e.isLocked())return;c||e.deselectAll(!0),Ext.isNumber(a)||(a=f.indexOf(a)),Ext.isNumber(b)||(b=f.indexOf(b)),a>b&&(i=b,b=a,a=i);for(h=a;h<=b;h++)e.isSelected(f.getAt(h))&&g++;d?j=d=="up"?a:b:j=-1;for(h=a;h<=b;h++)g==b-a+1?h!=j&&e.doDeselect(h,!0):k.push(f.getAt(h));e.doMultiSelect(k,!0)},select:function(a,b,c){Ext.isDefined(a)&&this.doSelect(a,b,c)},deselect:function(a,b){this.doDeselect(a,b)},doSelect:function(a,b,c){var d=this,e;if(d.locked)return;typeof a=="number"&&(a=[d.store.getAt(a)]),d.selectionMode=="SINGLE"&&a?(e=a.length?a[0]:a,d.doSingleSelect(e,c)):d.doMultiSelect(a,b,c)},doMultiSelect:function(a,b,c){function j(){e.add(i),f=!0}var d=this,e=d.selected,f=!1,g=0,h,i;if(d.locked)return;a=Ext.isArray(a)?a:[a],h=a.length;if(!b&&e.getCount()>0&&d.doDeselect(d.getSelection(),c)===!1)return;for(;g<h;g++){i=a[g];if(b&&d.isSelected(i))continue;d.lastSelected=i,d.onSelectChange(i,!0,c,j)}d.setLastFocused(i,c),d.maybeFireSelectionChange(f&&!c)},doDeselect:function(a,b){function j(){++i,d.remove(g)}var c=this,d=c.selected,e=0,f,g,h=0,i=0;if(c.locked)return!1;typeof a=="number"?a=[c.store.getAt(a)]:Ext.isArray(a)||(a=[a]),f=a.length;for(;e<f;e++)g=a[e],c.isSelected(g)&&(c.lastSelected==g&&(c.lastSelected=d.last()),++h,c.onSelectChange(g,!1,b,j));return c.maybeFireSelectionChange(i>0&&!b),i===h},doSingleSelect:function(a,b){function f(){c.bulkChange=!0;if(e.getCount()>0&&c.doDeselect(c.lastSelected,b)===!1)return delete c.bulkChange,!1;delete c.bulkChange,e.add(a),c.lastSelected=a,d=!0}var c=this,d=!1,e=c.selected;if(c.locked)return;if(c.isSelected(a))return;c.onSelectChange(a,!0,b,f),d&&(b||c.setLastFocused(a),c.maybeFireSelectionChange(!b))},setLastFocused:function(a,b){var c=this,d=c.lastFocused;c.lastFocused=a,c.onLastFocusChanged(d,a,b)},isFocused:function(a){return a===this.getLastFocused()},maybeFireSelectionChange:function(a){var b=this;a&&!b.bulkChange&&b.fireEvent("selectionchange",b,b.getSelection())},getLastSelected:function(){return this.lastSelected},getLastFocused:function(){return this.lastFocused},getSelection:function(){return this.selected.getRange()},getSelectionMode:function(){return this.selectionMode},setSelectionMode:function(a){a=a?a.toUpperCase():"SINGLE",this.selectionMode=this.modes[a]?a:"SINGLE"},isLocked:function(){return this.locked},setLocked:function(a){this.locked=!!a},isSelected:function(a){return a=Ext.isNumber(a)?this.store.getAt(a):a,this.selected.indexOf(a)!==-1},hasSelection:function(){return this.selected.getCount()>0},refresh:function(){var a=this,b=[],c=a.getSelection(),d=c.length,e,f,g=0,h=this.getLastFocused();for(;g<d;g++)e=c[g],(!this.pruneRemoved||a.store.indexOf(e)!==-1)&&b.push(e);a.selected.getCount()!=b.length&&(f=!0),a.clearSelections(),a.store.indexOf(h)!==-1&&this.setLastFocused(h,!0),b.length&&a.doSelect(b,!1,!0),a.maybeFireSelectionChange(f)},clearSelections:function(){this.selected.clear(),this.lastSelected=null,this.setLastFocused(null)},onStoreAdd:function(){},onStoreClear:function(){this.selected.getCount>0&&(this.clearSelections(),this.maybeFireSelectionChange(!0))},onStoreRemove:function(a,b){var c=this,d=c.selected;if(c.locked||!c.pruneRemoved)return;d.remove(b)&&(c.lastSelected==b&&(c.lastSelected=null),c.getLastFocused()==b&&c.setLastFocused(null),c.maybeFireSelectionChange(!0))},getCount:function(){return this.selected.getCount()},destroy:function(){},onStoreUpdate:function(){},onSelectChange:function(a,b,c){},onLastFocusChanged:function(a,b){},onEditorKey:function(a,b){},bindComponent:function(a){}}),Ext.define("Ext.selection.DataViewModel",{extend:"Ext.selection.Model",requires:["Ext.util.KeyNav"],deselectOnContainerClick:!0,enableKeyNav:!0,constructor:function(a){this.addEvents("beforedeselect","beforeselect","deselect","select"),this.callParent(arguments)},bindComponent:function(a){var b=this,c={refresh:b.refresh,scope:b};b.view=a,b.bind(a.getStore()),a.on(a.triggerEvent,b.onItemClick,b),a.on(a.triggerCtEvent,b.onContainerClick,b),a.on(c),b.enableKeyNav&&b.initKeyNav(a)},onItemClick:function(a,b,c,d,e){this.selectWithEvent(b,e)},onContainerClick:function(){this.deselectOnContainerClick&&this.deselectAll()},initKeyNav:function(a){var b=this;if(!a.rendered){a.on("render",Ext.Function.bind(b.initKeyNav,b,[a],0),b,{single:!0});return}a.el.set({tabIndex:-1}),b.keyNav=Ext.create("Ext.util.KeyNav",a.el,{down:Ext.pass(b.onNavKey,[1],b),right:Ext.pass(b.onNavKey,[1],b),left:Ext.pass(b.onNavKey,[-1],b),up:Ext.pass(b.onNavKey,[-1],b),scope:b})},onNavKey:function(a){a=a||1;var b=this,c=b.view,d=b.getSelection()[0],e=b.view.store.getCount(),f;d?f=c.indexOf(c.getNode(d))+a:f=0,f<0?f=e-1:f>=e&&(f=0),b.select(f)},onSelectChange:function(a,b,c,d){var e=this,f=e.view,g=b?"select":"deselect";(c||e.fireEvent("before"+g,e,a))!==!1&&d()!==!1&&(b?f.onItemSelect(a):f.onItemDeselect(a),c||e.fireEvent(g,e,a))},destroy:function(){Ext.destroy(this.keyNav),this.callParent()}}),Ext.define("Ext.state.CookieProvider",{extend:"Ext.state.Provider",constructor:function(a){var b=this;b.path="/",b.expires=new Date((new Date).getTime()+6048e5),b.domain=null,b.secure=!1,b.callParent(arguments),b.state=b.readCookies()},set:function(a,b){var c=this;if(typeof b=="undefined"||b===null){c.clear(a);return}c.setCookie(a,b),c.callParent(arguments)},clear:function(a){this.clearCookie(a),this.callParent(arguments)},readCookies:function(){var a={},b=document.cookie+";",c=/\s?(.*?)=(.*?);/g,d=this.prefix,e=d.length,f,g,h;while((f=c.exec(b))!=null)g=f[1],h=f[2],g&&g.substring(0,e)==d&&(a[g.substr(e)]=this.decodeValue(h));return a},setCookie:function(a,b){var c=this;document.cookie=c.prefix+a+"="+c.encodeValue(b)+(c.expires==null?"":"; expires="+c.expires.toGMTString())+(c.path==null?"":"; path="+c.path)+(c.domain==null?"":"; domain="+c.domain)+(c.secure==1?"; secure":"")},clearCookie:function(a){var b=this;document.cookie=b.prefix+a+"=null; expires=Thu, 01-Jan-70 00:00:01 GMT"+(b.path==null?"":"; path="+b.path)+(b.domain==null?"":"; domain="+b.domain)+(b.secure==1?"; secure":"")}}),Ext.define("Ext.state.LocalStorageProvider",{extend:"Ext.state.Provider",alias:"state.localstorage",constructor:function(){var a=this;a.callParent(arguments),a.store=a.getStorageObject(),a.state=a.readLocalStorage()},readLocalStorage:function(){var a=this.store,b=0,c=a.length,d=this.prefix,e=d.length,f={},g;for(;b<c;++b)g=a.key(b),g.substring(0,e)==d&&(f[g.substr(e)]=this.decodeValue(a.getItem(g)));return f},set:function(a,b){var c=this;c.clear(a);if(typeof b=="undefined"||b===null)return;c.store.setItem(c.prefix+a,c.encodeValue(b)),c.callParent(arguments)},clear:function(a){this.store.removeItem(this.prefix+a),this.callParent(arguments)},getStorageObject:function(){try{var a="localStorage"in window&&window.localStorage!==null;if(a)return window.localStorage}catch(b){return!1}}}),Ext.define("Ext.util.Point",{extend:"Ext.util.Region",statics:{fromEvent:function(a){return a=a.changedTouches&&a.changedTouches.length>0?a.changedTouches[0]:a,new this(a.pageX,a.pageY)}},constructor:function(a,b){this.callParent([b,a,b,a])},toString:function(){return"Point["+this.x+","+this.y+"]"},equals:function(a){return this.x==a.x&&this.y==a.y},isWithin:function(a,b){return Ext.isObject(b)||(b={x:b,y:b}),this.x<=a.x+b.x&&this.x>=a.x-b.x&&this.y<=a.y+b.y&&this.y>=a.y-b.y},roundedEquals:function(a){return Math.round(this.x)==Math.round(a.x)&&Math.round(this.y)==Math.round(a.y)}},function(){this.prototype.translate=Ext.util.Region.prototype.translateBy}),Ext.define("Ext.LoadMask",{extend:"Ext.Component",alias:"widget.loadmask",mixins:{floating:"Ext.util.Floating"},uses:["Ext.data.StoreManager"],msg:"Loading...",msgCls:Ext.baseCSSPrefix+"mask-loading",useMsg:!0,disabled:!1,baseCls:Ext.baseCSSPrefix+"mask-msg",renderTpl:'<div style="position:relative" class="{msgCls}"></div>',modal:!0,floating:{shadow:"frame"},focusOnToFront:!1,constructor:function(a,b){var c=this;a.isComponent?(c.ownerCt=a,c.bindComponent(a)):(c.ownerCt=new Ext.Component({el:Ext.get(a),rendered:!0,componentLayoutCounter:1}),c.container=a),c.callParent([b]),c.store&&c.bindStore(c.store,!0),c.renderData={msgCls:c.msgCls},c.renderSelectors={msgEl:"div"}},bindComponent:function(a){this.mon(a,{resize:this.onComponentResize,scope:this})},afterRender:function(){this.callParent(arguments),this.container=this.floatParent.getContentTarget()},onComponentResize:function(){var a=this;a.rendered&&a.isVisible()&&(a.toFront(),a.center())},bindStore:function(a,b){var c=this;!b&&c.store&&(c.mun(c.store,{scope:c,beforeload:c.onBeforeLoad,load:c.onLoad,exception:c.onLoad}),a||(c.store=null)),a&&(a=Ext.data.StoreManager.lookup(a),c.mon(a,{scope:c,beforeload:c.onBeforeLoad,load:c.onLoad,exception:c.onLoad})),c.store=a,a&&a.isLoading()&&c.onBeforeLoad()},onDisable:function(){this.callParent(arguments),this.loading&&this.onLoad()},onBeforeLoad:function(){var a=this,b=a.ownerCt||a.floatParent,c;this.disabled||(b.componentLayoutCounter?Ext.Component.prototype.show.call(a):(c=b.afterComponentLayout,b.afterComponentLayout=function(){b.afterComponentLayout=c,c.apply(b,arguments),a.loading&&Ext.Component.prototype.show.call(a)}))},onHide:function(){var a=this;a.callParent(arguments),a.showOnParentShow=!0},onShow:function(){var a=this,b=a.msgEl;a.callParent(arguments),a.loading=!0,a.useMsg?b.show().update(a.msg):b.parent().hide()},afterShow:function(){this.callParent(arguments),this.center()},onLoad:function(){this.loading=!1,Ext.Component.prototype.hide.call(this)}}),Ext.define("Ext.view.AbstractView",{extend:"Ext.Component",alternateClassName:"Ext.view.AbstractView",requires:["Ext.LoadMask","Ext.data.StoreManager","Ext.CompositeElementLite","Ext.DomQuery","Ext.selection.DataViewModel"],inheritableStatics:{getRecord:function(a){return this.getBoundView(a).getRecord(a)},getBoundView:function(a){return Ext.getCmp(a.boundView)}},deferInitialRefresh:!0,itemCls:Ext.baseCSSPrefix+"dataview-item",loadingText:"Loading...",loadMask:!0,loadingUseMsg:!0,selectedItemCls:Ext.baseCSSPrefix+"item-selected",emptyText:"",deferEmptyText:!0,trackOver:!1,blockRefresh:!1,last:!1,triggerEvent:"itemclick",triggerCtEvent:"containerclick",addCmpEvents:function(){},initComponent:function(){var a=this,b=Ext.isDefined,c=a.itemTpl,d={};c&&(Ext.isArray(c)?c=c.join(""):Ext.isObject(c)&&(d=Ext.apply(d,c.initialConfig),c=c.html),a.itemSelector||(a.itemSelector="."+a.itemCls),c=Ext.String.format('<tpl for="."><div class="{0}">{1}</div></tpl>',a.itemCls,c),a.tpl=Ext.create("Ext.XTemplate",c,d)),a.callParent();if(Ext.isString(a.tpl)||Ext.isArray(a.tpl))a.tpl=Ext.create("Ext.XTemplate",a.tpl);a.addEvents("beforerefresh","refresh","viewready","itemupdate","itemadd","itemremove"),a.addCmpEvents(),a.store=Ext.data.StoreManager.lookup(a.store||"ext-empty-store"),a.all=new Ext.CompositeElementLite},onRender:function(){var a=this,b=a.loadMask,c={msg:a.loadingText,msgCls:a.loadingCls,useMsg:a.loadingUseMsg};a.callParent(arguments),b&&(Ext.isObject(b)&&(c=Ext.apply(c,b)),a.loadMask=Ext.create("Ext.LoadMask",a,c),a.loadMask.on({scope:a,beforeshow:a.onMaskBeforeShow,hide:a.onMaskHide}))},onMaskBeforeShow:function(){var a=this.loadingHeight;this.getSelectionModel().deselectAll(),a&&this.setCalculatedSize(undefined,a)},onMaskHide:function(){var a=this;!a.destroying&&a.loadingHeight&&a.setHeight(a.height)},afterRender:function(){this.callParent(arguments),this.getSelectionModel().bindComponent(this)},getSelectionModel:function(){var a=this,b="SINGLE";return a.selModel||(a.selModel={}),a.simpleSelect?b="SIMPLE":a.multiSelect&&(b="MULTI"),Ext.applyIf(a.selModel,{allowDeselect:a.allowDeselect,mode:b}),a.selModel.events||(a.selModel=Ext.create("Ext.selection.DataViewModel",a.selModel)),a.selModel.hasRelaySetup||(a.relayEvents(a.selModel,["selectionchange","beforeselect","beforedeselect","select","deselect"]),a.selModel.hasRelaySetup=!0),a.disableSelection&&(a.selModel.locked=!0),a.selModel},refresh:function(){var a=this,b,c;if(!a.rendered||a.isDestroyed)return;a.fireEvent("beforerefresh",a),b=a.getTargetEl(),c=a.store.getRange(),b.update(""),c.length<1?((!a.deferEmptyText||a.hasSkippedEmptyText)&&b.update(a.emptyText),a.all.clear()):(a.tpl.overwrite(b,a.collectData(c,0)),a.all.fill(Ext.query(a.getItemSelector(),b.dom)),a.updateIndexes(0)),a.selModel.refresh(),a.hasSkippedEmptyText=!0,a.fireEvent("refresh",a),a.viewReady||(a.viewReady=!0,a.fireEvent("viewready",a))},prepareData:function(a,b,c){return c&&Ext.apply(a,c.getAssociatedData()),a},collectData:function(a,b){var c=[],d=0,e=a.length,f;for(;d<e;d++)f=a[d],c[c.length]=this.prepareData(f[f.persistenceProperty],b+d,f);return c},bufferRender:function(a,b){var c=document.createElement("div");return this.tpl.overwrite(c,this.collectData(a,b)),Ext.query(this.getItemSelector(),c)},onUpdate:function(a,b){var c=this,d=c.store.indexOf(b),e;d>-1&&(e=c.bufferRender([b],d)[0],c.getNode(b)&&(c.all.replaceElement(d,e,!0),c.updateIndexes(d,d),c.selModel.refresh(),c.fireEvent("itemupdate",b,d,e)))},onAdd:function(a,b,c){var d=this,e;if(d.all.getCount()===0){d.refresh();return}e=d.bufferRender(b,c),d.doAdd(e,b,c),d.selModel.refresh(),d.updateIndexes(c),d.fireEvent("itemadd",b,c,e)},doAdd:function(a,b,c){var d=this.all;c<d.getCount()?d.item(c).insertSibling(a,"before",!0):d.last().insertSibling(a,"after",!0),Ext.Array.insert(d.elements,c,a)},onRemove:function(a,b,c){var d=this;d.doRemove(b,c),d.updateIndexes(c),d.store.getCount()===0&&d.refresh(),d.fireEvent("itemremove",b,c)},doRemove:function(a,b){this.all.removeElement(b,!0)},refreshNode:function(a){this.onUpdate(this.store,this.store.getAt(a))},updateIndexes:function(a,b){var c=this.all.elements,d=this.store.getRange(),e;a=a||0,b=b||(b===0?0:c.length-1);for(e=a;e<=b;e++)c[e].viewIndex=e,c[e].viewRecordId=d[e].internalId,c[e].boundView||(c[e].boundView=this.id)},getStore:function(){return this.store},bindStore:function(a,b){var c=this,d;!b&&c.store&&(a!==c.store&&c.store.autoDestroy?c.store.destroyStore():c.mun(c.store,{scope:c,datachanged:c.onDataChanged,add:c.onAdd,remove:c.onRemove,update:c.onUpdate,clear:c.refresh}),a||(c.loadMask&&c.loadMask.bindStore&&c.loadMask.bindStore(null),c.store=null)),a&&(a=Ext.data.StoreManager.lookup(a),c.mon(a,{scope:c,datachanged:c.onDataChanged,add:c.onAdd,remove:c.onRemove,update:c.onUpdate,clear:c.refresh}),c.loadMask&&c.loadMask.bindStore&&(Ext.Array.contains(a.alias,"store.node")?d=this.ownerCt.store:d=a,c.loadMask.bindStore(d))),c.viewReady=!1,c.store=a,c.getSelectionModel().bind(a),a&&(b&&c.deferInitialRefresh?Ext.Function.defer(function(){c.isDestroyed||c.refresh(!0)},1):c.refresh(!0))},onDataChanged:function(){this.blockRefresh!==!0&&this.refresh.apply(this,arguments)},findItemByChild:function(a){return Ext.fly(a).findParent(this.getItemSelector(),this.getTargetEl())},findTargetByEvent:function(a){return a.getTarget(this.getItemSelector(),this.getTargetEl())},getSelectedNodes:function(){var a=[],b=this.selModel.getSelection(),c=b.length,d=0;for(;d<c;d++)a.push(this.getNode(b[d]));return a},getRecords:function(a){var b=[],c=0,d=a.length,e=this.store.data;for(;c<d;c++)b[b.length]=e.getByKey(a[c].viewRecordId);return b},getRecord:function(a){return this.store.data.getByKey(Ext.getDom(a).viewRecordId)},isSelected:function(a){var b=this.getRecord(a);return this.selModel.isSelected(b)},select:function(a,b,c){this.selModel.select(a,b,c)},deselect:function(a,b){this.selModel.deselect(a,b)},getNode:function(a){return this.rendered?Ext.isString(a)?document.getElementById(a):Ext.isNumber(a)?this.all.elements[a]:a instanceof Ext.data.Model?this.getNodeByRecord(a):a:null},getNodeByRecord:function(a){var b=this.all.elements,c=b.length,d=0;for(;d<c;d++)if(b[d].viewRecordId===a.internalId)return b[d];return null},getNodes:function(a,b){var c=this.all.elements,d=[],e;a=a||0,b=Ext.isDefined(b)?b:Math.max(c.length-1,0);if(a<=b)for(e=a;e<=b&&c[e];e++)d.push(c[e]);else for(e=a;e>=b&&c[e];e--)d.push(c[e]);return d},indexOf:function(a){return a=this.getNode(a),Ext.isNumber(a.viewIndex)?a.viewIndex:this.all.indexOf(a)},onDestroy:function(){var a=this;a.all.clear(),a.callParent(),a.bindStore(null),a.selModel.destroy()},onItemSelect:function(a){var b=this.getNode(a);b&&Ext.fly(b).addCls(this.selectedItemCls)},onItemDeselect:function(a){var b=this.getNode(a);b&&Ext.fly(b).removeCls(this.selectedItemCls)},getItemSelector:function(){return this.itemSelector}},function(){Ext.deprecate("extjs","4.0",function(){Ext.view.AbstractView.override({getSelectionCount:function(){return Ext.global.console&&Ext.global.console.warn("DataView: getSelectionCount will be removed, please interact with the Ext.selection.DataViewModel"),this.selModel.getSelection().length},getSelectedRecords:function(){return Ext.global.console&&Ext.global.console.warn("DataView: getSelectedRecords will be removed, please interact with the Ext.selection.DataViewModel"),this.selModel.getSelection()},select:function(a,b,c){Ext.global.console&&Ext.global.console.warn("DataView: select will be removed, please access select through a DataView's SelectionModel, ie: view.getSelectionModel().select()");var d=this.getSelectionModel();return d.select.apply(d,arguments)},clearSelections:function(){Ext.global.console&&Ext.global.console.warn("DataView: clearSelections will be removed, please access deselectAll through DataView's SelectionModel, ie: view.getSelectionModel().deselectAll()");var a=this.getSelectionModel();return a.deselectAll()}})})}),Ext.define("Ext.Action",{constructor:function(a){this.initialConfig=a,this.itemId=a.itemId=a.itemId||a.id||Ext.id(),this.items=[]},isAction:!0,setText:function(a){this.initialConfig.text=a,this.callEach("setText",[a])},getText:function(){return this.initialConfig.text},setIconCls:function(a){this.initialConfig.iconCls=a,this.callEach("setIconCls",[a])},getIconCls:function(){return this.initialConfig.iconCls},setDisabled:function(a){this.initialConfig.disabled=a,this.callEach("setDisabled",[a])},enable:function(){this.setDisabled(!1)},disable:function(){this.setDisabled(!0)},isDisabled:function(){return this.initialConfig.disabled},setHidden:function(a){this.initialConfig.hidden=a,this.callEach("setVisible",[!a])},show:function(){this.setHidden(!1)},hide:function(){this.setHidden(!0)},isHidden:function(){return this.initialConfig.hidden},setHandler:function(a,b){this.initialConfig.handler=a,this.initialConfig.scope=b,this.callEach("setHandler",[a,b])},each:function(a,b){Ext.each(this.items,a,b)},callEach:function(a,b){var c=this.items,d=0,e=c.length;for(;d<e;d++)c[d][a].apply(c[d],b)},addComponent:function(a){this.items.push(a),a.on("destroy",this.removeComponent,this)},removeComponent:function(a){Ext.Array.remove(this.items,a)},execute:function(){this.initialConfig.handler.apply(this.initialConfig.scope||Ext.global,arguments)}}),Ext.define("Ext.layout.component.Editor",{alias:["layout.editor"],extend:"Ext.layout.component.Component",onLayout:function(a,b){var c=this,d=c.owner,e=d.autoSize;e===!0&&(e={width:"field",height:"field"}),e&&(a=c.getDimension(d,e.width,"Width",a),b=c.getDimension(d,e.height,"Height",b)),c.setTargetSize(a,b),d.field.setSize(a,b)},getDimension:function(a,b,c,d){var e="get"+c;switch(b){case"boundEl":return a.boundEl[e]();case"field":return a.field[e]();default:return d}}}),Ext.define("Ext.Editor",{extend:"Ext.Component",alias:"widget.editor",requires:["Ext.layout.component.Editor"],componentLayout:"editor",allowBlur:!0,revertInvalid:!0,value:"",alignment:"c-c?",offsets:[0,0],shadow:"frame",constrain:!1,swallowKeys:!0,completeOnEnter:!0,cancelOnEsc:!0,updateEl:!1,hidden:!0,baseCls:Ext.baseCSSPrefix+"editor",initComponent:function(){var a=this,b=a.field=Ext.ComponentManager.create(a.field,"textfield");Ext.apply(b,{inEditor:!0,msgTarget:b.msgTarget=="title"?"title":"qtip"}),a.mon(b,{scope:a,blur:{fn:a.onBlur,delay:1},specialkey:a.onSpecialKey}),b.grow&&a.mon(b,"autosize",a.onAutoSize,a,{delay:1}),a.floating={constrain:a.constrain},a.callParent(arguments),a.addEvents("beforestartedit","startedit","beforecomplete","complete","canceledit","specialkey")},onAutoSize:function(){this.doComponentLayout()},onRender:function(a,b){var c=this,d=c.field,e=d.inputEl;c.callParent(arguments),d.render(c.el),e&&(e.dom.name="",c.swallowKeys&&e.swallowEvent(["keypress","keydown"]))},onSpecialKey:function(a,b){var c=this,d=b.getKey(),e=c.completeOnEnter&&d==b.ENTER,f=c.cancelOnEsc&&d==b.ESC;if(e||f)b.stopEvent(),Ext.defer(function(){e?c.completeEdit():c.cancelEdit(),a.triggerBlur&&a.triggerBlur()},10);this.fireEvent("specialkey",this,a,b)},startEdit:function(a,b){var c=this,d=c.field;c.completeEdit(),c.boundEl=Ext.get(a),b=Ext.isDefined(b)?b:c.boundEl.dom.innerHTML,c.rendered||c.render(c.parentEl||document.body),c.fireEvent("beforestartedit",c,c.boundEl,b)!==!1&&(c.startValue=b,c.show(),d.reset(),d.setValue(b),c.realign(!0),d.focus(!1,10),d.autoSize&&d.autoSize(),c.editing=!0)},realign:function(a){var b=this;a===!0&&b.doComponentLayout(),b.alignTo(b.boundEl,b.alignment,b.offsets)},completeEdit:function(a){var b=this,c=b.field,d;if(!b.editing)return;c.assertValue&&c.assertValue(),d=b.getValue();if(!c.isValid()){b.revertInvalid!==!1&&b.cancelEdit(a);return}if(String(d)===String(b.startValue)&&b.ignoreNoChange){b.hideEdit(a);return}b.fireEvent("beforecomplete",b,d,b.startValue)!==!1&&(d=b.getValue(),b.updateEl&&b.boundEl&&b.boundEl.update(d),b.hideEdit(a),b.fireEvent("complete",b,d,b.startValue))},onShow:function(){var a=this;a.callParent(arguments),a.hideEl!==!1&&a.boundEl.hide(),a.fireEvent("startedit",a.boundEl,a.startValue)},cancelEdit:function(a){var b=this,c=b.startValue,d;b.editing&&(d=b.getValue(),b.setValue(c),b.hideEdit(a),b.fireEvent("canceledit",b,d,c))},hideEdit:function(a){a!==!0&&(this.editing=!1,this.hide())},onBlur:function(){var a=this;a.allowBlur===!0&&a.editing&&a.selectSameEditor!==!0&&a.completeEdit()},onHide:function(){var a=this,b=a.field;if(a.editing){a.completeEdit();return}b.blur(),b.collapse&&b.collapse(),a.hideEl!==!1&&a.boundEl.show(),a.callParent(arguments)},setValue:function(a){this.field.setValue(a)},getValue:function(){return this.field.getValue()},beforeDestroy:function(){var a=this;Ext.destroy(a.field),delete a.field,delete a.parentEl,delete a.boundEl,a.callParent(arguments)}}),Ext.define("Ext.Img",{extend:"Ext.Component",alias:["widget.image","widget.imagecomponent"],src:"",getElConfig:function(){return{tag:"img",src:this.src}},initRenderTpl:Ext.emptyFn,setSrc:function(a){var b=this,c=b.el;b.src=a,c&&(c.dom.src=a)}}),Ext.define("Ext.Layer",{uses:["Ext.Shadow"],statics:{shims:[]},extend:"Ext.Element",constructor:function(a,b){a=a||{};var c=this,d=Ext.DomHelper,e=a.parentEl,f=e?Ext.getDom(e):document.body,g=a.hideMode;b&&(c.dom=Ext.getDom(b)),c.dom?(c.addCls(Ext.baseCSSPrefix+"layer"),c.dom.parentNode||f.appendChild(c.dom)):c.dom=d.append(f,a.dh||{tag:"div",cls:Ext.baseCSSPrefix+"layer"}),a.cls&&c.addCls(a.cls),c.constrain=a.constrain!==!1,g?(c.setVisibilityMode(Ext.Element[g.toUpperCase()]),c.visibilityMode==Ext.Element.ASCLASS&&(c.visibilityCls=a.visibilityCls)):a.useDisplay?c.setVisibilityMode(Ext.Element.DISPLAY):c.setVisibilityMode(Ext.Element.VISIBILITY),a.id?c.id=c.dom.id=a.id:c.id=Ext.id(c.dom),c.position("absolute"),a.shadow?(c.shadowOffset=a.shadowOffset||4,c.shadow=Ext.create("Ext.Shadow",{offset:c.shadowOffset,mode:a.shadow}),c.disableShadow()):c.shadowOffset=0,c.useShim=a.shim!==!1&&Ext.useShims,a.hidden===!0?c.hide():c.show()},getZIndex:function(){return parseInt((this.getShim()||this).getStyle("z-index"),10)},getShim:function(){var a=this,b,c;return a.useShim?(a.shim||(b=a.self.shims.shift(),b||(b=a.createShim(),b.enableDisplayMode("block"),b.hide()),c=a.dom.parentNode,b.dom.parentNode!=c&&c.insertBefore(b.dom,a.dom),a.shim=b),a.shim):null},hideShim:function(){var a=this;a.shim&&(a.shim.setDisplayed(!1),a.self.shims.push(a.shim),delete a.shim)},disableShadow:function(){var a=this;a.shadow&&!a.shadowDisabled&&(a.shadowDisabled=!0,a.shadow.hide(),a.lastShadowOffset=a.shadowOffset,a.shadowOffset=0)},enableShadow:function(a){var b=this;b.shadow&&b.shadowDisabled&&(b.shadowDisabled=!1,b.shadowOffset=b.lastShadowOffset,delete b.lastShadowOffset,a&&b.sync(!0))},sync:function(a){var b=this,c=b.shadow,d,e,f;if(!b.updating&&b.isVisible()&&(c||b.useShim)){var g=b.getShim(),h=b.getLeft(!0),i=b.getTop(!0),j=b.dom.offsetWidth,k=b.dom.offsetHeight,l;c&&!b.shadowDisabled?(a&&!c.isVisible()?c.show(b):c.realign(h,i,j,k),g&&(l=g.getStyle("z-index"),l>b.zindex&&b.shim.setStyle("z-index",b.zindex-2),g.show(),c.isVisible()?(d=c.el.getXY(),e=g.dom.style,f=c.el.getSize(),Ext.supports.CSS3BoxShadow&&(f.height+=6,f.width+=4,d[0]-=2,d[1]-=4),e.left=d[0]+"px",e.top=d[1]+"px",e.width=f.width+"px",e.height=f.height+"px"):(g.setSize(j,k),g.setLeftTop(h,i)))):g&&(l=g.getStyle("z-index"),l>b.zindex&&b.shim.setStyle("z-index",b.zindex-2),g.show(),g.setSize(j,k),g.setLeftTop(h,i))}return b},remove:function(){this.hideUnders(),this.callParent()},beginUpdate:function(){this.updating=!0},endUpdate:function(){this.updating=!1,this.sync(!0)},hideUnders:function(){this.shadow&&this.shadow.hide(),this.hideShim()},constrainXY:function(){if(this.constrain){var a=Ext.Element.getViewWidth(),b=Ext.Element.getViewHeight(),c=Ext.getDoc().getScroll(),d=this.getXY(),e=d[0],f=d[1],g=this.shadowOffset,h=this.dom.offsetWidth+g,i=this.dom.offsetHeight+g,j=!1;e+h>a+c.left&&(e=a-h-g,j=!0),f+i>b+c.top&&(f=b-i-g,j=!0),e<c.left&&(e=c.left,j=!0),f<c.top&&(f=c.top,j=!0),j&&(Ext.Layer.superclass.setXY.call(this,[e,f]),this.sync())}return this},getConstrainOffset:function(){return this.shadowOffset},setVisible:function(a,b,c,d,e){var f=this,g;return g=function(){a&&f.sync(!0),d&&d()},a||f.hideUnders(!0),f.callParent([a,b,c,d,e]),b||g(),f},beforeFx:function(){return this.beforeAction(),this.callParent(arguments)},afterFx:function(){this.callParent(arguments),this.sync(this.isVisible())},beforeAction:function(){!this.updating&&this.shadow&&this.shadow.hide()},setLeft:function(a){return this.callParent(arguments),this.sync()},setTop:function(a){return this.callParent(arguments),this.sync()},setLeftTop:function(a,b){return this.callParent(arguments),this.sync()},setXY:function(a,b,c,d,e){var f=this;return d=f.createCB(d),f.fixDisplay(),f.beforeAction(),f.callParent([a,b,c,d,e]),b||d(),f},createCB:function(a){var b=this,c=b.shadow&&b.shadow.isVisible();return function(){b.constrainXY(),b.sync(c),a&&a()}},setX:function(a,b,c,d,e){return this.setXY([a,this.getY()],b,c,d,e),this},setY:function(a,b,c,d,e){return this.setXY([this.getX(),a],b,c,d,e),this},setSize:function(a,b,c,d,e,f){var g=this;return e=g.createCB(e),g.beforeAction(),g.callParent([a,b,c,d,e,f]),c||e(),g},setWidth:function(a,b,c,d,e){var f=this;return d=f.createCB(d),f.beforeAction(),f.callParent([a,b,c,d,e]),b||d(),f},setHeight:function(a,b,c,d,e){var f=this;return d=f.createCB(d),f.beforeAction(),f.callParent([a,b,c,d,e]),b||d(),f},setBounds:function(a,b,c,d,e,f,g,h){var i=this;return g=i.createCB(g),i.beforeAction(),e?i.callParent([a,b,c,d,e,f,g,h]):(Ext.Layer.superclass.setXY.call(i,[a,b]),Ext.Layer.superclass.setSize.call(i,c,d),g()),i},setZIndex:function(a){var b=this;return b.zindex=a,b.getShim()&&b.shim.setStyle("z-index",a++),b.shadow&&b.shadow.setZIndex(a++),b.setStyle("z-index",a)},setOpacity:function(a){return this.shadow&&this.shadow.setOpacity(a),this.callParent(arguments)}}),Ext.define("Ext.layout.component.ProgressBar",{alias:["layout.progressbar"],extend:"Ext.layout.component.Component",type:"progressbar",onLayout:function(a,b){var c=this,d=c.owner,e=d.textEl;c.setElementSize(d.el,a,b),e.setWidth(d.el.getWidth(!0)),c.callParent([a,b]),d.updateProgress(d.value)}}),Ext.define("Ext.ProgressBar",{extend:"Ext.Component",alias:"widget.progressbar",requires:["Ext.Template","Ext.CompositeElement","Ext.TaskManager","Ext.layout.component.ProgressBar"],uses:["Ext.fx.Anim"],baseCls:Ext.baseCSSPrefix+"progress",config:{animate:!1,text:""},waitTimer:null,renderTpl:['<div class="{baseCls}-text {baseCls}-text-back">',"<div>&#160;</div>","</div>",'<div id="{id}-bar" class="{baseCls}-bar">','<div class="{baseCls}-text">',"<div>&#160;</div>","</div>","</div>"],componentLayout:"progressbar",initComponent:function(){this.callParent(),this.addChildEls("bar"),this.addEvents("update")},afterRender:function(){var a=this;a.textEl=a.textEl?Ext.get(a.textEl):a.el.select("."+a.baseCls+"-text"),a.callParent(arguments),a.value?a.updateProgress(a.value,a.text):a.updateText(a.text)},updateProgress:function(a,b,c){var d=this,e;return d.value=a||0,b&&d.updateText(b),d.rendered&&!d.isDestroyed&&(d.isVisible(!0)?(e=Math.floor(d.value*d.el.getWidth(!0)),Ext.isForcedBorderBox&&(e+=d.bar.getBorderWidth("lr")),c===!0||c!==!1&&d.animate?(d.bar.stopAnimation(),d.bar.animate(Ext.apply({to:{width:e+"px"}},d.animate))):d.bar.setWidth(e)):d.doComponentLayout()),d.fireEvent("update",d,d.value,b),d},updateText:function(a){var b=this;return b.text=a,b.rendered&&b.textEl.update(b.text),b},applyText:function(a){this.updateText(a)},wait:function(a){var b=this;return b.waitTimer||(scope=b,a=a||{},b.updateText(a.text),b.waitTimer=Ext.TaskManager.start({run:function(c){var d=a.increment||10;c-=1,b.updateProgress(((c+d)%d+1)*(100/d)*.01,null,a.animate)},interval:a.interval||1e3,duration:a.duration,onStop:function(){a.fn&&a.fn.apply(a.scope||b),b.reset()},scope:scope})),b},isWaiting:function(){return this.waitTimer!==null},reset:function(a){var b=this;return b.updateProgress(0),b.clearTimer(),a===!0&&b.hide(),b},clearTimer:function(){var a=this;a.waitTimer&&(a.waitTimer.onStop=null,Ext.TaskManager.stop(a.waitTimer),a.waitTimer=null)},onDestroy:function(){var a=this;a.clearTimer(),a.rendered&&(a.textEl.isComposite&&a.textEl.clear(),Ext.destroyMembers(a,"textEl","progressBar")),a.callParent()}}),Ext.define("Ext.ShadowPool",{singleton:!0,requires:["Ext.DomHelper"],markup:function(){return Ext.supports.CSS3BoxShadow?'<div class="'+Ext.baseCSSPrefix+'css-shadow" role="presentation"></div>':Ext.isIE?'<div class="'+Ext.baseCSSPrefix+'ie-shadow" role="presentation"></div>':'<div class="'+Ext.baseCSSPrefix+'frame-shadow" role="presentation"><div class="xst" role="presentation"><div class="xstl" role="presentation"></div><div class="xstc" role="presentation"></div><div class="xstr" role="presentation"></div></div><div class="xsc" role="presentation"><div class="xsml" role="presentation"></div><div class="xsmc" role="presentation"></div><div class="xsmr" role="presentation"></div></div><div class="xsb" role="presentation"><div class="xsbl" role="presentation"></div><div class="xsbc" role="presentation"></div><div class="xsbr" role="presentation"></div></div></div>'}(),shadows:[],pull:function(){var a=this.shadows.shift();return a||(a=Ext.get(Ext.DomHelper.insertHtml("beforeBegin",document.body.firstChild,this.markup)),a.autoBoxAdjust=!1),a},push:function(a){this.shadows.push(a)},reset:function(){Ext.Array.each(this.shadows,function(a){a.remove()}),this.shadows=[]}}),Ext.define("Ext.Shadow",{requires:["Ext.ShadowPool"],constructor:function(a){var b=this,c={h:0},d,e;Ext.apply(b,a),Ext.isString(b.mode)||(b.mode=b.defaultMode),d=b.offset,e=Math.floor(d/2),b.opacity=50;switch(b.mode.toLowerCase()){case"drop":Ext.supports.CSS3BoxShadow?(c.w=c.h=-d,c.l=c.t=d):(c.w=0,c.l=c.t=d,c.t-=1,Ext.isIE&&(c.l-=d+e,c.t-=d+e,c.w-=e,c.h-=e,c.t+=1));break;case"sides":Ext.supports.CSS3BoxShadow?(c.h-=d,c.t=d,c.l=c.w=0):(c.w=d*2,c.l=-d,c.t=d-1,Ext.isIE&&(c.l-=d-e,c.t-=d+e,c.l+=1,c.w-=(d-e)*2,c.w-=e+1,c.h-=1));break;case"frame":if(!Ext.supports.CSS3BoxShadow){c.w=c.h=d*2,c.l=c.t=-d,c.t+=1,c.h-=2,Ext.isIE&&(c.l-=d-e,c.t-=d-e,c.l+=1,c.w-=d+e+1,c.h-=d+e,c.h+=1);break}c.l=c.w=c.t=0}b.adjusts=c},offset:4,defaultMode:"drop",show:function(a){var b=this,c;a=Ext.get(a),b.el||(b.el=Ext.ShadowPool.pull(),b.el.dom.nextSibling!=a.dom&&b.el.insertBefore(a)),c=parseInt(a.getStyle("z-index"),10)-1||0,b.el.setStyle("z-index",b.zIndex||c),Ext.isIE&&!Ext.supports.CSS3BoxShadow&&(b.el.dom.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity="+b.opacity+") progid:DXImageTransform.Microsoft.Blur(pixelradius="+b.offset+")"),b.realign(a.getLeft(!0),a.getTop(!0),a.dom.offsetWidth,a.dom.offsetHeight),b.el.dom.style.display="block"},isVisible:function(){return this.el?!0:!1},realign:function(a,b,c,d){if(!this.el)return;var e=this.adjusts,f=this.el.dom,g=f.style,h,i,j,k,l,m;g.left=a+e.l+"px",g.top=b+e.t+"px",h=Math.max(c+e.w,0),i=Math.max(d+e.h,0),l=h+"px",m=i+"px";if(g.width!=l||g.height!=m)g.width=l,g.height=m,Ext.supports.CSS3BoxShadow?g.boxShadow="0 0 "+this.offset+"px 0 #888":Ext.isIE||(j=f.childNodes,k=Math.max(0,h-12)+"px",j[0].childNodes[1].style.width=k,j[1].childNodes[1].style.width=k,j[2].childNodes[1].style.width=k,j[1].style.height=Math.max(0,i-12)+"px")},hide:function(){var a=this;a.el&&(a.el.dom.style.display="none",Ext.ShadowPool.push(a.el),delete a.el)},setZIndex:function(a){this.zIndex=a,this.el&&this.el.setStyle("z-index",a)},setOpacity:function(a){this.el&&(Ext.isIE&&!Ext.supports.CSS3BoxShadow&&(a=Math.floor(a*100/2)/100),this.opacity=a,this.el.setOpacity(a))}}),Ext.define("Ext.button.Split",{alias:"widget.splitbutton",extend:"Ext.button.Button",alternateClassName:"Ext.SplitButton",arrowCls:"split",split:!0,initComponent:function(){this.callParent(),this.addEvents("arrowclick")},setArrowHandler:function(a,b){this.arrowHandler=a,this.scope=b},onClick:function(a,b){var c=this;a.preventDefault(),c.disabled||(c.overMenuTrigger?(c.maybeShowMenu(),c.fireEvent("arrowclick",c,a),c.arrowHandler&&c.arrowHandler.call(c.scope||c,c,a)):(c.doToggle(),c.fireHandler()))}}),Ext.define("Ext.button.Cycle",{alias:"widget.cycle",extend:"Ext.button.Split",alternateClassName:"Ext.CycleButton",getButtonText:function(a){var b=this,c="";return a&&b.showText===!0?(b.prependText&&(c+=b.prependText),c+=a.text,c):b.text},setActiveItem:function(a,b){var c=this;Ext.isObject(a)||(a=c.menu.getComponent(a)),a&&(c.rendered?(c.setText(c.getButtonText(a)),c.setIconCls(a.iconCls)):(c.text=c.getButtonText(a),c.iconCls=a.iconCls),c.activeItem=a,a.checked||a.setChecked(!0,!1),c.forceIcon&&c.setIconCls(c.forceIcon),b||c.fireEvent("change",c,a))},getActiveItem:function(){return this.activeItem},initComponent:function(){var a=this,b=0,c;a.addEvents("change"),a.changeHandler&&(a.on("change",a.changeHandler,a.scope||a),delete a.changeHandler),c=(a.menu.items||[]).concat(a.items||[]),a.menu=Ext.applyIf({cls:Ext.baseCSSPrefix+"cycle-menu",items:[]},a.menu),Ext.each(c,function(c,d){c=Ext.applyIf({group:a.id,itemIndex:d,checkHandler:a.checkHandler,scope:a,checked:c.checked||!1},c),a.menu.items.push(c),c.checked&&(b=d)}),a.itemCount=a.menu.items.length,a.callParent(arguments),a.on("click",a.toggleSelected,a),a.setActiveItem(b,a),a.width&&a.showText&&a.addCls(Ext.baseCSSPrefix+"cycle-fixed-width")},checkHandler:function(a,b){b&&this.setActiveItem(a)},toggleSelected:function(){var a=this,b=a.menu,c;c=a.activeItem.next(":not([disabled])")||b.items.getAt(0),c.setChecked(!0)}}),Ext.define("Ext.container.ButtonGroup",{extend:"Ext.panel.Panel",alias:"widget.buttongroup",alternateClassName:"Ext.ButtonGroup",baseCls:Ext.baseCSSPrefix+"btn-group",layout:{type:"table"},defaultType:"button",frame:!0,frameHeader:!1,internalDefaults:{removeMode:"container",hideParent:!0},initComponent:function(){var a=this,b=a.columns;a.noTitleCls=a.baseCls+"-notitle",b&&(a.layout=Ext.apply({},{columns:b},a.layout)),a.title||a.addCls(a.noTitleCls),a.callParent(arguments)},afterLayout:function(){var a=this;a.callParent(arguments);if(a.layout.table&&(Ext.isIEQuirks||Ext.isIE6)&&!a.width){var b=a.getTargetEl();b.setWidth(a.layout.table.offsetWidth+b.getPadding("lr"))}Ext.isIE7&&a.el.repaint()},afterRender:function(){var a=this;a.header&&(delete a.header.items.items[0].flex,a.suspendLayout=!0,a.header.insert(1,{xtype:"component",ui:a.ui,flex:1}),a.header.insert(0,{xtype:"component",ui:a.ui,flex:1}),a.suspendLayout=!1),a.callParent(arguments)},onBeforeAdd:function(a){a.is("button")&&(a.ui=a.ui+"-toolbar"),this.callParent(arguments)},applyDefaults:function(a){if(!Ext.isString(a)){a=this.callParent(arguments);var b=this.internalDefaults;a.events?(Ext.applyIf(a.initialConfig,b),Ext.apply(a,b)):Ext.applyIf(a,b)}return a}}),Ext.define("Ext.container.Viewport",{extend:"Ext.container.Container",alias:"widget.viewport",requires:["Ext.EventManager"],alternateClassName:"Ext.Viewport",isViewport:!0,ariaRole:"application",initComponent:function(){var a=this,b=Ext.fly(document.body.parentNode),c;a.callParent(arguments),b.addCls(Ext.baseCSSPrefix+"viewport"),a.autoScroll&&b.setStyle("overflow","auto"),a.el=c=Ext.getBody(),c.setHeight=Ext.emptyFn,c.setWidth=Ext.emptyFn,c.setSize=Ext.emptyFn,c.dom.scroll="no",a.allowDomMove=!1,Ext.EventManager.onWindowResize(a.fireResize,a),a.renderTo=a.el,a.width=Ext.Element.getViewportWidth(),a.height=Ext.Element.getViewportHeight()},fireResize:function(a,b){this.setSize(a,b)}}),Ext.define("Ext.dd.DDTarget",{extend:"Ext.dd.DragDrop",constructor:function(a,b,c){a&&this.initTarget(a,b,c)},getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return"DDTarget "+this.id}}),Ext.define("Ext.dd.DragTracker",{uses:["Ext.util.Region"],mixins:{observable:"Ext.util.Observable"},active:!1,trackOver:!1,tolerance:5,autoStart:!1,constructor:function(a){Ext.apply(this,a),this.addEvents("mouseover","mouseout","mousedown","mouseup","mousemove","beforedragstart","dragstart","dragend","drag"),this.dragRegion=Ext.create("Ext.util.Region",0,0,0,0),this.el&&this.initEl(this.el),this.mixins.observable.constructor.call(this),this.disabled&&this.disable()},initEl:function(a){this.el=Ext.get(a),this.handle=Ext.get(this.delegate),this.delegate=this.handle?undefined:this.delegate,this.handle||(this.handle=this.el),this.mon(this.handle,{mousedown:this.onMouseDown,delegate:this.delegate,scope:this}),(this.trackOver||this.overCls)&&this.mon(this.handle,{mouseover:this.onMouseOver,mouseout:this.onMouseOut,delegate:this.delegate,scope:this})},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},destroy:function(){this.clearListeners(),delete this.el},onMouseOver:function(a,b){var c=this;!c.disabled&&(Ext.EventManager.contains(a)||c.delegate)&&(c.mouseIsOut=!1,c.overCls&&c.el.addCls(c.overCls),c.fireEvent("mouseover",c,a,c.delegate?a.getTarget(c.delegate,b):c.handle))},onMouseOut:function(a){this.mouseIsDown?this.mouseIsOut=!0:(this.overCls&&this.el.removeCls(this.overCls),this.fireEvent("mouseout",this,a))},onMouseDown:function(a,b){if(this.disabled||a.dragTracked)return;this.dragTarget=this.delegate?b:this.handle.dom,this.startXY=this.lastXY=a.getXY(),this.startRegion=Ext.fly(this.dragTarget).getRegion();if(this.fireEvent("mousedown",this,a)===!1||this.fireEvent("beforedragstart",this,a)===!1||this.onBeforeStart(a)===!1)return;this.mouseIsDown=!0,a.dragTracked=!0,this.preventDefault!==!1&&a.preventDefault(),Ext.getDoc().on({scope:this,mouseup:this.onMouseUp,mousemove:this.onMouseMove,selectstart:this.stopSelect}),this.autoStart&&(this.timer=Ext.defer(this.triggerStart,this.autoStart===!0?1e3:this.autoStart,this,[a]))},onMouseMove:function(a,b){if(this.active&&Ext.isIE&&!a.browserEvent.button){a.preventDefault(),this.onMouseUp(a);return}a.preventDefault();var c=a.getXY(),d=this.startXY;this.lastXY=c;if(!this.active){if(!(Math.max(Math.abs(d[0]-c[0]),Math.abs(d[1]-c[1]))>this.tolerance))return;this.triggerStart(a)}this.fireEvent("mousemove",this,a)===!1?this.onMouseUp(a):(this.onDrag(a),this.fireEvent("drag",this,a))},onMouseUp:function(a){this.mouseIsDown=!1,this.mouseIsOut&&(this.mouseIsOut=!1,this.onMouseOut(a)),a.preventDefault(),this.fireEvent("mouseup",this,a),this.endDrag(a)},endDrag:function(a){var b=Ext.getDoc(),c=this.active;b.un("mousemove",this.onMouseMove,this),b.un("mouseup",this.onMouseUp,this),b.un("selectstart",this.stopSelect,this),this.clearStart(),this.active=!1,c&&(this.onEnd(a),this.fireEvent("dragend",this,a)),delete this._constrainRegion,delete Ext.EventObject.dragTracked},triggerStart:function(a){this.clearStart(),this.active=!0,this.onStart(a),this.fireEvent("dragstart",this,a)},clearStart:function(){this.timer&&(clearTimeout(this.timer),delete this.timer)},stopSelect:function(a){return a.stopEvent(),!1},onBeforeStart:function(a){},onStart:function(a){},onDrag:function(a){},onEnd:function(a){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getConstrainRegion:function(){if(this.constrainTo){if(this.constrainTo instanceof Ext.util.Region)return this.constrainTo;this._constrainRegion||(this._constrainRegion=Ext.fly(this.constrainTo).getViewRegion())}else this._constrainRegion||(this._constrainRegion=this.getDragCt().getViewRegion());return this._constrainRegion},getXY:function(a){return a?this.constrainModes[a](this,this.lastXY):this.lastXY},getOffset:function(a){var b=this.getXY(a),c=this.startXY;return[b[0]-c[0],b[1]-c[1]]},constrainModes:{point:function(a,b){var c=a.dragRegion,d=a.getConstrainRegion();return d?(c.x=c.left=c[0]=c.right=b[0],c.y=c.top=c[1]=c.bottom=b[1],c.constrainTo(d),[c.left,c.top]):b},dragTarget:function(a,b){var c=a.startXY,d=a.startRegion.copy(),e=a.getConstrainRegion(),f;return e?(d.translateBy(b[0]-c[0],b[1]-c[1]),d.right>e.right&&(b[0]+=f=e.right-d.right,d.left+=f),d.left<e.left&&(b[0]+=e.left-d.left),d.bottom>e.bottom&&(b[1]+=f=e.bottom-d.bottom,d.top+=f),d.top<e.top&&(b[1]+=e.top-d.top),b):b}}}),Ext.define("Ext.dd.DragZone",{extend:"Ext.dd.DragSource",constructor:function(a,b){this.callParent([a,b]),this.containerScroll&&Ext.dd.ScrollManager.register(this.el)},getDragData:function(a){return Ext.dd.Registry.getHandleFromEvent(a)},onInitDrag:function(a,b){return this.proxy.update(this.dragData.ddel.cloneNode(!0)),this.onStartDrag(a,b),!0},afterRepair:function(){var a=this;Ext.enableFx&&Ext.fly(a.dragData.ddel).highlight(a.repairHighlightColor),a.dragging=!1},getRepairXY:function(a){return Ext.Element.fly(this.dragData.ddel).getXY()},destroy:function(){this.callParent(),this.containerScroll&&Ext.dd.ScrollManager.unregister(this.el)}}),Ext.define("Ext.dd.ScrollManager",{singleton:!0,requires:["Ext.dd.DragDropManager"],constructor:function(){var a=Ext.dd.DragDropManager;a.fireEvents=Ext.Function.createSequence(a.fireEvents,this.onFire,this),a.stopDrag=Ext.Function.createSequence(a.stopDrag,this.onStop,this),this.doScroll=Ext.Function.bind(this.doScroll,this),this.ddmInstance=a,this.els={},this.dragEl=null,this.proc={}},onStop:function(a){var b=Ext.dd.ScrollManager;b.dragEl=null,b.clearProc()},triggerRefresh:function(){this.ddmInstance.dragCurrent&&this.ddmInstance.refreshCache(this.ddmInstance.dragCurrent.groups)},doScroll:function(){if(this.ddmInstance.dragCurrent){var a=this.proc,b=a.el,c=a.el.ddScrollConfig,d=c?c.increment:this.increment;this.animate?b.scroll(a.dir,d,!0,this.animDuration,this.triggerRefresh):b.scroll(a.dir,d)&&this.triggerRefresh()}},clearProc:function(){var a=this.proc;a.id&&clearInterval(a.id),a.id=0,a.el=null,a.dir=""},startProc:function(a,b){this.clearProc(),this.proc.el=a,this.proc.dir=b;var c=a.ddScrollConfig?a.ddScrollConfig.ddGroup:undefined,d=a.ddScrollConfig&&a.ddScrollConfig.frequency?a.ddScrollConfig.frequency:this.frequency;if(c===undefined||this.ddmInstance.dragCurrent.ddGroup==c)this.proc.id=setInterval(this.doScroll,d)},onFire:function(a,b){if(b||!this.ddmInstance.dragCurrent)return;if(!this.dragEl||this.dragEl!=this.ddmInstance.dragCurrent)this.dragEl=this.ddmInstance.dragCurrent,this.refreshCache();var c=a.getXY(),d=a.getPoint(),e=this.proc,f=this.els;for(var g in f){var h=f[g],i=h._region,j=h.ddScrollConfig?h.ddScrollConfig:this;if(i&&i.contains(d)&&h.isScrollable()){if(i.bottom-d.y<=j.vthresh){e.el!=h&&this.startProc(h,"down");return}if(i.right-d.x<=j.hthresh){e.el!=h&&this.startProc(h,"left");return}if(d.y-i.top<=j.vthresh){e.el!=h&&this.startProc(h,"up");return}if(d.x-i.left<=j.hthresh){e.el!=h&&this.startProc(h,"right");return}}}this.clearProc()},register:function(a){if(Ext.isArray(a))for(var b=0,c=a.length;b<c;b++)this.register(a[b]);else a=Ext.get(a),this.els[a.id]=a},unregister:function(a){if(Ext.isArray(a))for(var b=0,c=a.length;b<c;b++)this.unregister(a[b]);else a=Ext.get(a),delete this.els[a.id]},vthresh:25,hthresh:25,increment:100,frequency:500,animate:!0,animDuration:.4,ddGroup:undefined,refreshCache:function(){var a=this.els,b;for(b in a)typeof a[b]=="object"&&(a[b]._region=a[b].getRegion())}}),Ext.define("Ext.dd.DropTarget",{extend:"Ext.dd.DDTarget",requires:["Ext.dd.ScrollManager"],constructor:function(a,b){this.el=Ext.get(a),Ext.apply(this,b),this.containerScroll&&Ext.dd.ScrollManager.register(this.el),this.callParent([this.el.dom,this.ddGroup||this.group,{isTarget:!0}])},dropAllowed:Ext.baseCSSPrefix+"dd-drop-ok",dropNotAllowed:Ext.baseCSSPrefix+"dd-drop-nodrop",isTarget:!0,isNotifyTarget:!0,notifyEnter:function(a,b,c){return this.overClass&&this.el.addCls(this.overClass),this.dropAllowed},notifyOver:function(a,b,c){return this.dropAllowed},notifyOut:function(a,b,c){this.overClass&&this.el.removeCls(this.overClass)},notifyDrop:function(a,b,c){return!1},destroy:function(){this.callParent(),this.containerScroll&&Ext.dd.ScrollManager.unregister(this.el)}}),Ext.define("Ext.dd.Registry",{singleton:!0,constructor:function(){this.elements={},this.handles={},this.autoIdSeed=0},getId:function(a,b){if(typeof a=="string")return a;var c=a.id;return!c&&b!==!1&&(c="extdd-"+ ++this.autoIdSeed,a.id=c),c},register:function(a,b){b=b||{},typeof a=="string"&&(a=document.getElementById(a)),b.ddel=a,this.elements[this.getId(a)]=b,b.isHandle!==!1&&(this.handles[b.ddel.id]=b);if(b.handles){var c=b.handles;for(var d=0,e=c.length;d<e;d++)this.handles[this.getId(c[d])]=b}},unregister:function(a){var b=this.getId(a,!1),c=this.elements[b];if(c){delete this.elements[b];if(c.handles){var d=c.handles;for(var e=0,f=d.length;e<f;e++)delete this.handles[this.getId(d[e],!1)]}}},getHandle:function(a){return typeof a!="string"&&(a=a.id),this.handles[a]},getHandleFromEvent:function(a){var b=a.getTarget();return b?this.handles[b.id]:null},getTarget:function(a){return typeof a!="string"&&(a=a.id),this.elements[a]},getTargetFromEvent:function(a){var b=a.getTarget();return b?this.elements[b.id]||this.handles[b.id]:null}}),Ext.define("Ext.dd.DropZone",{extend:"Ext.dd.DropTarget",requires:["Ext.dd.Registry"],getTargetFromEvent:function(a){return Ext.dd.Registry.getTargetFromEvent(a)},onNodeEnter:function(a,b,c,d){},onNodeOver:function(a,b,c,d){return this.dropAllowed},onNodeOut:function(a,b,c,d){},onNodeDrop:function(a,b,c,d){return!1},onContainerOver:function(a,b,c){return this.dropNotAllowed},onContainerDrop:function(a,b,c){return!1},notifyEnter:function(a,b,c){return this.dropNotAllowed},notifyOver:function(a,b,c){var d=this.getTargetFromEvent(b);return d?(this.lastOverNode!=d&&(this.lastOverNode&&this.onNodeOut(this.lastOverNode,a,b,c),this.onNodeEnter(d,a,b,c),this.lastOverNode=d),this.onNodeOver(d,a,b,c)):(this.lastOverNode&&(this.onNodeOut(this.lastOverNode,a,b,c),this.lastOverNode=null),this.onContainerOver(a,b,c))},notifyOut:function(a,b,c){this.lastOverNode&&(this.onNodeOut(this.lastOverNode,a,b,c),this.lastOverNode=null)},notifyDrop:function(a,b,c){this.lastOverNode&&(this.onNodeOut(this.lastOverNode,a,b,c),this.lastOverNode=null);var d=this.getTargetFromEvent(b);return d?this.onNodeDrop(d,a,b,c):this.onContainerDrop(a,b,c)},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}}),Ext.define("Ext.flash.Component",{extend:"Ext.Component",alternateClassName:"Ext.FlashComponent",alias:"widget.flash",flashVersion:"9.0.115",backgroundColor:"#ffffff",wmode:"opaque",swfWidth:"100%",swfHeight:"100%",expressInstall:!1,renderTpl:['<div id="{swfId}"></div>'],initComponent:function(){this.callParent(),this.addEvents("success","failure")},onRender:function(){var a=this,b,c,d,e=a.getSwfId();a.renderData.swfId=e,a.callParent(arguments),b=Ext.apply({allowScriptAccess:"always",bgcolor:a.backgroundColor,wmode:a.wmode},a.flashParams),c=Ext.apply({allowedDomain:document.location.hostname},a.flashVars),new swfobject.embedSWF(a.url,e,a.swfWidth,a.swfHeight,a.flashVersion,a.expressInstall?a.statics.EXPRESS_INSTALL_URL:d,c,b,a.flashAttributes,Ext.bind(a.swfCallback,a))},swfCallback:function(a){var b=this;a.success?(b.swf=Ext.get(a.ref),b.onSuccess(),b.fireEvent("success",b)):(b.onFailure(),b.fireEvent("failure",b))},getSwfId:function(){return this.swfId||(this.swfId="extswf"+this.getAutoId())},onSuccess:function(){this.swf.setStyle("visibility","inherit")},onFailure:Ext.emptyFn,beforeDestroy:function(){var a=this,b=a.swf;b&&(swfobject.removeSWF(a.getSwfId()),Ext.destroy(b),delete a.swf),a.callParent()},statics:{EXPRESS_INSTALL_URL:"http://swfobject.googlecode.com/svn/trunk/swfobject/expressInstall.swf"}}),Ext.define("Ext.form.action.Action",{alternateClassName:"Ext.form.Action",submitEmptyText:!0,constructor:function(a){a&&Ext.apply(this,a);var b=a.params;Ext.isString(b)&&(this.params=Ext.Object.fromQueryString(b))},run:Ext.emptyFn,onFailure:function(a){this.response=a,this.failureType=Ext.form.action.Action.CONNECT_FAILURE,this.form.afterAction(this,!1)},processResponse:function(a){return this.response=a,!a.responseText&&!a.responseXML?!0:this.result=this.handleResponse(a)},getUrl:function(){return this.url||this.form.url},getMethod:function(){return(this.method||this.form.method||"POST").toUpperCase()},getParams:function(){return Ext.apply({},this.params,this.form.baseParams)},createCallback:function(){var a=this,b,c=a.form;return{success:a.onSuccess,failure:a.onFailure,scope:a,timeout:this.timeout*1e3||c.timeout*1e3,upload:c.fileUpload?a.onSuccess:b}},statics:{CLIENT_INVALID:"client",SERVER_INVALID:"server",CONNECT_FAILURE:"connect",LOAD_FAILURE:"load"}}),Ext.define("Ext.form.action.Submit",{extend:"Ext.form.action.Action",alternateClassName:"Ext.form.Action.Submit",alias:"formaction.submit",type:"submit",run:function(){var a=this.form;this.clientValidation===!1||a.isValid()?this.doSubmit():(this.failureType=Ext.form.action.Action.CLIENT_INVALID,a.afterAction(this,!1))},doSubmit:function(){var a,b=Ext.apply(this.createCallback(),{url:this.getUrl(),method:this.getMethod(),headers:this.headers});this.form.hasUpload()?(a=b.form=this.buildForm(),b.isUpload=!0):b.params=this.getParams(),Ext.Ajax.request(b),a&&Ext.removeNode(a)},getParams:function(){var a=!1,b=this.callParent(),c=this.form.getValues(a,a,this.submitEmptyText!==a);return Ext.apply({},c,b)},buildForm:function(){function g(b,c){a.push({tag:"input",type:"hidden",name:b,value:Ext.String.htmlEncode(c)})}var a=[],b,c,d=this.form,e=this.getParams(),f=[];return d.getFields().each(function(a){a.isFileUpload()&&f.push(a)}),Ext.iterate(e,function(a,b){Ext.isArray(b)?Ext.each(b,function(b){g(a,b)}):g(a,b)}),b={tag:"form",action:this.getUrl(),method:this.getMethod(),target:this.target||"_self",style:"display:none",cn:a},f.length&&(b.encoding=b.enctype="multipart/form-data"),c=Ext.DomHelper.append(Ext.getBody(),b),Ext.Array.each(f,function(a){a.rendered&&c.appendChild(a.extractFileInput())}),c},onSuccess:function(a){var b=this.form,c=!0,d=this.processResponse(a);d!==!0&&!d.success&&(d.errors&&b.markInvalid(d.errors),this.failureType=Ext.form.action.Action.SERVER_INVALID,c=!1),b.afterAction(this,c)},handleResponse:function(a){var b=this.form,c=b.errorReader,d,e,f,g,h;if(c){d=c.read(a),h=d.records,e=[];if(h)for(f=0,g=h.length;f<g;f++)e[f]=h[f].data;return e.length<1&&(e=null),{success:d.success,errors:e}}return Ext.decode(a.responseText)}}),Ext.define("Ext.util.ComponentDragger",{extend:"Ext.dd.DragTracker",autoStart:500,constructor:function(a,b){this.comp=a,this.initialConstrainTo=b.constrainTo,this.callParent([b])},onStart:function(a){var b=this,c=b.comp;this.startPosition=c.getPosition(),c.ghost&&!c.liveDrag&&(b.proxy=c.ghost(),b.dragTarget=b.proxy.header.el);if(b.constrain||b.constrainDelegate)b.constrainTo=b.calculateConstrainRegion()},calculateConstrainRegion:function(){var a=this,b=a.comp,c=a.initialConstrainTo,d,e,f=b.el.shadow?b.el.shadow.offset:0;return c instanceof Ext.util.Region||(c=Ext.fly(c).getViewRegion()),f&&c.adjust(0,-f,-f,f),a.constrainDelegate||(d=Ext.fly(a.dragTarget).getRegion(),e=a.proxy?a.proxy.el.getRegion():b.el.getRegion(),c.adjust(d.top-e.top,d.right-e.right,d.bottom-e.bottom,d.left-e.left)),c},onDrag:function(a){var b=this,c=b.proxy&&!b.comp.liveDrag?b.proxy:b.comp,d=b.getOffset(b.constrain||b.constrainDelegate?"dragTarget":null);c.setPosition(b.startPosition[0]+d[0],b.startPosition[1]+d[1])},onEnd:function(a){this.proxy&&!this.comp.liveDrag&&this.comp.unghost()}}),Ext.define("Ext.form.Labelable",{requires:["Ext.XTemplate"],labelableRenderTpl:['<tpl if="!hideLabel && !(!fieldLabel && hideEmptyLabel)">','<label id="{id}-labelEl"<tpl if="inputId"> for="{inputId}"</tpl> class="{labelCls}"','<tpl if="labelStyle"> style="{labelStyle}"</tpl>>','<tpl if="fieldLabel">{fieldLabel}{labelSeparator}</tpl>',"</label>","</tpl>",'<div class="{baseBodyCls} {fieldBodyCls}" id="{id}-bodyEl" role="presentation">{subTplMarkup}</div>','<div id="{id}-errorEl" class="{errorMsgCls}" style="display:none"></div>','<div class="{clearCls}" role="presentation"><!-- --></div>',{compiled:!0,disableFormats:!0}],activeErrorsTpl:['<tpl if="errors && errors.length">','<ul><tpl for="errors"><li<tpl if="xindex == xcount"> class="last"</tpl>>{.}</li></tpl></ul>',"</tpl>"],isFieldLabelable:!0,formItemCls:Ext.baseCSSPrefix+"form-item",labelCls:Ext.baseCSSPrefix+"form-item-label",errorMsgCls:Ext.baseCSSPrefix+"form-error-msg",baseBodyCls:Ext.baseCSSPrefix+"form-item-body",fieldBodyCls:"",clearCls:Ext.baseCSSPrefix+"clear",invalidCls:Ext.baseCSSPrefix+"form-invalid",fieldLabel:undefined,labelAlign:"left",labelWidth:100,labelPad:5,labelSeparator:":",hideLabel:!1,hideEmptyLabel:!0,preventMark:!1,autoFitErrors:!0,msgTarget:"qtip",initLabelable:function(){this.addCls(this.formItemCls),this.addEvents("errorchange")},getFieldLabel:function(){return this.fieldLabel||""},getLabelableRenderData:function(){var a=this,b=a.labelAlign,c=a.labelCls,d=a.labelClsExtra,e=a.labelPad,f;return b==="top"?f="margin-bottom:"+e+"px;":(f="margin-right:"+e+"px;",Ext.isBorderBox&&(f+="width:"+a.labelWidth+"px;")),Ext.copyTo({inputId:a.getInputId(),fieldLabel:a.getFieldLabel(),labelCls:d?c+" "+d:c,labelStyle:f+(a.labelStyle||""),subTplMarkup:a.getSubTplMarkup()},a,"hideLabel,hideEmptyLabel,fieldBodyCls,baseBodyCls,errorMsgCls,clearCls,labelSeparator",!0)},onLabelableRender:function(){this.addChildEls("labelEl","bodyEl","errorEl")},getSubTplMarkup:function(){return""},getInputId:function(){return""},getActiveError:function(){return this.activeError||""},hasActiveError:function(){return!!this.getActiveError()},setActiveError:function(a){this.activeError=a,this.activeErrors=[a],this.renderActiveError()},getActiveErrors:function(){return this.activeErrors||[]},setActiveErrors:function(a){this.activeErrors=a,this.activeError=this.getTpl("activeErrorsTpl").apply({errors:a}),this.renderActiveError()},unsetActiveError:function(){delete this.activeError,delete this.activeErrors,this.renderActiveError()},renderActiveError:function(){var a=this,b=a.getActiveError(),c=!!b;b!==a.lastActiveError&&(a.fireEvent("errorchange",a,b),a.lastActiveError=b),a.rendered&&!a.isDestroyed&&!a.preventMark&&(a.el[c?"addCls":"removeCls"](a.invalidCls),a.getActionEl().dom.setAttribute("aria-invalid",c),a.errorEl.dom.innerHTML=b)},setFieldDefaults:function(a){var b=this;Ext.iterate(a,function(a,c){b.hasOwnProperty(a)||(b[a]=c)})},getBodyNaturalWidth:function(){return this.bodyEl.getWidth()}}),Ext.define("Ext.form.field.Field",{isFormField:!0,disabled:!1,submitValue:!0,validateOnChange:!0,suspendCheckChange:0,initField:function(){this.addEvents("change","validitychange","dirtychange"),this.initValue()},initValue:function(){var a=this;a.originalValue=a.lastValue=a.value,a.suspendCheckChange++,a.setValue(a.value),a.suspendCheckChange--},getName:function(){return this.name},getValue:function(){return this.value},setValue:function(a){var b=this;return b.value=a,b.checkChange(),b},isEqual:function(a,b){return String(a)===String(b)},isEqualAsString:function(a,b){return String(Ext.value(a,""))===String(Ext.value(b,""))},getSubmitData:function(){var a=this,b=null;return!a.disabled&&a.submitValue&&!a.isFileUpload()&&(b={},b[a.getName()]=""+a.getValue()),b},getModelData:function(){var a=this,b=null;return!a.disabled&&!a.isFileUpload()&&(b={},b[a.getName()]=a.getValue()),b},reset:function(){var a=this;a.setValue(a.originalValue),a.clearInvalid(),delete a.wasValid},resetOriginalValue:function(){this.originalValue=this.getValue(),this.checkDirty()},checkChange:function(){if(!this.suspendCheckChange){var a=this,b=a.getValue(),c=a.lastValue;!a.isEqual(b,c)&&!a.isDestroyed&&(a.lastValue=b,a.fireEvent("change",a,b,c),a.onChange(b,c))}},onChange:function(a,b){this.validateOnChange&&this.validate(),this.checkDirty()},isDirty:function(){var a=this;return!a.disabled&&!a.isEqual(a.getValue(),a.originalValue)},checkDirty:function(){var a=this,b=a.isDirty();b!==a.wasDirty&&(a.fireEvent("dirtychange",a,b),a.onDirtyChange(b),a.wasDirty=b)},onDirtyChange:Ext.emptyFn,getErrors:function(a){return[]},isValid:function(){var a=this;return a.disabled||Ext.isEmpty(a.getErrors())},validate:function(){var a=this,b=a.isValid();return b!==a.wasValid&&(a.wasValid=b,a.fireEvent("validitychange",a,b)),b},batchChanges:function(a){try{this.suspendCheckChange++,a()}catch(b){throw b}finally{this.suspendCheckChange--}this.checkChange()},isFileUpload:function(){return!1},extractFileInput:function(){return null},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn}),Ext.define("Ext.layout.component.field.Field",{alias:["layout.field"],extend:"Ext.layout.component.Component",uses:["Ext.tip.QuickTip","Ext.util.TextMetrics"],type:"field",beforeLayout:function(a,b){var c=this;return c.callParent(arguments)||!c.owner.preventMark&&c.activeError!==c.owner.getActiveError()},onLayout:function(a,b){var c=this,d=c.owner,e=c.getLabelStrategy(),f=c.getErrorStrategy(),g=Ext.isDefined,h=Ext.isNumber,i,j,k,l,m;i=c.lastComponentSize||{},g(a)||(a=i.width,a<0&&(a=m)),g(b)||(b=i.height,b<0&&(b=m)),j=!h(a),k=!h(b),l={autoWidth:j,autoHeight:k,width:j?d.getBodyNaturalWidth():a,height:b,setOuterWidth:!1,insets:{top:0,right:0,bottom:0,left:0}},e.prepare(d,l),f.prepare(d,l),e.adjustHorizInsets(d,l),f.adjustHorizInsets(d,l),e.layoutHoriz(d,l),f.layoutHoriz(d,l),e.adjustVertInsets(d,l),f.adjustVertInsets(d,l),e.layoutVert(d,l),f.layoutVert(d,l),j&&k?c.setElementSize(d.el,l.setOuterWidth?l.width:m,l.height):c.setTargetSize(!j||l.setOuterWidth?l.width:m,l.height),c.sizeBody(l),c.activeError=d.getActiveError()},onFocus:function(){this.getErrorStrategy().onFocus(this.owner)},sizeBody:function(a){var b=this,c=b.owner,d=a.insets,e=a.width,f=a.height,g=Ext.isNumber(e)?e-d.left-d.right:e,h=Ext.isNumber(f)?f-d.top-d.bottom:f;b.setElementSize(c.bodyEl,g,h),b.sizeBodyContents(g,h)},sizeBodyContents:Ext.emptyFn,getLabelStrategy:function(){var a=this,b=a.labelStrategies,c=a.owner.labelAlign;return b[c]||b.base},getErrorStrategy:function(){var a=this,b=a.owner,c=a.errorStrategies,d=b.msgTarget;return!b.preventMark&&Ext.isString(d)?c[d]||c.elementId:c.none},labelStrategies:function(){var a=Ext.applyIf,b=Ext.emptyFn,c={prepare:function(a,b){var c=a.labelCls+"-"+a.labelAlign,d=a.labelEl;d&&!d.hasCls(c)&&d.addCls(c)},adjustHorizInsets:b,adjustVertInsets:b,layoutHoriz:b,layoutVert:b},d=a({prepare:function(a,b){c.prepare(a,b),b.autoWidth&&(b.width+=a.labelEl?a.labelWidth+a.labelPad:0),b.setOuterWidth=!0},adjustHorizInsets:function(a,b){a.labelEl&&(b.insets.left+=a.labelWidth+a.labelPad)},layoutHoriz:function(a,b){var c=a.labelEl;c&&!a.isLabelSized&&!Ext.isBorderBox&&(c.setWidth(a.labelWidth),a.isLabelSized=!0)}},c);return{base:c,top:a({adjustVertInsets:function(a,b){var c=a.labelEl;c&&(b.insets.top+=Ext.util.TextMetrics.measure(c,a.fieldLabel,b.width).height+c.getFrameWidth("tb")+a.labelPad)}},c),left:d,right:d}}(),errorStrategies:function(){function a(a,b){var c=a.getStyle("display")!=="none";b!==c&&a.setDisplayed(b)}function b(a,b,c){a.getStyle(b)!==c&&a.setStyle(b,c)}function c(a){var b=Ext.layout.component.field.Field.tip,c;b&&b.isVisible()&&(c=b.activeTarget,c&&c.el===a.getActionEl().dom&&b.toFront(!0))}var d=Ext.applyIf,e=Ext.emptyFn,f={prepare:function(b){a(b.errorEl,!1)},adjustHorizInsets:e,adjustVertInsets:e,layoutHoriz:e,layoutVert:e,onFocus:e};return{none:f,side:d({prepare:function(b){var c=b.errorEl;c.addCls(Ext.baseCSSPrefix+"form-invalid-icon"),Ext.layout.component.field.Field.initTip(),c.dom.setAttribute("data-errorqtip",b.getActiveError()||""),a(c,b.hasActiveError())},adjustHorizInsets:function(a,b){a.autoFitErrors&&a.hasActiveError()&&(b.insets.right+=a.errorEl.getWidth())},layoutHoriz:function(a,c){a.hasActiveError()&&b(a.errorEl,"left",c.width-c.insets.right+"px")},layoutVert:function(a,c){a.hasActiveError()&&b(a.errorEl,"top",c.insets.top+"px")},onFocus:c},f),under:d({prepare:function(b){var c=b.errorEl,d=Ext.baseCSSPrefix+"form-invalid-under";c.hasCls(d)||c.addCls(d),a(c,b.hasActiveError())},adjustVertInsets:function(a,b){a.autoFitErrors&&(b.insets.bottom+=a.errorEl.getHeight())},layoutHoriz:function(a,c){var d=a.errorEl,e=c.insets;b(d,"width",c.width-e.right-e.left+"px"),b(d,"marginLeft",e.left+"px")}},f),qtip:d({prepare:function(b){a(b.errorEl,!1),Ext.layout.component.field.Field.initTip(),b.getActionEl().dom.setAttribute("data-errorqtip",b.getActiveError()||"")},onFocus:c},f),title:d({prepare:function(b){a(b.errorEl,!1),b.el.dom.title=b.getActiveError()||""}},f),elementId:d({prepare:function(b){a(b.errorEl,!1);var c=Ext.fly(b.msgTarget);c&&(c.dom.innerHTML=b.getActiveError()||"",c.setDisplayed(b.hasActiveError()))}},f)}}(),statics:{initTip:function(){var a=this.tip;a||(a=this.tip=Ext.create("Ext.tip.QuickTip",{baseCls:Ext.baseCSSPrefix+"form-invalid-tip",renderTo:Ext.getBody()}),a.tagConfig=Ext.apply({},{attribute:"errorqtip"},a.tagConfig))},destroyTip:function(){var a=this.tip;a&&(a.destroy(),delete this.tip)}}}),Ext.define("Ext.form.field.VTypes",function(){var a=/^[a-zA-Z_]+$/,b=/^[a-zA-Z0-9_]+$/,c=/^(\w+)([\-+.][\w]+)*@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,d=/(((^https?)|(^ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;return{singleton:!0,alternateClassName:"Ext.form.VTypes",email:function(a){return c.test(a)},emailText:'This field should be an e-mail address in the format "user@example.com"',emailMask:/[a-z0-9_\.\-@\+]/i,url:function(a){return d.test(a)},urlText:'This field should be a URL in the format "http://www.example.com"',alpha:function(b){return a.test(b)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(a){return b.test(a)},alphanumText:"This field should only contain letters, numbers and _",alphanumMask:/[a-z0-9_]/i}}()),Ext.define("Ext.layout.component.field.Text",{extend:"Ext.layout.component.field.Field",alias:"layout.textfield",requires:["Ext.util.TextMetrics"],type:"textfield",beforeLayout:function(a,b){var c=this,d=c.owner,e=this.lastValue,f=d.getRawValue();return this.lastValue=f,c.callParent(arguments)||d.grow&&f!==e},sizeBodyContents:function(a,b){var c=this.adjustForGrow(a,b);this.setElementSize(this.owner.inputEl,c[0],c[1])},adjustForGrow:function(a,b){var c=this,d=c.owner,e,f,g,h=[a,b];return d.grow&&(e=d.inputEl,f=(e.dom.value||(d.hasFocus?"":d.emptyText)||"")+d.growAppend,g=e.getTextWidth(f)+e.getBorderWidth("lr")+e.getPadding("lr"),h[0]=Ext.Number.constrain(g,d.growMin,Math.max(d.growMin,Math.min(d.growMax,Ext.isNumber(a)?a:Infinity)))),h}}),Ext.define("Ext.layout.component.field.TextArea",{extend:"Ext.layout.component.field.Text",alias:"layout.textareafield",type:"textareafield",adjustForGrow:function(a,b){var c=this,d=c.owner,e,f,g,h,i,j,k=[a,b];return d.grow&&(e=d.inputEl,h=e.getWidth(!0),i=e.getHeight(),f=e.dom.value||"&#160;",f+=d.growAppend,f=f.replace(/\n/g,"<br>"),j=Ext.util.TextMetrics.measure(e,f,h).height+e.getBorderWidth("tb")+e.getPadding("tb"),g=d.growMax,Ext.isNumber(b)&&(g=Math.min(g,b)),k[1]=Ext.Number.constrain(j,d.growMin,g)),k}}),Ext.define("Ext.layout.container.Anchor",{alias:"layout.anchor",extend:"Ext.layout.container.Container",alternateClassName:"Ext.layout.AnchorLayout",type:"anchor",defaultAnchor:"100%",parseAnchorRE:/^(r|right|b|bottom)$/i,onLayout:function(){this.callParent(arguments);var a=this,b=a.getLayoutTargetSize(),c=a.owner,d=a.getTarget(),e=b.width,f=b.height,g=d.getStyle("overflow"),h=a.getVisibleItems(c),i=h.length,j=[],k,l,m,n,o,p,q,r,s;if(e<20&&f<20)return;a.clearEl||(a.clearEl=d.createChild({cls:Ext.baseCSSPrefix+"clear",role:"presentation"})),Ext.supports.RightMargin||(s=Ext.Element.getRightMarginFixCleaner(d),d.addCls(Ext.baseCSSPrefix+"inline-children"));for(q=0;q<i;q++)m=h[q],r=m.el,n=m.anchorSpec,n?(n.right?o=a.adjustWidthAnchor(n.right(e)-r.getMargin("lr"),m):o=undefined,n.bottom?p=a.adjustHeightAnchor(n.bottom(f)-r.getMargin("tb"),m):p=undefined,j.push({component:m,anchor:!0,width:o||undefined,height:p||undefined})):j.push({component:m,anchor:!1});Ext.supports.RightMargin||(d.removeCls(Ext.baseCSSPrefix+"inline-children"),s());for(q=0;q<i;q++)k=j[q],a.setItemSize(k.component,k.width,k.height);if(g&&g!="hidden"&&!a.adjustmentPass){l=a.getLayoutTargetSize();if(l.width!=b.width||l.height!=b.height)a.adjustmentPass=!0,a.onLayout()}delete a.adjustmentPass},parseAnchor:function(a,b,c){if(a&&a!="none"){var d;if(this.parseAnchorRE.test(a)){var e=c-b;return function(a){return a-e}}if(a.indexOf("%")!=-1)return d=parseFloat(a.replace("%",""))*.01,function(a){return Math.floor(a*d)};a=parseInt(a,10);if(!isNaN(a))return function(b){return b+a}}return null},adjustWidthAnchor:function(a,b){return a},adjustHeightAnchor:function(a,b){return a},configureItem:function(a){var b=this,c=b.owner,d=a.anchor,e,f,g,h;!a.anchor&&a.items&&!Ext.isNumber(a.width)&&(!Ext.isIE6||!Ext.isStrict)&&(a.anchor=d=b.defaultAnchor),c.anchorSize?typeof c.anchorSize=="number"?g=c.anchorSize:(g=c.anchorSize.width,h=c.anchorSize.height):(g=c.initialConfig.width,h=c.initialConfig.height),d?(e=d.split(" "),a.anchorSpec=f={right:b.parseAnchor(e[0],a.initialConfig.width,g),bottom:b.parseAnchor(e[1],a.initialConfig.height,h)},f.right?a.layoutManagedWidth=1:a.layoutManagedWidth=2,f.bottom?a.layoutManagedHeight=1:a.layoutManagedHeight=2):(a.layoutManagedWidth=2,a.layoutManagedHeight=2),this.callParent(arguments)}}),Ext.define("Ext.form.action.Load",{extend:"Ext.form.action.Action",requires:["Ext.data.Connection"],alternateClassName:"Ext.form.Action.Load",alias:"formaction.load",type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(),{method:this.getMethod(),url:this.getUrl(),headers:this.headers,params:this.getParams()}))},onSuccess:function(a){var b=this.processResponse(a),c=this.form;if(b===!0||!b.success||!b.data){this.failureType=Ext.form.action.Action.LOAD_FAILURE,c.afterAction(this,!1);return}c.clearInvalid(),c.setValues(b.data),c.afterAction(this,!0)},handleResponse:function(a){var b=this.form.reader,c,d;return b?(c=b.read(a),d=c.records&&c.records[0]?c.records[0].data:null,{success:c.success,data:d}):Ext.decode(a.responseText)}}),Ext.define("Ext.window.Window",{extend:"Ext.panel.Panel",alternateClassName:"Ext.Window",requires:["Ext.util.ComponentDragger","Ext.util.Region","Ext.EventManager"],alias:"widget.window",baseCls:Ext.baseCSSPrefix+"window",resizable:!0,draggable:!0,constrain:!1,constrainHeader:!1,plain:!1,minimizable:!1,maximizable:!1,minHeight:100,minWidth:200,expandOnShow:!0,collapsible:!1,closable:!0,hidden:!0,autoRender:!0,hideMode:"visibility",floating:!0,ariaRole:"alertdialog",itemCls:"x-window-item",overlapHeader:!0,ignoreHeaderBorderManagement:!0,initComponent:function(){var a=this;a.callParent(),a.addEvents("resize","maximize","minimize","restore"),a.plain&&a.addClsWithUI("plain"),a.modal&&(a.ariaRole="dialog")},initStateEvents:function(){var a=this.stateEvents;Ext.each(["maximize","restore","resize","dragend"],function(b){Ext.Array.indexOf(a,b)&&a.push(b)}),this.callParent()},getState:function(){var a=this,b=a.callParent()||{},c=!!a.maximized;return b.maximized=c,Ext.apply(b,{size:c?a.restoreSize:a.getSize(),pos:c?a.restorePos:a.getPosition()}),b},applyState:function(a){var b=this;a&&(b.maximized=a.maximized,b.maximized?(b.hasSavedRestore=!0,b.restoreSize=a.size,b.restorePos=a.pos):Ext.apply(b,{width:a.size.width,height:a.size.height,x:a.pos[0],y:a.pos[1]}))},onMouseDown:function(a){var b;this.floating&&(Ext.fly(a.getTarget()).focusable()&&(b=!0),this.toFront(b))},onRender:function(a,b){var c=this;c.callParent(arguments),c.focusEl=c.el,c.maximizable&&c.header.on({dblclick:{fn:c.toggleMaximize,element:"el",scope:c}})},afterRender:function(){var a=this,b=a.hidden,c;a.hidden=!1,a.callParent(),a.hidden=b,a.proxy=a.getProxy(),a.mon(a.el,"mousedown",a.onMouseDown,a),a.el.set({tabIndex:-1}),a.maximized&&(a.maximized=!1,a.maximize()),a.closable&&(c=a.getKeyMap(),c.on(27,a.onEsc,a),c.disable()),b||(a.syncMonitorWindowResize(),a.doConstrain())},initDraggable:function(){var a=this,b;a.header||a.updateHeader(!0);if(a.header){b=Ext.applyIf({el:a.el,delegate:"#"+a.header.id},a.draggable);if(a.constrain||a.constrainHeader)b.constrain=a.constrain,b.constrainDelegate=a.constrainHeader,b.constrainTo=a.constrainTo||a.container;a.dd=Ext.create("Ext.util.ComponentDragger",this,b),a.relayEvents(a.dd,["dragstart","drag","dragend"])}},onEsc:function(a,b){b.stopEvent(),this[this.closeAction]()},beforeDestroy:function(){var a=this;a.rendered&&(delete this.animateTarget,a.hide(),Ext.destroy(a.keyMap)),a.callParent()},addTools:function(){var a=this;a.callParent(),a.minimizable&&a.addTool({type:"minimize",handler:Ext.Function.bind(a.minimize,a,[])}),a.maximizable&&(a.addTool({type:"maximize",handler:Ext.Function.bind(a.maximize,a,[])}),a.addTool({type:"restore",handler:Ext.Function.bind(a.restore,a,[]),hidden:!0}))},getFocusEl:function(){var a=this,b=a.focusEl,c=a.defaultButton||a.defaultFocus,d=typeof db,e,f;return Ext.isDefined(c)&&(Ext.isNumber(c)?b=a.query("button")[c]:Ext.isString(c)?b=a.down("#"+c):b=c),b||a.focusEl},beforeShow:function(){this.callParent(),this.expandOnShow&&this.expand(!1)},afterShow:function(a){var b=this,c=a||b.animateTarget;b.callParent(arguments),b.maximized&&b.fitContainer(),b.syncMonitorWindowResize(),c||b.doConstrain(),b.keyMap&&b.keyMap.enable()},doClose:function(){var a=this;a.hidden?(a.fireEvent("close",a),a.closeAction=="destroy"&&this.destroy()):a.hide(a.animateTarget,a.doClose,a)},afterHide:function(){var a=this;a.syncMonitorWindowResize(),a.keyMap&&a.keyMap.disable(),a.callParent(arguments)},onWindowResize:function(){this.maximized&&this.fitContainer(),this.doConstrain()},minimize:function(){return this.fireEvent("minimize",this),this},afterCollapse:function(){var a=this;a.maximizable&&(a.tools.maximize.hide(),a.tools.restore.hide()),a.resizer&&a.resizer.disable(),a.callParent(arguments)},afterExpand:function(){var a=this;a.maximized?a.tools.restore.show():a.maximizable&&a.tools.maximize.show(),a.resizer&&a.resizer.enable(),a.callParent(arguments)},maximize:function(){var a=this;return a.maximized||(a.expand(!1),a.hasSavedRestore||(a.restoreSize=a.getSize(),a.restorePos=a.getPosition(!0)),a.maximizable&&(a.tools.maximize.hide(),a.tools.restore.show()),a.maximized=!0,a.el.disableShadow(),a.dd&&a.dd.disable(),a.collapseTool&&a.collapseTool.hide(),a.el.addCls(Ext.baseCSSPrefix+"window-maximized"),a.container.addCls(Ext.baseCSSPrefix+"window-maximized-ct"),a.syncMonitorWindowResize(),a.setPosition(0,0),a.fitContainer(),a.fireEvent("maximize",a)),a},restore:function(){var a=this,b=a.tools;return a.maximized&&(delete a.hasSavedRestore,a.removeCls(Ext.baseCSSPrefix+"window-maximized"),b.restore&&b.restore.hide(),b.maximize&&b.maximize.show(),a.collapseTool&&a.collapseTool.show(),a.setPosition(a.restorePos),a.setSize(a.restoreSize),delete a.restorePos,delete a.restoreSize,a.maximized=!1,a.el.enableShadow(!0),a.dd&&a.dd.enable(),a.container.removeCls(Ext.baseCSSPrefix+"window-maximized-ct"),a.syncMonitorWindowResize(),a.doConstrain(),a.fireEvent("restore",a)),a},syncMonitorWindowResize:function(){var a=this,b=a._monitoringResize,c=a.monitorResize||a.constrain||a.constrainHeader||a.maximized,d=a.hidden||a.destroying||a.isDestroyed;c&&!d?b||(Ext.EventManager.onWindowResize(a.onWindowResize,a),a._monitoringResize=!0):b&&(Ext.EventManager.removeResizeListener(a.onWindowResize,a),a._monitoringResize=!1)},toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()}}),Ext.define("Ext.form.field.Base",{extend:"Ext.Component",mixins:{labelable:"Ext.form.Labelable",field:"Ext.form.field.Field"},alias:"widget.field",alternateClassName:["Ext.form.Field","Ext.form.BaseField"],requires:["Ext.util.DelayedTask","Ext.XTemplate","Ext.layout.component.field.Field"],fieldSubTpl:['<input id="{id}" type="{type}" ','<tpl if="name">name="{name}" </tpl>','<tpl if="size">size="{size}" </tpl>','<tpl if="tabIdx">tabIndex="{tabIdx}" </tpl>','class="{fieldCls} {typeCls}" autocomplete="off" />',{compiled:!0,disableFormats:!0}],inputType:"text",invalidText:"The value in this field is invalid",fieldCls:Ext.baseCSSPrefix+"form-field",focusCls:Ext.baseCSSPrefix+"form-focus",dirtyCls:Ext.baseCSSPrefix+"form-dirty",checkChangeEvents:Ext.isIE&&(!document.documentMode||document.documentMode<9)?["change","propertychange"]:["change","input","textInput","keyup","dragdrop"],checkChangeBuffer:50,componentLayout:"field",readOnly:!1,readOnlyCls:Ext.baseCSSPrefix+"form-readonly",validateOnBlur:!0,hasFocus:!1,baseCls:Ext.baseCSSPrefix+"field",maskOnDisable:!1,initComponent:function(){var a=this;a.callParent(),a.subTplData=a.subTplData||{},a.addEvents("focus","blur","specialkey"),a.initLabelable(),a.initField(),a.name||(a.name=a.getInputId())},getInputId:function(){return this.inputId||(this.inputId=Ext.id())},getSubTplData:function(){var a=this,b=a.inputType,c=a.getInputId();return Ext.applyIf(a.subTplData,{id:c,cmpId:a.id,name:a.name||c,type:b,size:a.size||20,cls:a.cls,fieldCls:a.fieldCls,tabIdx:a.tabIndex,typeCls:Ext.baseCSSPrefix+"form-"+(b==="password"?"text":b)})},afterRender:function(){this.callParent(),this.inputEl&&this.inputEl.selectable()},getSubTplMarkup:function(){return this.getTpl("fieldSubTpl").apply(this.getSubTplData())},initRenderTpl:function(){var a=this;return a.hasOwnProperty("renderTpl")||(a.renderTpl=a.getTpl("labelableRenderTpl")),a.callParent()},initRenderData:function(){return Ext.applyIf(this.callParent(),this.getLabelableRenderData())},setFieldStyle:function(a){var b=this,c=b.inputEl;c&&c.applyStyles(a),b.fieldStyle=a},onRender:function(){var a=this,b=a.fieldStyle;a.onLabelableRender(),a.addChildEls({name:"inputEl",id:a.getInputId()}),a.callParent(arguments),a.setRawValue(a.rawValue),a.readOnly&&a.setReadOnly(!0),a.disabled&&a.disable(),b&&a.setFieldStyle(b),a.renderActiveError()},initAria:function(){var a=this;a.callParent(),a.getActionEl().dom.setAttribute("aria-describedby",Ext.id(a.errorEl))},getFocusEl:function(){return this.inputEl},isFileUpload:function(){return this.inputType==="file"},extractFileInput:function(){var a=this,b=a.isFileUpload()?a.inputEl.dom:null,c;return b&&(c=b.cloneNode(!0),b.parentNode.replaceChild(c,b),a.inputEl=Ext.get(c)),b},getSubmitData:function(){var a=this,b=null,c;return!a.disabled&&a.submitValue&&!a.isFileUpload()&&(c=a.getSubmitValue(),c!==null&&(b={},b[a.getName()]=c)),b},getSubmitValue:function(){return this.processRawValue(this.getRawValue())},getRawValue:function(){var a=this,b=a.inputEl?a.inputEl.getValue():Ext.value(a.rawValue,"");return a.rawValue=b,b},setRawValue:function(a){var b=this;return a=Ext.value(a,""),b.rawValue=a,b.inputEl&&(b.inputEl.dom.value=a),a},valueToRaw:function(a){return""+Ext.value(a,"")},rawToValue:function(a){return a},processRawValue:function(a){return a},getValue:function(){var a=this,b=a.rawToValue(a.processRawValue(a.getRawValue()));return a.value=b,b},setValue:function(a){var b=this;return b.setRawValue(b.valueToRaw(a)),b.mixins.field.setValue.call(b,a)},onDisable:function(){var a=this,b=a.inputEl;a.callParent(),b&&(b.dom.disabled=!0)},onEnable:function(){var a=this,b=a.inputEl;a.callParent(),b&&(b.dom.disabled=!1)},setReadOnly:function(a){var b=this,c=b.inputEl;c&&(c.dom.readOnly=a,c.dom.setAttribute("aria-readonly",a)),b[a?"addCls":"removeCls"](b.readOnlyCls),b.readOnly=a},fireKey:function(a){a.isSpecialKey()&&this.fireEvent("specialkey",this,Ext.create("Ext.EventObjectImpl",a))},initEvents:function(){var a=this,b=a.inputEl,c,d;b&&(a.mon(b,Ext.EventManager.getKeyEvent(),a.fireKey,a),a.mon(b,"focus",a.onFocus,a),a.mon(b,"blur",a.onBlur,a,a.inEditor?{buffer:10}:null),c=Ext.create("Ext.util.DelayedTask",a.checkChange,a),a.onChangeEvent=d=function(){c.delay(a.checkChangeBuffer)},Ext.each(a.checkChangeEvents,function(c){c==="propertychange"&&(a.usesPropertychange=!0),a.mon(b,c,d)},a)),a.callParent()},doComponentLayout:function(){var a=this,b=a.inputEl,c=a.usesPropertychange,d="propertychange",e=a.onChangeEvent;c&&a.mun(b,d,e),a.callParent(arguments),c&&a.mon(b,d,e)},preFocus:Ext.emptyFn,onFocus:function(){var a=this,b=a.focusCls,c=a.inputEl;a.preFocus(),b&&c&&c.addCls(b),a.hasFocus||(a.hasFocus=!0,a.componentLayout.onFocus(),a.fireEvent("focus",a))},beforeBlur:Ext.emptyFn,onBlur:function(){var a=this,b=a.focusCls,c=a.inputEl;if(a.destroying)return;a.beforeBlur(),b&&c&&c.removeCls(b),a.validateOnBlur&&a.validate(),a.hasFocus=!1,a.fireEvent("blur",a),a.postBlur()},postBlur:Ext.emptyFn,onDirtyChange:function(a){this[a?"addCls":"removeCls"](this.dirtyCls)},isValid:function(){var a=this;return a.disabled||a.validateValue(a.processRawValue(a.getRawValue()))},validateValue:function(a){var b=this,c=b.getErrors(a),d=Ext.isEmpty(c);return b.preventMark||(d?b.clearInvalid():b.markInvalid(c)),d},markInvalid:function(a){var b=this,c=b.getActiveError();b.setActiveErrors(Ext.Array.from(a)),c!==b.getActiveError()&&b.doComponentLayout()},clearInvalid:function(){var a=this,b=a.hasActiveError();a.unsetActiveError(),b&&a.doComponentLayout()},renderActiveError:function(){var a=this,b=a.hasActiveError();a.inputEl&&a.inputEl[b?"addCls":"removeCls"](a.invalidCls+"-field"),a.mixins.labelable.renderActiveError.call(a)},getActionEl:function(){return this.inputEl||this.el}}),Ext.define("Ext.form.field.Text",{extend:"Ext.form.field.Base",alias:"widget.textfield",requires:["Ext.form.field.VTypes","Ext.layout.component.field.Text"],alternateClassName:["Ext.form.TextField","Ext.form.Text"],size:20,growMin:30,growMax:800,growAppend:"W",allowBlank:!0,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",blankText:"This field is required",regexText:"",emptyCls:Ext.baseCSSPrefix+"form-empty-field",ariaRole:"textbox",componentLayout:"textfield",initComponent:function(){this.callParent(),this.addEvents("autosize","keydown","keyup","keypress")},initEvents:function(){var a=this,b=a.inputEl;a.callParent(),(a.selectOnFocus||a.emptyText)&&a.mon(b,"mousedown",a.onMouseDown,a),(a.maskRe||a.vtype&&a.disableKeyFilter!==!0&&(a.maskRe=Ext.form.field.VTypes[a.vtype+"Mask"]))&&a.mon(b,"keypress",a.filterKeys,a),a.enableKeyEvents&&a.mon(b,{scope:a,keyup:a.onKeyUp,keydown:a.onKeyDown,keypress:a.onKeyPress})},isEqual:function(a,b){return this.isEqualAsString(a,b)},onChange:function(){this.callParent(),this.autoSize()},afterRender:function(){var a=this;a.enforceMaxLength&&(a.inputEl.dom.maxLength=a.maxLength),a.applyEmptyText(),a.autoSize(),a.callParent()},onMouseDown:function(a){var b=this;b.hasFocus||b.mon(b.inputEl,"mouseup",Ext.emptyFn,b,{single:!0,preventDefault:!0})},processRawValue:function(a){var b=this,c=b.stripCharsRe,d;return c&&(d=a.replace(c,""),d!==a&&(b.setRawValue(d),a=d)),a},onDisable:function(){this.callParent(),Ext.isIE&&(this.inputEl.dom.unselectable="on")},onEnable:function(){this.callParent(),Ext.isIE&&(this.inputEl.dom.unselectable="")},onKeyDown:function(a){this.fireEvent("keydown",this,a)},onKeyUp:function(a){this.fireEvent("keyup",this,a)},onKeyPress:function(a){this.fireEvent("keypress",this,a)},reset:function(){this.callParent(),this.applyEmptyText()},applyEmptyText:function(){var a=this,b=a.emptyText,c;a.rendered&&b&&(c=a.getRawValue().length<1&&!a.hasFocus,Ext.supports.Placeholder?a.inputEl.dom.placeholder=b:c&&a.setRawValue(b),c&&a.inputEl.addCls(a.emptyCls),a.autoSize())},preFocus:function(){var a=this,b=a.inputEl,c=a.emptyText,d;c&&!Ext.supports.Placeholder&&b.dom.value===c?(a.setRawValue(""),d=!0,b.removeCls(a.emptyCls)):Ext.supports.Placeholder&&a.inputEl.removeCls(a.emptyCls),(a.selectOnFocus||d)&&b.dom.select()},onFocus:function(){var a=this;a.callParent(arguments),a.emptyText&&a.autoSize()},postBlur:function(){this.applyEmptyText()},filterKeys:function(a){if(a.ctrlKey&&!a.altKey)return;var b=a.getKey(),c=String.fromCharCode(a.getCharCode());if(Ext.isGecko&&(a.isNavKeyPress()||b===a.BACKSPACE||b===a.DELETE&&a.button===-1))return;if(!Ext.isGecko&&a.isSpecialKey()&&!c)return;this.maskRe.test(c)||a.stopEvent()},getRawValue:function(){var a=this,b=a.callParent();return b===a.emptyText&&(b=""),b},setValue:function(a){var b=this,c=b.inputEl;return c&&b.emptyText&&!Ext.isEmpty(a)&&c.removeCls(b.emptyCls),b.callParent(arguments),b.applyEmptyText(),b},getErrors:function(a){var b=this,c=b.callParent(arguments),d=b.validator,e=b.emptyText,f=b.allowBlank,g=b.vtype,h=Ext.form.field.VTypes,i=b.regex,j=Ext.String.format,k;return a=a||b.processRawValue(b.getRawValue()),Ext.isFunction(d)&&(k=d.call(b,a),k!==!0&&c.push(k)),a.length<1||a===e?(f||c.push(b.blankText),c):(a.length<b.minLength&&c.push(j(b.minLengthText,b.minLength)),a.length>b.maxLength&&c.push(j(b.maxLengthText,b.maxLength)),g&&(h[g](a,b)||c.push(b.vtypeText||h[g+"Text"])),i&&!i.test(a)&&c.push(b.regexText||b.invalidText),c)},selectText:function(a,b){var c=this,d=c.getRawValue(),e=!0,f=c.inputEl.dom,g,h;d.length>0&&(a=a===g?0:a,b=b===g?d.length:b,f.setSelectionRange?f.setSelectionRange(a,b):f.createTextRange&&(h=f.createTextRange(),h.moveStart("character",a),h.moveEnd("character",b-d.length),h.select()),e=Ext.isGecko||Ext.isOpera),e&&c.focus()},autoSize:function(){var a=this,b;a.grow&&a.rendered&&(a.doComponentLayout(),b=a.inputEl.getWidth(),b!==a.lastInputWidth&&(a.fireEvent("autosize",b),a.lastInputWidth=b))},initAria:function(){this.callParent(),this.getActionEl().dom.setAttribute("aria-required",this.allowBlank===!1)},getBodyNaturalWidth:function(){return Math.round(this.size*6.5)+20}}),Ext.define("Ext.form.field.TextArea",{extend:"Ext.form.field.Text",alias:["widget.textareafield","widget.textarea"],alternateClassName:"Ext.form.TextArea",requires:["Ext.XTemplate","Ext.layout.component.field.TextArea"],fieldSubTpl:['<textarea id="{id}" ','<tpl if="name">name="{name}" </tpl>','<tpl if="rows">rows="{rows}" </tpl>','<tpl if="cols">cols="{cols}" </tpl>','<tpl if="tabIdx">tabIndex="{tabIdx}" </tpl>','class="{fieldCls} {typeCls}" ','autocomplete="off">',"</textarea>",{compiled:!0,disableFormats:!0}],growMin:60,growMax:1e3,growAppend:"\n-",cols:20,rows:4,enterIsSpecial:!1,preventScrollbars:!1,componentLayout:"textareafield",onRender:function(a,b){var c=this;Ext.applyIf(c.subTplData,{cols:c.cols,rows:c.rows}),c.callParent(arguments)},afterRender:function(){var a=this;a.callParent(arguments),a.grow&&(a.preventScrollbars&&a.inputEl.setStyle("overflow","hidden"),a.inputEl.setHeight(a.growMin))},fireKey:function(a){a.isSpecialKey()&&(this.enterIsSpecial||a.getKey()!==a.ENTER||a.hasModifier())&&this.fireEvent("specialkey",this,a)},autoSize:function(){var a=this,b;a.grow&&a.rendered&&(a.doComponentLayout(),b=a.inputEl.getHeight(),b!==a.lastInputHeight&&(a.fireEvent("autosize",b),a.lastInputHeight=b))},initAria:function(){this.callParent(arguments),this.getActionEl().dom.setAttribute("aria-multiline",!0)},getBodyNaturalWidth:function(){return Math.round(this.cols*6.5)+20}}),Ext.define("Ext.window.MessageBox",{extend:"Ext.window.Window",requires:["Ext.toolbar.Toolbar","Ext.form.field.Text","Ext.form.field.TextArea","Ext.button.Button","Ext.layout.container.Anchor","Ext.layout.container.HBox","Ext.ProgressBar"],alias:"widget.messagebox",OK:1,YES:2,NO:4,CANCEL:8,OKCANCEL:9,YESNO:6,YESNOCANCEL:14,INFO:"ext-mb-info",WARNING:"ext-mb-warning",QUESTION:"ext-mb-question",ERROR:"ext-mb-error",hideMode:"offsets",closeAction:"hide",resizable:!1,title:"&#160;",width:600,height:500,minWidth:250,maxWidth:600,minHeight:110,maxHeight:500,constrain:!0,cls:Ext.baseCSSPrefix+"message-box",layout:{type:"anchor"},defaultTextHeight:75,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"},buttonIds:["ok","yes","no","cancel"],titleText:{confirm:"Confirm",prompt:"Prompt",wait:"Loading...",alert:"Attention"},iconHeight:35,makeButton:function(a){var b=this.buttonIds[a];return Ext.create("Ext.button.Button",{handler:this.btnCallback,itemId:b,scope:this,text:this.buttonText[b],minWidth:75})},btnCallback:function(a){var b=this,c,d;if(b.cfg.prompt||b.cfg.multiline)b.cfg.multiline?d=b.textArea:d=b.textField,c=d.getValue(),d.reset();a.blur(),b.hide(),b.userCallback(a.itemId,c,b.cfg)},hide:function(){var a=this;a.dd.endDrag(),a.progressBar.reset(),a.removeCls(a.cfg.cls),a.callParent()},initComponent:function(){var a=this,b,c;a.title="&#160;",a.topContainer=Ext.create("Ext.container.Container",{anchor:"100%",style:{padding:"10px",overflow:"hidden"},items:[a.iconComponent=Ext.create("Ext.Component",{cls:"ext-mb-icon",width:50,height:a.iconHeight,style:{"float":"left"}}),a.promptContainer=Ext.create("Ext.container.Container",{layout:{type:"anchor"},items:[a.msg=Ext.create("Ext.Component",{autoEl:{tag:"span"},cls:"ext-mb-text"}),a.textField=Ext.create("Ext.form.field.Text",{anchor:"100%",enableKeyEvents:!0,listeners:{keydown:a.onPromptKey,scope:a}}),a.textArea=Ext.create("Ext.form.field.TextArea",{anchor:"100%",height:75})]})]}),a.progressBar=Ext.create("Ext.ProgressBar",{anchor:"-10",style:"margin-left:10px"}),a.items=[a.topContainer,a.progressBar],a.msgButtons=[];for(b=0;b<4;b++)c=a.makeButton(b),a.msgButtons[c.itemId]=c,a.msgButtons.push(c);a.bottomTb=Ext.create("Ext.toolbar.Toolbar",{ui:"footer",dock:"bottom",layout:{pack:"center"},items:[a.msgButtons[0],a.msgButtons[1],a.msgButtons[2],a.msgButtons[3]]}),a.dockedItems=[a.bottomTb],a.callParent()},onPromptKey:function(a,b){var c=this,d;if(b.keyCode===Ext.EventObject.RETURN||b.keyCode===10)c.msgButtons.ok.isVisible()?(d=!0,c.msgButtons.ok.handler.call(c,c.msgButtons.ok)):c.msgButtons.yes.isVisible()&&(c.msgButtons.yes.handler.call(c,c.msgButtons.yes),d=!0),d&&c.textField.blur()},reconfigure:function(a){var b=this,c=a.buttons||0,d=!0,e=b.maxWidth,f;a=a||{},b.cfg=a,a.width&&(e=a.width),delete b.defaultFocus,b.animateTarget=a.animateTarget||undefined,b.modal=a.modal!==!1,a.title&&b.setTitle(a.title||"&#160;"),b.rendered?b.setSize(e,b.maxHeight):(b.width=e,b.render(Ext.getBody())),b.setPosition(-1e4,-1e4),b.closable=a.closable&&!a.wait,b.header.child("[type=close]").setVisible(a.closable!==!1),!a.title&&!b.closable?b.header.hide():b.header.show(),b.liveDrag=!a.proxyDrag,b.userCallback=Ext.Function.bind(a.callback||a.fn||Ext.emptyFn,a.scope||Ext.global),b.setIcon(a.icon),a.msg?(b.msg.update(a.msg),b.msg.show()):b.msg.hide(),a.prompt||a.multiline?(b.multiline=a.multiline,a.multiline?(b.textArea.setValue(a.value),b.textArea.setHeight(a.defaultTextHeight||b.defaultTextHeight),b.textArea.show(),b.textField.hide(),b.defaultFocus=b.textArea):(b.textField.setValue(a.value),b.textArea.hide(),b.textField.show(),b.defaultFocus=b.textField)):(b.textArea.hide(),b.textField.hide()),a.progress||a.wait?(b.progressBar.show(),b.updateProgress(0,a.progressText),a.wait===!0&&b.progressBar.wait(a.waitConfig)):b.progressBar.hide();for(f=0;f<4;f++)c&Math.pow(2,f)?(b.defaultFocus||(b.defaultFocus=b.msgButtons[f]),b.msgButtons[f].show(),d=!1):b.msgButtons[f].hide();d?b.bottomTb.hide():b.bottomTb.show()},show:function(a){var b=this;return b.reconfigure(a),b.addCls(a.cls),a.animateTarget?(b.doAutoSize(!0),b.callParent()):(b.callParent(),b.doAutoSize(!0)),b},afterShow:function(){this.animateTarget&&this.center(),this.callParent(arguments)},doAutoSize:function(a){var b=this,c=b.iconComponent,d=b.iconHeight;Ext.isDefined(b.frameWidth)||(b.frameWidth=b.el.getWidth()-b.body.getWidth()),c.setHeight(d),b.minWidth=b.cfg.minWidth||Ext.getClass(this).prototype.minWidth,b.topContainer.doLayout();if(Ext.isIE6||Ext.isIEQuirks)b.textField.setCalculatedSize(9),b.textArea.setCalculatedSize(9);var e=b.cfg.width||b.msg.getWidth()+c.getWidth()+25,f=(b.header.rendered?b.header.getHeight():0)+Math.max(b.promptContainer.getHeight(),c.getHeight())+b.progressBar.getHeight()+(b.bottomTb.rendered?b.bottomTb.getHeight():0)+20;return c.setHeight(Math.max(d,b.msg.getHeight())),b.setSize(e+b.frameWidth,f+b.frameWidth),a&&b.center(),b},updateText:function(a){return this.msg.update(a),this.doAutoSize(!0)},setIcon:function(a){var b=this;return b.iconComponent.removeCls(b.iconCls),a?(b.iconComponent.show(),b.iconComponent.addCls(Ext.baseCSSPrefix+"dlg-icon"),b.iconComponent.addCls(b.iconCls=a)):(b.iconComponent.removeCls(Ext.baseCSSPrefix+"dlg-icon"),b.iconComponent.hide()),b},updateProgress:function(a,b,c){return this.progressBar.updateProgress(a,b),c&&this.updateText(c),this},onEsc:function(){this.closable!==!1&&this.callParent(arguments)},confirm:function(a,b,c,d){return Ext.isString(a)&&(a={title:a,icon:"ext-mb-question",msg:b,buttons:this.YESNO,callback:c,scope:d}),this.show(a)},prompt:function(a,b,c,d,e,f){return Ext.isString(a)&&(a={prompt:!0,title:a,minWidth:this.minPromptWidth,msg:b,buttons:this.OKCANCEL,callback:c,scope:d,multiline:e,value:f}),this.show(a)},wait:function(a,b,c){return Ext.isString(a)&&(a={title:b,msg:a,closable:!1,wait:!0,modal:!0,minWidth:this.minProgressWidth,waitConfig:c}),this.show(a)},alert:function(a,b,c,d){return Ext.isString(a)&&(a={title:a,msg:b,buttons:this.OK,fn:c,scope:d,minWidth:this.minWidth}),this.show(a)},progress:function(a,b,c){return Ext.isString(a)&&(a={title:a,msg:b,progress:!0,progressText:c}),this.show(a)}},function(){Ext.MessageBox=Ext.Msg=new this}),Ext.define("Ext.form.Basic",{extend:"Ext.util.Observable",alternateClassName:"Ext.form.BasicForm",requires:["Ext.util.MixedCollection","Ext.form.action.Load","Ext.form.action.Submit","Ext.window.MessageBox","Ext.data.Errors","Ext.util.DelayedTask"],constructor:function(a,b){var c=this,d=c.onItemAddOrRemove;c.owner=a,c.mon(a,{add:d,remove:d,scope:c}),Ext.apply(c,b),Ext.isString(c.paramOrder)&&(c.paramOrder=c.paramOrder.split(/[\s,|]/)),c.checkValidityTask=Ext.create("Ext.util.DelayedTask",c.checkValidity,c),c.addEvents("beforeaction","actionfailed","actioncomplete","validitychange","dirtychange"),c.callParent()},initialize:function(){this.initialized=!0,this.onValidityChange(!this.hasInvalidField())},timeout:30,paramsAsHash:!1,waitTitle:"Please Wait...",trackResetOnLoad:!1,wasDirty:!1,destroy:function(){this.clearListeners(),this.checkValidityTask.cancel()},onItemAddOrRemove:function(a,b){function f(a){c[d?"mon":"mun"](a,{validitychange:c.checkValidity,dirtychange:c.checkDirty,scope:c,buffer:100}),delete c._fields}var c=this,d=!!b.ownerCt,e=b.isContainer;b.isFormField?f(b):e&&(b.isDestroyed?delete c._fields:Ext.Array.forEach(b.query("[isFormField]"),f)),delete this._boundItems,c.initialized&&c.checkValidityTask.delay(10)},getFields:function(){var a=this._fields;return a||(a=this._fields=Ext.create("Ext.util.MixedCollection"),a.addAll(this.owner.query("[isFormField]"))),a},getBoundItems:function(){var a=this._boundItems;if(!a||a.getCount()===0)a=this._boundItems=Ext.create("Ext.util.MixedCollection"),a.addAll(this.owner.query("[formBind]"));return a},hasInvalidField:function(){return!!this.getFields().findBy(function(a){var b=a.preventMark,c;return a.preventMark=!0,c=a.isValid(),a.preventMark=b,!c})},isValid:function(){var a=this,b;return a.batchLayouts(function(){b=a.getFields().filterBy(function(a){return!a.validate()})}),b.length<1},checkValidity:function(){var a=this,b=!a.hasInvalidField();b!==a.wasValid&&(a.onValidityChange(b),a.fireEvent("validitychange",a,b),a.wasValid=b)},onValidityChange:function(a){var b=this.getBoundItems();b&&b.each(function(b){b.disabled===a&&b.setDisabled(!a)})},isDirty:function(){return!!this.getFields().findBy(function(a){return a.isDirty()})},checkDirty:function(){var a=this.isDirty();a!==this.wasDirty&&(this.fireEvent("dirtychange",this,a),this.wasDirty=a)},hasUpload:function(){return!!this.getFields().findBy(function(a){return a.isFileUpload()})},doAction:function(a,b){return Ext.isString(a)&&(a=Ext.ClassManager.instantiateByAlias("formaction."+a,Ext.apply({},b,{form:this}))),this.fireEvent("beforeaction",this,a)!==!1&&(this.beforeAction(a),Ext.defer(a.run,100,a)),this},submit:function(a){return this.doAction(this.standardSubmit?"standardsubmit":this.api?"directsubmit":"submit",a)},load:function(a){return this.doAction(this.api?"directload":"load",a)},updateRecord:function(a){var b=a.fields,c=this.getFieldValues(),d,e={};return b.each(function(a){d=a.name,d in c&&(e[d]=c[d])}),a.beginEdit(),a.set(e),a.endEdit(),this},loadRecord:function(a){return this._record=a,this.setValues(a.data)},getRecord:function(){return this._record},beforeAction:function(a){var b=a.waitMsg,c=Ext.baseCSSPrefix+"mask-loading",d;this.getFields().each(function(a){a.isFormField&&a.syncValue&&a.syncValue()}),b&&(d=this.waitMsgTarget,d===!0?this.owner.el.mask(b,c):d?(d=this.waitMsgTarget=Ext.get(d),d.mask(b,c)):Ext.MessageBox.wait(b,a.waitTitle||this.waitTitle))},afterAction:function(a,b){if(a.waitMsg){var c=Ext.MessageBox,d=this.waitMsgTarget;d===!0?this.owner.el.unmask():d?d.unmask():(c.updateProgress(1),c.hide())}b?(a.reset&&this.reset(),Ext.callback(a.success,a.scope||a,[this,a]),this.fireEvent("actioncomplete",this,a)):(Ext.callback(a.failure,a.scope||a,[this,a]),this.fireEvent("actionfailed",this,a))},findField:function(a){return this.getFields().findBy(function(b){return b.id===a||b.getName()===a})},markInvalid:function(a){function c(a,c){var d=b.findField(a);d&&d.markInvalid(c)}var b=this;return Ext.isArray(a)?Ext.each(a,function(a){c(a.id,a.msg)}):a instanceof Ext.data.Errors?a.each(function(a){c(a.field,a.message)}):Ext.iterate(a,c),this},setValues:function(a){function c(a,c){var d=b.findField(a);d&&(d.setValue(c),b.trackResetOnLoad&&d.resetOriginalValue())}var b=this;return Ext.isArray(a)?Ext.each(a,function(a){c(a.id,a.value)}):Ext.iterate(a,c),this},getValues:function(a,b,c,d){var e={};return this.getFields().each(function(a){if(!b||a.isDirty()){var f=a[d?"getModelData":"getSubmitData"](c);Ext.isObject(f)&&Ext.iterate(f,function(b,d){c&&d===""&&(d=a.emptyText||"");if(b in e){var f=e[b],g=Ext.isArray;g(f)||(f=e[b]=[f]),g(d)?e[b]=f.concat(d):f.push(d)}else e[b]=d})}}),a&&(e=Ext.Object.toQueryString(e)),e},getFieldValues:function(a){return this.getValues(!1,a,!1,!0)},clearInvalid:function(){var a=this;return a.batchLayouts(function(){a.getFields().each(function(a){a.clearInvalid()})}),a},reset:function(){var a=this;return a.batchLayouts(function(){a.getFields().each(function(a){a.reset()})}),a},applyToFields:function(a){return this.getFields().each(function(b){Ext.apply(b,a)}),this},applyIfToFields:function(a){return this.getFields().each(function(b){Ext.applyIf(b,a)}),this},batchLayouts:function(a){var b=this,c=new Ext.util.HashMap;b.getFields().each(function(a){var b=a.ownerCt;c.contains(b)||(c.add(b),b.oldSuspendLayout=b.suspendLayout,b.suspendLayout=!0)}),a(),c.each(function(a,b){b.suspendLayout=b.oldSuspendLayout,delete b.oldSuspendLayout}),b.owner.doComponentLayout()}}),Ext.define("Ext.form.FieldAncestor",{initFieldAncestor:function(){var a=this,b=a.onFieldAncestorSubtreeChange;a.addEvents("fieldvaliditychange","fielderrorchange"),a.on("add",b,a),a.on("remove",b,a),a.initFieldDefaults()},initFieldDefaults:function(){this.fieldDefaults||(this.fieldDefaults={})},onFieldAncestorSubtreeChange:function(a,b){function e(a){var b=a.isFieldLabelable,f=a.isFormField;b||f?(b&&c["onLabelable"+(d?"Added":"Removed")](a),f&&c["onField"+(d?"Added":"Removed")](a)):a.isContainer&&Ext.Array.forEach(a.getRefItems(),e)}var c=this,d=!!b.ownerCt;e(b)},onLabelableAdded:function(a){var b=this;b.mon(a,"errorchange",b.handleFieldErrorChange,b,{buffer:10}),a.setFieldDefaults(b.fieldDefaults)},onFieldAdded:function(a){var b=this;b.mon(a,"validitychange",b.handleFieldValidityChange,b)},onLabelableRemoved:function(a){var b=this;b.mun(a,"errorchange",b.handleFieldErrorChange,b)},onFieldRemoved:function(a){var b=this;b.mun(a,"validitychange",b.handleFieldValidityChange,b)},handleFieldValidityChange:function(a,b){var c=this;c.fireEvent("fieldvaliditychange",c,a,b),c.onFieldValidityChange()},handleFieldErrorChange:function(a,b){var c=this;c.fireEvent("fielderrorchange",c,a,b),c.onFieldErrorChange()},onFieldValidityChange:Ext.emptyFn,onFieldErrorChange:Ext.emptyFn}),Ext.define("Ext.layout.container.CheckboxGroup",{extend:"Ext.layout.container.Container",alias:["layout.checkboxgroup"],onLayout:function(){var a=this.getColCount(),b=this.getShadowCt(),c=this.owner,d=c.items,e=b.items,f=d.length,g=0,h,i;e.each(function(a){a.items.clear()});while(e.length>a)b.remove(e.last());while(e.length<a)b.add({xtype:"container",cls:c.groupCls,flex:1});if(c.vertical){i=Math.ceil(f/a);for(h=0;h<f;h++)h>0&&h%i===0&&g++,e.getAt(g).items.add(d.getAt(h))}else for(h=0;h<f;h++)g=h%a,e.getAt(g).items.add(d.getAt(h));b.rendered?e.each(function(a){var b=a.getLayout();b.renderItems(b.getLayoutItems(),b.getRenderTarget())}):b.render(this.getRenderTarget()),b.doComponentLayout()},renderItems:Ext.emptyFn,getShadowCt:function(){var a=this,b=a.shadowCt,c,d,e,f,g,h,i;if(!b){c=a.owner,f=c.columns,g=Ext.isArray(f),h=a.getColCount(),d=[];for(i=0;i<h;i++)e={xtype:"container",cls:c.groupCls},g?f[i]<1?e.flex=f[i]:e.width=f[i]:e.flex=1,d.push(e);b=a.shadowCt=Ext.createWidget("container",{layout:"hbox",items:d,ownerCt:c})}return b},getColCount:function(){var a=this.owner,b=a.columns;return Ext.isArray(b)?b.length:Ext.isNumber(b)?b:a.items.length}}),Ext.define("Ext.form.FieldContainer",{extend:"Ext.container.Container",mixins:{labelable:"Ext.form.Labelable",fieldAncestor:"Ext.form.FieldAncestor"},alias:"widget.fieldcontainer",componentLayout:"field",combineLabels:!1,labelConnector:", ",combineErrors:!1,maskOnDisable:!1,initComponent:function(){var a=this,b=a.onSubCmpAddOrRemove;a.initLabelable(),a.initFieldAncestor(),a.callParent()},onLabelableAdded:function(a){var b=this;b.mixins.fieldAncestor.onLabelableAdded.call(this,a),b.updateLabel()},onLabelableRemoved:function(a){var b=this;b.mixins.fieldAncestor.onLabelableRemoved.call(this,a),b.updateLabel()},onRender:function(){var a=this;a.onLabelableRender(),a.callParent(arguments)},initRenderTpl:function(){var a=this;return a.hasOwnProperty("renderTpl")||(a.renderTpl=a.getTpl("labelableRenderTpl")),a.callParent()},initRenderData:function(){return Ext.applyIf(this.callParent(),this.getLabelableRenderData())},getFieldLabel:function(){var a=this.fieldLabel||"";return!a&&this.combineLabels&&(a=Ext.Array.map(this.query("[isFieldLabelable]"),function(a){return a.getFieldLabel()}).join(this.labelConnector)),a},updateLabel:function(){var a=this,b=a.labelEl;b&&b.update(a.getFieldLabel())},onFieldErrorChange:function(a,b){if(this.combineErrors){var c=this,d=c.getActiveError(),e=Ext.Array.filter(c.query("[isFormField]"),function(a){return a.hasActiveError()}),f=c.getCombinedErrors(e);f?c.setActiveErrors(f):c.unsetActiveError(),d!==c.getActiveError()&&c.doComponentLayout()}},getCombinedErrors:function(a){var b=Ext.Array.forEach,c=[];return b(a,function(a){b(a.getActiveErrors(),function(b){var e=a.getFieldLabel();c.push((e?e+": ":"")+b)})}),c},getTargetEl:function(){return this.bodyEl||this.callParent()}}),Ext.define("Ext.form.CheckboxGroup",{extend:"Ext.form.FieldContainer",mixins:{field:"Ext.form.field.Field"},alias:"widget.checkboxgroup",requires:["Ext.layout.container.CheckboxGroup","Ext.form.field.Base"],columns:"auto",vertical:!1,allowBlank:!0,blankText:"You must select at least one item in this group",defaultType:"checkboxfield",groupCls:Ext.baseCSSPrefix+"form-check-group",fieldBodyCls:Ext.baseCSSPrefix+"form-checkboxgroup-body",layout:"checkboxgroup",initComponent:function(){var a=this;a.callParent(),a.initField()},initValue:function(){var a=this,b=a.value;a.originalValue=a.lastValue=b||a.getValue(),b&&a.setValue(b)},onFieldAdded:function(a){var b=this;a.isCheckbox&&b.mon(a,"change",b.checkChange,b),b.callParent(arguments)},onFieldRemoved:function(a){var b=this;a.isCheckbox&&b.mun(a,"change",b.checkChange,b),b.callParent(arguments)},isEqual:function(a,b){var c=Ext.Object.toQueryString;return c(a)===c(b)},getErrors:function(){var a=[];return!this.allowBlank&&Ext.isEmpty(this.getChecked())&&a.push(this.blankText),a},getBoxes:function(){return this.query("[isCheckbox]")},eachBox:function(a,b){Ext.Array.forEach(this.getBoxes(),a,b||this)},getChecked:function(){return Ext.Array.filter(this.getBoxes(),function(a){return a.getValue()})},isDirty:function(){return Ext.Array.some(this.getBoxes(),function(a){return a.isDirty()})},setReadOnly:function(a){this.eachBox(function(b){b.setReadOnly(a)}),this.readOnly=a},reset:function(){var a=this,b=a.hasActiveError(),c=a.preventMark;a.preventMark=!0,a.batchChanges(function(){a.eachBox(function(a){a.reset()})}),a.preventMark=c,a.unsetActiveError(),b&&a.doComponentLayout()},resetOriginalValue:function(){Ext.defer(function(){this.callParent()},1,this)},setValue:function(a){var b=this;return b.batchChanges(function(){b.eachBox(function(b){var c=b.getName(),d=!1;a&&c in a&&(Ext.isArray(a[c])?d=Ext.Array.contains(a[c],b.inputValue):d=a[c]),b.setValue(d)})}),b},getValue:function(){var a={};return this.eachBox(function(b){var c=b.getName(),d=b.inputValue,e;b.getValue()&&(c in a?(e=a[c],Ext.isArray(e)||(e=a[c]=[e]),e.push(d)):a[c]=d)}),a},getSubmitData:function(){return null},getModelData:function(){return null},validate:function(){var a=this,b=a.getErrors(),c=Ext.isEmpty(b),d=!a.hasActiveError();return c?a.unsetActiveError():a.setActiveError(b),c!==d&&(a.fireEvent("validitychange",a,c),a.doComponentLayout()),c}},function(){this.borrow(Ext.form.field.Base,["markInvalid","clearInvalid"])}),Ext.define("Ext.form.CheckboxManager",{extend:"Ext.util.MixedCollection",singleton:!0,getByName:function(a){return this.filterBy(function(b){return b.name==a})},getWithValue:function(a,b){return this.filterBy(function(c){return c.name==a&&c.inputValue==b})},getChecked:function(a){return this.filterBy(function(b){return b.name==a&&b.checked})}}),Ext.define("Ext.form.FieldSet",{extend:"Ext.container.Container",alias:"widget.fieldset",uses:["Ext.form.field.Checkbox","Ext.panel.Tool","Ext.layout.container.Anchor","Ext.layout.component.FieldSet"],collapsed:!1,baseCls:Ext.baseCSSPrefix+"fieldset",layout:"anchor",componentLayout:"fieldset",ariaRole:"",renderTpl:['<div id="{id}-body" class="{baseCls}-body"></div>'],maskOnDisable:!1,getElConfig:function(){return{tag:"fieldset",id:this.id}},initComponent:function(){var a=this,b=a.baseCls;a.callParent(),a.initLegend(),a.addChildEls("body"),a.collapsed&&(a.addCls(b+"-collapsed"),a.collapse())},onRender:function(a,b){this.callParent(arguments),this.initLegend()},initLegend:function(){var a=this,b,c=a.legend;!c&&(a.title||a.checkboxToggle||a.collapsible)&&(b=[],a.checkboxToggle?b.push(a.createCheckboxCmp()):a.collapsible&&b.push(a.createToggleCmp()),b.push(a.createTitleCmp()),c=a.legend=Ext.create("Ext.container.Container",{baseCls:a.baseCls+"-header",ariaRole:"",ownerCt:this,getElConfig:function(){var a={tag:"legend",cls:this.baseCls};return Ext.isGecko3||(a.children=[{cls:Ext.baseCSSPrefix+"clear"}]),a},items:b})),c&&!c.rendered&&a.rendered&&a.legend.render(a.el,a.body)},createTitleCmp:function(){var a=this;return a.titleCmp=Ext.create("Ext.Component",{html:a.title,getElConfig:function(){return{tag:Ext.isGecko3?"span":"div",cls:a.titleCmp.cls,id:a.titleCmp.id}},cls:a.baseCls+"-header-text"}),a.titleCmp},createCheckboxCmp:function(){var a=this,b="-checkbox";return a.checkboxCmp=Ext.create("Ext.form.field.Checkbox",{getElConfig:function(){return{tag:Ext.isGecko3?"span":"div",id:a.checkboxCmp.id,cls:a.checkboxCmp.cls}},name:a.checkboxName||a.id+b,cls:a.baseCls+"-header"+b,checked:!a.collapsed,listeners:{change:a.onCheckChange,scope:a}}),a.checkboxCmp},createToggleCmp:function(){var a=this;return a.toggleCmp=Ext.create("Ext.panel.Tool",{getElConfig:function(){return{tag:Ext.isGecko3?"span":"div",id:a.toggleCmp.id,cls:a.toggleCmp.cls}},type:"toggle",handler:a.toggle,scope:a}),a.toggleCmp},setTitle:function(a){var b=this;return b.title=a,b.initLegend(),b.titleCmp.update(a),b},getTargetEl:function(){return this.body||this.frameBody||this.el},getContentTarget:function(){return this.body},getRefItems:function(a){var b=this.callParent(arguments),c=this.legend;return c&&(b.unshift(c),a&&b.unshift.apply(b,c.getRefItems(!0))),b},expand:function(){return this.setExpanded(!0)},collapse:function(){return this.setExpanded(!1)},setExpanded:function(a){var b=this,c=b.checkboxCmp;return a=!!a,c&&c.setValue(a),a?b.removeCls(b.baseCls+"-collapsed"):b.addCls(b.baseCls+"-collapsed"),b.collapsed=!a,a&&(b.getComponentLayout().childrenChanged=!0),b.doComponentLayout(),b},toggle:function(){this.setExpanded(!!this.collapsed)},onCheckChange:function(a,b){this.setExpanded(b)},beforeDestroy:function(){var a=this.legend;a&&a.destroy(),this.callParent()}}),Ext.define("Ext.form.Label",{extend:"Ext.Component",alias:"widget.label",requires:["Ext.util.Format"],maskOnDisable:!1,getElConfig:function(){var a=this;return{tag:"label",id:a.id,htmlFor:a.forId||"",html:a.text?Ext.util.Format.htmlEncode(a.text):a.html||""}},setText:function(a,b){var c=this;return b=b!==!1,b?(c.text=a,delete c.html):(c.html=a,delete c.text),c.rendered&&(c.el.dom.innerHTML=b!==!1?Ext.util.Format.htmlEncode(a):a),this}}),Ext.define("Ext.form.Panel",{extend:"Ext.panel.Panel",mixins:{fieldAncestor:"Ext.form.FieldAncestor"},alias:"widget.form",alternateClassName:["Ext.FormPanel","Ext.form.FormPanel"],requires:["Ext.form.Basic","Ext.util.TaskRunner"],layout:"anchor",ariaRole:"form",initComponent:function(){var a=this;a.frame&&(a.border=!1),a.initFieldAncestor(),a.callParent(),a.relayEvents(a.form,["beforeaction","actionfailed","actioncomplete","validitychange","dirtychange"]),a.pollForChanges&&a.startPolling(a.pollInterval||500)},initItems:function(){var a=this;a.form=a.createForm(),a.callParent(),a.form.initialize()},createForm:function(){return Ext.create("Ext.form.Basic",this,Ext.applyIf({listeners:{}},this.initialConfig))},getForm:function(){return this.form},loadRecord:function(a){return this.getForm().loadRecord(a)},getRecord:function(){return this.getForm().getRecord()},getValues:function(){return this.getForm().getValues()},beforeDestroy:function(){this.stopPolling(),this.form.destroy(),this.callParent()},load:function(a){this.form.load(a)},submit:function(a){this.form.submit(a)},disable:function(a){this.callParent(arguments),this.form.getFields().each(function(a){a.disable()})},enable:function(a){this.callParent(arguments),this.form.getFields().each(function(a){a.enable()})},startPolling:function(a){this.stopPolling();var b=Ext.create("Ext.util.TaskRunner",a);b.start({interval:0,run:this.checkChange,scope:this}),this.pollTask=b},stopPolling:function(){var a=this.pollTask;a&&(a.stopAll(),delete this.pollTask)},checkChange:function(){this.form.getFields().each(function(a){a.checkChange()})}}),Ext.define("Ext.form.RadioGroup",{extend:"Ext.form.CheckboxGroup",alias:"widget.radiogroup",allowBlank:!0,blankText:"You must select one item in this group",defaultType:"radiofield",groupCls:Ext.baseCSSPrefix+"form-radio-group",getBoxes:function(){return this.query("[isRadio]")},setValue:function(a){var b=this;return Ext.isObject(a)&&Ext.Object.each(a,function(a,b){var c=Ext.form.RadioManager.getWithValue(a,b);c.each(function(a){a.setValue(!0)})}),b}}),Ext.define("Ext.form.RadioManager",{extend:"Ext.util.MixedCollection",singleton:!0,getByName:function(a){return this.filterBy(function(b){return b.name==a})},getWithValue:function(a,b){return this.filterBy(function(c){return c.name==a&&c.inputValue==b})},getChecked:function(a){return this.findBy(function(b){return b.name==a&&b.checked})}}),Ext.define("Ext.form.action.DirectLoad",{extend:"Ext.form.action.Load",requires:["Ext.direct.Manager"],alternateClassName:"Ext.form.Action.DirectLoad",alias:"formaction.directload",type:"directload",run:function(){this.form.api.load.apply(window,this.getArgs())},getArgs:function(){var a=this,b=[],c=a.form,d=c.paramOrder,e=a.getParams(),f,g;if(d)for(f=0,g=d.length;f<g;f++)b.push(e[d[f]]);else c.paramsAsHash&&b.push(e);return b.push(a.onSuccess,a),b},processResponse:function(a){return this.result=a},onSuccess:function(a,b){b.type==Ext.direct.Manager.self.exceptions.SERVER&&(a={}),this.callParent([a])}}),Ext.define("Ext.form.action.DirectSubmit",{extend:"Ext.form.action.Submit",requires:["Ext.direct.Manager"],alternateClassName:"Ext.form.Action.DirectSubmit",alias:"formaction.directsubmit",type:"directsubmit",doSubmit:function(){var a=this,b=Ext.Function.bind(a.onSuccess,a),c=a.buildForm();a.form.api.submit(c,b,a),Ext.removeNode(c)},processResponse:function(a){return this.result=a},onSuccess:function(a,b){b.type===Ext.direct.Manager.self.exceptions.SERVER&&(a={}),this.callParent([a])}}),Ext.define("Ext.form.action.StandardSubmit",{extend:"Ext.form.action.Submit",alias:"formaction.standardsubmit",doSubmit:function(){var a=this.buildForm();a.submit(),Ext.removeNode(a)}}),Ext.define("Ext.form.field.Checkbox",{extend:"Ext.form.field.Base",alias:["widget.checkboxfield","widget.checkbox"],alternateClassName:"Ext.form.Checkbox",requires:["Ext.XTemplate","Ext.form.CheckboxManager"],fieldSubTpl:["<tpl if=\"boxLabel && boxLabelAlign == 'before'\">",'<label id="{cmpId}-boxLabelEl" class="{boxLabelCls} {boxLabelCls}-{boxLabelAlign}" for="{id}">{boxLabel}</label>',"</tpl>",'<input type="button" id="{id}" ','<tpl if="tabIdx">tabIndex="{tabIdx}" </tpl>','class="{fieldCls} {typeCls}" autocomplete="off" hidefocus="true" />',"<tpl if=\"boxLabel && boxLabelAlign == 'after'\">",'<label id="{cmpId}-boxLabelEl" class="{boxLabelCls} {boxLabelCls}-{boxLabelAlign}" for="{id}">{boxLabel}</label>',"</tpl>",{disableFormats:!0,compiled:!0}],isCheckbox:!0,focusCls:Ext.baseCSSPrefix+"form-cb-focus",fieldBodyCls:Ext.baseCSSPrefix+"form-cb-wrap",checked:!1,checkedCls:Ext.baseCSSPrefix+"form-cb-checked",boxLabelCls:Ext.baseCSSPrefix+"form-cb-label",boxLabelAlign:"after",inputValue:"on",checkChangeEvents:[],inputType:"checkbox",ariaRole:"checkbox",onRe:/^on$/i,initComponent:function(){this.callParent(arguments),this.getManager().add(this)},initValue:function(){var a=this,b=!!a.checked;a.originalValue=a.lastValue=b,a.setValue(b)},onRender:function(a,b){var c=this;c.addChildEls("boxLabelEl"),Ext.applyIf(c.subTplData,{boxLabel:c.boxLabel,boxLabelCls:c.boxLabelCls,boxLabelAlign:c.boxLabelAlign}),c.callParent(arguments)},initEvents:function(){var a=this;a.callParent(),a.mon(a.inputEl,"click",a.onBoxClick,a)},onBoxClick:function(a){var b=this;!b.disabled&&!b.readOnly&&this.setValue(!this.checked)},getRawValue:function(){return this.checked},getValue:function(){return this.checked},getSubmitValue:function(){var a=this.uncheckedValue,b=Ext.isDefined(a)?a:null;return this.checked?this.inputValue:b},setRawValue:function(a){var b=this,c=b.inputEl,d=b.inputValue,e=a===!0||a==="true"||a==="1"||a===1||((Ext.isString(a)||Ext.isNumber(a))&&d?a==d:b.onRe.test(a));return c&&(c.dom.setAttribute("aria-checked",e),b[e?"addCls":"removeCls"](b.checkedCls)),b.checked=b.rawValue=e,e},setValue:function(a){var b=this;return Ext.isArray(a)?b.getManager().getByName(b.name).each(function(b){b.setValue(Ext.Array.contains(a,b.inputValue))}):b.callParent(arguments),b},valueToRaw:function(a){return a},onChange:function(a,b){var c=this,d=c.handler;d&&d.call(c.scope||c,c,a),c.callParent(arguments)},beforeDestroy:function(){this.callParent(),this.getManager().removeAtKey(this.id)},getManager:function(){return Ext.form.CheckboxManager},onEnable:function(){var a=this,b=a.inputEl;a.callParent(),b&&(b.dom.disabled=a.readOnly)},setReadOnly:function(a){var b=this,c=b.inputEl;c&&(c.dom.disabled=a||b.disabled),b.readOnly=a},getBodyNaturalWidth:function(){var a=this,b=a.bodyEl,c="white-space",d;return b.setStyle(c,"nowrap"),d=b.getWidth(),b.setStyle(c,""),d}}),Ext.define("Ext.layout.component.field.Trigger",{alias:["layout.triggerfield"],extend:"Ext.layout.component.field.Field",type:"triggerfield",sizeBodyContents:function(a,b){var c=this,d=c.owner,e=d.inputEl,f=d.triggerWrap,g=d.getTriggerWidth();if(d.hideTrigger||d.readOnly||g>0)c.setElementSize(e,Ext.isNumber(a)?a-g:a),f.setWidth(g)}}),Ext.define("Ext.view.View",{extend:"Ext.view.AbstractView",alternateClassName:"Ext.DataView",alias:"widget.dataview",inheritableStatics:{EventMap:{mousedown:"MouseDown",mouseup:"MouseUp",click:"Click",dblclick:"DblClick",contextmenu:"ContextMenu",mouseover:"MouseOver",mouseout:"MouseOut",mouseenter:"MouseEnter",mouseleave:"MouseLeave",keydown:"KeyDown",focus:"Focus"}},addCmpEvents:function(){this.addEvents("beforeitemmousedown","beforeitemmouseup","beforeitemmouseenter","beforeitemmouseleave","beforeitemclick","beforeitemdblclick","beforeitemcontextmenu","beforeitemkeydown","itemmousedown","itemmouseup","itemmouseenter","itemmouseleave","itemclick","itemdblclick","itemcontextmenu","itemkeydown","beforecontainermousedown","beforecontainermouseup","beforecontainermouseover","beforecontainermouseout","beforecontainerclick","beforecontainerdblclick","beforecontainercontextmenu","beforecontainerkeydown","containermouseup","containermouseover","containermouseout","containerclick","containerdblclick","containercontextmenu","containerkeydown","selectionchange","beforeselect")},afterRender:function(){var a=this,b;a.callParent(),b={scope:a,freezeEvent:!0,click:a.handleEvent,mousedown:a.handleEvent,mouseup:a.handleEvent,dblclick:a.handleEvent,contextmenu:a.handleEvent,mouseover:a.handleEvent,mouseout:a.handleEvent,keydown:a.handleEvent},a.mon(a.getTargetEl(),b),a.store&&a.bindStore(a.store,!0)},handleEvent:function(a){this.processUIEvent(a)!==!1&&this.processSpecialEvent(a)},processItemEvent:Ext.emptyFn,processContainerEvent:Ext.emptyFn,processSpecialEvent:Ext.emptyFn,stillOverItem:function(a,b){var c;return b&&typeof b.offsetParent=="object"?(c=a.type=="mouseout"?a.getRelatedTarget():a.getTarget(),Ext.fly(b).contains(c)):!1},processUIEvent:function(a){var b=this,c=a.getTarget(b.getItemSelector(),b.getTargetEl()),d=this.statics().EventMap,e,f,g=a.type,h=b.mouseOverItem,i;c||(g=="mouseover"&&b.stillOverItem(a,h)&&(c=h),g=="keydown"&&(f=b.getSelectionModel().getLastSelected(),f&&(c=b.getNode(f))));if(c){e=b.indexOf(c),f||(f=b.getRecord(c));if(b.processItemEvent(f,c,e,a)===!1)return!1;i=b.isNewItemEvent(c,a);if(i===!1)return!1;if(b["onBeforeItem"+d[i]](f,c,e,a)===!1||b.fireEvent("beforeitem"+i,b,f,c,e,a)===!1||b["onItem"+d[i]](f,c,e,a)===!1)return!1;b.fireEvent("item"+i,b,f,c,e,a)}else{if(b.processContainerEvent(a)===!1||b["onBeforeContainer"+d[g]](a)===!1||b.fireEvent("beforecontainer"+g,b,a)===!1||b["onContainer"+d[g]](a)===!1)return!1;b.fireEvent("container"+g,b,a)}return!0},isNewItemEvent:function(a,b){var c=this,d=c.mouseOverItem,e=b.type;switch(e){case"mouseover":if(a===d)return!1;return c.mouseOverItem=a,"mouseenter";case"mouseout":if(c.stillOverItem(b,d))return!1;return c.mouseOverItem=null,"mouseleave"}return e},onItemMouseEnter:function(a,b,c,d){this.trackOver&&this.highlightItem(b)},onItemMouseLeave:function(a,b,c,d){this.trackOver&&this.clearHighlight()},onItemMouseDown:Ext.emptyFn,onItemMouseUp:Ext.emptyFn,onItemFocus:Ext.emptyFn,onItemClick:Ext.emptyFn,onItemDblClick:Ext.emptyFn,onItemContextMenu:Ext.emptyFn,onItemKeyDown:Ext.emptyFn,onBeforeItemMouseDown:Ext.emptyFn,onBeforeItemMouseUp:Ext.emptyFn,onBeforeItemFocus:Ext.emptyFn,onBeforeItemMouseEnter:Ext.emptyFn,onBeforeItemMouseLeave:Ext.emptyFn,onBeforeItemClick:Ext.emptyFn,onBeforeItemDblClick:Ext.emptyFn,onBeforeItemContextMenu:Ext.emptyFn,onBeforeItemKeyDown:Ext.emptyFn,onContainerMouseDown:Ext.emptyFn,onContainerMouseUp:Ext.emptyFn,onContainerMouseOver:Ext.emptyFn,onContainerMouseOut:Ext.emptyFn,onContainerClick:Ext.emptyFn,onContainerDblClick:Ext.emptyFn,onContainerContextMenu:Ext.emptyFn,onContainerKeyDown:Ext.emptyFn,onBeforeContainerMouseDown:Ext.emptyFn,onBeforeContainerMouseUp:Ext.emptyFn,onBeforeContainerMouseOver:Ext.emptyFn,onBeforeContainerMouseOut:Ext.emptyFn,onBeforeContainerClick:Ext.emptyFn,onBeforeContainerDblClick:Ext.emptyFn,onBeforeContainerContextMenu:Ext.emptyFn,onBeforeContainerKeyDown:Ext.emptyFn,highlightItem:function(a){var b=this;b.clearHighlight(),b.highlightedItem=a,Ext.fly(a).addCls(b.overItemCls)},clearHighlight:function(){var a=this,b=a.highlightedItem;b&&(Ext.fly(b).removeCls(a.overItemCls),delete a.highlightedItem)},refresh:function(){var a=this;a.clearHighlight(),a.callParent(arguments),a.isFixedHeight()||a.doComponentLayout()}}),Ext.define("Ext.layout.component.BoundList",{extend:"Ext.layout.component.Component",alias:"layout.boundlist",type:"component",beforeLayout:function(){return this.callParent(arguments)||this.owner.refreshed>0},onLayout:function(a,b){var c=this,d=c.owner,e=d.floating,f=d.el,g=f.getXY(),h=Ext.isNumber,i,j,k,l,m,n,o,p,q;e&&f.setXY([-9999,-9999]),c.setTargetSize(a,b);if(!h(a)){i=d.minWidth,j=d.maxWidth;if(h(i)||h(j))m=f.getWidth(),m<i?o=i:m>j&&(o=j),o&&c.setTargetSize(o)}if(!h(b)){k=d.minHeight,l=d.maxHeight;if(h(k)||h(l))n=f.getHeight(),n<k?p=k:n>l&&(p=l),p&&c.setTargetSize(q,p)}e&&f.setXY(g)},afterLayout:function(){var a=this,b=a.owner.pagingToolbar;a.callParent(),b&&b.doComponentLayout()},setTargetSize:function(a,b){var c=this,d=c.owner,e=null,f;Ext.isNumber(b)&&(e=b-d.el.getFrameWidth("tb"),f=d.pagingToolbar,f&&(e-=f.getHeight())),c.setElementSize(d.listEl,null,e),c.callParent(arguments)}}),Ext.define("Ext.toolbar.TextItem",{extend:"Ext.toolbar.Item",requires:["Ext.XTemplate"],alias:"widget.tbtext",alternateClassName:"Ext.Toolbar.TextItem",text:"",renderTpl:"{text}",baseCls:Ext.baseCSSPrefix+"toolbar-text",onRender:function(){Ext.apply(this.renderData,{text:this.text}),this.callParent(arguments)},setText:function(a){this.rendered?(this.el.update(a),this.ownerCt.doLayout()):this.text=a}}),Ext.define("Ext.form.field.Trigger",{extend:"Ext.form.field.Text",alias:["widget.triggerfield","widget.trigger"],requires:["Ext.DomHelper","Ext.util.ClickRepeater","Ext.layout.component.field.Trigger"],alternateClassName:["Ext.form.TriggerField","Ext.form.TwinTriggerField","Ext.form.Trigger"],fieldSubTpl:['<input id="{id}" type="{type}" ','<tpl if="name">name="{name}" </tpl>','<tpl if="size">size="{size}" </tpl>','<tpl if="tabIdx">tabIndex="{tabIdx}" </tpl>','class="{fieldCls} {typeCls}" autocomplete="off" />','<div id="{cmpId}-triggerWrap" class="{triggerWrapCls}" role="presentation">',"{triggerEl}",'<div class="{clearCls}" role="presentation"></div>',"</div>",{compiled:!0,disableFormats:!0}],triggerBaseCls:Ext.baseCSSPrefix+"form-trigger",triggerWrapCls:Ext.baseCSSPrefix+"form-trigger-wrap",hideTrigger:!1,editable:!0,readOnly:!1,repeatTriggerClick:!1,autoSize:Ext.emptyFn,monitorTab:!0,mimicing:!1,triggerIndexRe:/trigger-index-(\d+)/,componentLayout:"triggerfield",initComponent:function(){this.wrapFocusCls=this.triggerWrapCls+"-focus",this.callParent(arguments)},onRender:function(a,b){var c=this,d,e=c.triggerBaseCls,f=c.triggerWrapCls,g=[],h;c.trigger1Cls||(c.trigger1Cls=c.triggerCls);for(h=0;(d=c["trigger"+(h+1)+"Cls"])||h<1;h++)g.push({cls:[Ext.baseCSSPrefix+"trigger-index-"+h,e,d].join(" "),role:"button"});g[h-1].cls+=" "+e+"-last",c.addChildEls("triggerWrap"),Ext.applyIf(c.subTplData,{triggerWrapCls:f,triggerEl:Ext.DomHelper.markup(g),clearCls:c.clearCls}),c.callParent(arguments),c.triggerEl=Ext.select("."+e,!0,c.triggerWrap.dom),c.doc=Ext.getDoc(),c.initTrigger()},onEnable:function(){this.callParent(),this.triggerWrap.unmask()},onDisable:function(){this.callParent(),this.triggerWrap.mask()},afterRender:function(){this.callParent(),this.updateEditState(),this.triggerEl.unselectable()},updateEditState:function(){var a=this,b=a.inputEl,c=a.triggerWrap,d=Ext.baseCSSPrefix+"trigger-noedit",e,f;a.rendered&&(a.readOnly?(b.addCls(d),f=!0,e=!1):(a.editable?(b.removeCls(d),f=!1):(b.addCls(d),f=!0),e=!a.hideTrigger),c.setDisplayed(e),b.dom.readOnly=f,a.doComponentLayout())},getTriggerWidth:function(){var a=this,b=a.triggerWrap,c=0;return b&&!a.hideTrigger&&!a.readOnly&&(a.triggerEl.each(function(a){c+=a.getWidth()}),c+=a.triggerWrap.getFrameWidth("lr")),c},setHideTrigger:function(a){a!=this.hideTrigger&&(this.hideTrigger=a,this.updateEditState())},setEditable:function(a){a!=this.editable&&(this.editable=a,this.updateEditState())},setReadOnly:function(a){a!=this.readOnly&&(this.readOnly=a,this.updateEditState())},initTrigger:function(){var a=this,b=a.triggerWrap,c=a.triggerEl;a.repeatTriggerClick?a.triggerRepeater=Ext.create("Ext.util.ClickRepeater",b,{preventDefault:!0,handler:function(b,c){a.onTriggerWrapClick(c)}}):a.mon(a.triggerWrap,"click",a.onTriggerWrapClick,a),c.addClsOnOver(a.triggerBaseCls+"-over"),c.each(function(b,c,d){b.addClsOnOver(a["trigger"+(d+1)+"Cls"]+"-over")}),c.addClsOnClick(a.triggerBaseCls+"-click"),c.each(function(b,c,d){b.addClsOnClick(a["trigger"+(d+1)+"Cls"]+"-click")})},onDestroy:function(){var a=this;Ext.destroyMembers(a,"triggerRepeater","triggerWrap","triggerEl"),delete a.doc,a.callParent()},onFocus:function(){var a=this;a.callParent(),a.mimicing||(a.bodyEl.addCls(a.wrapFocusCls),a.mimicing=!0,a.mon(a.doc,"mousedown",a.mimicBlur,a,{delay:10}),a.monitorTab&&a.on("specialkey",a.checkTab,a))},checkTab:function(a,b){!this.ignoreMonitorTab&&b.getKey()==b.TAB&&this.triggerBlur()},onBlur:Ext.emptyFn,mimicBlur:function(a){!this.isDestroyed&&!this.bodyEl.contains(a.target)&&this.validateBlur(a)&&this.triggerBlur()},triggerBlur:function(){var a=this;a.mimicing=!1,a.mun(a.doc,"mousedown",a.mimicBlur,a),a.monitorTab&&a.inputEl&&a.un("specialkey",a.checkTab,a),Ext.form.field.Trigger.superclass.onBlur.call(a),a.bodyEl&&a.bodyEl.removeCls(a.wrapFocusCls)},beforeBlur:Ext.emptyFn,validateBlur:function(a){return!0},onTriggerWrapClick:function(a){var b=this,c=a&&a.getTarget("."+Ext.baseCSSPrefix+"form-trigger",null),d=c&&c.className.match(b.triggerIndexRe),e,f;d&&!b.readOnly&&(e=parseInt(d[1],10),f=b["onTrigger"+(e+1)+"Click"]||b.onTriggerClick,f&&f.call(b,a))},onTriggerClick:Ext.emptyFn}),Ext.define("Ext.form.field.Picker",{extend:"Ext.form.field.Trigger",alias:"widget.pickerfield",alternateClassName:"Ext.form.Picker",requires:["Ext.util.KeyNav"],matchFieldWidth:!0,pickerAlign:"tl-bl?",openCls:Ext.baseCSSPrefix+"pickerfield-open",editable:!0,initComponent:function(){this.callParent(),this.addEvents("expand","collapse","select")},initEvents:function(){var a=this;a.callParent(),a.keyNav=Ext.create("Ext.util.KeyNav",a.inputEl,{down:function(){a.isExpanded||a.onTriggerClick()},esc:a.collapse,scope:a,forceKeyDown:!0}),a.editable||a.mon(a.inputEl,"click",a.onTriggerClick,a),Ext.isGecko&&a.inputEl.dom.setAttribute("autocomplete","off")},expand:function(){var a=this,b,c,d;a.rendered&&!a.isExpanded&&!a.isDestroyed&&(b=a.bodyEl,c=a.getPicker(),d=a.collapseIf,c.show(),a.isExpanded=!0,a.alignPicker(),b.addCls(a.openCls),a.mon(Ext.getDoc(),{mousewheel:d,mousedown:d,scope:a}),Ext.EventManager.onWindowResize(a.alignPicker,a),a.fireEvent("expand",a),a.onExpand())},onExpand:Ext.emptyFn,alignPicker:function(){var a=this,b;a.isExpanded&&(b=a.getPicker(),a.matchFieldWidth&&b.setSize(a.bodyEl.getWidth(),b.store&&b.store.getCount()?null:0),b.isFloating()&&a.doAlign())},doAlign:function(){var a=this,b=a.picker,c="-above",d;a.picker.alignTo(a.inputEl,a.pickerAlign,a.pickerOffset),d=b.el.getY()<a.inputEl.getY(),a.bodyEl[d?"addCls":"removeCls"](a.openCls+c),b[d?"addCls":"removeCls"](b.baseCls+c)},collapse:function(){if(this.isExpanded&&!this.isDestroyed){var a=this,b=a.openCls,c=a.picker,d=Ext.getDoc(),e=a.collapseIf,f="-above";c.hide(),a.isExpanded=!1,a.bodyEl.removeCls([b,b+f]),c.el.removeCls(c.baseCls+f),d.un("mousewheel",e,a),d.un("mousedown",e,a),Ext.EventManager.removeResizeListener(a.alignPicker,a),a.fireEvent("collapse",a),a.onCollapse()}},onCollapse:Ext.emptyFn,collapseIf:function(a){var b=this;!b.isDestroyed&&!a.within(b.bodyEl,!1,!0)&&!a.within(b.picker.el,!1,!0)&&b.collapse()},getPicker:function(){var a=this;return a.picker||(a.picker=a.createPicker())},createPicker:Ext.emptyFn,onTriggerClick:function(){var a=this;!a.readOnly&&!a.disabled&&(a.isExpanded?a.collapse():a.expand(),a.inputEl.focus())},mimicBlur:function(a){var b=this,c=b.picker;(!c||!a.within(c.el,!1,!0))&&b.callParent(arguments)},onDestroy:function(){var a=this,b=a.picker;Ext.EventManager.removeResizeListener(a.alignPicker,a),Ext.destroy(a.keyNav),b&&(delete b.pickerField,b.destroy()),a.callParent()}}),Ext.define("Ext.form.field.Spinner",{extend:"Ext.form.field.Trigger",alias:"widget.spinnerfield",alternateClassName:"Ext.form.Spinner",requires:["Ext.util.KeyNav"],trigger1Cls:Ext.baseCSSPrefix+"form-spinner-up",trigger2Cls:Ext.baseCSSPrefix+"form-spinner-down",spinUpEnabled:!0,spinDownEnabled:!0,keyNavEnabled:!0,mouseWheelEnabled:!0,repeatTriggerClick:!0,onSpinUp:Ext.emptyFn,onSpinDown:Ext.emptyFn,initComponent:function(){this.callParent(),this.addEvents("spin","spinup","spindown")},onRender:function(){var a=this,b;a.callParent(arguments),b=a.triggerEl,a.spinUpEl=b.item(0),a.spinDownEl=b.item(1),a.setSpinUpEnabled(a.spinUpEnabled),a.setSpinDownEnabled(a.spinDownEnabled),a.keyNavEnabled&&(a.spinnerKeyNav=Ext.create("Ext.util.KeyNav",a.inputEl,{scope:a,up:a.spinUp,down:a.spinDown})),a.mouseWheelEnabled&&a.mon(a.bodyEl,"mousewheel",a.onMouseWheel,a)},getTriggerWidth:function(){return this.hideTrigger||this.readOnly?0:this.spinUpEl.getWidth()+this.triggerWrap.getFrameWidth("lr")},onTrigger1Click:function(){this.spinUp()},onTrigger2Click:function(){this.spinDown()},spinUp:function(){var a=this;a.spinUpEnabled&&!a.disabled&&(a.fireEvent("spin",a,"up"),a.fireEvent("spinup",a),a.onSpinUp())},spinDown:function(){var a=this;a.spinDownEnabled&&!a.disabled&&(a.fireEvent("spin",a,"down"),a.fireEvent("spindown",a),a.onSpinDown())},setSpinUpEnabled:function(a){var b=this,c=b.spinUpEnabled;b.spinUpEnabled=a,c!==a&&b.rendered&&b.spinUpEl[a?"removeCls":"addCls"](b.trigger1Cls+"-disabled")},setSpinDownEnabled:function(a){var b=this,c=b.spinDownEnabled;b.spinDownEnabled=a,c!==a&&b.rendered&&b.spinDownEl[a?"removeCls":"addCls"](b.trigger2Cls+"-disabled")},onMouseWheel:function(a){var b=this,c;b.hasFocus&&(c=a.getWheelDelta(),c>0?b.spinUp():c<0&&b.spinDown(),a.stopEvent())},onDestroy:function(){Ext.destroyMembers(this,"spinnerKeyNav","spinUpEl","spinDownEl"),this.callParent()}}),Ext.define("Ext.form.field.Number",{extend:"Ext.form.field.Spinner",alias:"widget.numberfield",alternateClassName:["Ext.form.NumberField","Ext.form.Number"],allowDecimals:!0,decimalSeparator:".",decimalPrecision:2,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,step:1,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",negativeText:"The value cannot be negative",baseChars:"0123456789",autoStripChars:!1,initComponent:function(){var a=this,b;a.callParent(),a.setMinValue(a.minValue),a.setMaxValue(a.maxValue),a.disableKeyFilter!==!0&&(b=a.baseChars+"",a.allowDecimals&&(b+=a.decimalSeparator),a.minValue<0&&(b+="-"),b=Ext.String.escapeRegex(b),a.maskRe=new RegExp("["+b+"]"),a.autoStripChars&&(a.stripCharsRe=new RegExp("[^"+b+"]","gi")))},getErrors:function(a){var b=this,c=b.callParent(arguments),d=Ext.String.format,e;return a=Ext.isDefined(a)?a:this.processRawValue(this.getRawValue()),a.length<1?c:(a=String(a).replace(b.decimalSeparator,"."),isNaN(a)&&c.push(d(b.nanText,a)),e=b.parseValue(a),b.minValue===0&&e<0?c.push(this.negativeText):e<b.minValue&&c.push(d(b.minText,b.minValue)),e>b.maxValue&&c.push(d(b.maxText,b.maxValue)),c)},rawToValue:function(a){var b=this.fixPrecision(this.parseValue(a));return b===null&&(b=a||null),b},valueToRaw:function(a){var b=this,c=b.decimalSeparator;return a=b.parseValue(a),a=b.fixPrecision(a),a=Ext.isNumber(a)?a:parseFloat(String(a).replace(c,".")),a=isNaN(a)?"":String(a).replace(".",c),a},onChange:function(){var a=this,b=a.getValue(),c=b===null;a.callParent(arguments),a.setSpinUpEnabled(c||b<a.maxValue),a.setSpinDownEnabled(c||b>a.minValue)},setMinValue:function(a){this.minValue=Ext.Number.from(a,Number.NEGATIVE_INFINITY)},setMaxValue:function(a){this.maxValue=Ext.Number.from(a,Number.MAX_VALUE)},parseValue:function(a){return a=parseFloat(String(a).replace(this.decimalSeparator,".")),isNaN(a)?null:a},fixPrecision:function(a){var b=this,c=isNaN(a),d=b.decimalPrecision;if(c||!a)return c?"":a;if(!b.allowDecimals||d<=0)d=0;return parseFloat(Ext.Number.toFixed(parseFloat(a),d))},beforeBlur:function(){var a=this,b=a.parseValue(a.getRawValue());Ext.isEmpty(b)||a.setValue(b)},onSpinUp:function(){var a=this;a.readOnly||a.setValue(Ext.Number.constrain(a.getValue()+a.step,a.minValue,a.maxValue))},onSpinDown:function(){var a=this;a.readOnly||a.setValue(Ext.Number.constrain(a.getValue()-a.step,a.minValue,a.maxValue))}}),Ext.define("Ext.toolbar.Paging",{extend:"Ext.toolbar.Toolbar",alias:"widget.pagingtoolbar",alternateClassName:"Ext.PagingToolbar",requires:["Ext.toolbar.TextItem","Ext.form.field.Number"],displayInfo:!1,prependButtons:!1,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",inputItemWidth:30,getPagingItems:function(){var a=this;return[{itemId:"first",tooltip:a.firstText,overflowText:a.firstText,iconCls:Ext.baseCSSPrefix+"tbar-page-first",disabled:!0,handler:a.moveFirst,scope:a},{itemId:"prev",tooltip:a.prevText,overflowText:a.prevText,iconCls:Ext.baseCSSPrefix+"tbar-page-prev",disabled:!0,handler:a.movePrevious,scope:a},"-",a.beforePageText,{xtype:"numberfield",itemId:"inputItem",name:"inputItem",cls:Ext.baseCSSPrefix+"tbar-page-number",allowDecimals:!1,minValue:1,hideTrigger:!0,enableKeyEvents:!0,selectOnFocus:!0,submitValue:!1,width:a.inputItemWidth,margins:"-1 2 3 2",listeners:{scope:a,keydown:a.onPagingKeyDown,blur:a.onPagingBlur}},{xtype:"tbtext",itemId:"afterTextItem",text:Ext.String.format(a.afterPageText,1)},"-",{itemId:"next",tooltip:a.nextText,overflowText:a.nextText,iconCls:Ext.baseCSSPrefix+"tbar-page-next",disabled:!0,handler:a.moveNext,scope:a},{itemId:"last",tooltip:a.lastText,overflowText:a.lastText,iconCls:Ext.baseCSSPrefix+"tbar-page-last",disabled:!0,handler:a.moveLast,scope:a},"-",{itemId:"refresh",tooltip:a.refreshText,overflowText:a.refreshText,iconCls:Ext.baseCSSPrefix+"tbar-loading",handler:a.doRefresh,scope:a}]},initComponent:function(){var a=this,b=a.getPagingItems(),c=a.items||a.buttons||[];a.prependButtons?a.items=c.concat(b):a.items=b.concat(c),delete a.buttons,a.displayInfo&&(a.items.push("->"),a.items.push({xtype:"tbtext",itemId:"displayItem"})),a.callParent(),a.addEvents("change","beforechange"),a.on("afterlayout",a.onLoad,a,{single:!0}),a.bindStore(a.store||"ext-empty-store",!0)},updateInfo:function(){var a=this,b=a.child("#displayItem"),c=a.store,d=a.getPageData(),e,f;b&&(e=c.getCount(),e===0?f=a.emptyMsg:f=Ext.String.format(a.displayMsg,d.fromRecord,d.toRecord,d.total),b.setText(f),a.doComponentLayout())},onLoad:function(){var a=this,b,c,d,e;if(!a.rendered)return;b=a.getPageData(),c=b.currentPage,d=b.pageCount,e=Ext.String.format(a.afterPageText,isNaN(d)?1:d),a.child("#afterTextItem").setText(e),a.child("#inputItem").setValue(c),a.child("#first").setDisabled(c===1),a.child("#prev").setDisabled(c===1),a.child("#next").setDisabled(c===d),a.child("#last").setDisabled(c===d),a.child("#refresh").enable(),a.updateInfo(),a.fireEvent("change",a,b)},getPageData:function(){var a=this.store,b=a.getTotalCount();return{total:b,currentPage:a.currentPage,pageCount:Math.ceil(b/a.pageSize),fromRecord:(a.currentPage-1)*a.pageSize+1,toRecord:Math.min(a.currentPage*a.pageSize,b)}},onLoadError:function(){if(!this.rendered)return;this.child("#refresh").enable()},readPageFromInput:function(a){var b=this.child("#inputItem").getValue(),c=parseInt(b,10);return!b||isNaN(c)?(this.child("#inputItem").setValue(a.currentPage),!1):c},onPagingFocus:function(){this.child("#inputItem").select()},onPagingBlur:function(a){var b=this.getPageData().currentPage;this.child("#inputItem").setValue(b)},onPagingKeyDown:function(a,b){var c=this,d=b.getKey(),e=c.getPageData(),f=b.shiftKey?10:1,g;if(d==b.RETURN)b.stopEvent(),g=c.readPageFromInput(e),g!==!1&&(g=Math.min(Math.max(1,g),e.pageCount),c.fireEvent("beforechange",c,g)!==!1&&c.store.loadPage(g));else if(d==b.HOME||d==b.END)b.stopEvent(),g=d==b.HOME?1:e.pageCount,a.setValue(g);else if(d==b.UP||d==b.PAGEUP||d==b.DOWN||d==b.PAGEDOWN){b.stopEvent(),g=c.readPageFromInput(e);if(g){if(d==b.DOWN||d==b.PAGEDOWN)f*=-1;g+=f,g>=1&&g<=e.pages&&a.setValue(g)}}},beforeLoad:function(){this.rendered&&this.refresh&&this.refresh.disable()},doLoad:function(a){this.fireEvent("beforechange",this,o)!==!1&&this.store.load()},moveFirst:function(){this.fireEvent("beforechange",this,1)!==!1&&this.store.loadPage(1)},movePrevious:function(){var a=this,b=a.store.currentPage-1;b>0&&a.fireEvent("beforechange",a,b)!==!1&&a.store.previousPage()},moveNext:function(){var a=this,b=a.getPageData().pageCount,c=a.store.currentPage+1;c<=b&&a.fireEvent("beforechange",a,c)!==!1&&a.store.nextPage()},moveLast:function(){var a=this,b=a.getPageData().pageCount;a.fireEvent("beforechange",a,b)!==!1&&a.store.loadPage(b)},doRefresh:function(){var a=this,b=a.store.currentPage;a.fireEvent("beforechange",a,b)!==!1&&a.store.loadPage(b)},bindStore:function(a,b){var c=this;!b&&c.store&&(a!==c.store&&c.store.autoDestroy?c.store.destroyStore():(c.store.un("beforeload",c.beforeLoad,c),c.store.un("load",c.onLoad,c),c.store.un("exception",c.onLoadError,c)),a||(c.store=null)),a&&(a=Ext.data.StoreManager.lookup(a),a.on({scope:c,beforeload:c.beforeLoad,load:c.onLoad,exception:c.onLoadError})),c.store=a},unbind:function(a){this.bindStore(null)},bind:function(a){this.bindStore(a)},onDestroy:function(){this.bindStore(null),this.callParent()}}),Ext.define("Ext.view.BoundList",{extend:"Ext.view.View",alias:"widget.boundlist",alternateClassName:"Ext.BoundList",requires:["Ext.layout.component.BoundList","Ext.toolbar.Paging"],pageSize:0,autoScroll:!0,baseCls:Ext.baseCSSPrefix+"boundlist",itemCls:Ext.baseCSSPrefix+"boundlist-item",listItemCls:"",shadow:!1,trackOver:!0,refreshed:0,ariaRole:"listbox",componentLayout:"boundlist",renderTpl:['<div id="{id}-listEl" class="list-ct"></div>'],initComponent:function(){var a=this,b=a.baseCls,c=a.itemCls;a.selectedItemCls=b+"-selected",a.overItemCls=b+"-item-over",a.itemSelector="."+c,a.floating&&a.addCls(b+"-floating"),a.tpl?Ext.isString(a.tpl)&&(a.tpl=Ext.create("Ext.XTemplate",a.tpl)):a.tpl=Ext.create("Ext.XTemplate",'<ul><tpl for=".">','<li role="option" class="'+c+'">'+a.getInnerTpl(a.displayField)+"</li>","</tpl></ul>"),a.pageSize&&(a.pagingToolbar=a.createPagingToolbar()),a.callParent(),a.addChildEls("listEl")},createPagingToolbar:function(){return Ext.widget("pagingtoolbar",{pageSize:this.pageSize,store:this.store,border:!1})},onRender:function(){var a=this,b=a.pagingToolbar;a.callParent(arguments),b&&b.render(a.el)},bindStore:function(a,b){var c=this,d=c.pagingToolbar;c.callParent(arguments),d&&d.bindStore(a,b)},getTargetEl:function(){return this.listEl||this.el},getInnerTpl:function(a){return"{"+a+"}"},refresh:function(){var a=this;a.callParent(),a.isVisible()&&(a.refreshed++,a.doComponentLayout(),a.refreshed--)},initAria:function(){this.callParent();var a=this.getSelectionModel(),b=a.getSelectionMode(),c=this.getActionEl();b!=="SINGLE"&&c.dom.setAttribute("aria-multiselectable",!0)},onDestroy:function(){Ext.destroyMembers(this,"pagingToolbar","listEl"),this.callParent()}}),Ext.define("Ext.view.BoundListKeyNav",{extend:"Ext.util.KeyNav",requires:"Ext.view.BoundList",constructor:function(a,b){var c=this;c.boundList=b.boundList,c.callParent([a,Ext.apply({},b,c.defaultHandlers)])},defaultHandlers:{up:function(){var a=this,b=a.boundList,c=b.all,d=b.highlightedItem,e=d?b.indexOf(d):-1,f=e>0?e-1:c.getCount()-1;a.highlightAt(f)},down:function(){var a=this,b=a.boundList,c=b.all,d=b.highlightedItem,e=d?b.indexOf(d):-1,f=e<c.getCount()-1?e+1:0;a.highlightAt(f)},pageup:function(){},pagedown:function(){},home:function(){this.highlightAt(0)},end:function(){var a=this;a.highlightAt(a.boundList.all.getCount()-1)},enter:function(a){this.selectHighlighted(a)}},highlightAt:function(a){var b=this.boundList,c=b.all.item(a);c&&(c=c.dom,b.highlightItem(c),b.getTargetEl().scrollChildIntoView(c,!1))},selectHighlighted:function(a){var b=this,c=b.boundList,d=c.highlightedItem,e=c.getSelectionModel();d&&e.selectWithEvent(c.getRecord(d),a)}}),Ext.define("Ext.form.field.ComboBox",{extend:"Ext.form.field.Picker",requires:["Ext.util.DelayedTask","Ext.EventObject","Ext.view.BoundList","Ext.view.BoundListKeyNav","Ext.data.StoreManager"],alternateClassName:"Ext.form.ComboBox",alias:["widget.combobox","widget.combo"],triggerCls:Ext.baseCSSPrefix+"form-arrow-trigger",hiddenDataCls:Ext.baseCSSPrefix+"hide-display "+Ext.baseCSSPrefix+"form-data-hidden",fieldSubTpl:['<div class="{hiddenDataCls}" role="presentation"></div>','<input id="{id}" type="{type}" ','<tpl if="size">size="{size}" </tpl>','<tpl if="tabIdx">tabIndex="{tabIdx}" </tpl>','class="{fieldCls} {typeCls}" autocomplete="off" />','<div id="{cmpId}-triggerWrap" class="{triggerWrapCls}" role="presentation">',"{triggerEl}",'<div class="{clearCls}" role="presentation"></div>',"</div>",{compiled:!0,disableFormats:!0}],getSubTplData:function(){var a=this;return Ext.applyIf(a.subTplData,{hiddenDataCls:a.hiddenDataCls}),a.callParent(arguments)},afterRender:function(){var a=this;a.callParent(arguments),a.setHiddenValue(a.value)},multiSelect:!1,delimiter:", ",displayField:"text",triggerAction:"all",allQuery:"",queryParam:"query",queryMode:"remote",queryCaching:!0,pageSize:0,autoSelect:!0,typeAhead:!1,typeAheadDelay:250,selectOnTab:!0,forceSelection:!1,defaultListConfig:{emptyText:"",loadingText:"Loading...",loadingHeight:70,minWidth:70,maxHeight:300,shadow:"sides"},ignoreSelection:0,initComponent:function(){var a=this,b=Ext.isDefined,c=a.store,d=a.transform,e,f;Ext.applyIf(a.renderSelectors,{hiddenDataEl:"."+a.hiddenDataCls.split(" ").join(".")}),this.addEvents("beforequery","select","beforeselect","beforedeselect"),d&&(e=Ext.getDom(d),e&&(c=Ext.Array.map(Ext.Array.from(e.options),function(a){return[a.value,a.text]}),a.name||(a.name=e.name),"value"in a||(a.value=e.value))),a.bindStore(c||"ext-empty-store",!0),c=a.store,c.autoCreated&&(a.queryMode="local",a.valueField=a.displayField="field1",c.expanded||(a.displayField="field2")),b(a.valueField)||(a.valueField=a.displayField),f=a.queryMode==="local",b(a.queryDelay)||(a.queryDelay=f?10:500),b(a.minChars)||(a.minChars=f?0:4),a.displayTpl?Ext.isString(a.displayTpl)&&(a.displayTpl=Ext.create("Ext.XTemplate",a.displayTpl)):a.displayTpl=Ext.create("Ext.XTemplate",'<tpl for=".">{[typeof values === "string" ? values : values["'+a.displayField+'"]]}<tpl if="xindex < xcount">'+a.delimiter+"</tpl></tpl>"),a.callParent(),a.doQueryTask=Ext.create("Ext.util.DelayedTask",a.doRawQuery,a),a.store.getCount()>0&&a.setValue(a.value),e&&(a.render(e.parentNode,e),Ext.removeNode(e),delete a.renderTo)},getStore:function(){return this.store},beforeBlur:function(){this.doQueryTask.cancel(),this.assertValue()},assertValue:function(){var a=this,b=a.getRawValue(),c;a.forceSelection&&(a.multiSelect?b!==a.getDisplayValue()&&a.setValue(a.lastSelection):(c=a.findRecordByDisplay(b),c?a.select(c):a.setValue(a.lastSelection))),a.collapse()},onTypeAhead:function(){var a=this,b=a.displayField,c=a.store.findRecord(b,a.getRawValue()),d=a.getPicker(),e,f,g;c&&(e=c.get(b),f=e.length,g=a.getRawValue().length,d.highlightItem(d.getNode(c)),g!==0&&g!==f&&(a.setRawValue(e),a.selectText(g,e.length)))},resetToDefault:function(){},bindStore:function(a,b){var c=this,d=c.store;d&&!b&&(d!==a&&d.autoDestroy?d.destroyStore():d.un({scope:c,load:c.onLoad,exception:c.collapse}),a||(c.store=null,c.picker&&c.picker.bindStore(null))),a&&(b||c.resetToDefault(),c.store=Ext.data.StoreManager.lookup(a),c.store.on({scope:c,load:c.onLoad,exception:c.collapse}),c.picker&&c.picker.bindStore(a))},onLoad:function(){var a=this,b=a.value;a.rawQuery?(a.rawQuery=!1,a.syncSelection(),a.picker&&!a.picker.getSelectionModel().hasSelection()&&a.doAutoSelect()):a.value?a.setValue(a.value):a.store.getCount()?a.doAutoSelect():a.setValue("")},doRawQuery:function(){this.doQuery(this.getRawValue(),!1,!0)},doQuery:function(a,b,c){a=a||"";var d=this,e={query:a,forceAll:b,combo:d,cancel:!1},f=d.store,g=d.queryMode==="local";if(d.fireEvent("beforequery",e)===!1||e.cancel)return!1;a=e.query,b=e.forceAll;if(b||a.length>=d.minChars){d.expand();if(!d.queryCaching||d.lastQuery!==a)d.lastQuery=a,g?b?f.clearFilter():(f.clearFilter(!0),f.filter(d.displayField,a)):(d.rawQuery=c,d.pageSize?d.loadPage(1):f.load({params:d.getParams(a)}));d.getRawValue()!==d.getDisplayValue()&&(d.ignoreSelection++,d.picker.getSelectionModel().deselectAll(),d.ignoreSelection--),g&&d.doAutoSelect(),d.typeAhead&&d.doTypeAhead()}return!0},loadPage:function(a){this.store.loadPage(a,{params:this.getParams(this.lastQuery)})},onPageChange:function(a,b){return this.loadPage(b),!1},getParams:function(a){var b={},c=this.queryParam;return c&&(b[c]=a),b},doAutoSelect:function(){var a=this,b=a.picker,c,d;b&&a.autoSelect&&a.store.getCount()>0&&(c=b.getSelectionModel().lastSelected,d=b.getNode(c||0),d&&(b.highlightItem(d),b.listEl.scrollChildIntoView(d,!1)))},doTypeAhead:function(){this.typeAheadTask||(this.typeAheadTask=Ext.create("Ext.util.DelayedTask",this.onTypeAhead,this)),this.lastKey!=Ext.EventObject.BACKSPACE&&this.lastKey!=Ext.EventObject.DELETE&&this.typeAheadTask.delay(this.typeAheadDelay)},onTriggerClick:function(){var a=this;!a.readOnly&&!a.disabled&&(a.isExpanded?a.collapse():(a.onFocus({}),a.triggerAction==="all"?a.doQuery(a.allQuery,!0):a.doQuery(a.getRawValue(),!1,!0)),a.inputEl.focus())},onKeyUp:function(a,b){var c=this,d=a.getKey();!c.readOnly&&!c.disabled&&c.editable&&(c.lastKey=d,(!a.isSpecialKey()||d==a.BACKSPACE||d==a.DELETE)&&c.doQueryTask.delay(c.queryDelay)),c.enableKeyEvents&&c.callParent(arguments)},initEvents:function(){var a=this;a.callParent(),a.enableKeyEvents||a.mon(a.inputEl,"keyup",a.onKeyUp,a)},onDestroy:function(){this.bindStore(null),this.callParent()},createPicker:function(){var a=this,b,c=Ext.baseCSSPrefix+"menu",d=Ext.apply({pickerField:a,selModel:{mode:a.multiSelect?"SIMPLE":"SINGLE"},floating:!0,hidden:!0,ownerCt:a.ownerCt,cls:a.el.up("."+c)?c:"",store:a.store,displayField:a.displayField,focusOnToFront:!1,pageSize:a.pageSize,tpl:a.tpl},a.listConfig,a.defaultListConfig);return b=a.picker=Ext.create("Ext.view.BoundList",d),a.pageSize&&b.pagingToolbar.on("beforechange",a.onPageChange,a),a.mon(b,{itemclick:a.onItemClick,refresh:a.onListRefresh,scope:a}),a.mon(b.getSelectionModel(),{beforeselect:a.onBeforeSelect,beforedeselect:a.onBeforeDeselect,selectionchange:a.onListSelectionChange,scope:a}),b},alignPicker:function(){var a=this,b=a.picker,c=a.getPosition()[1]-Ext.getBody().getScroll().top,d=Ext.Element.getViewHeight()-c-a.getHeight(),e=Math.max(c,d);a.callParent(),b.getHeight()>e&&(b.setHeight(e-5),a.doAlign())},onListRefresh:function(){this.alignPicker(),this.syncSelection()},onItemClick:function(a,b){var c=this,d=c.lastSelection,e=c.valueField,f;!c.multiSelect&&d&&(f=d[0],f&&b.get(e)===f.get(e)&&(c.displayTplData=[b.data],c.setRawValue(c.getDisplayValue()),c.collapse()))},onBeforeSelect:function(a,b){return this.fireEvent("beforeselect",this,b,b.index)},onBeforeDeselect:function(a,b){return this.fireEvent("beforedeselect",this,b,b.index)},onListSelectionChange:function(a,b){var c=this,d=c.multiSelect,e=b.length>0;!c.ignoreSelection&&c.isExpanded&&(d||Ext.defer(c.collapse,1,c),(d||e)&&c.setValue(b,!1),e&&c.fireEvent("select",c,b),c.inputEl.focus())},onExpand:function(){var a=this,b=a.listKeyNav,c=a.selectOnTab,d=a.getPicker();b?b.enable():b=a.listKeyNav=Ext.create("Ext.view.BoundListKeyNav",this.inputEl,{boundList:d,forceKeyDown:!0,tab:function(b){return c&&(this.selectHighlighted(b),a.triggerBlur()),!0}}),c&&(a.ignoreMonitorTab=!0),Ext.defer(b.enable,1,b),a.inputEl.focus()},onCollapse:function(){var a=this,b=a.listKeyNav;b&&(b.disable(),a.ignoreMonitorTab=!1)},select:function(a){this.setValue(a,!0)},findRecord:function(a,b){var c=this.store,d=c.findExact(a,b);return d!==-1?c.getAt(d):!1},findRecordByValue:function(a){return this.findRecord(this.valueField,a)},findRecordByDisplay:function(a){return this.findRecord(this.displayField,a)},setValue:function(a,b){var c=this,d=c.valueNotFoundText,e=c.inputEl,f,g,h,i=[],j=[],k=[];if(c.store.loading)return c.value=a,c.setHiddenValue(c.value),c;a=Ext.Array.from(a);for(f=0,g=a.length;f<g;f++){h=a[f];if(!h||!h.isModel)h=c.findRecordByValue(h);h?(i.push(h),j.push(h.data),k.push(h.get(c.valueField))):c.forceSelection?Ext.isDefined(d)&&j.push(d):(j.push(a[f]),k.push(a[f]))}return c.setHiddenValue(k),c.value=c.multiSelect?k:k[0],Ext.isDefined(c.value)||(c.value=null),c.displayTplData=j,c.lastSelection=c.valueModels=i,e&&c.emptyText&&!Ext.isEmpty(a)&&e.removeCls(c.emptyCls),c.setRawValue(c.getDisplayValue()),c.checkChange(),b!==!1&&c.syncSelection(),c.applyEmptyText(),c},setHiddenValue:function(a){var b=this,c;if(!b.hiddenDataEl)return;a=Ext.Array.from(a);var d=b.hiddenDataEl.dom,e=d.childNodes,f=e[0],g=a.length,h=e.length;!f&&g>0&&(b.hiddenDataEl.update(Ext.DomHelper.markup({tag:"input",type:"hidden",name:b.name})),h=1,f=d.firstChild);while(h>g)d.removeChild(e[0]),--h;while(h<g)d.appendChild(f.cloneNode(!0)),++h;for(c=0;c<g;c++)e[c].value=a[c]},getDisplayValue:function(){return this.displayTpl.apply(this.displayTplData)},getValue:function(){var a=this,b=a.picker,c=a.getRawValue(),d=a.value;return a.getDisplayValue()!==c&&(d=c,a.value=a.displayTplData=a.valueModels=null,b&&(a.ignoreSelection++,b.getSelectionModel().deselectAll(),a.ignoreSelection--)),d},getSubmitValue:function(){return this.getValue()},isEqual:function(a,b){var c=Ext.Array.from,d,e;a=c(a),b=c(b),e=a.length;if(e!==b.length)return!1;for(d=0;d<e;d++)if(b[d]!==a[d])return!1;return!0},clearValue:function(){this.setValue([])},syncSelection:function(){var a=this,b=Ext.Array,c=a.picker,d,e;c&&(d=[],b.forEach(a.valueModels||[],function(b){b&&b.isModel&&a.store.indexOf(b)>=0&&d.push(b)}),a.ignoreSelection++,e=c.getSelectionModel(),e.deselectAll(),d.length&&e.select(d),a.ignoreSelection--)}}),Ext.define("Ext.picker.Month",{extend:"Ext.Component",requires:["Ext.XTemplate","Ext.util.ClickRepeater","Ext.Date","Ext.button.Button"],alias:"widget.monthpicker",alternateClassName:"Ext.MonthPicker",renderTpl:['<div id="{id}-bodyEl" class="{baseCls}-body">','<div class="{baseCls}-months">','<tpl for="months">','<div class="{parent.baseCls}-item {parent.baseCls}-month"><a href="#" hidefocus="on">{.}</a></div>',"</tpl>","</div>",'<div class="{baseCls}-years">','<div class="{baseCls}-yearnav">','<button id="{id}-prevEl" class="{baseCls}-yearnav-prev"></button>','<button id="{id}-nextEl" class="{baseCls}-yearnav-next"></button>',"</div>",'<tpl for="years">','<div class="{parent.baseCls}-item {parent.baseCls}-year"><a href="#" hidefocus="on">{.}</a></div>',"</tpl>","</div>",'<div class="'+Ext.baseCSSPrefix+'clear"></div>',"</div>",'<tpl if="showButtons">','<div id="{id}-buttonsEl" class="{baseCls}-buttons"></div>',"</tpl>"],okText:"OK",cancelText:"Cancel",baseCls:Ext.baseCSSPrefix+"monthpicker",showButtons:!0,width:178,smallCls:Ext.baseCSSPrefix+"monthpicker-small",totalYears:10,yearOffset:5,monthOffset:6,initComponent:function(){var a=this;a.selectedCls=a.baseCls+"-selected",a.addEvents("cancelclick","monthclick","monthdblclick","okclick","select","yearclick","yeardblclick"),a.small&&a.addCls(a.smallCls),a.setValue(a.value),a.activeYear=a.getYear((new Date).getFullYear()-4,-4),this.callParent()},onRender:function(a,b){var c=this,d=0,e=[],f=Ext.Date.getShortMonthName,g=c.monthOffset;for(;d<g;++d)e.push(f(d),f(d+g));Ext.apply(c.renderData,{months:e,years:c.getYears(),showButtons:c.showButtons}),c.addChildEls("bodyEl","prevEl","nextEl","buttonsEl"),c.callParent(arguments)},afterRender:function(){var a=this,b=a.bodyEl,c=a.buttonsEl;a.callParent(),a.mon(b,"click",a.onBodyClick,a),a.mon(b,"dblclick",a.onBodyClick,a),a.years=b.select("."+a.baseCls+"-year a"),a.months=b.select("."+a.baseCls+"-month a"),a.showButtons&&(a.okBtn=Ext.create("Ext.button.Button",{text:a.okText,renderTo:c,handler:a.onOkClick,scope:a}),a.cancelBtn=Ext.create("Ext.button.Button",{text:a.cancelText,renderTo:c,handler:a.onCancelClick,scope:a})),a.backRepeater=Ext.create("Ext.util.ClickRepeater",a.prevEl,{handler:Ext.Function.bind(a.adjustYear,a,[-a.totalYears])}),a.prevEl.addClsOnOver(a.baseCls+"-yearnav-prev-over"),a.nextRepeater=Ext.create("Ext.util.ClickRepeater",a.nextEl,{handler:Ext.Function.bind(a.adjustYear,a,[a.totalYears])}),a.nextEl.addClsOnOver(a.baseCls+"-yearnav-next-over"),a.updateBody()},setValue:function(a){var b=this,c=b.activeYear,d=b.monthOffset,e,f;return a?Ext.isDate(a)?b.value=[a.getMonth(),a.getFullYear()]:b.value=[a[0],a[1]]:b.value=[null,null],b.rendered&&(e=b.value[1],e!==null&&(e<c||e>c+b.yearOffset)&&(b.activeYear=e-b.yearOffset+1),b.updateBody()),b},getValue:function(){return this.value},hasSelection:function(){var a=this.value;return a[0]!==null&&a[1]!==null},getYears:function(){var a=this,b=a.yearOffset,c=a.activeYear,d=c+b,e=c,f=[];for(;e<d;++e)f.push(e,e+b);return f},updateBody:function(){var a=this,b=a.years,c=a.months,d=a.getYears(),e=a.selectedCls,f=a.getYear(null),g=a.value[0],h=a.monthOffset,i;a.rendered&&(b.removeCls(e),c.removeCls(e),b.each(function(a,b,c){i=d[c],a.dom.innerHTML=i,i==f&&(a.dom.className=e)}),g!==null&&(g<h?g*=2:g=(g-h)*2+1,c.item(g).addCls(e)))},getYear:function(a,b){var c=this.value[1];return b=b||0,c===null?a:c+b},onBodyClick:function(a,b){var c=this,d=a.type=="dblclick";a.getTarget("."+c.baseCls+"-month")?(a.stopEvent(),c.onMonthClick(b,d)):a.getTarget("."+c.baseCls+"-year")&&(a.stopEvent(),c.onYearClick(b,d))},adjustYear:function(a){typeof a!="number"&&(a=this.totalYears),this.activeYear+=a,this.updateBody()},onOkClick:function(){this.fireEvent("okclick",this,this.value)},onCancelClick:function(){this.fireEvent("cancelclick",this)},onMonthClick:function(a,b){var c=this;c.value[0]=c.resolveOffset(c.months.indexOf(a),c.monthOffset),c.updateBody(),c.fireEvent("month"+(b?"dbl":"")+"click",c,c.value),c.fireEvent("select",c,c.value)},onYearClick:function(a,b){var c=this;c.value[1]=c.activeYear+c.resolveOffset(c.years.indexOf(a),c.yearOffset),c.updateBody(),c.fireEvent("year"+(b?"dbl":"")+"click",c,c.value),c.fireEvent("select",c,c.value)},resolveOffset:function(a,b){return a%2===0?a/2:b+Math.floor(a/2)},beforeDestroy:function(){var a=this;a.years=a.months=null,Ext.destroyMembers(a,"backRepeater","nextRepeater","okBtn","cancelBtn"),a.callParent()}}),Ext.define("Ext.picker.Date",{extend:"Ext.Component",requires:["Ext.XTemplate","Ext.button.Button","Ext.button.Split","Ext.util.ClickRepeater","Ext.util.KeyNav","Ext.EventObject","Ext.fx.Manager","Ext.picker.Month"],alias:"widget.datepicker",alternateClassName:"Ext.DatePicker",renderTpl:['<div class="{cls}" id="{id}" role="grid" title="{ariaTitle} {value:this.longDay}">','<div role="presentation" class="{baseCls}-header">','<div class="{baseCls}-prev"><a id="{id}-prevEl" href="#" role="button" title="{prevText}"></a></div>','<div class="{baseCls}-month" id="{id}-middleBtnEl"></div>','<div class="{baseCls}-next"><a id="{id}-nextEl" href="#" role="button" title="{nextText}"></a></div>',"</div>",'<table id="{id}-eventEl" class="{baseCls}-inner" cellspacing="0" role="presentation">','<thead role="presentation"><tr role="presentation">','<tpl for="dayNames">','<th role="columnheader" title="{.}"><span>{.:this.firstInitial}</span></th>',"</tpl>","</tr></thead>",'<tbody role="presentation"><tr role="presentation">','<tpl for="days">',"{#:this.isEndOfWeek}",'<td role="gridcell" id="{[Ext.id()]}">','<a role="presentation" href="#" hidefocus="on" class="{parent.baseCls}-date" tabIndex="1">','<em role="presentation"><span role="presentation"></span></em>',"</a>","</td>","</tpl>","</tr></tbody>","</table>",'<tpl if="showToday">','<div id="{id}-footerEl" role="presentation" class="{baseCls}-footer"></div>',"</tpl>","</div>",{firstInitial:function(a){return a.substr(0,1)},isEndOfWeek:function(a){a--;var b=a%7===0&&a!==0;return b?'</tr><tr role="row">':""},longDay:function(a){return Ext.Date.format(a,this.longDayFormat)}}],ariaTitle:"Date Picker",todayText:"Today",todayTip:"{0} (Spacebar)",minText:"This date is before the minimum date",maxText:"This date is after the maximum date",disabledDaysText:"Disabled",disabledDatesText:"Disabled",nextText:"Next Month (Control+Right)",prevText:"Previous Month (Control+Left)",monthYearText:"Choose a month (Control+Up/Down to move years)",startDay:0,showToday:!0,disableAnim:!1,baseCls:Ext.baseCSSPrefix+"datepicker",longDayFormat:"F d, Y",focusOnShow:!1,focusOnSelect:!0,width:178,initHour:12,numDays:42,initComponent:function(){var a=this,b=Ext.Date.clearTime;a.selectedCls=a.baseCls+"-selected",a.disabledCellCls=a.baseCls+"-disabled",a.prevCls=a.baseCls+"-prevday",a.activeCls=a.baseCls+"-active",a.nextCls=a.baseCls+"-prevday",a.todayCls=a.baseCls+"-today",a.dayNames=a.dayNames.slice(a.startDay).concat(a.dayNames.slice(0,a.startDay)),this.callParent(),a.value=a.value?b(a.value,!0):b(new Date),a.addEvents("select"),a.initDisabledDays()},onRender:function(a,b){var c=this,d=new Array(c.numDays),e=Ext.Date.format(new Date,c.format);Ext.applyIf(c,{renderData:{}}),Ext.apply(c.renderData,{dayNames:c.dayNames,ariaTitle:c.ariaTitle,value:c.value,showToday:c.showToday,prevText:c.prevText,nextText:c.nextText,days:d}),c.getTpl("renderTpl").longDayFormat=c.longDayFormat,c.addChildEls("eventEl","prevEl","nextEl","middleBtnEl","footerEl"),this.callParent(arguments),c.el.unselectable(),c.cells=c.eventEl.select("tbody td"),c.textNodes=c.eventEl.query("tbody td span"),c.monthBtn=Ext.create("Ext.button.Split",{text:"",tooltip:c.monthYearText,renderTo:c.middleBtnEl}),c.todayBtn=Ext.create("Ext.button.Button",{renderTo:c.footerEl,text:Ext.String.format(c.todayText,e),tooltip:Ext.String.format(c.todayTip,e),handler:c.selectToday,scope:c})},initEvents:function(){var a=this,b=Ext.Date,c=b.DAY;this.callParent(),a.prevRepeater=Ext.create("Ext.util.ClickRepeater",a.prevEl,{handler:a.showPrevMonth,scope:a,preventDefault:!0,stopDefault:!0}),a.nextRepeater=Ext.create("Ext.util.ClickRepeater",a.nextEl,{handler:a.showNextMonth,scope:a,preventDefault:!0,stopDefault:!0}),a.keyNav=Ext.create("Ext.util.KeyNav",a.eventEl,Ext.apply({scope:a,left:function(d){d.ctrlKey?a.showPrevMonth():a.update(b.add(a.activeDate,c,-1))},right:function(d){d.ctrlKey?a.showNextMonth():a.update(b.add(a.activeDate,c,1))},up:function(d){d.ctrlKey?a.showNextYear():a.update(b.add(a.activeDate,c,-7))},down:function(d){d.ctrlKey?a.showPrevYear():a.update(b.add(a.activeDate,c,7))},pageUp:a.showNextMonth,pageDown:a.showPrevMonth,enter:function(a){return a.stopPropagation(),!0}},a.keyNavConfig)),a.showToday&&(a.todayKeyListener=a.eventEl.addKeyListener(Ext.EventObject.SPACE,a.selectToday,a)),a.mon(a.eventEl,"mousewheel",a.handleMouseWheel,a),a.mon(a.eventEl,"click",a.handleDateClick,a,{delegate:"a."+a.baseCls+"-date"}),a.mon(a.monthBtn,"click",a.showMonthPicker,a),a.mon(a.monthBtn,"arrowclick",a.showMonthPicker,a),a.update(a.value)},initDisabledDays:function(){var a=this,b=a.disabledDates,c="(?:",d;!a.disabledDatesRE&&b&&(d=b.length-1,Ext.each(b,function(e,f){c+=Ext.isDate(e)?"^"+Ext.String.escapeRegex(Ext.Date.dateFormat(e,a.format))+"$":b[f],f!=d&&(c+="|")},a),a.disabledDatesRE=new RegExp(c+")"))},setDisabledDates:function(a){var b=this;return Ext.isArray(a)?(b.disabledDates=a,b.disabledDatesRE=null):b.disabledDatesRE=a,b.initDisabledDays(),b.update(b.value,!0),b},setDisabledDays:function(a){return this.disabledDays=a,this.update(this.value,!0)},setMinDate:function(a){return this.minDate=a,this.update(this.value,!0)},setMaxDate:function(a){return this.maxDate=a,this.update(this.value,!0)},setValue:function(a){return this.value=Ext.Date.clearTime(a,!0),this.update(this.value)},getValue:function(){return this.value},focus:function(){this.update(this.activeDate)},onEnable:function(){this.callParent(),this.setDisabledStatus(!1),this.update(this.activeDate)},onDisable:function(){this.callParent(),this.setDisabledStatus(!0)},setDisabledStatus:function(a){var b=this;b.keyNav.setDisabled(a),b.prevRepeater.setDisabled(a),b.nextRepeater.setDisabled(a),b.showToday&&(b.todayKeyListener.setDisabled(a),b.todayBtn.setDisabled(a))},getActive:function(){return this.activeDate||this.value},runAnimation:function(a){var b=this.monthPicker,c={duration:200,callback:function(){a?b.hide():b.show()}};a?b.el.slideOut("t",c):b.el.slideIn("t",c)},hideMonthPicker:function(a){var b=this,c=b.monthPicker;return c&&(b.shouldAnimate(a)?b.runAnimation(!0):c.hide()),b},showMonthPicker:function(a){var b=this,c;return b.rendered&&!b.disabled&&(c=b.createMonthPicker(),c.setValue(b.getActive()),c.setSize(b.getSize()),c.setPosition(-1,-1),b.shouldAnimate(a)?b.runAnimation(!1):c.show()),b},shouldAnimate:function(a){return Ext.isDefined(a)?a:!this.disableAnim},createMonthPicker:function(){var a=this,b=a.monthPicker;return b||(a.monthPicker=b=Ext.create("Ext.picker.Month",{renderTo:a.el,floating:!0,shadow:!1,small:a.showToday===!1,listeners:{scope:a,cancelclick:a.onCancelClick,okclick:a.onOkClick,yeardblclick:a.onOkClick,monthdblclick:a.onOkClick}}),a.disableAnim||b.el.setStyle("display","none"),a.on("beforehide",Ext.Function.bind(a.hideMonthPicker,a,[!1]))),b},onOkClick:function(a,b){var c=this,d=b[0],e=b[1],f=new Date(e,d,c.getActive().getDate());f.getMonth()!==d&&(f=(new Date(e,d,1)).getLastDateOfMonth()),c.update(f),c.hideMonthPicker()},onCancelClick:function(){this.hideMonthPicker()},showPrevMonth:function(a){return this.update(Ext.Date.add(this.activeDate,Ext.Date.MONTH,-1))},showNextMonth:function(a){return this.update(Ext.Date.add(this.activeDate,Ext.Date.MONTH,1))},showPrevYear:function(){this.update(Ext.Date.add(this.activeDate,Ext.Date.YEAR,-1))},showNextYear:function(){this.update(Ext.Date.add(this.activeDate,Ext.Date.YEAR,1))},handleMouseWheel:function(a){a.stopEvent();if(!this.disabled){var b=a.getWheelDelta();b>0?this.showPrevMonth():b<0&&this.showNextMonth()}},handleDateClick:function(a,b){var c=this,d=c.handler;a.stopEvent(),!c.disabled&&b.dateValue&&!Ext.fly(b.parentNode).hasCls(c.disabledCellCls)&&(c.cancelFocus=c.focusOnSelect===!1,c.setValue(new Date(b.dateValue)),delete c.cancelFocus,c.fireEvent("select",c,c.value),d&&d.call(c.scope||c,c,c.value),c.onSelect())},onSelect:function(){this.hideOnSelect&&this.hide()},selectToday:function(){var a=this,b=a.todayBtn,c=a.handler;return b&&!b.disabled&&(a.setValue(Ext.Date.clearTime(new Date)),a.fireEvent("select",a,a.value),c&&c.call(a.scope||a,a,a.value),a.onSelect()),a},selectedUpdate:function(a,b){var c=this,d=a.getTime(),e=c.cells,f=c.selectedCls;e.removeCls(f),e.each(function(a){if(a.dom.firstChild.dateValue==d)return c.el.dom.setAttribute("aria-activedescendent",a.dom.id),a.addCls(f),c.isVisible()&&!c.cancelFocus&&Ext.fly(a.dom.firstChild).focus(50),!1},this)},fullUpdate:function(a,b){var c=this,d=c.cells.elements,e=c.textNodes,f=c.disabledCellCls,g=Ext.Date,h=0,i=0,j=c.isVisible(),k=+g.clearTime(a,!0),l=+g.clearTime(new Date),m=c.minDate?g.clearTime(c.minDate,!0):Number.NEGATIVE_INFINITY,n=c.maxDate?g.clearTime(c.maxDate,!0):Number.POSITIVE_INFINITY,o=c.disabledDatesRE,p=c.disabledDatesText,q=c.disabledDays?c.disabledDays.join(""):!1,r=c.disabledDaysText,s=c.format,t=g.getDaysInMonth(a),u=g.getFirstDateOfMonth(a),v=u.getDay()-c.startDay,w=g.add(a,g.MONTH,-1),x=c.longDayFormat,y,z,A,B,C,D,E,F,G;v<0&&(v+=7),t+=v,y=g.getDaysInMonth(w)-v,z=new Date(w.getFullYear(),w.getMonth(),y,c.initHour),c.showToday&&(B=g.clearTime(new Date),A=B<m||B>n||o&&s&&o.test(g.dateFormat(B,s))||q&&q.indexOf(B.getDay())!=-1,c.disabled||(c.todayBtn.setDisabled(A),c.todayKeyListener.setDisabled(A))),C=function(a){G=+g.clearTime(z,!0),a.title=g.format(z,x),a.firstChild.dateValue=G,G==l&&(a.className+=" "+c.todayCls,a.title=c.todayText),G==k&&(a.className+=" "+c.selectedCls,c.el.dom.setAttribute("aria-activedescendant",a.id),j&&c.floating&&Ext.fly(a.firstChild).focus(50));if(G<m){a.className=f,a.title=c.minText;return}if(G>n){a.className=f,a.title=c.maxText;return}q&&q.indexOf(z.getDay())!=-1&&(a.title=r,a.className=f),o&&s&&(F=g.dateFormat(z,s),o.test(F)&&(a.title=p.replace("%0",F),a.className=f))};for(;h<c.numDays;++h)h<v?(D=++y,E=c.prevCls):h>=t?(D=++i,E=c.nextCls):(D=h-v+1,E=c.activeCls),e[h].innerHTML=D,d[h].className=E,z.setDate(z.getDate()+1),C(d[h]);c.monthBtn.setText(c.monthNames[a.getMonth()]+" "+a.getFullYear())},update:function(a,b){var c=this,d=c.activeDate;return c.rendered&&(c.activeDate=a,!b&&d&&c.el&&d.getMonth()==a.getMonth()&&d.getFullYear()==a.getFullYear()?c.selectedUpdate(a,d):c.fullUpdate(a,d)),c},beforeDestroy:function(){var a=this;a.rendered&&(Ext.destroy(a.todayKeyListener,a.keyNav,a.monthPicker,a.monthBtn,a.nextRepeater,a.prevRepeater,a.todayBtn),delete a.textNodes,delete a.cells.elements),a.callParent()},onShow:function(){this.callParent(arguments),this.focusOnShow&&this.focus()}},function(){var a=this.prototype;a.monthNames=Ext.Date.monthNames,a.dayNames=Ext.Date.dayNames,a.format=Ext.Date.defaultFormat}),Ext.define("Ext.form.field.Date",{extend:"Ext.form.field.Picker",alias:"widget.datefield",requires:["Ext.picker.Date"],alternateClassName:["Ext.form.DateField","Ext.form.Date"],format:"m/d/Y",altFormats:"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j",disabledDaysText:"Disabled",disabledDatesText:"Disabled",minText:"The date in this field must be equal to or after {0}",maxText:"The date in this field must be equal to or before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",triggerCls:Ext.baseCSSPrefix+"form-date-trigger",showToday:!0,initTime:"12",initTimeFormat:"H",matchFieldWidth:!1,startDay:0,initComponent:function(){var a=this,b=Ext.isString,c,d;c=a.minValue,d=a.maxValue,b(c)&&(a.minValue=a.parseDate(c)),b(d)&&(a.maxValue=a.parseDate(d)),a.disabledDatesRE=null,a.initDisabledDays(),a.callParent()},initValue:function(){var a=this,b=a.value;Ext.isString(b)&&(a.value=a.rawToValue(b)),a.callParent()},initDisabledDays:function(){if(this.disabledDates){var a=this.disabledDates,b=a.length-1,c="(?:";Ext.each(a,function(d,e){c+=Ext.isDate(d)?"^"+Ext.String.escapeRegex(d.dateFormat(this.format))+"$":a[e],e!==b&&(c+="|")},this),this.disabledDatesRE=new RegExp(c+")")}},setDisabledDates:function(a){var b=this,c=b.picker;b.disabledDates=a,b.initDisabledDays(),c&&c.setDisabledDates(b.disabledDatesRE)},setDisabledDays:function(a){var b=this.picker;this.disabledDays=a,b&&b.setDisabledDays(a)},setMinValue:function(a){var b=this,c=b.picker,d=Ext.isString(a)?b.parseDate(a):a;b.minValue=d,c&&(c.minText=Ext.String.format(b.minText,b.formatDate(b.minValue)),c.setMinDate(d))},setMaxValue:function(a){var b=this,c=b.picker,d=Ext.isString(a)?b.parseDate(a):a;b.maxValue=d,c&&(c.maxText=Ext.String.format(b.maxText,b.formatDate(b.maxValue)),c.setMaxDate(d))},getErrors:function(a){var b=this,c=Ext.String.format,d=Ext.Date.clearTime,e=b.callParent(arguments),f=b.disabledDays,g=b.disabledDatesRE,h=b.minValue,i=b.maxValue,j=f?f.length:0,k=0,l,m,n,o;a=b.formatDate(a||b.processRawValue(b.getRawValue()));if(a===null||a.length<1)return e;l=a,a=b.parseDate(a);if(!a)return e.push(c(b.invalidText,l,b.format)),e;o=a.getTime(),h&&o<d(h).getTime()&&e.push(c(b.minText,b.formatDate(h))),i&&o>d(i).getTime()&&e.push(c(b.maxText,b.formatDate(i)));if(f){n=a.getDay();for(;k<j;k++)if(n===f[k]){e.push(b.disabledDaysText);break}}return m=b.formatDate(a),g&&g.test(m)&&e.push(c(b.disabledDatesText,m)),e},rawToValue:function(a){return this.parseDate(a)||a||null},valueToRaw:function(a){return this.formatDate(this.parseDate(a))},safeParse:function(a,b){var c=this,d=Ext.Date,e,f=null;return d.formatContainsHourInfo(b)?f=d.parse(a,b):(e=d.parse(a+" "+c.initTime,b+" "+c.initTimeFormat),e&&(f=d.clearTime(e))),f},getSubmitValue:function(){var a=this.submitFormat||this.format,b=this.getValue();return b?Ext.Date.format(b,a):""},parseDate:function(a){if(!a||Ext.isDate(a))return a;var b=this,c=b.safeParse(a,b.format),d=b.altFormats,e=b.altFormatsArray,f=0,g;if(!c&&d){e=e||d.split("|"),g=e.length;for(;f<g&&!c;++f)c=b.safeParse(a,e[f])}return c},formatDate:function(a){return Ext.isDate(a)?Ext.Date.dateFormat(a,this.format):a},createPicker:function(){var a=this,b=Ext.String.format;return Ext.create("Ext.picker.Date",{pickerField:a,ownerCt:a.ownerCt,renderTo:document.body,floating:!0,hidden:!0,focusOnShow:!0,minDate:a.minValue,maxDate:a.maxValue,disabledDatesRE:a.disabledDatesRE,disabledDatesText:a.disabledDatesText,disabledDays:a.disabledDays,disabledDaysText:a.disabledDaysText,format:a.format,showToday:a.showToday,startDay:a.startDay,minText:b(a.minText,a.formatDate(a.minValue)),maxText:b(a.maxText,a.formatDate(a.maxValue)),listeners:{scope:a,select:a.onSelect},keyNavConfig:{esc:function(){a.collapse()}}})},onSelect:function(a,b){var c=this;c.setValue(b),c.fireEvent("select",c,b),c.collapse()},onExpand:function(){var a=this.getValue();this.picker.setValue(Ext.isDate(a)?a:new Date)},onCollapse:function(){this.focus(!1,60)},beforeBlur:function(){var a=this,b=a.parseDate(a.getRawValue()),c=a.focusTask;c&&c.cancel(),b&&a.setValue(b)}}),Ext.define("Ext.form.field.Display",{extend:"Ext.form.field.Base",alias:"widget.displayfield",requires:["Ext.util.Format","Ext.XTemplate"],alternateClassName:["Ext.form.DisplayField","Ext.form.Display"],fieldSubTpl:['<div id="{id}" class="{fieldCls}"></div>',{compiled:!0,disableFormats:!0}],fieldCls:Ext.baseCSSPrefix+"form-display-field",htmlEncode:!1,validateOnChange:!1,initEvents:Ext.emptyFn,submitValue:!1,isValid:function(){return!0},validate:function(){return!0},getRawValue:function(){return this.rawValue},setRawValue:function(a){var b=this;return a=Ext.value(a,""),b.rawValue=a,b.rendered&&(b.inputEl.dom.innerHTML=b.htmlEncode?Ext.util.Format.htmlEncode(a):a),a},getContentTarget:function(){return this.inputEl}}),Ext.define("Ext.form.field.File",{extend:"Ext.form.field.Text",alias:["widget.filefield","widget.fileuploadfield"],alternateClassName:["Ext.form.FileUploadField","Ext.ux.form.FileUploadField","Ext.form.File"],uses:["Ext.button.Button","Ext.layout.component.field.File"],buttonText:"Browse...",buttonOnly:!1,buttonMargin:3,fieldBodyCls:Ext.baseCSSPrefix+"form-file-wrap",readOnly:!0,componentLayout:"filefield",onRender:function(){var a=this,b;a.callParent(arguments),a.createButton(),a.createFileInput(),a.disabled&&a.disableItems(),b=a.inputEl,b.dom.removeAttribute("name"),a.buttonOnly&&b.setDisplayed(!1)},createButton:function(){var a=this;a.button=Ext.widget("button",Ext.apply({ui:a.ui,renderTo:a.bodyEl,text:a.buttonText,cls:Ext.baseCSSPrefix+"form-file-btn",preventDefault:!1,style:a.buttonOnly?"":"margin-left:"+a.buttonMargin+"px"},a.buttonConfig))},createFileInput:function(){var a=this;a.fileInputEl=a.button.el.createChild({name:a.getName(),cls:Ext.baseCSSPrefix+"form-file-input",tag:"input",type:"file",size:1}).on("change",a.onFileChange,a)},onFileChange:function(){this.lastValue=null,Ext.form.field.File.superclass.setValue.call(this,this.fileInputEl.dom.value)},setValue:Ext.emptyFn,reset:function(){var a=this;a.rendered&&(a.fileInputEl.remove(),a.createFileInput(),a.inputEl.dom.value=""),a.callParent()},onDisable:function(){this.callParent(),this.disableItems()},disableItems:function(){var a=this.fileInputEl,b=this.button;a&&(a.dom.disabled=!0),b&&b.disable()},onEnable:function(){var a=this;a.callParent(),a.fileInputEl.dom.disabled=!1,a.button.enable()},isFileUpload:function(){return!0},extractFileInput:function(){var a=this.fileInputEl.dom;return this.reset(),a},onDestroy:function(){Ext.destroyMembers(this,"fileInputEl","button"),this.callParent()}}),Ext.define("Ext.form.field.Hidden",{extend:"Ext.form.field.Base",alias:["widget.hiddenfield","widget.hidden"],alternateClassName:"Ext.form.Hidden",inputType:"hidden",hideLabel:!0,initComponent:function(){this.formItemCls+="-hidden",this.callParent()},isEqual:function(a,b){return this.isEqualAsString(a,b)},initEvents:Ext.emptyFn,setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn}),Ext.define("Ext.picker.Color",{extend:"Ext.Component",requires:"Ext.XTemplate",alias:"widget.colorpicker",alternateClassName:"Ext.ColorPalette",componentCls:Ext.baseCSSPrefix+"color-picker",selectedCls:Ext.baseCSSPrefix+"color-picker-selected",value:null,clickEvent:"click",allowReselect:!1,colors:["000000","993300","333300","003300","003366","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","969696","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFCC","CCFFFF","99CCFF","CC99FF","FFFFFF"],colorRe:/(?:^|\s)color-(.{6})(?:\s|$)/,renderTpl:['<tpl for="colors">','<a href="#" class="color-{.}" hidefocus="on">','<em><span style="background:#{.}" unselectable="on">&#160;</span></em>',"</a>","</tpl>"],initComponent:function(){var a=this;a.callParent(arguments),a.addEvents("select"),a.handler&&a.on("select",a.handler,a.scope,!0)},onRender:function(a,b){var c=this,d=c.clickEvent;Ext.apply(c.renderData,{itemCls:c.itemCls,colors:c.colors}),c.callParent(arguments),c.mon(c.el,d,c.handleClick,c,{delegate:"a"}),d!="click"&&c.mon(c.el,"click",Ext.emptyFn,c,{delegate:"a",stopEvent:!0})},afterRender:function(){var a=this,b;a.callParent(arguments),a.value&&(b=a.value,a.value=null,a.select(b,!0))},handleClick:function(a,b){var c=this,d;a.stopEvent(),c.disabled||(d=b.className.match(c.colorRe)[1],c.select(d.toUpperCase()))},select:function(a,b){var c=this,d=c.selectedCls,e=c.value,f;a=a.replace("#","");if(!c.rendered){c.value=a;return}if(a!=e||c.allowReselect)f=c.el,c.value&&f.down("a.color-"+e).removeCls(d),f.down("a.color-"+a).addCls(d),c.value=a,b!==!0&&c.fireEvent("select",c,a)},getValue:function(){return this.value||null}}),Ext.define("Ext.layout.component.field.HtmlEditor",{extend:"Ext.layout.component.field.Field",alias:["layout.htmleditor"],type:"htmleditor",sizeBodyContents:function(a,b){var c=this,d=c.owner,e=d.bodyEl,f=d.getToolbar(),g=d.textareaEl,h=d.iframeEl,i;Ext.isNumber(a)&&(a-=e.getFrameWidth("lr")),f.setWidth(a),g.setWidth(a),h.setWidth(a),Ext.isNumber(b)&&(i=b-f.getHeight()-e.getFrameWidth("tb"),g.setHeight(i),h.setHeight(i))}}),Ext.define("Ext.form.field.HtmlEditor",{extend:"Ext.Component",mixins:{labelable:"Ext.form.Labelable",field:"Ext.form.field.Field"},alias:"widget.htmleditor",alternateClassName:"Ext.form.HtmlEditor",requires:["Ext.tip.QuickTipManager","Ext.picker.Color","Ext.toolbar.Item","Ext.toolbar.Toolbar","Ext.util.Format","Ext.layout.component.field.HtmlEditor"],fieldSubTpl:['<div id="{cmpId}-toolbarWrap" class="{toolbarWrapCls}"></div>','<textarea id="{cmpId}-textareaEl" name="{name}" tabIndex="-1" class="{textareaCls}" ','style="{size}" autocomplete="off"></textarea>','<iframe id="{cmpId}-iframeEl" name="{iframeName}" frameBorder="0" style="overflow:auto;{size}" src="{iframeSrc}"></iframe>',{compiled:!0,disableFormats:!0}],enableFormat:!0,enableFontSize:!0,enableColors:!0,enableAlignments:!0,enableLists:!0,enableSourceEdit:!0,enableLinks:!0,enableFont:!0,createLinkText:"Please enter the URL for the link:",defaultLinkValue:"http://",fontFamilies:["Arial","Courier New","Tahoma","Times New Roman","Verdana"],defaultFont:"tahoma",defaultValue:Ext.isOpera||Ext.isIE6?"&#160;":"&#8203;",fieldBodyCls:Ext.baseCSSPrefix+"html-editor-wrap",componentLayout:"htmleditor",initialized:!1,activated:!1,sourceEditMode:!1,iframePad:3,hideMode:"offsets",maskOnDisable:!0,initComponent:function(){var a=this;a.addEvents("initialize","activate","beforesync","beforepush","sync","push","editmodechange"),a.callParent(arguments),a.initLabelable(),a.initField()},createToolbar:function(a){function i(b,c,f){return{itemId:b,cls:e+"btn-icon",iconCls:e+"edit-"+b,enableToggle:c!==!1,scope:a,handler:f||a.relayBtnCmd,clickEvent:"mousedown",tooltip:d?a.buttonTips[b]||h:h,overflowText:a.buttonTips[b].title||h,tabIndex:-1}}var b=this,c=[],d=Ext.tip.QuickTipManager&&Ext.tip.QuickTipManager.isEnabled(),e=Ext.baseCSSPrefix,f,g,h;b.enableFont&&!Ext.isSafari2&&(f=Ext.widget("component",{renderTpl:['<select id="{id}-selectEl" class="{cls}">','<tpl for="fonts">','<option value="{[values.toLowerCase()]}" style="font-family:{.}"<tpl if="values.toLowerCase()==parent.defaultFont"> selected</tpl>>{.}</option>',"</tpl>","</select>"],renderData:{cls:e+"font-select",fonts:b.fontFamilies,defaultFont:b.defaultFont},childEls:["selectEl"],onDisable:function(){var a=this.selectEl;a&&(a.dom.disabled=!0),Ext.Component.superclass.onDisable.apply(this,arguments)},onEnable:function(){var a=this.selectEl;a&&(a.dom.disabled=!1),Ext.Component.superclass.onEnable.apply(this,arguments)}}),c.push(f,"-")),b.enableFormat&&c.push(i("bold"),i("italic"),i("underline")),b.enableFontSize&&c.push("-",i("increasefontsize",!1,b.adjustFont),i("decreasefontsize",!1,b.adjustFont)),b.enableColors&&c.push("-",{itemId:"forecolor",cls:e+"btn-icon",iconCls:e+"edit-forecolor",overflowText:a.buttonTips.forecolor.title,tooltip:d?a.buttonTips.forecolor||h:h,tabIndex:-1,menu:Ext.widget("menu",{plain:!0,items:[{xtype:"colorpicker",allowReselect:!0,focus:Ext.emptyFn,value:"000000",plain:!0,clickEvent:"mousedown",handler:function(a,c){b.execCmd("forecolor",Ext.isWebKit||Ext.isIE?"#"+c:c),b.deferFocus(),this.up("menu").hide()}}]})},{itemId:"backcolor",cls:e+"btn-icon",iconCls:e+"edit-backcolor",overflowText:a.buttonTips.backcolor.title,tooltip:d?a.buttonTips.backcolor||h:h,tabIndex:-1,menu:Ext.widget("menu",{plain:!0,items:[{xtype:"colorpicker",focus:Ext.emptyFn,value:"FFFFFF",plain:!0,allowReselect:!0,clickEvent:"mousedown",handler:function(a,c){Ext.isGecko?(b.execCmd("useCSS",!1),b.execCmd("hilitecolor",c),b.execCmd("useCSS",!0),b.deferFocus()):(b.execCmd(Ext.isOpera?"hilitecolor":"backcolor",Ext.isWebKit||Ext.isIE?"#"+c:c),b.deferFocus()),this.up("menu").hide()}}]})}),b.enableAlignments&&c.push("-",i("justifyleft"),i("justifycenter"),i("justifyright")),Ext.isSafari2||(b.enableLinks&&c.push("-",i("createlink",!1,b.createLink)),b.enableLists&&c.push("-",i("insertorderedlist"),i("insertunorderedlist")),b.enableSourceEdit&&c.push("-",i("sourceedit",!0,function(a){b.toggleSourceEdit(!b.sourceEditMode)}))),g=Ext.widget("toolbar",{renderTo:b.toolbarWrap,enableOverflow:!0,items:c}),f&&(b.fontSelect=f.selectEl,b.mon(b.fontSelect,"change",function(){b.relayCmd("fontname",b.fontSelect.dom.value),b.deferFocus()})),b.mon(g.el,"click",function(a){a.preventDefault()}),b.toolbar=g},onDisable:function(){this.bodyEl.mask(),this.callParent(arguments)},onEnable:function(){this.bodyEl.unmask(),this.callParent(arguments)},setReadOnly:function(a){var b=this,c=b.textareaEl,d=b.iframeEl,e;b.readOnly=a,c&&(c.dom.readOnly=a),b.initialized&&(e=b.getEditorBody(),Ext.isIE?(d.setDisplayed(!1),e.contentEditable=!a,d.setDisplayed(!0)):b.setDesignMode(!a),e&&(e.style.cursor=a?"default":"text"),b.disableItems(a))},getDocMarkup:function(){var a=this,b=a.iframeEl.getHeight()-a.iframePad*2;return Ext.String.format('<html><head><style type="text/css">body{border:0;margin:0;padding:{0}px;height:{1}px;box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box;cursor:text}</style></head><body></body></html>',a.iframePad,b)},getEditorBody:function(){var a=this.getDoc();return a.body||a.documentElement},getDoc:function(){return!Ext.isIE&&this.iframeEl.dom.contentDocument||this.getWin().document},getWin:function(){return Ext.isIE?this.iframeEl.dom.contentWindow:window.frames[this.iframeEl.dom.name]},onRender:function(){var a=this;a.onLabelableRender(),a.addChildEls("toolbarWrap","iframeEl","textareaEl"),a.callParent(arguments),a.textareaEl.dom.value=a.value||"",a.monitorTask=Ext.TaskManager.start({run:a.checkDesignMode,scope:a,interval:100}),a.createToolbar(a),a.disableItems(!0)},initRenderTpl:function(){var a=this;return a.hasOwnProperty("renderTpl")||(a.renderTpl=a.getTpl("labelableRenderTpl")),a.callParent()},initRenderData:function(){return Ext.applyIf(this.callParent(),this.getLabelableRenderData())},getSubTplData:function(){var a=Ext.baseCSSPrefix;return{cmpId:this.id,id:this.getInputId(),toolbarWrapCls:a+"html-editor-tb",textareaCls:a+"hidden",iframeName:Ext.id(),iframeSrc:Ext.SSL_SECURE_URL,size:"height:100px;"}},getSubTplMarkup:function(){var a=this.getSubTplData();return this.getTpl("fieldSubTpl").apply(a)},getBodyNaturalWidth:function(){return 565},initFrameDoc:function(){var a=this,b,c;Ext.TaskManager.stop(a.monitorTask),b=a.getDoc(),a.win=a.getWin(),b.open(),b.write(a.getDocMarkup()),b.close(),c={run:function(){var b=a.getDoc();if(b.body||b.readyState==="complete")Ext.TaskManager.stop(c),a.setDesignMode(!0),Ext.defer(a.initEditor,10,a)},interval:10,duration:1e4,scope:a},Ext.TaskManager.start(c)},checkDesignMode:function(){var a=this,b=a.getDoc();b&&(!b.editorInitialized||a.getDesignMode()!=="on")&&a.initFrameDoc()},setDesignMode:function(a){var b=this,c=b.getDoc();c&&(b.readOnly&&(a=!1),c.designMode=/on|true/i.test(String(a).toLowerCase())?"on":"off")},getDesignMode:function(){var a=this.getDoc();return a?String(a.designMode).toLowerCase():""},disableItems:function(a){this.getToolbar().items.each(function(b){b.getItemId()!=="sourceedit"&&b.setDisabled(a)})},toggleSourceEdit:function(a){var b=this,c=b.iframeEl,d=b.textareaEl,e=Ext.baseCSSPrefix+"hidden",f=b.getToolbar().getComponent("sourceedit");Ext.isBoolean(a)||(a=!b.sourceEditMode),b.sourceEditMode=a,f.pressed!==a&&f.toggle(a),a?(b.disableItems(!0),b.syncValue(),c.addCls(e),d.removeCls(e),d.dom.removeAttribute("tabIndex"),d.focus()):(b.initialized&&b.disableItems(b.readOnly),b.pushValue(),c.removeCls(e),d.addCls(e),d.dom.setAttribute("tabIndex",-1),b.deferFocus()),b.fireEvent("editmodechange",b,a),b.doComponentLayout()},createLink:function(){var a=prompt(this.createLinkText,this.defaultLinkValue);a&&a!=="http://"&&this.relayCmd("createlink",a)},clearInvalid:Ext.emptyFn,setValue:function(a){var b=this,c=b.textareaEl;b.mixins.field.setValue.call(b,a);if(a===null||a===undefined)a="";return c&&(c.dom.value=a),b.pushValue(),this},cleanHtml:function(a){return a=String(a),Ext.isWebKit&&(a=a.replace(/\sclass="(?:Apple-style-span|khtml-block-placeholder)"/gi,"")),a.charCodeAt(0)===this.defaultValue.replace(/\D/g,"")&&(a=a.substring(1)),a},syncValue:function(){var a=this,b,c,d,e;a.initialized&&(b=a.getEditorBody(),c=b.innerHTML,Ext.isWebKit&&(d=b.getAttribute("style"),e=d.match(/text-align:(.*?);/i),e&&e[1]&&(c='<div style="'+e[0]+'">'+c+"</div>")),c=a.cleanHtml(c),a.fireEvent("beforesync",a,c)!==!1&&(a.textareaEl.dom.value=c,a.fireEvent("sync",a,c)))},getValue:function(){var a=this,b;return a.sourceEditMode||a.syncValue(),b=a.rendered?a.textareaEl.dom.value:a.value,a.value=b,b},pushValue:function(){var a=this,b;a.initialized&&(b=a.textareaEl.dom.value||"",!a.activated&&b.length<1&&(b=a.defaultValue),a.fireEvent("beforepush",a,b)!==!1&&(a.getEditorBody().innerHTML=b,Ext.isGecko&&(a.setDesignMode(!1),a.setDesignMode(!0)),a.fireEvent("push",a,b)))},deferFocus:function(){this.focus(!1,!0)},getFocusEl:function(){var a=this,b=a.win;return b&&!a.sourceEditMode?b:a.textareaEl},initEditor:function(){try{var a=this,b=a.getEditorBody(),c=a.textareaEl.getStyles("font-size","font-family","background-image","background-repeat","background-color","color"),d,e;c["background-attachment"]="fixed",b.bgProperties="fixed",Ext.DomHelper.applyStyles(b,c),d=a.getDoc();if(d)try{Ext.EventManager.removeAll(d)}catch(f){}e=Ext.Function.bind(a.onEditorEvent,a),Ext.EventManager.on(d,{mousedown:e,dblclick:e,click:e,keyup:e,buffer:100}),e=a.onRelayedEvent,Ext.EventManager.on(d,{mousedown:e,mousemove:e,mouseup:e,click:e,dblclick:e,scope:a}),Ext.isGecko&&Ext.EventManager.on(d,"keypress",a.applyCommand,a),a.fixKeys&&Ext.EventManager.on(d,"keydown",a.fixKeys,a),Ext.EventManager.on(window,"unload",a.beforeDestroy,a),d.editorInitialized=!0,a.initialized=!0,a.pushValue(),a.setReadOnly(a.readOnly),a.fireEvent("initialize",a)}catch(g){}},beforeDestroy:function(){var a=this,b=a.monitorTask,c,d;b&&Ext.TaskManager.stop(b);if(a.rendered){try{c=a.getDoc();if(c){Ext.EventManager.removeAll(c);for(d in c)c.hasOwnProperty(d)&&delete c[d]}}catch(e){}Ext.destroyMembers(a,"tb","toolbarWrap","iframeEl","textareaEl")}a.callParent()},onRelayedEvent:function(a){var b=this.iframeEl,c=b.getXY(),d=a.getXY();a.xy=[c[0]+d[0],c[1]+d[1]],a.injectEvent(b),a.xy=d},onFirstFocus:function(){var a=this,b,c;a.activated=!0,a.disableItems(a.readOnly);if(Ext.isGecko){a.win.focus(),b=a.win.getSelection();if(!b.focusNode||b.focusNode.nodeType!==3)c=b.getRangeAt(0),c.selectNodeContents(a.getEditorBody()),c.collapse(!0),a.deferFocus();try{a.execCmd("useCSS",!0),a.execCmd("styleWithCSS",!1)}catch(d){}}a.fireEvent("activate",a)},adjustFont:function(a){var b=a.getItemId()==="increasefontsize"?1:-1,c=this.getDoc().queryCommandValue("FontSize")||"2",d=Ext.isString(c)&&c.indexOf("px")!==-1,e;c=parseInt(c,10),d?(c<=10?c=1+b:c<=13?c=2+b:c<=16?c=3+b:c<=18?c=4+b:c<=24?c=5+b:c=6+b,c=Ext.Number.constrain(c,1,6)):(e=Ext.isSafari,e&&(b*=2),c=Math.max(1,c+b)+(e?"px":0)),this.execCmd("FontSize",c)},onEditorEvent:function(a){this.updateToolbar()},updateToolbar:function(){function f(){Ext.Array.forEach(Ext.Array.toArray(arguments),function(a){b[a].toggle(c.queryCommandState(a))})}var a=this,b,c,d,e;if(a.readOnly)return;if(!a.activated){a.onFirstFocus();return}b=a.getToolbar().items.map,c=a.getDoc(),a.enableFont&&!Ext.isSafari2&&(d=(c.queryCommandValue("FontName")||a.defaultFont).toLowerCase(),e=a.fontSelect.dom,d!==e.value&&(e.value=d)),a.enableFormat&&f("bold","italic","underline"),a.enableAlignments&&f("justifyleft","justifycenter","justifyright"),!Ext.isSafari2&&a.enableLists&&f("insertorderedlist","insertunorderedlist"),Ext.menu.Manager.hideAll(),a.syncValue()},relayBtnCmd:function(a){this.relayCmd(a.getItemId())},relayCmd:function(a,b){Ext.defer(function(){var c=this;c.focus(),c.execCmd(a,b),c.updateToolbar()},10,this)},execCmd:function(a,b){var c=this,d=c.getDoc(),e;d.execCommand(a,!1,b===e?null:b),c.syncValue()},applyCommand:function(a){if(a.ctrlKey){var b=this,c=a.getCharCode(),d;if(c>0){c=String.fromCharCode(c);switch(c){case"b":d="bold";break;case"i":d="italic";break;case"u":d="underline"}d&&(b.win.focus(),b.execCmd(d),b.deferFocus(),a.preventDefault())}}},insertAtCursor:function(a){var b=this,c;b.activated&&(b.win.focus(),Ext.isIE?(c=b.getDoc().selection.createRange(),c&&(c.pasteHTML(a),b.syncValue(),b.deferFocus())):(b.execCmd("InsertHTML",a),b.deferFocus()))},fixKeys:function(){return Ext.isIE?function(a){var b=this,c=a.getKey(),d=b.getDoc(),e,f;if(c===a.TAB)a.stopEvent(),e=d.selection.createRange(),e&&(e.collapse(!0),e.pasteHTML("&nbsp;&nbsp;&nbsp;&nbsp;"),b.deferFocus());else if(c===a.ENTER){e=d.selection.createRange();if(e){f=e.parentElement();if(!f||f.tagName.toLowerCase()!=="li")a.stopEvent(),e.pasteHTML("<br />"),e.collapse(!1),e.select()}}}:Ext.isOpera?function(a){var b=this;a.getKey()===a.TAB&&(a.stopEvent(),b.win.focus(),b.execCmd("InsertHTML","&nbsp;&nbsp;&nbsp;&nbsp;"),b.deferFocus())}:Ext.isWebKit?function(a){var b=this,c=a.getKey();c===a.TAB?(a.stopEvent(),b.execCmd("InsertText","\t"),b.deferFocus()):c===a.ENTER&&(a.stopEvent(),b.execCmd("InsertHtml","<br /><br />"),b.deferFocus())}:null}(),getToolbar:function(){return this.toolbar},buttonTips:{bold:{title:"Bold (Ctrl+B)",text:"Make the selected text bold.",cls:Ext.baseCSSPrefix+"html-editor-tip"},italic:{title:"Italic (Ctrl+I)",text:"Make the selected text italic.",cls:Ext.baseCSSPrefix+"html-editor-tip"},underline:{title:"Underline (Ctrl+U)",text:"Underline the selected text.",cls:Ext.baseCSSPrefix+"html-editor-tip"},increasefontsize:{title:"Grow Text",text:"Increase the font size.",cls:Ext.baseCSSPrefix+"html-editor-tip"},decreasefontsize:{title:"Shrink Text",text:"Decrease the font size.",cls:Ext.baseCSSPrefix+"html-editor-tip"},backcolor:{title:"Text Highlight Color",text:"Change the background color of the selected text.",cls:Ext.baseCSSPrefix+"html-editor-tip"},forecolor:{title:"Font Color",text:"Change the color of the selected text.",cls:Ext.baseCSSPrefix+"html-editor-tip"},justifyleft:{title:"Align Text Left",text:"Align text to the left.",cls:Ext.baseCSSPrefix+"html-editor-tip"},justifycenter:{title:"Center Text",text:"Center text in the editor.",cls:Ext.baseCSSPrefix+"html-editor-tip"},justifyright:{title:"Align Text Right",text:"Align text to the right.",cls:Ext.baseCSSPrefix+"html-editor-tip"},insertunorderedlist:{title:"Bullet List",text:"Start a bulleted list.",cls:Ext.baseCSSPrefix+"html-editor-tip"},insertorderedlist:{title:"Numbered List",text:"Start a numbered list.",cls:Ext.baseCSSPrefix+"html-editor-tip"},createlink:{title:"Hyperlink",text:"Make the selected text a hyperlink.",cls:Ext.baseCSSPrefix+"html-editor-tip"},sourceedit:{title:"Source Edit",text:"Switch to source editing mode.",cls:Ext.baseCSSPrefix+"html-editor-tip"}}}),Ext.define("Ext.form.field.Radio",{extend:"Ext.form.field.Checkbox",alias:["widget.radiofield","widget.radio"],alternateClassName:"Ext.form.Radio",requires:["Ext.form.RadioManager"],isRadio:!0,inputType:"radio",ariaRole:"radio",getGroupValue:function(){var a=this.getManager().getChecked(this.name);return a?a.inputValue:null},onBoxClick:function(a){var b=this;!b.disabled&&!b.readOnly&&this.setValue(!0)},setValue:function(a){var b=this,c;return Ext.isBoolean(a)?b.callParent(arguments):(c=b.getManager().getWithValue(b.name,a).getAt(0),c&&c.setValue(!0)),b},getSubmitValue:function(){return this.checked?this.inputValue:null},getModelData:function(){return this.getSubmitData()},onChange:function(a,b){var c=this;c.callParent(arguments),a&&this.getManager().getByName(c.name).each(function(a){a!==c&&a.setValue(!1)},c)},getManager:function(){return Ext.form.RadioManager}}),Ext.define("Ext.picker.Time",{extend:"Ext.view.BoundList",alias:"widget.timepicker",requires:["Ext.data.Store","Ext.Date"],increment:15,format:"g:i A",displayField:"disp",initDate:[2008,0,1],componentCls:Ext.baseCSSPrefix+"timepicker",loadMask:!1,initComponent:function(){var a=this,b=Ext.Date,c=b.clearTime,d=a.initDate;a.absMin=c(new Date(d[0],d[1],d[2])),a.absMax=b.add(c(new Date(d[0],d[1],d[2])),"mi",1439),a.store=a.createStore(),a.updateList(),a.callParent()},setMinValue:function(a){this.minValue=a,this.updateList()},setMaxValue:function(a){this.maxValue=a,this.updateList()},normalizeDate:function(a){var b=this.initDate;return a.setFullYear(b[0],b[1],b[2]),a},updateList:function(){var a=this,b=a.normalizeDate(a.minValue||a.absMin),c=a.normalizeDate(a.maxValue||a.absMax);a.store.filterBy(function(a){var d=a.get("date");return d>=b&&d<=c})},createStore:function(){var a=this,b=Ext.Date,c=[],d=a.absMin,e=a.absMax;while(d<=e)c.push({disp:b.dateFormat(d,a.format),date:d}),d=b.add(d,"mi",a.increment);return Ext.create("Ext.data.Store",{fields:["disp","date"],data:c})}}),Ext.define("Ext.form.field.Time",{extend:"Ext.form.field.Picker",alias:"widget.timefield",requires:["Ext.form.field.Date","Ext.picker.Time","Ext.view.BoundListKeyNav","Ext.Date"],alternateClassName:["Ext.form.TimeField","Ext.form.Time"],triggerCls:Ext.baseCSSPrefix+"form-time-trigger",minText:"The time in this field must be equal to or after {0}",maxText:"The time in this field must be equal to or before {0}",invalidText:"{0} is not a valid time",format:"g:i A",altFormats:"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H|gi a|hi a|giA|hiA|gi A|hi A",increment:15,pickerMaxHeight:300,selectOnTab:!0,initDate:"1/1/2008",initDateFormat:"j/n/Y",initComponent:function(){var a=this,b=a.minValue,c=a.maxValue;b&&a.setMinValue(b),c&&a.setMaxValue(c),this.callParent()},initValue:function(){var a=this,b=a.value;Ext.isString(b)&&(a.value=a.rawToValue(b)),a.callParent()},setMinValue:function(a){var b=this,c=b.picker;b.setLimit(a,!0),c&&c.setMinValue(b.minValue)},setMaxValue:function(a){var b=this,c=b.picker;b.setLimit(a,!1),c&&c.setMaxValue(b.maxValue)},setLimit:function(a,b){var c=this,d,e;Ext.isString(a)?d=c.parseDate(a):Ext.isDate(a)&&(d=a),d&&(e=Ext.Date.clearTime(new Date(c.initDate)),e.setHours(d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds()),c[b?"minValue":"maxValue"]=e)},rawToValue:function(a){return this.parseDate(a)||a||null},valueToRaw:function(a){return this.formatDate(this.parseDate(a))},getErrors:function(a){var b=this,c=Ext.String.format,d=b.callParent(arguments),e=b.minValue,f=b.maxValue,g;return a=b.formatDate(a||b.processRawValue(b.getRawValue())),a===null||a.length<1?d:(g=b.parseDate(a),g?(e&&g<e&&d.push(c(b.minText,b.formatDate(e))),f&&g>f&&d.push(c(b.maxText,b.formatDate(f))),d):(d.push(c(b.invalidText,a,b.format)),d))},formatDate:function(){return Ext.form.field.Date.prototype.formatDate.apply(this,arguments)},parseDate:function(a){if(!a||Ext.isDate(a))return a;var b=this,c=b.safeParse(a,b.format),d=b.altFormats,e=b.altFormatsArray,f=0,g;if(!c&&d){e=e||d.split("|"),g=e.length;for(;f<g&&!c;++f)c=b.safeParse(a,e[f])}return c},safeParse:function(a,b){var c=this,d=Ext.Date,e,f=null;return d.formatContainsDateInfo(b)?f=d.parse(a,b):(e=d.parse(c.initDate+" "+a,c.initDateFormat+" "+b),e&&(f=e)),f},getSubmitValue:function(){var a=this,b=a.submitFormat||a.format,c=a.getValue();return c?Ext.Date.format(c,b):null},createPicker:function(){var a=this,b=Ext.create("Ext.picker.Time",{pickerField:a,selModel:{mode:"SINGLE"},floating:!0,hidden:!0,minValue:a.minValue,maxValue:a.maxValue,increment:a.increment,format:a.format,ownerCt:this.ownerCt,renderTo:document.body,maxHeight:a.pickerMaxHeight,focusOnToFront:!1});return a.mon(b.getSelectionModel(),{selectionchange:a.onListSelect,scope:a}),b},onExpand:function(){var a=this,b=a.pickerKeyNav,c=a.selectOnTab,d=a.getPicker(),e=d.getSelectionModel().lastSelected,f;b||(b=a.pickerKeyNav=Ext.create("Ext.view.BoundListKeyNav",this.inputEl,{boundList:d,forceKeyDown:!0,tab:function(b){return c&&(a.picker.highlightedItem?this.selectHighlighted(b):a.collapse(),a.triggerBlur()),!0}}),c&&(a.ignoreMonitorTab=!0)),Ext.defer(b.enable,1,b),e&&(f=d.getNode(e),f&&(d.highlightItem(f),d.el.scrollChildIntoView(f,!1)))},onCollapse:function(){var a=this,b=a.pickerKeyNav;b&&(b.disable(),a.ignoreMonitorTab=!1)},onChange:function(){var a=this,b=a.picker;a.callParent(arguments),b&&b.clearHighlight()},onListSelect:function(a,b){var c=this,d=b[0],e=d?d.get("date"):null;c.setValue(e),c.fireEvent("select",c,e),c.picker.clearHighlight(),c.collapse(),c.inputEl.focus()}}),Ext.define("Ext.grid.CellEditor",{extend:"Ext.Editor",constructor:function(a){a=Ext.apply({},a),a.field&&(a.field.monitorTab=!1),Ext.isDefined(a.autoSize)||(a.autoSize={width:"boundEl"}),this.callParent([a])},onShow:function(){var a=this.boundEl.first();a&&a.hide(),this.callParent(arguments)},onHide:function(){var a=this.boundEl.first();a&&a.show(),this.callParent(arguments)},afterRender:function(){this.callParent(arguments);var a=this.field;a.isXType("checkboxfield")&&(a.mon(a.inputEl,"mousedown",this.onCheckBoxMouseDown,this),a.mon(a.inputEl,"click",this.onCheckBoxClick,this))},onCheckBoxMouseDown:function(){this.completeEdit=Ext.emptyFn},onCheckBoxClick:function(){delete this.completeEdit,this.field.focus(!1,10)},alignment:"tl-tl",hideEl:!1,cls:Ext.baseCSSPrefix+"small-editor "+Ext.baseCSSPrefix+"grid-editor",shim:!1,shadow:!1}),Ext.define("Ext.grid.ColumnLayout",{extend:"Ext.layout.container.HBox",alias:"layout.gridcolumn",type:"column",reserveOffset:!1,shrinkToFit:!1,clearInnerCtOnLayout:!0,beforeLayout:function(){var a=this,b=0,c=a.getLayoutItems(),d=c.length,e,f,g;Ext.isDefined(a.availableSpaceOffset)||(g=a.owner.up("tablepanel").verticalScroller,a.availableSpaceOffset=g?g.width-1:0),f=a.callParent(arguments),a.innerCt.setHeight(23);for(;b<d;b++)e=c[b],e.el.setStyle({height:"auto"}),e.titleContainer.setStyle({height:"auto",paddingTop:"0"}),e.componentLayout&&e.componentLayout.lastComponentSize&&(e.componentLayout.lastComponentSize.height=e.el.dom.offsetHeight);return f},calculateChildBoxes:function(a,b){var c=this,d=c.callParent(arguments),e=d.boxes,f=d.meta,g=e.length,h=0,i,j;if(b.width&&!c.isHeader)if(c.owner.forceFit){for(;h<g;h++)i=e[h],j=i.component,j.minWidth=Ext.grid.plugin.HeaderResizer.prototype.minColWidth,j.flex=i.width;d=c.callParent(arguments)}else f.tooNarrow&&(b.width=f.desiredSize);return d},afterLayout:function(){var a=this,b=a.owner,c,d,e,f,g,h,i=0,j,k,l;a.callParent(arguments);if(!a.owner.hideHeaders){if(b.lockableInjected){c=b.up("tablepanel").up("tablepanel"),d=c.query("headercontainer:not([isHeader])"),e=d[0]===b?d[1]:d[0];if(!e.rendered)return;g=e.layout.getRenderTarget().getViewSize().height;if(!g)return;f=this.getRenderTarget().getViewSize().height;if(!f)return;c.componentLayout.layoutBusy=!0,l=f,f>g?(e.layout.align="stretch",e.setCalculatedSize(e.getWidth(),b.getHeight(),e.ownerCt),delete e.layout.align,h=e.up("tablepanel")):g>f&&(l=g,this.align="stretch",b.setCalculatedSize(b.getWidth(),e.getHeight(),b.ownerCt),delete this.align,h=b.up("tablepanel")),c.componentLayout.layoutBusy=!1,j=d[0].layout.getLayoutItems().concat(d[1].layout.getLayoutItems())}else l=this.getRenderTarget().getViewSize().height,j=a.getLayoutItems();k=j.length;for(;i<k;i++)j[i].setPadding(l);h&&setTimeout(function(){h.doLayout()},1)}},updateInnerCtSize:function(a,b){var c=this,d;return c.isHeader||(c.tooNarrow=b.meta.tooNarrow,d=c.reserveOffset?c.availableSpaceOffset:0,b.meta.tooNarrow?a.width=b.meta.desiredSize+d:a.width+=d),c.callParent(arguments)},doOwnerCtLayouts:function(){var a=this.owner.ownerCt;a.componentLayout.layoutBusy||a.doComponentLayout()}}),Ext.define("Ext.grid.LockingView",{mixins:{observable:"Ext.util.Observable"},eventRelayRe:/^(beforeitem|beforecontainer|item|container|cell)/,constructor:function(a){var b=this,c=[],d=b.eventRelayRe,e=a.locked.getView(),f=a.normal.getView(),g,h;Ext.apply(b,{lockedView:e,normalView:f,lockedGrid:a.locked,normalGrid:a.normal,panel:a.panel}),b.mixins.observable.constructor.call(b,a),g=e.events;for(h in g)g.hasOwnProperty(h)&&d.test(h)&&c.push(h);b.relayEvents(e,c),b.relayEvents(f,c),f.on({scope:b,itemmouseleave:b.onItemMouseLeave,itemmouseenter:b.onItemMouseEnter}),e.on({scope:b,itemmouseleave:b.onItemMouseLeave,itemmouseenter:b.onItemMouseEnter})},getGridColumns:function(){var a=this.lockedGrid.headerCt.getGridColumns();return a.concat(this.normalGrid.headerCt.getGridColumns())},getEl:function(a){return this.getViewForColumn(a).getEl()},getViewForColumn:function(a){var b=this.lockedView,c;return b.headerCt.cascade(function(b){if(b===a)return c=!0,!1}),c?b:this.normalView},onItemMouseEnter:function(a,b){var c=this,d=c.lockedView,e=c.normalView,f;a.trackOver&&(a!==d&&(e=d),f=e.getNode(b),e.highlightItem(f))},onItemMouseLeave:function(a,b){var c=this,d=c.lockedView,e=c.normalView;a.trackOver&&(a!==d&&(e=d),e.clearHighlight())},relayFn:function(a,b){b=b||[];var c=this.lockedView;c[a].apply(c,b||[]),c=this.normalView,c[a].apply(c,b||[])},getSelectionModel:function(){return this.panel.getSelectionModel()},getStore:function(){return this.panel.store},getNode:function(a){return this.normalView.getNode(a)},getCell:function(a,b){var c=this.getViewForColumn(b),d;return d=c.getNode(a),Ext.fly(d).down(b.getCellSelector())},getRecord:function(a){var b=this.lockedView.getRecord(a);return a||(b=this.normalView.getRecord(a)),b},addElListener:function(a,b,c){this.relayFn("addElListener",arguments)},refreshNode:function(){this.relayFn("refreshNode",arguments)},refresh:function(){this.relayFn("refresh",arguments)},bindStore:function(){this.relayFn("bindStore",arguments)},addRowCls:function(){this.relayFn("addRowCls",arguments)},removeRowCls:function(){this.relayFn("removeRowCls",arguments)}}),Ext.define("Ext.grid.Lockable",{requires:["Ext.grid.LockingView"],syncRowHeight:!0,spacerHidden:!0,headerCounter:0,unlockText:"Unlock",lockText:"Lock",determineXTypeToCreate:function(){var a=this,b;if(a.subGridXType)b=a.subGridXType;else{var c=this.getXTypes().split("/"),d=c.length,e=c[d-1],f=c[d-2];f!=="tablepanel"?b=f:b=e}return b},injectLockable:function(){this.lockable=!0,this.hasView=!0;var a=this,b=a.determineXTypeToCreate(),c=a.getSelectionModel(),d={xtype:b,enableAnimations:!1,scroll:!1,scrollerOwner:!1,selModel:c,border:!1,cls:Ext.baseCSSPrefix+"grid-inner-locked"},e={xtype:b,enableAnimations:!1,scrollerOwner:!1,selModel:c,border:!1},f=0,g,h,i;a.addCls(Ext.baseCSSPrefix+"grid-locked"),Ext.copyTo(e,a,a.normalCfgCopy),Ext.copyTo(d,a,a.lockedCfgCopy);for(;f<a.normalCfgCopy.length;f++)delete a[a.normalCfgCopy[f]];for(f=0;f<a.lockedCfgCopy.length;f++)delete a[a.lockedCfgCopy[f]];a.addEvents("lockcolumn","unlockcolumn"),a.addStateEvents(["lockcolumn","unlockcolumn"]),a.lockedHeights=[],a.normalHeights=[],g=a.processColumns(a.columns),d.width=g.lockedWidth+Ext.num(c.headerWidth,0),d.columns=g.locked,e.columns=g.normal,a.store=Ext.StoreManager.lookup(a.store),d.store=a.store,e.store=a.store,e.flex=1,d.viewConfig=a.lockedViewConfig||{},d.viewConfig.loadingUseMsg=!1,e.viewConfig=a.normalViewConfig||{},Ext.applyIf(d.viewConfig,a.viewConfig),Ext.applyIf(e.viewConfig,a.viewConfig),a.normalGrid=Ext.ComponentManager.create(e),a.lockedGrid=Ext.ComponentManager.create(d),a.view=Ext.create("Ext.grid.LockingView",{locked:a.lockedGrid,normal:a.normalGrid,panel:a}),a.syncRowHeight&&(a.lockedGrid.getView().on({refresh:a.onLockedGridAfterRefresh,itemupdate:a.onLockedGridAfterUpdate,scope:a}),a.normalGrid.getView().on({refresh:a.onNormalGridAfterRefresh,itemupdate:a.onNormalGridAfterUpdate,scope:a})),h=a.lockedGrid.headerCt,i=a.normalGrid.headerCt,h.lockedCt=!0,h.lockableInjected=!0,i.lockableInjected=!0,h.on({columnshow:a.onLockedHeaderShow,columnhide:a.onLockedHeaderHide,columnmove:a.onLockedHeaderMove,sortchange:a.onLockedHeaderSortChange,columnresize:a.onLockedHeaderResize,scope:a}),i.on({columnmove:a.onNormalHeaderMove,sortchange:a.onNormalHeaderSortChange,scope:a}),a.normalGrid.on({scrollershow:a.onScrollerShow,scrollerhide:a.onScrollerHide,scope:a}),a.lockedGrid.on("afterlayout",a.onLockedGridAfterLayout,a,{single:!0}),a.modifyHeaderCt(),a.items=[a.lockedGrid,a.normalGrid],a.relayHeaderCtEvents(h),a.relayHeaderCtEvents(i),a.layout={type:"hbox",align:"stretch"}},processColumns:function(a){var b=0,c=a.length,d=1,e=[],f=[],g;for(;b<c;++b)g=a[b],g.processed=!0,g.locked?(g.hidden||(d+=g.width||Ext.grid.header.Container.prototype.defaultWidth),e.push(g)):f.push(g),g.headerId||(g.headerId=(g.initialConfig||g).id||"L"+ ++this.headerCounter);return{lockedWidth:d,locked:e,normal:f}},onLockedGridAfterLayout:function(){var a=this,b=a.lockedGrid.getView();b.on({beforerefresh:a.destroySpacer,scope:a})},onLockedHeaderMove:function(){this.syncRowHeight&&this.onNormalGridAfterRefresh()},onNormalHeaderMove:function(){this.syncRowHeight&&this.onLockedGridAfterRefresh()},getSpacerEl:function(){var a=this,b,c,d;return a.spacerEl||(b=Ext.getScrollBarWidth()+(Ext.isIE?2:0),c=a.lockedGrid.getView(),d=c.el,a.spacerEl=Ext.DomHelper.append(d,{cls:a.spacerHidden?Ext.baseCSSPrefix+"hidden":"",style:"height: "+b+"px;"},!0)),a.spacerEl},destroySpacer:function(){var a=this;a.spacerEl&&(a.spacerEl.destroy(),delete a.spacerEl)},onLockedGridAfterRefresh:function(){var a=this,b=a.lockedGrid.getView(),c=b.el,d=c.query(b.getItemSelector()),e=d.length,f=0;a.lockedHeights=[];for(;f<e;f++)a.lockedHeights[f]=d[f].clientHeight;a.syncRowHeights()},onNormalGridAfterRefresh:function(){var a=this,b=a.normalGrid.getView(),c=b.el,d=c.query(b.getItemSelector()),e=d.length,f=0;a.normalHeights=[];for(;f<e;f++)a.normalHeights[f]=d[f].clientHeight;a.syncRowHeights()},onLockedGridAfterUpdate:function(a,b,c){this.lockedHeights[b]=c.clientHeight,this.syncRowHeights()},onNormalGridAfterUpdate:function(a,b,c){this.normalHeights[b]=c.clientHeight,this.syncRowHeights()},syncRowHeights:function(){var a=this,b=a.lockedHeights,c=a.normalHeights,d=[],e=b.length,f=0,g,h,i,j,k=a.getVerticalScroller(),l;if(b.length&&c.length){g=a.lockedGrid.getView(),h=a.normalGrid.getView(),i=g.el.query(g.getItemSelector()),j=h.el.query(h.getItemSelector());for(;f<e;f++)!isNaN(b[f])&&!isNaN(c[f])&&(b[f]>c[f]?Ext.fly(j[f]).setHeight(b[f]):b[f]<c[f]&&Ext.fly(i[f]).setHeight(c[f]));a.normalGrid.invalidateScroller(),k&&k.setViewScrollTop?k.setViewScrollTop(a.virtualScrollTop):(l=h.el.dom.scrollTop,h.el.dom.scrollTop=l,g.el.dom.scrollTop=l),a.lockedHeights=[],a.normalHeights=[]}},onScrollerShow:function(a,b){b==="horizontal"&&(this.spacerHidden=!1,this.getSpacerEl().removeCls(Ext.baseCSSPrefix+"hidden"))},onScrollerHide:function(a,b){b==="horizontal"&&(this.spacerHidden=!0,this.spacerEl&&this.spacerEl.addCls(Ext.baseCSSPrefix+"hidden"))},modifyHeaderCt:function(){var a=this;a.lockedGrid.headerCt.getMenuItems=a.getMenuItems(!0),a.normalGrid.headerCt.getMenuItems=a.getMenuItems(!1)},onUnlockMenuClick:function(){this.unlock()},onLockMenuClick:function(){this.lock()},getMenuItems:function(a){var b=this,c=b.unlockText,d=b.lockText,e=Ext.baseCSSPrefix+"hmenu-unlock",f=Ext.baseCSSPrefix+"hmenu-lock",g=Ext.Function.bind(b.onUnlockMenuClick,b),h=Ext.Function.bind(b.onLockMenuClick,b);return function(){var b=Ext.grid.header.Container.prototype.getMenuItems.call(this);return b.push("-",{cls:e,text:c,handler:g,disabled:!a}),b.push({cls:f,text:d,handler:h,disabled:a}),b}},lock:function(a,b){var c=this,d=c.normalGrid,e=c.lockedGrid,f=d.headerCt,g=e.headerCt;a=a||f.getMenu().activeHeader,a.flex&&(a.width=a.getWidth(),delete a.flex),f.remove(a,!1),g.suspendLayout=!0,a.locked=!0,Ext.isDefined(b)?g.insert(b,a):g.add(a),g.suspendLayout=!1,c.syncLockedSection(),c.fireEvent("lockcolumn",c,a)},syncLockedSection:function(){var a=this;a.syncLockedWidth(),a.lockedGrid.getView().refresh(),a.normalGrid.getView().refresh()},syncLockedWidth:function(){var a=this,b=a.lockedGrid.headerCt.getFullWidth(!0);a.lockedGrid.setWidth(b+1),a.doComponentLayout()},onLockedHeaderResize:function(){this.syncLockedWidth()},onLockedHeaderHide:function(){this.syncLockedWidth()},onLockedHeaderShow:function(){this.syncLockedWidth()},onLockedHeaderSortChange:function(a,b,c){c&&this.normalGrid.headerCt.clearOtherSortStates(null,!0)},onNormalHeaderSortChange:function(a,b,c){c&&this.lockedGrid.headerCt.clearOtherSortStates(null,!0)},unlock:function(a,b){var c=this,d=c.normalGrid,e=c.lockedGrid,f=d.headerCt,g=e.headerCt;Ext.isDefined(b)||(b=0),a=a||g.getMenu().activeHeader,g.remove(a,!1),c.syncLockedWidth(),c.lockedGrid.getView().refresh(),a.locked=!1,f.insert(b,a),c.normalGrid.getView().refresh(),c.fireEvent("unlockcolumn",c,a)},applyColumnsState:function(a){var b=this,c=b.lockedGrid,d=c.headerCt,e=b.normalGrid.headerCt,f=d.items,g=e.items,h,i=[],j=[],k,l=1;Ext.each(a,function(a){function b(b){return b.headerId==a.id}k=!0,(h=f.findBy(b))||(h=g.findBy(b),k=!1),h&&(h.applyColumnState&&h.applyColumnState(a),Ext.isDefined(h.locked)||(h.locked=k),h.locked?(i.push(h),!h.hidden&&Ext.isNumber(h.width)&&(l+=h.width)):j.push(h))}),i.length+j.length==f.getCount()+g.getCount()&&(d.removeAll(!1),e.removeAll(!1),d.add(i),e.add(j),c.setWidth(l))},getColumnsState:function(){var a=this,b=a.lockedGrid.headerCt.getColumnsState(),c=a.normalGrid.headerCt.getColumnsState();return b.concat(c)},reconfigureLockable:function(a,b){var c=this,d=c.lockedGrid,e=c.normalGrid;b&&(d.headerCt.suspendLayout=!0,e.headerCt.suspendLayout=!0,d.headerCt.removeAll(),e.headerCt.removeAll(),b=c.processColumns(b),d.setWidth(b.lockedWidth),d.headerCt.add(b.locked),e.headerCt.add(b.normal)),a?(a=Ext.data.StoreManager.lookup(a),c.store=a,d.bindStore(a),e.bindStore(a)):(d.getView().refresh(),e.getView().refresh()),b&&(d.headerCt.suspendLayout=!1,e.headerCt.suspendLayout=!1,d.headerCt.forceComponentLayout(),e.headerCt.forceComponentLayout())}}),Ext.define("Ext.grid.Scroller",{extend:"Ext.Component",alias:"widget.gridscroller",weight:110,baseCls:Ext.baseCSSPrefix+"scroller",focusable:!1,reservedSpace:0,renderTpl:['<div class="'+Ext.baseCSSPrefix+'scroller-ct" id="{baseId}_ct">','<div class="'+Ext.baseCSSPrefix+'stretcher" id="{baseId}_stretch"></div>',"</div>"],initComponent:function(){var a=this,b=a.dock,c=Ext.baseCSSPrefix+"scroller-vertical";a.offsets={bottom:0},a.scrollProp="scrollTop",a.vertical=!0,a.sizeProp="width";if(b==="top"||b==="bottom")c=Ext.baseCSSPrefix+"scroller-horizontal",a.sizeProp="height",a.scrollProp="scrollLeft",a.vertical=!1,a.weight+=5;a.cls+=" "+c,Ext.applyIf(a.renderSelectors,{stretchEl:"."+Ext.baseCSSPrefix+"stretcher",scrollEl:"."+Ext.baseCSSPrefix+"scroller-ct"}),a.callParent()},ensureDimension:function(){var a=this,b=a.sizeProp;a[b]=a.scrollerSize=Ext.getScrollbarSize()[b]},initRenderData:function(){var a=this,b=a.callParent(arguments)||{};return b.baseId=a.id,b},afterRender:function(){var a=this;a.callParent(),a.mon(a.scrollEl,"scroll",a.onElScroll,a),Ext.cache[a.el.id].skipGarbageCollection=!0},onAdded:function(a){this.ownerGrid=a,this.callParent(arguments)},getSizeCalculation:function(){var a=this,b=a.getPanel(),c=1,d=1,e,f;if(!a.vertical){var g=b.query("tableview"),h=g[1]||g[0];if(!h)return!1;c=h.headerCt.getFullWidth(),Ext.isIEQuirks&&c--}else{e=b.down("tableview:not([lockableInjected])");if(!e||!e.el)return!1;f=e.el.child("table",!0);if(!f)return!1;d=f.offsetHeight}return isNaN(c)&&(c=1),isNaN(d)&&(d=1),{width:c,height:d}},invalidate:function(a){var b=this,c=b.stretchEl;if(!c||!b.ownerCt)return;var d=b.getSizeCalculation(),e=b.scrollEl,f=e.dom,g=b.reservedSpace,h,i=5;d&&(c.setSize(d),d=b.el.getSize(!0),b.vertical?(d.width+=i,d.height-=g,h="left"):(d.width-=g,d.height+=i,h="top"),e.setSize(d),f.style[h]=-i+"px",f.scrollTop=f.scrollTop)},afterComponentLayout:function(){this.callParent(arguments),this.invalidate()},restoreScrollPos:function(){var a=this,b=this.scrollEl,c=b&&b.dom;a._scrollPos!==null&&c&&(c[a.scrollProp]=a._scrollPos,a._scrollPos=null)},setReservedSpace:function(a){var b=this;b.reservedSpace!==a&&(b.reservedSpace=a,b.invalidate())},saveScrollPos:function(){var a=this,b=this.scrollEl,c=b&&b.dom;a._scrollPos=c?c[a.scrollProp]:null},setScrollTop:function(a){var b=this.scrollEl,c=b&&b.dom;if(c)return c.scrollTop=Ext.Number.constrain(a,0,c.scrollHeight-c.clientHeight)},setScrollLeft:function(a){var b=this.scrollEl,c=b&&b.dom;if(c)return c.scrollLeft=Ext.Number.constrain(a,0,c.scrollWidth-c.clientWidth)},scrollByDeltaY:function(a){var b=this.scrollEl,c=b&&b.dom;if(c)return this.setScrollTop(c.scrollTop+a)},scrollByDeltaX:function(a){var b=this.scrollEl,c=b&&b.dom;if(c)return this.setScrollLeft(c.scrollLeft+a)},scrollToTop:function(){this.setScrollTop(0)},onElScroll:function(a,b){this.fireEvent("bodyscroll",a,b)},getPanel:function(){var a=this;return a.panel||(a.panel=this.up("[scrollerOwner]")),a.panel}}),Ext.define("Ext.grid.PagingScroller",{extend:"Ext.grid.Scroller",alias:"widget.paginggridscroller",percentageFromEdge:.35,scrollToLoadBuffer:200,activePrefetch:!0,chunkSize:50,snapIncrement:25,syncScroll:!0,initComponent:function(){var a=this,b=a.store;b.on("guaranteedrange",a.onGuaranteedRange,a),a.callParent(arguments)},onGuaranteedRange:function(a,b,c){var d=this,e=d.store,f;if(a.length&&d.visibleStart<a[0].index)return;e.loadRecords(a),d.firstLoad?d.scrollEl&&d.scrollEl.dom&&d.scrollEl.dom.scrollHeight&&d.syncTo():(d.rendered?d.invalidate():d.on("afterrender",d.invalidate,d,{single:!0}),d.firstLoad=!0)},syncTo:function(){var a=this,b=a.getPanel(),c=b.store,d=this.scrollEl.dom,e=a.visibleStart-c.guaranteedStart,f=e*a.rowHeight,g=d.scrollHeight,h=d.clientHeight,i=d.scrollTop,j;Ext.isIE9&&Ext.isStrict&&(h=d.offsetHeight+2),j=g-h-i<=0,this.setViewScrollTop(f,j)},getPageData:function(){var a=this.getPanel(),b=a.store,c=b.getTotalCount();return{total:c,currentPage:b.currentPage,pageCount:Math.ceil(c/b.pageSize),fromRecord:(b.currentPage-1)*b.pageSize+1,toRecord:Math.min(b.currentPage*b.pageSize,c)}},onElScroll:function(a,b){var c=this,d=c.getPanel(),e=d.store,f=e.pageSize,g=e.guaranteedStart,h=e.guaranteedEnd,i=e.getTotalCount(),j=Math.ceil(c.percentageFromEdge*f),k=b.scrollTop,l=Math.floor(k/c.rowHeight),m=d.down("tableview"),n=m.el,o=n.getHeight(),p=Math.ceil(o/c.rowHeight),q=l+p,r=Math.floor(l/f),s=Math.floor(q/f)+2,t=Math.ceil(i/f),u=c.snapIncrement,v=Math.floor(l/u)*u,w=v+f-1,x=c.activePrefetch;c.visibleStart=l,c.visibleEnd=q,c.syncScroll=!0,i>=f&&(w>i-1?(c.cancelLoad(),e.rangeSatisfied(i-f,i-1)&&(c.syncScroll=!0),e.guaranteeRange(i-f,i-1)):l<=g||q>h?(l<=g&&(v-=u,w-=u,v<0&&(v=0,w=f)),e.rangeSatisfied(v,w)?(c.cancelLoad(),e.guaranteeRange(v,w)):(e.mask(),c.attemptLoad(v,w)),c.syncScroll=!1):x&&l<g+j&&r>0?(c.syncScroll=!0,e.prefetchPage(r)):x&&q>h-j&&s<t&&(c.syncScroll=!0,e.prefetchPage(s))),c.syncScroll&&c.syncTo()},getSizeCalculation:function(){var a=this,b=a.ownerGrid,c=b.getView(),d=a.store,e=a.dock,f=a.el.dom,g=1,h=1;return a.rowHeight||(a.rowHeight=c.el.down(c.getItemSelector()).getHeight(!1,!0)),h=d[!d.remoteFilter&&d.isFiltered()?"getCount":"getTotalCount"]()*a.rowHeight,isNaN(g)&&(g=1),isNaN(h)&&(h=1),{width:g,height:h}},attemptLoad:function(a,b){var c=this;c.loadTask||(c.loadTask=Ext.create("Ext.util.DelayedTask",c.doAttemptLoad,c,[])),c.loadTask.delay(c.scrollToLoadBuffer,c.doAttemptLoad,c,[a,b])},cancelLoad:function(){this.loadTask&&this.loadTask.cancel()},doAttemptLoad:function(a,b){var c=this.getPanel().store;c.guaranteeRange(a,b)},setViewScrollTop:function(a,b){var c=this,d=c.getPanel(),e=d.query("tableview"),f=0,g=e.length,h,i,j,k,l=c.el.dom;d.virtualScrollTop=a,h=e[1]||e[0],i=h.el.dom,k=d.store.pageSize*c.rowHeight-i.clientHeight,j=a%(d.store.pageSize*c.rowHeight+1),b&&(j=k);if(j>k)return;for(;f<g;f++)e[f].el.dom.scrollTop=j}}),Ext.define("Ext.panel.Table",{extend:"Ext.panel.Panel",alias:"widget.tablepanel",uses:["Ext.selection.RowModel","Ext.grid.Scroller","Ext.grid.header.Container","Ext.grid.Lockable"],extraBaseCls:Ext.baseCSSPrefix+"grid",extraBodyCls:Ext.baseCSSPrefix+"grid-body",layout:"fit",hasView:!1,viewType:null,selType:"rowmodel",scrollDelta:40,scroll:!0,deferRowRender:!0,sortableColumns:!0,enableLocking:!1,verticalScrollDock:"right",verticalScrollerType:"gridscroller",horizontalScrollerPresentCls:Ext.baseCSSPrefix+"horizontal-scroller-present",verticalScrollerPresentCls:Ext.baseCSSPrefix+"vertical-scroller-present",scrollerOwner:!0,invalidateScrollerOnRefresh:!0,enableColumnMove:!0,enableColumnResize:!0,enableColumnHide:!0,initComponent:function(){var a=this,b=a.scroll,c=!1,d=!1,e=a.columns||a.colModel,f=0,g,h=a.border;a.hideHeaders&&(h=!1),a.store=Ext.data.StoreManager.lookup(a.store||"ext-empty-store");if(e instanceof Ext.grid.header.Container)a.headerCt=e,a.headerCt.border=h,a.columns=a.headerCt.items.items;else{Ext.isArray(e)&&(e={items:e,border:h}),Ext.apply(e,{forceFit:a.forceFit,sortable:a.sortableColumns,enableColumnMove:a.enableColumnMove,enableColumnResize:a.enableColumnResize,enableColumnHide:a.enableColumnHide,border:h}),a.columns=e.items;if(a.enableLocking||Ext.ComponentQuery.query("{locked !== undefined}{processed != true}",a.columns).length)a.self.mixin("lockable",Ext.grid.Lockable),a.injectLockable()}a.addEvents("reconfigure","viewready","scrollerhide","scrollershow"),a.bodyCls=a.bodyCls||"",a.bodyCls+=" "+a.extraBodyCls,a.cls=a.cls||"",a.cls+=" "+a.extraBaseCls,delete a.autoScroll,a.hasView||(a.headerCt||(a.headerCt=Ext.create("Ext.grid.header.Container",e)),a.columns=a.headerCt.items.items,a.hideHeaders&&(a.headerCt.height=0,a.headerCt.border=!1,a.headerCt.addCls(Ext.baseCSSPrefix+"grid-header-ct-hidden"),a.addCls(Ext.baseCSSPrefix+"grid-header-hidden"),Ext.isIEQuirks&&(a.headerCt.style={display:"none"})),b===!0||b==="both"?c=d=!0:b==="horizontal"?d=!0:b==="vertical"?c=!0:a.headerCt.availableSpaceOffset=0,c&&(a.verticalScroller=Ext.ComponentManager.create(a.initVerticalScroller()),a.mon(a.verticalScroller,{bodyscroll:a.onVerticalScroll,scope:a})),d&&(a.horizontalScroller=Ext.ComponentManager.create(a.initHorizontalScroller()),a.mon(a.horizontalScroller,{bodyscroll:a.onHorizontalScroll,scope:a})),a.headerCt.on("resize",a.onHeaderResize,a),a.relayHeaderCtEvents(a.headerCt),a.features=a.features||[],Ext.isArray(a.features)||(a.features=[a.features]),a.dockedItems=a.dockedItems||[],a.dockedItems.unshift(a.headerCt),a.viewConfig=a.viewConfig||{},a.viewConfig.invalidateScrollerOnRefresh=a.invalidateScrollerOnRefresh,g=a.getView(),g.on({afterrender:function(){g.el.scroll=Ext.Function.bind(a.elScroll,a),a.mon(g.el,{mousewheel:a.onMouseWheel,scope:a})},single:!0}),a.items=[g],a.hasView=!0,a.mon(g.store,{load:a.onStoreLoad,scope:a}),a.mon(g,{viewReady:a.onViewReady,resize:a.onViewResize,refresh:{fn:a.onViewRefresh,scope:a,buffer:50},scope:a}),this.relayEvents(g,["beforeitemmousedown","beforeitemmouseup","beforeitemmouseenter","beforeitemmouseleave","beforeitemclick","beforeitemdblclick","beforeitemcontextmenu","itemmousedown","itemmouseup","itemmouseenter","itemmouseleave","itemclick","itemdblclick","itemcontextmenu","beforecontainermousedown","beforecontainermouseup","beforecontainermouseover","beforecontainermouseout","beforecontainerclick","beforecontainerdblclick","beforecontainercontextmenu","containermouseup","containermouseover","containermouseout","containerclick","containerdblclick","containercontextmenu","selectionchange","beforeselect","select","beforedeselect","deselect"])),a.callParent(arguments)},onRender:function(){var a=this.verticalScroller,b=this.horizontalScroller;a&&a.ensureDimension(),b&&b.ensureDimension(),this.callParent(arguments)},initStateEvents:function(){var a=this.stateEvents;Ext.each(["columnresize","columnmove","columnhide","columnshow","sortchange"],function(b){Ext.Array.indexOf(a,b)&&a.push(b)}),this.callParent()},initHorizontalScroller:function(){var a=this,b={xtype:"gridscroller",dock:"bottom",section:a,store:a.store};return b},initVerticalScroller:function(){var a=this,b=a.verticalScroller||{};return Ext.applyIf(b,{xtype:a.verticalScrollerType,dock:a.verticalScrollDock,store:a.store}),b},relayHeaderCtEvents:function(a){this.relayEvents(a,["columnresize","columnmove","columnhide","columnshow","sortchange"])},getState:function(){var a=this,b=a.callParent(),c=a.store.sorters.first();return b.columns=(a.headerCt||a).getColumnsState(),c&&(b.sort={property:c.property,direction:c.direction}),b},applyState:function(a){var b=this,c=a.sort,d=b.store,e=a.columns;delete a.columns,b.callParent(arguments),e&&(b.headerCt||b).applyColumnsState(e),c&&(d.remoteSort?d.sorters.add(Ext.create("Ext.util.Sorter",{property:c.property,direction:c.direction})):d.sort(c.property,c.direction))},getStore:function(){return this.store},getView:function(){var a=this,b;return a.view||(b=a.getSelectionModel(),a.view=a.createComponent(Ext.apply({},a.viewConfig,{deferInitialRefresh:a.deferRowRender,xtype:a.viewType,store:a.store,headerCt:a.headerCt,selModel:b,features:a.features,panel:a})),a.mon(a.view,{uievent:a.processEvent,scope:a}),b.view=a.view,a.headerCt.view=a.view,a.relayEvents(a.view,["cellclick","celldblclick"])),a.view},setAutoScroll:Ext.emptyFn,elScroll:function(a,b,c){var d=this,e;if(a==="up"||a==="left")b=-b;a==="down"||a==="up"?(e=d.getVerticalScroller(),e&&e.scrollByDeltaY(b)):(e=d.getHorizontalScroller(),e&&e.scrollByDeltaX(b))},processEvent:function(a,b,c,d,e,f){var g=this,h;if(e!==-1)return h=g.headerCt.getGridColumns()[e],h.processEvent.apply(h,arguments)},determineScrollbars:function(){if(this.determineScrollbarsRunning)return;this.determineScrollbarsRunning=!0;var a=this,b=a.view,c,d,e,f,g,h,i=a.verticalScroller,j=a.horizontalScroller,k=(i&&i.ownerCt===a?1:0)|(j&&j.ownerCt===a?2:0),l=0;!a.collapsed&&b&&b.viewReady&&(c=b.el.getSize(),f=c.width+(k&1?i.width:0),h=c.height+(k&2?j.height:0),e=a.headerCt.query("[flex]").length&&!a.headerCt.layout.tooNarrow?0:a.headerCt.getFullWidth(),i&&i.el?g=i.getSizeCalculation().height:(d=b.el.child("table",!0),g=d?d.offsetHeight:0),g>h?(l=1,j&&f-e<i.width&&(l=3)):e>f&&(l=2,i&&h-g<j.height&&(l=3)),l!==k&&(a.suspendLayout=!0,l&1?a.showVerticalScroller():a.hideVerticalScroller(),l&2?a.showHorizontalScroller():a.hideHorizontalScroller(),a.suspendLayout=!1,a.doComponentLayout(),a.getLayout().layout())),delete a.determineScrollbarsRunning},onViewResize:function(){this.determineScrollbars()},afterComponentLayout:function(){this.callParent(arguments),this.determineScrollbars(),this.invalidateScroller()},onHeaderResize:function(){!this.componentLayout.layoutBusy&&this.view&&this.view.rendered&&(this.determineScrollbars(),this.invalidateScroller())},afterCollapse:function(){var a=this;a.verticalScroller&&a.verticalScroller.saveScrollPos(),a.horizontalScroller&&a.horizontalScroller.saveScrollPos(),a.callParent(arguments)},afterExpand:function(){var a=this;a.callParent(arguments),a.verticalScroller&&a.verticalScroller.restoreScrollPos(),a.horizontalScroller&&a.horizontalScroller.restoreScrollPos()},hideHorizontalScroller:function(){var a=this;a.horizontalScroller&&a.horizontalScroller.ownerCt===a&&(a.verticalScroller.setReservedSpace(0),a.removeDocked(a.horizontalScroller,!1),a.removeCls(a.horizontalScrollerPresentCls),a.fireEvent("scrollerhide",a.horizontalScroller,"horizontal"))},showHorizontalScroller:function(){var a=this;a.verticalScroller&&a.verticalScroller.setReservedSpace(Ext.getScrollbarSize().height-1),a.horizontalScroller&&a.horizontalScroller.ownerCt!==a&&(a.addDocked(a.horizontalScroller),a.addCls(a.horizontalScrollerPresentCls),a.fireEvent("scrollershow",a.horizontalScroller,"horizontal"))},hideVerticalScroller:function(){var a=this;a.setHeaderReserveOffset(!1),a.verticalScroller&&a.verticalScroller.ownerCt===a&&(a.removeDocked(a.verticalScroller,!1),a.removeCls(a.verticalScrollerPresentCls),a.fireEvent("scrollerhide",a.verticalScroller,"vertical"))},showVerticalScroller:function(){var a=this;a.setHeaderReserveOffset(!0),a.verticalScroller&&a.verticalScroller.ownerCt!==a&&(a.addDocked(a.verticalScroller),a.addCls(a.verticalScrollerPresentCls),a.fireEvent("scrollershow",a.verticalScroller,"vertical"))},setHeaderReserveOffset:function(a){var b=this.headerCt,c=b.layout;c&&c.reserveOffset!==a&&(c.reserveOffset=a,this.suspendLayout||b.doLayout())},invalidateScroller:function(){var a=this,b=a.verticalScroller,c=a.horizontalScroller;b&&b.invalidate(),c&&c.invalidate()},onHeaderMove:function(a,b,c,d){this.view.refresh()},onHeaderHide:function(a,b){this.invalidateScroller()},onHeaderShow:function(a,b){this.invalidateScroller()},getVerticalScroller:function(){return this.getScrollerOwner().down("gridscroller[dock="+this.verticalScrollDock+"]")},getHorizontalScroller:function(){return this.getScrollerOwner().down("gridscroller[dock=bottom]")},onMouseWheel:function(a){var b=this,c=b.getVerticalScroller(),d=b.getHorizontalScroller(),e=-b.scrollDelta,f=a.getWheelDeltas(),g=e*f.x,h=e*f.y,i,j,k,l,m,n,o,p;d&&(j=d.scrollEl,j&&(l=j.dom,n=l.scrollLeft!==l.scrollWidth-l.clientWidth,m=l.scrollLeft!==0)),c&&(i=c.scrollEl,i&&(k=i.dom,o=k.scrollTop!==k.scrollHeight-k.clientHeight,p=k.scrollTop!==0)),d&&(g<0&&m||g>0&&n)&&(a.stopEvent(),d.scrollByDeltaX(g)),c&&(h<0&&p||h>0&&o)&&(a.stopEvent(),c.scrollByDeltaY(h))},onViewReady:function(){var a=this;a.fireEvent("viewready",a),a.deferRowRender&&(a.determineScrollbars(),a.invalidateScroller())},onViewRefresh:function(){var a=this;a.rendering||(this.determineScrollbars(),this.invalidateScrollerOnRefresh&&this.invalidateScroller())},setScrollTop:function(a){var b=this,c=b.getScrollerOwner(),d=b.getVerticalScroller();c.virtualScrollTop=a,d&&d.setScrollTop(a)},getScrollerOwner:function(){var a=this;return this.scrollerOwner||(a=this.up("[scrollerOwner]")),a},scrollByDeltaY:function(a){var b=this.getVerticalScroller();b&&b.scrollByDeltaY(a)},scrollByDeltaX:function(a){var b=this.getHorizontalScroller();b&&b.scrollByDeltaX(a)},getLhsMarker:function(){var a=this;return a.lhsMarker||(a.lhsMarker=Ext.DomHelper.append(a.el,{cls:Ext.baseCSSPrefix+"grid-resize-marker"},!0)),a.lhsMarker},getRhsMarker:function(){var a=this;return a.rhsMarker||(a.rhsMarker=Ext.DomHelper.append(a.el,{cls:Ext.baseCSSPrefix+"grid-resize-marker"},!0)),a.rhsMarker},getSelectionModel:function(){this.selModel||(this.selModel={});var a="SINGLE",b;return this.simpleSelect?a="SIMPLE":this.multiSelect&&(a="MULTI"),Ext.applyIf(this.selModel,{allowDeselect:this.allowDeselect,mode:a}),this.selModel.events||(b=this.selModel.selType||this.selType,this.selModel=Ext.create("selection."+b,this.selModel)),this.selModel.hasRelaySetup||(this.relayEvents(this.selModel,["selectionchange","beforeselect","beforedeselect","select","deselect"]),this.selModel.hasRelaySetup=!0),this.disableSelection&&(this.selModel.locked=!0),this.selModel},onVerticalScroll:function(a,b){var c=this.getScrollerOwner(),d=c.query("tableview"),e=0,f=d.length;for(;e<f;e++)d[e].el.dom.scrollTop=b.scrollTop},onHorizontalScroll:function(a,b){var c=this.getScrollerOwner(),d=c.query("tableview"),e=d[1]||d[0];e.el.dom.scrollLeft=b.scrollLeft,this.headerCt.el.dom.scrollLeft=b.scrollLeft},onStoreLoad:Ext.emptyFn,getEditorParent:function(){return this.body},bindStore:function(a){var b=this;b.store=a,b.getView().bindStore(a)},beforeDestroy:function(){Ext.destroy(this.horizontalScroller,this.verticalScroller),this.callParent()},reconfigure:function(a,b){var c=this,d=c.headerCt;c.lockable?c.reconfigureLockable(a,b):(b&&(d.suspendLayout=!0,d.removeAll(),d.add(b)),a?(a=Ext.StoreManager.lookup(a),c.bindStore(a)):c.getView().refresh(),b&&(d.suspendLayout=!1,c.forceComponentLayout())),c.fireEvent("reconfigure",c)}}),Ext.define("Ext.view.Table",{extend:"Ext.view.View",alias:"widget.tableview",uses:["Ext.view.TableChunker","Ext.util.DelayedTask","Ext.util.MixedCollection"],baseCls:Ext.baseCSSPrefix+"grid-view",itemSelector:"."+Ext.baseCSSPrefix+"grid-row",cellSelector:"."+Ext.baseCSSPrefix+"grid-cell",selectedItemCls:Ext.baseCSSPrefix+"grid-row-selected",selectedCellCls:Ext.baseCSSPrefix+"grid-cell-selected",focusedItemCls:Ext.baseCSSPrefix+"grid-row-focused",overItemCls:Ext.baseCSSPrefix+"grid-row-over",altRowCls:Ext.baseCSSPrefix+"grid-row-alt",rowClsRe:/(?:^|\s*)grid-row-(first|last|alt)(?:\s+|$)/g,cellRe:new RegExp("x-grid-cell-([^\\s]+) ",""),trackOver:!0,getRowClass:null,initComponent:function(){var a=this;a.scrollState={},a.selModel.view=a,a.headerCt.view=a,a.initFeatures(),a.tpl="<div></div>",a.callParent(),a.mon(a.store,{load:a.onStoreLoad,scope:a})},onStoreLoad:function(){var a=this;a.invalidateScrollerOnRefresh&&(Ext.isGecko?(a.scrollToTopTask||(a.scrollToTopTask=Ext.create("Ext.util.DelayedTask",a.scrollToTop,a)),a.scrollToTopTask.delay(1)):a.scrollToTop())},scrollToTop:Ext.emptyFn,addElListener:function(a,b,c){this.mon(this,a,b,c,{element:"el"})},getGridColumns:function(){return this.headerCt.getGridColumns()},getHeaderAtIndex:function(a){return this.headerCt.getHeaderAtIndex(a)},getCell:function(a,b){var c=this.getNode(a);return Ext.fly(c).down(b.getCellSelector())},getFeature:function(a){var b=this.featuresMC;if(b)return b.get(a)},initFeatures:function(){var a=this,b=0,c,d;a.features=a.features||[],c=a.features,d=c.length,a.featuresMC=Ext.create("Ext.util.MixedCollection");for(;b<d;b++)c[b].isFeature||(c[b]=Ext.create("feature."+c[b].ftype,c[b])),c[b].view=a,a.featuresMC.add(c[b])},attachEventsForFeatures:function(){var a=this.features,b=a.length,c=0;for(;c<b;c++)a[c].isFeature&&a[c].attachEvents()},afterRender:function(){var a=this;a.callParent(),a.mon(a.el,{scroll:a.fireBodyScroll,scope:a}),a.el.unselectable(),a.attachEventsForFeatures()},fireBodyScroll:function(a,b){this.fireEvent("bodyscroll",a,b)},prepareData:function(a,b,c){var d=this,e=d.headerCt.prepareData(a,b,c,d,d.ownerCt),f=d.features,g=f.length,h=0,i,j;for(;h<g;h++)j=f[h],j.isFeature&&Ext.apply(e,j.getAdditionalData(a,b,c,e,d));return e},collectData:function(a,b){var c=this.callParent(arguments),d=this.headerCt,e=d.getFullWidth(),f=this.features,g=f.length,h={rows:c,fullWidth:e},i=0,j,k=0,l,m;l=c.length;if(this.getRowClass)for(;k<l;k++)m={},c[k].rowCls=this.getRowClass(a[k],k,m,this.store);for(;i<g;i++){j=f[i];if(j.isFeature&&j.collectData&&!j.disabled){h=j.collectData(a,c,b,e,h);break}}return h},onHeaderResize:function(a,b,c){var d=this,e=d.el;e&&(d.saveScrollState(),(Ext.isIE6||Ext.isIE7)&&a.el.hasCls(Ext.baseCSSPrefix+"column-header-first")&&(b+=1),e.select("."+Ext.baseCSSPrefix+"grid-col-resizer-"+a.id).setWidth(b),e.select("."+Ext.baseCSSPrefix+"grid-table-resizer").setWidth(d.headerCt.getFullWidth()),d.restoreScrollState(),d.ignoreTemplate||d.setNewTemplate(),c||d.el.focus())},onHeaderShow:function(a,b,c){var d=this;d.ignoreTemplate=!0,b.oldWidth?(d.onHeaderResize(b,b.oldWidth,c),delete b.oldWidth):b.width&&!b.flex&&d.onHeaderResize(b,b.width,c),delete d.ignoreTemplate,d.setNewTemplate()},onHeaderHide:function(a,b,c){this.onHeaderResize(b,0,c)},setNewTemplate:function(){var a=this,b=a.headerCt.getColumnsForTpl(!0);a.tpl=a.getTableChunker().getTableTpl({columns:b,features:a.features})},getTableChunker:function(){return this.chunker||Ext.view.TableChunker},addRowCls:function(a,b){var c=this.getNode(a);c&&Ext.fly(c).addCls(b)},removeRowCls:function(a,b){var c=this.getNode(a);c&&Ext.fly(c).removeCls(b)},onRowSelect:function(a){this.addRowCls(a,this.selectedItemCls)},onRowDeselect:function(a){var b=this;b.removeRowCls(a,b.selectedItemCls),b.removeRowCls(a,b.focusedItemCls)},onCellSelect:function(a){var b=this.getCellByPosition(a);b&&b.addCls(this.selectedCellCls)},onCellDeselect:function(a){var b=this.getCellByPosition(a);b&&b.removeCls(this.selectedCellCls)},onCellFocus:function(a){this.focusCell(a)},getCellByPosition:function(a){var b=a.row,c=a.column,d=this.store,e=this.getNode(b),f=this.headerCt.getHeaderAtIndex(c),g,h=!1;return f&&e&&(g=f.getCellSelector(),h=Ext.fly(e).down(g)),h},onRowFocus:function(a,b,c){var d=this,e=d.getNode(a);b?(d.addRowCls(a,d.focusedItemCls),c||d.focusRow(a)):d.removeRowCls(a,d.focusedItemCls)},focusRow:function(a){var b=this,c=b.getNode(a),d=b.el,e=0,f=b.ownerCt,g,h,i;c&&d&&(h=d.getRegion(),g=Ext.fly(c).getRegion(),g.top<h.top?e=g.top-h.top:g.bottom>h.bottom&&(e=g.bottom-h.bottom),i=b.getRecord(c),a=b.store.indexOf(i),e&&f.scrollByDeltaY(e),b.fireEvent("rowfocus",i,c,a))},focusCell:function(a){var b=this,c=b.getCellByPosition(a),d=b.el,e=0,f=0,g=d.getRegion(),h=b.ownerCt,i,j;c&&(i=c.getRegion(),i.top<g.top?e=i.top-g.top:i.bottom>g.bottom&&(e=i.bottom-g.bottom),i.left<g.left?f=i.left-g.left:i.right>g.right&&(f=i.right-g.right),e&&h.scrollByDeltaY(e),f&&h.scrollByDeltaX(f),d.focus(),b.fireEvent("cellfocus",j,c,a))},scrollByDelta:function(a,b){b=b||"scrollTop";var c=this.el.dom;c[b]=c[b]+=a},onUpdate:function(a,b){this.callParent(arguments)},saveScrollState:function(){if(this.rendered){var a=this.el.dom,b=this.scrollState;b.left=a.scrollLeft,b.top=a.scrollTop}},restoreScrollState:function(){if(this.rendered){var a=this.el.dom,b=this.scrollState,c=this.headerCt.el.dom;c.scrollLeft=a.scrollLeft=b.left,a.scrollTop=b.top}},refresh:function(){this.setNewTemplate(),this.callParent(arguments)},processItemEvent:function(a,b,c,d){var e=this,f=d.getTarget(e.cellSelector,b),g=f?f.cellIndex:-1,h=e.statics().EventMap,i=e.getSelectionModel(),j=d.type,k;return j=="keydown"&&!f&&i.getCurrentPosition&&(f=e.getCellByPosition(i.getCurrentPosition()),f&&(f=f.dom,g=f.cellIndex)),k=e.fireEvent("uievent",j,e,f,c,g,d),k===!1||e.callParent(arguments)===!1?!1:j=="mouseover"||j=="mouseout"?!0:e["onBeforeCell"+h[j]](f,g,a,b,c,d)!==!1&&e.fireEvent("beforecell"+j,e,f,g,a,b,c,d)!==!1&&e["onCell"+h[j]](f,g,a,b,c,d)!==!1&&e.fireEvent("cell"+j,e,f,g,a,b,c,d)!==!1},processSpecialEvent:function(a){var b=this,c=b.statics().EventMap,d=b.features,e=d.length,f=a.type,g,h,i,j,k,l,m=b.ownerCt;b.callParent(arguments);if(f=="mouseover"||f=="mouseout")return;for(g=0;g<e;g++){h=d[g];if(h.hasFeatureEvent){j=a.getTarget(h.eventSelector,b.getTargetEl());if(j){i=h.eventPrefix,k=h.getFireEventArgs("before"+i+f,b,j,a),l=h.getFireEventArgs(i+f,b,j,a);if(b.fireEvent.apply(b,k)===!1||m.fireEvent.apply(m,k)===!1||b.fireEvent.apply(b,l)===!1||m.fireEvent.apply(m,l)===!1)return!1}}}return!0},onCellMouseDown:Ext.emptyFn,onCellMouseUp:Ext.emptyFn,onCellClick:Ext.emptyFn,onCellDblClick:Ext.emptyFn,onCellContextMenu:Ext.emptyFn,onCellKeyDown:Ext.emptyFn,onBeforeCellMouseDown:Ext.emptyFn,onBeforeCellMouseUp:Ext.emptyFn,onBeforeCellClick:Ext.emptyFn,onBeforeCellDblClick:Ext.emptyFn,onBeforeCellContextMenu:Ext.emptyFn,onBeforeCellKeyDown:Ext.emptyFn,expandToFit:function(a){if(a){var b=this.getMaxContentWidth(a);delete a.flex,a.setWidth(b)}},getMaxContentWidth:function(a){var b=a.getCellInnerSelector(),c=this.el.query(b),d=0,e=c.length,f=a.el.dom.scrollWidth,g;for(;d<e;d++)g=c[d].scrollWidth,g>f&&(f=g);return f},getPositionByEvent:function(a){var b=this,c=a.getTarget(b.cellSelector),d=a.getTarget(b.itemSelector),e=b.getRecord(d),f=b.getHeaderByCell(c);return b.getPosition(e,f)},getHeaderByCell:function(a){if(a){var b=a.className.match(this.cellRe);if(b&&b[1])return Ext.getCmp(b[1])}return!1},walkCells:function(a,b,c,d,e,f){var g=this,h=a.row,i=a.column,j=g.store.getCount(),k=g.getFirstVisibleColumnIndex(),l=g.getLastVisibleColumnIndex(),m={row:h,column:i},n=g.headerCt.getHeaderAtIndex(i);if(!n||n.hidden)return!1;c=c||{},b=b.toLowerCase();switch(b){case"right":if(i===l){if(d||h===j-1)return!1;c.ctrlKey||(m.row=h+1,m.column=k)}else c.ctrlKey?m.column=l:m.column=i+g.getRightGap(n);break;case"left":if(i===k){if(d||h===0)return!1;c.ctrlKey||(m.row=h-1,m.column=l)}else c.ctrlKey?m.column=k:m.column=i+g.getLeftGap(n);break;case"up":if(h===0)return!1;c.ctrlKey?m.row=0:m.row=h-1;break;case"down":if(h===j-1)return!1;c.ctrlKey?m.row=j-1:m.row=h+1}return e&&e.call(f||window,m)!==!0?!1:m},getFirstVisibleColumnIndex:function(){var a=this.getHeaderCt(),b=a.getGridColumns(),c=Ext.ComponentQuery.query(":not([hidden])",b),d=c[0];return a.getHeaderIndex(d)},getLastVisibleColumnIndex:function(){var a=this.getHeaderCt(),b=a.getGridColumns(),c=Ext.ComponentQuery.query(":not([hidden])",b),d=c[c.length-1];return a.getHeaderIndex(d)},getHeaderCt:function(){return this.headerCt},getPosition:function(a,b){var c=this,d=c.store,e=c.headerCt.getGridColumns();return{row:d.indexOf(a),column:Ext.Array.indexOf(e,b)}},getRightGap:function(a){var b=this.getHeaderCt(),c=b.getGridColumns(),d=Ext.Array.indexOf(c,a),e=d+1,f;for(;e<=c.length;e++)if(!c[e].hidden){f=e;break}return f-d},beforeDestroy:function(){this.rendered&&this.el.removeAllListeners(),this.callParent(arguments)},getLeftGap:function(a){var b=this.getHeaderCt(),c=b.getGridColumns(),d=Ext.Array.indexOf(c,a),e=d-1,f;for(;e>=0;e--)if(!c[e].hidden){f=e;break}return f-d}}),Ext.define("Ext.grid.View",{extend:"Ext.view.Table",alias:"widget.gridview",stripeRows:!0,invalidateScrollerOnRefresh:!0,scrollToTop:function(){if(this.rendered){var a=this.ownerCt,b=a.verticalScroller;b&&b.scrollToTop()}},onAdd:function(a,b,c){this.callParent(arguments),this.doStripeRows(c)},onRemove:function(a,b,c){this.callParent(arguments),this.doStripeRows(c)},onUpdate:function(a,b,c){var d=a.indexOf(b);this.callParent(arguments),this.doStripeRows(d,d)},doStripeRows:function(a,b){if(this.stripeRows){var c=this.getNodes(a,b),d=c.length,e=0,f;for(;e<d;e++)f=c[e],f.className=f.className.replace(this.rowClsRe," "),a++,a%2===0&&(f.className+=" "+this.altRowCls)}},refresh:function(a){this.callParent(arguments),this.doStripeRows(0);var b=this.up("gridpanel");b&&this.invalidateScrollerOnRefresh&&b.invalidateScroller()}}),Ext.define("Ext.grid.Panel",{extend:"Ext.panel.Table",requires:["Ext.grid.View"],alias:["widget.gridpanel","widget.grid"],alternateClassName:["Ext.list.ListView","Ext.ListView","Ext.grid.GridPanel"],viewType:"gridview",lockable:!1,normalCfgCopy:["invalidateScrollerOnRefresh","verticalScroller","verticalScrollDock","verticalScrollerType","scroll"],lockedCfgCopy:["invalidateScrollerOnRefresh"],initComponent:function(){var a=this;a.columnLines&&a.setColumnLines(a.columnLines),a.callParent()},setColumnLines:function(a){var b=this,c=a?"addClsWithUI":"removeClsWithUI";b[c]("with-col-lines")}}),Ext.define("Ext.grid.RowEditor",{extend:"Ext.form.Panel",requires:["Ext.tip.ToolTip","Ext.util.HashMap","Ext.util.KeyNav"],saveBtnText:"Update",cancelBtnText:"Cancel",errorsText:"Errors",dirtyText:"You need to commit or cancel your changes",lastScrollLeft:0,lastScrollTop:0,border:!1,hideMode:"offsets",initComponent:function(){var a=this,b;a.cls=Ext.baseCSSPrefix+"grid-row-editor",a.layout={type:"hbox",align:"middle"},a.columns=Ext.create("Ext.util.HashMap"),a.columns.getKey=function(a){var b;if(a.getEditor){b=a.getEditor();if(b)return b.id}return a.id},a.mon(a.columns,{add:a.onFieldAdd,remove:a.onFieldRemove,replace:a.onFieldReplace,scope:a}),a.callParent(arguments),a.fields&&(a.setField(a.fields),delete a.fields),b=a.getForm(),b.trackResetOnLoad=!0},onFieldChange:function(){var a=this,b=a.getForm(),c=b.isValid();a.errorSummary&&a.isVisible()&&a[c?"hideToolTip":"showToolTip"](),a.floatingButtons&&a.floatingButtons.child("#update").setDisabled(!c),a.isValid=c},afterRender:function(){var a=this,b=a.editingPlugin;a.callParent(arguments),a.mon(a.renderTo,"scroll",a.onCtScroll,a,{buffer:100}),a.mon(a.el,{click:Ext.emptyFn,stopPropagation:!0}),a.el.swallowEvent(["keypress","keydown"]),a.keyNav=Ext.create("Ext.util.KeyNav",a.el,{enter:b.completeEdit,esc:b.onEscKey,scope:b}),a.mon(b.view,{beforerefresh:a.onBeforeViewRefresh,refresh:a.onViewRefresh,scope:a})},onBeforeViewRefresh:function(a){var b=this,c=a.el.dom;b.el.dom.parentNode===c&&c.removeChild(b.el.dom)},onViewRefresh:function(a){var b=this,c=a.el.dom,d=b.context,e;c.appendChild(b.el.dom),d&&(e=d.store.indexOf(d.record))>=0?(d.row=a.getNode(e),b.reposition(),b.tooltip&&b.tooltip.isVisible()&&b.tooltip.setTarget(d.row)):b.editingPlugin.cancelEdit()},onCtScroll:function(a,b){var c=this,d=b.scrollTop,e=b.scrollLeft;d!==c.lastScrollTop&&(c.lastScrollTop=d,(c.tooltip&&c.tooltip.isVisible()||c.hiddenTip)&&c.repositionTip()),e!==c.lastScrollLeft&&(c.lastScrollLeft=e,c.reposition())},onColumnAdd:function(a){this.setField(a)},onColumnRemove:function(a){this.columns.remove(a)},onColumnResize:function(a,b){a.getEditor().setWidth(b-2),this.isVisible()&&this.reposition()},onColumnHide:function(a){a.getEditor().hide(),this.isVisible()&&this.reposition()},onColumnShow:function(a){var b=a.getEditor();b.setWidth(a.getWidth()-2).show(),this.isVisible()&&this.reposition()},onColumnMove:function(a,b,c){var d=a.getEditor();this.items.indexOf(d)!=c&&this.move(b,c)},onFieldAdd:function(a,b,c){var d=this,e=d.editingPlugin.grid.headerCt.getHeaderIndex(c),f=c.getEditor({xtype:"displayfield"});d.insert(e,f)},onFieldRemove:function(a,b,c){var d=this,e=c.getEditor(),f=e.el;d.remove(e,!1),f&&f.remove()},onFieldReplace:function(a,b,c,d){var e=this;e.onFieldRemove(a,b,d)},clearFields:function(){var a=this,b=a.columns;b.each(function(a){b.removeAtKey(a)})},getFloatingButtons:function(){var a=this,b=Ext.baseCSSPrefix,c=b+"grid-row-editor-buttons",d=a.editingPlugin,e;return a.floatingButtons||(e=a.floatingButtons=Ext.create("Ext.Container",{renderTpl:['<div class="{baseCls}-ml"></div>','<div class="{baseCls}-mr"></div>','<div class="{baseCls}-bl"></div>','<div class="{baseCls}-br"></div>','<div class="{baseCls}-bc"></div>'],renderTo:a.el,baseCls:c,layout:{type:"hbox",align:"middle"},defaults:{margins:"0 1 0 1"},items:[{itemId:"update",flex:1,xtype:"button",handler:d.completeEdit,scope:d,text:a.saveBtnText,disabled:!a.isValid},{flex:1,xtype:"button",handler:d.cancelEdit,scope:d,text:a.cancelBtnText}]}),a.mon(e.el,{mousedown:Ext.emptyFn,click:Ext.emptyFn,stopEvent:!0})),a.floatingButtons},reposition:function(a){var b=this,c=b.context,d=c&&Ext.get(c.row),e=b.getFloatingButtons(),f=e.el,g=b.editingPlugin.grid,h=g.view.el,i=g.verticalScroller,j=g.headerCt.getFullWidth(),k=g.getWidth(),l=Math.min(j,k),m=g.view.el.dom.scrollLeft,n=e.getWidth(),o=(l-n)/2+m,p,q,r,s=function(){i&&(i.invalidate(),f.scrollIntoView(h,!1)),a&&a.callback&&a.callback.call(a.scope||b)};if(d&&Ext.isElement(d.dom)){d.scrollIntoView(h,!1),p=d.getXY()[1]-5,q=d.getHeight(),r=q+10,Ext.isIE&&(r+=2),b.getHeight()!=r&&(b.setHeight(r),b.el.setLeft(0));if(a){var t={to:{y:p},duration:a.duration||125,listeners:{afteranimate:function(){s(),p=d.getXY()[1]-5,b.el.setY(p)}}};b.animate(t)}else b.el.setY(p),s()}b.getWidth()!=j&&b.setWidth(j),f.setLeft(o)},getEditor:function(a){var b=this;if(Ext.isNumber(a))return b.query(">[isFormField]")[a];if(a instanceof Ext.grid.column.Column)return a.getEditor()},removeField:function(a){var b=this;a=b.getEditor(a),b.mun(a,"validitychange",b.onValidityChange,b),b.columns.removeKey(a.id)},setField:function(a){var b=this,c;if(Ext.isArray(a)){Ext.Array.forEach(a,b.setField,b);return}c=a.getEditor(null,{xtype:"displayfield",getModelData:function(){return null}}),c.margins="0 0 0 2",c.setWidth(a.getDesiredWidth()-2),b.mon(c,"change",b.onFieldChange,b),b.columns.add(c.id,a),a.hidden&&b.onColumnHide(a),b.isVisible()&&b.context&&b.renderColumnData(c,b.context.record)},loadRecord:function(a){var b=this,c=b.getForm();c.loadRecord(a),c.isValid()?b.hideToolTip():b.showToolTip(),Ext.Array.forEach(b.query(">displayfield"),function(c){b.renderColumnData(c,a)},b)},renderColumnData:function(a,b){var c=this,d=c.editingPlugin.grid,e=d.headerCt,f=d.view,g=f.store,h=c.columns.get(a.id),i=b.get(h.dataIndex);if(h.renderer){var j={tdCls:"",style:""},k=g.indexOf(b),l=e.getHeaderIndex(h);i=h.renderer.call(h.scope||e.ownerCt,i,j,b,k,l,g,f)}a.setRawValue(i),a.resetOriginalValue()},beforeEdit:function(){var a=this;if(a.isVisible()&&!a.autoCancel&&a.isDirty())return a.showToolTip(),!1},startEdit:function(a,b){var c=this,d=c.editingPlugin.grid,e=d.getView(),f=d.store,g=c.context=Ext.apply(c.editingPlugin.context,{view:d.getView(),store:f});g.grid.getSelectionModel().select(a),c.loadRecord(a),c.isVisible()?c.reposition({callback:this.focusContextCell}):(c.show(),c.focusContextCell())},focusContextCell:function(){var a=this.getEditor(this.context.colIdx);a&&a.focus&&a.focus()},cancelEdit:function(){var a=this,b=a.getForm();a.hide(),b.clearInvalid(),b.reset()},completeEdit:function(){var a=this,b=a.getForm();if(!b.isValid())return;return b.updateRecord(a.context.record),a.hide(),!0},onShow:function(){var a=this;a.callParent(arguments),a.reposition()},onHide:function(){var a=this;a.callParent(arguments),a.hideToolTip(),a.invalidateScroller(),a.context&&(a.context.view.focus(),a.context=null)},isDirty:function(){var a=this,b=a.getForm();return b.isDirty()},getToolTip:function(){var a=this,b;return a.tooltip||(b=a.tooltip=Ext.createWidget("tooltip",{cls:Ext.baseCSSPrefix+"grid-row-editor-errors",title:a.errorsText,autoHide:!1,closable:!0,closeAction:"disable",anchor:"left"})),a.tooltip},hideToolTip:function(){var a=this,b=a.getToolTip();b.rendered&&b.disable(),a.hiddenTip=!1},showToolTip:function(){var a=this,b=a.getToolTip(),c=a.context,d=Ext.get(c.row),e=c.grid.view.el;b.setTarget(d),b.showAt([-1e4,-1e4]),b.body.update(a.getErrors()),b.mouseOffset=[e.getWidth()-d.getWidth()+a.lastScrollLeft+15,0],a.repositionTip(),b.doLayout(),b.enable()},repositionTip:function(){var a=this,b=a.getToolTip(),c=a.context,d=Ext.get(c.row),e=c.grid.view.el,f=e.getHeight(),g=a.lastScrollTop,h=g+f,i=d.getHeight(),j=d.dom.offsetTop,k=j+i;k>g&&j<h?(b.show(),a.hiddenTip=!1):(b.hide(),a.hiddenTip=!0)},getErrors:function(){var a=this,b=!a.autoCancel&&a.isDirty()?a.dirtyText+"<br />":"",c=[];return Ext.Array.forEach(a.query(">[isFormField]"),function(a){c=c.concat(Ext.Array.map(a.getErrors(),function(a){return"<li>"+a+"</li>"}))},a),b+"<ul>"+c.join("")+"</ul>"},invalidateScroller:function(){var a=this,b=a.context,c=b.grid.verticalScroller;c&&c.invalidate()}}),Ext.define("Ext.grid.header.Container",{extend:"Ext.container.Container",uses:["Ext.grid.ColumnLayout","Ext.grid.column.Column","Ext.menu.Menu","Ext.menu.CheckItem","Ext.menu.Separator","Ext.grid.plugin.HeaderResizer","Ext.grid.plugin.HeaderReorderer"],border:!0,alias:"widget.headercontainer",baseCls:Ext.baseCSSPrefix+"grid-header-ct",dock:"top",weight:100,defaultType:"gridcolumn",defaultWidth:100,sortAscText:"Sort Ascending",sortDescText:"Sort Descending",sortClearText:"Clear Sort",columnsText:"Columns",lastHeaderCls:Ext.baseCSSPrefix+"column-header-last",firstHeaderCls:Ext.baseCSSPrefix+"column-header-first",headerOpenCls:Ext.baseCSSPrefix+"column-header-open",triStateSort:!1,ddLock:!1,dragging:!1,sortable:!0,initComponent:function(){var a=this;a.headerCounter=0,a.plugins=a.plugins||[],a.isHeader||(a.resizer=Ext.create("Ext.grid.plugin.HeaderResizer"),a.reorderer=Ext.create("Ext.grid.plugin.HeaderReorderer"),a.enableColumnResize||a.resizer.disable(),a.enableColumnMove||a.reorderer.disable(),a.plugins.push(a.reorderer,a.resizer)),a.isHeader&&!a.items?a.layout="auto":a.layout={type:"gridcolumn",availableSpaceOffset:a.availableSpaceOffset,align:"stretchmax",resetStretch:!0},a.defaults=a.defaults||{},Ext.applyIf(a.defaults,{width:a.defaultWidth,triStateSort:a.triStateSort,sortable:a.sortable}),a.callParent(),a.addEvents("columnresize","headerclick","headertriggerclick","columnmove","columnhide","columnshow","sortchange","menucreate")},onDestroy:function(){Ext.destroy(this.resizer,this.reorderer),this.callParent()},applyDefaults:function(a){return a&&!a.isComponent&&a.xtype=="rownumberer"?a:this.callParent([a])},applyColumnsState:function(a){if(!a||!a.length)return;var b=this,c=0,d,e;Ext.each(a,function(a){e=b.down("gridcolumn[headerId="+a.id+"]"),e&&(d=b.items.indexOf(e),c!==d&&b.moveHeader(d,c),e.applyColumnState&&e.applyColumnState(a),++c)})},getColumnsState:function(){var a=this,b=[],c;return a.items.each(function(a){c=a.getColumnState&&a.getColumnState(),c&&b.push(c)}),b},onAdd:function(a){var b=this;a.headerId||(a.headerId=a.initialConfig.id||"h"+ ++b.headerCounter),b.callParent(arguments),b.purgeCache()},onRemove:function(a){var b=this;b.callParent(arguments),b.purgeCache()},afterRender:function(){this.callParent();var a=this.up("[store]").store,b=a.sorters,c=b.first(),d;c&&(d=this.down("gridcolumn[dataIndex="+c.property+"]"),d&&d.setSortState(c.direction,!1,!0))},afterLayout:function(){if(!this.isHeader){var a=this,b=a.query(">gridcolumn:not([hidden])"),c,d,e;a.callParent(arguments),b.length&&(d=b[0].el,d!==a.pastFirstHeaderEl&&(a.pastFirstHeaderEl&&a.pastFirstHeaderEl.removeCls(a.firstHeaderCls),d.addCls(a.firstHeaderCls),a.pastFirstHeaderEl=d),e=b[b.length-1].el,e!==a.pastLastHeaderEl&&(a.pastLastHeaderEl&&a.pastLastHeaderEl.removeCls(a.lastHeaderCls),e.addCls(a.lastHeaderCls),a.pastLastHeaderEl=e))}},onHeaderShow:function(a,b){var c=this,d=c.ownerCt,e=c.getMenu(),f,g,h,i,j,k;if(e){h=e.down("menucheckitem[headerId="+a.id+"]"),h&&h.setChecked(!0,!0),f=e.query("#columnItem>menucheckitem[checked]"),g=f.length;if(c.getVisibleGridColumns().length>1&&c.disabledMenuItems&&c.disabledMenuItems.length){g==1&&Ext.Array.remove(c.disabledMenuItems,f[0]);for(k=0,j=c.disabledMenuItems.length;k<j;k++)i=c.disabledMenuItems[k],i.isDestroyed||i[i.menu?"enableCheckChange":"enable"]();g==1?c.disabledMenuItems=f:c.disabledMenuItems=[]}}a.isGroupHeader||(c.view&&c.view.onHeaderShow(c,a,!0),d&&d.onHeaderShow(c,a)),c.fireEvent("columnshow",c,a),b!==!0&&c.doLayout()},doComponentLayout:function(){var a=this;a.view&&a.view.saveScrollState&&a.view.saveScrollState(),a.callParent(arguments),a.view&&a.view.restoreScrollState&&a.view.restoreScrollState()},onHeaderHide:function(a,b){var c=this,d=c.ownerCt,e=c.getMenu(),f;e&&(f=e.down("menucheckitem[headerId="+a.id+"]"),f&&f.setChecked(!1,!0),c.setDisabledItems()),a.isGroupHeader||(c.view&&c.view.onHeaderHide(c,a,!0),d&&d.onHeaderHide(c,a),b||c.doLayout()),c.fireEvent("columnhide",c,a)},setDisabledItems:function(){var a=this,b=a.getMenu(),c=0,d,e,f;e=b.query("#columnItem>menucheckitem[checked]");if(e.length===1){a.disabledMenuItems||(a.disabledMenuItems=[]),a.getVisibleGridColumns().length===1&&e[0].menu&&(e=e.concat(e[0].menu.query("menucheckitem[checked]"))),d=e.length;for(c=0;c<d;c++)f=e[c],Ext.Array.contains(a.disabledMenuItems,f)||(f.disabled=!1,f[f.menu?"disableCheckChange":"disable"](),a.disabledMenuItems.push(f))}},tempLock:function(){this.ddLock=!0,Ext.Function.defer(function(){this.ddLock=!1},200,this)},onHeaderResize:function(a,b,c){this.tempLock(),this.view&&this.view.rendered&&this.view.onHeaderResize(a,b,c)},onHeaderClick:function(a,b,c){this.fireEvent("headerclick",this,a,b,c)},onHeaderTriggerClick:function(a,b,c){this.fireEvent("headertriggerclick",this,a,b,c)!==!1&&this.showMenuBy(c,a)},showMenuBy:function(a,b){var c=this.getMenu(),d=c.down("#ascItem"),e=c.down("#descItem"),f;c.activeHeader=c.ownerCt=b,c.setFloatParent(b),b.titleContainer.addCls(this.headerOpenCls),f=b.sortable?"enable":"disable",d&&d[f](),e&&e[f](),c.showBy(a)},onMenuDeactivate:function(){var a=this.getMenu();a.activeHeader.titleContainer.removeCls(this.headerOpenCls)},moveHeader:function(a,b){this.tempLock(),this.onHeaderMoved(this.move(a,b),a,b)},purgeCache:function(){var a=this;delete a.gridDataColumns,delete a.hideableColumns,a.menu&&(a.menu.destroy(),delete a.menu)},onHeaderMoved:function(a,b,c){var d=this,e=d.ownerCt;e&&e.onHeaderMove&&e.onHeaderMove(d,a,b,c),d.fireEvent("columnmove",d,a,b,c)},getMenu:function(){var a=this;return a.menu||(a.menu=Ext.create("Ext.menu.Menu",{hideOnParentHide:!1,items:a.getMenuItems(),listeners:{deactivate:a.onMenuDeactivate,scope:a}}),a.setDisabledItems(),a.fireEvent("menucreate",a,a.menu)),a.menu},getMenuItems:function(){var a=this,b=[],c=a.enableColumnHide?a.getColumnMenu(a):null;return a.sortable&&(b=[{itemId:"ascItem",text:a.sortAscText,cls:Ext.baseCSSPrefix+"hmenu-sort-asc",handler:a.onSortAscClick,scope:a},{itemId:"descItem",text:a.sortDescText,cls:Ext.baseCSSPrefix+"hmenu-sort-desc",handler:a.onSortDescClick,scope:a}]),c&&c.length&&b.push("-",{itemId:"columnItem",text:a.columnsText,cls:Ext.baseCSSPrefix+"cols-icon",menu:c}),b},onSortAscClick:function(){var a=this.getMenu(),b=a.activeHeader;b.setSortState("ASC")},onSortDescClick:function(){var a=this.getMenu(),b=a.activeHeader;b.setSortState("DESC")},getColumnMenu:function(a){var b=[],c=0,d,e=a.query(">gridcolumn[hideable]"),f=e.length,g;for(;c<f;c++)d=e[c],g=Ext.create("Ext.menu.CheckItem",{text:d.text,checked:!d.hidden,hideOnClick:!1,headerId:d.id,menu:d.isGroupHeader?this.getColumnMenu(d):undefined,checkHandler:this.onColumnCheckChange,scope:this}),f===1&&(g.disabled=!0),b.push(g),d.on({destroy:Ext.Function.bind(g.destroy,g)});return b},onColumnCheckChange:function(a,b){var c=Ext.getCmp(a.headerId);c[b?"show":"hide"]()},getColumnsForTpl:function(a){var b=[],c=this.getGridColumns(a),d=c.length,e=0,f,g;for(;e<d;e++)f=c[e],f.hidden||f.up("headercontainer[hidden=true]")?g=0:(g=f.getDesiredWidth(),e===0&&(Ext.isIE6||Ext.isIE7)&&(g+=1)),b.push({dataIndex:f.dataIndex,align:f.align,width:g,id:f.id,cls:f.tdCls,columnId:f.getItemId()});return b},getColumnCount:function(){return this.getGridColumns().length},getFullWidth:function(a){var b=0,c=this.getVisibleGridColumns(a),d=c.length,e=0;for(;e<d;e++)isNaN(c[e].width)||(c[e].getDesiredWidth?b+=c[e].getDesiredWidth():b+=c[e].getWidth());return b},clearOtherSortStates:function(a){var b=this.getGridColumns(),c=b.length,d=0,e;for(;d<c;d++)b[d]!==a&&(e=b[d].sortState,b[d].setSortState(null,!0))},getVisibleGridColumns:function(a){return Ext.ComponentQuery.query(":not([hidden])",this.getGridColumns(a))},getGridColumns:function(a){var b=this,c=a?null:b.gridDataColumns;return c||(b.gridDataColumns=c=[],b.cascade(function(a){a!==b&&!a.isGroupHeader&&c.push(a)})),c},getHideableColumns:function(a){var b=this,c=a?null:b.hideableColumns;return c||(c=b.hideableColumns=b.query("[hideable]")),c},getHeaderIndex:function(a){var b=this.getGridColumns();return Ext.Array.indexOf(b,a)},getHeaderAtIndex:function(a){var b=this.getGridColumns();return b[a]},prepareData:function(a,b,c,d,e){var f={},g=this.gridDataColumns||this.getGridColumns(),h=g.length,i=0,j,k,l,m,n,o=e.store;for(;i<h;i++){n={tdCls:"",style:""},j=g[i],k=j.id,l=j.renderer,m=a[j.dataIndex],typeof l=="string"&&(j.renderer=l=Ext.util.Format[l]),typeof l=="function"&&(m=l.call(j.scope||this.ownerCt,m,n,c,b,i,o,d)),f[k+"-modified"]=c.isModified(j.dataIndex)?Ext.baseCSSPrefix+"grid-dirty-cell":"",f[k+"-tdCls"]=n.tdCls,f[k+"-tdAttr"]=n.tdAttr,f[k+"-style"]=n.style;if(m===undefined||m===null||m==="")m="&#160;";f[k]=m}return f},expandToFit:function(a){this.view&&this.view.expandToFit(a)}}),Ext.define("Ext.grid.column.Column",{extend:"Ext.grid.header.Container",alias:"widget.gridcolumn",requires:["Ext.util.KeyNav"],alternateClassName:"Ext.grid.Column",baseCls:Ext.baseCSSPrefix+"column-header "+Ext.baseCSSPrefix+"unselectable",hoverCls:Ext.baseCSSPrefix+"column-header-over",handleWidth:5,sortState:null,possibleSortStates:["ASC","DESC"],renderTpl:'<div id="{id}-titleContainer" class="'+Ext.baseCSSPrefix+'column-header-inner"><span id="{id}-textEl" class="'+Ext.baseCSSPrefix+'column-header-text">{text}</span><tpl if="!values.menuDisabled"><div id="{id}-triggerEl" class="'+Ext.baseCSSPrefix+'column-header-trigger"></div></tpl></div>',dataIndex:null,text:"&#160;",sortable:!0,hideable:!0,menuDisabled:!1,renderer:!1,align:"left",draggable:!0,initDraggable:Ext.emptyFn,isHeader:!0,initComponent:function(){var a=this,b,c,d;Ext.isDefined(a.header)&&(a.text=a.header,delete a.header),a.flex?a.minWidth=a.minWidth||Ext.grid.plugin.HeaderResizer.prototype.minColWidth:a.minWidth=a.width,a.triStateSort||(a.possibleSortStates.length=2);if(Ext.isDefined(a.columns)){a.isGroupHeader=!0,a.items=a.columns,delete a.columns,delete a.flex,a.width=0;for(b=0,c=a.items.length;b<c;b++)d=a.items[b],d.hidden||(a.width+=d.width||Ext.grid.header.Container.prototype.defaultWidth);a.minWidth=a.width,a.cls=(a.cls||"")+" "+Ext.baseCSSPrefix+"group-header",a.sortable=!1,a.resizable=!1,a.align="center"}a.addChildEls("titleContainer","triggerEl","textEl"),a.callParent(arguments)},onAdd:function(a){a.isSubHeader=!0,a.addCls(Ext.baseCSSPrefix+"group-sub-header"),this.callParent(arguments)},onRemove:function(a){a.isSubHeader=!1,a.removeCls(Ext.baseCSSPrefix+"group-sub-header"),this.callParent(arguments)},initRenderData:function(){var a=this;return Ext.applyIf(a.renderData,{text:a.text,menuDisabled:a.menuDisabled}),a.callParent(arguments)},applyColumnState:function(a){var b=this,c=Ext.isDefined;b.applyColumnsState(a.columns),c(a.hidden)&&(b.hidden=a.hidden),c(a.locked)&&(b.locked=a.locked),c(a.sortable)&&(b.sortable=a.sortable),c(a.width)?(delete b.flex,b.width=a.width):c(a.flex)&&(delete b.width,b.flex=a.flex)},getColumnState:function(){var a=this,b=[],c={id:a.headerId};return a.savePropsToState(["hidden","sortable","locked","flex","width"],c),a.isGroupHeader?(a.items.each(function(a){b.push(a.getColumnState())}),b.length&&(c.columns=b)):a.isSubHeader&&a.ownerCt.hidden&&delete a.hidden,"width"in c&&delete c.flex,c},setText:function(a){this.text=a,this.rendered&&this.textEl.update(a)},getOwnerHeaderCt:function(){return this.up(":not([isHeader])")},getIndex:function(){return this.isGroupColumn?!1:this.getOwnerHeaderCt().getHeaderIndex(this)},onRender:function(){var a=this,b=a.up("tablepanel");b&&(!a.sortable||b.sortableColumns===!1)&&!a.groupable&&!a.lockable&&(b.enableColumnHide===!1||!a.getOwnerHeaderCt().getHideableColumns().length)&&(a.menuDisabled=!0),a.callParent(arguments)},afterRender:function(){var a=this,b=a.el;a.callParent(arguments),b.addCls(Ext.baseCSSPrefix+"column-header-align-"+a.align).addClsOnOver(a.overCls),a.mon(b,{click:a.onElClick,dblclick:a.onElDblClick,scope:a}),(!Ext.isIE8||!Ext.isStrict)&&a.mon(a.getFocusEl(),{focus:a.onTitleMouseOver,blur:a.onTitleMouseOut,scope:a}),a.mon(a.titleContainer,{mouseenter:a.onTitleMouseOver,mouseleave:a.onTitleMouseOut,scope:a}),a.keyNav=Ext.create("Ext.util.KeyNav",b,{enter:a.onEnterKey,down:a.onDownKey,scope:a})},setWidth:function(a,b){var c=this,d=c.ownerCt,e,f,g,h=c.getWidth(),i=0,j;if(a!==h){c.oldWidth=h,c.minWidth=c.width=a;if(d.isGroupHeader){e=d.items.items,f=e.length;for(g=0;g<f;g++)j=e[g],j.hidden||(i+=j===c?a:j.getWidth());d.setWidth(i,b)}else b!==!1&&d.doLayout()}},afterComponentLayout:function(a,b){var c=this,d=this.getOwnerHeaderCt();c.callParent(arguments),a&&!c.isGroupHeader&&d&&d.onHeaderResize(c,a,!0),c.oldWidth&&a!==c.oldWidth&&d.fireEvent("columnresize",d,this,a),delete c.oldWidth},setPadding:function(a){var b=this,c=Ext.util.TextMetrics.measure(b.textEl.dom,b.text).height;b.isGroupHeader||b.titleContainer.getHeight()<a&&(b.titleContainer.dom.style.height=a+"px"),a=b.titleContainer.getViewSize().height,c&&b.titleContainer.setStyle({paddingTop:Math.max((a-c)/2,0)+"px"}),Ext.isIE&&b.triggerEl&&b.triggerEl.setHeight(a)},onDestroy:function(){var a=this;Ext.destroy(a.textEl,a.keyNav),delete a.keyNav,a.callParent(arguments)},onTitleMouseOver:function(){this.titleContainer.addCls(this.hoverCls)},onTitleMouseOut:function(){this.titleContainer.removeCls(this.hoverCls)},onDownKey:function(a){this.triggerEl&&this.onElClick(a,this.triggerEl.dom||this.el.dom)},onEnterKey:function(a){this.onElClick(a,this.el.dom)},onElDblClick:function(a,b){var c=this,d=c.ownerCt;d&&Ext.Array.indexOf(d.items,c)!==0&&c.isOnLeftEdge(a)&&d.expandToFit(c.previousSibling("gridcolumn"))},onElClick:function(a,b){var c=this,d=c.getOwnerHeaderCt();if(d&&!d.ddLock)if(c.triggerEl&&(a.target===c.triggerEl.dom||b===c.triggerEl.dom||a.within(c.triggerEl)))d.onHeaderTriggerClick(c,a,b);else if(a.getKey()||!c.isOnLeftEdge(a)&&!c.isOnRightEdge(a))c.toggleSortState(),d.onHeaderClick(c,a,b)},processEvent:function(a,b,c,d,e,f){return this.fireEvent.apply(this,arguments)},toggleSortState:function(){var a=this,b,c;a.sortable&&(b=Ext.Array.indexOf(a.possibleSortStates,a.sortState),c=(b+1)%a.possibleSortStates.length,a.setSortState(a.possibleSortStates[c]))},doSort:function(a){var b=this.up("tablepanel").store;b.sort({property:this.getSortParam(),direction:a})},getSortParam:function(){return this.dataIndex},setSortState:function(a,b,c){var d=this,e=Ext.baseCSSPrefix+"column-header-sort-",f=e+"ASC",g=e+"DESC",h=e+"null",i=d.getOwnerHeaderCt(),j=d.sortState;if(j!==a&&d.getSortParam()){d.addCls(e+a),a&&!c&&d.doSort(a);switch(a){case"DESC":d.removeCls([f,h]);break;case"ASC":d.removeCls([g,h]);break;case null:d.removeCls([f,g])}i&&!d.triStateSort&&!b&&i.clearOtherSortStates(d),d.sortState=a,i.fireEvent("sortchange",i,d,a)}},hide:function(){var a=this,b,c,d,e,f=0,g=a.getOwnerHeaderCt();a.oldWidth=a.getWidth();if(a.isGroupHeader){b=a.items.items,a.callParent(arguments),g.onHeaderHide(a);for(d=0,c=b.length;d<c;d++)b[d].hidden=!0,g.onHeaderHide(b[d],!0);return}e=a.ownerCt.componentLayout.layoutBusy,a.ownerCt.componentLayout.layoutBusy=!0,a.callParent(arguments),a.ownerCt.componentLayout.layoutBusy=e,g.onHeaderHide(a);if(a.ownerCt.isGroupHeader){b=a.ownerCt.query(">:not([hidden])");if(!b.length)a.ownerCt.hide();else{for(d=0,c=b.length;d<c;d++)f+=b[d].getWidth();a.ownerCt.minWidth=f,a.ownerCt.setWidth(f)}}},show:function(){var a=this,b=a.ownerCt,c=b.componentLayout,d=c.layoutBusy,e=b.layout,f=e.layoutBusy,g,h,i,j,k=0;c.layoutBusy=e.layoutBusy=!0,a.callParent(arguments),c.layoutBusy=d,e.layoutBusy=f,a.isSubHeader&&(b.isVisible()||b.show());if(a.isGroupHeader&&!a.query(":not([hidden])").length){g=a.query(">*");for(i=0,h=g.length;i<h;i++)j=g[i],j.preventLayout=!0,j.show(),k+=j.getWidth(),delete j.preventLayout;a.setWidth(k)}if(b.isGroupHeader&&a.preventLayout!==!0){g=b.query(">:not([hidden])");for(i=0,h=g.length;i<h;i++)k+=g[i].getWidth();b.minWidth=k,b.setWidth(k)}b=a.getOwnerHeaderCt(),b&&b.onHeaderShow(a,a.preventLayout)},getDesiredWidth:function(){var a=this;return a.rendered&&a.componentLayout&&a.componentLayout.lastComponentSize?a.componentLayout.lastComponentSize.width:a.flex?a.width:a.width},getCellSelector:function(){return"."+Ext.baseCSSPrefix+"grid-cell-"+this.getItemId()},getCellInnerSelector:function(){return this.getCellSelector()+" ."+Ext.baseCSSPrefix+"grid-cell-inner"},isOnLeftEdge:function(a){return a.getXY()[0]-this.el.getLeft()<=this.handleWidth},isOnRightEdge:function(a){return this.el.getRight()-a.getXY()[0]<=this.handleWidth}}),Ext.define("Ext.grid.RowNumberer",{extend:"Ext.grid.column.Column",alias:"widget.rownumberer",text:"&#160",width:23,sortable:!1,align:"right",constructor:function(a){this.callParent(arguments),this.rowspan&&(this.renderer=Ext.Function.bind(this.renderer,this))},resizable:!1,hideable:!1,menuDisabled:!0,dataIndex:"",cls:Ext.baseCSSPrefix+"row-numberer",rowspan:undefined,renderer:function(a,b,c,d,e,f){return this.rowspan&&(b.cellAttr='rowspan="'+this.rowspan+'"'),b.tdCls=Ext.baseCSSPrefix+"grid-cell-special",f.indexOfTotal(c)+1}}),Ext.define("Ext.view.DropZone",{extend:"Ext.dd.DropZone",indicatorHtml:'<div class="x-grid-drop-indicator-left"></div><div class="x-grid-drop-indicator-right"></div>',indicatorCls:"x-grid-drop-indicator",constructor:function(a){var b=this;Ext.apply(b,a),b.ddGroup||(b.ddGroup="view-dd-zone-"+b.view.id),b.callParent([b.view.el])},fireViewEvent:function(){var a=this,b;return a.lock(),b=a.view.fireEvent.apply(a.view,arguments),a.unlock(),b},getTargetFromEvent:function(a){var b=a.getTarget(this.view.getItemSelector()),c,d,e,f,g,h;if(!b){c=a.getPageY();for(f=0,d=this.view.getNodes(),g=d.length;f<g;f++){e=d[f],h=Ext.fly(e).getBox();if(c<=h.bottom)return e}}return b},getIndicator:function(){var a=this;return a.indicator||(a.indicator=Ext.createWidget("component",{html:a.indicatorHtml,cls:a.indicatorCls,ownerCt:a.view,floating:!0,shadow:!1})),a.indicator},getPosition:function(a,b){var c=a.getXY()[1],d=Ext.fly(b).getRegion(),e;return d.bottom-c>=(d.bottom-d.top)/2?e="before":e="after",e},containsRecordAtOffset:function(a,b,c){if(!b)return!1;var d=this.view,e=d.indexOf(b),f=d.getNode(e+c),g=f?d.getRecord(f):null;return g&&Ext.Array.contains(a,g)},positionIndicator:function(a,b,c){var d=this,e=d.view,f=d.getPosition(c,a),g=e.getRecord(a),h=b.records,i,j;if(!Ext.Array.contains(h,g)&&(f=="before"&&!d.containsRecordAtOffset(h,g,-1)||f=="after"&&!d.containsRecordAtOffset(h,g,1))){d.valid=!0;if(d.overRecord!=g||d.currentPosition!=f)j=Ext.fly(a).getY()-e.el.getY()-1,f=="after"&&(j+=Ext.fly(a).getHeight()),d.getIndicator().setWidth(Ext.fly(e.el).getWidth()).showAt(0,j),d.overRecord=g,d.currentPosition=f}else d.invalidateDrop()},invalidateDrop:function(){this.valid&&(this.valid=!1,this.getIndicator().hide())},onNodeOver:function(a,b,c,d){var e=this;return Ext.Array.contains(d.records,e.view.getRecord(a))||e.positionIndicator(a,d,c),e.valid?e.dropAllowed:e.dropNotAllowed},notifyOut:function(a,b,c,d){var e=this;e.callParent(arguments),delete e.overRecord,delete e.currentPosition,e.indicator&&e.indicator.hide()},onContainerOver:function(a,b,c){var d=this,e=d.view,f=e.store.getCount();return f?d.positionIndicator(e.getNode(f-1),c,b):(delete d.overRecord,delete d.currentPosition,d.getIndicator().setWidth(Ext.fly(e.el).getWidth()).showAt(0,0),d.valid=!0),d.dropAllowed},onContainerDrop:function(a,b,c){return this.onNodeDrop(a,null,b,c)},onNodeDrop:function(a,b,c,d){var e=this,f=!1,g=function(){e.invalidateDrop(),e.handleNodeDrop(d,e.overRecord,e.currentPosition),f=!0,e.fireViewEvent("drop",a,d,e.overRecord,e.currentPosition)},h=!1;return e.valid&&(h=e.fireViewEvent("beforedrop",a,d,e.overRecord,e.currentPosition,g),h!==!1&&(f||g())),h},destroy:function(){Ext.destroy(this.indicator),delete this.indicator,this.callParent()}}),Ext.define("Ext.grid.ViewDropZone",{extend:"Ext.view.DropZone",indicatorHtml:'<div class="x-grid-drop-indicator-left"></div><div class="x-grid-drop-indicator-right"></div>',indicatorCls:"x-grid-drop-indicator",handleNodeDrop:function(a,b,c){var d=this.view,e=d.getStore(),f,g,h,i;if(a.copy){g=a.records,a.records=[];for(h=0,i=g.length;h<i;h++)a.records.push(g[h].copy(g[h].getId()))}else a.view.store.remove(a.records,a.view===d);f=e.indexOf(b),c!=="before"&&f++,e.insert(f,a.records),d.getSelectionModel().select(a.records)}}),Ext.define("Ext.grid.column.Action",{extend:"Ext.grid.column.Column",alias:["widget.actioncolumn"],alternateClassName:"Ext.grid.ActionColumn",header:"&#160;",actionIdRe:new RegExp(Ext.baseCSSPrefix+"action-col-(\\d+)"),altText:"",sortable:!1,constructor:function(a){var b=this,c=Ext.apply({},a),d=c.items||[b],e=d.length,f,g;delete c.items,b.callParent([c]),b.items=d,b.renderer=function(a,i){a=Ext.isFunction(c.renderer)?c.renderer.apply(this,arguments)||"":"",i.tdCls+=" "+Ext.baseCSSPrefix+"action-col-cell";for(f=0;f<e;f++)g=d[f],g.disable=Ext.Function.bind(b.disableAction,b,[f]),g.enable=Ext.Function.bind(b.enableAction,b,[f]),a+='<img alt="'+(g.altText||b.altText)+'" src="'+(g.icon||Ext.BLANK_IMAGE_URL)+'" class="'+Ext.baseCSSPrefix+"action-col-icon "+Ext.baseCSSPrefix+"action-col-"+String(f)+" "+(g.disabled?Ext.baseCSSPrefix+"item-disabled":" ")+(g.iconCls||"")+" "+(Ext.isFunction(g.getClass)?g.getClass.apply(g.scope||b.scope||b,arguments):b.iconCls||"")+'"'+(g.tooltip?' data-qtip="'+g.tooltip+'"':"")+" />";return a}},enableAction:function(a){var b=this;a?Ext.isNumber(a)||(a=Ext.Array.indexOf(b.items,a)):a=0,b.items[a].disabled=!1,b.up("tablepanel").el.select("."+Ext.baseCSSPrefix+"action-col-"+a).removeCls(b.disabledCls)},disableAction:function(a){var b=this;a?Ext.isNumber(a)||(a=Ext.Array.indexOf(b.items,a)):a=0,b.items[a].disabled=!0,b.up("tablepanel").el.select("."+Ext.baseCSSPrefix+"action-col-"+a).addCls(b.disabledCls)},destroy:function(){return delete this.items,delete this.renderer,this.callParent(arguments)},processEvent:function(a,b,c,d,e,f){var g=this,h=f.getTarget().className.match(g.actionIdRe),i,j;if(h){i=g.items[parseInt(h[1],10)];if(i)if(a=="click")j=i.handler||g.handler,j&&!i.disabled&&j.call(i.scope||g.scope||g,b,d,e,i,f);else if(a=="mousedown"&&i.stopSelection!==!1)return!1}return g.callParent(arguments)},cascade:function(a,b){a.call(b||this,this)},getRefItems:function(){return[]}}),Ext.define("Ext.grid.column.Boolean",{extend:"Ext.grid.column.Column",alias:["widget.booleancolumn"],alternateClassName:"Ext.grid.BooleanColumn",trueText:"true",falseText:"false",undefinedText:"&#160;",constructor:function(a){this.callParent(arguments);var b=this.trueText,c=this.falseText,d=this.undefinedText;this.renderer=function(a){return a===undefined?d:!a||a==="false"?c:b}}}),Ext.define("Ext.grid.column.Date",{extend:"Ext.grid.column.Column",alias:["widget.datecolumn"],requires:["Ext.Date"],alternateClassName:"Ext.grid.DateColumn",initComponent:function(){var a=this;a.callParent(arguments),a.format||(a.format=Ext.Date.defaultFormat),a.renderer=Ext.util.Format.dateRenderer(a.format)}}),Ext.define("Ext.grid.column.Number",{extend:"Ext.grid.column.Column",alias:["widget.numbercolumn"],requires:["Ext.util.Format"],alternateClassName:"Ext.grid.NumberColumn",format:"0,000.00",constructor:function(a){this.callParent(arguments),this.renderer=Ext.util.Format.numberRenderer(this.format)}}),Ext.define("Ext.grid.column.Template",{extend:"Ext.grid.column.Column",alias:["widget.templatecolumn"],requires:["Ext.XTemplate"],alternateClassName:"Ext.grid.TemplateColumn",constructor:function(a){var b=this,c;b.callParent(arguments),c=b.tpl=!Ext.isPrimitive(b.tpl)&&b.tpl.compile?b.tpl:Ext.create("Ext.XTemplate",b.tpl),b.renderer=function(a,b,d){var e=Ext.apply({},d.data,d.getAssociatedData());return c.apply(e)}}}),Ext.define("Ext.grid.feature.Feature",{extend:"Ext.util.Observable",alias:"feature.feature",isFeature:!0,disabled:!1,hasFeatureEvent:!0,eventPrefix:null,eventSelector:null,view:null,grid:null,collectData:!1,getFeatureTpl:function(){return""},getFireEventArgs:function(a,b,c,d){return[a,b,c,d]},attachEvents:function(){},getFragmentTpl:function(){return},mutateMetaRowTpl:function(a){},getMetaRowTplFragments:function(){return{}},getTableFragments:function(){return{}},getAdditionalData:function(a,b,c,d){return{}},enable:function(){this.disabled=!1},disable:function(){this.disabled=!0}}),Ext.define("Ext.grid.feature.AbstractSummary",{extend:"Ext.grid.feature.Feature",alias:"feature.abstractsummary",showSummaryRow:!0,nestedIdRe:/\{\{id\}([\w\-]*)\}/g,toggleSummaryRow:function(a){this.showSummaryRow=!!a},getSummaryFragments:function(){var a={};return this.showSummaryRow&&Ext.apply(a,{printSummaryRow:Ext.bind(this.printSummaryRow,this)}),a},printSummaryRow:function(a){var b=this.view.getTableChunker().metaRowTpl.join(""),c=Ext.baseCSSPrefix;return b=b.replace(c+"grid-row",c+"grid-row-summary"),b=b.replace("{{id}}","{gridSummaryValue}"),b=b.replace(this.nestedIdRe,"{id$1}"),b=b.replace("{[this.embedRowCls()]}","{rowCls}"),b=b.replace("{[this.embedRowAttr()]}","{rowAttr}"),b=Ext.create("Ext.XTemplate",b,{firstOrLastCls:Ext.view.TableChunker.firstOrLastCls}),b.applyTemplate({columns:this.getPrintData(a)})},getColumnValue:function(a,b){var c=Ext.getCmp(a.id),d=b[a.id],e=c.summaryRenderer;return e&&(d=e.call(c.scope||this,d,b,a.dataIndex)),d},getSummary:function(a,b,c,d){if(b){if(Ext.isFunction(b))return a.aggregate(b,null,d);switch(b){case"count":return a.count(d);case"min":return a.min(c,d);case"max":return a.max(c,d);case"sum":return a.sum(c,d);case"average":return a.average(c,d);default:return d?{}:""}}}}),Ext.define("Ext.grid.feature.Chunking",{extend:"Ext.grid.feature.Feature",alias:"feature.chunking",chunkSize:20,rowHeight:Ext.isIE?27:26,visibleChunk:0,hasFeatureEvent:!1,attachEvents:function(){var a=this.view.up("gridpanel"),b=a.down("gridscroller[dock=right]");b.el.on("scroll",this.onBodyScroll,this,{buffer:300})},onBodyScroll:function(a,b){var c=this.view,d=b.scrollTop,e=Math.floor(d/this.rowHeight/this.chunkSize);e!==this.visibleChunk&&(this.visibleChunk=e,c.refresh(),c.el.dom.scrollTop=d,c.el.dom.scrollTop=d)},collectData:function(a,b,c,d,e){var f={fullWidth:e.fullWidth,chunks:[]},g=e.rows.length,h=0,i=0,j=this.visibleChunk,k,l,m;for(;h<g;h+=this.chunkSize,i++)h+this.chunkSize>g?m=g-h:m=this.chunkSize,i>=j-1&&i<=j+1?l=e.rows.slice(h,h+this.chunkSize):l=[],f.chunks.push({rows:l,fullWidth:d,chunkHeight:m*this.rowHeight});return f},getTableFragments:function(){return{openTableWrap:function(){return'<tpl for="chunks"><div class="'+Ext.baseCSSPrefix+'grid-chunk" style="height: {chunkHeight}px;">'},closeTableWrap:function(){return"</div></tpl>"}}}}),Ext.define("Ext.grid.feature.Grouping",{extend:"Ext.grid.feature.Feature",alias:"feature.grouping",eventPrefix:"group",eventSelector:"."+Ext.baseCSSPrefix+"grid-group-hd",constructor:function(){var a=this;a.collapsedState={},a.callParent(arguments)},groupHeaderTpl:"Group: {name}",depthToIndent:17,collapsedCls:Ext.baseCSSPrefix+"grid-group-collapsed",hdCollapsedCls:Ext.baseCSSPrefix+"grid-group-hd-collapsed",groupByText:"Group By This Field",showGroupsText:"Show in Groups",hideGroupedHeader:!1,startCollapsed:!1,enableGroupingMenu:!0,enableNoGroups:!0,enable:function(){var a=this,b=a.view,c=b.store,d;a.lastGroupField=a.getGroupField(),a.lastGroupIndex&&c.group(a.lastGroupIndex),a.callParent(),d=a.view.headerCt.getMenu().down("#groupToggleMenuItem"),d.setChecked(!0,!0),a.refreshIf()},disable:function(){var a=this,b=a.view,c=b.store,d=c.remoteGroup,e,f;f=c.groupers.first(),f&&(a.lastGroupIndex=f.property,a.block(),c.clearGrouping(),a.unblock()),a.callParent(),e=a.view.headerCt.getMenu().down("#groupToggleMenuItem"),e.setChecked(!0,!0),e.setChecked(!1,!0),d||b.refresh()},refreshIf:function(){this.blockRefresh!==!0&&this.view.refresh()},getFeatureTpl:function(a,b,c,d){var e=this;return["<tpl if=\"typeof rows !== 'undefined'\">",'<tr class="'+Ext.baseCSSPrefix+"grid-group-hd "+(e.startCollapsed?e.hdCollapsedCls:"")+' {hdCollapsedCls}"><td class="'+Ext.baseCSSPrefix+'grid-cell" colspan="'+b.columns.length+'" {[this.indentByDepth(values)]}><div class="'+Ext.baseCSSPrefix+'grid-cell-inner"><div class="'+Ext.baseCSSPrefix+'grid-group-title">{collapsed}'+e.groupHeaderTpl+"</div></div></td></tr>",'<tr id="{viewId}-gp-{name}" class="'+Ext.baseCSSPrefix+"grid-group-body "+(e.startCollapsed?e.collapsedCls:"")+' {collapsedCls}"><td colspan="'+b.columns.length+'">{[this.recurse(values)]}</td></tr>',"</tpl>"].join("")},getFragmentTpl:function(){return{indentByDepth:this.indentByDepth,depthToIndent:this.depthToIndent}},indentByDepth:function(a){var b=a.depth||0;return'style="padding-left:'+b*this.depthToIndent+'px;"'},destroy:function(){var a=this;delete a.view,delete a.prunedHeader},attachEvents:function(){var a=this,b=a.view;b.on({scope:a,groupclick:a.onGroupClick,rowfocus:a.onRowFocus}),b.store.on("groupchange",a.onGroupChange,a),a.pruneGroupedHeader(),a.enableGroupingMenu&&a.injectGroupingMenu(),a.lastGroupField=a.getGroupField(),a.block(),a.onGroupChange(),a.unblock()},injectGroupingMenu:function(){var a=this,b=a.view,c=b.headerCt;c.showMenuBy=a.showMenuBy,c.getMenuItems=a.getMenuItems()},showMenuBy:function(a,b){var c=this.getMenu(),d=c.down("#groupMenuItem"),e=b.groupable===!1?"disable":"enable";d[e](),Ext.grid.header.Container.prototype.showMenuBy.apply(this,arguments)},getMenuItems:function(){var a=this,b=a.groupByText,c=a.disabled,d=a.showGroupsText,e=a.enableNoGroups,f=Ext.Function.bind(a.onGroupMenuItemClick,a),g=Ext.Function.bind(a.onGroupToggleMenuItemClick,a);return function(){var a=Ext.grid.header.Container.prototype.getMenuItems.call(this);return a.push("-",{iconCls:Ext.baseCSSPrefix+"group-by-icon",itemId:"groupMenuItem",text:b,handler:f}),e&&a.push({itemId:"groupToggleMenuItem",text:d,checked:!c,checkHandler:g}),a}},onGroupMenuItemClick:function(a,b){var c=this,d=a.parentMenu,e=d.activeHeader,f=c.view,g=f.store,h=g.remoteGroup;delete c.lastGroupIndex,c.block(),c.enable(),g.group(e.dataIndex),c.pruneGroupedHeader(),c.unblock(),h||f.refresh()},block:function(){this.blockRefresh=this.view.blockRefresh=!0},unblock:function(){this.blockRefresh=this.view.blockRefresh=!1},onGroupToggleMenuItemClick:function(a,b){this[b?"enable":"disable"]()},pruneGroupedHeader:function(){var a=this,b=a.view,c=b.store,d=a.getGroupField(),e=b.headerCt,f=e.down("header[dataIndex="+d+"]");f&&(a.prunedHeader&&a.prunedHeader.show(),a.prunedHeader=f,f.hide())},getGroupField:function(){var a=this.view.store.groupers.first();return a?a.property:""},onRowFocus:function(a){var b=this.view.getNode(a),c=Ext.fly(b).up("."+this.collapsedCls);c&&this.expand(c)},expand:function(a){var b=this,c=b.view,d=c.up("gridpanel"),e=Ext.getDom(a);b.collapsedState[e.id]=!1,a.removeCls(b.collapsedCls),a.prev().removeCls(b.hdCollapsedCls),d.determineScrollbars(),d.invalidateScroller(),c.fireEvent("groupexpand")},collapse:function(a){var b=this,c=b.view,d=c.up("gridpanel"),e=Ext.getDom(a);b.collapsedState[e.id]=!0,a.addCls(b.collapsedCls),a.prev().addCls(b.hdCollapsedCls),d.determineScrollbars(),d.invalidateScroller(),c.fireEvent("groupcollapse")},onGroupChange:function(){var a=this,b=a.getGroupField(),c;a.hideGroupedHeader&&(a.lastGroupField&&(c=a.getMenuItem(a.lastGroupField),c&&c.setChecked(!0)),b&&(c=a.getMenuItem(b),c&&c.setChecked(!1))),a.blockRefresh!==!0&&a.view.refresh(),a.lastGroupField=b},getMenuItem:function(a){var b=this.view,c=b.headerCt.down("gridcolumn[dataIndex="+a+"]"),d=b.headerCt.getMenu();return d.down("menuitem[headerId="+c.id+"]")},onGroupClick:function(a,b,c,d,e){var f=this,g=f.toggleCls,h=Ext.fly(b.nextSibling,"_grouping");h.hasCls(f.collapsedCls)?f.expand(h):f.collapse(h)},getMetaRowTplFragments:function(){return{isRow:this.isRow,closeRow:this.closeRow}},isRow:function(){return"<tpl if=\"typeof rows === 'undefined'\">"},closeRow:function(){return"</tpl>"},mutateMetaRowTpl:function(a){a.unshift("{[this.isRow()]}"),a.push("{[this.closeRow()]}")},getAdditionalData:function(a,b,c,d){var e=this.view,f=e.headerCt,g=f.items.getAt(0),h={},i=g.id+"-tdAttr";return h[i]=this.indentByDepth(a)+" "+(d[i]?d[i]:""),h.collapsed="true",h},getGroupRows:function(a,b,c,d){var e=this,f=a.children,g=a.rows=[],h=e.view;return a.viewId=h.id,Ext.Array.each(b,function(a,b){Ext.Array.indexOf(f,a)!=-1&&g.push(Ext.apply(c[b],{depth:1}))}),delete a.children,a.fullWidth=d,e.collapsedState[h.id+"-gp-"+a.name]&&(a.collapsedCls=e.collapsedCls,a.hdCollapsedCls=e.hdCollapsedCls),a},collectData:function(a,b,c,d,e){var f=this,g=f.view.store,h;return!f.disabled&&g.isGrouped()?(h=g.getGroups(),Ext.Array.each(h,function(c,e){f.getGroupRows(c,a,b,d)},f),{rows:h,fullWidth:d}):e},getFireEventArgs:function(a,b,c,d){var e=[a,b,c],f=Ext.fly(c.nextSibling,"_grouping"),g=Ext.getDom(f).id,h=b.id+"-gp-",i=g.substr(h.length);return e.push(i,d),e}}),Ext.define("Ext.grid.feature.GroupingSummary",{extend:"Ext.grid.feature.Grouping",alias:"feature.groupingsummary",mixins:{summary:"Ext.grid.feature.AbstractSummary"},getFeatureTpl:function(){var a=this.callParent(arguments);return this.showSummaryRow&&(a=a.replace("</tpl>",""),a+="{[this.printSummaryRow(xindex)]}</tpl>"),a},getFragmentTpl:function(){var a=this,b=a.callParent();return Ext.apply(b,a.getSummaryFragments()),a.showSummaryRow&&(a.summaryGroups=a.view.store.getGroups(),a.summaryData=a.generateSummaryData()),b},getPrintData:function(a){var b=this,c=b.view.headerCt.getColumnsForTpl(),d=0,e=c.length,f=[],g=b.summaryGroups[a-1].name,h=b.summaryData[g],i;for(;d<e;++d)i=c[d],i.gridSummaryValue=this.getColumnValue(i,h),f.push(i);return f},generateSummaryData:function(){var a=this,b={},c={},d=a.view.store,e=this.getGroupField(),f=d.proxy.reader,g=a.summaryGroups,h=a.view.headerCt.getColumnsForTpl(),i,j,k,l,m,n,o;for(j=0,k=g.length;j<k;++j)b[g[j].name]={};a.remoteRoot&&f.rawData&&(m=f.root,f.root=a.remoteRoot,f.buildExtractors(!0),Ext.Array.each(f.getRoot(f.rawData),function(a){c[a[e]]=a}),f.root=m,f.buildExtractors(!0));for(j=0,k=h.length;j<k;++j){o=Ext.getCmp(h[j].id),l=a.getSummary(d,o.summaryType,o.dataIndex,!0);for(n in l)l.hasOwnProperty(n)&&(b[n][o.id]=l[n]);for(n in c)c.hasOwnProperty(n)&&(i=c[n][o.dataIndex],i!==undefined&&b[n]!==undefined&&(b[n][o.id]=i))}return b}}),Ext.define("Ext.grid.feature.RowBody",{extend:"Ext.grid.feature.Feature",alias:"feature.rowbody",rowBodyHiddenCls:Ext.baseCSSPrefix+"grid-row-body-hidden",rowBodyTrCls:Ext.baseCSSPrefix+"grid-rowbody-tr",rowBodyTdCls:Ext.baseCSSPrefix+"grid-cell-rowbody",rowBodyDivCls:Ext.baseCSSPrefix+"grid-rowbody",eventPrefix:"rowbody",eventSelector:"."+Ext.baseCSSPrefix+"grid-rowbody-tr",getRowBody:function(a){return['<tr class="'+this.rowBodyTrCls+' {rowBodyCls}">','<td class="'+this.rowBodyTdCls+'" colspan="{rowBodyColspan}">','<div class="'+this.rowBodyDivCls+'">{rowBody}</div>',"</td>","</tr>"].join("")},getMetaRowTplFragments:function(){return{getRowBody:this.getRowBody,rowBodyTrCls:this.rowBodyTrCls,rowBodyTdCls:this.rowBodyTdCls,rowBodyDivCls:this.rowBodyDivCls}},mutateMetaRowTpl:function(a){a.push("{[this.getRowBody(values)]}")},getAdditionalData:function(a,b,c,d){var e=this.view.headerCt,f=e.getColumnCount();return{rowBody:"",rowBodyCls:this.rowBodyCls,rowBodyColspan:f}}}),Ext.define("Ext.grid.feature.RowWrap",{extend:"Ext.grid.feature.Feature",alias:"feature.rowwrap",hasFeatureEvent:!1,mutateMetaRowTpl:function(a){a[0]=a[0].replace(Ext.baseCSSPrefix+"grid-row",""),a[0]=a[0].replace("{[this.embedRowCls()]}",""),a.unshift('<table class="'+Ext.baseCSSPrefix+"grid-table "+Ext.baseCSSPrefix+'grid-table-resizer" style="width: {[this.embedFullWidth()]}px;">'),a.unshift('<tr class="'+Ext.baseCSSPrefix+'grid-row {[this.embedRowCls()]}"><td colspan="{[this.embedColSpan()]}"><div class="'+Ext.baseCSSPrefix+'grid-rowwrap-div">'),a.push("</table>"),a.push("</div></td></tr>")},embedColSpan:function(){return"{colspan}"},embedFullWidth:function(){return"{fullWidth}"},getAdditionalData:function(a,b,c,d){var e=this.view.headerCt,f=e.getColumnCount(),g=e.getFullWidth(),h=e.query("gridcolumn"),i=h.length,j=0,k={colspan:f,fullWidth:g},l,m,n;for(;j<i;j++)l=h[j].id,m=l+"-tdCls",n=Ext.baseCSSPrefix+"grid-col-resizer-"+l,k[m]=n+" "+(d[m]?d[m]:""),k[l+"-tdAttr"]=' style="width: '+(h[j].hidden?0:h[j].getDesiredWidth())+'px;" ',d[l+"-tdAttr"]&&(k[l+"-tdAttr"]+=d[l+"-tdAttr"]);return k},getMetaRowTplFragments:function(){return{embedFullWidth:this.embedFullWidth,embedColSpan:this.embedColSpan}}}),Ext.define("Ext.grid.feature.Summary",{extend:"Ext.grid.feature.AbstractSummary",alias:"feature.summary",getFragmentTpl:function(){return this.summaryData=this.generateSummaryData(),this.getSummaryFragments()},getTableFragments:function(){if(this.showSummaryRow)return{closeRows:this.closeRows}},closeRows:function(){return"</tpl>{[this.printSummaryRow()]}"},getPrintData:function(a){var b=this,c=b.view.headerCt.getColumnsForTpl(),d=0,e=c.length,f=[],g=b.summaryData,h;for(;d<e;++d)h=c[d],h.gridSummaryValue=this.getColumnValue(h,g),f.push(h);return f},generateSummaryData:function(){var a=this,b={},c=a.view.store,d=a.view.headerCt.getColumnsForTpl(),e=0,f=d.length,g,h,i;for(e=0,f=d.length;e<f;++e)i=Ext.getCmp(d[e].id),b[i.id]=a.getSummary(c,i.summaryType,i.dataIndex,!1);return b}}),Ext.define("Ext.grid.header.DragZone",{extend:"Ext.dd.DragZone",colHeaderCls:Ext.baseCSSPrefix+"column-header",maxProxyWidth:120,constructor:function(a){this.headerCt=a,this.ddGroup=this.getDDGroup(),this.callParent([a.el]),this.proxy.el.addCls(Ext.baseCSSPrefix+"grid-col-dd")},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getDragData:function(a){var b=a.getTarget("."+this.colHeaderCls),c;if(b){c=Ext.getCmp(b.id);if(!this.headerCt.dragging&&c.draggable&&!c.isOnLeftEdge(a)&&!c.isOnRightEdge(a)){var d=document.createElement("div");return d.innerHTML=Ext.getCmp(b.id).text,{ddel:d,header:c}}}return!1},onBeforeDrag:function(){return!this.headerCt.dragging&&!this.disabled},onInitDrag:function(){this.headerCt.dragging=!0,this.callParent(arguments)},onDragDrop:function(){this.headerCt.dragging=!1,this.callParent(arguments)},afterRepair:function(){this.callParent(),this.headerCt.dragging=!1},getRepairXY:function(){return this.dragData.header.el.getXY()},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1}}),Ext.define("Ext.grid.header.DropZone",{extend:"Ext.dd.DropZone",colHeaderCls:Ext.baseCSSPrefix+"column-header",proxyOffsets:[-4,-9],constructor:function(a){this.headerCt=a,this.ddGroup=this.getDDGroup(),this.callParent([a.el])},getDDGroup:function(){return"header-dd-zone-"+this.headerCt.up("[scrollerOwner]").id},getTargetFromEvent:function(a){return a.getTarget("."+this.colHeaderCls)},getTopIndicator:function(){return this.topIndicator||(this.topIndicator=Ext.DomHelper.append(Ext.getBody(),{cls:"col-move-top",html:"&#160;"},!0)),this.topIndicator},getBottomIndicator:function(){return this.bottomIndicator||(this.bottomIndicator=Ext.DomHelper.append(Ext.getBody(),{cls:"col-move-bottom",html:"&#160;"},!0)),this.bottomIndicator},getLocation:function(a,b){var c=a.getXY()[0],d=Ext.fly(b).getRegion(),e,f;return d.right-c<=(d.right-d.left)/2?e="after":e="before",{pos:e,header:Ext.getCmp(b.id),node:b}},positionIndicator:function(a,b,c){var d=this.getLocation(c,b),e=d.header,f=d.pos,g=a.nextSibling("gridcolumn:not([hidden])"),h=a.previousSibling("gridcolumn:not([hidden])"),i,j,k,l,m,n,o,p,q,r;if(!e.draggable&&e.getIndex()==0)return!1;this.lastLocation=d;if(a!==e&&(f==="before"&&g!==e||f==="after"&&h!==e)&&!e.isDescendantOf(a)){var s=Ext.dd.DragDropManager.getRelated(this),t=s.length,u=0,v;for(;u<t;u++)v=s[u],v!==this&&v.invalidateDrop&&v.invalidateDrop();this.valid=!0,j=this.getTopIndicator(),k=this.getBottomIndicator(),f==="before"?(l="tl",m="bl"):(l="tr",m="br"),n=e.el.getAnchorXY(l),o=e.el.getAnchorXY(m),p=this.headerCt.el,q=p.getLeft(),r=p.getRight(),n[0]=Ext.Number.constrain(n[0],q,r),o[0]=Ext.Number.constrain(o[0],q,r),n[0]-=4,n[1]-=9,o[0]-=4,j.setXY(n),k.setXY(o),j.show(),k.show()}else this.invalidateDrop()},invalidateDrop:function(){this.valid=!1,this.hideIndicators()},onNodeOver:function(a,b,c,d){return d.header.el.dom!==a&&this.positionIndicator(d.header,a,c),this.valid?this.dropAllowed:this.dropNotAllowed},hideIndicators:function(){this.getTopIndicator().hide(),this.getBottomIndicator().hide()},onNodeOut:function(){this.hideIndicators()},onNodeDrop:function(a,b,c,d){if(this.valid){this.invalidateDrop();var e=d.header,f=this.lastLocation,g=e.ownerCt,h=g.items.indexOf(e),i=f.header.ownerCt,j=i.items.indexOf(f.header),k=this.headerCt,l,m;f.pos==="after"&&j++,g!==i&&g.lockableInjected&&i.lockableInjected&&i.lockedCt?(m=g.up("[scrollerOwner]"),m.lock(e,j)):g!==i&&g.lockableInjected&&i.lockableInjected&&g.lockedCt?(m=g.up("[scrollerOwner]"),m.unlock(e,j)):(g===i&&j>g.items.indexOf(e)&&j--,g!==i&&(g.suspendLayout=!0,g.remove(e,!1),g.suspendLayout=!1),g.isGroupHeader&&(g.items.getCount()?(g.minWidth=g.getWidth()-e.getWidth(),g.setWidth(g.minWidth)):(l=g.ownerCt,l.suspendLayout=!0,l.remove(g,!1),g.el.dom.parentNode.removeChild(g.el.dom),l.suspendLayout=!1)),i.suspendLayout=!0,g===i?i.move(h,j):i.insert(j,e),i.suspendLayout=!1,i.isGroupHeader?(e.savedFlex=e.flex,delete e.flex,e.width=e.getWidth(),i.minWidth=i.getWidth()+e.getWidth()-(e.savedFlex?1:0),i.setWidth(i.minWidth)):e.savedFlex&&(e.flex=e.savedFlex,delete e.width),k.purgeCache(),k.doLayout(),k.onHeaderMoved(e,h,j),g.items.getCount()||g.destroy())}}}),Ext.define("Ext.grid.plugin.Editing",{alias:"editing.editing",requires:["Ext.grid.column.Column","Ext.util.KeyNav"],mixins:{observable:"Ext.util.Observable"},clicksToEdit:2,defaultFieldXType:"textfield",editStyle:"",constructor:function(a){var b=this;Ext.apply(b,a),b.addEvents("beforeedit","edit","validateedit"),b.mixins.observable.constructor.call(b),b.relayEvents(b,["afteredit"],"after")},init:function(a){var b=this;b.grid=a,b.view=a.view,b.initEvents(),b.mon(a,"reconfigure",b.onReconfigure,b),b.onReconfigure(),a.relayEvents(b,["beforeedit","edit","validateedit"]),a.isEditable=!0,a.editingPlugin=a.view.editingPlugin=b},onReconfigure:function(){this.initFieldAccessors(this.view.getGridColumns())},destroy:function(){var a=this,b=a.grid,c=b.headerCt,d=b.events;Ext.destroy(a.keyNav),a.removeFieldAccessors(b.getView().getGridColumns()),a.clearListeners(),delete a.grid.editingPlugin,delete a.grid.view.editingPlugin,delete a.grid,delete a.view,delete a.editor,delete a.keyNav},getEditStyle:function(){return this.editStyle},initFieldAccessors:function(a){var b=this;if(Ext.isArray(a)){Ext.Array.forEach(a,b.initFieldAccessors,b);return}Ext.applyIf(a,{getEditor:function(a,c){return b.getColumnField(this,c)},setEditor:function(a){b.setColumnField(this,a)}})},removeFieldAccessors:function(a){var b=this;if(Ext.isArray(a)){Ext.Array.forEach(a,b.removeFieldAccessors,b);return}delete a.getEditor,delete a.setEditor},getColumnField:function(a,b){var c=a.field;!c&&a.editor&&(c=a.editor,delete a.editor),!c&&b&&(c=b);if(c)return Ext.isString(c)&&(c={xtype:c}),Ext.isObject(c)&&!c.isFormField&&(c=Ext.ComponentManager.create(c,this.defaultFieldXType),a.field=c),Ext.apply(c,{name:a.dataIndex}),c},setColumnField:function(a,b){Ext.isObject(b)&&!b.isFormField&&(b=Ext.ComponentManager.create(b,this.defaultFieldXType)),a.field=b},initEvents:function(){var a=this;a.initEditTriggers(),a.initCancelTriggers()},initCancelTriggers:Ext.emptyFn,initEditTriggers:function(){var a=this,b=a.view,c=a.clicksToEdit===1?"click":"dblclick";a.mon(b,"cell"+c,a.startEditByClick,a),b.on("render",function(){a.keyNav=Ext.create("Ext.util.KeyNav",b.el,{enter:a.onEnterKey,esc:a.onEscKey,scope:a})},a,{single:!0})},onEnterKey:function(a){var b=this,c=b.grid,d=c.getSelectionModel(),e,f=c.headerCt.getHeaderAtIndex(0);d.getCurrentPosition?(pos=d.getCurrentPosition(),e=c.store.getAt(pos.row),f=c.headerCt.getHeaderAtIndex(pos.column)):e=d.getLastSelected(),b.startEdit(e,f)},onEscKey:function(a){this.cancelEdit()},startEditByClick:function(a,b,c,d,e,f,g){this.startEdit(d,a.getHeaderAtIndex(c))},beforeEdit:Ext.emptyFn,startEdit:function(a,b){var c=this,d=c.getEditingContext(a,b);if(c.beforeEdit(d)===!1||c.fireEvent("beforeedit",d)===!1||d.cancel)return!1;c.context=d,c.editing=!0},getEditingContext:function(a,b){var c=this,d=c.grid,e=d.store,f,g,h=d.getView(),i;return Ext.isNumber(a)?(f=a,a=e.getAt(f)):f=e.indexOf(a),Ext.isNumber(b)?(g=b,b=d.headerCt.getHeaderAtIndex(g)):g=b.getIndex(),i=a.get(b.dataIndex),{grid:d,record:a,field:b.dataIndex,value:i,row:h.getNode(f),column:b,rowIdx:f,colIdx:g}},cancelEdit:function(){this.editing=!1},completeEdit:function(){var a=this;a.editing&&a.validateEdit()&&a.fireEvent("edit",a.context),delete a.context,a.editing=!1},validateEdit:function(){var a=this,b=a.context;return a.fireEvent("validateedit",a,b)!==!1&&!b.cancel}}),Ext.define("Ext.grid.plugin.CellEditing",{alias:"plugin.cellediting",extend:"Ext.grid.plugin.Editing",requires:["Ext.grid.CellEditor","Ext.util.DelayedTask"],constructor:function(){this.callParent(arguments),this.editors=Ext.create("Ext.util.MixedCollection",!1,function(a){return a.editorId}),this.editTask=Ext.create("Ext.util.DelayedTask")},onReconfigure:function(){this.editors.clear(),this.callParent()},destroy:function(){var a=this;a.editTask.cancel(),a.editors.each(Ext.destroy,Ext),a.editors.clear(),a.callParent(arguments)},onBodyScroll:function(){var a=this.getActiveEditor();a&&a.field&&(a.field.triggerBlur?a.field.triggerBlur():a.field.blur())},initCancelTriggers:function(){var a=this,b=a.grid,c=b.view;c.addElListener("mousewheel",a.cancelEdit,a),a.mon(c,"bodyscroll",a.onBodyScroll,a),a.mon(b,{columnresize:a.cancelEdit,columnmove:a.cancelEdit,scope:a})},startEdit:function(a,b){var c=this,d=a.get(b.dataIndex),e=c.getEditingContext(a,b),f;a=e.record,b=e.column,c.completeEdit(),e.originalValue=e.value=d;if(c.beforeEdit(e)===!1||c.fireEvent("beforeedit",e)===!1||e.cancel)return!1;if(b&&!b.getEditor(a))return!1;f=c.getEditor(a,b),f?(c.context=e,c.setActiveEditor(f),c.setActiveRecord(a),c.setActiveColumn(b),c.editTask.delay(15,f.startEdit,f,[c.getCell(a,b),d])):c.grid.getView().getEl(b).focus(Ext.isWebKit||Ext.isIE?10:!1)},completeEdit:function(){var a=this.getActiveEditor();a&&a.completeEdit()},setActiveEditor:function(a){this.activeEditor=a},getActiveEditor:function(){return this.activeEditor},setActiveColumn:function(a){this.activeColumn=a},getActiveColumn:function(){return this.activeColumn},setActiveRecord:function(a){this.activeRecord=a},getActiveRecord:function(){return this.activeRecord},getEditor:function(a,b){var c=this,d=c.editors,e=b.getItemId(),f=d.getByKey(e);return f?f:(f=b.getEditor(a),f?(f instanceof Ext.grid.CellEditor||(f=Ext.create("Ext.grid.CellEditor",{editorId:e,field:f})),f.parentEl=c.grid.getEditorParent(),f.on({scope:c,specialkey:c.onSpecialKey,complete:c.onEditComplete,canceledit:c.cancelEdit}),d.add(f),f):!1)},setColumnField:function(a,b){var c=this.editors.getByKey(a.getItemId());Ext.destroy(c,a.field),this.editors.removeAtKey(a.getItemId()),this.callParent(arguments)},getCell:function(a,b){return this.grid.getView().getCell(a,b)},onSpecialKey:function(a,b,c){var d=this.grid,e;c.getKey()===c.TAB&&(c.stopEvent(),e=d.getSelectionModel(),e.onEditorTab&&e.onEditorTab(this,c))},onEditComplete:function(a,b,c){var d=this,e=d.grid,f=e.getSelectionModel(),g=d.getActiveColumn(),h;if(g){h=g.dataIndex,d.setActiveEditor(null),d.setActiveColumn(null),d.setActiveRecord(null),delete f.wasEditing;if(!d.validateEdit())return;b!==c?d.context.record.set(h,b):e.getView().getEl(g).focus(),d.context.value=b,d.fireEvent("edit",d,d.context)}},cancelEdit:function(){var a=this,b=a.getActiveEditor(),c=a.grid.getView().getEl(a.getActiveColumn());a.setActiveEditor(null),a.setActiveColumn(null),a.setActiveRecord(null),b&&(b.cancelEdit(),c.focus())},startEditByPosition:function(a){var b=this,c=b.grid,d=c.getSelectionModel(),e=c.store.getAt(a.row),f=c.headerCt.getHeaderAtIndex(a.column);d.selectByPosition&&d.selectByPosition(a),b.startEdit(e,f)}}),Ext.define("Ext.grid.plugin.DragDrop",{extend:"Ext.AbstractPlugin",alias:"plugin.gridviewdragdrop",uses:["Ext.view.DragZone","Ext.grid.ViewDropZone"],dragText:"{0} selected row{1}",ddGroup:"GridDD",enableDrop:!0,enableDrag:!0,init:function(a){a.on("render",this.onViewRender,this,{single:!0})},destroy:function(){Ext.destroy(this.dragZone,this.dropZone)},enable:function(){var a=this;a.dragZone&&a.dragZone.unlock(),a.dropZone&&a.dropZone.unlock(),a.callParent()},disable:function(){var a=this;a.dragZone&&a.dragZone.lock(),a.dropZone&&a.dropZone.lock(),a.callParent()},onViewRender:function(a){var b=this;b.enableDrag&&(b.dragZone=Ext.create("Ext.view.DragZone",{view:a,ddGroup:b.dragGroup||b.ddGroup,dragText:b.dragText})),b.enableDrop&&(b.dropZone=Ext.create("Ext.grid.ViewDropZone",{view:a,ddGroup:b.dropGroup||b.ddGroup}))}}),Ext.define("Ext.grid.plugin.HeaderReorderer",{extend:"Ext.util.Observable",requires:["Ext.grid.header.DragZone","Ext.grid.header.DropZone"],alias:"plugin.gridheaderreorderer",init:function(a){this.headerCt=a,a.on("render",this.onHeaderCtRender,this)},destroy:function(){Ext.destroy(this.dragZone,this.dropZone)},onHeaderCtRender:function(){this.dragZone=Ext.create("Ext.grid.header.DragZone",this.headerCt),this.dropZone=Ext.create("Ext.grid.header.DropZone",this.headerCt),this.disabled&&this.dragZone.disable()},enable:function(){this.disabled=!1,this.dragZone&&this.dragZone.enable()},disable:function(){this.disabled=!0,this.dragZone&&this.dragZone.disable()}}),Ext.define("Ext.grid.plugin.HeaderResizer",{extend:"Ext.util.Observable",requires:["Ext.dd.DragTracker","Ext.util.Region"],alias:"plugin.gridheaderresizer",disabled:!1,configs:{dynamic:!0},colHeaderCls:Ext.baseCSSPrefix+"column-header",minColWidth:40,maxColWidth:1e3,wResizeCursor:"col-resize",eResizeCursor:"col-resize",init:function(a){this.headerCt=a,a.on("render",this.afterHeaderRender,this,{single:!0})},destroy:function(){this.tracker&&this.tracker.destroy()},afterHeaderRender:function(){var a=this.headerCt,b=a.el;a.mon(b,"mousemove",this.onHeaderCtMouseMove,this),this.tracker=Ext.create("Ext.dd.DragTracker",{disabled:this.disabled,onBeforeStart:Ext.Function.bind(this.onBeforeStart,this),onStart:Ext.Function.bind(this.onStart,this),onDrag:Ext.Function.bind(this.onDrag,this),onEnd:Ext.Function.bind(this.onEnd,this),tolerance:3,autoStart:300,el:b})},onHeaderCtMouseMove:function(a,b){if(this.headerCt.dragging)this.activeHd&&(this.activeHd.el.dom.style.cursor="",delete this.activeHd);else{var c=a.getTarget("."+this.colHeaderCls,3,!0),d,e;c&&(d=Ext.getCmp(c.id),d.isOnLeftEdge(a)?e=d.previousNode("gridcolumn:not([hidden])"):d.isOnRightEdge(a)?e=d:e=null,e?(e.isGroupHeader&&(e=e.down(":not([isGroupHeader]):not([hidden]):last")),e&&!e.fixed&&e.resizable!==!1&&!this.disabled&&(this.activeHd=e,d.el.dom.style.cursor=this.eResizeCursor)):(d.el.dom.style.cursor="",delete this.activeHd))}},onBeforeStart:function(a){var b=a.getTarget();return this.dragHd=this.activeHd,!!this.dragHd&&!Ext.fly(b).hasCls("x-column-header-trigger")&&!this.headerCt.dragging?(this.tracker.constrainTo=this.getConstrainRegion(),!0):(this.headerCt.dragging=!1,!1)},getConstrainRegion:function(){var a=this.dragHd.el,b=Ext.util.Region.getRegion(a);return b.adjust(0,this.maxColWidth-a.getWidth(),0,this.minColWidth)},onStart:function(a){var b=this,c=b.dragHd,d=c.el,e=d.getWidth(),f=b.headerCt,g=a.getTarget();b.dragHd&&!Ext.fly(g).hasCls("x-column-header-trigger")&&(f.dragging=!0),b.origWidth=e;if(!b.dynamic){var h=d.getXY(),i=f.up("[scrollerOwner]"),j=b.dragHd.up(":not([isGroupHeader])"),k=j.up(),l=i.getLhsMarker(),m=i.getRhsMarker(),n=m.parent(),o=n.getLeft(!0),p=n.getTop(!0),q=n.translatePoints(h),r=k.body.getHeight()+f.getHeight(),s=q.top-p;l.setTop(s),m.setTop(s),l.setHeight(r),m.setHeight(r),l.setLeft(q.left-o),m.setLeft(q.left+e-o)}},onDrag:function(a){if(!this.dynamic){var b=this.tracker.getXY("point"),c=this.headerCt.up("[scrollerOwner]"),d=c.getRhsMarker(),e=d.parent(),f=e.translatePoints(b),g=e.getLeft(!0);d.setLeft(f.left-g)}else this.doResize()},onEnd:function(a){this.headerCt.dragging=!1;if(this.dragHd){if(!this.dynamic){var b=this.dragHd,c=this.headerCt.up("[scrollerOwner]"),d=c.getLhsMarker(),e=c.getRhsMarker(),f=b.getWidth(),g=this.tracker.getOffset("point"),h=-9999;d.setLeft(h),e.setLeft(h)}this.doResize()}},doResize:function(){if(this.dragHd){var a=this.dragHd,b,c=this.tracker.getOffset("point");a.flex&&delete a.flex,this.headerCt.suspendLayout=!0,a.setWidth(this.origWidth+c[0],!1),this.headerCt.forceFit&&(b=a.nextNode("gridcolumn:not([hidden]):not([isGroupHeader])"),b&&(delete b.flex,b.setWidth(b.getWidth()-c[0],!1))),this.headerCt.suspendLayout=!1,this.headerCt.doComponentLayout(this.headerCt.getFullWidth())}},disable:function(){this.disabled=!0,this.tracker&&this.tracker.disable()},enable:function(){this.disabled=!1,this.tracker&&this.tracker.enable()}}),Ext.define("Ext.grid.plugin.RowEditing",{extend:"Ext.grid.plugin.Editing",alias:"plugin.rowediting",requires:["Ext.grid.RowEditor"],editStyle:"row",autoCancel:!0,errorSummary:!0,constructor:function(){var a=this;a.callParent(arguments),a.clicksToMoveEditor||(a.clicksToMoveEditor=a.clicksToEdit),a.autoCancel=!!a.autoCancel},destroy:function(){var a=this;Ext.destroy(a.editor),a.callParent(arguments)},startEdit:function(a,b){var c=this,d=c.getEditor();if(c.callParent(arguments)===!1)return!1;d.beforeEdit()!==!1&&d.startEdit(c.context.record,c.context.column)},cancelEdit:function(){var a=this;a.editing&&(a.getEditor().cancelEdit(),a.callParent(arguments),a.fireEvent("canceledit",a.context))},completeEdit:function(){var a=this;a.editing&&a.validateEdit()&&(a.editing=!1,a.fireEvent("edit",a.context))},validateEdit:function(){var a=this,b=a.editor,c=a.context,d=c.record,e={},f={},g;return b.items.each(function(a){g=a.name,e[g]=a.getValue(),f[g]=d.get(g)}),Ext.apply(c,{newValues:e,originalValues:f}),a.callParent(arguments)&&a.getEditor().completeEdit()},getEditor:function(){var a=this;return a.editor||(a.editor=a.initEditor()),a.editor},initEditor:function(){var a=this,b=a.grid,c=a.view,d=b.headerCt;return Ext.create("Ext.grid.RowEditor",{autoCancel:a.autoCancel,errorSummary:a.errorSummary,fields:d.getGridColumns(),hidden:!0,editingPlugin:a,renderTo:c.el})},initEditTriggers:function(){var a=this,b=a.grid,c=a.view,d=b.headerCt,e=a.clicksToMoveEditor===1?"click":"dblclick";a.callParent(arguments),a.clicksToMoveEditor!==a.clicksToEdit&&a.mon(c,"cell"+e,a.moveEditorByClick,a),c.on("render",function(){a.mon(d,{add:a.onColumnAdd,remove:a.onColumnRemove,columnresize:a.onColumnResize,columnhide:a.onColumnHide,columnshow:a.onColumnShow,columnmove:a.onColumnMove,scope:a})},a,{single:!0})},startEditByClick:function(){var a=this;(!a.editing||a.clicksToMoveEditor===a.clicksToEdit)&&a.callParent(arguments)},moveEditorByClick:function(){var a=this;a.editing&&a.superclass.startEditByClick.apply(a,arguments)},onColumnAdd:function(a,b){if(b.isHeader){var c=this,d;c.initFieldAccessors(b),d=c.getEditor(),d&&d.onColumnAdd&&d.onColumnAdd(b)}},onColumnRemove:function(a,b){if(b.isHeader){var c=this,d=c.getEditor();d&&d.onColumnRemove&&d.onColumnRemove(b),c.removeFieldAccessors(b)}},onColumnResize:function(a,b,c){if(b.isHeader){var d=this,e=d.getEditor();e&&e.onColumnResize&&e.onColumnResize(b,c)}},onColumnHide:function(a,b){var c=this,d=c.getEditor();d&&d.onColumnHide&&d.onColumnHide(b)},onColumnShow:function(a,b){var c=this,d=c.getEditor();d&&d.onColumnShow&&d.onColumnShow(b)},onColumnMove:function(a,b,c,d){var e=this,f=e.getEditor();f&&f.onColumnMove&&f.onColumnMove(b,c,d)},setColumnField:function(a,b){var c=this;c.callParent(arguments),c.getEditor().setField(a.field,a)}}),Ext.define("Ext.grid.property.Grid",{extend:"Ext.grid.Panel",alias:"widget.propertygrid",alternateClassName:"Ext.grid.PropertyGrid",uses:["Ext.grid.plugin.CellEditing","Ext.grid.property.Store","Ext.grid.property.HeaderContainer","Ext.XTemplate","Ext.grid.CellEditor","Ext.form.field.Date","Ext.form.field.Text","Ext.form.field.Number"],valueField:"value",nameField:"name",enableColumnMove:!1,columnLines:!0,stripeRows:!1,trackMouseOver:!1,clicksToEdit:1,enableHdMenu:!1,initComponent:function(){var a=this;a.addCls(Ext.baseCSSPrefix+"property-grid"),a.plugins=a.plugins||[],a.plugins.push(Ext.create("Ext.grid.plugin.CellEditing",{clicksToEdit:a.clicksToEdit,startEdit:function(b,c){return this.self.prototype.startEdit.call(this,b,a.headerCt.child("#"+a.valueField))}})),a.selModel={selType:"cellmodel",onCellSelect:function(a){return a.column!=1&&(a.column=1),this.self.prototype.onCellSelect.call(this,a)}},a.customRenderers=a.customRenderers||{},a.customEditors=a.customEditors||{},a.store||(a.propStore=a.store=Ext.create("Ext.grid.property.Store",a,a.source)),a.store.sort("name","ASC"),a.columns=Ext.create("Ext.grid.property.HeaderContainer",a,a.store),a.addEvents("beforepropertychange","propertychange"),a.callParent(),a.getView().walkCells=this.walkCells,a.editors={date:Ext.create("Ext.grid.CellEditor",{field:Ext.create("Ext.form.field.Date",{selectOnFocus:!0})}),string:Ext.create("Ext.grid.CellEditor",{field:Ext.create("Ext.form.field.Text",{selectOnFocus:!0})}),number:Ext.create("Ext.grid.CellEditor",{field:Ext.create("Ext.form.field.Number",{selectOnFocus:!0})}),"boolean":Ext.create("Ext.grid.CellEditor",{field:Ext.create("Ext.form.field.ComboBox",{editable:!1,store:[[!0,a.headerCt.trueText],[!1,a.headerCt.falseText]]})})},a.store.on("update",a.onUpdate,a)},onUpdate:function(a,b,c){var d=this,e,f;c==Ext.data.Model.EDIT&&(e=b.get(d.valueField),f=b.modified.value,d.fireEvent("beforepropertychange",d.source,b.getId(),e,f)!==!1?(d.source&&(d.source[b.getId()]=e),b.commit(),d.fireEvent("propertychange",d.source,b.getId(),e,f)):b.reject())},walkCells:function(a,b,c,d,e,f){return b=="left"?b="up":b=="right"&&(b="down"),a=Ext.view.Table.prototype.walkCells.call(this,a,b,c,d,e,f),a.column||(a.column=1),a},getCellEditor:function(a,b){var c=this,d=a.get(c.nameField),e=a.get(c.valueField),f=c.customEditors[d];return f?f instanceof Ext.grid.CellEditor||(f instanceof Ext.form.field.Base||(f=Ext.ComponentManager.create(f,"textfield")),f=c.customEditors[d]=Ext.create("Ext.grid.CellEditor",{field:f})):Ext.isDate(e)?f=c.editors.date:Ext.isNumber(e)?f=c.editors.number:Ext.isBoolean(e)?f=c.editors["boolean"]:f=c.editors.string,f.editorId=d,f},beforeDestroy:function(){var a=this;a.callParent(),a.destroyEditors(a.editors),a.destroyEditors(a.customEditors),delete a.source},destroyEditors:function(a){for(var b in a)a.hasOwnProperty(b)&&Ext.destroy(a[b])},setSource:function(a){this.source=a,this.propStore.setSource(a)},getSource:function(){return this.propStore.getSource()},setProperty:function(a,b,c){this.propStore.setValue(a,b,c)},removeProperty:function(a){this.propStore.remove(a)}}),Ext.define("Ext.grid.property.HeaderContainer",{extend:"Ext.grid.header.Container",alternateClassName:"Ext.grid.PropertyColumnModel",nameWidth:115,nameText:"Name",valueText:"Value",dateFormat:"m/j/Y",trueText:"true",falseText:"false",nameColumnCls:Ext.baseCSSPrefix+"grid-property-name",constructor:function(a,b){var c=this;c.grid=a,c.store=b,c.callParent([{items:[{header:c.nameText,width:a.nameColumnWidth||c.nameWidth,sortable:!0,dataIndex:a.nameField,renderer:Ext.Function.bind(c.renderProp,c),itemId:a.nameField,menuDisabled:!0,tdCls:c.nameColumnCls},{header:c.valueText,renderer:Ext.Function.bind(c.renderCell,c),getEditor:Ext.Function.bind(c.getCellEditor,c),flex:1,fixed:!0,dataIndex:a.valueField,itemId:a.valueField,menuDisabled:!0}]}])},getCellEditor:function(a){return this.grid.getCellEditor(a,this)},renderProp:function(a){return this.getPropertyName(a)},renderCell:function(a,b,c){var d=this,e=d.grid.customRenderers[c.get(d.grid.nameField)],f=a;return e?e.apply(d,arguments):(Ext.isDate(a)?f=d.renderDate(a):Ext.isBoolean(a)&&(f=d.renderBool(a)),Ext.util.Format.htmlEncode(f))},renderDate:Ext.util.Format.date,renderBool:function(a){return this[a?"trueText":"falseText"]},getPropertyName:function(a){var b=this.grid.propertyNames;return b&&b[a]?b[a]:a}}),Ext.define("Ext.grid.property.Property",{extend:"Ext.data.Model",alternateClassName:"Ext.PropGridProperty",fields:[{name:"name",type:"string"},{name:"value"}],idProperty:"name"}),Ext.define("Ext.grid.property.Store",{extend:"Ext.data.Store",alternateClassName:"Ext.grid.PropertyStore",uses:["Ext.data.reader.Reader","Ext.data.proxy.Proxy","Ext.data.ResultSet","Ext.grid.property.Property"],constructor:function(a,b){var c=this;c.grid=a,c.source=b,c.callParent([{data:b,model:Ext.grid.property.Property,proxy:c.getProxy()}])},getProxy:function(){return this.proxy||(Ext.grid.property.Store.prototype.proxy=Ext.create("Ext.data.proxy.Memory",{model:Ext.grid.property.Property,reader:this.getReader()})),this.proxy},getReader:function(){return this.reader||(Ext.grid.property.Store.prototype.reader=Ext.create("Ext.data.reader.Reader",{model:Ext.grid.property.Property,buildExtractors:Ext.emptyFn,read:function(a){return this.readRecords(a)},readRecords:function(a){var b,c,d={records:[],success:!0};for(c in a)a.hasOwnProperty(c)&&(b=a[c],this.isEditableValue(b)&&d.records.push(new Ext.grid.property.Property({name:c,value:b},c)));return d.total=d.count=d.records.length,Ext.create("Ext.data.ResultSet",d)},isEditableValue:function(a){return Ext.isPrimitive(a)||Ext.isDate(a)}})),this.reader},setSource:function(a){var b=this;b.source=a,b.suspendEvents(),b.removeAll(),b.proxy.data=a,b.load(),b.resumeEvents(),b.fireEvent("datachanged",b)},getProperty:function(a){return Ext.isNumber(a)?this.getAt(a):this.getById(a)},setValue:function(a,b,c){var d=this,e=d.getRec(a);e?(e.set("value",b),d.source[a]=b):c&&(d.source[a]=b,e=new Ext.grid.property.Property({name:a,value:b},a),d.add(e))},remove:function(a){var b=this.getRec(a);b&&(this.callParent([b]),delete this.source[a])},getRec:function(a){return this.getById(a)},getSource:function(){return this.source}}),Ext.define("Ext.layout.component.Body",{alias:["layout.body"],extend:"Ext.layout.component.Component",uses:["Ext.layout.container.Container"],type:"body",onLayout:function(a,b){var c=this,d=c.owner;c.setTargetSize(a,b),c.setBodySize.apply(c,arguments),d&&d.layout&&d.layout.isLayout&&(!Ext.isNumber(d.height)||!Ext.isNumber(d.width)?d.layout.bindToOwnerCtComponent=!0:d.layout.bindToOwnerCtComponent=!1),c.callParent(arguments)},setBodySize:function(a,b){var c=this,d=c.owner,e=d.frameSize,f=Ext.isNumber;f(a)&&(a-=d.el.getFrameWidth("lr")-e.left-e.right),f(b)&&(b-=d.el.getFrameWidth("tb")-e.top-e.bottom),c.setElementSize(d.body,a,b)}}),Ext.define("Ext.layout.component.FieldSet",{extend:"Ext.layout.component.Body",alias:["layout.fieldset"],type:"fieldset",doContainerLayout:function(){this.owner.collapsed||this.callParent()}}),Ext.define("Ext.layout.component.Tab",{alias:["layout.tab"],extend:"Ext.layout.component.Button",beforeLayout:function(){var a=this,b=a.lastClosable!==a.owner.closable;return b&&delete a.adjWidth,this.callParent(arguments)||b},onLayout:function(){var a=this;a.callParent(arguments),a.lastClosable=a.owner.closable}}),Ext.define("Ext.layout.component.field.File",{alias:["layout.filefield"],extend:"Ext.layout.component.field.Field",type:"filefield",sizeBodyContents:function(a,b){var c=this,d=c.owner;d.buttonOnly||c.setElementSize(d.inputEl,Ext.isNumber(a)?a-d.button.getWidth()-d.buttonMargin:a)}}),Ext.define("Ext.layout.component.field.Slider",{alias:["layout.sliderfield"],extend:"Ext.layout.component.field.Field",type:"sliderfield",sizeBodyContents:function(a,b){var c=this.owner,d=c.thumbs,e=d.length,f=c.inputEl,g=c.innerEl,h=c.endEl,i=0;for(;i<e;++i)d[i].el.stopAnimation();c.vertical?(f.setHeight(b),g.setHeight(Ext.isNumber(b)?b-f.getPadding("t")-h.getPadding("b"):b)):(f.setWidth(a),g.setWidth(Ext.isNumber(a)?a-f.getPadding("l")-h.getPadding("r"):a)),c.syncThumbs()}}),Ext.define("Ext.layout.container.Absolute",{alias:"layout.absolute",extend:"Ext.layout.container.Anchor",alternateClassName:"Ext.layout.AbsoluteLayout",itemCls:Ext.baseCSSPrefix+"abs-layout-item",type:"absolute",onLayout:function(){var a=this,b=a.getTarget(),c=b.dom===document.body;c||b.position(),a.paddingLeft=b.getPadding("l"),a.paddingTop=b.getPadding("t"),a.callParent(arguments)},adjustWidthAnchor:function(a,b){return a?a-b.getPosition(!0)[0]:a},adjustHeightAnchor:function(a,b){return a?a-b.getPosition(!0)[1]:a}}),Ext.define("Ext.layout.container.Accordion",{extend:"Ext.layout.container.VBox",alias:["layout.accordion"],alternateClassName:"Ext.layout.AccordionLayout",itemCls:Ext.baseCSSPrefix+"box-item "+Ext.baseCSSPrefix+"accordion-item",align:"stretch",fill:!0,autoWidth:!0,titleCollapse:!0,hideCollapseTool:!1,collapseFirst:!1,animate:!0,activeOnTop:!1,multi:!1,constructor:function(){var a=this;a.callParent(arguments),a.initialAnimate=a.animate,a.animate=!1,a.fill===!1&&(a.itemCls=Ext.baseCSSPrefix+"accordion-item")},beforeLayout:function(){var a=this;a.callParent(arguments);if(a.fill){if(!a.owner.el.dom.style.height&&!a.getLayoutTargetSize().height)return!1}else a.owner.componentLayout.monitorChildren=!1,a.autoSize=!0,a.owner.setAutoScroll(!0)},renderItems:function(a,b){var c=this,d=a.length,e=0,f,g=c.getLayoutTargetSize(),h=[];for(;e<d;e++)f=a[e],f.rendered||(h.push(f),c.collapseFirst&&(f.collapseFirst=c.collapseFirst),c.hideCollapseTool?(f.hideCollapseTool=c.hideCollapseTool,f.titleCollapse=!0):c.titleCollapse&&(f.titleCollapse=c.titleCollapse),delete f.hideHeader,f.collapsible=!0,f.title=f.title||"&#160;",f.width=g.width,c.fill?(delete f.height,delete f.flex,c.expandedItem!==undefined?f.collapsed=!0:f.hasOwnProperty("collapsed")&&f.collapsed===!1?(f.flex=1,c.expandedItem=e):f.collapsed=!0,c.owner.mon(f,{show:c.onComponentShow,beforeexpand:c.onComponentExpand,beforecollapse:c.onComponentCollapse,scope:c})):(delete f.flex,f.animCollapse=c.initialAnimate,f.autoHeight=!0,f.autoScroll=!1),f.border=f.collapsed);d&&c.expandedItem===undefined&&(c.expandedItem=0,f=a[0],f.collapsed=f.border=!1,c.fill&&(f.flex=1)),c.callParent(arguments),d=h.length;for(e=0;e<d;e++)f=h[e],delete f.width,f.header.addCls(Ext.baseCSSPrefix+"accordion-hd"),f.body.addCls(Ext.baseCSSPrefix+"accordion-body")},onLayout:function(){var a=this;if(a.fill)a.callParent(arguments);else{var b=a.getLayoutTargetSize(),c=a.getVisibleItems(),d=c.length,e=0,f;for(;e<d;e++)f=c[e],f.collapsed?c[e].setWidth(b.width):c[e].setSize(null,null)}return a.updatePanelClasses(),a},updatePanelClasses:function(){var a=this.getLayoutItems(),b=a.length,c=!0,d,e;for(d=0;d<b;d++)e=a[d],Ext.isWindows&&(e.el.dom.scrollTop=0),c?e.header.removeCls(Ext.baseCSSPrefix+"accordion-hd-sibling-expanded"):e.header.addCls(Ext.baseCSSPrefix+"accordion-hd-sibling-expanded"),d+1==b&&e.collapsed?e.header.addCls(Ext.baseCSSPrefix+"accordion-hd-last-collapsed"):e.header.removeCls(Ext.baseCSSPrefix+"accordion-hd-last-collapsed"),c=e.collapsed},animCallback:function(){Ext.Array.forEach(this.toCollapse,function(a){a.fireEvent("collapse",a)}),Ext.Array.forEach(this.toExpand,function(a){a.fireEvent("expand",a)})},setupEvents:function(){this.toCollapse=[],this.toExpand=[]},onComponentExpand:function(a){var b=this,c=b.owner.items.items,d=c.length,e=0,f;b.setupEvents();for(;e<d;e++)f=c[e],f===a&&f.collapsed?b.setExpanded(f):!b.multi&&f.rendered&&f.header.rendered&&f!==a&&!f.collapsed&&b.setCollapsed(f);return b.animate=b.initialAnimate,b.activeOnTop?b.owner.insert(0,a):b.layout(),b.animate=!1,!1},onComponentCollapse:function(a){var b=this,c=a.next()||a.prev(),d=b.multi?b.owner.query(">panel:not([collapsed])"):[];return b.setupEvents(),b.multi?(b.setCollapsed(a),d.length===1&&d[0]===a&&b.setExpanded(c),b.animate=b.initialAnimate,b.layout(),b.animate=!1):c&&b.onComponentExpand(c),!1},onComponentShow:function(a){this.onComponentExpand(a)},setCollapsed:function(a){var b=a.getDockedItems(),c,d=b.length,e=0;a.hiddenDocked=[];for(;e<d;e++)c=b[e],c!==a.header&&!c.hidden&&(c.hidden=!0,a.hiddenDocked.push(c));a.addCls(a.collapsedCls),a.header.addCls(a.collapsedHeaderCls),a.height=a.header.getHeight(),a.el.setHeight(a.height),a.collapsed=!0,delete a.flex,this.initialAnimate?this.toCollapse.push(a):a.fireEvent("collapse",a),a.collapseTool&&a.collapseTool.setType("expand-"+a.getOppositeDirection(a.collapseDirection))},setExpanded:function(a){var b=a.hiddenDocked,c=b?b.length:0,d=0;for(;d<c;d++)b[d].show();a.body.isVisible()||a.body.show(),delete a.collapsed,delete a.height,delete a.componentLayout.lastComponentSize,a.suspendLayout=!1,a.flex=1,a.removeCls(a.collapsedCls),a.header.removeCls(a.collapsedHeaderCls),this.initialAnimate?this.toExpand.push(a):a.fireEvent("expand",a),a.collapseTool&&a.collapseTool.setType("collapse-"+a.collapseDirection),a.setAutoScroll(a.initialConfig.autoScroll)}}),Ext.define("Ext.resizer.Splitter",{extend:"Ext.Component",requires:["Ext.XTemplate"],uses:["Ext.resizer.SplitterTracker"],alias:"widget.splitter",renderTpl:['<tpl if="collapsible===true">','<div id="{id}-collapseEl" class="',Ext.baseCSSPrefix,"collapse-el ",Ext.baseCSSPrefix,'layout-split-{collapseDir}">&nbsp;</div>',"</tpl>"],baseCls:Ext.baseCSSPrefix+"splitter",collapsedClsInternal:Ext.baseCSSPrefix+"splitter-collapsed",collapsible:!1,collapseOnDblClick:!0,defaultSplitMin:40,defaultSplitMax:1e3,width:5,height:5,collapseTarget:"next",onRender:function(){var a=this,b=a.getCollapseTarget(),c=a.getCollapseDirection();Ext.applyIf(a.renderData,{collapseDir:c,collapsible:a.collapsible||b.collapsible}),a.addChildEls("collapseEl"),this.callParent(arguments),a.performCollapse!==!1&&(a.renderData.collapsible&&a.mon(a.collapseEl,"click",a.toggleTargetCmp,a),a.collapseOnDblClick&&a.mon(a.el,"dblclick",a.toggleTargetCmp,a)),a.mon(b,"collapse",a.onTargetCollapse,a),a.mon(b,"expand",a.onTargetExpand,a),a.el.addCls(a.baseCls+"-"+a.orientation),a.el.unselectable(),a.tracker=Ext.create("Ext.resizer.SplitterTracker",{el:a.el}),a.relayEvents(a.tracker,["beforedragstart","dragstart","dragend"])},getCollapseDirection:function(){var a=this,b,c=a.ownerCt.layout.type;return a.collapseTarget.isComponent?b=Number(a.ownerCt.items.indexOf(a.collapseTarget)==a.ownerCt.items.indexOf(a)-1)<<1|Number(c=="hbox"):b=Number(a.collapseTarget=="prev")<<1|Number(c=="hbox"),a.orientation=["horizontal","vertical"][b&1],["bottom","right","top","left"][b]},getCollapseTarget:function(){var a=this;return a.collapseTarget.isComponent?a.collapseTarget:a.collapseTarget=="prev"?a.previousSibling():a.nextSibling()},onTargetCollapse:function(a){this.el.addCls([this.collapsedClsInternal,this.collapsedCls])},onTargetExpand:function(a){this.el.removeCls([this.collapsedClsInternal,this.collapsedCls])},toggleTargetCmp:function(a,b){var c=this.getCollapseTarget();c.isVisible()&&(c.collapsed?c.expand(c.animCollapse):c.collapse(this.renderData.collapseDir,c.animCollapse))},setSize:function(){var a=this;a.callParent(arguments),Ext.isIE&&a.el.repaint()}}),Ext.define("Ext.layout.container.Border",{alias:["layout.border"],extend:"Ext.layout.container.Container",requires:["Ext.resizer.Splitter","Ext.container.Container","Ext.fx.Anim"],alternateClassName:"Ext.layout.BorderLayout",targetCls:Ext.baseCSSPrefix+"border-layout-ct",itemCls:Ext.baseCSSPrefix+"border-item",bindToOwnerCtContainer:!0,percentageRe:/(\d+)%/,slideDirection:{north:"t",south:"b",west:"l",east:"r"},constructor:function(a){this.initialConfig=a,this.callParent(arguments)},onLayout:function(){var a=this;a.borderLayoutInitialized||a.initializeBorderLayout(),a.fixHeightConstraints(),a.shadowLayout.onLayout(),a.embeddedContainer&&a.embeddedContainer.layout.onLayout(),a.initialCollapsedComplete||(Ext.iterate(a.regions,function(b,c){c.borderCollapse&&a.onBeforeRegionCollapse(c,c.collapseDirection,!1,0)}),a.initialCollapsedComplete=!0)},isValidParent:function(a,b,c){return this.borderLayoutInitialized||this.initializeBorderLayout(),this.shadowLayout.isValidParent(a,b,c)},beforeLayout:function(){this.borderLayoutInitialized||this.initializeBorderLayout(),this.shadowLayout.beforeLayout()},renderItems:function(a,b){},renderItem:function(a){},renderChildren:function(){this.borderLayoutInitialized||this.initializeBorderLayout(),this.shadowLayout.renderChildren()},getVisibleItems:function(){return Ext.ComponentQuery.query(":not([slideOutAnim])",this.callParent(arguments))},initializeBorderLayout:function(){var a=this,b=0,c=a.getLayoutItems(),d=c.length,e=a.regions={},f=[],g=[],h=0,i=0,j,k;a.splitters={};for(;b<d;b++)j=c[b],e[j.region]=j,j.region!="center"&&j.collapsible&&j.collapseMode!="header"&&(j.borderCollapse=j.collapsed,j.collapsed=!1,j.on({beforecollapse:a.onBeforeRegionCollapse,beforeexpand:a.onBeforeRegionExpand,destroy:a.onRegionDestroy,scope:a}),a.setupState(j));j=e.center,j.flex||(j.flex=1),delete j.width,j.maintainFlex=!0,j=e.west,j&&(j.collapseDirection=Ext.Component.DIRECTION_LEFT,g.push(j),j.split&&g.push(a.splitters.west=a.createSplitter(j)),k=Ext.isString(j.width)&&j.width.match(a.percentageRe),k&&(h+=j.flex=parseInt(k[1],10)/100,delete j.width)),j=e.north,j&&(j.collapseDirection=Ext.Component.DIRECTION_TOP,f.push(j),j.split&&f.push(a.splitters.north=a.createSplitter(j)),k=Ext.isString(j.height)&&j.height.match(a.percentageRe),k&&(i+=j.flex=parseInt(k[1],10)/100,delete j.height)),e.north||e.south?e.east||e.west?(f.push(a.embeddedContainer=Ext.create("Ext.container.Container",{xtype:"container",region:"center",id:a.owner.id+"-embedded-center",cls:Ext.baseCSSPrefix+"border-item",flex:e.center.flex,maintainFlex:!0,layout:{type:"hbox",align:"stretch",getVisibleItems:a.getVisibleItems}})),g.push(e.center)):f.push(e.center):g.push(e.center),j=e.south,j&&(j.collapseDirection=Ext.Component.DIRECTION_BOTTOM,j.split&&f.push(a.splitters.south=a.createSplitter(j)),k=Ext.isString(j.height)&&j.height.match(a.percentageRe),k&&(i+=j.flex=parseInt(k[1],10)/100,delete j.height),f.push(j)),j=e.east,j&&(j.collapseDirection=Ext.Component.DIRECTION_RIGHT,j.split&&g.push(a.splitters.east=a.createSplitter(j)),k=Ext.isString(j.width)&&j.width.match(a.percentageRe),k&&(h+=j.flex=parseInt(k[1],10)/100,delete j.width),g.push(j)),e.north||e.south?(a.shadowContainer=Ext.create("Ext.container.Container",{ownerCt:a.owner,el:a.getTarget(),layout:Ext.applyIf({type:"vbox",align:"stretch",getVisibleItems:a.getVisibleItems},a.initialConfig)}),a.createItems(a.shadowContainer,f),a.splitters.north&&(a.splitters.north.ownerCt=a.shadowContainer),a.splitters.south&&(a.splitters.south.ownerCt=a.shadowContainer),a.embeddedContainer?(a.embeddedContainer.ownerCt=a.shadowContainer,a.createItems(a.embeddedContainer,g),a.splitters.east&&(a.splitters.east.ownerCt=a.embeddedContainer),a.splitters.west&&(a.splitters.west.ownerCt=a.embeddedContainer),Ext.each([a.splitters.north,a.splitters.south],function(b){b&&b.on("beforedragstart",a.fixHeightConstraints,a)}),h&&(e.center.flex-=h),i&&(a.embeddedContainer.flex-=i)):i&&(e.center.flex-=i)):(a.shadowContainer=Ext.create("Ext.container.Container",{ownerCt:a.owner,el:a.getTarget(),layout:Ext.applyIf({type:g.length==1?"fit":"hbox",align:"stretch"},a.initialConfig)}),a.createItems(a.shadowContainer,g),a.splitters.east&&(a.splitters.east.ownerCt=a.shadowContainer),a.splitters.west&&(a.splitters.west.ownerCt=a.shadowContainer),h&&(e.center.flex-=i));for(b=0,c=a.shadowContainer.items.items,d=c.length;b<d;b++)c[b].shadowOwnerCt=a.shadowContainer;if(a.embeddedContainer)for(b=0,c=a.embeddedContainer.items.items,d=c.length;b<d;b++)c[b].shadowOwnerCt=a.embeddedContainer;a.shadowLayout=a.shadowContainer.getLayout(),a.borderLayoutInitialized=!0},setupState:function(a){var b=a.getState;a.getState=function(){var c=b.call(a)||{},d=a.region;return c.collapsed=!!a.collapsed,d=="west"||d=="east"?c.width=a.getWidth():c.height=a.getHeight(),c},a.addStateEvents(["collapse","expand","resize"])},createItems:function(a,b){delete a.items,a.initItems(),a.items.addAll(b)},createSplitter:function(a){var b=this,c=a.collapseMode!="header",d;return d=Ext.create("Ext.resizer.Splitter",{hidden:!!a.hidden,collapseTarget:a,performCollapse:!c,listeners:c?{click:{fn:Ext.Function.bind(b.onSplitterCollapseClick,b,[a]),element:"collapseEl"}}:null}),a.collapseMode=="mini"&&(a.placeholder=d,d.collapsedCls=a.collapsedCls),a.on({hide:b.onRegionVisibilityChange,show:b.onRegionVisibilityChange,scope:b}),d},fixHeightConstraints:function(){var a=this,b=a.embeddedContainer,c=1e+99,d=-1;if(!b)return;b.items.each(function(a){Ext.isNumber(a.maxHeight)&&(c=Math.max(c,a.maxHeight)),Ext.isNumber(a.minHeight)&&(d=Math.max(d,a.minHeight))}),b.maxHeight=c,b.minHeight=d},onRegionVisibilityChange:function(a){this.splitters[a.region][a.hidden?"hide":"show"](),this.layout()},onSplitterCollapseClick:function(a){a.collapsed?this.onPlaceHolderToolClick(null,null,null,{client:a}):a.collapse()},getPlaceholder:function(a){var b=this,c=a.placeholder,d=a.shadowOwnerCt,e=d.layout,f=Ext.panel.Panel.prototype.getOppositeDirection(a.collapseDirection),g=a.region=="north"||a.region=="south";if(a.collapseMode=="header")return;return c||(a.collapseMode=="mini"?(c=Ext.create("Ext.resizer.Splitter",{id:"collapse-placeholder-"+a.id,collapseTarget:a,performCollapse:!1,listeners:{click:{fn:Ext.Function.bind(b.onSplitterCollapseClick,b,[a]),element:"collapseEl"}}}),c.addCls(c.collapsedCls)):(c={id:"collapse-placeholder-"+a.id,margins:a.initialConfig.margins||Ext.getClass(a).prototype.margins,xtype:"header",orientation:g?"horizontal":"vertical",title:a.title,textCls:a.headerTextCls,iconCls:a.iconCls,baseCls:a.baseCls+"-header",ui:a.ui,indicateDrag:a.draggable,cls:Ext.baseCSSPrefix+"region-collapsed-placeholder "+Ext.baseCSSPrefix+"region-collapsed-"+a.collapseDirection+"-placeholder "+a.collapsedCls,listeners:a.floatable?{click:{fn:function(c){b.floatCollapsedPanel(c,a)},element:"el"}}:null},(Ext.isIE6||Ext.isIE7||Ext.isIEQuirks)&&!g&&(c.width=25),a.hideCollapseTool||(c[g?"tools":"items"]=[{xtype:"tool",client:a,type:"expand-"+f,handler:b.onPlaceHolderToolClick,scope:b}])),c=b.owner.createComponent(c),a.isXType("panel")&&a.on({titlechange:b.onRegionTitleChange,iconchange:b.onRegionIconChange,scope:b})),a.placeholder=c,c.comp=a,c},onRegionTitleChange:function(a,b){a.placeholder.setTitle(b)},onRegionIconChange:function(a,b){a.placeholder.setIconCls(b)},calculateChildBox:function(a){var b=this;if(b.shadowContainer.items.contains(a))return b.shadowContainer.layout.calculateChildBox(a);if(b.embeddedContainer&&b.embeddedContainer.items.contains(a))return b.embeddedContainer.layout.calculateChildBox(a)},onBeforeRegionCollapse:function(a,b,c){function n(){d.owner.suspendLayout=k,h.suspendLayout=l,delete i.layoutBusy,h.componentLayout&&delete h.componentLayout.layoutBusy,delete d.shadowContainer.layout.layoutBusy,delete d.layoutBusy,delete d.owner.componentLayout.layoutBusy,delete a.collapsedChangingLayout,a.collapsed=!0,a.fireEvent("collapse",a)}if(a.collapsedChangingLayout)return!1;a.collapsedChangingLayout=!0;var d=this,e=a.el,f,g=a.collapseMode=="mini",h=a.shadowOwnerCt,i=h.layout,j=a.placeholder,k=d.owner.suspendLayout,l=h.suspendLayout,m=a.region=="north"||a.region=="west";return d.owner.suspendLayout=!0,h.suspendLayout=!0,i.layoutBusy=!0,h.componentLayout&&(h.componentLayout.layoutBusy=!0),d.shadowContainer.layout.layoutBusy=!0,d.layoutBusy=!0,d.owner.componentLayout.layoutBusy=!0,j||(j=d.getPlaceholder(a)),j.shadowOwnerCt===h?j.show():(h.insert(h.items.indexOf(a)+(m?0:1),j),j.shadowOwnerCt=h,j.ownerCt=d.owner),a.hidden=!0,j.rendered||(i.renderItem(j,i.innerCt),a.region=="north"||a.region=="south"?j.setCalculatedSize(a.getWidth()):j.setCalculatedSize(undefined,a.getHeight())),a.animCollapse&&d.initialCollapsedComplete?(i.layout(),e.dom.style.zIndex=100,g||j.el.hide(),e.slideOut(d.slideDirection[a.region],{duration:Ext.Number.from(a.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){e.show().setLeftTop(-1e4,-1e4),e.dom.style.zIndex="",g||j.el.slideIn(d.slideDirection[a.region],{easing:"linear",duration:100}),n()}}})):(e.setLeftTop(-1e4,-1e4),i.layout(),n()),!1},onBeforeRegionExpand:function(a,b){return this.onPlaceHolderToolClick(null,null,null,{client:a,shouldFireBeforeexpand:!1}),!1},onPlaceHolderToolClick:function(a,b,c,d){function r(){e.owner.suspendLayout=o,l.suspendLayout=p,delete m.layoutBusy,l.componentLayout&&delete l.componentLayout.layoutBusy,delete e.shadowContainer.layout.layoutBusy,delete e.layoutBusy,delete e.owner.componentLayout.layoutBusy,delete f.collapsedChangingLayout,f.removeCls(Ext.baseCSSPrefix+"border-region-slide-in"),f.fireEvent("expand",f)}var e=this,f=d.client,g=f.collapseMode!="mini"||!f.split,h=f.el,i,j=f.placeholder,k=j.el,l=f.shadowOwnerCt,m=l.layout,n,o=e.owner.suspendLayout,p=l.suspendLayout,q;if(f.collapsedChangingLayout)return!1;if(d.shouldFireBeforeexpand!==!1&&f.fireEvent("beforeexpand",f,!0)===!1)return!1;f.collapsedChangingLayout=!0,f.getActiveAnimation()&&f.stopAnimation(),f.slideOutAnim&&(h.un(f.panelMouseMon),k.un(f.placeholderMouseMon),delete f.slideOutAnim,delete f.panelMouseMon,delete f.placeholderMouseMon,q=!0),e.owner.suspendLayout=!0,l.suspendLayout=!0,m.layoutBusy=!0,l.componentLayout&&(l.componentLayout.layoutBusy=!0),e.shadowContainer.layout.layoutBusy=!0,e.layoutBusy=!0,e.owner.componentLayout.layoutBusy=!0,f.hidden=!1,f.collapsed=!1,g&&(j.hidden=!0),i=m.calculateChildBox(f),f.collapseTool&&f.collapseTool.show(),f.animCollapse&&!q&&h.setStyle("visibility","hidden"),h.setLeftTop(i.left,i.top),n=f.getSize(),(n.height!=i.height||n.width!=i.width)&&e.setItemSize(f,i.width,i.height),g&&j.el.hide(),f.animCollapse&&!q?(h.dom.style.zIndex=100,h.slideIn(e.slideDirection[f.region],{duration:Ext.Number.from(f.animCollapse,Ext.fx.Anim.prototype.duration),listeners:{afteranimate:function(){h.dom.style.zIndex="",f.hidden=!1,m.onLayout(),r()}}})):(m.onLayout(),r())},floatCollapsedPanel:function(a,b){function n(a){var e=d.getRegion().union(f.getRegion()).adjust(1,-1,-1,1);e.contains(a.getPoint())||c.slideOutFloatedComponent(b)}if(b.floatable===!1)return;var c=this,d=b.el,e=b.placeholder,f=e.el,g=b.shadowOwnerCt,h=g.layout,i=h.getChildBox(e),j=g.suspendLayout,k,l,m;if(a.getTarget("."+Ext.baseCSSPrefix+"tool"))return;if(d.getActiveAnimation())return;if(b.slideOutAnim){c.slideOutFloatedComponent(b);return}b.placeholderMouseMon=f.monitorMouseLeave(500,n),g.suspendLayout=!0,c.layoutBusy=!0,c.owner.componentLayout.layoutBusy=!0,b.collapseTool&&b.collapseTool.hide(),b.hidden=!1,b.collapsed=!1,e.hidden=!0,l=h.calculateChildBox(b),e.hidden=!1,b.region=="north"||b.region=="west"?l[h.parallelBefore]+=i[h.parallelPrefix]-1:l[h.parallelBefore]-=i[h.parallelPrefix]-1,d.setStyle("visibility","hidden"),d.setLeftTop(l.left,l.top),k=b.getSize(),(k.height!=l.height||k.width!=l.width)&&c.setItemSize(b,l.width,l.height),m={listeners:{afteranimate:function(){g.suspendLayout=j,delete c.layoutBusy,delete c.owner.componentLayout.layoutBusy,m.listeners={afterAnimate:function(){d.show().removeCls(Ext.baseCSSPrefix+"border-region-slide-in").setLeftTop(-1e4,-1e4),b.hidden=!0,b.collapsed=!0,delete b.slideOutAnim,delete b.panelMouseMon,delete b.placeholderMouseMon}},b.slideOutAnim=m}},duration:500},d.addCls(Ext.baseCSSPrefix+"border-region-slide-in"),d.slideIn(c.slideDirection[b.region],m),b.panelMouseMon=d.monitorMouseLeave(500,n)},slideOutFloatedComponent:function(a){var b=a.el,c;b.un(a.panelMouseMon),a.placeholder.el.un(a.placeholderMouseMon),b.slideOut(this.slideDirection[a.region],a.slideOutAnim),delete a.slideOutAnim,delete a.panelMouseMon,delete a.placeholderMouseMon},onRegionDestroy:function(a){var b=a.placeholder;b&&(delete b.ownerCt,b.destroy())},onDestroy:function(){var a=this,b=a.shadowContainer,c=a.embeddedContainer;b&&(delete b.ownerCt,Ext.destroy(b)),c&&(delete c.ownerCt,Ext.destroy(c)),delete a.regions,delete a.splitters,delete a.shadowContainer,delete a.embeddedContainer,a.callParent(arguments)}}),Ext.define("Ext.layout.container.Card",{alias:["layout.card"],alternateClassName:"Ext.layout.CardLayout",extend:"Ext.layout.container.AbstractCard",setActiveItem:function(a){var b=this,c=b.owner,d=b.activeItem,e;return a=b.parseActiveItem(a),e=c.items.indexOf(a),e==-1&&(e=c.items.items.length,c.add(a)),a&&d!=a?(a.rendered||(b.renderItem(a,b.getRenderTarget(),c.items.length),b.configureItem(a,0)),b.activeItem=a,a.fireEvent("beforeactivate",a,d)===!1?!1:d&&d.fireEvent("beforedeactivate",d,a)===!1?!1:(b.sizeAllCards?b.onLayout():b.setItemBox(a,b.getTargetBox()),b.owner.suspendLayout=!0,d&&(b.hideInactive&&d.hide(),d.fireEvent("deactivate",d,a)),b.owner.suspendLayout=!1,a.hidden?a.show():b.onLayout(),a.fireEvent("activate",a,d),a)):!1},configureItem:function(a){a.layoutManagedHeight=0,a.layoutManagedWidth=0,this.callParent(arguments)}}),Ext.define("Ext.layout.container.Column",{extend:"Ext.layout.container.Auto",alias:["layout.column"],alternateClassName:"Ext.layout.ColumnLayout",type:"column",itemCls:Ext.baseCSSPrefix+"column",targetCls:Ext.baseCSSPrefix+"column-layout-ct",scrollOffset:0,bindToOwnerCtComponent:!1,getRenderTarget:function(){return this.innerCt||(this.innerCt=this.getTarget().createChild({cls:Ext.baseCSSPrefix+"column-inner"}),this.clearEl=this.innerCt.createChild({cls:Ext.baseCSSPrefix+"clear",role:"presentation"})),this.innerCt},onLayout:function(){var a=this,b=a.getTarget(),c=a.getLayoutItems(),d=c.length,e,f,g=[],h,i,j,k;i=a.getLayoutTargetSize();if(i.width<d*10)return;if(a.adjustmentPass){if(Ext.isIE6||Ext.isIE7||Ext.isIEQuirks)i.width=a.adjustedWidth}else f=b.getStyle("overflow"),f&&f!="hidden"&&(a.autoScroll=!0,Ext.isIE6||Ext.isIE7||Ext.isIEQuirks||(b.setStyle("overflow","hidden"),i=a.getLayoutTargetSize()));j=i.width-a.scrollOffset,a.innerCt.setWidth(j);for(f=0;f<d;f++)e=c[f],h=g[f]=e.getEl().getMargin("lr"),e.columnWidth||(j-=e.getWidth()+h);j=j<0?0:j;for(f=0;f<d;f++)e=c[f],e.columnWidth?(k=Math.floor(e.columnWidth*j)-g[f],a.setItemSize(e,k,e.height)):a.layoutItem(e);!a.adjustmentPass&&a.autoScroll&&(b.setStyle("overflow","auto"),a.adjustmentPass=b.dom.scrollHeight>i.height,Ext.isIE6||Ext.isIE7||Ext.isIEQuirks?a.adjustedWidth=i.width-Ext.getScrollBarWidth():b.setStyle("overflow","auto"),a.adjustmentPass&&a.onLayout()),delete a.adjustmentPass},configureItem:function(a){this.callParent(arguments),a.columnWidth&&(a.layoutManagedWidth=1)}}),Ext.define("Ext.layout.container.Table",{alias:["layout.table"],extend:"Ext.layout.container.Auto",alternateClassName:"Ext.layout.TableLayout",monitorResize:!1,type:"table",autoSize:!0,clearEl:!0,targetCls:Ext.baseCSSPrefix+"table-layout-ct",tableCls:Ext.baseCSSPrefix+"table-layout",cellCls:Ext.baseCSSPrefix+"table-layout-cell",tableAttrs:null,renderItems:function(a){var b=this.getTable().tBodies[0],c=b.rows,d=0,e=a.length,f,g,h,i,j,k,l,m;f=this.calculateCells(a);for(;d<e;d++){g=f[d],h=g.rowIdx,i=g.cellIdx,j=a[d],k=c[h],k||(k=b.insertRow(h),this.trAttrs&&k.set(this.trAttrs)),m=l=Ext.get(k.cells[i]||k.insertCell(i)),this.needsDivWrap()&&(m=l.first()||l.createChild({tag:"div"}),m.setWidth(null)),j.rendered?this.isValidParent(j,m,0)||this.moveItem(j,m,0):this.renderItem(j,m,0),this.tdAttrs&&l.set(this.tdAttrs),l.set({colSpan:j.colspan||1,rowSpan:j.rowspan||1,id:j.cellId||"",cls:this.cellCls+" "+(j.cellCls||"")});if(!f[d+1]||f[d+1].rowIdx!==h){i++;while(k.cells[i])k.deleteCell(i)}}h++;while(b.rows[h])b.deleteRow(h)},afterLayout:function(){this.callParent(),this.needsDivWrap()&&Ext.Array.forEach(this.getLayoutItems(),function(a){Ext.fly(a.el.dom.parentNode).setWidth(a.getWidth())})},calculateCells:function(a){var b=[],c=0,d=0,e=0,f=this.columns||Infinity,g=[],h=0,i,j=a.length,k;for(;h<j;h++){k=a[h];while(d>=f||g[d]>0)if(d>=f){d=0,e=0,c++;for(i=0;i<f;i++)g[i]>0&&g[i]--}else d++;b.push({rowIdx:c,cellIdx:e});for(i=k.colspan||1;i;--i)g[d]=k.rowspan||1,++d;++e}return b},getTable:function(){var a=this.table;return a||(a=this.table=this.getTarget().createChild(Ext.apply({tag:"table",role:"presentation",cls:this.tableCls,cellspacing:0,cn:{tag:"tbody"}},this.tableAttrs),null,!0)),a},needsDivWrap:function(){return Ext.isOpera10_5}}),Ext.define("Ext.menu.Item",{extend:"Ext.Component",alias:"widget.menuitem",alternateClassName:"Ext.menu.TextItem",activeCls:Ext.baseCSSPrefix+"menu-item-active",ariaRole:"menuitem",canActivate:!0,clickHideDelay:1,destroyMenu:!0,disabledCls:Ext.baseCSSPrefix+"menu-item-disabled",hideOnClick:!0,isMenuItem:!0,menuAlign:"tl-tr?",menuExpandDelay:200,menuHideDelay:200,renderTpl:['<tpl if="plain">',"{text}","</tpl>",'<tpl if="!plain">','<a id="{id}-itemEl" class="'+Ext.baseCSSPrefix+'menu-item-link" href="{href}" <tpl if="hrefTarget">target="{hrefTarget}"</tpl> hidefocus="true" unselectable="on">','<img id="{id}-iconEl" src="{icon}" class="'+Ext.baseCSSPrefix+'menu-item-icon {iconCls}" />','<span id="{id}-textEl" class="'+Ext.baseCSSPrefix+'menu-item-text" <tpl if="menu">style="margin-right: 17px;"</tpl> >{text}</span>','<tpl if="menu">','<img id="{id}-arrowEl" src="{blank}" class="'+Ext.baseCSSPrefix+'menu-item-arrow" />',"</tpl>","</a>","</tpl>"],maskOnDisable:!1,activate:function(){var a=this;!a.activated&&a.canActivate&&a.rendered&&!a.isDisabled()&&a.isVisible()&&(a.el.addCls(a.activeCls),a.focus(),a.activated=!0,a.fireEvent("activate",a))},blur:function(){this.$focused=!1,this.callParent(arguments)},deactivate:function(){var a=this;a.activated&&(a.el.removeCls(a.activeCls),a.blur(),a.hideMenu(),a.activated=!1,a.fireEvent("deactivate",a))},deferExpandMenu:function(){var a=this;if(!a.menu.rendered||!a.menu.isVisible())a.parentMenu.activeChild=a.menu,a.menu.parentItem=a,a.menu.parentMenu=a.menu.ownerCt=a.parentMenu,a.menu.showBy(a,a.menuAlign)},deferHideMenu:function(){this.menu.isVisible()&&this.menu.hide()},deferHideParentMenus:function(){Ext.menu.Manager.hideAll()},expandMenu:function(a){var b=this;b.menu&&(clearTimeout(b.hideMenuTimer),a===0?b.deferExpandMenu():b.expandMenuTimer=Ext.defer(b.deferExpandMenu,Ext.isNumber(a)?a:b.menuExpandDelay,b))},focus:function(){this.$focused=!0,this.callParent(arguments)},getRefItems:function(a){var b=this.menu,c;return b&&(c=b.getRefItems(a),c.unshift(b)),c||[]},hideMenu:function(a){var b=this;b.menu&&(clearTimeout(b.expandMenuTimer),b.hideMenuTimer=Ext.defer(b.deferHideMenu,Ext.isNumber(a)?a:b.menuHideDelay,b))},initComponent:function(){var a=this,b=Ext.baseCSSPrefix,c=[b+"menu-item"];a.addEvents("activate","click","deactivate"),a.plain&&c.push(b+"menu-item-plain"),a.cls&&c.push(a.cls),a.cls=c.join(" "),a.menu&&(a.menu=Ext.menu.Manager.get(a.menu)),a.callParent(arguments)},onClick:function(a){var b=this;b.href||a.stopEvent();if(b.disabled)return;b.hideOnClick&&(b.deferHideParentMenusTimer=Ext.defer(b.deferHideParentMenus,b.clickHideDelay,b)),Ext.callback(b.handler,b.scope||b,[b,a]),b.fireEvent("click",b,a),b.hideOnClick||b.focus()},onDestroy:function(){var a=this;clearTimeout(a.expandMenuTimer),clearTimeout(a.hideMenuTimer),clearTimeout(a.deferHideParentMenusTimer),a.menu&&(delete a.menu.parentItem,delete a.menu.parentMenu,delete a.menu.ownerCt,a.destroyMenu!==!1&&a.menu.destroy()),a.callParent(arguments)},onRender:function(a,b){var c=this,d=Ext.BLANK_IMAGE_URL;Ext.applyIf(c.renderData,{href:c.href||"#",hrefTarget:c.hrefTarget,icon:c.icon||d,iconCls:c.iconCls+(c.checkChangeDisabled?" "+c.disabledCls:""),menu:Ext.isDefined(c.menu),plain:c.plain,text:c.text,blank:d}),c.addChildEls("itemEl","iconEl","textEl","arrowEl"),c.callParent(arguments)},setHandler:function(a,b){this.handler=a||null,this.scope=b},setIconCls:function(a){var b=this;b.iconEl&&(b.iconCls&&b.iconEl.removeCls(b.iconCls),a&&b.iconEl.addCls(a)),b.iconCls=a},setText:function(a){var b=this,c=b.textEl||b.el;b.text=a,b.rendered&&(c.update(a||""),b.ownerCt.redoComponentLayout())}}),Ext.define("Ext.menu.CheckItem",{extend:"Ext.menu.Item",alias:"widget.menucheckitem",checkedCls:Ext.baseCSSPrefix+"menu-item-checked",uncheckedCls:Ext.baseCSSPrefix+"menu-item-unchecked",groupCls:Ext.baseCSSPrefix+"menu-group-icon",hideOnClick:!1,afterRender:function(){var a=this;this.callParent(),a.checked=!a.checked,a.setChecked(!a.checked,!0)},initComponent:function(){var a=this;a.addEvents("beforecheckchange","checkchange"),a.callParent(arguments),Ext.menu.Manager.registerCheckable(a),a.group&&(a.iconCls||(a.iconCls=a.groupCls),a.initialConfig.hideOnClick!==!1&&(a.hideOnClick=!0))},disableCheckChange:function(){var a=this;a.iconEl&&a.iconEl.addCls(a.disabledCls),a.checkChangeDisabled=!0},enableCheckChange:function(){var a=this;a.iconEl.removeCls(a.disabledCls),a.checkChangeDisabled=!1},onClick:function(a){var b=this;!b.disabled&&!b.checkChangeDisabled&&(!b.checked||!b.group)&&b.setChecked(!b.checked),this.callParent([a])},onDestroy:function(){Ext.menu.Manager.unregisterCheckable(this),this.callParent(arguments)},setChecked:function(a,b){var c=this;c.checked!==a&&(b||c.fireEvent("beforecheckchange",c,a)!==!1)&&(c.el&&c.el[a?"addCls":"removeCls"](c.checkedCls)[a?"removeCls":"addCls"](c.uncheckedCls),c.checked=a,Ext.menu.Manager.onCheckChange(c,a),b||(Ext.callback(c.checkHandler,c.scope,[c,a]),c.fireEvent("checkchange",c,a)))}}),Ext.define("Ext.menu.KeyNav",{extend:"Ext.util.KeyNav",requires:["Ext.FocusManager"],constructor:function(a){var b=this;b.menu=a,b.callParent([a.el,{down:b.down,enter:b.enter,esc:b.escape,left:b.left,right:b.right,space:b.enter,tab:b.tab,up:b.up}])},down:function(a){var b=this,c=b.menu.focusedItem;if(c&&a.getKey()==Ext.EventObject.DOWN&&b.isWhitelisted(c))return!0;b.focusNextItem(1)},enter:function(a){var b=this.menu,c=b.focusedItem;if(b.activeItem)b.onClick(a);else if(c&&c.isFormField)return!0},escape:function(a){Ext.menu.Manager.hideAll()},focusNextItem:function(a){var b=this.menu,c=b.items,d=b.focusedItem,e=d?c.indexOf(d):-1,f=e+a;while(f!=e){f<0?f=c.length-1:f>=c.length&&(f=0);var g=c.getAt(f);if(b.canActivateItem(g)){b.setActiveItem(g);break}f+=a}},isWhitelisted:function(a){return Ext.FocusManager.isWhitelisted(a)},left:function(a){var b=this.menu,c=b.focusedItem,d=b.activeItem;if(c&&this.isWhitelisted(c))return!0;b.hide(),b.parentMenu&&b.parentMenu.focus()},right:function(a){var b=this.menu,c=b.focusedItem,d=b.activeItem,e;if(c&&this.isWhitelisted(c))return!0;d&&(e=b.activeItem.menu,e&&(d.expandMenu(0),Ext.defer(function(){e.setActiveItem(e.items.getAt(0))},25)))},tab:function(a){var b=this;a.shiftKey?b.up(a):b.down(a)},up:function(a){var b=this,c=b.menu.focusedItem;if(c&&a.getKey()==Ext.EventObject.UP&&b.isWhitelisted(c))return!0;b.focusNextItem(-1)}}),Ext.define("Ext.menu.Separator",{extend:"Ext.menu.Item",alias:"widget.menuseparator",canActivate:!1,focusable:!1,hideOnClick:!1,plain:!0,separatorCls:Ext.baseCSSPrefix+"menu-item-separator",text:"&#160;",onRender:function(a,b){var c=this,d=c.separatorCls;c.cls+=" "+d,c.callParent(arguments)}}),Ext.define("Ext.menu.Menu",{extend:"Ext.panel.Panel",alias:"widget.menu",requires:["Ext.layout.container.Fit","Ext.layout.container.VBox","Ext.menu.CheckItem","Ext.menu.Item","Ext.menu.KeyNav","Ext.menu.Manager","Ext.menu.Separator"],allowOtherMenus:!1,ariaRole:"menu",defaultAlign:"tl-bl?",floating:!0,constrain:!0,hidden:!0,hideMode:"visibility",ignoreParentClicks:!1,isMenu:!0,showSeparator:!0,minWidth:120,initComponent:function(){var a=this,b=Ext.baseCSSPrefix,c=[b+"menu"],d=a.bodyCls?[a.bodyCls]:[];a.addEvents("click","mouseenter","mouseleave","mouseover"),Ext.menu.Manager.register(a),a.plain&&c.push(b+"menu-plain"),a.cls=c.join(" "),d.unshift(b+"menu-body"),a.bodyCls=d.join(" "),a.layout={type:"vbox",align:"stretchmax",autoSize:!0,clearInnerCtOnLayout:!0,overflowHandler:"Scroller"},a.floating===!1&&a.initialConfig.hidden!==!0&&(a.hidden=!1),a.callParent(arguments),a.on("beforeshow",function(){var b=!!a.items.length;return b&&a.rendered&&a.el.setStyle("visibility",null),b})},afterRender:function(a){var b=this,c=Ext.baseCSSPrefix,d="&#160;";b.callParent(arguments),b.showSeparator&&(b.iconSepEl=b.layout.getRenderTarget().insertFirst({cls:c+"menu-icon-separator",html:d})),b.focusEl=b.el.createChild({cls:c+"menu-focus",tabIndex:"-1",html:d}),b.mon(b.el,{click:b.onClick,mouseover:b.onMouseOver,scope:b}),b.mouseMonitor=b.el.monitorMouseLeave(100,b.onMouseLeave,b),b.showSeparator&&(!Ext.isStrict&&Ext.isIE||Ext.isIE6)&&b.iconSepEl.setHeight(b.el.getHeight()),b.keyNav=Ext.create("Ext.menu.KeyNav",b)},afterLayout:function(){var a=this;a.callParent(arguments);if(!Ext.isStrict&&Ext.isIE||Ext.isIE6){var b=a.layout.getRenderTarget(),c=0,d=a.dockedItems,e=d.length,f=0,g,h,i;c=b.getWidth(),i=c+a.body.getBorderWidth("lr")+a.body.getPadding("lr"),a.body.setWidth(i);for(;f<e,g=d.getAt(f);f++)if(g.dock=="left"||g.dock=="right")i+=g.getWidth();a.el.setWidth(i)}},getBubbleTarget:function(){return this.parentMenu||this.callParent()},canActivateItem:function(a){return a&&!a.isDisabled()&&a.isVisible()&&(a.canActivate||a.getXTypes().indexOf("menuitem")<0)},deactivateActiveItem:function(){var a=this;a.activeItem&&(a.activeItem.deactivate(),a.activeItem.activated||delete a.activeItem),a.focusedItem&&!a.filtered&&(a.focusedItem.blur(),a.focusedItem.$focused||delete a.focusedItem)},clearStretch:function(){this.rendered&&this.items.each(function(a){a.componentLayout&&delete a.componentLayout.lastComponentSize,a.el&&a.el.setWidth(null)})},onAdd:function(){var a=this;a.clearStretch(),a.callParent(arguments),(Ext.isIE6||Ext.isIE7)&&Ext.Function.defer(a.doComponentLayout,10,a)},onRemove:function(){this.clearStretch(),this.callParent(arguments)},redoComponentLayout:function(){this.rendered&&(this.clearStretch(),this.doComponentLayout())},getFocusEl:function(){return this.focusEl},hide:function(){this.deactivateActiveItem(),this.callParent(arguments)},getItemFromEvent:function(a){return this.getChildByElement(a.getTarget())},lookupComponent:function(a){var b=this;return Ext.isString(a)?a=b.lookupItemFromString(a):Ext.isObject(a)&&(a=b.lookupItemFromObject(a)),a.minWidth=a.minWidth||b.minWidth,a},lookupItemFromObject:function(a){var b=this,c=Ext.baseCSSPrefix,d,e;return a.isComponent||(a.xtype?a=Ext.ComponentManager.create(a,a.xtype):a=Ext.create("Ext.menu."+(Ext.isBoolean(a.checked)?"Check":"")+"Item",a)),a.isMenuItem&&(a.parentMenu=b),!a.isMenuItem&&!a.dock&&(d=[c+"menu-item",c+"menu-item-cmp"],e=Ext.Function.createInterceptor,a.focus=e(a.focus,function(){this.$focused=!0},a),a.blur=e(a.blur,function(){this.$focused=!1},a),!b.plain&&(a.indent===!0||a.iconCls==="no-icon")&&d.push(c+"menu-item-indent"),a.rendered?a.el.addCls(d):a.cls=(a.cls?a.cls:"")+" "+d.join(" "),a.isMenuItem=!0),a},lookupItemFromString:function(a){return a=="separator"||a=="-"?Ext.createWidget("menuseparator"):Ext.createWidget("menuitem",{canActivate:!1,hideOnClick:!1,plain:!0,text:a})},onClick:function(a){var b=this,c;if(b.disabled){a.stopEvent();return}if(a.getTarget()==b.focusEl.dom||a.within(b.layout.getRenderTarget()))c=b.getItemFromEvent(a)||b.activeItem,c&&c.getXTypes().indexOf("menuitem")>=0&&(!c.menu||!b.ignoreParentClicks?c.onClick(a):a.stopEvent()),b.fireEvent("click",b,c,a)},onDestroy:function(){var a=this;Ext.menu.Manager.unregister(a),a.rendered&&(a.el.un(a.mouseMonitor),a.keyNav.destroy(),delete a.keyNav),a.callParent(arguments)},onMouseLeave:function(a){var b=this;b.deactivateActiveItem();if(b.disabled)return;b.fireEvent("mouseleave",b,a)},onMouseOver:function(a){var b=this,c=a.getRelatedTarget(),d=!b.el.contains(c),e=b.getItemFromEvent(a);d&&b.parentMenu&&(b.parentMenu.setActiveItem(b.parentItem),b.parentMenu.mouseMonitor.mouseenter());if(b.disabled)return;e&&(b.setActiveItem(e),e.activated&&e.expandMenu&&e.expandMenu()),d&&b.fireEvent("mouseenter",b,a),b.fireEvent("mouseover",b,e,a)},setActiveItem:function(a){var b=this;a&&a!=b.activeItem&&a!=b.focusedItem&&(b.deactivateActiveItem(),b.canActivateItem(a)&&(a.activate?(a.activate(),a.activated&&(b.activeItem=a,b.focusedItem=a,b.focus())):(a.focus(),b.focusedItem=a)),a.el.scrollIntoView(b.layout.getRenderTarget()))},showBy:function(a,b,c){var d=this,e,f;return d.floating&&a&&(d.layout.autoSize=!0,d.doAutoRender(),delete d.needsLayout,a=a.el||a,e=d.el.getAlignToXY(a,b||d.defaultAlign,c),d.floatParent&&(f=d.floatParent.getTargetEl().getViewRegion(),e[0]-=f.x,e[1]-=f.y),d.showAt(e)),d},doConstrain:function(){var a=this,b=a.el.getY(),c,d,e,f=b,g,h,i,j;delete a.height,a.setSize(),d=a.getHeight(),a.floating?(h=Ext.fly(a.el.getScopeParent()),i=h.getScroll().top,j=h.getViewSize().height,g=b-i,c=a.maxHeight?a.maxHeight:j-g,d>j?(c=j,f=b-g):c<d&&(f=b-(d-c),c=d)):c=a.getHeight(),a.maxHeight&&(c=Math.min(a.maxHeight,c)),d>c&&c>0&&(a.layout.autoSize=!1,a.setHeight(c),a.showSeparator&&a.iconSepEl.setHeight(a.layout.getRenderTarget().dom.scrollHeight)),e=a.getConstrainVector(a.el.getScopeParent()),e&&a.setPosition(a.getPosition()[0]+e[0]),a.el.setY(f)}}),Ext.define("Ext.menu.ColorPicker",{extend:"Ext.menu.Menu",alias:"widget.colormenu",requires:["Ext.picker.Color"],hideOnClick:!0,pickerId:null,initComponent:function(){var a=this,b=Ext.apply({},a.initialConfig);delete b.listeners,Ext.apply(a,{plain:!0,showSeparator:!1,items:Ext.applyIf({cls:Ext.baseCSSPrefix+"menu-color-item",id:a.pickerId,xtype:"colorpicker"},b)}),a.callParent(arguments),a.picker=a.down("colorpicker"),a.relayEvents(a.picker,["select"]),a.hideOnClick&&a.on("select",a.hidePickerOnSelect,a)},hidePickerOnSelect:function(){Ext.menu.Manager.hideAll()}}),Ext.define("Ext.menu.DatePicker",{extend:"Ext.menu.Menu",alias:"widget.datemenu",requires:["Ext.picker.Date"],hideOnClick:!0,pickerId:null,initComponent:function(){var a=this;Ext.apply(a,{showSeparator:!1,plain:!0,border:!1,bodyPadding:0,items:Ext.applyIf({cls:Ext.baseCSSPrefix+"menu-date-item",id:a.pickerId,xtype:"datepicker"},a.initialConfig)}),a.callParent(arguments),a.picker=a.down("datepicker"),a.relayEvents(a.picker,["select"]),a.hideOnClick&&a.on("select",a.hidePickerOnSelect,a)},hidePickerOnSelect:function(){Ext.menu.Manager.hideAll()}}),Ext.define("Ext.panel.Tool",{extend:"Ext.Component",requires:["Ext.tip.QuickTipManager"],alias:"widget.tool",baseCls:Ext.baseCSSPrefix+"tool",disabledCls:Ext.baseCSSPrefix+"tool-disabled",toolPressedCls:Ext.baseCSSPrefix+"tool-pressed",toolOverCls:Ext.baseCSSPrefix+"tool-over",ariaRole:"button",renderTpl:['<img id="{id}-toolEl" src="{blank}" class="{baseCls}-{type}" role="presentation"/>'],tooltipType:"qtip",stopEvent:!0,initComponent:function(){var a=this;a.addEvents("click"),a.type=a.type||a.id,Ext.applyIf(a.renderData,{baseCls:a.baseCls,blank:Ext.BLANK_IMAGE_URL,type:a.type}),a.addChildEls("toolEl"),a.tooltip=a.tooltip||a.qtip,a.callParent()},afterRender:function(){var a=this,b;a.callParent(arguments),a.tooltip&&(Ext.isObject(a.tooltip)?Ext.tip.QuickTipManager.register(Ext.apply({target:a.id},a.tooltip)):(b=a.tooltipType=="qtip"?"data-qtip":"title",a.toolEl.dom.setAttribute(b,a.tooltip))),a.mon(a.toolEl,{click:a.onClick,mousedown:a.onMouseDown,mouseover:a.onMouseOver,mouseout:a.onMouseOut,scope:a})},setType:function(a){var b=this;return b.type=a,b.rendered&&(b.toolEl.dom.className=b.baseCls+"-"+a),b},bindTo:function(a){this.owner=a},onClick:function(a,b){var c=this,d;return c.disabled?!1:(d=c.owner||c.ownerCt,c.el.removeCls(c.toolPressedCls),c.el.removeCls(c.toolOverCls),c.stopEvent!==!1&&a.stopEvent(),Ext.callback(c.handler,c.scope||c,[a,b,d,c]),c.fireEvent("click",c,a),!0)},onDestroy:function(){Ext.isObject(this.tooltip)&&Ext.tip.QuickTipManager.unregister(this.id),this.callParent()},onMouseDown:function(){if(this.disabled)return!1;this.el.addCls(this.toolPressedCls)},onMouseOver:function(){if(this.disabled)return!1;this.el.addCls(this.toolOverCls)},onMouseOut:function(){this.el.removeCls(this.toolOverCls)}}),Ext.define("Ext.resizer.Handle",{extend:"Ext.Component",handleCls:"",baseHandleCls:Ext.baseCSSPrefix+"resizable-handle",region:"",onRender:function(){this.addCls(this.baseHandleCls,this.baseHandleCls+"-"+this.region,this.handleCls),this.callParent(arguments),this.el.unselectable()}}),Ext.define("Ext.resizer.Resizer",{mixins:{observable:"Ext.util.Observable"},uses:["Ext.resizer.ResizeTracker","Ext.Component"],alternateClassName:"Ext.Resizable",handleCls:Ext.baseCSSPrefix+"resizable-handle",pinnedCls:Ext.baseCSSPrefix+"resizable-pinned",overCls:Ext.baseCSSPrefix+"resizable-over",wrapCls:Ext.baseCSSPrefix+"resizable-wrap",dynamic:!0,handles:"s e se",height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:20,minWidth:20,maxHeight:1e4,maxWidth:1e4,pinned:!1,preserveRatio:!1,transparent:!1,possiblePositions:{n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"},constructor:function(a){var b=this,c,d,e=b.handles,f,g,h,i=0,j;this.addEvents("beforeresize","resizedrag","resize");if(Ext.isString(a)||Ext.isElement(a)||a.dom)c=a,a=arguments[1]||{},a.target=c;b.mixins.observable.constructor.call(b,a),c=b.target,c?c.isComponent?(b.el=c.getEl(),c.minWidth&&(b.minWidth=c.minWidth),c.minHeight&&(b.minHeight=c.minHeight),c.maxWidth&&(b.maxWidth=c.maxWidth),c.maxHeight&&(b.maxHeight=c.maxHeight),c.floating&&(this.hasOwnProperty("handles")||(this.handles="n ne e se s sw w nw"))):b.el=b.target=Ext.get(c):b.target=b.el=Ext.get(b.el),d=b.el.dom.tagName;if(d=="TEXTAREA"||d=="IMG"){b.originalTarget=b.target,b.target=b.el=b.el.wrap({cls:b.wrapCls,id:b.el.id+"-rzwrap"}),b.el.setPositioning(b.originalTarget.getPositioning()),b.originalTarget.clearPositioning();var k=b.originalTarget.getBox();b.el.setBox(k)}b.el.position(),b.pinned&&b.el.addCls(b.pinnedCls),b.resizeTracker=Ext.create("Ext.resizer.ResizeTracker",{disabled:b.disabled,target:b.target,constrainTo:b.constrainTo,overCls:b.overCls,throttle:b.throttle,originalTarget:b.originalTarget,delegate:"."+b.handleCls,dynamic:b.dynamic,preserveRatio:b.preserveRatio,heightIncrement:b.heightIncrement,widthIncrement:b.widthIncrement,minHeight:b.minHeight,maxHeight:b.maxHeight,minWidth:b.minWidth,maxWidth:b.maxWidth}),b.resizeTracker.on("mousedown",b.onBeforeResize,b),b.resizeTracker.on("drag",b.onResize,b),b.resizeTracker.on("dragend",b.onResizeEnd,b),b.handles=="all"&&(b.handles="n s e w ne nw se sw"),e=b.handles=b.handles.split(/ |\s*?[,;]\s*?/),g=b.possiblePositions,h=e.length,f=b.handleCls+" "+(this.target.isComponent?b.target.baseCls+"-handle ":"")+b.handleCls+"-";for(;i<h;i++)e[i]&&g[e[i]]&&(j=g[e[i]],b[j]=Ext.create("Ext.Component",{owner:this,region:j,cls:f+j,renderTo:b.el}),b[j].el.unselectable(),b.transparent&&b[j].el.setOpacity(0));Ext.isNumber(b.width)&&(b.width=Ext.Number.constrain(b.width,b.minWidth,b.maxWidth)),Ext.isNumber(b.height)&&(b.height=Ext.Number.constrain(b.height,b.minHeight,b.maxHeight));if(b.width!=null||b.height!=null)b.originalTarget&&(b.originalTarget.setWidth(b.width),b.originalTarget.setHeight(b.height)),b.resizeTo(b.width,b.height);b.forceHandlesHeight()},disable:function(){this.resizeTracker.disable()},enable:function(){this.resizeTracker.enable()},onBeforeResize:function(a,b){var c=this.target.getBox();return this.fireEvent("beforeresize",this,c.width,c.height,b)},onResize:function(a,b){var c=this,d=c.target.getBox();return c.forceHandlesHeight(),c.fireEvent("resizedrag",c,d.width,d.height,b)},onResizeEnd:function(a,b){var c=this,d=c.target.getBox();return c.forceHandlesHeight(),c.fireEvent("resize",c,d.width,d.height,b)},resizeTo:function(a,b){this.target.setSize(a,b),this.fireEvent("resize",this,a,b,null)},getEl:function(){return this.el},getTarget:function(){return this.target},destroy:function(){var a;for(var b=0,c=this.handles.length;b<c;b++)a=this[this.possiblePositions[this.handles[b]]],delete a.owner,Ext.destroy(a)},forceHandlesHeight:function(){var a=this,b;Ext.isIE6&&(b=a.east,b&&b.setHeight(a.el.getHeight()),b=a.west,b&&b.setHeight(a.el.getHeight()),a.el.repaint())}}),Ext.define("Ext.resizer.ResizeTracker",{extend:"Ext.dd.DragTracker",dynamic:!0,preserveRatio:!1,constrainTo:null,proxyCls:Ext.baseCSSPrefix+"resizable-proxy",constructor:function(a){var b=this;a.el||(a.target.isComponent?b.el=a.target.getEl():b.el=a.target),this.callParent(arguments);if(b.preserveRatio&&b.minWidth&&b.minHeight){var c=b.minWidth/b.el.getWidth(),d=b.minHeight/b.el.getHeight();d>c?b.minWidth=b.el.getWidth()*d:b.minHeight=b.el.getHeight()*c}if(b.throttle){var e=Ext.Function.createThrottled(function(){Ext.resizer.ResizeTracker.prototype.resize.apply(b,arguments)},b.throttle);b.resize=function(a,c,d){d?Ext.resizer.ResizeTracker.prototype.resize.apply(b,arguments):e.apply(null,arguments)}}},onBeforeStart:function(a){this.startBox=this.el.getBox()},getDynamicTarget:function(){var a=this,b=a.target;return a.dynamic?b:(a.proxy||(a.proxy=a.createProxy(b)),a.proxy.show(),a.proxy)},createProxy:function(a){var b,c=this.proxyCls,d;return a.isComponent?b=a.getProxy().addCls(c):(d=Ext.getBody(),Ext.scopeResetCSS&&(d=Ext.getBody().createChild({cls:Ext.baseCSSPrefix+"reset"})),b=a.createProxy({tag:"div",cls:c,id:a.id+"-rzproxy"},d)),b.removeCls(Ext.baseCSSPrefix+"proxy-el"),b},onStart:function(a){this.activeResizeHandle=Ext.getCmp(this.getDragTarget().id),this.dynamic||this.resize(this.startBox,{horizontal:"none",vertical:"none"})},onDrag:function(a){(this.dynamic||this.proxy)&&this.updateDimensions(a)},updateDimensions:function(a,b){var c=this,d=c.activeResizeHandle.region,e=c.getOffset(c.constrainTo?"dragTarget":null),f=c.startBox,g,h=0,i=0,j,k,l=0,m=0,n,o=e[0]<0?"right":"left",p=e[1]<0?"down":"up",q,r;switch(d){case"south":i=e[1],r=2;break;case"north":i=-e[1],m=-i,r=2;break;case"east":h=e[0],r=1;break;case"west":h=-e[0],l=-h,r=1;break;case"northeast":i=-e[1],m=-i,h=e[0],q=[f.x,f.y+f.height],r=3;break;case"southeast":i=e[1],h=e[0],q=[f.x,f.y],r=3;break;case"southwest":h=-e[0],l=-h,i=e[1],q=[f.x+f.width,f.y],r=3;break;case"northwest":i=-e[1],m=-i,h=-e[0],l=-h,q=[f.x+f.width,f.y+f.height],r=3}var s={width:f.width+h,height:f.height+i,x:f.x+l,y:f.y+m};j=Ext.Number.snap(s.width,c.widthIncrement),k=Ext.Number.snap(s.height,c.heightIncrement);if(j!=s.width||k!=s.height){switch(d){case"northeast":s.y-=k-s.height;break;case"north":s.y-=k-s.height;break;case"southwest":s.x-=j-s.width;break;case"west":s.x-=j-s.width;break;case"northwest":s.x-=j-s.width,s.y-=k-s.height}s.width=j,s.height=k}s.width<c.minWidth||s.width>c.maxWidth?(s.width=Ext.Number.constrain(s.width,c.minWidth,c.maxWidth),l&&(s.x=f.x+(f.width-s.width))):c.lastX=s.x,s.height<c.minHeight||s.height>c.maxHeight?(s.height=Ext.Number.constrain(s.height,c.minHeight,c.maxHeight),m&&(s.y=f.y+(f.height-s.height))):c.lastY=s.y;if(c.preserveRatio||a.shiftKey){var t,u;g=c.startBox.width/c.startBox.height,t=Math.min(Math.max(c.minHeight,s.width/g),c.maxHeight),u=Math.min(Math.max(c.minWidth,s.height*g),c.maxWidth),r==1?s.height=t:r==2?s.width=u:(n=Math.abs(q[0]-this.lastXY[0])/Math.abs(q[1]-this.lastXY[1]),n>g?s.height=t:s.width=u,d=="northeast"?s.y=f.y-(s.height-f.height):d=="northwest"?(s.y=f.y-(s.height-f.height),s.x=f.x-(s.width-f.width)):d=="southwest"&&(s.x=f.x-(s.width-f.width)))}i===0&&(p="none"),h===0&&(o="none"),c.resize(s,{horizontal:o,vertical:p},b)},getResizeTarget:function(a){return a?this.target:this.getDynamicTarget()},resize:function(a,b,c){var d=this.getResizeTarget(c);d.isComponent?(d.floating&&d.setPagePosition(a.x,a.y),d.setSize(a.width,a.height)):(d.setBox(a),this.originalTarget&&this.originalTarget.setBox(a))},onEnd:function(a){this.updateDimensions(a,!0),this.proxy&&this.proxy.hide()}}),Ext.define("Ext.resizer.SplitterTracker",{extend:"Ext.dd.DragTracker",requires:["Ext.util.Region"],enabled:!0,overlayCls:Ext.baseCSSPrefix+"resizable-overlay",getPrevCmp:function(){var a=this.getSplitter();return a.previousSibling()},getNextCmp:function(){var a=this.getSplitter();return a.nextSibling()},onBeforeStart:function(a){var b=this,c=b.getPrevCmp(),d=b.getNextCmp(),e=b.getSplitter().collapseEl,f;if(e&&a.getTarget()===b.getSplitter().collapseEl.dom)return!1;if(d.collapsed||c.collapsed)return!1;f=b.overlay=Ext.getBody().createChild({cls:b.overlayCls,html:"&#160;"}),f.unselectable(),f.setSize(Ext.Element.getViewWidth(!0),Ext.Element.getViewHeight(!0)),f.show(),b.prevBox=c.getEl().getBox(),b.nextBox=d.getEl().getBox(),b.constrainTo=b.calculateConstrainRegion()},onStart:function(a){var b=this.getSplitter();b.addCls(b.baseCls+"-active")},calculateConstrainRegion:function(){var a=this,b=a.getSplitter(),c=b.getWidth(),d=b.defaultSplitMin,e=b.orientation,f=a.prevBox,g=a.getPrevCmp(),h=a.nextBox,i=a.getNextCmp(),j,k;return e==="vertical"?(j=Ext.create("Ext.util.Region",f.y,(g.maxWidth?f.x+g.maxWidth:h.right-(i.minWidth||d))+c,f.bottom,f.x+(g.minWidth||d)),k=Ext.create("Ext.util.Region",h.y,h.right-(i.minWidth||d),h.bottom,(i.maxWidth?h.right-i.maxWidth:f.x+(f.minWidth||d))-c)):(j=Ext.create("Ext.util.Region",f.y+(g.minHeight||d),f.right,(g.maxHeight?f.y+g.maxHeight:h.bottom-(i.minHeight||d))+c,f.x),k=Ext.create("Ext.util.Region",(i.maxHeight?h.bottom-i.maxHeight:f.y+(g.minHeight||d))-c,h.right,h.bottom-(i.minHeight||d),h.x)),j.intersect(k)},performResize:function(a){var b=this,c=b.getOffset("dragTarget"),d=b.getSplitter(),e=d.orientation,f=b.getPrevCmp(),g=b.getNextCmp(),h=d.ownerCt,i=h.getLayout();h.suspendLayout=!0,e==="vertical"?(f&&(f.maintainFlex||(delete f.flex,f.setSize(b.prevBox.width+c[0],f.getHeight()))),g&&(g.maintainFlex||(delete g.flex,g.setSize(b.nextBox.width-c[0],g.getHeight())))):(f&&(f.maintainFlex||(delete f.flex,f.setSize(f.getWidth(),b.prevBox.height+c[1]))),g&&(g.maintainFlex||(delete g.flex,g.setSize(f.getWidth(),b.nextBox.height-c[1])))),delete h.suspendLayout,i.onLayout()},endDrag:function(){var a=this;a.overlay&&(a.overlay.remove(),delete a.overlay),a.callParent(arguments)},onEnd:function(a){var b=this,c=b.getSplitter();c.removeCls(c.baseCls+"-active"),b.performResize()},onDrag:function(a){var b=this,c=b.getOffset("dragTarget"),d=b.getSplitter(),e=d.getEl(),f=d.orientation;f==="vertical"?e.setX(b.startRegion.left+c[0]):e.setY(b.startRegion.top+c[1])},getSplitter:function(){return Ext.getCmp(this.getDragCt().id)}}),Ext.define("Ext.selection.CellModel",{extend:"Ext.selection.Model",alias:"selection.cellmodel",requires:["Ext.util.KeyNav"],enableKeyNav:!0,preventWrap:!1,constructor:function(){this.addEvents("deselect","select"),this.callParent(arguments)},bindComponent:function(a){var b=this;b.primaryView=a,b.views=b.views||[],b.views.push(a),b.bind(a.getStore(),!0),a.on({cellmousedown:b.onMouseDown,refresh:b.onViewRefresh,scope:b}),b.enableKeyNav&&b.initKeyNav(a)},initKeyNav:function(a){var b=this;if(!a.rendered){a.on("render",Ext.Function.bind(b.initKeyNav,b,[a],0),b,{single:!0});return}a.el.set({tabIndex:-1}),b.keyNav=Ext.create("Ext.util.KeyNav",a.el,{up:b.onKeyUp,down:b.onKeyDown,right:b.onKeyRight,left:b.onKeyLeft,tab:b.onKeyTab,scope:b})},getHeaderCt:function(){return this.primaryView.headerCt},onKeyUp:function(a,b){this.move("up",a)},onKeyDown:function(a,b){this.move("down",a)},onKeyLeft:function(a,b){this.move("left",a)},onKeyRight:function(a,b){this.move("right",a)},move:function(a,b){var c=this,d=c.primaryView.walkCells(c.getCurrentPosition(),a,b,c.preventWrap);return d&&c.setCurrentPosition(d),d},getCurrentPosition:function(){return this.position},setCurrentPosition:function(a){var b=this;b.position&&b.onCellDeselect(b.position),a&&b.onCellSelect(a),b.position=a},onMouseDown:function(a,b,c,d,e,f,g){this.setCurrentPosition({row:f,column:c})},onCellSelect:function(a){var b=this,c=b.view.getStore(),d=c.getAt(a.row);b.doSelect(d),b.primaryView.onCellSelect(a),b.primaryView.onCellFocus(a),b.fireEvent("select",b,d,a.row,a.column)},onCellDeselect:function(a){var b=this,c=b.view.getStore(),d=c.getAt(a.row);b.doDeselect(d),b.primaryView.onCellDeselect(a),b.fireEvent("deselect",b,d,a.row,a.column)},onKeyTab:function(a,b){var c=this,d=a.shiftKey?"left":"right",e=c.view.editingPlugin,f=c.move(d,a);e&&f&&c.wasEditing&&e.startEditByPosition(f),delete c.wasEditing},onEditorTab:function(a,b){var c=this,d=b.shiftKey?"left":"right",e=c.move(d,b);e&&(a.startEditByPosition(e),c.wasEditing=!0)},refresh:function(){var a=this.getCurrentPosition();a&&this.onCellSelect(a)},onViewRefresh:function(){var a=this.getCurrentPosition();a&&(this.onCellDeselect(a),this.setCurrentPosition(null))},selectByPosition:function(a){this.setCurrentPosition(a)}}),Ext.define("Ext.selection.RowModel",{extend:"Ext.selection.Model",alias:"selection.rowmodel",requires:["Ext.util.KeyNav"],deltaScroll:5,enableKeyNav:!0,ignoreRightMouseSelection:!0,constructor:function(){this.addEvents("beforedeselect","beforeselect","deselect","select"),this.callParent(arguments)},bindComponent:function(a){var b=this;b.views=b.views||[],b.views.push(a),b.bind(a.getStore(),!0),a.on({itemmousedown:b.onRowMouseDown,scope:b}),b.enableKeyNav&&b.initKeyNav(a)},initKeyNav:function(a){var b=this;if(!a.rendered){a.on("render",Ext.Function.bind(b.initKeyNav,b,[a],0),b,{single:!0});return}a.el.set({tabIndex:-1}),b.keyNav=new Ext.util.KeyNav(a.el,{up:b.onKeyUp,down:b.onKeyDown,right:b.onKeyRight,left:b.onKeyLeft,pageDown:b.onKeyPageDown,pageUp:b.onKeyPageUp,home:b.onKeyHome,end:b.onKeyEnd,scope:b}),a.el.on(Ext.EventManager.getKeyEvent(),b.onKeyPress,b)},getRowsVisible:function(){var a=!1,b=this.views[0],c=b.getNode(0),d,e;return c&&(d=Ext.fly(c).getHeight(),e=b.el.getHeight(),a=Math.floor(e/d)),a},onKeyEnd:function(a,b){var c=this,d=c.store.getAt(c.store.getCount()-1);d&&(a.shiftKey?(c.selectRange(d,c.lastFocused||0),c.setLastFocused(d)):a.ctrlKey?c.setLastFocused(d):c.doSelect(d))},onKeyHome:function(a,b){var c=this,d=c.store.getAt(0);d&&(a.shiftKey?(c.selectRange(d,c.lastFocused||0),c.setLastFocused(d)):a.ctrlKey?c.setLastFocused(d):c.doSelect(d,!1))},onKeyPageUp:function(a,b){var c=this,d=c.getRowsVisible(),e,f,g,h;d&&(e=c.lastFocused?c.store.indexOf(c.lastFocused):0,f=e-d,f<0&&(f=0),g=c.store.getAt(f),a.shiftKey?(h=c.store.getAt(e),c.selectRange(g,h,a.ctrlKey,"up"),c.setLastFocused(g)):a.ctrlKey?(a.preventDefault(),c.setLastFocused(g)):c.doSelect(g))},onKeyPageDown:function(a,b){var c=this,d=c.getRowsVisible(),e,f,g,h;d&&(e=c.lastFocused?c.store.indexOf(c.lastFocused):0,f=e+d,f>=c.store.getCount()&&(f=c.store.getCount()-1),g=c.store.getAt(f),a.shiftKey?(h=c.store.getAt(e),c.selectRange(g,h,a.ctrlKey,"down"),c.setLastFocused(g)):a.ctrlKey?(a.preventDefault(),c.setLastFocused(g)):c.doSelect(g))},onKeyPress:function(a,b){if(a.getKey()===a.SPACE){a.stopEvent();var c=this,d=c.lastFocused;d&&(c.isSelected(d)?c.doDeselect(d,!1):c.doSelect(d,!0))}},onKeyUp:function(a,b){var c=this,d=c.views[0],e=c.store.indexOf(c.lastFocused),f;e>0&&(f=c.store.getAt(e-1),a.shiftKey&&c.lastFocused?c.isSelected(c.lastFocused)&&c.isSelected(f)?(c.doDeselect(c.lastFocused,!0),c.setLastFocused(f)):c.isSelected(c.lastFocused)?c.doSelect(f,!0):(c.doSelect(c.lastFocused,!0),c.doSelect(f,!0)):a.ctrlKey?c.setLastFocused(f):c.doSelect(f))},onKeyDown:function(a,b){var c=this,d=c.views[0],e=c.store.indexOf(c.lastFocused),f;e+1<c.store.getCount()&&(f=c.store.getAt(e+1),c.selected.getCount()===0?c.doSelect(f):a.shiftKey&&c.lastFocused?c.isSelected(c.lastFocused)&&c.isSelected(f)?(c.doDeselect(c.lastFocused,!0),c.setLastFocused(f)):c.isSelected(c.lastFocused)?c.doSelect(f,!0):(c.doSelect(c.lastFocused,!0),c.doSelect(f,!0)):a.ctrlKey?c.setLastFocused(f):c.doSelect(f))},scrollByDeltaX:function(a){var b=this.views[0],c=b.up(),d=c.horizontalScroller;d&&d.scrollByDeltaX(a)},onKeyLeft:function(a,b){this.scrollByDeltaX(-this.deltaScroll)},onKeyRight:function(a,b){this.scrollByDeltaX(this.deltaScroll)},onRowMouseDown:function(a,b,c,d,e){a.el.focus();if(!this.allowRightMouseSelection(e))return;this.selectWithEvent(b,e)},allowRightMouseSelection:function(a){var b=this.ignoreRightMouseSelection&&a.button!==0;return b&&(b=this.hasSelection()),!b},onSelectChange:function(a,b,c,d){var e=this,f=e.views,g=f.length,h=e.store,i=h.indexOf(a),j=b?"select":"deselect",k=0;if((c||e.fireEvent("before"+j,e,a,i))!==!1&&d()!==!1){for(;k<g;k++)b?f[k].onRowSelect(i,c):f[k].onRowDeselect(i,c);c||e.fireEvent(j,e,a,i)}},onLastFocusChanged:function(a,b,c){var d=this.views,e=d.length,f=this.store,g,h=0;if(a){g=f.indexOf(a);if(g!=-1)for(;h<e;h++)d[h].onRowFocus(g,!1)}if(b){g=f.indexOf(b);if(g!=-1)for(h=0;h<e;h++)d[h].onRowFocus(g,!0,c)}},onEditorTab:function(a,b){var c=this,d=c.views[0],e=a.getActiveRecord(),f=a.getActiveColumn(),g=d.getPosition(e,f),h=b.shiftKey?"left":"right",i=d.walkCells(g,h,b,this.preventWrap);i&&a.startEditByPosition(i)},selectByPosition:function(a){var b=this.store.getAt(a.row);this.select(b)}}),Ext.define("Ext.selection.CheckboxModel",{alias:"selection.checkboxmodel",extend:"Ext.selection.RowModel",mode:"MULTI",injectCheckbox:0,checkOnly:!1,headerWidth:24,checkerOnCls:Ext.baseCSSPrefix+"grid-hd-checker-on",bindComponent:function(a){var b=this;b.sortable=!1,b.callParent(arguments);if(!b.hasLockedHeader()||a.headerCt.lockedCt)a.headerCt.on("headerclick",b.onHeaderClick,b),b.addCheckbox(!0),b.mon(a.ownerCt,"reconfigure",b.addCheckbox,b)},hasLockedHeader:function(){var a=!1;return Ext.each(this.views,function(b){if(b.headerCt.lockedCt)return a=!0,!1}),a},addCheckbox:function(a){var b=this,c=b.injectCheckbox,d=b.views[0],e=d.headerCt;c!==!1&&(c=="first"?c=0:c=="last"&&(c=e.getColumnCount()),e.add(c,b.getHeaderConfig())),a!==!0&&d.refresh()},toggleUiHeader:function(a){var b=this.views[0],c=b.headerCt,d=c.child("gridcolumn[isCheckerHd]");d&&(a?d.el.addCls(this.checkerOnCls):d.el.removeCls(this.checkerOnCls))},onHeaderClick:function(a,b,c){if(b.isCheckerHd){c.stopEvent();var d=b.el.hasCls(Ext.baseCSSPrefix+"grid-hd-checker-on");d?this.deselectAll(!0):this.selectAll(!0)}},getHeaderConfig:function(){var a=this;return{isCheckerHd:!0,text:"&#160;",width:a.headerWidth,sortable:!1,draggable:!1,resizable:!1,hideable:!1,menuDisabled:!0,dataIndex:"",cls:Ext.baseCSSPrefix+"column-header-checkbox ",renderer:Ext.Function.bind(a.renderer,a),locked:a.hasLockedHeader()}},renderer:function(a,b,c,d,e,f,g){return b.tdCls=Ext.baseCSSPrefix+"grid-cell-special",'<div class="'+Ext.baseCSSPrefix+'grid-row-checker">&#160;</div>'},onRowMouseDown:function(a,b,c,d,e){a.el.focus();var f=this,g=e.getTarget("."+Ext.baseCSSPrefix+"grid-row-checker");if(!f.allowRightMouseSelection(e))return;if(f.checkOnly&&!g)return;if(g){var h=f.getSelectionMode();h!=="SINGLE"&&f.setSelectionMode("SIMPLE"),f.selectWithEvent(b,e),f.setSelectionMode(h)}else f.selectWithEvent(b,e)},onSelectChange:function(){this.callParent(arguments);var a=this.selected.getCount()===this.store.getCount();this.toggleUiHeader(a)}}),Ext.define("Ext.selection.TreeModel",{extend:"Ext.selection.RowModel",alias:"selection.treemodel",pruneRemoved:!1,onKeyRight:function(a,b){var c=this.getLastFocused(),d=this.view;c&&(c.isExpanded()?this.onKeyDown(a,b):c.isLeaf()||d.expand(c))},onKeyLeft:function(a,b){var c=this.getLastFocused(),d=this.view,e=d.getSelectionModel(),f,g;c&&(f=c.parentNode,c.isExpanded()?d.collapse(c):f&&!f.isRoot()&&(a.shiftKey?(e.selectRange(f,c,a.ctrlKey,"up"),e.setLastFocused(f)):a.ctrlKey?e.setLastFocused(f):e.select(f)))},onKeyPress:function(a,b){var c=a.getKey(),d,e;c===a.SPACE||c===a.ENTER?(a.stopEvent(),d=this.getLastSelected(),d&&this.view.onCheckChange(d)):this.callParent(arguments)}}),Ext.define("Ext.slider.Thumb",{requires:["Ext.dd.DragTracker","Ext.util.Format"],topZIndex:1e4,constructor:function(a){var b=this;Ext.apply(b,a||{},{cls:Ext.baseCSSPrefix+"slider-thumb",constrain:!1}),b.callParent([a]),b.slider.vertical&&Ext.apply(b,Ext.slider.Thumb.Vertical)},render:function(){var a=this;a.el=a.slider.innerEl.insertFirst({cls:a.cls}),a.disabled&&a.disable(),a.initEvents()},move:function(a,b){b?Ext.create("Ext.fx.Anim",{target:this.el,duration:350,to:{left:a}}):this.el.setLeft(a)},bringToFront:function(){this.el.setStyle("zIndex",this.topZIndex)},sendToBack:function(){this.el.setStyle("zIndex","")},enable:function(){var a=this;a.disabled=!1,a.el&&a.el.removeCls(a.slider.disabledCls)},disable:function(){var a=this;a.disabled=!0,a.el&&a.el.addCls(a.slider.disabledCls)},initEvents:function(){var a=this,b=a.el;a.tracker=Ext.create("Ext.dd.DragTracker",{onBeforeStart:Ext.Function.bind(a.onBeforeDragStart,a),onStart:Ext.Function.bind(a.onDragStart,a),onDrag:Ext.Function.bind(a.onDrag,a),onEnd:Ext.Function.bind(a.onDragEnd,a),tolerance:3,autoStart:300,overCls:Ext.baseCSSPrefix+"slider-thumb-over"}),a.tracker.initEl(b)},onBeforeDragStart:function(a){return this.disabled?!1:(this.slider.promoteThumb(this),!0)},onDragStart:function(a){var b=this;b.el.addCls(Ext.baseCSSPrefix+"slider-thumb-drag"),b.dragging=!0,b.dragStartValue=b.value,b.slider.fireEvent("dragstart",b.slider,a,b)},onDrag:function(a){var b=this,c=b.slider,d=b.index,e=b.getNewValue(),f,g;b.constrain&&(f=c.thumbs[d+1],g=c.thumbs[d-1],g!==undefined&&e<=g.value&&(e=g.value),f!==undefined&&e>=f.value&&(e=f.value)),c.setValue(d,e,!1),c.fireEvent("drag",c,a,b)},getNewValue:function(){var a=this.slider,b=a.innerEl.translatePoints(this.tracker.getXY());return Ext.util.Format.round(a.reverseValue(b.left),a.decimalPrecision)},onDragEnd:function(a){var b=this,c=b.slider,d=b.value;b.el.removeCls(Ext.baseCSSPrefix+"slider-thumb-drag"),b.dragging=!1,c.fireEvent("dragend",c,a),b.dragStartValue!=d&&c.fireEvent("changecomplete",c,d,b)},destroy:function(){Ext.destroy(this.tracker)},statics:{Vertical:{getNewValue:function(){var a=this.slider,b=a.innerEl,c=b.translatePoints(this.tracker.getXY()),d=b.getHeight()-c.top;return Ext.util.Format.round(a.reverseValue(d),a.decimalPrecision)},move:function(a,b){b?Ext.create("Ext.fx.Anim",{target:this.el,duration:350,to:{bottom:a}}):this.el.setBottom(a)}}}}),Ext.define("Ext.slider.Tip",{extend:"Ext.tip.Tip",minWidth:10,alias:"widget.slidertip",offsets:[0,-10],isSliderTip:!0,init:function(a){var b=this;a.on({scope:b,dragstart:b.onSlide,drag:b.onSlide,dragend:b.hide,destroy:b.destroy})},onSlide:function(a,b,c){var d=this;d.show(),d.update(d.getText(c)),d.doComponentLayout(),d.el.alignTo(c.el,"b-t?",d.offsets)},getText:function(a){return String(a.value)}}),Ext.define("Ext.slider.Multi",{extend:"Ext.form.field.Base",alias:"widget.multislider",alternateClassName:"Ext.slider.MultiSlider",requires:["Ext.slider.Thumb","Ext.slider.Tip","Ext.Number","Ext.util.Format","Ext.Template","Ext.layout.component.field.Slider"],fieldSubTpl:['<div id="{id}" class="'+Ext.baseCSSPrefix+'slider {fieldCls} {vertical}" aria-valuemin="{minValue}" aria-valuemax="{maxValue}" aria-valuenow="{value}" aria-valuetext="{value}">','<div id="{cmpId}-endEl" class="'+Ext.baseCSSPrefix+'slider-end" role="presentation">','<div id="{cmpId}-innerEl" class="'+Ext.baseCSSPrefix+'slider-inner" role="presentation">','<a id="{cmpId}-focusEl" class="'+Ext.baseCSSPrefix+'slider-focus" href="#" tabIndex="-1" hidefocus="on" role="presentation"></a>',"</div>","</div>","</div>",{disableFormats:!0,compiled:!0}],vertical:!1,minValue:0,maxValue:100,decimalPrecision:0,keyIncrement:1,increment:0,clickRange:[5,15],clickToChange:!0,animate:!0,dragging:!1,constrainThumbs:!0,componentLayout:"sliderfield",useTips:!0,tipText:null,ariaRole:"slider",initValue:function(){var a=this,b=Ext.value,c=b(a.values,[b(a.value,b(a.minValue,0))]),d=0,e=c.length;a.originalValue=c;for(;d<e;d++)a.addThumb(c[d])},initComponent:function(){var a=this,b,c;a.thumbs=[],a.keyIncrement=Math.max(a.increment,a.keyIncrement),a.addEvents("beforechange","change","changecomplete","dragstart","drag","dragend"),a.vertical&&Ext.apply(a,Ext.slider.Multi.Vertical),a.callParent(),a.useTips&&(b=a.tipText?{getText:a.tipText}:{},a.plugins=a.plugins||[],Ext.each(a.plugins,function(a){if(a.isSliderTip)return c=!0,!1}),c||a.plugins.push(Ext.create("Ext.slider.Tip",b)))},addThumb:function(a){var b=this,c=Ext.create("Ext.slider.Thumb",{value:a,slider:b,index:b.thumbs.length,constrain:b.constrainThumbs});return b.thumbs.push(c),b.rendered&&c.render(),c},promoteThumb:function(a){var b=this.thumbs,c=b.length,d,e,f;for(f=0;f<c;f++)e=b[f],e==a?e.bringToFront():e.sendToBack()},onRender:function(){var a=this,b=0,c=a.thumbs,d=c.length,e;Ext.applyIf(a.subTplData,{vertical:a.vertical?Ext.baseCSSPrefix+"slider-vert":Ext.baseCSSPrefix+"slider-horz",minValue:a.minValue,maxValue:a.maxValue,value:a.value}),a.addChildEls("endEl","innerEl","focusEl"),a.callParent(arguments);for(;b<d;b++)c[b].render();e=a.innerEl.down("."+Ext.baseCSSPrefix+"slider-thumb"),a.halfThumb=(a.vertical?e.getHeight():e.getWidth())/2},onChange:function(a,b){this.setValue(b,undefined,!0)},initEvents:function(){var a=this;a.mon(a.el,{scope:a,mousedown:a.onMouseDown,keydown:a.onKeyDown,change:a.onChange}),a.focusEl.swallowEvent("click",!0)},onMouseDown:function(a){var b=this,c=!1,d=0,e=b.thumbs,f=e.length,g;if(b.disabled)return;for(;d<f;d++)c=c||a.target==e[d].el.dom;b.clickToChange&&!c&&(g=b.innerEl.translatePoints(a.getXY()),b.onClickChange(g)),b.focus()},onClickChange:function(a){var b=this,c,d;a.top>b.clickRange[0]&&a.top<b.clickRange[1]&&(c=b.getNearest(a,"left"),c.disabled||(d=c.index,b.setValue(d,Ext.util.Format.round(b.reverseValue(a.left),b.decimalPrecision),undefined,!0)))},getNearest:function(a,b){var c=this,d=b=="top"?c.innerEl.getHeight()-a[b]:a[b],e=c.reverseValue(d),f=c.maxValue-c.minValue+5,g=0,h=null,i=c.thumbs,j=0,k=i.length,l,m,n;for(;j<k;j++)l=c.thumbs[j],m=l.value,n=Math.abs(m-e),Math.abs(n<=f)&&(h=l,g=j,f=n);return h},onKeyDown:function(a){var b=this,c,d;if(b.disabled||b.thumbs.length!==1){a.preventDefault();return}c=a.getKey();switch(c){case a.UP:case a.RIGHT:a.stopEvent(),d=a.ctrlKey?b.maxValue:b.getValue(0)+b.keyIncrement,b.setValue(0,d,undefined,!0);break;case a.DOWN:case a.LEFT:a.stopEvent(),d=a.ctrlKey?b.minValue:b.getValue(0)-b.keyIncrement,b.setValue(0,d,undefined,!0);break;default:a.preventDefault()}},afterRender:function(){var a=this,b=0,c=a.thumbs,d=c.length,e,f;a.callParent(arguments);for(;b<d;b++)e=c[b],e.value!==undefined&&(f=a.normalizeValue(e.value),f!==e.value?a.setValue(b,f,!1):e.move(a.translateValue(f),!1))},getRatio:function(){var a=this.innerEl.getWidth(),b=this.maxValue-this.minValue;return b===0?a:a/b},normalizeValue:function(a){var b=this;return a=Ext.Number.snap(a,this.increment,this.minValue,this.maxValue),a=Ext.util.Format.round(a,b.decimalPrecision),a=Ext.Number.constrain(a,b.minValue,b.maxValue),a},setMinValue:function(a){var b=this,c=0,d=b.thumbs,e=d.length,f;b.minValue=a,b.rendered&&b.inputEl.dom.setAttribute("aria-valuemin",a);for(;c<e;++c)f=d[c],f.value=f.value<a?a:f.value;b.syncThumbs()},setMaxValue:function(a){var b=this,c=0,d=b.thumbs,e=d.length,f;b.maxValue=a,b.rendered&&b.inputEl.dom.setAttribute("aria-valuemax",a);for(;c<e;++c)f=d[c],f.value=f.value>a?a:f.value;b.syncThumbs()},setValue:function(a,b,c,d){var e=this,f=e.thumbs[a];b=e.normalizeValue(b),b!==f.value&&e.fireEvent("beforechange",e,b,f.value,f)!==!1&&(f.value=b,e.rendered&&(e.inputEl.set({"aria-valuenow":b,"aria-valuetext":b}),f.move(e.translateValue(b),Ext.isDefined(c)?c!==!1:e.animate),e.fireEvent("change",e,b,f),d&&e.fireEvent("changecomplete",e,b,f)))},translateValue:function(a){var b=this.getRatio();return a*b-this.minValue*b-this.halfThumb},reverseValue:function(a){var b=this.getRatio();return(a+this.minValue*b)/b},focus:function(){this.focusEl.focus(10)},onDisable:function(){var a=this,b=0,c=a.thumbs,d=c.length,e,f,g;a.callParent();for(;b<d;b++)e=c[b],f=e.el,e.disable(),Ext.isIE&&(g=f.getXY(),f.hide(),a.innerEl.addCls(a.disabledCls).dom.disabled=!0,a.thumbHolder||(a.thumbHolder=a.endEl.createChild({cls:Ext.baseCSSPrefix+"slider-thumb "+a.disabledCls})),a.thumbHolder.show().setXY(g))},onEnable:function(){var a=this,b=0,c=a.thumbs,d=c.length,e,f;this.callParent();for(;b<d;b++)e=c[b],f=e.el,e.enable(),Ext.isIE&&(a.innerEl.removeCls(a.disabledCls).dom.disabled=!1,a.thumbHolder&&a.thumbHolder.hide(),f.show(),a.syncThumbs())},syncThumbs:function(){if(this.rendered){var a=this.thumbs,b=a.length,c=0;for(;c<b;c++)a[c].move(this.translateValue(a[c].value))}},getValue:function(a){return Ext.isNumber(a)?this.thumbs[a].value:this.getValues()},getValues:function(){var a=[],b=0,c=this.thumbs,d=c.length;for(;b<d;b++)a.push(c[b].value);return a},getSubmitValue:function(){var a=this;return a.disabled||!a.submitValue?null:a.getValue()},reset:function(){var a=this,b=Ext.Array;b.forEach(b.from(a.originalValue),function(b,c){a.setValue(c,b)}),a.clearInvalid(),delete a.wasValid},beforeDestroy:function(){var a=this;Ext.destroy(a.innerEl,a.endEl,a.focusEl),Ext.each(a.thumbs,function(a){Ext.destroy(a)},a),a.callParent()},statics:{Vertical:{getRatio:function(){var a=this.innerEl.getHeight(),b=this.maxValue-this.minValue;return a/b},onClickChange:function(a){var b=this,c,d,e;a.left>b.clickRange[0]&&a.left<b.clickRange[1]&&(c=b.getNearest(a,"top"),c.disabled||(d=c.index,e=b.reverseValue(b.innerEl.getHeight()-a.top),b.setValue(d,Ext.util.Format.round(b.minValue+e,b.decimalPrecision),undefined,!0)))}}}}),Ext.define("Ext.slider.Single",{extend:"Ext.slider.Multi",alias:["widget.slider","widget.sliderfield"],alternateClassName:["Ext.Slider","Ext.form.SliderField","Ext.slider.SingleSlider","Ext.slider.Slider"],getValue:function(){return this.callParent([0])},setValue:function(a,b){var c=Ext.toArray(arguments),d=c.length;return(d==1||d<=3&&typeof arguments[1]!="number")&&c.unshift(0),this.callParent(c)},getNearest:function(){return this.thumbs[0]}}),Ext.define("Ext.tab.Tab",{extend:"Ext.button.Button",alias:"widget.tab",requires:["Ext.layout.component.Tab","Ext.util.KeyNav"],componentLayout:"tab",isTab:!0,baseCls:Ext.baseCSSPrefix+"tab",activeCls:"active",closableCls:"closable",closable:!0,closeText:"Close Tab",active:!1,scale:!1,position:"top",initComponent:function(){var a=this;a.addEvents("activate","deactivate","beforeclose","close"),a.callParent(arguments),a.card&&a.setCard(a.card)},onRender:function(){var a=this,b=a.up("tabbar"),c=a.up("tabpanel");a.addClsWithUI(a.position),a.syncClosableUI(),a.minWidth||(a.minWidth=b?b.minTabWidth:a.minWidth,!a.minWidth&&c&&(a.minWidth=c.minTabWidth),a.minWidth&&a.iconCls&&(a.minWidth+=25)),a.maxWidth||(a.maxWidth=b?b.maxTabWidth:a.maxWidth,!a.maxWidth&&c&&(a.maxWidth=c.maxTabWidth)),a.callParent(arguments),a.active&&a.activate(!0),a.syncClosableElements(),a.keyNav=Ext.create("Ext.util.KeyNav",a.el,{enter:a.onEnterKey,del:a.onDeleteKey,scope:a})},enable:function(a){var b=this;return b.callParent(arguments),b.removeClsWithUI(b.position+"-disabled"),b},disable:function(a){var b=this;return b.callParent(arguments),b.addClsWithUI(b.position+"-disabled"),b},onDestroy:function(){var a=this;a.closeEl&&(a.closeEl.un("click",Ext.EventManager.preventDefault),a.closeEl=null),Ext.destroy(a.keyNav),delete a.keyNav,a.callParent(arguments)},setClosable:function(a){var b=this;a=!arguments.length||!!a,b.closable!=a&&(b.closable=a,b.card&&(b.card.closable=a),b.syncClosableUI(),b.rendered&&(b.syncClosableElements(),b.doComponentLayout(),b.ownerCt&&b.ownerCt.doLayout()))},syncClosableElements:function(){var a=this;if(a.closable)a.closeEl||(a.closeEl=a.el.createChild({tag:"a",cls:a.baseCls+"-close-btn",href:"#",title:a.closeText}).on("click",Ext.EventManager.preventDefault));else{var b=a.closeEl;b&&(b.un("click",Ext.EventManager.preventDefault),b.remove(),a.closeEl=null)}},syncClosableUI:function(){var a=this,b=[a.closableCls,a.closableCls+"-"+a.position];a.closable?a.addClsWithUI(b):a.removeClsWithUI(b)},setCard:function(a){var b=this;b.card=a,b.setText(b.title||a.title),b.setIconCls(b.iconCls||a.iconCls)},onCloseClick:function(){var a=this;if(a.fireEvent("beforeclose",a)!==!1)if(a.tabBar){if(a.tabBar.closeTab(a)===!1)return}else a.fireEvent("close",a)},fireClose:function(){this.fireEvent("close",this)},onEnterKey:function(a){var b=this;b.tabBar&&b.tabBar.onClick(a,b.el)},onDeleteKey:function(a){var b=this;b.closable&&b.onCloseClick()},activate:function(a){var b=this;b.active=!0,b.addClsWithUI([b.activeCls,b.position+"-"+b.activeCls]),a!==!0&&b.fireEvent("activate",b)},deactivate:function(a){var b=this;b.active=!1,b.removeClsWithUI([b.activeCls,b.position+"-"+b.activeCls]),a!==!0&&b.fireEvent("deactivate",b)}}),Ext.define("Ext.tab.Bar",{extend:"Ext.panel.Header",alias:"widget.tabbar",baseCls:Ext.baseCSSPrefix+"tab-bar",requires:["Ext.tab.Tab","Ext.FocusManager"],isTabBar:!0,defaultType:"tab",plain:!1,renderTpl:['<div id="{id}-body" class="{baseCls}-body <tpl if="bodyCls"> {bodyCls}</tpl> <tpl if="ui"> {baseCls}-body-{ui}<tpl for="uiCls"> {parent.baseCls}-body-{parent.ui}-{.}</tpl></tpl>"<tpl if="bodyStyle"> style="{bodyStyle}"</tpl>></div>','<div id="{id}-strip" class="{baseCls}-strip<tpl if="ui"> {baseCls}-strip-{ui}<tpl for="uiCls"> {parent.baseCls}-strip-{parent.ui}-{.}</tpl></tpl>"></div>'],initComponent:function(){var a=this,b;a.plain&&a.setUI(a.ui+"-plain"),a.addClsWithUI(a.dock),a.addEvents("change"),a.addChildEls("body","strip"),a.callParent(arguments),a.layout.align=a.orientation=="vertical"?"left":"top",a.layout.overflowHandler=Ext.create("Ext.layout.container.boxOverflow.Scroller",a.layout),a.remove(a.titleCmp),delete a.titleCmp,b=a.orientation=="vertical"?["up","down"]:["left","right"],Ext.FocusManager.subscribe(a,{keys:b}),Ext.apply(a.renderData,{bodyCls:a.bodyCls})},onAdd:function(a){a.position=this.dock,this.callParent(arguments)},onRemove:function(a){var b=this;a===b.previousTab&&(b.previousTab=null),b.items.getCount()===0&&(b.activeTab=null),b.callParent(arguments)},afterRender:function(){var a=this;a.mon(a.el,{scope:a,click:a.onClick,delegate:"."+Ext.baseCSSPrefix+"tab"}),a.callParent(arguments)},afterComponentLayout:function(){var a=this;a.callParent(arguments),a.strip.setWidth(a.el.getWidth())},onClick:function(a,b){var c=Ext.getCmp(b.id),d=this.tabPanel;b=a.getTarget(),c&&c.isDisabled&&!c.isDisabled()&&(c.closable&&b===c.closeEl.dom?c.onCloseClick():(d?d.setActiveTab(c.card):this.setActiveTab(c),c.focus()))},closeTab:function(a){var b=this,c=a.card,d=b.tabPanel,e;if(c&&c.fireEvent("beforeclose",c)===!1)return!1;a.active&&b.items.getCount()>1&&(e=b.previousTab||a.next("tab")||b.items.first(),b.setActiveTab(e),d&&d.setActiveTab(e.card)),a.fireClose(),b.remove(a),d&&c&&(c.fireEvent("close",c),d.remove(c)),e&&e.focus()},setActiveTab:function(a){if(a.disabled)return;var b=this;b.activeTab&&(b.previousTab=b.activeTab,b.activeTab.deactivate()),a.activate(),b.rendered&&(b.layout.layout(),a.el&&a.el.scrollIntoView(b.layout.getRenderTarget())),b.activeTab=a,b.fireEvent("change",b,a,a.card)}}),Ext.define("Ext.tab.Panel",{extend:"Ext.panel.Panel",alias:"widget.tabpanel",alternateClassName:["Ext.TabPanel"],requires:["Ext.layout.container.Card","Ext.tab.Bar"],tabPosition:"top",removePanelHeader:!0,plain:!1,itemCls:"x-tabpanel-child",minTabWidth:undefined,maxTabWidth:undefined,deferredRender:!0,initComponent:function(){var a=this,b=a.dockedItems||[],c=a.activeTab||0;a.layout=Ext.create("Ext.layout.container.Card",Ext.apply({owner:a,deferredRender:a.deferredRender,itemCls:a.itemCls},a.layout)),a.tabBar=Ext.create("Ext.tab.Bar",Ext.apply({},a.tabBar,{dock:a.tabPosition,plain:a.plain,border:a.border,cardLayout:a.layout,tabPanel:a})),b&&!Ext.isArray(b)&&(b=[b]),b.push(a.tabBar),a.dockedItems=b,a.addEvents("beforetabchange","tabchange"),a.callParent(arguments),a.setActiveTab(c),a.on("afterlayout",a.afterInitialLayout,a,{single:!0})},afterInitialLayout:function(){var a=this,b=a.getComponent(a.activeTab);b&&a.layout.setActiveItem(b)},setActiveTab:function(a){var b=this,c;a=b.getComponent(a);if(a){c=b.getActiveTab();if(c&&c!==a&&b.fireEvent("beforetabchange",b,a,c)===!1)return!1;b.tabBar.setActiveTab(a.tab),b.activeTab=a,b.rendered&&b.layout.setActiveItem(a),c&&c!==a&&b.fireEvent("tabchange",b,a,c)}},getActiveTab:function(){return this.activeTab},getTabBar:function(){return this.tabBar},onAdd:function(a,b){var c=this,d=a.tabConfig||{},e={xtype:"tab",card:a,disabled:a.disabled,closable:a.closable,hidden:a.hidden,tabBar:c.tabBar};a.closeText&&(e.closeText=a.closeText),d=Ext.applyIf(d,e),a.tab=c.tabBar.insert(b,d),a.on({scope:c,enable:c.onItemEnable,disable:c.onItemDisable,beforeshow:c.onItemBeforeShow,iconchange:c.onItemIconChange,titlechange:c.onItemTitleChange}),a.isPanel&&(c.removePanelHeader&&(a.preventHeader=!0,a.rendered&&a.updateHeader()),a.isPanel&&c.border&&a.setBorder(!1)),this.rendered&&c.items.getCount()===1&&c.setActiveTab(0)},onItemEnable:function(a){a.tab.enable()},onItemDisable:function(a){a.tab.disable()},onItemBeforeShow:function(a){if(a!==this.activeTab)return this.setActiveTab(a),!1},onItemIconChange:function(a,b){a.tab.setIconCls(b),this.getTabBar().doLayout()},onItemTitleChange:function(a,b){a.tab.setText(b),this.getTabBar().doLayout()},doRemove:function(a,b){var c=this,d=c.items,e=d.getCount()>1;c.destroying||!e?c.activeTab=null:a===c.activeTab&&c.setActiveTab(a.next()||d.getAt(0)),c.callParent(arguments),delete a.tab.card,delete a.tab},onRemove:function(a,b){var c=this;a.un({scope:c,enable:c.onItemEnable,disable:c.onItemDisable,beforeshow:c.onItemBeforeShow}),!c.destroying&&a.tab.ownerCt==c.tabBar&&c.tabBar.remove(a.tab)}}),Ext.define("Ext.toolbar.Spacer",{extend:"Ext.Component",alias:"widget.tbspacer",alternateClassName:"Ext.Toolbar.Spacer",baseCls:Ext.baseCSSPrefix+"toolbar-spacer",focusable:!1}),Ext.define("Ext.tree.Column",{extend:"Ext.grid.column.Column",alias:"widget.treecolumn",initComponent:function(){var a=this.renderer||this.defaultRenderer,b=this.scope||window;this.renderer=function(c,d,e,f,g,h,i){var j=[],k=Ext.String.format,l=e.getDepth(),m=Ext.baseCSSPrefix+"tree-",n=m+"elbow-",o=m+"expander",p='<img src="{1}" class="{0}" />',q='<input type="button" role="checkbox" class="{0}" {1} />',r=a.apply(b,arguments),s=e.get("href"),t=e.get("hrefTarget"),u=e.get("cls");while(e){if(!e.isRoot()||e.isRoot()&&i.rootVisible)e.getDepth()===l?(j.unshift(k(p,m+"icon "+m+"icon"+(e.get("icon")?"-inline ":e.isLeaf()?"-leaf ":"-parent ")+(e.get("iconCls")||""),e.get("icon")||Ext.BLANK_IMAGE_URL)),e.get("checked")!==null&&(j.unshift(k(q,m+"checkbox"+(e.get("checked")?" "+m+"checkbox-checked":""),e.get("checked")?'aria-checked="true"':"")),e.get("checked")&&(d.tdCls+=" "+m+"checked")),e.isLast()?e.isExpandable()?j.unshift(k(p,n+"end-plus "+o,Ext.BLANK_IMAGE_URL)):j.unshift(k(p,n+"end",Ext.BLANK_IMAGE_URL)):e.isExpandable()?j.unshift(k(p,n+"plus "+o,Ext.BLANK_IMAGE_URL)):j.unshift(k(p,m+"elbow",Ext.BLANK_IMAGE_URL))):e.isLast()||e.getDepth()===0?j.unshift(k(p,n+"empty",Ext.BLANK_IMAGE_URL)):e.getDepth()!==0&&j.unshift(k(p,n+"line",Ext.BLANK_IMAGE_URL));e=e.parentNode}return s?j.push('<a href="',s,'" target="',t,'">',r,"</a>"):j.push(r),u&&(d.tdCls+=" "+u),j.join("")},this.callParent(arguments)},defaultRenderer:function(a){return a}}),Ext.define("Ext.tree.View",{extend:"Ext.view.Table",alias:"widget.treeview",loadingCls:Ext.baseCSSPrefix+"grid-tree-loading",expandedCls:Ext.baseCSSPrefix+"grid-tree-node-expanded",expanderSelector:"."+Ext.baseCSSPrefix+"tree-expander",checkboxSelector:"."+Ext.baseCSSPrefix+"tree-checkbox",expanderIconOverCls:Ext.baseCSSPrefix+"tree-expander-over",nodeAnimWrapCls:Ext.baseCSSPrefix+"tree-animator-wrap",blockRefresh:!0,rootVisible:!0,expandDuration:250,collapseDuration:250,toggleOnDblClick:!0,initComponent:function(){var a=this;a.initialConfig.animate===undefined&&(a.animate=Ext.enableFx),a.store=Ext.create("Ext.data.NodeStore",{recursive:!0,rootVisible:a.rootVisible,listeners:{beforeexpand:a.onBeforeExpand,expand:a.onExpand,beforecollapse:a.onBeforeCollapse,collapse:a.onCollapse,scope:a}}),a.node&&a.setRootNode(a.node),a.animQueue={},a.callParent(arguments)},processUIEvent:function(a){return a.getTarget("."+this.nodeAnimWrapCls,this.el)?!1:this.callParent(arguments)},onClear:function(){this.store.removeAll()},setRootNode:function(a){var b=this;b.store.setNode(a),b.node=a,b.rootVisible||a.expand()},onRender:function(){var a=this,b;a.callParent(arguments),b=a.el,b.on({scope:a,delegate:a.expanderSelector,mouseover:a.onExpanderMouseOver,mouseout:a.onExpanderMouseOut}),b.on({scope:a,delegate:a.checkboxSelector,click:a.onCheckboxChange})},onCheckboxChange:function(a,b){var c=this,d=a.getTarget(c.getItemSelector(),c.getTargetEl());d&&c.onCheckChange(c.getRecord(d))},onCheckChange:function(a){var b=a.get("checked");Ext.isBoolean(b)&&(b=!b,a.set("checked",b),this.fireEvent("checkchange",a,b))},getChecked:function(){var a=[];return this.node.cascadeBy(function(b){b.get("checked")&&a.push(b)}),a},isItemChecked:function(a){return a.get("checked")},createAnimWrap:function(a,b){var c="",d=this.panel.headerCt,e=d.getGridColumns(),f=0,g=e.length,h,i=this.getNode(a),j,k;for(;f<g;f++)h=e[f],c+='<th style="width: '+(h.hidden?0:h.getDesiredWidth())+'px; height: 0px;"></th>';return k=Ext.get(i),j=k.insertSibling({tag:"tr",html:['<td colspan="'+d.getColumnCount()+'">','<div class="'+this.nodeAnimWrapCls+'">','<table class="'+Ext.baseCSSPrefix+'grid-table" style="width: '+d.getFullWidth()+'px;"><tbody>',c,"</tbody></table>","</div>","</td>"].join("")},"after"),{record:a,node:i,el:j,expanding:!1,collapsing:!1,animating:!1,animateEl:j.down("div"),targetEl:j.down("tbody")}},getAnimWrap:function(a){if(!this.animate)return null;while(a){if(a.animWrap)return a.animWrap;a=a.parentNode}return null},doAdd:function(a,b,c){var d=this,e=b[0],f=e.parentNode,g=d.all.elements,h=0,i=d.getAnimWrap(f),j,k,l;if(!i||!i.expanding)return d.resetScrollers(),d.callParent(arguments);f=i.record,j=i.targetEl,k=j.dom.childNodes,l=k.length-1,h=c-d.indexOf(f)-1,!l||h>=l?j.appendChild(a):Ext.fly(k[h+1]).insertSibling(a,"before",!0),Ext.Array.insert(g,c,a),i.isAnimating&&d.onExpand(f)},beginBulkUpdate:function(){this.bulkUpdate=!0,this.ownerCt.changingScrollbars=!0},endBulkUpdate:function(){var a=this,b=a.ownerCt;a.bulkUpdate=!1,a.ownerCt.changingScrollbars=!0,a.resetScrollers()},onRemove:function(a,b,c){var d=this,e=d.bulkUpdate;d.doRemove(b,c),e||d.updateIndexes(c),d.store.getCount()===0&&d.refresh(),e||d.fireEvent("itemremove",b,c)},doRemove:function(a,b){var c=this,d=a.parentNode,e=c.all,f=c.getAnimWrap(a),g=e.item(b).dom;if(!f||!f.collapsing)return c.resetScrollers(),c.callParent(arguments);f.targetEl.appendChild(g),e.removeElement(b)},onBeforeExpand:function(a,b,c){var d=this,e;if(!d.rendered||!d.animate)return;d.getNode(a)&&(e=d.getAnimWrap(a),e?e.collapsing&&e.targetEl.select(d.itemSelector).remove():(e=a.animWrap=d.createAnimWrap(a),e.animateEl.setHeight(0)),e.expanding=!0,e.collapsing=!1)},onExpand:function(a){var b=this,c=b.animQueue,d=a.getId(),e,f,g,h;b.singleExpand&&b.ensureSingleExpand(a),e=b.getAnimWrap(a);if(!e){b.resetScrollers();return}f=e.animateEl,g=e.targetEl,f.stopAnimation(),c[d]=!0,f.slideIn("t",{duration:b.expandDuration,listeners:{scope:b,lastframe:function(){e.el.insertSibling(g.query(b.itemSelector),"before"),e.el.remove(),b.resetScrollers(),delete e.record.animWrap,delete c[d]}}}),e.isAnimating=!0},resetScrollers:function(){if(!this.bulkUpdate){var a=this.panel;a.determineScrollbars(),a.invalidateScroller()}},onBeforeCollapse:function(a,b,c){var d=this,e;if(!d.rendered||!d.animate)return;d.getNode(a)&&(e=d.getAnimWrap(a),e?e.expanding&&e.targetEl.select(this.itemSelector).remove():e=a.animWrap=d.createAnimWrap(a,c),e.expanding=!1,e.collapsing=!0)},onCollapse:function(a){var b=this,c=b.animQueue,d=a.getId(),e=b.getAnimWrap(a),f,g;if(!e){b.resetScrollers();return}f=e.animateEl,g=e.targetEl,c[d]=!0,f.stopAnimation(),f.slideOut("t",{duration:b.collapseDuration,listeners:{scope:b,lastframe:function(){e.el.remove(),delete e.record.animWrap,b.resetScrollers(),delete c[d]}}}),e.isAnimating=!0},isAnimating:function(a){return!!this.animQueue[a.getId()]},collectData:function(a){var b=this.callParent(arguments),c=b.rows,d=c.length,e=0,f,g;for(;e<d;e++)f=c[e],g=a[e],g.get("qtip")&&(f.rowAttr='data-qtip="'+g.get("qtip")+'"',g.get("qtitle")&&(f.rowAttr+=' data-qtitle="'+g.get("qtitle")+'"')),g.isExpanded()&&(f.rowCls=(f.rowCls||"")+" "+this.expandedCls),g.isLoading()&&(f.rowCls=(f.rowCls||"")+" "+this.loadingCls);return b},expand:function(a,b,c,d){return a.expand(b,c,d)},collapse:function(a,b,c,d){return a.collapse(b,c,d)},toggle:function(a){this[a.isExpanded()?"collapse":"expand"](a)},onItemDblClick:function(a,b,c){this.callParent(arguments),this.toggleOnDblClick&&this.toggle(a)},onBeforeItemMouseDown:function(a,b,c,d){return d.getTarget(this.expanderSelector,b)?!1:this.callParent(arguments)},onItemClick:function(a,b,c,d){return d.getTarget(this.expanderSelector,b)?(this.toggle(a),!1):this.callParent(arguments)},onExpanderMouseOver:function(a,b){a.getTarget(this.cellSelector,10,!0).addCls(this.expanderIconOverCls)},onExpanderMouseOut:function(a,b){a.getTarget(this.cellSelector,10,!0).removeCls(this.expanderIconOverCls)},getTreeStore:function(){return this.panel.store},ensureSingleExpand:function(a){var b=a.parentNode;b&&b.eachChild(function(b){b!==a&&b.isExpanded()&&b.collapse()})}}),Ext.define("Ext.tree.Panel",{extend:"Ext.panel.Table",alias:"widget.treepanel",alternateClassName:["Ext.tree.TreePanel","Ext.TreePanel"],requires:["Ext.tree.View","Ext.selection.TreeModel","Ext.tree.Column"],viewType:"treeview",selType:"treemodel",treeCls:Ext.baseCSSPrefix+"tree-panel",deferRowRender:!1,lines:!0,useArrows:!1,singleExpand:!1,ddConfig:{enableDrag:!0,enableDrop:!0},rootVisible:!0,displayField:"text",root:null,normalCfgCopy:["displayField","root","singleExpand","useArrows","lines","rootVisible","scroll"],lockedCfgCopy:["displayField","root","singleExpand","useArrows","lines","rootVisible"],constructor:function(a){a=a||{},a.animate===undefined&&(a.animate=Ext.enableFx),this.enableAnimations=a.animate,delete a.animate,this.callParent([a])},initComponent:function(){var a=this,b=[a.treeCls];a.useArrows&&(b.push(Ext.baseCSSPrefix+"tree-arrows"),a.lines=!1),a.lines?b.push(Ext.baseCSSPrefix+"tree-lines"):a.useArrows||b.push(Ext.baseCSSPrefix+"tree-no-lines"),Ext.isString(a.store)?a.store=Ext.StoreMgr.lookup(a.store):!a.store||Ext.isObject(a.store)&&!a.store.isStore?a.store=Ext.create("Ext.data.TreeStore",Ext.apply({},a.store||{},{root:a.root,fields:a.fields,model:a.model,folderSort:a.folderSort})):a.root&&(a.store=Ext.data.StoreManager.lookup(a.store),a.store.setRootNode(a.root),a.folderSort!==undefined&&(a.store.folderSort=a.folderSort,a.store.sort())),a.viewConfig=Ext.applyIf(a.viewConfig||{},{rootVisible:a.rootVisible,animate:a.enableAnimations,singleExpand:a.singleExpand,node:a.store.getRootNode(),hideHeaders:a.hideHeaders}),a.mon(a.store,{scope:a,rootchange:a.onRootChange,clear:a.onClear}),a.relayEvents(a.store,["beforeload","load"]),a.store.on({append:a.createRelayer("itemappend"),remove:a.createRelayer("itemremove"),move:a.createRelayer("itemmove"),insert:a.createRelayer("iteminsert"),beforeappend:a.createRelayer("beforeitemappend"),beforeremove:a.createRelayer("beforeitemremove"),beforemove:a.createRelayer("beforeitemmove"),beforeinsert:a.createRelayer("beforeiteminsert"),expand:a.createRelayer("itemexpand"),collapse:a.createRelayer("itemcollapse"),beforeexpand:a.createRelayer("beforeitemexpand"),beforecollapse:a.createRelayer("beforeitemcollapse")}),a.columns||(a.initialConfig.hideHeaders===undefined&&(a.hideHeaders=!0),a.columns=[{xtype:"treecolumn",text:"Name",flex:1,dataIndex:a.displayField}]),a.cls&&b.push(a.cls),a.cls=b.join(" "),a.callParent(),a.relayEvents(a.getView(),["checkchange"]),!a.getView().rootVisible&&!a.getRootNode()&&a.setRootNode({expanded:!0})},onClear:function(){this.view.onClear()},setRootNode:function(){return this.store.setRootNode.apply(this.store,arguments)},getRootNode:function(){return this.store.getRootNode()},onRootChange:function(a){this.view.setRootNode(a)},getChecked:function(){return this.getView().getChecked()},isItemChecked:function(a){return a.get("checked")},expandAll:function(a,b){var c=this.getRootNode(),d=this.enableAnimations,e=this.getView();c&&(d||e.beginBulkUpdate(),c.expand(!0,a,b),d||e.endBulkUpdate())},collapseAll:function(a,b){var c=this.getRootNode(),d=this.enableAnimations,e=this.getView();c&&(d||e.beginBulkUpdate(),e.rootVisible?c.collapse(!0,a,b):c.collapseChildren(!0,a,b),d||e.endBulkUpdate())},expandPath:function(a,b,c,d,e){var f=this,g=f.getRootNode(),h=1,i=f.getView(),j,k;b=b||f.getRootNode().idProperty,c=c||"/";if(Ext.isEmpty(a)){Ext.callback(d,e||f,[!1,null]);return}j=a.split(c);if(g.get(b)!=j[1]){Ext.callback(d,e||f,[!1,g]);return}k=function(){if(++h===j.length){Ext.callback(d,e||f,[!0,g]);return}var a=g.findChild(b,j[h]);if(!a){Ext.callback(d,e||f,[!1,g]);return}g=a,g.expand(!1,k)},g.expand(!1,k)},selectPath:function(a,b,c,d,e){var f=this,g,h;b=b||f.getRootNode().idProperty,c=c||"/",g=a.split(c),h=g.pop(),f.expandPath(g.join(c),b,c,function(a,c){var g=!1;a&&c?(c=c.findChild(b,h),c&&(f.getSelectionModel().select(c),Ext.callback(d,e||f,[!0,c]),g=!0)):c===f.getRootNode()&&(g=!0),Ext.callback(d,e||f,[g,c])},f)}}),Ext.define("Ext.view.DragZone",{extend:"Ext.dd.DragZone",containerScroll:!1,constructor:function(a){var b=this;Ext.apply(b,a),b.ddGroup||(b.ddGroup="view-dd-zone-"+b.view.id),b.callParent([b.view.el.dom.parentNode]),b.ddel=Ext.get(document.createElement("div")),b.ddel.addCls(Ext.baseCSSPrefix+"grid-dd-wrap")},init:function(a,b,c){this.initTarget(a,b,c),this.view.mon(this.view,{itemmousedown:this.onItemMouseDown,scope:this})},onItemMouseDown:function(a,b,c,d,e){if(!this.isPreventDrag(e,b,c,d)){this.handleMouseDown(e);if(a.getSelectionModel().selectionMode=="MULTI"&&!e.ctrlKey&&a.getSelectionModel().isSelected(b))return!1}},isPreventDrag:function(a){return!1},getDragData:function(a){var b=this.view,c=a.getTarget(b.getItemSelector()),d,e,f;if(c)return d=b.getRecord(c),e=b.getSelectionModel(),f=e.getSelection(),{copy:this.view.copy||this.view.allowCopy&&a.ctrlKey,event:new Ext.EventObjectImpl(a),view:b,ddel:this.ddel,item:c,records:f,fromPosition:Ext.fly(c).getXY()}},onInitDrag:function(a,b){var c=this,d=c.dragData,e=d.view,f=e.getSelectionModel(),g=e.getRecord(d.item),h=d.event;return(!f.isSelected(g)||h.hasModifier())&&f.selectWithEvent(g,h,!0),d.records=f.getSelection(),c.ddel.update(c.getDragText()),c.proxy.update(c.ddel.dom),c.onStartDrag(a,b),!0},getDragText:function(){var a=this.dragData.records.length;return Ext.String.format(this.dragText,a,a==1?"":"s")},getRepairXY:function(a,b){return b?b.fromPosition:!1}}),Ext.define("Ext.tree.ViewDragZone",{extend:"Ext.view.DragZone",isPreventDrag:function(a,b){return b.get("allowDrag")===!1||!!a.getTarget(this.view.expanderSelector)},afterRepair:function(){var a=this,b=a.view,c=b.selectedItemCls,d=a.dragData.records,e=Ext.fly;Ext.enableFx&&a.repairHighlight&&Ext.Array.forEach(d,function(d){var f=b.getNode(d);e(f.firstChild).highlight(a.repairHighlightColor,{listeners:{beforeanimate:function(){b.isSelected(f)&&e(f).removeCls(c)},afteranimate:function(){b.isSelected(f)&&e(f).addCls(c)}}})}),a.dragging=!1}}),Ext.define("Ext.tree.ViewDropZone",{extend:"Ext.view.DropZone",allowParentInserts:!1,allowContainerDrops:!1,appendOnly:!1,expandDelay:500,indicatorCls:"x-tree-ddindicator",expandNode:function(a){var b=this.view;!a.isLeaf()&&!a.isExpanded()&&(b.expand(a),this.expandProcId=!1)},queueExpand:function(a){this.expandProcId=Ext.Function.defer(this.expandNode,this.expandDelay,this,[a])},cancelExpand:function(){this.expandProcId&&(clearTimeout(this.expandProcId),this.expandProcId=!1)},getPosition:function(a,b){var c=this.view,d=c.getRecord(b),e=a.getPageY(),f=d.isLeaf(),g=!1,h=Ext.fly(b).getRegion(),i;return d.isRoot()?"append":this.appendOnly?f?!1:"append":(this.allowParentInsert||(g=d.hasChildNodes()&&d.isExpanded()),i=(h.bottom-h.top)/(f?2:3),e>=h.top&&e<h.top+i?"before":!g&&(f||e>=h.bottom-i&&e<=h.bottom)?"after":"append")},isValidDropPoint:function(a,b,c,d,e){if(!a||!e.item)return!1;var f=this.view,g=f.getRecord(a),h=e.records,i=h.length,j=h.length,k,l;if(!(g&&b&&i))return!1;for(k=0;k<j;k++){l=h[k];if(l.isNode&&l.contains(g))return!1}return b==="append"&&g.get("allowDrop")===!1?!1:b!="append"&&g.parentNode.get("allowDrop")===!1?!1:Ext.Array.contains(h,g)?!1:!0},onNodeOver:function(a,b,c,d){var e=this.getPosition(c,a),f=this.dropNotAllowed,g=this.view,h=g.getRecord(a),i=this.getIndicator(),j=0,k=0;return this.cancelExpand(),e=="append"&&!this.expandProcId&&!Ext.Array.contains(d.records,h)&&!h.isLeaf()&&!h.isExpanded()&&this.queueExpand(h),this.isValidDropPoint(a,e,b,c,d)?(this.valid=!0,this.currentPosition=e,this.overRecord=h,i.setWidth(Ext.fly(a).getWidth()),k=Ext.fly(a).getY()-Ext.fly(g.el).getY()-1,e=="before"?(f=h.isFirst()?Ext.baseCSSPrefix+"tree-drop-ok-above":Ext.baseCSSPrefix+"tree-drop-ok-between",i.showAt(0,k),b.proxy.show()):e=="after"?(f=h.isLast()?Ext.baseCSSPrefix+"tree-drop-ok-below":Ext.baseCSSPrefix+"tree-drop-ok-between",k+=Ext.fly(a).getHeight(),i.showAt(0,k),b.proxy.show()):(f=Ext.baseCSSPrefix+"tree-drop-ok-append",i.hide())):this.valid=!1,this.currentCls=f,f},onContainerOver:function(a,b,c){return b.getTarget("."+this.indicatorCls)?this.currentCls:this.dropNotAllowed},notifyOut:function(){this.callParent(arguments),this.cancelExpand()},handleNodeDrop:function(a,b,c){var d=this,e=d.view,f=b.parentNode,g=e.getStore(),h=[],i,j,k,l,m,n,o,p;if(a.copy){i=a.records,a.records=[];for(j=0,k=i.length;j<k;j++)a.records.push(Ext.apply({},i[j].data))}d.cancelExpand(),c=="before"?(l=f.insertBefore,m=[null,b],b=f):c=="after"?(b.nextSibling?(l=f.insertBefore,m=[null,b.nextSibling]):(l=f.appendChild,m=[null]),b=f):(b.isExpanded()||(n=!0),l=b.appendChild,m=[null]),o=function(){var c;for(j=0,k=a.records.length;j<k;j++)m[0]=a.records[j],c=l.apply(b,m),Ext.enableFx&&d.dropHighlight&&h.push(e.getNode(c));Ext.enableFx&&d.dropHighlight&&Ext.Array.forEach(h,function(a){a&&Ext.fly(a.firstChild?a.firstChild:a).highlight(d.dropHighlightColor)})},n?b.expand(!1,o):o()}}),Ext.define("Ext.tree.plugin.TreeViewDragDrop",{extend:"Ext.AbstractPlugin",alias:"plugin.treeviewdragdrop",uses:["Ext.tree.ViewDragZone","Ext.tree.ViewDropZone"],dragText:"{0} selected node{1}",allowParentInserts:!1,allowContainerDrops:!1,appendOnly:!1,ddGroup:"TreeDD",expandDelay:1e3,enableDrop:!0,enableDrag:!0,nodeHighlightColor:"c3daf9",nodeHighlightOnDrop:Ext.enableFx,nodeHighlightOnRepair:Ext.enableFx,init:function(a){a.on("render",this.onViewRender,this,{single:!0})},destroy:function(){Ext.destroy(this.dragZone,this.dropZone)},onViewRender:function(a){var b=this;b.enableDrag&&(b.dragZone=Ext.create("Ext.tree.ViewDragZone",{view:a,ddGroup:b.dragGroup||b.ddGroup,dragText:b.dragText,repairHighlightColor:b.nodeHighlightColor,repairHighlight:b.nodeHighlightOnRepair})),b.enableDrop&&(b.dropZone=Ext.create("Ext.tree.ViewDropZone",{view:a,ddGroup:b.dropGroup||b.ddGroup,allowContainerDrops:b.allowContainerDrops,appendOnly:b.appendOnly,allowParentInserts:b.allowParentInserts,expandDelay:b.expandDelay,dropHighlightColor:b.nodeHighlightColor,dropHighlight:b.nodeHighlightOnDrop}))}}),Ext.define("Ext.util.Cookies",{singleton:!0,set:function(a,b){var c=arguments,d=arguments.length,e=d>2?c[2]:null,f=d>3?c[3]:"/",g=d>4?c[4]:null,h=d>5?c[5]:!1;document.cookie=a+"="+escape(b)+(e===null?"":"; expires="+e.toGMTString())+(f===null?"":"; path="+f)+(g===null?"":"; domain="+g)+(h===!0?"; secure":"")},get:function(a){var b=a+"=",c=b.length,d=document.cookie.length,e=0,f=0;while(e<d){f=e+c;if(document.cookie.substring(e,f)==b)return this.getCookieVal(f);e=document.cookie.indexOf(" ",e)+1;if(e===0)break}return null},clear:function(a,b){this.get(a)&&(b=b||"/",document.cookie=a+"=; expires=Thu, 01-Jan-70 00:00:01 GMT; path="+b)},getCookieVal:function(a){var b=document.cookie.indexOf(";",a);return b==-1&&(b=document.cookie.length),unescape(document.cookie.substring(a,b))}}),Ext.define("Ext.util.CSS",function(){var a=null,b=document,c=/(-[a-z])/gi,d=function(a,b){return b.charAt(1).toUpperCase()};return{singleton:!0,constructor:function(){this.rules={},this.initialized=!1},createStyleSheet:function(a,c){var d,e=b.getElementsByTagName("head")[0],f=b.createElement("style");f.setAttribute("type","text/css"),c&&f.setAttribute("id",c);if(Ext.isIE)e.appendChild(f),d=f.styleSheet,d.cssText=a;else{try{f.appendChild(b.createTextNode(a))}catch(g){f.cssText=a}e.appendChild(f),d=f.styleSheet?f.styleSheet:f.sheet||b.styleSheets[b.styleSheets.length-1]}return this.cacheStyleSheet(d),d},removeStyleSheet:function(a){var b=document.getElementById(a);b&&b.parentNode.removeChild(b)},swapStyleSheet:function(a,b){var c=document;this.removeStyleSheet(a);var d=c.createElement("link");d.setAttribute("rel","stylesheet"),d.setAttribute("type","text/css"),d.setAttribute("id",a),d.setAttribute("href",b),c.getElementsByTagName("head")[0].appendChild(d)},refreshCache:function(){return this.getRules(!0)},cacheStyleSheet:function(b){a||(a={});try{var c=b.cssRules||b.rules,d,e=c.length-1,f,g;for(;e>=0;--e){d=c[e].selectorText;if(d){d=d.split(","),g=d.length;for(f=0;f<g;f++)a[Ext.String.trim(d[f]).toLowerCase()]=c[e]}}}catch(h){}},getRules:function(c){if(a===null||c){a={};var d=b.styleSheets,e=0,f=d.length;for(;e<f;e++)try{d[e].disabled||this.cacheStyleSheet(d[e])}catch(g){}}return a},getRule:function(a,b){var c=this.getRules(b);if(!Ext.isArray(a))return c[a.toLowerCase()];for(var d=0;d<a.length;d++)if(c[a[d]])return c[a[d].toLowerCase()];return null},updateRule:function(a,b,e){if(!Ext.isArray(a)){var f=this.getRule(a);if(f)return f.style[b.replace(c,d)]=e,!0}else for(var g=0;g<a.length;g++)if(this.updateRule(a[g],b,e))return!0;return!1}}}()),Ext.define("Ext.util.History",{singleton:!0,alternateClassName:"Ext.History",mixins:{observable:"Ext.util.Observable"},constructor:function(){var a=this;a.oldIEMode=Ext.isIE6||Ext.isIE7||!Ext.isStrict&&Ext.isIE8,a.iframe=null,a.hiddenField=null,a.ready=!1,a.currentToken=null},getHash:function(){var a=window.location.href,b=a.indexOf("#");return b>=0?a.substr(b+1):null},doSave:function(){this.hiddenField.value=this.currentToken},handleStateChange:function(a){this.currentToken=a,this.fireEvent("change",a)},updateIFrame:function(a){var b='<html><body><div id="state">'+Ext.util.Format.htmlEncode(a)+"</div></body></html>";try{var c=this.iframe.contentWindow.document;return c.open(),c.write(b),c.close(),!0}catch(d){return!1}},checkIFrame:function(){var a=this,b=a.iframe.contentWindow;if(!b||!b.document){Ext.Function.defer(this.checkIFrame,10,this);return}var c=b.document,d=c.getElementById("state"),e=d?d.innerText:null,f=a.getHash();Ext.TaskManager.start({run:function(){var c=b.document,d=c.getElementById("state"),h=d?d.innerText:null,i=a.getHash();h!==e?(e=h,a.handleStateChange(h),window.top.location.hash=h,f=h,a.doSave()):i!==f&&(f=i,a.updateIFrame(i))},interval:50,scope:a}),a.ready=!0,a.fireEvent("ready",a)},startUp:function(){var a=this;a.currentToken=a.hiddenField.value||this.getHash();if(a.oldIEMode)a.checkIFrame();else{var b=a.getHash();Ext.TaskManager.start({run:function(){var c=a.getHash();c!==b&&(b=c,a.handleStateChange(b),a.doSave())},interval:50,scope:a}),a.ready=!0,a.fireEvent("ready",a)}},fieldId:Ext.baseCSSPrefix+"history-field",iframeId:Ext.baseCSSPrefix+"history-frame",init:function(a,b){var c=this;if(c.ready){Ext.callback(a,b,[c]);return}if(!Ext.isReady){Ext.onReady(function(){c.init(a,b)});return}c.hiddenField=Ext.getDom(c.fieldId),c.oldIEMode&&(c.iframe=Ext.getDom(c.iframeId)),c.addEvents("ready","change"),a&&c.on("ready",a,b,{single:!0}),c.startUp()},add:function(a,b){var c=this;return b!==!1&&c.getToken()===a?!0:c.oldIEMode?c.updateIFrame(a):(window.top.location.hash=a,!0)},back:function(){window.history.go(-1)},forward:function(){window.history.go(1)},getToken:function(){return this.ready?this.currentToken:this.getHash()}}),Ext.define("Ext.view.TableChunker",{singleton:!0,requires:["Ext.XTemplate"],metaTableTpl:["{[this.openTableWrap()]}",'<table class="'+Ext.baseCSSPrefix+"grid-table "+Ext.baseCSSPrefix+'grid-table-resizer" border="0" cellspacing="0" cellpadding="0" {[this.embedFullWidth()]}>',"<tbody>",'<tr class="'+Ext.baseCSSPrefix+'grid-header-row">','<tpl for="columns">','<th class="'+Ext.baseCSSPrefix+'grid-col-resizer-{id}" style="width: {width}px; height: 0px;"></th>',"</tpl>","</tr>","{[this.openRows()]}","{row}",'<tpl for="features">',"{[this.embedFeature(values, parent, xindex, xcount)]}","</tpl>","{[this.closeRows()]}","</tbody>","</table>","{[this.closeTableWrap()]}"],constructor:function(){Ext.XTemplate.prototype.recurse=function(a,b){return this.apply(b?a[b]:a)}},embedFeature:function(a,b,c,d){var e="";return a.disabled||(e=a.getFeatureTpl(a,b,c,d)),e},embedFullWidth:function(){return'style="width: {fullWidth}px;"'},openRows:function(){return'<tpl for="rows">'},closeRows:function(){return"</tpl>"},metaRowTpl:['<tr class="'+Ext.baseCSSPrefix+'grid-row {addlSelector} {[this.embedRowCls()]}" {[this.embedRowAttr()]}>','<tpl for="columns">','<td class="{cls} '+Ext.baseCSSPrefix+"grid-cell "+Ext.baseCSSPrefix+'grid-cell-{columnId} {{id}-modified} {{id}-tdCls} {[this.firstOrLastCls(xindex, xcount)]}" {{id}-tdAttr}><div unselectable="on" class="'+Ext.baseCSSPrefix+"grid-cell-inner "+Ext.baseCSSPrefix+'unselectable" style="{{id}-style}; text-align: {align};">{{id}}</div></td>',"</tpl>","</tr>"],firstOrLastCls:function(a,b){var c="";return a===1?c=Ext.baseCSSPrefix+"grid-cell-first":a===b&&(c=Ext.baseCSSPrefix+"grid-cell-last"),c},embedRowCls:function(){return"{rowCls}"},embedRowAttr:function(){return"{rowAttr}"},openTableWrap:function(){return""},closeTableWrap:function(){return""},getTableTpl:function(a,b){var c,d={openRows:this.openRows,closeRows:this.closeRows,embedFeature:this.embedFeature,embedFullWidth:this.embedFullWidth,openTableWrap:this.openTableWrap,closeTableWrap:this.closeTableWrap},e={},f=a.features||[],g=f.length,h=0,i={embedRowCls:this.embedRowCls,embedRowAttr:this.embedRowAttr,firstOrLastCls:this.firstOrLastCls},j=Array.prototype.slice.call(this.metaRowTpl,0),k;for(;h<g;h++)f[h].disabled||(f[h].mutateMetaRowTpl(j),Ext.apply(i,f[h].getMetaRowTplFragments()),Ext.apply(e,f[h].getFragmentTpl()),Ext.apply(d,f[h].getTableFragments()));return j=Ext.create("Ext.XTemplate",j.join(""),i),a.row=j.applyTemplate(a),k=Ext.create("Ext.XTemplate",this.metaTableTpl.join(""),d),c=k.applyTemplate(a),b||(c=Ext.create("Ext.XTemplate",c,e)),c}});
(function(a,b){function c(a){return D.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function d(a){if(!ca[a]){var b=D("<"+a+">").appendTo("body"),c=b.css("display");b.remove();if(c==="none"||c==="")c="block";ca[a]=c}return ca[a]}function e(a,b){var c={};return D.each(ce.concat.apply([],ce.slice(0,b)),function(){c[this]=a}),c}function f(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function g(){try{return new a.XMLHttpRequest}catch(b){}}function h(){D(a).unload(function(){for(var a in b$)b$[a](0,1)})}function i(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},f,g,h=d.length,i,j=d[0],k,l,m,n,o;for(f=1;f<h;f++){if(f===1)for(g in a.converters)typeof g=="string"&&(e[g.toLowerCase()]=a.converters[g]);k=j,j=d[f];if(j==="*")j=k;else if(k!=="*"&&k!==j){l=k+" "+j,m=e[l]||e["* "+j];if(!m){o=b;for(n in e){i=n.split(" ");if(i[0]===k||i[0]==="*"){o=e[i[1]+" "+j];if(o){n=e[n],n===!0?m=o:o===!0&&(m=n);break}}}}!m&&!o&&D.error("No conversion from "+l.replace(" "," to ")),m!==!0&&(c=m?m(c):o(n(c)))}}return c}function j(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j)return j!==f[0]&&f.unshift(j),d[j]}function k(a,b,c,d){if(D.isArray(b)&&b.length)D.each(b,function(b,e){c||bB.test(a)?d(a,e):k(a+"["+(typeof e=="object"||D.isArray(e)?b:"")+"]",e,c,d)});else if(c||b==null||typeof b!="object")d(a,b);else if(D.isArray(b)||D.isEmptyObject(b))d(a,"");else for(var e in b)k(a+"["+e+"]",b[e],c,d)}function l(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bS,m;for(;i<j&&(k||!m);i++)m=h[i](c,d,e),typeof m=="string"&&(!k||g[m]?m=b:(c.dataTypes.unshift(m),m=l(a,c,d,e,m,g)));return(k||!m)&&!g["*"]&&(m=l(a,c,d,e,"*",g)),m}function m(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(D.isFunction(c)){var d=b.toLowerCase().split(bM),e=0,f=d.length,g,h,i;for(;e<f;e++)g=d[e],i=/^\+/.test(g),i&&(g=g.substr(1)||"*"),h=a[g]=a[g]||[],h[i?"unshift":"push"](c)}}}function n(a,b,c){var d=b==="width"?bu:bv,e=b==="width"?a.offsetWidth:a.offsetHeight;return c==="border"?e:(D.each(d,function(){c||(e-=parseFloat(D.css(a,"padding"+this))||0),c==="margin"?e+=parseFloat(D.css(a,"margin"+this))||0:e-=parseFloat(D.css(a,"border"+this+"Width"))||0}),e)}function o(a,b){b.src?D.ajax({url:b.src,async:!1,dataType:"script"}):D.globalEval(b.text||b.textContent||b.innerHTML||""),b.parentNode&&b.parentNode.removeChild(b)}function p(a){return"getElementsByTagName"in a?a.getElementsByTagName("*"):"querySelectorAll"in a?a.querySelectorAll("*"):[]}function q(a,b){if(b.nodeType===1){var c=b.nodeName.toLowerCase();b.clearAttributes(),b.mergeAttributes(a);if(c==="object")b.outerHTML=a.outerHTML;else if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option")b.selected=a.defaultSelected;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}else a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value);b.removeAttribute(D.expando)}}function r(a,b){if(b.nodeType===1&&D.hasData(a)){var c=D.expando,d=D.data(a),e=D.data(b,d);if(d=d[c]){var f=d.events;e=e[c]=D.extend({},d);if(f){delete e.handle,e.events={};for(var g in f)for(var h=0,i=f[g].length;h<i;h++)D.event.add(b,g+(f[g][h].namespace?".":"")+f[g][h].namespace,f[g][h],f[g][h].data)}}}}function s(a,b){return D.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function t(a,b,c){if(D.isFunction(b))return D.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return D.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=D.grep(a,function(a){return a.nodeType===1});if(ba.test(b))return D.filter(b,d,!c);b=D.filter(b,d)}return D.grep(a,function(a,d){return D.inArray(a,b)>=0===c})}function u(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function v(a,b){return(a&&a!=="*"?a+".":"")+b.replace(P,"`").replace(Q,"&")}function w(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o=[],p=[],q=D._data(this,"events");if(a.liveFired!==this&&q&&q.live&&!a.target.disabled&&(!a.button||a.type!=="click")){a.namespace&&(m=new RegExp("(^|\\.)"+a.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")),a.liveFired=this;var r=q.live.slice(0);for(h=0;h<r.length;h++)f=r[h],f.origType.replace(N,"")===a.type?p.push(f.selector):r.splice(h--,1);e=D(a.target).closest(p,a.currentTarget);for(i=0,j=e.length;i<j;i++){l=e[i];for(h=0;h<r.length;h++){f=r[h];if(l.selector===f.selector&&(!m||m.test(f.namespace))&&!l.elem.disabled){g=l.elem,d=null;if(f.preType==="mouseenter"||f.preType==="mouseleave")a.type=f.preType,d=D(a.relatedTarget).closest(f.selector)[0];(!d||d!==g)&&o.push({elem:g,handleObj:f,level:l.level})}}}for(i=0,j=o.length;i<j;i++){e=o[i];if(c&&e.level>c)break;a.currentTarget=e.elem,a.data=e.handleObj.data,a.handleObj=e.handleObj,n=e.handleObj.origHandler.apply(e.elem,arguments);if(n===!1||a.isPropagationStopped()){c=e.level,n===!1&&(b=!1);if(a.isImmediatePropagationStopped())break}}return b}}function x(a,c,d){var e=D.extend({},d[0]);e.type=a,e.originalEvent={},e.liveFired=b,D.event.handle.call(c,e),e.isDefaultPrevented()&&d[0].preventDefault()}function y(){return!0}function z(){return!1}function A(a){for(var b in a)if(b!=="toJSON")return!1;return!0}function B(a,c,d){if(d===b&&a.nodeType===1){d=a.getAttribute("data-"+c);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:D.isNaN(d)?E.test(d)?D.parseJSON(d):d:parseFloat(d)}catch(e){}D.data(a,c,d)}else d=b}return d}var C=a.document,D=function(){function c(){if(!d.isReady){try{C.documentElement.doScroll("left")}catch(a){setTimeout(c,1);return}d.ready()}}var d=function(a,b){return new d.fn.init(a,b,g)},e=a.jQuery,f=a.$,g,h=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]+)$)/,i=/\S/,j=/^\s+/,k=/\s+$/,l=/\d/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=navigator.userAgent,w,x=!1,y,z="then done fail isResolved isRejected promise".split(" "),A,B=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};return d.fn=d.prototype={constructor:d,init:function(a,c,e){var f,g,i,j;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(a==="body"&&!c&&C.body)return this.context=C,this[0]=C.body,this.selector="body",this.length=1,this;if(typeof a=="string"){f=h.exec(a);if(!f||!f[1]&&c)return!c||c.jquery?(c||e).find(a):this.constructor(c).find(a);if(f[1])return c=c instanceof d?c[0]:c,j=c?c.ownerDocument||c:C,i=m.exec(a),i?d.isPlainObject(c)?(a=[C.createElement(i[1])],d.fn.attr.call(a,c,!0)):a=[j.createElement(i[1])]:(i=d.buildFragment([f[1]],[j]),a=(i.cacheable?d.clone(i.fragment):i.fragment).childNodes),d.merge(this,a);g=C.getElementById(f[2]);if(g&&g.parentNode){if(g.id!==f[2])return e.find(a);this.length=1,this[0]=g}return this.context=C,this.selector=a,this}return d.isFunction(a)?e.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),d.makeArray(a,this))},selector:"",jquery:"1.5.1",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var e=this.constructor();return d.isArray(a)?E.apply(e,a):d.merge(e,a),e.prevObject=this,e.context=this.context,b==="find"?e.selector=this.selector+(this.selector?" ":"")+c:b&&(e.selector=this.selector+"."+b+"("+c+")"),e},each:function(a,b){return d.each(this,a,b)},ready:function(a){return d.bindReady(),y.done(a),this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(d.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},d.fn.init.prototype=d.fn,d.extend=d.fn.extend=function(){var a,c,e,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!d.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){e=i[c],f=a[c];if(i===f)continue;l&&f&&(d.isPlainObject(f)||(g=d.isArray(f)))?(g?(g=!1,h=e&&d.isArray(e)?e:[]):h=e&&d.isPlainObject(e)?e:{},i[c]=d.extend(l,h,f)):f!==b&&(i[c]=f)}return i},d.extend({noConflict:function(b){return a.$=f,b&&(a.jQuery=e),d},isReady:!1,readyWait:1,ready:function(a){a===!0&&d.readyWait--;if(!d.readyWait||a!==!0&&!d.isReady){if(!C.body)return setTimeout(d.ready,1);d.isReady=!0;if(a!==!0&&--d.readyWait>0)return;y.resolveWith(C,[d]),d.fn.trigger&&d(C).trigger("ready").unbind("ready")}},bindReady:function(){if(!x){x=!0;if(C.readyState==="complete")return setTimeout(d.ready,1);if(C.addEventListener)C.addEventListener("DOMContentLoaded",A,!1),a.addEventListener("load",d.ready,!1);else if(C.attachEvent){C.attachEvent("onreadystatechange",A),a.attachEvent("onload",d.ready);var b=!1;try{b=a.frameElement==null}catch(e){}C.documentElement.doScroll&&b&&c()}}},isFunction:function(a){return d.type(a)==="function"},isArray:Array.isArray||function(a){return d.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval"in a},isNaN:function(a){return a==null||!l.test(a)||isNaN(a)},type:function(a){return a==null?String(a):I[B.call(a)]||"object"},isPlainObject:function(a){if(!a||d.type(a)!=="object"||a.nodeType||d.isWindow(a))return!1;if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf"))return!1;var c;for(c in a);return c===b||D.call(a,c)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw a},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=d.trim(b);if(n.test(b.replace(o,"@").replace(p,"]").replace(q,"")))return a.JSON&&a.JSON.parse?a.JSON.parse(b):(new Function("return "+b))();d.error("Invalid JSON: "+b)},parseXML:function(b,c,e){return a.DOMParser?(e=new DOMParser,c=e.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b)),e=c.documentElement,(!e||!e.nodeName||e.nodeName==="parsererror")&&d.error("Invalid XML: "+b),c},noop:function(){},globalEval:function(a){if(a&&i.test(a)){var b=C.head||C.getElementsByTagName("head")[0]||C.documentElement,c=C.createElement("script");d.support.scriptEval()?c.appendChild(C.createTextNode(a)):c.text=a,b.insertBefore(c,b.firstChild),b.removeChild(c)}},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,e){var f,g=0,h=a.length,i=h===b||d.isFunction(a);if(e){if(i){for(f in a)if(c.apply(a[f],e)===!1)break}else for(;g<h;)if(c.apply(a[g++],e)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(var j=a[0];g<h&&c.call(j,g,j)!==!1;j=a[++g]);return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":(a+"").replace(j,"").replace(k,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var e=d.type(a);a.length==null||e==="string"||e==="function"||e==="regexp"||d.isWindow(a)?E.call(c,a):d.merge(c,a)}return c},inArray:function(a,b){if(b.indexOf)return b.indexOf(a);for(var c=0,d=b.length;c<d;c++)if(b[c]===a)return c;return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];return a.length=d,a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,b,c){var d=[],e;for(var f=0,g=a.length;f<g;f++)e=b(a[f],f,c),e!=null&&(d[d.length]=e);return d.concat.apply([],d)},guid:1,proxy:function(a,c,e){return arguments.length===2&&(typeof c=="string"?(e=a,a=e[c],c=b):c&&!d.isFunction(c)&&(e=c,c=b)),!c&&a&&(c=function(){return a.apply(e||this,arguments)}),a&&(c.guid=a.guid=a.guid||c.guid||d.guid++),c},access:function(a,c,e,f,g,h){var i=a.length;if(typeof c=="object"){for(var j in c)d.access(a,j,c[j],f,g,e);return a}if(e!==b){f=!h&&f&&d.isFunction(e);for(var k=0;k<i;k++)g(a[k],c,f?e.call(a[k],k,g(a[k],c)):e,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},_Deferred:function(){var a=[],b,c,e,f={done:function(){if(!e){var c=arguments,g,h,i,j,k;b&&(k=b,b=0);for(g=0,h=c.length;g<h;g++)i=c[g],j=d.type(i),j==="array"?f.done.apply(f,i):j==="function"&&a.push(i);k&&f.resolveWith(k[0],k[1])}return this},resolveWith:function(d,f){if(!e&&!b&&!c){c=1;try{while(a[0])a.shift().apply(d,f)}catch(g){throw g}finally{b=[d,f],c=0}}return this},resolve:function(){return f.resolveWith(d.isFunction(this.promise)?this.promise():this,arguments),this},isResolved:function(){return c||b},cancel:function(){return e=1,a=[],this}};return f},Deferred:function(a){var b=d._Deferred(),c=d._Deferred(),e;return d.extend(b,{then:function(a,c){return b.done(a).fail(c),this},fail:c.done,rejectWith:c.resolveWith,reject:c.resolve,isRejected:c.isResolved,promise:function(a){if(a==null){if(e)return e;e=a={}}var c=z.length;while(c--)a[z[c]]=b[z[c]];return a}}),b.done(c.cancel).fail(b.cancel),delete b.cancel,a&&a.call(b,b),b},when:function(a){var b=arguments.length,c=b<=1&&a&&d.isFunction(a.promise)?a:d.Deferred(),e=c.promise();if(b>1){var f=F.call(arguments,0),g=b,h=function(a){return function(b){f[a]=arguments.length>1?F.call(arguments,0):b,--g||c.resolveWith(e,f)}};while(b--)a=f[b],a&&d.isFunction(a.promise)?a.promise().then(h(b),c.reject):--g;g||c.resolveWith(e,f)}else c!==a&&c.resolve(a);return e},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}d.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.subclass=this.subclass,a.fn.init=function c(c,e){return e&&e instanceof d&&!(e instanceof a)&&(e=a(e)),d.fn.init.call(this,c,e,b)},a.fn.init.prototype=a.fn;var b=a(C);return a},browser:{}}),y=d._Deferred(),d.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),w=d.uaMatch(v),w.browser&&(d.browser[w.browser]=!0,d.browser.version=w.version),d.browser.webkit&&(d.browser.safari=!0),H&&(d.inArray=function(a,b){return H.call(b,a)}),i.test(" ")&&(j=/^[\s\xA0]+/,k=/[\s\xA0]+$/),g=d(C),C.addEventListener?A=function(){C.removeEventListener("DOMContentLoaded",A,!1),d.ready()}:C.attachEvent&&(A=function(){C.readyState==="complete"&&(C.detachEvent("onreadystatechange",A),d.ready())}),d}();(function(){D.support={};var b=C.createElement("div");b.style.display="none",b.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var c=b.getElementsByTagName("*"),d=b.getElementsByTagName("a")[0],e=C.createElement("select"),f=e.appendChild(C.createElement("option")),g=b.getElementsByTagName("input")[0];if(c&&c.length&&d){D.support={leadingWhitespace:b.firstChild.nodeType===3,tbody:!b.getElementsByTagName("tbody").length,htmlSerialize:!!b.getElementsByTagName("link").length,style:/red/.test(d.getAttribute("style")),hrefNormalized:d.getAttribute("href")==="/a",opacity:/^0.55$/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:g.value==="on",optSelected:f.selected,deleteExpando:!0,optDisabled:!1,checkClone:!1,noCloneEvent:!0,noCloneChecked:!0,boxModel:null,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableHiddenOffsets:!0},g.checked=!0,D.support.noCloneChecked=g.cloneNode(!0).checked,e.disabled=!0,D.support.optDisabled=!f.disabled;var h=null;D.support.scriptEval=function(){if(h===null){var b=C.documentElement,c=C.createElement("script"),d="script"+D.now();try{c.appendChild(C.createTextNode("window."+d+"=1;"))}catch(e){}b.insertBefore(c,b.firstChild),a[d]?(h=!0,delete a[d]):h=!1,b.removeChild(c),b=c=d=null}return h};try{delete b.test}catch(i){D.support.deleteExpando=!1}!b.addEventListener&&b.attachEvent&&b.fireEvent&&(b.attachEvent("onclick",function l(){D.support.noCloneEvent=!1,b.detachEvent("onclick",l)}),b.cloneNode(!0).fireEvent("onclick")),b=C.createElement("div"),b.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";var j=C.createDocumentFragment();j.appendChild(b.firstChild),D.support.checkClone=j.cloneNode(!0).cloneNode(!0).lastChild.checked,D(function(){var a=C.createElement("div"),b=C.getElementsByTagName("body")[0];if(b){a.style.width=a.style.paddingLeft="1px",b.appendChild(a),D.boxModel=D.support.boxModel=a.offsetWidth===2,"zoom"in a.style&&(a.style.display="inline",a.style.zoom=1,D.support.inlineBlockNeedsLayout=a.offsetWidth===2,a.style.display="",a.innerHTML="<div style='width:4px;'></div>",D.support.shrinkWrapBlocks=a.offsetWidth!==2),a.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";var c=a.getElementsByTagName("td");D.support.reliableHiddenOffsets=c[0].offsetHeight===0,c[0].style.display="",c[1].style.display="none",D.support.reliableHiddenOffsets=D.support.reliableHiddenOffsets&&c[0].offsetHeight===0,a.innerHTML="",b.removeChild(a).style.display="none",a=c=null}});var k=function(a){var b=C.createElement("div");a="on"+a;if(!b.attachEvent)return!0;var c=a in b;return c||(b.setAttribute(a,"return;"),c=typeof b[a]=="function"),b=null,c};D.support.submitBubbles=k("submit"),D.support.changeBubbles=k("change"),b=c=d=null}})();var E=/^(?:\{.*\}|\[.*\])$/;D.extend({cache:{},uuid:0,expando:"jQuery"+(D.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?D.cache[a[D.expando]]:a[D.expando],!!a&&!A(a)},data:function(a,c,d,e){if(D.acceptData(a)){var f=D.expando,g=typeof c=="string",h,i=a.nodeType,j=i?D.cache:a,k=i?a[D.expando]:a[D.expando]&&D.expando;if((!k||e&&k&&!j[k][f])&&g&&d===b)return;k||(i?a[D.expando]=k=++D.uuid:k=D.expando),j[k]||(j[k]={},i||(j[k].toJSON=D.noop));if(typeof c=="object"||typeof c=="function")e?j[k][f]=D.extend(j[k][f],c):j[k]=D.extend(j[k],c);return h=j[k],e&&(h[f]||(h[f]={}),h=h[f]),d!==b&&(h[c]=d),c==="events"&&!h[c]?h[f]&&h[f].events:g?h[c]:h}},removeData:function(b,c,d){if(D.acceptData(b)){var e=D.expando,f=b.nodeType,g=f?D.cache:b,h=f?b[D.expando]:D.expando;if(!g[h])return;if(c){var i=d?g[h][e]:g[h];if(i){delete i[c];if(!A(i))return}}if(d){delete g[h][e];if(!A(g[h]))return}var j=g[h][e];D.support.deleteExpando||g!=a?delete g[h]:g[h]=null,j?(g[h]={},f||(g[h].toJSON=D.noop),g[h][e]=j):f&&(D.support.deleteExpando?delete b[D.expando]:b.removeAttribute?b.removeAttribute(D.expando):b[D.expando]=null)}},_data:function(a,b,c){return D.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=D.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),D.fn.extend({data:function(a,c){var d=null;if(typeof a=="undefined"){if(this.length){d=D.data(this[0]);if(this[0].nodeType===1){var e=this[0].attributes,f;for(var g=0,h=e.length;g<h;g++)f=e[g].name,f.indexOf("data-")===0&&(f=f.substr(5),B(this[0],f,d[f]))}}return d}if(typeof a=="object")return this.each(function(){D.data(this,a)});var i=a.split(".");return i[1]=i[1]?"."+i[1]:"",c===b?(d=this.triggerHandler("getData"+i[1]+"!",[i[0]]),d===b&&this.length&&(d=D.data(this[0],a),d=B(this[0],a,d)),d===b&&i[1]?this.data(i[0]):d):this.each(function(){var b=D(this),d=[i[0],c];b.triggerHandler("setData"+i[1]+"!",d),D.data(this,a,c),b.triggerHandler("changeData"+i[1]+"!",d)})},removeData:function(a){return this.each(function(){D.removeData(this,a)})}}),D.extend({queue:function(a,b,c){if(a){b=(b||"fx")+"queue";var d=D._data(a,b);return c?(!d||D.isArray(c)?d=D._data(a,b,D.makeArray(c)):d.push(c),d):d||[]}},dequeue:function(a,b){b=b||"fx";var c=D.queue(a,b),d=c.shift();d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),d.call(a,function(){D.dequeue(a,b)})),c.length||D.removeData(a,b+"queue",!0)}}),D.fn.extend({queue:function(a,c){return typeof a!="string"&&(c=a,a="fx"),c===b?D.queue(this[0],a):this.each(function(b){var d=D.queue(this,a,c);a==="fx"&&d[0]!=="inprogress"&&D.dequeue(this,a)})},dequeue:function(a){return this.each(function(){D.dequeue(this,a)})},delay:function(a,b){return a=D.fx?D.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(){var c=this;setTimeout(function(){D.dequeue(c,b)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])}});var F=/[\n\t\r]/g,G=/\s+/,H=/\r/g,I=/^(?:href|src|style)$/,J=/^(?:button|input)$/i,K=/^(?:button|input|object|select|textarea)$/i,L=/^a(?:rea)?$/i,M=/^(?:radio|checkbox)$/i;D.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"},D.fn.extend({attr:function(a,b){return D.access(this,a,b,!0,D.attr)},removeAttr:function(a,b){return this.each(function(){D.attr(this,a,""),this.nodeType===1&&this.removeAttribute(a)})},addClass:function(a){if(D.isFunction(a))return this.each(function(b){var c=D(this);c.addClass(a.call(this,b,c.attr("class")))});if(a&&typeof a=="string"){var b=(a||"").split(G);for(var c=0,d=this.length;c<d;c++){var e=this[c];if(e.nodeType===1)if(e.className){var f=" "+e.className+" ",g=e.className;for(var h=0,i=b.length;h<i;h++)f.indexOf(" "+b[h]+" ")<0&&(g+=" "+b[h]);e.className=D.trim(g)}else e.className=a}}return this},removeClass:function(a){if(D.isFunction(a))return this.each(function(b){var c=D(this);c.removeClass(a.call(this,b,c.attr("class")))});if(a&&typeof a=="string"||a===b){var c=(a||"").split(G);for(var d=0,e=this.length;d<e;d++){var f=this[d];if(f.nodeType===1&&f.className)if(a){var g=(" "+f.className+" ").replace(F," ");for(var h=0,i=c.length;h<i;h++)g=g.replace(" "+c[h]+" "," ");f.className=D.trim(g)}else f.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";return D.isFunction(a)?this.each(function(c){var d=D(this);d.toggleClass(a.call(this,c,d.attr("class"),b),b)}):this.each(function(){if(c==="string"){var e,f=0,g=D(this),h=b,i=a.split(G);while(e=i[f++])h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&D._data(this,"__className__",this.className),this.className=this.className||a===!1?"":D._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ";for(var c=0,d=this.length;c<d;c++)if((" "+this[c].className+" ").replace(F," ").indexOf(b)>-1)return!0;return!1},val:function(a){if(!arguments.length){var c=this[0];if(c){if(D.nodeName(c,"option")){var d=c.attributes.value;return!d||d.specified?c.value:c.text}if(D.nodeName(c,"select")){var e=c.selectedIndex,f=[],g=c.options,h=c.type==="select-one";if(e<0)return null;for(var i=h?e:0,j=h?e+1:g.length;i<j;i++){var k=g[i];if(k.selected&&(D.support.optDisabled?!k.disabled:k.getAttribute("disabled")===null)&&(!k.parentNode.disabled||!D.nodeName(k.parentNode,"optgroup"))){a=D(k).val();if(h)return a;f.push(a)}}return h&&!f.length&&g.length?D(g[e]).val():f}return M.test(c.type)&&!D.support.checkOn?c.getAttribute("value")===null?"on":c.value:(c.value||"").replace(H,"")}return b}var l=D.isFunction(a);return this.each(function(b){var c=D(this),d=a;if(this.nodeType===1){l&&(d=a.call(this,b,c.val())),d==null?d="":typeof d=="number"?d+="":D.isArray(d)&&(d=D.map(d,function(a){return a==null?"":a+""}));if(D.isArray(d)&&M.test(this.type))this.checked=D.inArray(c.val(),d)>=0;else if(D.nodeName(this,"select")){var e=D.makeArray(d);D("option",this).each(function(){this.selected=D.inArray(D(this).val(),e)>=0}),e.length||(this.selectedIndex=-1)}else this.value=d}})}}),D.extend({attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){if(!a||a.nodeType===3||a.nodeType===8||a.nodeType===2)return b;if(e&&c in D.attrFn)return D(a)[c](d);var f=a.nodeType!==1||!D.isXMLDoc(a),g=d!==b;c=f&&D.props[c]||c;if(a.nodeType===1){var h=I.test(c);if(c==="selected"&&!D.support.optSelected){var i=a.parentNode;i&&(i.selectedIndex,i.parentNode&&i.parentNode.selectedIndex)}if((c in a||a[c]!==b)&&f&&!h){g&&(c==="type"&&J.test(a.nodeName)&&a.parentNode&&D.error("type property can't be changed"),d===null?a.nodeType===1&&a.removeAttribute(c):a[c]=d);if(D.nodeName(a,"form")&&a.getAttributeNode(c))return a.getAttributeNode(c).nodeValue;if(c==="tabIndex"){var j=a.getAttributeNode("tabIndex");return j&&j.specified?j.value:K.test(a.nodeName)||L.test(a.nodeName)&&a.href?0:b}return a[c]}if(!D.support.style&&f&&c==="style")return g&&(a.style.cssText=""+d),a.style.cssText;g&&a.setAttribute(c,""+d);if(!a.attributes[c]&&a.hasAttribute&&!a.hasAttribute(c))return b;var k=!D.support.hrefNormalized&&f&&h?a.getAttribute(c,2):a.getAttribute(c);return k===null?b:k}return g&&(a[c]=d),a[c]}});var N=/\.(.*)$/,O=/^(?:textarea|input|select)$/i,P=/\./g,Q=/ /g,R=/[^\w\s.|`]/g,S=function(a){return a.replace(R,"\\$&")};D.event={add:function(c,d,e,f){if(c.nodeType!==3&&c.nodeType!==8){try{D.isWindow(c)&&c!==a&&!c.frameElement&&(c=a)}catch(g){}if(e===!1)e=z;else if(!e)return;var h,i;e.handler&&(h=e,e=h.handler),e.guid||(e.guid=D.guid++);var j=D._data(c);if(!j)return;var k=j.events,l=j.handle;k||(j.events=k={}),l||(j.handle=l=function(){return typeof D!="undefined"&&!D.event.triggered?D.event.handle.apply(l.elem,arguments):b}),l.elem=c,d=d.split(" ");var m,n=0,o;while(m=d[n++]){i=h?D.extend({},h):{handler:e,data:f},m.indexOf(".")>-1?(o=m.split("."),m=o.shift(),i.namespace=o.slice(0).sort().join(".")):(o=[],i.namespace=""),i.type=m,i.guid||(i.guid=e.guid);var p=k[m],q=D.event.special[m]||{};if(!p){p=k[m]=[];if(!q.setup||q.setup.call(c,f,o,l)===!1)c.addEventListener?c.addEventListener(m,l,!1):c.attachEvent&&c.attachEvent("on"+m,l)}q.add&&(q.add.call(c,i),i.handler.guid||(i.handler.guid=e.guid)),p.push(i),D.event.global[m]=!0}c=null}},global:{},remove:function(a,c,d,e){if(a.nodeType!==3&&a.nodeType!==8){d===!1&&(d=z);var f,g,h,i,j=0,k,l,m,n,o,p,q,r=D.hasData(a)&&D._data(a),s=r&&r.events;if(!r||!s)return;c&&c.type&&(d=c.handler,c=c.type);if(!c||typeof c=="string"&&c.charAt(0)==="."){c=c||"";for(g in s)D.event.remove(a,g+c);return}c=c.split(" ");while(g=c[j++]){q=g,p=null,k=g.indexOf(".")<0,l=[],k||(l=g.split("."),g=l.shift(),m=new RegExp("(^|\\.)"+D.map(l.slice(0).sort(),S).join("\\.(?:.*\\.)?")+"(\\.|$)")),o=s[g];if(!o)continue;if(!d){for(i=0;i<o.length;i++){p=o[i];if(k||m.test(p.namespace))D.event.remove(a,q,p.handler,i),o.splice(i--,1)}continue}n=D.event.special[g]||{};for(i=e||0;i<o.length;i++){p=o[i];if(d.guid===p.guid){if(k||m.test(p.namespace))e==null&&o.splice(i--,1),n.remove&&n.remove.call(a,p);if(e!=null)break}}if(o.length===0||e!=null&&o.length===1)(!n.teardown||n.teardown.call(a,l)===!1)&&D.removeEvent(a,g,r.handle),f=null,delete s[g]}if(D.isEmptyObject(s)){var t=r.handle;t&&(t.elem=null),delete r.events,delete r.handle,D.isEmptyObject(r)&&D.removeData(a,b,!0)}}},trigger:function(a,c,d){var e=a.type||a,f=arguments[3];if(!f){a=typeof a=="object"?a[D.expando]?a:D.extend(D.Event(e),a):D.Event(e),e.indexOf("!")>=0&&(a.type=e=e.slice(0,-1),a.exclusive=!0),d||(a.stopPropagation(),D.event.global[e]&&D.each(D.cache,function(){var b=D.expando,d=this[b];d&&d.events&&d.events[e]&&D.event.trigger(a,c,d.handle.elem)}));if(!d||d.nodeType===3||d.nodeType===8)return b;a.result=b,a.target=d,c=D.makeArray(c),c.unshift(a)}a.currentTarget=d;var g=D._data(d,"handle");g&&g.apply(d,c);var h=d.parentNode||d.ownerDocument;try{d&&d.nodeName&&D.noData[d.nodeName.toLowerCase()]||d["on"+e]&&d["on"+e].apply(d,c)===!1&&(a.result=!1,a.preventDefault())}catch(i){}if(!a.isPropagationStopped()&&h)D.event.trigger(a,c,h,!0);else if(!a.isDefaultPrevented()){var j,k=a.target,l=e.replace(N,""),m=D.nodeName(k,"a")&&l==="click",n=D.event.special[l]||{};if((!n._default||n._default.call(d,a)===!1)&&!m&&!(k&&k.nodeName&&D.noData[k.nodeName.toLowerCase()])){try{k[l]&&(j=k["on"+l],j&&(k["on"+l]=null),D.event.triggered=!0,k[l]())}catch(o){}j&&(k["on"+l]=j),D.event.triggered=!1}}},handle:function(c){var d,e,f,g,h,i=[],j=D.makeArray(arguments);c=j[0]=D.event.fix(c||a.event),c.currentTarget=this,d=c.type.indexOf(".")<0&&!c.exclusive,d||(f=c.type.split("."),c.type=f.shift(),i=f.slice(0).sort(),g=new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)")),c.namespace=c.namespace||i.join("."),h=D._data(this,"events"),e=(h||{})[c.type];if(h&&e){e=e.slice(0);for(var k=0,l=e.length;k<l;k++){var m=e[k];if(d||g.test(m.namespace)){c.handler=m.handler,c.data=m.data,c.handleObj=m;var n=m.handler.apply(this,j);n!==b&&(c.result=n,n===!1&&(c.preventDefault(),c.stopPropagation()));if(c.isImmediatePropagationStopped())break}}}return c.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(a){if(a[D.expando])return a;var c=a;a=D.Event(c);for(var d=this.props.length,e;d;)e=this.props[--d],a[e]=c[e];a.target||(a.target=a.srcElement||C),a.target.nodeType===3&&(a.target=a.target.parentNode),!a.relatedTarget&&a.fromElement&&(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement);if(a.pageX==null&&a.clientX!=null){var f=C.documentElement,g=C.body;a.pageX=a.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=a.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)}return a.which==null&&(a.charCode!=null||a.keyCode!=null)&&(a.which=a.charCode!=null?a.charCode:a.keyCode),!a.metaKey&&a.ctrlKey&&(a.metaKey=a.ctrlKey),!a.which&&a.button!==b&&(a.which=a.button&1?1:a.button&2?3:a.button&4?2:0),a},guid:1e8,proxy:D.proxy,special:{ready:{setup:D.bindReady,teardown:D.noop},live:{add:function(a){D.event.add(this,v(a.origType,a.selector),D.extend({},a,{handler:w,guid:a.handler.guid}))},remove:function(a){D.event.remove(this,v(a.origType,a.selector),a)}},beforeunload:{setup:function(a,b,c){D.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}}},D.removeEvent=C.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},D.Event=function(a){if(!this.preventDefault)return new D.Event(a);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?y:z):this.type=a,this.timeStamp=D.now(),this[D.expando]=!0},D.Event.prototype={preventDefault:function(){this.isDefaultPrevented=y;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=y;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=y,this.stopPropagation()},isDefaultPrevented:z,isPropagationStopped:z,isImmediatePropagationStopped:z};var T=function(a){var b=a.relatedTarget;try{if(b!==C&&!b.parentNode)return;while(b&&b!==this)b=b.parentNode;b!==this&&(a.type=a.data,D.event.handle.apply(this,arguments))}catch(c){}},U=function(a){a.type=a.data,D.event.handle.apply(this,arguments)};D.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){D.event.special[a]={setup:function(c){D.event.add(this,b,c&&c.selector?U:T,a)},teardown:function(a){D.event.remove(this,b,a&&a.selector?U:T)}}}),D.support.submitBubbles||(D.event.special.submit={setup:function(a,b){if(!this.nodeName||this.nodeName.toLowerCase()==="form")return!1;D.event.add(this,"click.specialSubmit",function(a){var b=a.target,c=b.type;(c==="submit"||c==="image")&&D(b).closest("form").length&&x("submit",this,arguments)}),D.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,c=b.type;(c==="text"||c==="password")&&D(b).closest("form").length&&a.keyCode===13&&x("submit",this,arguments)})},teardown:function(a){D.event.remove(this,".specialSubmit")}});if(!D.support.changeBubbles){var V,W=function(a){var b=a.type,c=a.value;return b==="radio"||b==="checkbox"?c=a.checked:b==="select-multiple"?c=a.selectedIndex>-1?D.map(a.options,function(a){return a.selected}).join("-"):"":a.nodeName.toLowerCase()==="select"&&(c=a.selectedIndex),c},X=function(c){var d=c.target,e,f;if(O.test(d.nodeName)&&!d.readOnly){e=D._data(d,"_change_data"),f=W(d),(c.type!=="focusout"||d.type!=="radio")&&D._data(d,"_change_data",f);if(e===b||f===e)return;if(e!=null||f)c.type="change",c.liveFired=b,D.event.trigger(c,arguments[1],d)}};D.event.special.change={filters:{focusout:X,beforedeactivate:X,click:function(a){var b=a.target,c=b.type;(c==="radio"||c==="checkbox"||b.nodeName.toLowerCase()==="select")&&X.call(this,a)},keydown:function(a){var b=a.target,c=b.type;(a.keyCode===13&&b.nodeName.toLowerCase()!=="textarea"||a.keyCode===32&&(c==="checkbox"||c==="radio")||c==="select-multiple")&&X.call(this,a)},beforeactivate:function(a){var b=a.target;D._data(b,"_change_data",W(b))}},setup:function(a,b){if(this.type==="file")return!1;for(var c in V)D.event.add(this,c+".specialChange",V[c]);return O.test(this.nodeName)},teardown:function(a){return D.event.remove(this,".specialChange"),O.test(this.nodeName)}},V=D.event.special.change.filters,V.focus=V.beforeactivate}C.addEventListener&&D.each({focus:"focusin",blur:"focusout"},function(a,b){function c(a){return a=D.event.fix(a),a.type=b,D.event.handle.call(this,a)}D.event.special[b]={setup:function(){this.addEventListener(a,c,!0)},teardown:function(){this.removeEventListener(a,c,!0)}}}),D.each(["bind","one"],function(a,c){D.fn[c]=function(a,d,e){if(typeof a=="object"){for(var f in a)this[c](f,d,a[f],e);return this}if(D.isFunction(d)||d===!1)e=d,d=b;var g=c==="one"?D.proxy(e,function(a){return D(this).unbind(a,g),e.apply(this,arguments)}):e;if(a==="unload"&&c!=="one")this.one(a,d,e);else for(var h=0,i=this.length;h<i;h++)D.event.add(this[h],a,g,d);return this}}),D.fn.extend({unbind:function(a,b){if(typeof a!="object"||a.preventDefault)for(var c=0,d=this.length;c<d;c++)D.event.remove(this[c],a,b);else for(var e in a)this.unbind(e,a[e]);return this},delegate:function(a,b,c,d){return this.live(b,c,d,a)},undelegate:function(a,b,c){return arguments.length===0?this.unbind("live"):this.die(b,null,c,a)},trigger:function(a,b){return this.each(function(){D.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0]){var c=D.Event(a);return c.preventDefault(),c.stopPropagation(),D.event.trigger(c,b,this[0]),c.result}},toggle:function(a){var b=arguments,c=1;while(c<b.length)D.proxy(a,b[c++]);return this.click(D.proxy(a,function(d){var e=(D._data(this,"lastToggle"+a.guid)||0)%c;return D._data(this,"lastToggle"+a.guid,e+1),d.preventDefault(),b[e].apply(this,arguments)||!1}))},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var Y={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};D.each(["live","die"],function(a,c){D.fn[c]=function(a,d,e,f){var g,h=0,i,j,k,l=f||this.selector,m=f?this:D(this.context);if(typeof a=="object"&&!a.preventDefault){for(var n in a)m[c](n,d,a[n],l);return this}D.isFunction(d)&&(e=d,d=b),a=(a||"").split(" ");while((g=a[h++])!=null){i=N.exec(g),j="",i&&(j=i[0],g=g.replace(N,""));if(g==="hover"){a.push("mouseenter"+j,"mouseleave"+j);continue}k=g,g==="focus"||g==="blur"?(a.push(Y[g]+j),g+=j):g=(Y[g]||g)+j;if(c==="live")for(var o=0,p=m.length;o<p;o++)D.event.add(m[o],"live."+v(g,l),{data:d,selector:l,handler:e,origType:g,origHandler:e,preType:k});else m.unbind("live."+v(g,l),e)}return this}}),D.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(a,b){D.fn[b]=function(a,c){return c==null&&(c=a,a=null),arguments.length>0?this.bind(b,a,c):this.trigger(b)},D.attrFn&&(D.attrFn[b]=!0)}),function(){function a(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){var j=!1;i=i[a];while(i){if(i.sizcache===c){j=d[i.sizset];break}if(i.nodeType===1){f||(i.sizcache=c,i.sizset=g);if(typeof b!="string"){if(i===b){j=!0;break}}else if(k.filter(b,[i]).length>0){j=i;break}}i=i[a]}d[g]=j}}}function c(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){var j=!1;i=i[a];while(i){if(i.sizcache===c){j=d[i.sizset];break}i.nodeType===1&&!f&&(i.sizcache=c,i.sizset=g);if(i.nodeName.toLowerCase()===b){j=i;break}i=i[a]}d[g]=j}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e=0,f=Object.prototype.toString,g=!1,h=!0,i=/\\/g,j=/\W/;[0,0].sort(function(){return h=!1,0});var k=function(a,b,c,e){c=c||[],b=b||C;var g=b;if(b.nodeType!==1&&b.nodeType!==9)return[];if(!a||typeof a!="string")return c;var h,i,j,n,o,q,r,s,u=!0,v=k.isXML(b),w=[],x=a;do{d.exec(""),h=d.exec(x);if(h){x=h[3],w.push(h[1]);if(h[2]){n=h[3];break}}}while(h);if(w.length>1&&m.exec(a))if(w.length===2&&l.relative[w[0]])i=t(w[0]+w[1],b);else{i=l.relative[w[0]]?[b]:k(w.shift(),b);while(w.length)a=w.shift(),l.relative[a]&&(a+=w.shift()),i=t(a,i)}else{!e&&w.length>1&&b.nodeType===9&&!v&&l.match.ID.test(w[0])&&!l.match.ID.test(w[w.length-1])&&(o=k.find(w.shift(),b,v),b=o.expr?k.filter(o.expr,o.set)[0]:o.set[0]);if(b){o=e?{expr:w.pop(),set:p(e)}:k.find(w.pop(),w.length!==1||w[0]!=="~"&&w[0]!=="+"||!b.parentNode?b:b.parentNode,v),i=o.expr?k.filter(o.expr,o.set):o.set,w.length>0?j=p(i):u=!1;while(w.length)q=w.pop(),r=q,l.relative[q]?r=w.pop():q="",r==null&&(r=b),l.relative[q](j,r,v)}else j=w=[]}j||(j=i),j||k.error(q||a);if(f.call(j)==="[object Array]")if(u)if(b&&b.nodeType===1)for(s=0;j[s]!=null;s++)j[s]&&(j[s]===!0||j[s].nodeType===1&&k.contains(b,j[s]))&&c.push(i[s]);else for(s=0;j[s]!=null;s++)j[s]&&j[s].nodeType===1&&c.push(i[s]);else c.push.apply(c,j);else p(j,c);return n&&(k(n,g,c,e),k.uniqueSort(c)),c};k.uniqueSort=function(a){if(r){g=h,a.sort(r);if(g)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},k.matches=function(a,b){return k(a,null,null,b)},k.matchesSelector=function(a,b){return k(b,null,null,[a]).length>0},k.find=function(a,b,c){var d;if(!a)return[];for(var e=0,f=l.order.length;e<f;e++){var g,h=l.order[e];if(g=l.leftMatch[h].exec(a)){var j=g[1];g.splice(1,1);if(j.substr(j.length-1)!=="\\"){g[1]=(g[1]||"").replace(i,""),d=l.find[h](g,b,c);if(d!=null){a=a.replace(l.match[h],"");break}}}}return d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]),{set:d,expr:a}},k.filter=function(a,c,d,e){var f,g,h=a,i=[],j=c,m=c&&c[0]&&k.isXML(c[0]);while(a&&c.length){for(var n in l.filter)if((f=l.leftMatch[n].exec(a))!=null&&f[2]){var o,p,q=l.filter[n],r=f[1];g=!1,f.splice(1,1);if(r.substr(r.length-1)==="\\")continue;j===i&&(i=[]);if(l.preFilter[n]){f=l.preFilter[n](f,j,d,i,e,m);if(f){if(f===!0)continue}else g=o=!0}if(f)for(var s=0;(p=j[s])!=null;s++)if(p){o=q(p,f,s,j);var t=e^!!o;d&&o!=null?t?g=!0:j[s]=!1:t&&(i.push(p),g=!0)}if(o!==b){d||(j=i),a=a.replace(l.match[n],"");if(!g)return[];break}}if(a===h){if(g!=null)break;k.error(a)}h=a}return j},k.error=function(a){throw"Syntax error, unrecognized expression: "+a};var l=k.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!j.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&k.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!j.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&k.filter(b,a,!0)}},"":function(b,d,f){var g,h=e++,i=a;typeof d=="string"&&!j.test(d)&&(d=d.toLowerCase(),g=d,i=c),i("parentNode",d,h,b,g,f)},"~":function(b,d,f){var g,h=e++,i=a;typeof d=="string"&&!j.test(d)&&(d=d.toLowerCase(),g=d,i=c),i("previousSibling",d,h,b,g,f)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(i,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(i,"")},TAG:function(a,b){return a[1].replace(i,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||k.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&k.error(a[0]);return a[0]=e++,a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(i,"");return!f&&l.attrMap[g]&&(a[1]=l.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(i,""),a[2]==="~="&&(a[4]=" "+a[4]+" "),a},PSEUDO:function(a,b,c,e,f){if(a[1]==="not"){if(!((d.exec(a[3])||"").length>1||/^\w/.test(a[3]))){var g=k.filter(a[3],b,c,!0^f);return c||e.push.apply(e,g),!1}a[3]=k(a[3],null,null,b)}else if(l.match.POS.test(a[0])||l.match.CHILD.test(a[0]))return!0;return a},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!k(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.getAttribute("type")},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===a.type},button:function(a){return"button"===a.type||a.nodeName.toLowerCase()==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=l.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||k.getText([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}k.error(e)},CHILD:function(a,b){var c=b[1],d=a;switch(c){case"only":case"first":while(d=d.previousSibling)if(d.nodeType===1)return!1;if(c==="first")return!0;d=a;case"last":while(d=d.nextSibling)if(d.nodeType===1)return!1;return!0;case"nth":var e=b[2],f=b[3];if(e===1&&f===0)return!0;var g=b[0],h=a.parentNode;if(h&&(h.sizcache!==g||!a.nodeIndex)){var i=0;for(d=h.firstChild;d;d=d.nextSibling)d.nodeType===1&&(d.nodeIndex=++i);h.sizcache=g}var j=a.nodeIndex-f;return e===0?j===0:j%e===0&&j/e>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=l.attrHandle[c]?l.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=l.setFilters[e];if(f)return f(a,c,b,d)}}},m=l.match.POS,n=function(a,b){return"\\"+(b-0+1)};for(var o in l.match)l.match[o]=new RegExp(l.match[o].source+/(?![^\[]*\])(?![^\(]*\))/.source),l.leftMatch[o]=new RegExp(/(^(?:.|\r|\n)*?)/.source+l.match[o].source.replace(/\\(\d+)/g,n));var p=function(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(C.documentElement.childNodes,0)[0].nodeType}catch(q){p=function(a,b){var c=0,d=b||[];if(f.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var r,s;C.documentElement.compareDocumentPosition?r=function(a,b){return a===b?(g=!0,0):!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition?-1:1:a.compareDocumentPosition(b)&4?-1:1}:(r=function(a,b){var c,d,e=[],f=[],h=a.parentNode,i=b.parentNode,j=h;if(a===b)return g=!0,0;if(h===i)return s(a,b);if(!h)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return s(e[k],f[k]);return k===c?s(a,f[k],-1):s(e[k],b,1)},s=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),k.getText=function(a){var b="",c;for(var d=0;a[d];d++)c=a[d],c.nodeType===3||c.nodeType===4?b+=c.nodeValue:c.nodeType!==8&&(b+=k.getText(c.childNodes));return b},function(){var a=C.createElement("div"),c="script"+(new Date).getTime(),d=C.documentElement;a.innerHTML="<a name='"+c+"'/>",d.insertBefore(a,d.firstChild),C.getElementById(c)&&(l.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},l.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),d.removeChild(a),d=a=null}(),function(){var a=C.createElement("div");a.appendChild(C.createComment("")),a.getElementsByTagName("*").length>0&&(l.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(l.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),C.querySelectorAll&&function(){var a=k,b=C.createElement("div"),c="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){k=function(b,d,e,f){d=d||C;if(!f&&!k.isXML(d)){var g=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(g&&(d.nodeType===1||d.nodeType===9)){if(g[1])return p(d.getElementsByTagName(b),e);if(g[2]&&l.find.CLASS&&d.getElementsByClassName)return p(d.getElementsByClassName(g[2]),e)}if(d.nodeType===9){if(b==="body"&&d.body)return p([d.body],e);if(g&&g[3]){var h=d.getElementById(g[3]);if(!h||!h.parentNode)return p([],e);if(h.id===g[3])return p([h],e)}try{return p(d.querySelectorAll(b),e)}catch(i){}}else if(d.nodeType===1&&d.nodeName.toLowerCase()!=="object"){var j=d,m=d.getAttribute("id"),n=m||c,o=d.parentNode,q=/^\s*[+~]/.test(b);m?n=n.replace(/'/g,"\\$&"):d.setAttribute("id",n),q&&o&&(d=d.parentNode);try{if(!q||o)return p(d.querySelectorAll("[id='"+n+"'] "+b),e)}catch(r){}finally{m||j.removeAttribute("id")}}}return a(b,d,e,f)};for(var d in a)k[d]=a[d];b=null}}(),function(){var a=C.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector,c=!1;try{b.call(C.documentElement,"[test!='']:sizzle")}catch(d){c=!0}b&&(k.matchesSelector=function(a,d){d=d.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!k.isXML(a))try{if(c||!l.match.PSEUDO.test(d)&&!/!=/.test(d))return b.call(a,d)}catch(e){}return k(d,null,null,[a]).length>0})}(),function(){var a=C.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;l.order.splice(1,0,"CLASS"),l.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),C.documentElement.contains?k.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:C.documentElement.compareDocumentPosition?k.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:k.contains=function(){return!1},k.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var t=function(a,b){var c,d=[],e="",f=b.nodeType?[b]:b;while(c=l.match.PSEUDO.exec(a))e+=c[0],a=a.replace(l.match.PSEUDO,"");a=l.relative[a]?a+"*":a;for(var g=0,h=f.length;g<h;g++)k(a,f[g],d);return k.filter(e,d)};D.find=k,D.expr=k.selectors,D.expr[":"]=D.expr.filters,D.unique=k.uniqueSort,D.text=k.getText,D.isXMLDoc=k.isXML,D.contains=k.contains}();var Z=/Until$/,$=/^(?:parents|prevUntil|prevAll)/,_=/,/,ba=/^.[^:#\[\.,]*$/,bb=Array.prototype.slice,bc=D.expr.match.POS,bd={children:!0,contents:!0,next:!0,prev:!0};D.fn.extend({find:function(a){var b=this.pushStack("","find",a),c=0;for(var d=0,e=this.length;d<e;d++){c=b.length,D.find(a,this[d],b);if(d>0)for(var f=c;f<b.length;f++)for(var g=0;g<c;g++)if(b[g]===b[f]){b.splice(f--,1);break}}return b},has:function(a){var b=D(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(D.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(t(this,a,!1),"not",a)},filter:function(a){return this.pushStack(t(this,a,!0),"filter",a)},is:function(a){return!!a&&D.filter(a,this).length>0},closest:function(a,b){var c=[],d,e,f=this[0];if(D.isArray(a)){var g,h,i={},j=1;if(f&&a.length){for(d=0,e=a.length;d<e;d++)h=a[d],i[h]||(i[h]=D.expr.match.POS.test(h)?D(h,b||this.context):h);while(f&&f.ownerDocument&&f!==b){for(h in i)g=i[h],(g.jquery?g.index(f)>-1:D(f).is(g))&&c.push({selector:h,elem:f,level:j});f=f.parentNode,j++}}return c}var k=bc.test(a)?D(a,b||this.context):null;for(d=0,e=this.length;d<e;d++){f=this[d];while(f){if(k?k.index(f)>-1:D.find.matchesSelector(f,a)){c.push(f);break}f=f.parentNode;if(!f||!f.ownerDocument||f===b)break}}return c=c.length>1?D.unique(c):c,this.pushStack(c,"closest",a)},index:function(a){return!a||typeof a=="string"?D.inArray(this[0],a?D(a):this.parent().children()):D.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?D(a,b):D.makeArray(a),d=D.merge(this.get(),c);return this.pushStack(u(c[0])||u(d[0])?d:D.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),D.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return D.dir(a,"parentNode")},parentsUntil:function(a,b,c){return D.dir(a,"parentNode",c)},next:function(a){return D.nth(a,2,"nextSibling")},prev:function(a){return D.nth(a,2,"previousSibling")},nextAll:function(a){return D.dir(a,"nextSibling")},prevAll:function(a){return D.dir(a,"previousSibling")},nextUntil:function(a,b,c){return D.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return D.dir(a,"previousSibling",c)},siblings:function(a){return D.sibling(a.parentNode.firstChild,a)},children:function(a){return D.sibling(a.firstChild)},contents:function(a){return D.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:D.makeArray(a.childNodes)}},function(a,b){D.fn[a]=function(c,d){var e=D.map(this,b,c),f=bb.call(arguments);return Z.test(a)||(d=c),d&&typeof d=="string"&&(e=D.filter(d,e)),e=this.length>1&&!bd[a]?D.unique(e):e,(this.length>1||_.test(d))&&$.test(a)&&(e=e.reverse()),this.pushStack(e,a,f.join(","))}}),D.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),b.length===1?D.find.matchesSelector(b[0],a)?[b[0]]:[]:D.find.matches(a,b)},dir:function(a,c,d){var e=[],f=a[c];while(f&&f.nodeType!==9&&(d===b||f.nodeType!==1||!D(f).is(d)))f.nodeType===1&&e.push(f),f=f[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var be=/ jQuery\d+="(?:\d+|null)"/g,bf=/^\s+/,bg=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,bh=/<([\w:]+)/,bi=/<tbody/i,bj=/<|&#?\w+;/,bk=/<(?:script|object|embed|option|style)/i,bl=/checked\s*(?:[^=]|=\s*.checked.)/i,bm={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};bm.optgroup=bm.option,bm.tbody=bm.tfoot=bm.colgroup=bm.caption=bm.thead,bm.th=bm.td,D.support.htmlSerialize||(bm._default=[1,"div<div>","</div>"]),D.fn.extend({text:function(a){return D.isFunction(a)?this.each(function(b){var c=D(this);c.text(a.call(this,b,c.text()))}):typeof a!="object"&&a!==b?this.empty().append((this[0]&&this[0].ownerDocument||C).createTextNode(a)):D.text(this)},wrapAll:function(a){if(D.isFunction(a))return this.each(function(b){D(this).wrapAll(a.call(this,b))});if(this[0]){var b=D(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return D.isFunction(a)?this.each(function(b){D(this).wrapInner(a.call(this,b))}):this.each(function(){var b=D(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){D(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){D.nodeName(this,"body")||D(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=D(arguments[0]);return a.push.apply(a,this.toArray()),this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);return a.push.apply(a,D(arguments[0]).toArray()),a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||D.filter(a,[d]).length)!b&&d.nodeType===1&&(D.cleanData(d.getElementsByTagName("*")),D.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&D.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return D.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(be,""):null;if(typeof a!="string"||bk.test(a)||!D.support.leadingWhitespace&&bf.test(a)||bm[(bh.exec(a)||["",""])[1].toLowerCase()])D.isFunction(a)?this.each(function(b){var c=D(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);else{a=a.replace(bg,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)this[c].nodeType===1&&(D.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}return this},replaceWith:function(a){return this[0]&&this[0].parentNode?D.isFunction(a)?this.each(function(b){var c=D(this),d=c.html();c.replaceWith(a.call(this,b,d))}):(typeof a!="string"&&(a=D(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;D(this).remove(),b?D(b).before(a):D(c).append(a)})):this.pushStack(D(D.isFunction(a)?a():a),"replaceWith",a)},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,f,g,h,i=a[0],j=[];if(!D.support.checkClone&&arguments.length===3&&typeof i=="string"&&bl.test(i))return this.each(function(){D(this).domManip(a,c,d,!0)});if(D.isFunction(i))return this.each(function(e){var f=D(this);a[0]=i.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){h=i&&i.parentNode,D.support.parentNode&&h&&h.nodeType===11&&h.childNodes.length===this.length?e={fragment:h}:e=D.buildFragment(a,this,j),g=e.fragment,g.childNodes.length===1?f=g=g.firstChild:f=g.firstChild;if(f){c=c&&D.nodeName(f,"tr");for(var k=0,l=this.length,m=l-1;k<l;k++)d.call(c?s(this[k],f):this[k],e.cacheable||l>1&&k<m?D.clone(g,!0,!0):g)}j.length&&D.each(j,o)}return this}}),D.buildFragment=function(a,b,c){var d,e,f,g=b&&b[0]?b[0].ownerDocument||b[0]:C;return a.length===1&&typeof a[0]=="string"&&a[0].length<512&&g===C&&a[0].charAt(0)==="<"&&!bk.test(a[0])&&(D.support.checkClone||!bl.test(a[0]))&&(e=!0,f=D.fragments[a[0]],f&&f!==1&&(d=f)),d||(d=g.createDocumentFragment(),D.clean(a,g,d,c)),e&&(D.fragments[a[0]]=f?d:1),{fragment:d,cacheable:e}},D.fragments={},D.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){D.fn[a]=function(c){var d=[],e=D(c),f=this.length===1&&this[0].parentNode;if(f&&f.nodeType===11&&f.childNodes.length===1&&e.length===1)return e[b](this[0]),this;for(var g=0,h=e.length;g<h;g++){var i=(g>0?this.clone(!0):this).get();D(e[g])[b](i),d=d.concat(i)}return this.pushStack(d,a,e.selector)}}),D.extend({clone:function(a,b,c){var d=a.cloneNode(!0),e,f,g;if((!D.support.noCloneEvent||!D.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!D.isXMLDoc(a)){q(a,d),e=p(a),f=p(d);for(g=0;e[g];++g)q(e[g],f[g])}if(b){r(a,d);if(c){e=p(a),f=p(d);for(g=0;e[g];++g)r(e[g],f[g])}}return d},clean:function(a,b,c,d){b=b||C,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||C);var e=[];for(var f=0,g;(g=a[f])!=null;f++){typeof g=="number"&&(g+="");if(!g)continue;if(typeof g!="string"||bj.test(g)){if(typeof g=="string"){g=g.replace(bg,"<$1></$2>");var h=(bh.exec(g)||["",""])[1].toLowerCase(),i=bm[h]||bm._default,j=i[0],k=b.createElement("div");k.innerHTML=i[1]+g+i[2];while(j--)k=k.lastChild;if(!D.support.tbody){var l=bi.test(g),m=h==="table"&&!l?k.firstChild&&k.firstChild.childNodes:i[1]==="<table>"&&!l?k.childNodes:[];for(var n=m.length-1;n>=0;--n)D.nodeName(m[n],"tbody")&&!m[n].childNodes.length&&m[n].parentNode.removeChild(m[n])}!D.support.leadingWhitespace&&bf.test(g)&&k.insertBefore(b.createTextNode(bf.exec(g)[0]),k.firstChild),g=k.childNodes}}else g=b.createTextNode(g);g.nodeType?e.push(g):e=D.merge(e,g)}if(c)for(f=0;e[f];f++)!d||!D.nodeName(e[f],"script")||e[f].type&&e[f].type.toLowerCase()!=="text/javascript"?(e[f].nodeType===1&&e.splice.apply(e,[f+1,0].concat(D.makeArray(e[f].getElementsByTagName("script")))),c.appendChild(e[f])):d.push(e[f].parentNode?e[f].parentNode.removeChild(e[f]):e[f]);return e},cleanData:function(a){var b,c,d=D.cache,e=D.expando,f=D.event.special,g=D.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&D.noData[i.nodeName.toLowerCase()])continue;c=i[D.expando];if(c){b=d[c]&&d[c][e];if(b&&b.events){for(var j in b.events)f[j]?D.event.remove(i,j):D.removeEvent(i,j,b.handle);b.handle&&(b.handle.elem=null)}g?delete i[D.expando]:i.removeAttribute&&i.removeAttribute(D.expando),delete d[c]}}}});var bn=/alpha\([^)]*\)/i,bo=/opacity=([^)]*)/,bp=/-([a-z])/ig,bq=/([A-Z])/g,br=/^-?\d+(?:px)?$/i,bs=/^-?\d/,bt={position:"absolute",visibility:"hidden",display:"block"},bu=["Left","Right"],bv=["Top","Bottom"],bw,bx,by,bz=function(a,b){return b.toUpperCase()};D.fn.css=function(a,c){return arguments.length===2&&c===b?this:D.access(this,a,c,!0,function(a,c,d){return d!==b?D.style(a,c,d):D.css(a,c)})},D.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bw(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{zIndex:!0,fontWeight:!0,opacity:!0,zoom:!0,lineHeight:!0},cssProps:{"float":D.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&a.nodeType!==3&&a.nodeType!==8&&a.style){var f,g=D.camelCase(c),h=a.style,i=D.cssHooks[g];c=D.cssProps[g]||g;if(d===b)return i&&"get"in i&&(f=i.get(a,!1,e))!==b?f:h[c];if(typeof d=="number"&&isNaN(d)||d==null)return;typeof d=="number"&&!D.cssNumber[g]&&(d+="px");if(!i||!("set"in i)||(d=i.set(a,d))!==b)try{h[c]=d}catch(j){}}},css:function(a,c,d){var e,f=D.camelCase(c),g=D.cssHooks[f];c=D.cssProps[f]||f;if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(bw)return bw(a,c,f)},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]},camelCase:function(a){return a.replace(bp,bz)}}),D.curCSS=D.css,D.each(["height","width"],function(a,b){D.cssHooks[b]={get:function(a,c,d){var e;if(c){a.offsetWidth!==0?e=n(a,b,d):D.swap(a,bt,function(){e=n(a,b,d)});if(e<=0){e=bw(a,b,b),e==="0px"&&by&&(e=by(a,b,b));if(e!=null)return e===""||e==="auto"?"0px":e}return e<0||e==null?(e=a.style[b],e===""||e==="auto"?"0px":e):typeof e=="string"?e:e+"px"}},set:function(a,b){if(!br.test(b))return b;b=parseFloat(b);if(b>=0)return b+"px"}}}),D.support.opacity||(D.cssHooks.opacity={get:function(a,b){return bo.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style;c.zoom=1;var d=D.isNaN(b)?"":"alpha(opacity="+b*100+")",e=c.filter||"";c.filter=bn.test(e)?e.replace(bn,d):c.filter+" "+d}}),C.defaultView&&C.defaultView.getComputedStyle&&(bx=function(a,c,d){var e,f,g;d=d.replace(bq,"-$1").toLowerCase();if(!(f=a.ownerDocument.defaultView))return b;if(g=f.getComputedStyle(a,null))e=g.getPropertyValue(d),e===""&&!D.contains(a.ownerDocument.documentElement,a)&&(e=D.style(a,d));return e}),C.documentElement.currentStyle&&(by=function(a,b){var c,d=a.currentStyle&&a.currentStyle[b],e=a.runtimeStyle&&a.runtimeStyle[b],f=a.style;return!br.test(d)&&bs.test(d)&&(c=f.left,e&&(a.runtimeStyle.left=a.currentStyle.left),f.left=b==="fontSize"?"1em":d||0,d=f.pixelLeft+"px",f.left=c,e&&(a.runtimeStyle.left=e)),d===""?"auto":d}),bw=bx||by,D.expr&&D.expr.filters&&(D.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!D.support.reliableHiddenOffsets&&(a.style.display||D.css(a,"display"))==="none"},D.expr.filters.visible=function(a){return!D.expr.filters.hidden(a)});var bA=/%20/g,bB=/\[\]$/,bC=/\r?\n/g,bD=/#.*$/,bE=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bF=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bG=/(?:^file|^widget|\-extension):$/,bH=/^(?:GET|HEAD)$/,bI=/^\/\//,bJ=/\?/,bK=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bL=/^(?:select|textarea)/i,bM=/\s+/,bN=/([?&])_=[^&]*/,bO=/(^|\-)([a-z])/g,bP=function(a,b,c){return b+c.toUpperCase()},bQ=/^([\w\+\.\-]+:)\/\/([^\/?#:]*)(?::(\d+))?/,bR=D.fn.load,bS={},bT={},bU,bV;try{bU=C.location.href}catch(bW){bU=C.createElement("a"),bU.href="",bU=bU.href}bV=bQ.exec(bU.toLowerCase()),D.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bR)return bR.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var f=a.slice(e,a.length);a=a.slice(0,e)}var g="GET";c&&(D.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=D.param(c,D.ajaxSettings.traditional),g="POST"));var h=this;return D.ajax({url:a,type:g,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),h.html(f?D("<div>").append(c.replace(bK,"")).find(f):c)),d&&h.each(d,[c,b,a])}}),this},serialize:function(){return D.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?D.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bL.test(this.nodeName)||bF.test(this.type))}).map(function(a,b){var c=D(this).val();return c==null?null:D.isArray(c)?D.map(c,function(a,c){return{name:b.name,value:a.replace(bC,"\r\n")}}):{name:b.name,value:c.replace(bC,"\r\n")}}).get()}}),D.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){D.fn[b]=function(a){return this.bind(b,a)}}),D.each(["get","post"],function(a,c){D[c]=function(a,d,e,f){return D.isFunction(d)&&(f=f||e,e=d,d=b),D.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),D.extend({getScript:function(a,c){return D.get(a,b,c,"script")},getJSON:function(a,b,c){return D.get(a,b,c,"json")},ajaxSetup:function(a,b){b?D.extend(!0,a,D.ajaxSettings,b):(b=a,a=D.extend(!0,D.ajaxSettings,b));for(var c in{context:1,url:1})c in b?a[c]=b[c]:c in D.ajaxSettings&&(a[c]=D.ajaxSettings[c]);return a},ajaxSettings:{url:bU,isLocal:bG.test(bV[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":D.parseJSON,"text xml":D.parseXML}},ajaxPrefilter:m(bS),ajaxTransport:m(bT),ajax:function(a,c){function d(a,c,d,l){if(u!==2){u=2,s&&clearTimeout(s),r=b,p=l||"",x.readyState=a?4:0;var o,q,t,w=d?j(e,x,d):b,y,z;if(a>=200&&a<300||a===304){if(e.ifModified){if(y=x.getResponseHeader("Last-Modified"))D.lastModified[n]=y;if(z=x.getResponseHeader("Etag"))D.etag[n]=z}if(a===304)c="notmodified",o=!0;else try{q=i(e,w),c="success",o=!0}catch(A){c="parsererror",t=A}}else{t=c;if(!c||a)c="error",a<0&&(a=0)}x.status=a,x.statusText=c,o?h.resolveWith(f,[q,c,x]):h.rejectWith(f,[x,c,t]),x.statusCode(m),m=b,v&&g.trigger("ajax"+(o?"Success":"Error"),[x,e,o?q:t]),k.resolveWith(f,[x,c]),v&&(g.trigger("ajaxComplete",[x,e]),--D.active||D.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var e=D.ajaxSetup({},c),f=e.context||e,g=f!==e&&(f.nodeType||f instanceof D)?D(f):D.event,h=D.Deferred(),k=D._Deferred(),m=e.statusCode||{},n,o={},p,q,r,s,t,u=0,v,w,x={readyState:0,setRequestHeader:function(a,b){return u||(o[a.toLowerCase().replace(bO,bP)]=b),this},getAllResponseHeaders:function(){return u===2?p:null},getResponseHeader:function(a){var c;if(u===2){if(!q){q={};while(c=bE.exec(p))q[c[1].toLowerCase()]=c[2]}c=q[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return u||(e.mimeType=a),this},abort:function(a){return a=a||"abort",r&&r.abort(a),d(0,a),this}};h.promise(x),x.success=x.done,x.error=x.fail,x.complete=k.done,x.statusCode=function(a){if(a){var b;if(u<2)for(b in a)m[b]=[m[b],a[b]];else b=a[x.status],x.then(b,b)}return this},e.url=((a||e.url)+"").replace(bD,"").replace(bI,bV[1]+"//"),e.dataTypes=D.trim(e.dataType||"*").toLowerCase().split(bM),e.crossDomain||(t=bQ.exec(e.url.toLowerCase()),e.crossDomain=t&&(t[1]!=bV[1]||t[2]!=bV[2]||(t[3]||(t[1]==="http:"?80:443))!=(bV[3]||(bV[1]==="http:"?80:443)))),e.data&&e.processData&&typeof e.data!="string"&&(e.data=D.param(e.data,e.traditional)),l(bS,e,c,x);if(u===2)return!1;v=e.global,e.type=e.type.toUpperCase(),e.hasContent=!bH.test(e.type),v&&D.active++===0&&D.event.trigger("ajaxStart");if(!e.hasContent){e.data&&(e.url+=(bJ.test(e.url)?"&":"?")+e.data),n=e.url;if(e.cache===!1){var y=D.now(),z=e.url.replace(bN,"$1_="+y);e.url=z+(z===e.url?(bJ.test(e.url)?"&":"?")+"_="+y:"")}}if(e.data&&e.hasContent&&e.contentType!==!1||c.contentType)o["Content-Type"]=e.contentType;e.ifModified&&(n=n||e.url,D.lastModified[n]&&(o["If-Modified-Since"]=D.lastModified[n]),D.etag[n]&&(o["If-None-Match"]=D.etag[n])),o.Accept=e.dataTypes[0]&&e.accepts[e.dataTypes[0]]?e.accepts[e.dataTypes[0]]+(e.dataTypes[0]!=="*"?", */*; q=0.01":""):e.accepts["*"];for(w in e.headers)x.setRequestHeader(w,e.headers[w]);if(!e.beforeSend||e.beforeSend.call(f,x,e)!==!1&&u!==2){for(w in{success:1,error:1,complete:1})x[w](e[w]);r=l(bT,e,c,x);if(r){x.readyState=1,v&&g.trigger("ajaxSend",[x,e]),e.async&&e.timeout>0&&(s=setTimeout(function(){x.abort("timeout")},e.timeout));try{u=1,r.send(o,d)}catch(A){status<2?d(-1,A):D.error(A)}}else d(-1,"No Transport");return x}return x.abort(),!1},param:function(a,c){var d=[],e=function(a,b){b=D.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=D.ajaxSettings.traditional);if(D.isArray(a)||a.jquery&&!D.isPlainObject(a))D.each(a,function(){e(this.name,this.value)});else for(var f in a)k(f,a[f],c,e);return d.join("&").replace(bA,"+")}}),D.extend({active:0,lastModified:{},etag:{}});var bX=D.now(),bY=/(\=)\?(&|$)|()\?\?()/i;D.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return D.expando+"_"+bX++}}),D.ajaxPrefilter("json jsonp",function(b,c,d){var e=typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||c.jsonpCallback||c.jsonp!=null||b.jsonp!==!1&&(bY.test(b.url)||e&&bY.test(b.data))){var f,g=b.jsonpCallback=D.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h=a[g],i=b.url,j=b.data,k="$1"+g+"$2",l=function(){a[g]=h,f&&D.isFunction(h)&&a[g](f[0])};return b.jsonp!==!1&&(i=i.replace(bY,k),b.url===i&&(e&&(j=j.replace(bY,k)),b.data===j&&(i+=(/\?/.test(i)?"&":"?")+b.jsonp+"="+g))),b.url=i,b.data=j,a[g]=function(a){f=[a]},d.then(l,l),b.converters["script json"]=function(){return f||D.error(g+" was not called"),f[0]},b.dataTypes[0]="json","script"}}),D.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return D.globalEval(a),a}}}),D.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),D.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=C.head||C.getElementsByTagName("head")[0]||C.documentElement;return{send:function(e,f){c=C.createElement("script"),c.async="async",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){if(!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||f(200,"success")},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var bZ=D.now(),b$,b_;D.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&g()||f()}:g,b_=D.ajaxSettings.xhr(),D.support.ajax=!!b_,D.support.cors=b_&&"withCredentials"in b_,b_=b,D.support.ajax&&D.ajaxTransport(function(a){if(!a.crossDomain||D.support.cors){var c;return{send:function(d,e){var f=a.xhr(),g,i;a.username?f.open(a.type,a.url,a.async,a.username,a.password):f.open(a.type,a.url,a.async);if(a.xhrFields)for(i in a.xhrFields)f[i]=a.xhrFields[i];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),(!a.crossDomain||a.hasContent)&&!d["X-Requested-With"]&&(d["X-Requested-With"]="XMLHttpRequest");try{for(i in d)f.setRequestHeader(i,d[i])}catch(j){}f.send(a.hasContent&&a.data||null),c=function(d,h){var i,j,k,l,m;try{if(c&&(h||f.readyState===4)){c=b,g&&(f.onreadystatechange=D.noop,delete b$[g]);if(h)f.readyState!==4&&f.abort();else{i=f.status,k=f.getAllResponseHeaders(),l={},m=f.responseXML,m&&m.documentElement&&(l.xml=m),l.text=f.responseText;try{j=f.statusText}catch(n){j=""}i||!a.isLocal||a.crossDomain?i===1223&&(i=204):i=l.text?200:404}}}catch(o){h||e(-1,o)}l&&e(i,j,l,k)},a.async&&f.readyState!==4?(b$||(b$={},h()),g=bZ++,f.onreadystatechange=b$[g]=c):c()},abort:function(){c&&c(0,1)}}}});var ca={},cb=/^(?:toggle|show|hide)$/,cc=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cd,ce=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];D.fn.extend({show:function(a,b,c){var f,g;if(a||a===0)return this.animate(e("show",3),a,b,c);for(var h=0,i=this.length;h<i;h++)f=this[h],g=f.style.display,!D._data(f,"olddisplay")&&g==="none"&&(g=f.style.display=""),g===""&&D.css(f,"display")==="none"&&D._data(f,"olddisplay",d(f.nodeName));for(h=0;h<i;h++){f=this[h],g=f.style.display;if(g===""||g==="none")f.style.display=D._data(f,"olddisplay")||""}return this},hide:function(a,b,c){if(a||a===0)return this.animate(e("hide",3),a,b,c);for(var d=0,f=this.length;d<f;d++){var g=D.css(this[d],"display");g!=="none"&&!D._data(this[d],"olddisplay")&&D._data(this[d],"olddisplay",g)}for(d=0;d<f;d++)this[d].style.display="none";return this},_toggle:D.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";return D.isFunction(a)&&D.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:D(this).is(":hidden");D(this)[b?"show":"hide"]()}):this.animate(e("toggle",3),a,b,c),this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,e){var f=D.speed(b,c,e);return D.isEmptyObject(a)?this.each(f.complete):this[f.queue===!1?"each":"queue"](function(){var b=D.extend({},f),c,e=this.nodeType===1,g=e&&D(this).is(":hidden"),h=this;for(c in a){var i=D.camelCase(c);c!==i&&(a[i]=a[c],delete a[c],c=i);if(a[c]==="hide"&&g||a[c]==="show"&&!g)return b.complete.call(this);if(e&&(c==="height"||c==="width")){b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(D.css(this,"display")==="inline"&&D.css(this,"float")==="none")if(D.support.inlineBlockNeedsLayout){var j=d(this.nodeName);j==="inline"?this.style.display="inline-block":(this.style.display="inline",this.style.zoom=1)}else this.style.display="inline-block"}D.isArray(a[c])&&((b.specialEasing=b.specialEasing||{})[c]=a[c][1],a[c]=a[c][0])}return b.overflow!=null&&(this.style.overflow="hidden"),b.curAnim=D.extend({},a),D.each(a,function(c,d){var e=new D.fx(h,b,c);if(cb.test(d))e[d==="toggle"?g?"show":"hide":d](a);else{var f=cc.exec(d),i=e.cur();if(f){var j=parseFloat(f[2]),k=f[3]||(D.cssNumber[c]?"":"px");k!=="px"&&(D.style(h,c,(j||1)+k),i=(j||1)/e.cur()*i,D.style(h,c,i+k)),f[1]&&(j=(f[1]==="-="?-1:1)*j+i),e.custom(i,j,k)}else e.custom(i,d,"")}}),!0})},stop:function(a,b){var c=D.timers;return a&&this.queue([]),this.each(function(){for(var a=c.length-1;a>=0;a--)c[a].elem===this&&(b&&c[a](!0),c.splice(a,1))}),b||this.dequeue(),this}}),D.each({slideDown:e("show",1),slideUp:e("hide",1),slideToggle:e("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){D.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),D.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?D.extend({},a):{complete:c||!c&&b||D.isFunction(a)&&a,duration:a,easing:c&&b||b&&!D.isFunction(b)&&b};return d.duration=D.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in D.fx.speeds?D.fx.speeds[d.duration]:D.fx.speeds._default,d.old=d.complete,d.complete=function(){d.queue!==!1&&D(this).dequeue(),D.isFunction(d.old)&&d.old.call(this)},d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig||(b.orig={})}}),D.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(D.fx.step[this.prop]||D.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var a,b=D.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a}return this.elem[this.prop]},custom:function(a,b,c){function d(a){return e.step(a)}var e=this,f=D.fx;this.startTime=D.now(),this.start=a,this.end=b,this.unit=c||this.unit||(D.cssNumber[this.prop]?"":"px"),this.now=this.start,this.pos=this.state=0,d.elem=this.elem,d()&&D.timers.push(d)&&!cd&&(cd=setInterval(f.tick,f.interval))},show:function(){this.options.orig[this.prop]=D.style(this.elem,this.prop),this.options.show=!0,this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),D(this.elem).show()},hide:function(){this.options.orig[this.prop]=D.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b=D.now(),c=!0;if(a||b>=this.options.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),this.options.curAnim[this.prop]=!0;for(var d in this.options.curAnim)this.options.curAnim[d]!==!0&&(c=!1);if(c){if(this.options.overflow!=null&&!D.support.shrinkWrapBlocks){var e=this.elem,f=this.options;D.each(["","X","Y"],function(a,b){e.style["overflow"+b]=f.overflow[a]})}this.options.hide&&D(this.elem).hide();if(this.options.hide||this.options.show)for(var g in this.options.curAnim)D.style(this.elem,g,this.options.orig[g]);this.options.complete.call(this.elem)}return!1}var h=b-this.startTime;this.state=h/this.options.duration;var i=this.options.specialEasing&&this.options.specialEasing[this.prop],j=this.options.easing||(D.easing.swing?"swing":"linear");return this.pos=D.easing[i||j](this.state,h,0,1,this.options.duration),this.now=this.start+(this.end-this.start)*this.pos,this.update(),!0}},D.extend(D.fx,{tick:function(){var a=D.timers;for(var b=0;b<a.length;b++)a[b]()||a.splice(b--,1);a.length||D.fx.stop()},interval:13,stop:function(){clearInterval(cd),cd=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){D.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit:a.elem[a.prop]=a.now}}}),D.expr&&D.expr.filters&&(D.expr.filters.animated=function(a){return D.grep(D.timers,function(b){return a===b.elem}).length});var cf=/^t(?:able|d|h)$/i,cg=/^(?:body|html)$/i;"getBoundingClientRect"in C.documentElement?D.fn.offset=function(a){var b=this[0],d;if(a)return this.each(function(b){D.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return D.offset.bodyOffset(b);try{d=b.getBoundingClientRect()}catch(e){}var f=b.ownerDocument,g=f.documentElement;if(!d||!D.contains(g,b))return d?{top:d.top,left:d.left}:{top:0,left:0};var h=f.body,i=c(f),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||D.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||D.support.boxModel&&g.scrollLeft||h.scrollLeft,n=d.top+l-j,o=d.left+m-k;return{top:n,left:o}}:D.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){D.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return D.offset.bodyOffset(b);D.offset.initialize();var c,d=b.offsetParent,e=b,f=b.ownerDocument,g=f.documentElement,h=f.body,i=f.defaultView,j=i?i.getComputedStyle(b,null):b.currentStyle,k=b.offsetTop,l=b.offsetLeft;while((b=b.parentNode)&&b!==h&&b!==g){if(D.offset.supportsFixedPosition&&j.position==="fixed")break;c=i?i.getComputedStyle(b,null):b.currentStyle,k-=b.scrollTop,l-=b.scrollLeft,b===d&&(k+=b.offsetTop,l+=b.offsetLeft,D.offset.doesNotAddBorder&&(!D.offset.doesAddBorderForTableAndCells||!cf.test(b.nodeName))&&(k+=parseFloat(c.borderTopWidth)||0,l+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),D.offset.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(k+=parseFloat(c.borderTopWidth)||0,l+=parseFloat(c.borderLeftWidth)||0),j=c}if(j.position==="relative"||j.position==="static")k+=h.offsetTop,l+=h.offsetLeft;return D.offset.supportsFixedPosition&&j.position==="fixed"&&(k+=Math.max(g.scrollTop,h.scrollTop),l+=Math.max(g.scrollLeft,h.scrollLeft)),{top:k,left:l}},D.offset={initialize:function(){var a=C.body,b=C.createElement("div"),c,d,e,f,g=parseFloat(D.css(a,"marginTop"))||0,h="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";D.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"}),b.innerHTML=h,a.insertBefore(b,a.firstChild),c=b.firstChild,d=c.firstChild,f=c.nextSibling.firstChild.firstChild,this.doesNotAddBorder=d.offsetTop!==5,this.doesAddBorderForTableAndCells=f.offsetTop===5,d.style.position="fixed",d.style.top="20px",this.supportsFixedPosition=d.offsetTop===20||d.offsetTop===15,d.style.position=d.style.top="",c.style.overflow="hidden",c.style.position="relative",this.subtractsBorderForOverflowNotVisible=d.offsetTop===-5,this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==g,a.removeChild(b),a=b=c=d=e=f=null,D.offset.initialize=D.noop},bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return D.offset.initialize(),D.offset.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(D.css(a,"marginTop"))||0,c+=parseFloat(D.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=D.css(a,"position");d==="static"&&(a.style.position="relative");var e=D(a),f=e.offset(),g=D.css(a,"top"),h=D.css(a,"left"),i=d==="absolute"&&D.inArray("auto",[g,h])>-1,j={},k={},l,m;i&&(k=e.position()),l=i?k.top:parseInt(g,10)||0,m=i?k.left:parseInt(h,10)||0,D.isFunction(b)&&(b=b.call(a,c,f)),b.top!=null&&(j.top=b.top-f.top+l),b.left!=null&&(j.left=b.left-f.left+m),"using"in b?b.using.call(a,j):e.css(j)}},D.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cg.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(D.css(a,"marginTop"))||0,c.left-=parseFloat(D.css(a,"marginLeft"))||0,d.top+=parseFloat(D.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(D.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||C.body;while(a&&!cg.test(a.nodeName)&&D.css(a,"position")==="static")a=a.offsetParent;return a})}}),D.each(["Left","Top"],function(a,d){var e="scroll"+d;D.fn[e]=function(d){var f=this[0],g;return f?d!==b?this.each(function(){g=c(this),g?g.scrollTo(a?D(g).scrollLeft():d,a?d:D(g).scrollTop()):this[e]=d}):(g=c(f),g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:D.support.boxModel&&g.document.documentElement[e]||g.document.body[e]:f[e]):null}}),D.each(["Height","Width"],function(a,c){var d=c.toLowerCase();D.fn["inner"+c]=function(){return this[0]?parseFloat(D.css(this[0],d,"padding")):null},D.fn["outer"+c]=function(a){return this[0]?parseFloat(D.css(this[0],d,a?"margin":"border")):null},D.fn[d]=function(a){var e=this[0];if(!e)return a==null?null:this;if(D.isFunction(a))return this.each(function(b){var c=D(this);c[d](a.call(this,b,c[d]()))});if(D.isWindow(e)){var f=e.document.documentElement["client"+c];return e.document.compatMode==="CSS1Compat"&&f||e.document.body["client"+c]||f}if(e.nodeType===9)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var g=D.css(e,d),h=parseFloat(g);return D.isNaN(h)?g:h}return this.css(d,typeof a=="string"?a:a+"px")}}),a.jQuery=a.$=D})(window);
((function(){function A(a,b,c){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;a._chain&&(a=a._wrapped),b._chain&&(b=b._wrapped);if(a.isEqual&&w.isFunction(a.isEqual))return a.isEqual(b);if(b.isEqual&&w.isFunction(b.isEqual))return b.isEqual(a);var d=i.call(a);if(d!=i.call(b))return!1;switch(d){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return!1;var e=c.length;while(e--)if(c[e]==a)return!0;c.push(a);var f=0,g=!0;if(d=="[object Array]"){f=a.length,g=f==b.length;if(g)while(f--)if(!(g=f in a==f in b&&A(a[f],b[f],c)))break}else{if("constructor"in a!="constructor"in b||a.constructor!=b.constructor)return!1;for(var h in a)if(w.has(a,h)){f++;if(!(g=w.has(b,h)&&A(a[h],b[h],c)))break}if(g){for(h in b)if(w.has(b,h)&&!(f--))break;g=!f}}return c.pop(),g}var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.slice,h=d.unshift,i=e.toString,j=e.hasOwnProperty,k=d.forEach,l=d.map,m=d.reduce,n=d.reduceRight,o=d.filter,p=d.every,q=d.some,r=d.indexOf,s=d.lastIndexOf,t=Array.isArray,u=Object.keys,v=f.bind,w=function(a){return new E(a)};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=w),exports._=w):a._=w,w.VERSION="1.3.1";var x=w.each=w.forEach=function(a,b,d){if(a==null)return;if(k&&a.forEach===k)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;e<f;e++)if(e in a&&b.call(d,a[e],e,a)===c)return}else for(var g in a)if(w.has(a,g)&&b.call(d,a[g],g,a)===c)return};w.map=w.collect=function(a,b,c){var d=[];return a==null?d:l&&a.map===l?a.map(b,c):(x(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),a.length===+a.length&&(d.length=a.length),d)},w.reduce=w.foldl=w.inject=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(m&&a.reduce===m)return d&&(b=w.bind(b,d)),e?a.reduce(b,c):a.reduce(b);x(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c},w.reduceRight=w.foldr=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(n&&a.reduceRight===n)return d&&(b=w.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=w.toArray(a).reverse();return d&&!e&&(b=w.bind(b,d)),e?w.reduce(f,b,c,d):w.reduce(f,b)},w.find=w.detect=function(a,b,c){var d;return y(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0}),d},w.filter=w.select=function(a,b,c){var d=[];return a==null?d:o&&a.filter===o?a.filter(b,c):(x(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},w.reject=function(a,b,c){var d=[];return a==null?d:(x(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)}),d)},w.every=w.all=function(a,b,d){var e=!0;return a==null?e:p&&a.every===p?a.every(b,d):(x(a,function(a,f,g){if(!(e=e&&b.call(d,a,f,g)))return c}),e)};var y=w.some=w.any=function(a,b,d){b||(b=w.identity);var e=!1;return a==null?e:q&&a.some===q?a.some(b,d):(x(a,function(a,f,g){if(e||(e=b.call(d,a,f,g)))return c}),!!e)};w.include=w.contains=function(a,b){var c=!1;return a==null?c:r&&a.indexOf===r?a.indexOf(b)!=-1:(c=y(a,function(a){return a===b}),c)},w.invoke=function(a,b){var c=g.call(arguments,2);return w.map(a,function(a){return(w.isFunction(b)?b||a:a[b]).apply(a,c)})},w.pluck=function(a,b){return w.map(a,function(a){return a[b]})},w.max=function(a,b,c){if(!b&&w.isArray(a))return Math.max.apply(Math,a);if(!b&&w.isEmpty(a))return-Infinity;var d={computed:-Infinity};return x(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},w.min=function(a,b,c){if(!b&&w.isArray(a))return Math.min.apply(Math,a);if(!b&&w.isEmpty(a))return Infinity;var d={computed:Infinity};return x(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},w.shuffle=function(a){var b=[],c;return x(a,function(a,d,e){d==0?b[0]=a:(c=Math.floor(Math.random()*(d+1)),b[d]=b[c],b[c]=a)}),b},w.sortBy=function(a,b,c){return w.pluck(w.map(a,function(a,d,e){return{value:a,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),"value")},w.groupBy=function(a,b){var c={},d=w.isFunction(b)?b:function(a){return a[b]};return x(a,function(a,b){var e=d(a,b);(c[e]||(c[e]=[])).push(a)}),c},w.sortedIndex=function(a,b,c){c||(c=w.identity);var d=0,e=a.length;while(d<e){var f=d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d},w.toArray=function(a){return a?a.toArray?a.toArray():w.isArray(a)?g.call(a):w.isArguments(a)?g.call(a):w.values(a):[]},w.size=function(a){return w.toArray(a).length},w.first=w.head=function(a,b,c){return b!=null&&!c?g.call(a,0,b):a[0]},w.initial=function(a,b,c){return g.call(a,0,a.length-(b==null||c?1:b))},w.last=function(a,b,c){return b!=null&&!c?g.call(a,Math.max(a.length-b,0)):a[a.length-1]},w.rest=w.tail=function(a,b,c){return g.call(a,b==null||c?1:b)},w.compact=function(a){return w.filter(a,function(a){return!!a})},w.flatten=function(a,b){return w.reduce(a,function(a,c){return w.isArray(c)?a.concat(b?c:w.flatten(c)):(a[a.length]=c,a)},[])},w.without=function(a){return w.difference(a,g.call(arguments,1))},w.uniq=w.unique=function(a,b,c){var d=c?w.map(a,c):a,e=[];return w.reduce(d,function(c,d,f){if(0==f||(b===!0?w.last(c)!=d:!w.include(c,d)))c[c.length]=d,e[e.length]=a[f];return c},[]),e},w.union=function(){return w.uniq(w.flatten(arguments,!0))},w.intersection=w.intersect=function(a){var b=g.call(arguments,1);return w.filter(w.uniq(a),function(a){return w.every(b,function(b){return w.indexOf(b,a)>=0})})},w.difference=function(a){var b=w.flatten(g.call(arguments,1));return w.filter(a,function(a){return!w.include(b,a)})},w.zip=function(){var a=g.call(arguments),b=w.max(w.pluck(a,"length")),c=new Array(b);for(var d=0;d<b;d++)c[d]=w.pluck(a,""+d);return c},w.indexOf=function(a,b,c){if(a==null)return-1;var d,e;if(c)return d=w.sortedIndex(a,b),a[d]===b?d:-1;if(r&&a.indexOf===r)return a.indexOf(b);for(d=0,e=a.length;d<e;d++)if(d in a&&a[d]===b)return d;return-1},w.lastIndexOf=function(a,b){if(a==null)return-1;if(s&&a.lastIndexOf===s)return a.lastIndexOf(b);var c=a.length;while(c--)if(c in a&&a[c]===b)return c;return-1},w.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);while(e<d)f[e++]=a,a+=c;return f};var z=function(){};w.bind=function(b,c){var d,e;if(b.bind===v&&v)return v.apply(b,g.call(arguments,1));if(!w.isFunction(b))throw new TypeError;return e=g.call(arguments,2),d=function(){if(this instanceof d){z.prototype=b.prototype;var a=new z,f=b.apply(a,e.concat(g.call(arguments)));return Object(f)===f?f:a}return b.apply(c,e.concat(g.call(arguments)))}},w.bindAll=function(a){var b=g.call(arguments,1);return b.length==0&&(b=w.functions(a)),x(b,function(b){a[b]=w.bind(a[b],a)}),a},w.memoize=function(a,b){var c={};return b||(b=w.identity),function(){var d=b.apply(this,arguments);return w.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},w.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(a,c)},b)},w.defer=function(a){return w.delay.apply(w,[a,1].concat(g.call(arguments,1)))},w.throttle=function(a,b){var c,d,e,f,g,h=w.debounce(function(){g=f=!1},b);return function(){c=this,d=arguments;var i=function(){e=null,g&&a.apply(c,d),h()};e||(e=setTimeout(i,b)),f?g=!0:a.apply(c,d),h(),f=!0}},w.debounce=function(a,b){var c;return function(){var d=this,e=arguments,f=function(){c=null,a.apply(d,e)};clearTimeout(c),c=setTimeout(f,b)}},w.once=function(a){var b=!1,c;return function(){return b?c:(b=!0,c=a.apply(this,arguments))}},w.wrap=function(a,b){return function(){var c=[a].concat(g.call(arguments,0));return b.apply(this,c)}},w.compose=function(){var a=arguments;return function(){var b=arguments;for(var c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},w.after=function(a,b){return a<=0?b():function(){if(--a<1)return b.apply(this,arguments)}},w.keys=u||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)w.has(a,c)&&(b[b.length]=c);return b},w.values=function(a){return w.map(a,w.identity)},w.functions=w.methods=function(a){var b=[];for(var c in a)w.isFunction(a[c])&&b.push(c);return b.sort()},w.extend=function(a){return x(g.call(arguments,1),function(b){for(var c in b)a[c]=b[c]}),a},w.defaults=function(a){return x(g.call(arguments,1),function(b){for(var c in b)a[c]==null&&(a[c]=b[c])}),a},w.clone=function(a){return w.isObject(a)?w.isArray(a)?a.slice():w.extend({},a):a},w.tap=function(a,b){return b(a),a},w.isEqual=function(a,b){return A(a,b,[])},w.isEmpty=function(a){if(w.isArray(a)||w.isString(a))return a.length===0;for(var b in a)if(w.has(a,b))return!1;return!0},w.isElement=function(a){return!!a&&a.nodeType==1},w.isArray=t||function(a){return i.call(a)=="[object Array]"},w.isObject=function(a){return a===Object(a)},w.isArguments=function(a){return i.call(a)=="[object Arguments]"},w.isArguments(arguments)||(w.isArguments=function(a){return!!a&&!!w.has(a,"callee")}),w.isFunction=function(a){return i.call(a)=="[object Function]"},w.isString=function(a){return i.call(a)=="[object String]"},w.isNumber=function(a){return i.call(a)=="[object Number]"},w.isNaN=function(a){return a!==a},w.isBoolean=function(a){return a===!0||a===!1||i.call(a)=="[object Boolean]"},w.isDate=function(a){return i.call(a)=="[object Date]"},w.isRegExp=function(a){return i.call(a)=="[object RegExp]"},w.isNull=function(a){return a===null},w.isUndefined=function(a){return a===void 0},w.has=function(a,b){return j.call(a,b)},w.noConflict=function(){return a._=b,this},w.identity=function(a){return a},w.times=function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)},w.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},w.mixin=function(a){x(w.functions(a),function(b){G(b,w[b]=a[b])})};var B=0;w.uniqueId=function(a){var b=B++;return a?a+b:b},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/.^/,D=function(a){return a.replace(/\\\\/g,"\\").replace(/\\'/g,"'")};w.template=function(a,b){var c=w.templateSettings,d="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.escape||C,function(a,b){return"',_.escape("+D(b)+"),'"}).replace(c.interpolate||C,function(a,b){return"',"+D(b)+",'"}).replace(c.evaluate||C,function(a,b){return"');"+D(b).replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",e=new Function("obj","_",d);return b?e(b,w):function(a){return e.call(this,a,w)}},w.chain=function(a){return w(a).chain()};var E=function(a){this._wrapped=a};w.prototype=E.prototype;var F=function(a,b){return b?w(a).chain():a},G=function(a,b){E.prototype[a]=function(){var a=g.call(arguments);return h.call(a,this._wrapped),F(b.apply(w,a),this._chain)}};w.mixin(w),x(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];E.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);var d=c.length;return(a=="shift"||a=="splice")&&d===0&&delete c[0],F(c,this._chain)}}),x(["concat","join","slice"],function(a){var b=d[a];E.prototype[a]=function(){return F(b.apply(this._wrapped,arguments),this._chain)}}),E.prototype.chain=function(){return this._chain=!0,this},E.prototype.value=function(){return this._wrapped}})).call(this);
Ext.apply(String.prototype,function(){function a(a,b){return a=a||30,b=Object.isUndefined(b)?"...":b,this.length>a?this.slice(0,a-b.length)+b:String(this)}function b(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}function c(){return this.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,"")}function d(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function e(){return this.stripTags().replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}function f(){return this.split("")}function g(a){return a<1?"":(new Array(a+1)).join(this)}function h(){var a=this.split("-"),b=a.length;if(b==1)return a[0];var c=this.charAt(0)=="-"?a[0].charAt(0).toUpperCase()+a[0].substring(1):a[0];for(var d=1;d<b;d++)c+=a[d].charAt(0).toUpperCase()+a[d].substring(1);return c}function i(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()}function j(){return this.charAt(0).toLowerCase()+this.substring(1)}function k(){return this.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/-/g,"_").toLowerCase()}function l(){return this.replace(/_/g,"-")}function m(a){return this.indexOf(a)>-1}function n(a){return this.indexOf(a)===0}function o(a){var b=this.length-a.length;return b>=0&&this.lastIndexOf(a)===b}function p(){return this==""}function q(){return/^\s*$/.test(this)}return{truncate:a,strip:String.prototype.trim?String.prototype.trim:b,stripTags:c,escapeHTML:d,unescapeHTML:e,toArray:f,times:g,camelize:h,capitalize:i,uncapitalize:j,underscore:k,dasherize:l,include:m,startsWith:n,endsWith:o,empty:p,blank:q}}());
Ext.define("Ext.ux.ColorField",{extend:"Ext.form.TriggerField",alias:"widget.colorfield",invalidText:"'{0}' is not a valid color - it must be in a the hex format (# followed by 3 or 6 letters/numbers 0-9 A-F)",triggerClass:"x-form-color-trigger",defaultAutoCreate:{tag:"input",type:"text",size:"10",maxlength:"7",autocomplete:"off"},maskRe:/[#a-f0-9]/i,validateValue:function(a){if(!Ext.ux.ColorField.superclass.validateValue.call(this,a))return!1;if(a.length<1)return this.setColor(""),!0;var b=this.parseColor(a);return!a||b==0?(this.markInvalid(String.format(this.invalidText,a)),!1):(this.setColor(a),!0)},setColor:function(a){if(a==""||a==undefined)this.emptyText!=""&&this.parseColor(this.emptyText)?a=this.emptyText:a="transparent";this.trigger?this.trigger.setStyle({"background-color":a}):this.on("render",function(){this.setColor(a)},this)},validateBlur:function(){return!this.menu||!this.menu.isVisible()},getValue:function(){return Ext.ux.ColorField.superclass.getValue.call(this)||""},setValue:function(a){Ext.ux.ColorField.superclass.setValue.call(this,this.formatColor(a)),this.setColor(this.formatColor(a))},parseColor:function(a){return!a||a.substring(0,1)!="#"?!1:a.length==4||a.length==7},formatColor:function(a){return!a||this.parseColor(a)?a:a.length==3||a.length==6?"#"+a:""},menuListeners:{select:function(a,b){this.setValue(b)},show:function(){this.onFocus()},hide:function(){this.focus.defer(10,this);var a=this.menuListeners;this.menu.un("select",a.select,this),this.menu.un("show",a.show,this),this.menu.un("hide",a.hide,this)}},onTriggerClick:function(){if(this.disabled)return;this.menu==null&&(this.menu=new Ext.menu.ColorMenu),this.menu.on(Ext.apply({},this.menuListeners,{scope:this})),this.menu.show(this.el,"tl-bl?")}});
(function(a){var b="0.4.0",c="hasOwnProperty",d=/[\.\/]/,e="*",f=function(){},g=function(a,b){return a-b},h,i,j={n:{}},k=function(a,b){var c=j,d=i,e=Array.prototype.slice.call(arguments,2),f=k.listeners(a),l=0,m=!1,n,o=[],p={},q=[],r=[];h=a,i=0;for(var s=0,t=f.length;s<t;s++)"zIndex"in f[s]&&(o.push(f[s].zIndex),f[s].zIndex<0&&(p[f[s].zIndex]=f[s]));o.sort(g);while(o[l]<0){n=p[o[l++]],q.push(n.apply(b,e));if(i)return i=d,q}for(s=0;s<t;s++){n=f[s];if("zIndex"in n)if(n.zIndex==o[l]){q.push(n.apply(b,e));if(i)return i=d,q;do{l++,n=p[o[l]],n&&q.push(n.apply(b,e));if(i)return i=d,q}while(n)}else p[n.zIndex]=n;else{q.push(n.apply(b,e));if(i)return i=d,q}}return i=d,q.length?q:null};k.listeners=function(a){var b=a.split(d),c=j,f,g,h,i,k,l,m,n,o=[c],p=[];for(i=0,k=b.length;i<k;i++){n=[];for(l=0,m=o.length;l<m;l++){c=o[l].n,g=[c[b[i]],c[e]],h=2;while(h--)f=g[h],f&&(n.push(f),p=p.concat(f.f||[]))}o=n}return p},k.on=function(a,b){var c=a.split(d),e=j;for(var g=0,h=c.length;g<h;g++)e=e.n,!e[c[g]]&&(e[c[g]]={n:{}}),e=e[c[g]];e.f=e.f||[];for(g=0,h=e.f.length;g<h;g++)if(e.f[g]==b)return f;return e.f.push(b),function(a){+a==+a&&(b.zIndex=+a)}},k.stop=function(){i=1},k.nt=function(a){return a?(new RegExp("(?:\\.|\\/|^)"+a+"(?:\\.|\\/|$)")).test(h):h},k.unbind=function(a,b){var f=a.split(d),g,h,i,k,l,m,n,o=[j];for(k=0,l=f.length;k<l;k++)for(m=0;m<o.length;m+=i.length-2){i=[m,1],g=o[m].n;if(f[k]!=e)g[f[k]]&&i.push(g[f[k]]);else for(h in g)g[c](h)&&i.push(g[h]);o.splice.apply(o,i)}for(k=0,l=o.length;k<l;k++){g=o[k];while(g.n){if(b){if(g.f){for(m=0,n=g.f.length;m<n;m++)if(g.f[m]==b){g.f.splice(m,1);break}!g.f.length&&delete g.f}for(h in g.n)if(g.n[c](h)&&g.n[h].f){var p=g.n[h].f;for(m=0,n=p.length;m<n;m++)if(p[m]==b){p.splice(m,1);break}!p.length&&delete g.n[h].f}}else{delete g.f;for(h in g.n)g.n[c](h)&&g.n[h].f&&delete g.n[h].f}g=g.n}}},k.once=function(a,b){var c=function(){b.apply(this,arguments),k.unbind(a,c)};return k.on(a,c)},k.version=b,k.toString=function(){return"You are running Eve "+b},typeof module!="undefined"&&module.exports?module.exports=k:a.eve=k})(this),function(){function a(a,b,d,e,g,h){d=$(d);var i,j,l,n=[],o,p,r,s=a.ms,t={},u={},v={};if(e)for(y=0,z=co.length;y<z;y++){var w=co[y];if(w.el.id==b.id&&w.anim==a){w.percent!=d?(co.splice(y,1),l=1):j=w,b.attr(w.totalOrigin);break}}else e=+u;for(var y=0,z=a.percents.length;y<z;y++){if(a.percents[y]==d||a.percents[y]>e*a.top){d=a.percents[y],p=a.percents[y-1]||0,s=s/a.top*(d-p),o=a.percents[y+1],i=a.anim[d];break}e&&b.attr(a.anim[a.percents[y]])}if(!!i){if(!j){for(var A in i)if(i[q](A))if(bc[q](A)||b.paper.customAttributes[q](A)){t[A]=b.attr(A),t[A]==null&&(t[A]=bb[A]),u[A]=i[A];switch(bc[A]){case M:v[A]=(u[A]-t[A])/s;break;case"colour":t[A]=k.getRGB(t[A]);var D=k.getRGB(u[A]);v[A]={r:(D.r-t[A].r)/s,g:(D.g-t[A].g)/s,b:(D.b-t[A].b)/s};break;case"path":var E=bM(t[A],u[A]),F=E[1];t[A]=E[0],v[A]=[];for(y=0,z=t[A].length;y<z;y++){v[A][y]=[0];for(var G=1,H=t[A][y].length;G<H;G++)v[A][y][G]=(F[y][G]-t[A][y][G])/s}break;case"transform":var I=b._,J=bV(I[A],u[A]);if(J){t[A]=J.from,u[A]=J.to,v[A]=[],v[A].real=!0;for(y=0,z=t[A].length;y<z;y++){v[A][y]=[t[A][y][0]];for(G=1,H=t[A][y].length;G<H;G++)v[A][y][G]=(u[A][y][G]-t[A][y][G])/s}}else{var K=b.matrix||new f,L={_:{transform:I.transform},getBBox:function(){return b.getBBox(1)}};t[A]=[K.a,K.b,K.c,K.d,K.e,K.f],bT(L,u[A]),u[A]=L._.transform,v[A]=[(L.matrix.a-K.a)/s,(L.matrix.b-K.b)/s,(L.matrix.c-K.c)/s,(L.matrix.d-K.d)/s,(L.matrix.e-K.e)/s,(L.matrix.e-K.f)/s]}break;case"csv":var N=B(i[A])[C](m),O=B(t[A])[C](m);if(A=="clip-rect"){t[A]=O,v[A]=[],y=O.length;while(y--)v[A][y]=(N[y]-t[A][y])/s}u[A]=N;break;default:N=[][x](i[A]),O=[][x](t[A]),v[A]=[],y=b.paper.customAttributes[A].length;while(y--)v[A][y]=((N[y]||0)-(O[y]||0))/s}}var P=i.easing,Q=k.easing_formulas[P];if(!Q){Q=B(P).match(X);if(Q&&Q.length==5){var R=Q;Q=function(a){return c(a,+R[1],+R[2],+R[3],+R[4],s)}}else Q=bo}r=i.start||a.start||+(new Date),w={anim:a,percent:d,timestamp:r,start:r+(a.del||0),status:0,initstatus:e||0,stop:!1,ms:s,easing:Q,from:t,diff:v,to:u,el:b,callback:i.callback,prev:p,next:o,repeat:h||a.times,origin:b.attr(),totalOrigin:g},co.push(w);if(e&&!j&&!l){w.stop=!0,w.start=new Date-s*e;if(co.length==1)return cq()}l&&(w.start=new Date-w.ms*e),co.length==1&&cp(cq)}else j.initstatus=e,j.start=new Date-j.ms*e;eve("anim.start."+b.id,b,a)}}function b(a,b){var c=[],d={};this.ms=b,this.times=1;if(a){for(var e in a)a[q](e)&&(d[$(e)]=a[e],c.push($(e)));c.sort(bm)}this.anim=d,this.top=c[c.length-1],this.percents=c}function c(a,b,c,d,e,f){function g(a,b){var c,d,e,f,g,h;for(e=a,h=0;h<8;h++){f=i(e)-a;if(J(f)<b)return e;g=(3*l*e+2*k)*e+j;if(J(g)<1e-6)break;e-=f/g}c=0,d=1,e=a;if(e<c)return c;if(e>d)return d;while(c<d){f=i(e);if(J(f-a)<b)return e;a>f?c=e:d=e,e=(d-c)/2+c}return e}function h(a,b){var c=g(a,b);return((o*c+n)*c+m)*c}function i(a){return((l*a+k)*a+j)*a}var j=3*b,k=3*(d-b)-j,l=1-j-k,m=3*c,n=3*(e-c)-m,o=1-m-n;return h(a,1/(200*f))}function d(){return this.x+A+this.y+A+this.width+" × "+this.height}function e(){return this.x+A+this.y}function f(a,b,c,d,e,f){a!=null?(this.a=+a,this.b=+b,this.c=+c,this.d=+d,this.e=+e,this.f=+f):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function g(a){var b=[];for(var c=0,d=a.length;d-2>c;c+=2){var e=[{x:+a[c],y:+a[c+1]},{x:+a[c],y:+a[c+1]},{x:+a[c+2],y:+a[c+3]},{x:+a[c+4],y:+a[c+5]}];d-4==c?(e[0]={x:+a[c-2],y:+a[c-1]},e[3]=e[2]):c&&(e[0]={x:+a[c-2],y:+a[c-1]}),b.push(["C",(-e[0].x+6*e[1].x+e[2].x)/6,(-e[0].y+6*e[1].y+e[2].y)/6,(e[1].x+6*e[2].x-e[3].x)/6,(e[1].y+6*e[2].y-e[3].y)/6,e[2].x,e[2].y])}return b}function h(){return this.hex}function i(a,b,c){function d(){var e=Array.prototype.slice.call(arguments,0),f=e.join("␀"),g=d.cache=d.cache||{},h=d.count=d.count||[];return g[q](f)?(j(h,f),c?c(g[f]):g[f]):(h.length>=1e3&&delete g[h.shift()],h.push(f),g[f]=a[w](b,e),c?c(g[f]):g[f])}return d}function j(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return a.push(a.splice(c,1)[0])}function k(a){if(k.is(a,"function"))return l?a():eve.on("DOMload",a);if(k.is(a,O))return k._engine.create[w](k,a.splice(0,3+k.is(a[0],M))).add(a);var b=Array.prototype.slice.call(arguments,0);if(k.is(b[b.length-1],"function")){var c=b.pop();return l?c.call(k._engine.create[w](k,b)):eve.on("DOMload",function(){c.call(k._engine.create[w](k,b))})}return k._engine.create[w](k,arguments)}k.version="2.0.1",k.eve=eve;var l,m=/[, ]+/,n={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},o=/\{(\d+)\}/g,p="prototype",q="hasOwnProperty",r={doc:document,win:window},s={was:Object.prototype[q].call(r.win,"Raphael"),is:r.win.Raphael},t=function(){this.ca=this.customAttributes={}},u,v="appendChild",w="apply",x="concat",y="createTouch"in r.doc,z="",A=" ",B=String,C="split",D="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[C](A),E={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},F=B.prototype.toLowerCase,G=Math,H=G.max,I=G.min,J=G.abs,K=G.pow,L=G.PI,M="number",N="string",O="array",P="toString",Q="fill",R=Object.prototype.toString,S={},T="push",U=k._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,V=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,W={NaN:1,Infinity:1,"-Infinity":1},X=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Y=G.round,Z="setAttribute",$=parseFloat,_=parseInt,ba=B.prototype.toUpperCase,bb=k._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},bc=k._availableAnimAttrs={blur:M,"clip-rect":"csv",cx:M,cy:M,fill:"colour","fill-opacity":M,"font-size":M,height:M,opacity:M,path:"path",r:M,rx:M,ry:M,stroke:"colour","stroke-opacity":M,"stroke-width":M,transform:"transform",width:M,x:M,y:M},bd=/\s*,\s*/,be={hs:1,rg:1},bf=/,?([achlmqrstvxz]),?/gi,bg=/([achlmrqstvz])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?\s*,?\s*)+)/ig,bh=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?\s*,?\s*)+)/ig,bi=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)\s*,?\s*/ig,bj=k._radial_gradient=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,bk={},bl=function(a,b){return a.key-b.key},bm=function(a,b){return $(a)-$(b)},bn=function(){},bo=function(a){return a},bp=k._rectPath=function(a,b,c,d,e){return e?[["M",a+e,b],["l",c-e*2,0],["a",e,e,0,0,1,e,e],["l",0,d-e*2],["a",e,e,0,0,1,-e,e],["l",e*2-c,0],["a",e,e,0,0,1,-e,-e],["l",0,e*2-d],["a",e,e,0,0,1,e,-e],["z"]]:[["M",a,b],["l",c,0],["l",0,d],["l",-c,0],["z"]]},bq=function(a,b,c,d){return d==null&&(d=c),[["M",a,b],["m",0,-d],["a",c,d,0,1,1,0,2*d],["a",c,d,0,1,1,0,-2*d],["z"]]},br=k._getPath={path:function(a){return a.attr("path")},circle:function(a){var b=a.attrs;return bq(b.cx,b.cy,b.r)},ellipse:function(a){var b=a.attrs;return bq(b.cx,b.cy,b.rx,b.ry)},rect:function(a){var b=a.attrs;return bp(b.x,b.y,b.width,b.height,b.r)},image:function(a){var b=a.attrs;return bp(b.x,b.y,b.width,b.height)},text:function(a){var b=a._getBBox();return bp(b.x,b.y,b.width,b.height)}},bs=k.mapPath=function(a,b){if(!b)return a;var c,d,e,f,g,h,i;a=bM(a);for(e=0,g=a.length;e<g;e++){i=a[e];for(f=1,h=i.length;f<h;f+=2)c=b.x(i[f],i[f+1]),d=b.y(i[f],i[f+1]),i[f]=c,i[f+1]=d}return a};k._g=r,k.type=r.win.SVGAngle||r.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if(k.type=="VML"){var bt=r.doc.createElement("div"),bu;bt.innerHTML='<v:shape adj="1"/>',bu=bt.firstChild,bu.style.behavior="url(#default#VML)";if(!bu||typeof bu.adj!="object")return k.type=z;bt=null}k.svg=!(k.vml=k.type=="VML"),k._Paper=t,k.fn=u=t.prototype=k.prototype,k._id=0,k._oid=0,k.is=function(a,b){return b=F.call(b),b=="finite"?!W[q](+a):b=="array"?a instanceof Array:b=="null"&&a===null||b==typeof a&&a!==null||b=="object"&&a===Object(a)||b=="array"&&Array.isArray&&Array.isArray(a)||R.call(a).slice(8,-1).toLowerCase()==b},k.angle=function(a,b,c,d,e,f){if(e==null){var g=a-c,h=b-d;return!g&&!h?0:(180+G.atan2(-h,-g)*180/L+360)%360}return k.angle(a,b,e,f)-k.angle(c,d,e,f)},k.rad=function(a){return a%360*L/180},k.deg=function(a){return a*180/L%360},k.snapTo=function(a,b,c){c=k.is(c,"finite")?c:10;if(k.is(a,O)){var d=a.length;while(d--)if(J(a[d]-b)<=c)return a[d]}else{a=+a;var e=b%a;if(e<c)return b-e;if(e>a-c)return b-e+a}return b};var bv=k.createUUID=function(a,b){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(a,b).toUpperCase()}}(/[xy]/g,function(a){var b=G.random()*16|0,c=a=="x"?b:b&3|8;return c.toString(16)});k.setWindow=function(a){eve("setWindow",k,r.win,a),r.win=a,r.doc=r.win.document,k._engine.initWin&&k._engine.initWin(r.win)};var bw=function(a){if(k.vml){var b=/^\s+|\s+$/g,c;try{var d=new ActiveXObject("htmlfile");d.write("<body>"),d.close(),c=d.body}catch(e){c=createPopup().document.body}var f=c.createTextRange();bw=i(function(a){try{c.style.color=B(a).replace(b,z);var d=f.queryCommandValue("ForeColor");return d=(d&255)<<16|d&65280|(d&16711680)>>>16,"#"+("000000"+d.toString(16)).slice(-6)}catch(e){return"none"}})}else{var g=r.doc.createElement("i");g.title="Raphaël Colour Picker",g.style.display="none",r.doc.body.appendChild(g),bw=i(function(a){return g.style.color=a,r.doc.defaultView.getComputedStyle(g,z).getPropertyValue("color")})}return bw(a)},bx=function(){return"hsb("+[this.h,this.s,this.b]+")"},by=function(){return"hsl("+[this.h,this.s,this.l]+")"},bz=function(){return this.hex},bA=function(a,b,c){b==null&&k.is(a,"object")&&"r"in a&&"g"in a&&"b"in a&&(c=a.b,b=a.g,a=a.r);if(b==null&&k.is(a,N)){var d=k.getRGB(a);a=d.r,b=d.g,c=d.b}if(a>1||b>1||c>1)a/=255,b/=255,c/=255;return[a,b,c]},bB=function(a,b,c,d){a*=255,b*=255,c*=255;var e={r:a,g:b,b:c,hex:k.rgb(a,b,c),toString:bz};return k.is(d,"finite")&&(e.opacity=d),e};k.color=function(a){var b;return k.is(a,"object")&&"h"in a&&"s"in a&&"b"in a?(b=k.hsb2rgb(a),a.r=b.r,a.g=b.g,a.b=b.b,a.hex=b.hex):k.is(a,"object")&&"h"in a&&"s"in a&&"l"in a?(b=k.hsl2rgb(a),a.r=b.r,a.g=b.g,a.b=b.b,a.hex=b.hex):(k.is(a,"string")&&(a=k.getRGB(a)),k.is(a,"object")&&"r"in a&&"g"in a&&"b"in a?(b=k.rgb2hsl(a),a.h=b.h,a.s=b.s,a.l=b.l,b=k.rgb2hsb(a),a.v=b.b):(a={hex:"none"},a.r=a.g=a.b=a.h=a.s=a.v=a.l=-1)),a.toString=bz,a},k.hsb2rgb=function(a,b,c,d){this.is(a,"object")&&"h"in a&&"s"in a&&"b"in a&&(c=a.b,b=a.s,a=a.h,d=a.o),a*=360;var e,f,g,h,i;return a=a%360/60,i=c*b,h=i*(1-J(a%2-1)),e=f=g=c-i,a=~~a,e+=[i,h,0,0,h,i][a],f+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a],bB(e,f,g,d)},k.hsl2rgb=function(a,b,c,d){this.is(a,"object")&&"h"in a&&"s"in a&&"l"in a&&(c=a.l,b=a.s,a=a.h);if(a>1||b>1||c>1)a/=360,b/=100,c/=100;a*=360;var e,f,g,h,i;return a=a%360/60,i=2*b*(c<.5?c:1-c),h=i*(1-J(a%2-1)),e=f=g=c-i/2,a=~~a,e+=[i,h,0,0,h,i][a],f+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a],bB(e,f,g,d)},k.rgb2hsb=function(a,b,c){c=bA(a,b,c),a=c[0],b=c[1],c=c[2];var d,e,f,g;return f=H(a,b,c),g=f-I(a,b,c),d=g==0?null:f==a?(b-c)/g:f==b?(c-a)/g+2:(a-b)/g+4,d=(d+360)%6*60/360,e=g==0?0:g/f,{h:d,s:e,b:f,toString:bx}},k.rgb2hsl=function(a,b,c){c=bA(a,b,c),a=c[0],b=c[1],c=c[2];var d,e,f,g,h,i;return g=H(a,b,c),h=I(a,b,c),i=g-h,d=i==0?null:g==a?(b-c)/i:g==b?(c-a)/i+2:(a-b)/i+4,d=(d+360)%6*60/360,f=(g+h)/2,e=i==0?0:f<.5?i/(2*f):i/(2-2*f),{h:d,s:e,l:f,toString:by}},k._path2string=function(){return this.join(",").replace(bf,"$1")};var bC=k._preload=function(a,b){var c=r.doc.createElement("img");c.style.cssText="position:absolute;left:-9999em;top:-9999em",c.onload=function(){b.call(this),this.onload=null,r.doc.body.removeChild(this)},c.onerror=function(){r.doc.body.removeChild(this)},r.doc.body.appendChild(c),c.src=a};k.getRGB=i(function(a){if(!a||!!((a=B(a)).indexOf("-")+1))return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:h};if(a=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:h};!be[q](a.toLowerCase().substring(0,2))&&a.charAt()!="#"&&(a=bw(a));var b,c,d,e,f,g,i,j=a.match(V);return j?(j[2]&&(e=_(j[2].substring(5),16),d=_(j[2].substring(3,5),16),c=_(j[2].substring(1,3),16)),j[3]&&(e=_((g=j[3].charAt(3))+g,16),d=_((g=j[3].charAt(2))+g,16),c=_((g=j[3].charAt(1))+g,16)),j[4]&&(i=j[4][C](bd),c=$(i[0]),i[0].slice(-1)=="%"&&(c*=2.55),d=$(i[1]),i[1].slice(-1)=="%"&&(d*=2.55),e=$(i[2]),i[2].slice(-1)=="%"&&(e*=2.55),j[1].toLowerCase().slice(0,4)=="rgba"&&(f=$(i[3])),i[3]&&i[3].slice(-1)=="%"&&(f/=100)),j[5]?(i=j[5][C](bd),c=$(i[0]),i[0].slice(-1)=="%"&&(c*=2.55),d=$(i[1]),i[1].slice(-1)=="%"&&(d*=2.55),e=$(i[2]),i[2].slice(-1)=="%"&&(e*=2.55),(i[0].slice(-3)=="deg"||i[0].slice(-1)=="°")&&(c/=360),j[1].toLowerCase().slice(0,4)=="hsba"&&(f=$(i[3])),i[3]&&i[3].slice(-1)=="%"&&(f/=100),k.hsb2rgb(c,d,e,f)):j[6]?(i=j[6][C](bd),c=$(i[0]),i[0].slice(-1)=="%"&&(c*=2.55),d=$(i[1]),i[1].slice(-1)=="%"&&(d*=2.55),e=$(i[2]),i[2].slice(-1)=="%"&&(e*=2.55),(i[0].slice(-3)=="deg"||i[0].slice(-1)=="°")&&(c/=360),j[1].toLowerCase().slice(0,4)=="hsla"&&(f=$(i[3])),i[3]&&i[3].slice(-1)=="%"&&(f/=100),k.hsl2rgb(c,d,e,f)):(j={r:c,g:d,b:e,toString:h},j.hex="#"+(16777216|e|d<<8|c<<16).toString(16).slice(1),k.is(f,"finite")&&(j.opacity=f),j)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:h}},k),k.hsb=i(function(a,b,c){return k.hsb2rgb(a,b,c).hex}),k.hsl=i(function(a,b,c){return k.hsl2rgb(a,b,c).hex}),k.rgb=i(function(a,b,c){return"#"+(16777216|c|b<<8|a<<16).toString(16).slice(1)}),k.getColor=function(a){var b=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||.75},c=this.hsb2rgb(b.h,b.s,b.b);return b.h+=.075,b.h>1&&(b.h=0,b.s-=.2,b.s<=0&&(this.getColor.start={h:0,s:1,b:b.b})),c.hex},k.getColor.reset=function(){delete this.start},k.parsePathString=i(function(a){if(!a)return null;var b={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},c=[];return k.is(a,O)&&k.is(a[0],O)&&(c=bE(a)),c.length||B(a).replace(bg,function(a,d,e){var f=[],g=d.toLowerCase();e.replace(bi,function(a,b){b&&f.push(+b)}),g=="m"&&f.length>2&&(c.push([d][x](f.splice(0,2))),g="l",d=d=="m"?"l":"L");if(g=="r")c.push([d][x](f));else while(f.length>=b[g]){c.push([d][x](f.splice(0,b[g])));if(!b[g])break}}),c.toString=k._path2string,c}),k.parseTransformString=i(function(a){if(!a)return null;var b={r:3,s:4,t:2,m:6},c=[];return k.is(a,O)&&k.is(a[0],O)&&(c=bE(a)),c.length||B(a).replace(bh,function(a,b,d){var e=[],f=F.call(b);d.replace(bi,function(a,b){b&&e.push(+b)}),c.push([b][x](e))}),c.toString=k._path2string,c}),k.findDotsAtSegment=function(a,b,c,d,e,f,g,h,i){var j=1-i,k=K(j,3),l=K(j,2),m=i*i,n=m*i,o=k*a+l*3*i*c+j*3*i*i*e+n*g,p=k*b+l*3*i*d+j*3*i*i*f+n*h,q=a+2*i*(c-a)+m*(e-2*c+a),r=b+2*i*(d-b)+m*(f-2*d+b),s=c+2*i*(e-c)+m*(g-2*e+c),t=d+2*i*(f-d)+m*(h-2*f+d),u=j*a+i*c,v=j*b+i*d,w=j*e+i*g,x=j*f+i*h,y=90-G.atan2(q-s,r-t)*180/L;return(q>s||r<t)&&(y+=180),{x:o,y:p,m:{x:q,y:r},n:{x:s,y:t},start:{x:u,y:v},end:{x:w,y:x},alpha:y}},k._removedFactory=function(a){return function(){throw new Error("Raphaël: you are calling to method “"+a+"” of removed object")}};var bD=i(function(a){if(!a)return{x:0,y:0,width:0,height:0};a=bM(a);var b=0,c=0,d=[],e=[],f;for(var g=0,h=a.length;g<h;g++){f=a[g];if(f[0]=="M")b=f[1],c=f[2],d.push(b),e.push(c);else{var i=bL(b,c,f[1],f[2],f[3],f[4],f[5],f[6]);d=d[x](i.min.x,i.max.x),e=e[x](i.min.y,i.max.y),b=f[5],c=f[6]}}var j=I[w](0,d),k=I[w](0,e);return{x:j,y:k,width:H[w](0,d)-j,height:H[w](0,e)-k}},null,function(a){return{x:a.x,y:a.y,width:a.width,height:a.height}}),bE=function(a){var b=[];if(!k.is(a,O)||!k.is(a&&a[0],O))a=k.parsePathString(a);for(var c=0,d=a.length;c<d;c++){b[c]=[];for(var e=0,f=a[c].length;e<f;e++)b[c][e]=a[c][e]}return b.toString=k._path2string,b},bF=k._pathToRelative=i(function(a){if(!k.is(a,O)||!k.is(a&&a[0],O))a=k.parsePathString(a);var b=[],c=0,d=0,e=0,f=0,g=0;a[0][0]=="M"&&(c=a[0][1],d=a[0][2],e=c,f=d,g++,b.push(["M",c,d]));for(var h=g,i=a.length;h<i;h++){var j=b[h]=[],l=a[h];if(l[0]!=F.call(l[0])){j[0]=F.call(l[0]);switch(j[0]){case"a":j[1]=l[1],j[2]=l[2],j[3]=l[3],j[4]=l[4],j[5]=l[5],j[6]=+(l[6]-c).toFixed(3),j[7]=+(l[7]-d).toFixed(3);break;case"v":j[1]=+(l[1]-d).toFixed(3);break;case"m":e=l[1],f=l[2];default:for(var m=1,n=l.length;m<n;m++)j[m]=+(l[m]-(m%2?c:d)).toFixed(3)}}else{j=b[h]=[],l[0]=="m"&&(e=l[1]+c,f=l[2]+d);for(var o=0,p=l.length;o<p;o++)b[h][o]=l[o]}var q=b[h].length;switch(b[h][0]){case"z":c=e,d=f;break;case"h":c+=+b[h][q-1];break;case"v":d+=+b[h][q-1];break;default:c+=+b[h][q-2],d+=+b[h][q-1]}}return b.toString=k._path2string,b},0,bE),bG=k._pathToAbsolute=i(function(a){if(!k.is(a,O)||!k.is(a&&a[0],O))a=k.parsePathString(a);if(!a||!a.length)return[["M",0,0]];var b=[],c=0,d=0,e=0,f=0,h=0;a[0][0]=="M"&&(c=+a[0][1],d=+a[0][2],e=c,f=d,h++,b[0]=["M",c,d]);for(var i,j,l=h,m=a.length;l<m;l++){b.push(i=[]),j=a[l];if(j[0]!=ba.call(j[0])){i[0]=ba.call(j[0]);switch(i[0]){case"A":i[1]=j[1],i[2]=j[2],i[3]=j[3],i[4]=j[4],i[5]=j[5],i[6]=+(j[6]+c),i[7]=+(j[7]+d);break;case"V":i[1]=+j[1]+d;break;case"H":i[1]=+j[1]+c;break;case"R":var n=[c,d][x](j.slice(1));for(var o=2,p=n.length;o<p;o++)n[o]=+n[o]+c,n[++o]=+n[o]+d;b.pop(),b=b[x](g(n));break;case"M":e=+j[1]+c,f=+j[2]+d;default:for(o=1,p=j.length;o<p;o++)i[o]=+j[o]+(o%2?c:d)}}else if(j[0]=="R")n=[c,d][x](j.slice(1)),b.pop(),b=b[x](g(n)),i=["R"][x](j.slice(-2));else for(var q=0,r=j.length;q<r;q++)i[q]=j[q];switch(i[0]){case"Z":c=e,d=f;break;case"H":c=i[1];break;case"V":d=i[1];break;case"M":e=i[i.length-2],f=i[i.length-1];default:c=i[i.length-2],d=i[i.length-1]}}return b.toString=k._path2string,b},null,bE),bH=function(a,b,c,d){return[a,b,c,d,c,d]},bI=function(a,b,c,d,e,f){var g=1/3,h=2/3;return[g*a+h*c,g*b+h*d,g*e+h*c,g*f+h*d,e,f]},bJ=function(a,b,c,d,e,f,g,h,j,k){var l=L*120/180,m=L/180*(+e||0),n=[],o,p=i(function(a,b,c){var d=a*G.cos(c)-b*G.sin(c),e=a*G.sin(c)+b*G.cos(c);return{x:d,y:e}});if(!k){o=p(a,b,-m),a=o.x,b=o.y,o=p(h,j,-m),h=o.x,j=o.y;var q=G.cos(L/180*e),r=G.sin(L/180*e),s=(a-h)/2,t=(b-j)/2,u=s*s/(c*c)+t*t/(d*d);u>1&&(u=G.sqrt(u),c=u*c,d=u*d);var v=c*c,w=d*d,y=(f==g?-1:1)*G.sqrt(J((v*w-v*t*t-w*s*s)/(v*t*t+w*s*s))),z=y*c*t/d+(a+h)/2,A=y*-d*s/c+(b+j)/2,B=G.asin(((b-A)/d).toFixed(9)),D=G.asin(((j-A)/d).toFixed(9));B=a<z?L-B:B,D=h<z?L-D:D,B<0&&(B=L*2+B),D<0&&(D=L*2+D),g&&B>D&&(B-=L*2),!g&&D>B&&(D-=L*2)}else B=k[0],D=k[1],z=k[2],A=k[3];var E=D-B;if(J(E)>l){var F=D,H=h,I=j;D=B+l*(g&&D>B?1:-1),h=z+c*G.cos(D),j=A+d*G.sin(D),n=bJ(h,j,c,d,e,0,g,H,I,[D,F,z,A])}E=D-B;var K=G.cos(B),M=G.sin(B),N=G.cos(D),O=G.sin(D),P=G.tan(E/4),Q=4/3*c*P,R=4/3*d*P,S=[a,b],T=[a+Q*M,b-R*K],U=[h+Q*O,j-R*N],V=[h,j];T[0]=2*S[0]-T[0],T[1]=2*S[1]-T[1];if(k)return[T,U,V][x](n);n=[T,U,V][x](n).join()[C](",");var W=[];for(var X=0,Y=n.length;X<Y;X++)W[X]=X%2?p(n[X-1],n[X],m).y:p(n[X],n[X+1],m).x;return W},bK=function(a,b,c,d,e,f,g,h,i){var j=1-i;return{x:K(j,3)*a+K(j,2)*3*i*c+j*3*i*i*e+K(i,3)*g,y:K(j,3)*b+K(j,2)*3*i*d+j*3*i*i*f+K(i,3)*h}},bL=i(function(a,b,c,d,e,f,g,h){var i=e-2*c+a-(g-2*e+c),j=2*(c-a)-2*(e-c),k=a-c,l=(-j+G.sqrt(j*j-4*i*k))/2/i,m=(-j-G.sqrt(j*j-4*i*k))/2/i,n=[b,h],o=[a,g],p;return J(l)>"1e12"&&(l=.5),J(m)>"1e12"&&(m=.5),l>0&&l<1&&(p=bK(a,b,c,d,e,f,g,h,l),o.push(p.x),n.push(p.y)),m>0&&m<1&&(p=bK(a,b,c,d,e,f,g,h,m),o.push(p.x),n.push(p.y)),i=f-2*d+b-(h-2*f+d),j=2*(d-b)-2*(f-d),k=b-d,l=(-j+G.sqrt(j*j-4*i*k))/2/i,m=(-j-G.sqrt(j*j-4*i*k))/2/i,J(l)>"1e12"&&(l=.5),J(m)>"1e12"&&(m=.5),l>0&&l<1&&(p=bK(a,b,c,d,e,f,g,h,l),o.push(p.x),n.push(p.y)),m>0&&m<1&&(p=bK(a,b,c,d,e,f,g,h,m),o.push(p.x),n.push(p.y)),{min:{x:I[w](0,o),y:I[w](0,n)},max:{x:H[w](0,o),y:H[w](0,n)}}}),bM=k._path2curve=i(function(a,b){var c=bG(a),d=b&&bG(b),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},g=function(a,b){var c,d;if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];!(a[0]in{T:1,Q:1})&&(b.qx=b.qy=null);switch(a[0]){case"M":b.X=a[1],b.Y=a[2];break;case"A":a=["C"][x](bJ[w](0,[b.x,b.y][x](a.slice(1))));break;case"S":c=b.x+(b.x-(b.bx||b.x)),d=b.y+(b.y-(b.by||b.y)),a=["C",c,d][x](a.slice(1));break;case"T":b.qx=b.x+(b.x-(b.qx||b.x)),b.qy=b.y+(b.y-(b.qy||b.y)),a=["C"][x](bI(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case"Q":b.qx=a[1],b.qy=a[2],a=["C"][x](bI(b.x,b.y,a[1],a[2],a[3],a[4]));break;case"L":a=["C"][x](bH(b.x,b.y,a[1],a[2]));break;case"H":a=["C"][x](bH(b.x,b.y,a[1],b.y));break;case"V":a=["C"][x](bH(b.x,b.y,b.x,a[1]));break;case"Z":a=["C"][x](bH(b.x,b.y,b.X,b.Y))}return a},h=function(a,b){if(a[b].length>7){a[b].shift();var e=a[b];while(e.length)a.splice(b++,0,["C"][x](e.splice(0,6)));a.splice(b,1),k=H(c.length,d&&d.length||0)}},i=function(a,b,e,f,g){a&&b&&a[g][0]=="M"&&b[g][0]!="M"&&(b.splice(g,0,["M",f.x,f.y]),e.bx=0,e.by=0,e.x=a[g][1],e.y=a[g][2],k=H(c.length,d&&d.length||0))};for(var j=0,k=H(c.length,d&&d.length||0);j<k;j++){c[j]=g(c[j],e),h(c,j),d&&(d[j]=g(d[j],f)),d&&h(d,j),i(c,d,e,f,j),i(d,c,f,e,j);var l=c[j],m=d&&d[j],n=l.length,o=d&&m.length;e.x=l[n-2],e.y=l[n-1],e.bx=$(l[n-4])||e.x,e.by=$(l[n-3])||e.y,f.bx=d&&($(m[o-4])||f.x),f.by=d&&($(m[o-3])||f.y),f.x=d&&m[o-2],f.y=d&&m[o-1]}return d?[c,d]:c},null,bE),bN=k._parseDots=i(function(a){var b=[];for(var c=0,d=a.length;c<d;c++){var e={},f=a[c].match(/^([^:]*):?([\d\.]*)/);e.color=k.getRGB(f[1]);if(e.color.error)return null;e.color=e.color.hex,f[2]&&(e.offset=f[2]+"%"),b.push(e)}for(c=1,d=b.length-1;c<d;c++)if(!b[c].offset){var g=$(b[c-1].offset||0),h=0;for(var i=c+1;i<d;i++)if(b[i].offset){h=b[i].offset;break}h||(h=100,i=d),h=$(h);var j=(h-g)/(i-c+1);for(;c<i;c++)g+=j,b[c].offset=g+"%"}return b}),bO=k._tear=function(a,b){a==b.top&&(b.top=a.prev),a==b.bottom&&(b.bottom=a.next),a.next&&(a.next.prev=a.prev),a.prev&&(a.prev.next=a.next)},bP=k._tofront=function(a,b){b.top!==a&&(bO(a,b),a.next=null,a.prev=b.top,b.top.next=a,b.top=a)},bQ=k._toback=function(a,b){b.bottom!==a&&(bO(a,b),a.next=b.bottom,a.prev=null,b.bottom.prev=a,b.bottom=a)},bR=k._insertafter=function(a,b,c){bO(a,c),b==c.top&&(c.top=a),b.next&&(b.next.prev=a),a.next=b.next,a.prev=b,b.next=a},bS=k._insertbefore=function(a,b,c){bO(a,c),b==c.bottom&&(c.bottom=a),b.prev&&(b.prev.next=a),a.prev=b.prev,b.prev=a,a.next=b},bT=k._extractTransform=function(a,b){if(b==null)return a._.transform;b=B(b).replace(/\.{3}|\u2026/g,a._.transform||z);var c=k.parseTransformString(b),d=0,e=0,g=0,h=1,i=1,j=a._,l=new f;j.transform=c||[];if(c)for(var m=0,n=c.length;m<n;m++){var o=c[m],p=o.length,q=B(o[0]).toLowerCase(),r=o[0]!=q,s=r?l.invert():0,t,u,v,w,x;q=="t"&&p==3?r?(t=s.x(0,0),u=s.y(0,0),v=s.x(o[1],o[2]),w=s.y(o[1],o[2]),l.translate(v-t,w-u)):l.translate(o[1],o[2]):q=="r"?p==2?(x=x||a.getBBox(1),l.rotate(o[1],x.x+x.width/2,x.y+x.height/2),d+=o[1]):p==4&&(r?(v=s.x(o[2],o[3]),w=s.y(o[2],o[3]),l.rotate(o[1],v,w)):l.rotate(o[1],o[2],o[3]),d+=o[1]):q=="s"?p==2||p==3?(x=x||a.getBBox(1),l.scale(o[1],o[p-1],x.x+x.width/2,x.y+x.height/2),h*=o[1],i*=o[p-1]):p==5&&(r?(v=s.x(o[3],o[4]),w=s.y(o[3],o[4]),l.scale(o[1],o[2],v,w)):l.scale(o[1],o[2],o[3],o[4]),h*=o[1],i*=o[2]):q=="m"&&p==7&&l.add(o[1],o[2],o[3],o[4],o[5],o[6]),j.dirtyT=1,a.matrix=l}a.matrix=l,j.sx=h,j.sy=i,j.deg=d,j.dx=e=l.e,j.dy=g=l.f,h==1&&i==1&&!d&&j.bbox?(j.bbox.x+=+e,j.bbox.y+=+g):j.dirtyT=1},bU=function(a){var b=a[0];switch(b.toLowerCase()){case"t":return[b,0,0];case"m":return[b,1,0,0,1,0,0];case"r":return a.length==4?[b,0,a[2],a[3]]:[b,0];case"s":return a.length==5?[b,1,1,a[3],a[4]]:a.length==3?[b,1,1]:[b,1]}},bV=k._equaliseTransform=function(a,b){b=B(b).replace(/\.{3}|\u2026/g,a),a=k.parseTransformString(a)||[],b=k.parseTransformString(b)||[];var c=H(a.length,b.length),d=[],e=[],f=0,g,h,i,j;for(;f<c;f++){i=a[f]||bU(b[f]),j=b[f]||bU(i);if(i[0]!=j[0]||i[0].toLowerCase()=="r"&&(i[2]!=j[2]||i[3]!=j[3])||i[0].toLowerCase()=="s"&&(i[3]!=j[3]||i[4]!=j[4]))return;d[f]=[],e[f]=[];for(g=0,h=H(i.length,j.length);g<h;g++)g in i&&(d[f][g]=i[g]),g in j&&(e[f][g]=j[g])}return{from:d,to:e}};k._getContainer=function(a,b,c,d){var e;e=d==null&&!k.is(a,"object")?r.doc.getElementById(a):a;if(e!=null)return e.tagName?b==null?{container:e,width:e.style.pixelWidth||e.offsetWidth,height:e.style.pixelHeight||e.offsetHeight}:{container:e,width:b,height:c}:{container:1,x:a,y:b,width:c,height:d}},k.pathToRelative=bF,k._engine={},k.path2curve=bM,k.matrix=function(a,b,c,d,e,g){return new f(a,b,c,d,e,g)},function(a){function b(a){var b=G.sqrt(c(a));a[0]&&(a[0]/=b),a[1]&&(a[1]/=b)}function c(a){return a[0]*a[0]+a[1]*a[1]}a.add=function(a,b,c,d,e,g){var h=[[],[],[]],i=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],j=[[a,c,e],[b,d,g],[0,0,1]],k,l,m,n;a&&a instanceof f&&(j=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]]);for(k=0;k<3;k++)for(l=0;l<3;l++){n=0;for(m=0;m<3;m++)n+=i[k][m]*j[m][l];h[k][l]=n}this.a=h[0][0],this.b=h[1][0],this.c=h[0][1],this.d=h[1][1],this.e=h[0][2],this.f=h[1][2]},a.invert=function(){var a=this,b=a.a*a.d-a.b*a.c;return new f(a.d/b,-a.b/b,-a.c/b,a.a/b,(a.c*a.f-a.d*a.e)/b,(a.b*a.e-a.a*a.f)/b)},a.clone=function(){return new f(this.a,this.b,this.c,this.d,this.e,this.f)},a.translate=function(a,b){this.add(1,0,0,1,a,b)},a.scale=function(a,b,c,d){b==null&&(b=a),(c||d)&&this.add(1,0,0,1,c,d),this.add(a,0,0,b,0,0),(c||d)&&this.add(1,0,0,1,-c,-d)},a.rotate=function(a,b,c){a=k.rad(a),b=b||0,c=c||0;var d=+G.cos(a).toFixed(9),e=+G.sin(a).toFixed(9);this.add(d,e,-e,d,b,c),this.add(1,0,0,1,-b,-c)},a.x=function(a,b){return a*this.a+b*this.c+this.e},a.y=function(a,b){return a*this.b+b*this.d+this.f},a.get=function(a){return+this[B.fromCharCode(97+a)].toFixed(4)},a.toString=function(){return k.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},a.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},a.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},a.split=function(){var a={};a.dx=this.e,a.dy=this.f;var d=[[this.a,this.c],[this.b,this.d]];a.scalex=G.sqrt(c(d[0])),b(d[0]),a.shear=d[0][0]*d[1][0]+d[0][1]*d[1][1],d[1]=[d[1][0]-d[0][0]*a.shear,d[1][1]-d[0][1]*a.shear],a.scaley=G.sqrt(c(d[1])),b(d[1]),a.shear/=a.scaley;var e=-d[0][1],f=d[1][1];return f<0?(a.rotate=k.deg(G.acos(f)),e<0&&(a.rotate=360-a.rotate)):a.rotate=k.deg(G.asin(e)),a.isSimple=!+a.shear.toFixed(9)&&(a.scalex.toFixed(9)==a.scaley.toFixed(9)||!a.rotate),a.isSuperSimple=!+a.shear.toFixed(9)&&a.scalex.toFixed(9)==a.scaley.toFixed(9)&&!a.rotate,a.noRotation=!+a.shear.toFixed(9)&&!a.rotate,a},a.toTransformString=function(a){var b=a||this[C]();return b.isSimple?(b.scalex=+b.scalex.toFixed(4),b.scaley=+b.scaley.toFixed(4),b.rotate=+b.rotate.toFixed(4),(b.dx&&b.dy?"t"+[b.dx,b.dy]:z)+(b.scalex!=1||b.scaley!=1?"s"+[b.scalex,b.scaley,0,0]:z)+(b.rotate?"r"+[b.rotate,0,0]:z)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(f.prototype);var bW=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);navigator.vendor=="Apple Computer, Inc."&&(bW&&bW[1]<4||navigator.platform.slice(0,2)=="iP")||navigator.vendor=="Google Inc."&&bW&&bW[1]<8?u.safari=function(){var a=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){a.remove()})}:u.safari=bn;var bX=function(){this.returnValue=!1},bY=function(){return this.originalEvent.preventDefault()},bZ=function(){this.cancelBubble=!0},b$=function(){return this.originalEvent.stopPropagation()},b_=function(){if(r.doc.addEventListener)return function(a,b,c,d){var e=y&&E[b]?E[b]:b,f=function(e){var f=r.doc.documentElement.scrollTop||r.doc.body.scrollTop,g=r.doc.documentElement.scrollLeft||r.doc.body.scrollLeft,h=e.clientX+g,i=e.clientY+f;if(y&&E[q](b))for(var j=0,k=e.targetTouches&&e.targetTouches.length;j<k;j++)if(e.targetTouches[j].target==a){var l=e;e=e.targetTouches[j],e.originalEvent=l,e.preventDefault=bY,e.stopPropagation=b$;break}return c.call(d,e,h,i)};return a.addEventListener(e,f,!1),function(){return a.removeEventListener(e,f,!1),!0}};if(r.doc.attachEvent)return function(a,b,c,d){var e=function(a){a=a||r.win.event;var b=r.doc.documentElement.scrollTop||r.doc.body.scrollTop,e=r.doc.documentElement.scrollLeft||r.doc.body.scrollLeft,f=a.clientX+e,g=a.clientY+b;return a.preventDefault=a.preventDefault||bX,a.stopPropagation=a.stopPropagation||bZ,c.call(d,a,f,g)};a.attachEvent("on"+b,e);var f=function(){return a.detachEvent("on"+b,e),!0};return f}}(),ca=[],cb=function(a){var b=a.clientX,c=a.clientY,d=r.doc.documentElement.scrollTop||r.doc.body.scrollTop,e=r.doc.documentElement.scrollLeft||r.doc.body.scrollLeft,f,g=ca.length;while(g--){f=ca[g];if(y){var h=a.touches.length,i;while(h--){i=a.touches[h];if(i.identifier==f.el._drag.id){b=i.clientX,c=i.clientY,(a.originalEvent?a.originalEvent:a).preventDefault();break}}}else a.preventDefault();var j=f.el.node,k,l=j.nextSibling,m=j.parentNode,n=j.style.display;r.win.opera&&m.removeChild(j),j.style.display="none",k=f.el.paper.getElementByPoint(b,c),j.style.display=n,r.win.opera&&(l?m.insertBefore(j,l):m.appendChild(j)),k&&eve("drag.over."+f.el.id,f.el,k),b+=e,c+=d,eve("drag.move."+f.el.id,f.move_scope||f.el,b-f.el._drag.x,c-f.el._drag.y,b,c,a)}},cc=function(a){k.unmousemove(cb).unmouseup(cc);var b=ca.length,c;while(b--)c=ca[b],c.el._drag={},eve("drag.end."+c.el.id,c.end_scope||c.start_scope||c.move_scope||c.el,a);ca=[]},cd=k.el={};for(var ce=D.length;ce--;)(function(a){k[a]=cd[a]=function(b,c){return k.is(b,"function")&&(this.events=this.events||[],this.events.push({name:a,f:b,unbind:b_(this.shape||this.node||r.doc,a,b,c||this)})),this},k["un"+a]=cd["un"+a]=function(b){var c=this.events,d=c.length;while(d--)if(c[d].name==a&&c[d].f==b)return c[d].unbind(),c.splice(d,1),!c.length&&delete this.events,this;return this}})(D[ce]);cd.data=function(a,b){var c=bk[this.id]=bk[this.id]||{};if(arguments.length==1){if(k.is(a,"object")){for(var d in a)a[q](d)&&this.data(d,a[d]);return this}return eve("data.get."+this.id,this,c[a],a),c[a]}return c[a]=b,eve("data.set."+this.id,this,b,a),this},cd.removeData=function(a){return a==null?bk[this.id]={}:bk[this.id]&&delete bk[this.id][a],this},cd.hover=function(a,b,c,d){return this.mouseover(a,c).mouseout(b,d||c)},cd.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var cf=[];cd.drag=function(a,b,c,d,e,f){function g(g){(g.originalEvent||g).preventDefault();var h=r.doc.documentElement.scrollTop||r.doc.body.scrollTop,i=r.doc.documentElement.scrollLeft||r.doc.body.scrollLeft;this._drag.x=g.clientX+i,this._drag.y=g.clientY+h,this._drag.id=g.identifier,!ca.length&&k.mousemove(cb).mouseup(cc),ca.push({el:this,move_scope:d,start_scope:e,end_scope:f}),b&&eve.on("drag.start."+this.id,b),a&&eve.on("drag.move."+this.id,a),c&&eve.on("drag.end."+this.id,c),eve("drag.start."+this.id,e||d||this,g.clientX+i,g.clientY+h,g)}return this._drag={},cf.push({el:this,start:g}),this.mousedown(g),this},cd.onDragOver=function(a){a?eve.on("drag.over."+this.id,a):eve.unbind("drag.over."+this.id)},cd.undrag=function(){var a=cf.length;while(a--)cf[a].el==this&&(this.unmousedown(cf[a].start),cf.splice(a,1),eve.unbind("drag.*."+this.id));!cf.length&&k.unmousemove(cb).unmouseup(cc)},u.circle=function(a,b,c){var d=k._engine.circle(this,a||0,b||0,c||0);return this.__set__&&this.__set__.push(d),d},u.rect=function(a,b,c,d,e){var f=k._engine.rect(this,a||0,b||0,c||0,d||0,e||0);return this.__set__&&this.__set__.push(f),f},u.ellipse=function(a,b,c,d){var e=k._engine.ellipse(this,a||0,b||0,c||0,d||0);return this.__set__&&this.__set__.push(e),e},u.path=function(a){a&&!k.is(a,N)&&!k.is(a[0],O)&&(a+=z);var b=k._engine.path(k.format[w](k,arguments),this);return this.__set__&&this.__set__.push(b),b},u.image=function(a,b,c,d,e){var f=k._engine.image(this,a||"about:blank",b||0,c||0,d||0,e||0);return this.__set__&&this.__set__.push(f),f},u.text=function(a,b,c){var d=k._engine.text(this,a||0,b||0,B(c));return this.__set__&&this.__set__.push(d),d},u.set=function(a){!k.is(a,"array")&&(a=Array.prototype.splice.call(arguments,0,arguments.length));var b=new cs(a);return this.__set__&&this.__set__.push(b),b},u.setStart=function(a){this.__set__=a||this.set()},u.setFinish=function(a){var b=this.__set__;return delete this.__set__,b},u.setSize=function(a,b){return k._engine.setSize.call(this,a,b)},u.setViewBox=function(a,b,c,d,e){return k._engine.setViewBox.call(this,a,b,c,d,e)},u.top=u.bottom=null,u.raphael=k;var cg=function(a){var b=a.getBoundingClientRect(),c=a.ownerDocument,d=c.body,e=c.documentElement,f=e.clientTop||d.clientTop||0,g=e.clientLeft||d.clientLeft||0,h=b.top+(r.win.pageYOffset||e.scrollTop||d.scrollTop)-f,i=b.left+(r.win.pageXOffset||e.scrollLeft||d.scrollLeft)-g;return{y:h,x:i}};u.getElementByPoint=function(a,b){var c=this,d=c.canvas,e=r.doc.elementFromPoint(a,b);if(r.win.opera&&e.tagName=="svg"){var f=cg(d),g=d.createSVGRect();g.x=a-f.x,g.y=b-f.y,g.width=g.height=1;var h=d.getIntersectionList(g,null);h.length&&(e=h[h.length-1])}if(!e)return null;while(e.parentNode&&e!=d.parentNode&&!e.raphael)e=e.parentNode;return e==c.canvas.parentNode&&(e=d),e=e&&e.raphael?c.getById(e.raphaelid):null,e},u.getById=function(a){var b=this.bottom;while(b){if(b.id==a)return b;b=b.next}return null},u.forEach=function(a,b){var c=this.bottom;while(c){if(a.call(b,c)===!1)return this;c=c.next}return this},cd.getBBox=function(a){if(this.removed)return{};var b=this._;if(a){if(b.dirty||!b.bboxwt)this.realPath=br[this.type](this),b.bboxwt=bD(this.realPath),b.bboxwt.toString=d,b.dirty=0;return b.bboxwt}if(b.dirty||b.dirtyT||!b.bbox){if(b.dirty||!this.realPath)b.bboxwt=0,this.realPath=br[this.type](this);b.bbox=bD(bs(this.realPath,this.matrix)),b.bbox.toString=d,b.dirty=b.dirtyT=0}return b.bbox},cd.clone=function(){if(this.removed)return null;var a=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(a),a},cd.glow=function(a){if(this.type=="text")return null;a=a||{};var b={width:(a.width||10)+(+this.attr("stroke-width")||1),fill:a.fill||!1,opacity:a.opacity||.5,offsetx:a.offsetx||0,offsety:a.offsety||0,color:a.color||"#000"},c=b.width/2,d=this.paper,e=d.set(),f=this.realPath||br[this.type](this);f=this.matrix?bs(f,this.matrix):f;for(var g=1;g<c+1;g++)e.push(d.path(f).attr({stroke:b.color,fill:b.fill?b.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(b.width/c*g).toFixed(3),opacity:+(b.opacity/c).toFixed(3)}));return e.insertBefore(this).translate(b.offsetx,b.offsety)};var ch={},ci=function(a,b,c,d,e,f,g,h,i){var j=0,l=100,m=[a,b,c,d,e,f,g,h].join(),n=ch[m],o,p;!n&&(ch[m]=n={data:[]}),n.timer&&clearTimeout(n.timer),n.timer=setTimeout(function(){delete ch[m]},2e3);if(i!=null&&!n.precision){var q=ci(a,b,c,d,e,f,g,h);n.precision=~~q*10,n.data=[]}l=n.precision||l;for(var r=0;r<l+1;r++){n.data[r*l]?p=n.data[r*l]:(p=k.findDotsAtSegment(a,b,c,d,e,f,g,h,r/l),n.data[r*l]=p),r&&(j+=K(K(o.x-p.x,2)+K(o.y-p.y,2),.5));if(i!=null&&j>=i)return p;o=p}if(i==null)return j},cj=function(a,b){return function(c,d,e){c=bM(c);var f,g,h,i,j="",l={},m,n=0;for(var o=0,p=c.length;o<p;o++){h=c[o];if(h[0]=="M")f=+h[1],g=+h[2];else{i=ci(f,g,h[1],h[2],h[3],h[4],h[5],h[6]);if(n+i>d){if(b&&!l.start){m=ci(f,g,h[1],h[2],h[3],h[4],h[5],h[6],d-n),j+=["C"+m.start.x,m.start.y,m.m.x,m.m.y,m.x,m.y];if(e)return j;l.start=j,j=["M"+m.x,m.y+"C"+m.n.x,m.n.y,m.end.x,m.end.y,h[5],h[6]].join(),n+=i,f=+h[5],g=+h[6];continue}if(!a&&!b)return m=ci(f,g,h[1],h[2],h[3],h[4],h[5],h[6],d-n),{x:m.x,y:m.y,alpha:m.alpha}}n+=i,f=+h[5],g=+h[6]}j+=h.shift()+h}return l.end=j,m=a?n:b?l:k.findDotsAtSegment(f,g,h[0],h[1],h[2],h[3],h[4],h[5],1),m.alpha&&(m={x:m.x,y:m.y,alpha:m.alpha}),m}},ck=cj(1),cl=cj(),cm=cj(0,1);k.getTotalLength=ck,k.getPointAtLength=cl,k.getSubpath=function(a,b,c){if(this.getTotalLength(a)-c<1e-6)return cm(a,b).end;var d=cm(a,c,1);return b?cm(d,b).end:d},cd.getTotalLength=function(){if(this.type=="path")return this.node.getTotalLength?this.node.getTotalLength():ck(this.attrs.path)},cd.getPointAtLength=function(a){if(this.type=="path")return cl(this.attrs.path,a)},cd.getSubpath=function(a,b){if(this.type=="path")return k.getSubpath(this.attrs.path,a,b)};var cn=k.easing_formulas={linear:function(a){return a},"<":function(a){return K(a,1.7)},">":function(a){return K(a,.48)},"<>":function(a){var b=.48-a/1.04,c=G.sqrt(.1734+b*b),d=c-b,e=K(J(d),1/3)*(d<0?-1:1),f=-c-b,g=K(J(f),1/3)*(f<0?-1:1),h=e+g+.5;return(1-h)*3*h*h+h*h*h},backIn:function(a){var b=1.70158;return a*a*((b+1)*a-b)},backOut:function(a){a-=1;var b=1.70158;return a*a*((b+1)*a+b)+1},elastic:function(a){return a==!!a?a:K(2,-10*a)*G.sin((a-.075)*2*L/.3)+1},bounce:function(a){var b=7.5625,c=2.75,d;return a<1/c?d=b*a*a:a<2/c?(a-=1.5/c,d=b*a*a+.75):a<2.5/c?(a-=2.25/c,d=b*a*a+.9375):(a-=2.625/c,d=b*a*a+.984375),d}};cn.easeIn=cn["ease-in"]=cn["<"],cn.easeOut=cn["ease-out"]=cn[">"],cn.easeInOut=cn["ease-in-out"]=cn["<>"],cn["back-in"]=cn.backIn,cn["back-out"]=cn.backOut;var co=[],cp=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,16)},cq=function(){var b=+(new Date),c=0;for(;c<co.length;c++){var d=co[c];if(d.el.removed||d.paused)continue;var e=b-d.start,f=d.ms,g=d.easing,h=d.from,i=d.diff,j=d.to,l=d.t,m=d.el,n={},o,p={},r;d.initstatus?(e=(d.initstatus*d.anim.top-d.prev)/(d.percent-d.prev)*f,d.status=d.initstatus,delete d.initstatus,d.stop&&co.splice(c--,1)):d.status=(d.prev+(d.percent-d.prev)*(e/f))/d.anim.top;if(e<0)continue;if(e<f){var s=g(e/f);for(var t in h)if(h[q](t)){switch(bc[t]){case M:o=+h[t]+s*f*i[t];break;case"colour":o="rgb("+[cr(Y(h[t].r+s*f*i[t].r)),cr(Y(h[t].g+s*f*i[t].g)),cr(Y(h[t].b+s*f*i[t].b))].join(",")+")";break;case"path":o=[];for(var u=0,v=h[t].length;u<v;u++){o[u]=[h[t][u][0]];for(var w=1,y=h[t][u].length;w<y;w++)o[u][w]=+h[t][u][w]+s*f*i[t][u][w];o[u]=o[u].join(A)}o=o.join(A);break;case"transform":if(i[t].real){o=[];for(u=0,v=h[t].length;u<v;u++){o[u]=[h[t][u][0]];for(w=1,y=h[t][u].length;w<y;w++)o[u][w]=h[t][u][w]+s*f*i[t][u][w]}}else{var z=function(a){return+h[t][a]+s*f*i[t][a]};o=[["m",z(0),z(1),z(2),z(3),z(4),z(5)]]}break;case"csv":if(t=="clip-rect"){o=[],u=4;while(u--)o[u]=+h[t][u]+s*f*i[t][u]}break;default:var B=[][x](h[t]);o=[],u=m.paper.customAttributes[t].length;while(u--)o[u]=+B[u]+s*f*i[t][u]}n[t]=o}m.attr(n),function(a,b,c){setTimeout(function(){eve("anim.frame."+a,b,c)})}(m.id,m,d.anim)}else{(function(a,b,c){setTimeout(function(){eve("anim.frame."+b.id,b,c),eve("anim.finish."+b.id,b,c),k.is(a,"function")&&a.call(b)})})(d.callback,m,d.anim),m.attr(j),co.splice(c--,1);if(d.repeat>1&&!d.next){for(r in j)j[q](r)&&(p[r]=d.totalOrigin[r]);d.el.attr(p),a(d.anim,d.el,d.anim.percents[0],null,d.totalOrigin,d.repeat-1)}d.next&&!d.stop&&a(d.anim,d.el,d.next,null,d.totalOrigin,d.repeat)}}k.svg&&m&&m.paper&&m.paper.safari(),co.length&&cp(cq)},cr=function(a){return a>255?255:a<0?0:a};cd.animateWith=function(a,b,c,d,e,f){var g=c?k.animation(c,d,e,f):b,h=a.status(b);return this.animate(g).status(g,h*b.ms/g.ms)},cd.onAnimation=function(a){return a?eve.on("anim.frame."+this.id,a):eve.unbind("anim.frame."+this.id),this},b.prototype.delay=function(a){var c=new b(this.anim,this.ms);return c.times=this.times,c.del=+a||0,c},b.prototype.repeat=function(a){var c=new b(this.anim,this.ms);return c.del=this.del,c.times=G.floor(H(a,0))||1,c},k.animation=function(a,c,d,e){if(a instanceof b)return a;if(k.is(d,"function")||!d)e=e||d||null,d=null;a=Object(a),c=+c||0;var f={},g,h;for(h in a)a[q](h)&&$(h)!=h&&$(h)+"%"!=h&&(g=!0,f[h]=a[h]);return g?(d&&(f.easing=d),e&&(f.callback=e),new b({100:f},c)):new b(a,c)},cd.animate=function(c,d,e,f){var g=this;if(g.removed)return f&&f.call(g),g;var h=c instanceof b?c:k.animation(c,d,e,f);return a(h,g,h.percents[0],null,g.attr()),g},cd.setTime=function(a,b){return a&&b!=null&&this.status(a,I(b,a.ms)/a.ms),this},cd.status=function(b,c){var d=[],e=0,f,g;if(c!=null)return a(b,this,-1,I(c,1)),this;f=co.length;for(;e<f;e++){g=co[e];if(g.el.id==this.id&&(!b||g.anim==b)){if(b)return g.status;d.push({anim:g.anim,status:g.status})}}return b?0:d},cd.pause=function(a){for(var b=0;b<co.length;b++)co[b].el.id==this.id&&(!a||co[b].anim==a)&&eve("anim.pause."+this.id,this,co[b].anim)!==!1&&(co[b].paused=!0);return this},cd.resume=function(a){for(var b=0;b<co.length;b++)if(co[b].el.id==this.id&&(!a||co[b].anim==a)){var c=co[b];eve("anim.resume."+this.id,this,c.anim)!==!1&&(delete c.paused,this.status(c.anim,c.status))}return this},cd.stop=function(a){for(var b=0;b<co.length;b++)co[b].el.id==this.id&&(!a||co[b].anim==a)&&eve("anim.stop."+this.id,this,co[b].anim)!==!1&&co.splice(b--,1);return this},cd.toString=function(){return"Raphaël’s object"};var cs=function(a){this.items=[],this.length=0,this.type="set";if(a)for(var b=0,c=a.length;b<c;b++)a[b]&&(a[b].constructor==cd.constructor||a[b].constructor==cs)&&(this[this.items.length]=this.items[this.items.length]=a[b],this.length++)},ct=cs.prototype;ct.push=function(){var a,b;for(var c=0,d=arguments.length;c<d;c++)a=arguments[c],a&&(a.constructor==cd.constructor||a.constructor==cs)&&(b=this.items.length,this[b]=this.items[b]=a,this.length++);return this},ct.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},ct.forEach=function(a,b){for(var c=0,d=this.items.length;c<d;c++)if(a.call(b,this.items[c],c)===!1)return this;return this};for(var cu in cd)cd[q](cu)&&(ct[cu]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a][w](c,b)})}}(cu));ct.attr=function(a,b){if(a&&k.is(a,O)&&k.is(a[0],"object"))for(var c=0,d=a.length;c<d;c++)this.items[c].attr(a[c]);else for(var e=0,f=this.items.length;e<f;e++)this.items[e].attr(a,b);return this},ct.clear=function(){while(this.length)this.pop()},ct.splice=function(a,b,c){a=a<0?H(this.length+a,0):a,b=H(0,I(this.length-a,b));var d=[],e=[],f=[],g;for(g=2;g<arguments.length;g++)f.push(arguments[g]);for(g=0;g<b;g++)e.push(this[a+g]);for(;g<this.length-a;g++)d.push(this[a+g]);var h=f.length;for(g=0;g<h+d.length;g++)this.items[a+g]=this[a+g]=g<h?f[g]:d[g-h];g=this.items.length=this.length-=b-h;while(this[g])delete this[g++];return new cs(e)},ct.exclude=function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]==a)return this.splice(b,1),!0},ct.animate=function(a,b,c,d){(k.is(c,"function")||!c)&&(d=c||null);var e=this.items.length,f=e,g,h=this,i;if(!e)return this;d&&(i=function(){!--e&&d.call(h)}),c=k.is(c,N)?c:i;var j=k.animation(a,b,c,i);g=this.items[--f].animate(j);while(f--)this.items[f]&&!this.items[f].removed&&this.items[f].animateWith(g,j);return this},ct.insertAfter=function(a){var b=this.items.length;while(b--)this.items[b].insertAfter(a);return this},ct.getBBox=function(){var a=[],b=[],c=[],d=[];for(var e=this.items.length;e--;)if(!this.items[e].removed){var f=this.items[e].getBBox();a.push(f.x),b.push(f.y),c.push(f.x+f.width),d.push(f.y+f.height)}return a=I[w](0,a),b=I[w](0,b),{x:a,y:b,width:H[w](0,c)-a,height:H[w](0,d)-b}},ct.clone=function(a){a=new cs;for(var b=0,c=this.items.length;b<c;b++)a.push(this.items[b].clone());return a},ct.toString=function(){return"Raphaël‘s set"},k.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var b={w:a.w,face:{},glyphs:{}},c=a.face["font-family"];for(var d in a.face)a.face[q](d)&&(b.face[d]=a.face[d]);this.fonts[c]?this.fonts[c].push(b):this.fonts[c]=[b];if(!a.svg){b.face["units-per-em"]=_(a.face["units-per-em"],10);for(var e in a.glyphs)if(a.glyphs[q](e)){var f=a.glyphs[e];b.glyphs[e]={w:f.w,k:{},d:f.d&&"M"+f.d.replace(/[mlcxtrv]/g,function(a){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[a]||"M"})+"z"};if(f.k)for(var g in f.k)f[q](g)&&(b.glyphs[e].k[g]=f.k[g])}}return a},u.getFont=function(a,b,c,d){d=d||"normal",c=c||"normal",b=+b||{normal:400,bold:700,lighter:300,bolder:800}[b]||400;if(!!k.fonts){var e=k.fonts[a];if(!e){var f=new RegExp("(^|\\s)"+a.replace(/[^\w\d\s+!~.:_-]/g,z)+"(\\s|$)","i");for(var g in k.fonts)if(k.fonts[q](g)&&f.test(g)){e=k.fonts[g];break}}var h;if(e)for(var i=0,j=e.length;i<j;i++){h=e[i];if(h.face["font-weight"]==b&&(h.face["font-style"]==c||!h.face["font-style"])&&h.face["font-stretch"]==d)break}return h}},u.print=function(a,b,c,d,e,f,g){f=f||"middle",g=H(I(g||0,1),-1);var h=this.set(),i=B(c)[C](z),j=0,l=z,n;k.is(d,c)&&(d=this.getFont(d));if(d){n=(e||16)/d.face["units-per-em"];var o=d.face.bbox[C](m),p=+o[0],q=+o[1]+(f=="baseline"?o[3]-o[1]+ +d.face.descent:(o[3]-o[1])/2);for(var r=0,s=i.length;r<s;r++){var t=r&&d.glyphs[i[r-1]]||{},u=d.glyphs[i[r]];j+=r?(t.w||d.w)+(t.k&&t.k[i[r]]||0)+d.w*g:0,u&&u.d&&h.push(this.path(u.d).attr({fill:"#000",stroke:"none",transform:[["t",j*n,0]]}))}h.transform(["...s",n,n,p,q,"t",(a-p)/n,(b-q)/n])}return h},u.add=function(a){if(k.is(a,"array")){var b=this.set(),c=0,d=a.length,e;for(;c<d;c++)e=a[c]||{},n[q](e.type)&&b.push(this[e.type]().attr(e))}return b},k.format=function(a,b){var c=k.is(b,O)?[0][x](b):arguments;return a&&k.is(a,N)&&c.length-1&&(a=a.replace(o,function(a,b){return c[++b]==null?z:c[b]})),a||z},k.fullfill=function(){var a=/\{([^\}]+)\}/g,b=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,c=function(a,c,d){var e=d;return c.replace(b,function(a,b,c,d,f){b=b||d,e&&(b in e&&(e=e[b]),typeof e=="function"&&f&&(e=e()))}),e=(e==null||e==d?a:e)+"",e};return function(b,d){return String(b).replace(a,function(a,b){return c(a,b,d)})}}(),k.ninja=function(){return s.was?r.win.Raphael=s.is:delete Raphael,k},k.st=ct,function(a,b,c){function d(){/in/.test(a.readyState)?setTimeout(d,9):k.eve("DOMload")}a.readyState==null&&a.addEventListener&&(a.addEventListener(b,c=function(){a.removeEventListener(b,c,!1),a.readyState="complete"},!1),a.readyState="loading"),d()}(document,"DOMContentLoaded"),s.was?r.win.Raphael=k:Raphael=k,eve.on("DOMload",function(){l=!0})}(),window.Raphael.svg&&function(a){var b="hasOwnProperty",c=String,d=parseFloat,e=parseInt,f=Math,g=f.max,h=f.abs,i=f.pow,j=/[, ]+/,k=a.eve,l="",m=" ",n="http://www.w3.org/1999/xlink",o={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},p={};a.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var q=function(d,e){if(e){typeof d=="string"&&(d=q(d));for(var f in e)e[b](f)&&(f.substring(0,6)=="xlink:"?d.setAttributeNS(n,f.substring(6),c(e[f])):d.setAttribute(f,c(e[f])))}else d=a._g.doc.createElementNS("http://www.w3.org/2000/svg",d),d.style&&(d.style.webkitTapHighlightColor="rgba(0,0,0,0)");return d},r=function(b,e){var j="linear",k=b.id+e,m=.5,n=.5,o=b.node,p=b.paper,r=o.style,s=a._g.doc.getElementById(k);if(!s){e=c(e).replace(a._radial_gradient,function(a,b,c){j="radial";if(b&&c){m=d(b),n=d(c);var e=(n>.5)*2-1;i(m-.5,2)+i(n-.5,2)>.25&&(n=f.sqrt(.25-i(m-.5,2))*e+.5)&&n!=.5&&(n=n.toFixed(5)-1e-5*e)}return l}),e=e.split(/\s*\-\s*/);if(j=="linear"){var t=e.shift();t=-d(t);if(isNaN(t))return null;var u=[0,0,f.cos(a.rad(t)),f.sin(a.rad(t))],v=1/(g(h(u[2]),h(u[3]))||1);u[2]*=v,u[3]*=v,u[2]<0&&(u[0]=-u[2],u[2]=0),u[3]<0&&(u[1]=-u[3],u[3]=0)}var w=a._parseDots(e);if(!w)return null;k=k.replace(/[\(\)\s,\xb0#]/g,"_"),b.gradient&&k!=b.gradient.id&&(p.defs.removeChild(b.gradient),delete b.gradient);if(!b.gradient){s=q(j+"Gradient",{id:k}),b.gradient=s,q(s,j=="radial"?{fx:m,fy:n}:{x1:u[0],y1:u[1],x2:u[2],y2:u[3],gradientTransform:b.matrix.invert()}),p.defs.appendChild(s);for(var x=0,y=w.length;x<y;x++)s.appendChild(q("stop",{offset:w[x].offset?w[x].offset:x?"100%":"0%","stop-color":w[x].color||"#fff"}))}}return q(o,{fill:"url(#"+k+")",opacity:1,"fill-opacity":1}),r.fill=l,r.opacity=1,r.fillOpacity=1,1},s=function(a){var b=a.getBBox(1);q(a.pattern,{patternTransform:a.matrix.invert()+" translate("+b.x+","+b.y+")"})},t=function(d,e,f){if(d.type=="path"){var g=c(e).toLowerCase().split("-"),h=d.paper,i=f?"end":"start",j=d.node,k=d.attrs,l=k["stroke-width"],n=g.length,r="classic",s,t,u,v,w,x=3,y=3,z=5;while(n--)switch(g[n]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":r=g[n];break;case"wide":y=5;break;case"narrow":y=2;break;case"long":x=5;break;case"short":x=2}r=="open"?(x+=2,y+=2,z+=2,u=1,v=f?4:1,w={fill:"none",stroke:k.stroke}):(v=u=x/2,w={fill:k.stroke,stroke:"none"}),d._.arrows?f?(d._.arrows.endPath&&p[d._.arrows.endPath]--,d._.arrows.endMarker&&p[d._.arrows.endMarker]--):(d._.arrows.startPath&&p[d._.arrows.startPath]--,d._.arrows.startMarker&&p[d._.arrows.startMarker]--):d._.arrows={};if(r!="none"){var A="raphael-marker-"+r,B="raphael-marker-"+i+r+x+y;a._g.doc.getElementById(A)?p[A]++:(h.defs.appendChild(q(q("path"),{"stroke-linecap":"round",d:o[r],id:A})),p[A]=1);var C=a._g.doc.getElementById(B),D;C?(p[B]++,D=C.getElementsByTagName("use")[0]):(C=q(q("marker"),{id:B,markerHeight:y,markerWidth:x,orient:"auto",refX:v,refY:y/2}),D=q(q("use"),{"xlink:href":"#"+A,transform:(f?" rotate(180 "+x/2+" "+y/2+") ":m)+"scale("+x/z+","+y/z+")","stroke-width":1/((x/z+y/z)/2)}),C.appendChild(D),h.defs.appendChild(C),p[B]=1),q(D,w);var E=u*(r!="diamond"&&r!="oval");f?(s=d._.arrows.startdx*l||0,t=a.getTotalLength(k.path)-E*l):(s=E*l,t=a.getTotalLength(k.path)-(d._.arrows.enddx*l||0)),w={},w["marker-"+i]="url(#"+B+")";if(t||s)w.d=Raphael.getSubpath(k.path,s,t);q(j,w),d._.arrows[i+"Path"]=A,d._.arrows[i+"Marker"]=B,d._.arrows[i+"dx"]=E,d._.arrows[i+"Type"]=r,d._.arrows[i+"String"]=e}else f?(s=d._.arrows.startdx*l||0,t=a.getTotalLength(k.path)-s):(s=0,t=a.getTotalLength(k.path)-(d._.arrows.enddx*l||0)),d._.arrows[i+"Path"]&&q(j,{d:Raphael.getSubpath(k.path,s,t)}),delete d._.arrows[i+"Path"],delete d._.arrows[i+"Marker"],delete d._.arrows[i+"dx"],delete d._.arrows[i+"Type"],delete d._.arrows[i+"String"];for(w in p)if(p[b](w)&&!p[w]){var F=a._g.doc.getElementById(w);F&&F.parentNode.removeChild(F)}}},u={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},v=function(a,b,d){b=u[c(b).toLowerCase()];if(b){var e=a.attrs["stroke-width"]||"1",f={round:e,square:e,butt:0}[a.attrs["stroke-linecap"]||d["stroke-linecap"]]||0,g=[],h=b.length;while(h--)g[h]=b[h]*e+(h%2?1:-1)*f;q(a.node,{"stroke-dasharray":g.join(",")})}},w=function(d,f){var i=d.node,k=d.attrs,m=i.style.visibility;i.style.visibility="hidden";for(var o in f)if(f[b](o)){if(!a._availableAttrs[b](o))continue;var p=f[o];k[o]=p;switch(o){case"blur":d.blur(p);break;case"href":case"title":case"target":var u=i.parentNode;if(u.tagName.toLowerCase()!="a"){var w=q("a");u.insertBefore(w,i),w.appendChild(i),u=w}o=="target"&&p=="blank"?u.setAttributeNS(n,"show","new"):u.setAttributeNS(n,o,p);break;case"cursor":i.style.cursor=p;break;case"transform":d.transform(p);break;case"arrow-start":t(d,p);break;case"arrow-end":t(d,p,1);break;case"clip-rect":var x=c(p).split(j);if(x.length==4){d.clip&&d.clip.parentNode.parentNode.removeChild(d.clip.parentNode);var z=q("clipPath"),A=q("rect");z.id=a.createUUID(),q(A,{x:x[0],y:x[1],width:x[2],height:x[3]}),z.appendChild(A),d.paper.defs.appendChild(z),q(i,{"clip-path":"url(#"+z.id+")"}),d.clip=A}if(!p){var B=i.getAttribute("clip-path");if(B){var C=a._g.doc.getElementById(B.replace(/(^url\(#|\)$)/g,l));C&&C.parentNode.removeChild(C),q(i,{"clip-path":l}),delete d.clip}}break;case"path":d.type=="path"&&(q(i,{d:p?k.path=a._pathToAbsolute(p):"M0,0"}),d._.dirty=1,d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1)));break;case"width":i.setAttribute(o,p),d._.dirty=1;if(!k.fx)break;o="x",p=k.x;case"x":k.fx&&(p=-k.x-(k.width||0));case"rx":if(o=="rx"&&d.type=="rect")break;case"cx":i.setAttribute(o,p),d.pattern&&s(d),d._.dirty=1;break;case"height":i.setAttribute(o,p),d._.dirty=1;if(!k.fy)break;o="y",p=k.y;case"y":k.fy&&(p=-k.y-(k.height||0));case"ry":if(o=="ry"&&d.type=="rect")break;case"cy":i.setAttribute(o,p),d.pattern&&s(d),d._.dirty=1;break;case"r":d.type=="rect"?q(i,{rx:p,ry:p}):i.setAttribute(o,p),d._.dirty=1;break;case"src":d.type=="image"&&i.setAttributeNS(n,"href",p);break;case"stroke-width":if(d._.sx!=1||d._.sy!=1)p/=g(h(d._.sx),h(d._.sy))||1;d.paper._vbSize&&(p*=d.paper._vbSize),i.setAttribute(o,p),k["stroke-dasharray"]&&v(d,k["stroke-dasharray"],f),d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1));break;case"stroke-dasharray":v(d,p,f);break;case"fill":var D=c(p).match(a._ISURL);if(D){z=q("pattern");var E=q("image");z.id=a.createUUID(),q(z,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),q(E,{x:0,y:0,"xlink:href":D[1]}),z.appendChild(E),function(b){a._preload(D[1],function(){var a=this.offsetWidth,c=this.offsetHeight;q(b,{width:a,height:c}),q(E,{width:a,height:c}),d.paper.safari()})}(z),d.paper.defs.appendChild(z),i.style.fill="url(#"+z.id+")",q(i,{fill:"url(#"+z.id+")"}),d.pattern=z,d.pattern&&s(d);break}var F=a.getRGB(p);if(!F.error)delete f.gradient,delete k.gradient,!a.is(k.opacity,"undefined")&&a.is(f.opacity,"undefined")&&q(i,{opacity:k.opacity}),!a.is(k["fill-opacity"],"undefined")&&a.is(f["fill-opacity"],"undefined")&&q(i,{"fill-opacity":k["fill-opacity"]});else if((d.type=="circle"||d.type=="ellipse"||c(p).charAt()!="r")&&r(d,p)){if("opacity"in k||"fill-opacity"in k){var G=a._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,l));if(G){var H=G.getElementsByTagName("stop");q(H[H.length-1],{"stop-opacity":("opacity"in k?k.opacity:1)*("fill-opacity"in k?k["fill-opacity"]:1)})}}k.gradient=p,k.fill="none";break}F[b]("opacity")&&q(i,{"fill-opacity":F.opacity>1?F.opacity/100:F.opacity});case"stroke":F=a.getRGB(p),i.setAttribute(o,F.hex),o=="stroke"&&F[b]("opacity")&&q(i,{"stroke-opacity":F.opacity>1?F.opacity/100:F.opacity}),o=="stroke"&&d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1));break;case"gradient":(d.type=="circle"||d.type=="ellipse"||c(p).charAt()!="r")&&r(d,p);break;case"opacity":k.gradient&&!k[b]("stroke-opacity")&&q(i,{"stroke-opacity":p>1?p/100:p});case"fill-opacity":if(k.gradient){G=a._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,l)),G&&(H=G.getElementsByTagName("stop"),q(H[H.length-1],{"stop-opacity":p}));break};default:o=="font-size"&&(p=e(p,10)+"px");var I=o.replace(/(\-.)/g,function(a){return a.substring(1).toUpperCase()});i.style[I]=p,d._.dirty=1,i.setAttribute(o,p)}}y(d,f),i.style.visibility=m},x=1.2,y=function(d,f){if(d.type=="text"&&!!(f[b]("text")||f[b]("font")||f[b]("font-size")||f[b]("x")||f[b]("y"))){var g=d.attrs,h=d.node,i=h.firstChild?e(a._g.doc.defaultView.getComputedStyle(h.firstChild,l).getPropertyValue("font-size"),10):10;if(f[b]("text")){g.text=f.text;while(h.firstChild)h.removeChild(h.firstChild);var j=c(f.text).split("\n"),k=[],m;for(var n=0,o=j.length;n<o;n++)m=q("tspan"),n&&q(m,{dy:i*x,x:g.x}),m.appendChild(a._g.doc.createTextNode(j[n])),h.appendChild(m),k[n]=m}else{k=h.getElementsByTagName("tspan");for(n=0,o=k.length;n<o;n++)n?q(k[n],{dy:i*x,x:g.x}):q(k[0],{dy:0})}q(h,{x:g.x,y:g.y}),d._.dirty=1;var p=d._getBBox(),r=g.y-(p.y+p.height/2);r&&a.is(r,"finite")&&q(k[0],{dy:r})}},z=function(b,c){var d=0,e=0;this[0]=this.node=b,b.raphael=!0,this.id=a._oid++,b.raphaelid=this.id,this.matrix=a.matrix(),this.realPath=null,this.paper=c,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!c.bottom&&(c.bottom=this),this.prev=c.top,c.top&&(c.top.next=this),c.top=this,this.next=null},A=a.el;z.prototype=A,A.constructor=z,a._engine.path=function(a,b){var c=q("path");b.canvas&&b.canvas.appendChild(c);var d=new z(c,b);return d.type="path",w(d,{fill:"none",stroke:"#000",path:a}),d},A.rotate=function(a,b,e){if(this.removed)return this;a=c(a).split(j),a.length-1&&(b=d(a[1]),e=d(a[2])),a=d(a[0]),e==null&&(b=e);if(b==null||e==null){var f=this.getBBox(1);b=f.x+f.width/2,e=f.y+f.height/2}return this.transform(this._.transform.concat([["r",a,b,e]])),this},A.scale=function(a,b,e,f){if(this.removed)return this;a=c(a).split(j),a.length-1&&(b=d(a[1]),e=d(a[2]),f=d(a[3])),a=d(a[0]),b==null&&(b=a),f==null&&(e=f);if(e==null||f==null)var g=this.getBBox(1);return e=e==null?g.x+g.width/2:e,f=f==null?g.y+g.height/2:f,this.transform(this._.transform.concat([["s",a,b,e,f]])),this},A.translate=function(a,b){return this.removed?this:(a=c(a).split(j),a.length-1&&(b=d(a[1])),a=d(a[0])||0,b=+b||0,this.transform(this._.transform.concat([["t",a,b]])),this)},A.transform=function(c){var d=this._;if(c==null)return d.transform;a._extractTransform(this,c),this.clip&&q(this.clip,{transform:this.matrix.invert()}),this.pattern&&s(this),this.node&&q(this.node,{transform:this.matrix});if(d.sx!=1||d.sy!=1){var e=this.attrs[b]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":e})}return this},A.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},A.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},A.remove=function(){if(!this.removed){var b=this.paper;b.__set__&&b.__set__.exclude(this),k.unbind("*.*."+this.id),this.gradient&&b.defs.removeChild(this.gradient),a._tear(this,b),this.node.parentNode.removeChild(this.node);for(var c in this)this[c]=typeof this[c]=="function"?a._removedFactory(c):null;this.removed=!0}},A._getBBox=function(){if(this.node.style.display=="none"){this.show();var a=!0}var b={};try{b=this.node.getBBox()}catch(c){}finally{b=b||{}}return a&&this.hide(),b},A.attr=function(c,d){if(this.removed)return this;if(c==null){var e={};for(var f in this.attrs)this.attrs[b](f)&&(e[f]=this.attrs[f]);return e.gradient&&e.fill=="none"&&(e.fill=e.gradient)&&delete e.gradient,e.transform=this._.transform,e}if(d==null&&a.is(c,"string")){if(c=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(c=="transform")return this._.transform;var g=c.split(j),h={};for(var i=0,l=g.length;i<l;i++)c=g[i],c in this.attrs?h[c]=this.attrs[c]:a.is(this.paper.customAttributes[c],"function")?h[c]=this.paper.customAttributes[c].def:h[c]=a._availableAttrs[c];return l-1?h:h[g[0]]}if(d==null&&a.is(c,"array")){h={};for(i=0,l=c.length;i<l;i++)h[c[i]]=this.attr(c[i]);return h}if(d!=null){var m={};m[c]=d}else c!=null&&a.is(c,"object")&&(m=c);for(var n in m)k("attr."+n+"."+this.id,this,m[n]);for(n in this.paper.customAttributes)if(this.paper.customAttributes[b](n)&&m[b](n)&&a.is(this.paper.customAttributes[n],"function")){var o=this.paper.customAttributes[n].apply(this,[].concat(m[n]));this.attrs[n]=m[n];for(var p in o)o[b](p)&&(m[p]=o[p])}return w(this,m),this},A.toFront=function(){if(this.removed)return this;this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var b=this.paper;return b.top!=this&&a._tofront(this,b),this},A.toBack=function(){if(this.removed)return this;var b=this.node.parentNode;b.tagName.toLowerCase()=="a"?b.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):b.firstChild!=this.node&&b.insertBefore(this.node,this.node.parentNode.firstChild),a._toback(this,this.paper);var c=this.paper;return this},A.insertAfter=function(b){if(this.removed)return this;var c=b.node||b[b.length-1].node;return c.nextSibling?c.parentNode.insertBefore(this.node,c.nextSibling):c.parentNode.appendChild(this.node),a._insertafter(this,b,this.paper),this},A.insertBefore=function(b){if(this.removed)return this;var c=b.node||b[0].node;return c.parentNode.insertBefore(this.node,c),a._insertbefore(this,b,this.paper),this},A.blur=function(b){var c=this;if(+b!==0){var d=q("filter"),e=q("feGaussianBlur");c.attrs.blur=b,d.id=a.createUUID(),q(e,{stdDeviation:+b||1.5}),d.appendChild(e),c.paper.defs.appendChild(d),c._blur=d,q(c.node,{filter:"url(#"+d.id+")"})}else c._blur&&(c._blur.parentNode.removeChild(c._blur),delete c._blur,delete c.attrs.blur),c.node.removeAttribute("filter")},a._engine.circle=function(a,b,c,d){var e=q("circle");a.canvas&&a.canvas.appendChild(e);var f=new z(e,a);return f.attrs={cx:b,cy:c,r:d,fill:"none",stroke:"#000"},f.type="circle",q(e,f.attrs),f},a._engine.rect=function(a,b,c,d,e,f){var g=q("rect");a.canvas&&a.canvas.appendChild(g);var h=new z(g,a);return h.attrs={x:b,y:c,width:d,height:e,r:f||0,rx:f||0,ry:f||0,fill:"none",stroke:"#000"},h.type="rect",q(g,h.attrs),h},a._engine.ellipse=function(a,b,c,d,e){var f=q("ellipse");a.canvas&&a.canvas.appendChild(f);var g=new z(f,a);return g.attrs={cx:b,cy:c,rx:d,ry:e,fill:"none",stroke:"#000"},g.type="ellipse",q(f,g.attrs),g},a._engine.image=function(a,b,c,d,e,f){var g=q("image");q(g,{x:c,y:d,width:e,height:f,preserveAspectRatio:"none"}),g.setAttributeNS(n,"href",b),a.canvas&&a.canvas.appendChild(g);var h=new z(g,a);return h.attrs={x:c,y:d,width:e,height:f,src:b},h.type="image",h},a._engine.text=function(b,c,d,e){var f=q("text");b.canvas&&b.canvas.appendChild(f);var g=new z(f,b);return g.attrs={x:c,y:d,"text-anchor":"middle",text:e,font:a._availableAttrs.font,stroke:"none",fill:"#000"},g.type="text",w(g,g.attrs),g},a._engine.setSize=function(a,b){return this.width=a||this.width,this.height=b||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},a._engine.create=function(){var b=a._getContainer.apply(0,arguments),c=b&&b.container,d=b.x,e=b.y,f=b.width,g=b.height;if(!c)throw new Error("SVG container not found.");var h=q("svg"),i="overflow:hidden;",j;return d=d||0,e=e||0,f=f||512,g=g||342,q(h,{height:g,version:1.1,width:f,xmlns:"http://www.w3.org/2000/svg"}),c==1?(h.style.cssText=i+"position:absolute;left:"+d+"px;top:"+e+"px",a._g.doc.body.appendChild(h),j=1):(h.style.cssText=i+"position:relative",c.firstChild?c.insertBefore(h,c.firstChild):c.appendChild(h)),c=new a._Paper,c.width=f,c.height=g,c.canvas=h,c.clear(),c._left=c._top=0,j&&(c.renderfix=function(){}),c.renderfix(),c},a._engine.setViewBox=function(a,b,c,d,e){k("setViewBox",this,this._viewBox,[a,b,c,d,e]);var f=g(c/this.width,d/this.height),h=this.top,i=e?"meet":"xMinYMin",j,l;a==null?(this._vbSize&&(f=1),delete this._vbSize,j="0 0 "+this.width+m+this.height):(this._vbSize=f,j=a+m+b+m+c+m+d),q(this.canvas,{viewBox:j,preserveAspectRatio:i});while(f&&h)l="stroke-width"in h.attrs?h.attrs["stroke-width"]:1,h.attr({"stroke-width":l}),h._.dirty=1,h._.dirtyT=1,h=h.prev;return this._viewBox=[a,b,c,d,!!e],this},a.prototype.renderfix=function(){var a=this.canvas,b=a.style,c=a.getScreenCTM()||a.createSVGMatrix(),d=-c.e%1,e=-c.f%1;if(d||e)d&&(this._left=(this._left+d)%1,b.left=this._left+"px"),e&&(this._top=(this._top+e)%1,b.top=this._top+"px")},a.prototype.clear=function(){a.eve("clear",this);var b=this.canvas;while(b.firstChild)b.removeChild(b.firstChild);this.bottom=this.top=null,(this.desc=q("desc")).appendChild(a._g.doc.createTextNode("Created with Raphaël "+a.version)),b.appendChild(this.desc),b.appendChild(this.defs=q("defs"))},a.prototype.remove=function(){k("remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var b in this)this[b]=typeof this[b]=="function"?a._removedFactory(b):null};var B=a.st;for(var C in A)A[b](C)&&!B[b](C)&&(B[C]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(C))}(window.Raphael),window.Raphael.vml&&function(a){var b="hasOwnProperty",c=String,d=parseFloat,e=Math,f=e.round,g=e.max,h=e.min,i=e.abs,j="fill",k=/[, ]+/,l=a.eve,m=" progid:DXImageTransform.Microsoft",n=" ",o="",p={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},q=/([clmz]),?([^clmz]*)/gi,r=/ progid:\S+Blur\([^\)]+\)/g,s=/-?[^,\s-]+/g,t="position:absolute;left:0;top:0;width:1px;height:1px",u=21600,v={path:1,rect:1,image:1},w={circle:1,ellipse:1},x=function(b){var d=/[ahqstv]/ig,e=a._pathToAbsolute;c(b).match(d)&&(e=a._path2curve),d=/[clmz]/g;if(e==a._pathToAbsolute&&!c(b).match(d)){var g=c(b).replace(q,function(a,b,c){var d=[],e=b.toLowerCase()=="m",g=p[b];return c.replace(s,function(a){e&&d.length==2&&(g+=d+p[b=="m"?"l":"L"],d=[]),d.push(f(a*u))}),g+d});return g}var h=e(b),i,j;g=[];for(var k=0,l=h.length;k<l;k++){i=h[k],j=h[k][0].toLowerCase(),j=="z"&&(j="x");for(var m=1,r=i.length;m<r;m++)j+=f(i[m]*u)+(m!=r-1?",":o);g.push(j)}return g.join(n)},y=function(b,c,d){var e=a.matrix();return e.rotate(-b,.5,.5),{dx:e.x(c,d),dy:e.y(c,d)}},z=function(a,b,c,d,e,f){var g=a._,h=a.matrix,k=g.fillpos,l=a.node,m=l.style,o=1,p="",q,r=u/b,s=u/c;m.visibility="hidden";if(!!b&&!!c){l.coordsize=i(r)+n+i(s),m.rotation=f*(b*c<0?-1:1);if(f){var t=y(f,d,e);d=t.dx,e=t.dy}b<0&&(p+="x"),c<0&&(p+=" y")&&(o=-1),m.flip=p,l.coordorigin=d*-r+n+e*-s;if(k||g.fillsize){var v=l.getElementsByTagName(j);v=v&&v[0],l.removeChild(v),k&&(t=y(f,h.x(k[0],k[1]),h.y(k[0],k[1])),v.position=t.dx*o+n+t.dy*o),g.fillsize&&(v.size=g.fillsize[0]*i(b)+n+g.fillsize[1]*i(c)),l.appendChild(v)}m.visibility="visible"}};a.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var A=function(a,b,d){var e=c(b).toLowerCase().split("-"),f=d?"end":"start",g=e.length,h="classic",i="medium",j="medium";while(g--)switch(e[g]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":h=e[g];break;case"wide":case"narrow":j=e[g];break;case"long":case"short":i=e[g]}var k=a.node.getElementsByTagName("stroke")[0];k[f+"arrow"]=h,k[f+"arrowlength"]=i,k[f+"arrowwidth"]=j},B=function(e,i){e.attrs=e.attrs||{};var l=e.node,m=e.attrs,p=l.style,q,r=v[e.type]&&(i.x!=m.x||i.y!=m.y||i.width!=m.width||i.height!=m.height||i.cx!=m.cx||i.cy!=m.cy||i.rx!=m.rx||i.ry!=m.ry||i.r!=m.r),s=w[e.type]&&(m.cx!=i.cx||m.cy!=i.cy||m.r!=i.r||m.rx!=i.rx||m.ry!=i.ry),t=e;for(var y in i)i[b](y)&&(m[y]=i[y]);r&&(m.path=a._getPath[e.type](e),e._.dirty=1),i.href&&(l.href=i.href),i.title&&(l.title=i.title),i.target&&(l.target=i.target),i.cursor&&(p.cursor=i.cursor),"blur"in i&&e.blur(i.blur);if(i.path&&e.type=="path"||r)l.path=x(~c(m.path).toLowerCase().indexOf("r")?a._pathToAbsolute(m.path):m.path),e.type=="image"&&(e._.fillpos=[m.x,m.y],e._.fillsize=[m.width,m.height],z(e,1,1,0,0,0));"transform"in i&&e.transform(i.transform);if(s){var B=+m.cx,D=+m.cy,E=+m.rx||+m.r||0,G=+m.ry||+m.r||0;l.path=a.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",f((B-E)*u),f((D-G)*u),f((B+E)*u),f((D+G)*u),f(B*u))}if("clip-rect"in i){var H=c(i["clip-rect"]).split(k);if(H.length==4){H[2]=+H[2]+ +H[0],H[3]=+H[3]+ +H[1];var I=l.clipRect||a._g.doc.createElement("div"),J=I.style;J.clip=a.format("rect({1}px {2}px {3}px {0}px)",H),l.clipRect||(J.position="absolute",J.top=0,J.left=0,J.width=e.paper.width+"px",J.height=e.paper.height+"px",l.parentNode.insertBefore(I,l),I.appendChild(l),l.clipRect=I)}i["clip-rect"]||l.clipRect&&(l.clipRect.style.clip="auto")}if(e.textpath){var K=e.textpath.style;i.font&&(K.font=i.font),i["font-family"]&&(K.fontFamily='"'+i["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,o)+'"'),i["font-size"]&&(K.fontSize=i["font-size"]),i["font-weight"]&&(K.fontWeight=i["font-weight"]),i["font-style"]&&(K.fontStyle=i["font-style"])}"arrow-start"in i&&A(t,i["arrow-start"]),"arrow-end"in i&&A(t,i["arrow-end"],1);if(i.opacity!=null||i["stroke-width"]!=null||i.fill!=null||i.src!=null||i.stroke!=null||i["stroke-width"]!=null||i["stroke-opacity"]!=null||i["fill-opacity"]!=null||i["stroke-dasharray"]!=null||i["stroke-miterlimit"]!=null||i["stroke-linejoin"]!=null||i["stroke-linecap"]!=null){var L=l.getElementsByTagName(j),M=!1;L=L&&L[0],!L&&(M=L=F(j)),e.type=="image"&&i.src&&(L.src=i.src),i.fill&&(L.on=!0);if(L.on==null||i.fill=="none"||i.fill===null)L.on=!1;if(L.on&&i.fill){var N=c(i.fill).match(a._ISURL);if(N){L.parentNode==l&&l.removeChild(L),L.rotate=!0,L.src=N[1],L.type="tile";var O=e.getBBox(1);L.position=O.x+n+O.y,e._.fillpos=[O.x,O.y],a._preload(N[1],function(){e._.fillsize=[this.offsetWidth,this.offsetHeight]})}else L.color=a.getRGB(i.fill).hex,L.src=o,L.type="solid",a.getRGB(i.fill).error&&(t.type in{circle:1,ellipse:1}||c(i.fill).charAt()!="r")&&C(t,i.fill,L)&&(m.fill="none",m.gradient=i.fill,L.rotate=!1)}if("fill-opacity"in i||"opacity"in i){var P=((+m["fill-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+a.getRGB(i.fill).o+1||2)-1);P=h(g(P,0),1),L.opacity=P,L.src&&(L.color="none")}l.appendChild(L);var Q=l.getElementsByTagName("stroke")&&l.getElementsByTagName("stroke")[0],R=!1;!Q&&(R=Q=F("stroke"));if(i.stroke&&i.stroke!="none"||i["stroke-width"]||i["stroke-opacity"]!=null||i["stroke-dasharray"]||i["stroke-miterlimit"]||i["stroke-linejoin"]||i["stroke-linecap"])Q.on=!0;(i.stroke=="none"||i.stroke===null||Q.on==null||i.stroke==0||i["stroke-width"]==0)&&(Q.on=!1);var S=a.getRGB(i.stroke);Q.on&&i.stroke&&(Q.color=S.hex),P=((+m["stroke-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+S.o+1||2)-1);var T=(d(i["stroke-width"])||1)*.75;P=h(g(P,0),1),i["stroke-width"]==null&&(T=m["stroke-width"]),i["stroke-width"]&&(Q.weight=T),T&&T<1&&(P*=T)&&(Q.weight=1),Q.opacity=P,i["stroke-linejoin"]&&(Q.joinstyle=i["stroke-linejoin"]||"miter"),Q.miterlimit=i["stroke-miterlimit"]||8,i["stroke-linecap"]&&(Q.endcap=i["stroke-linecap"]=="butt"?"flat":i["stroke-linecap"]=="square"?"square":"round");if(i["stroke-dasharray"]){var U={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};Q.dashstyle=U[b](i["stroke-dasharray"])?U[i["stroke-dasharray"]]:o}R&&l.appendChild(Q)}if(t.type=="text"){t.paper.canvas.style.display=o;var V=t.paper.span,W=100,X=m.font&&m.font.match(/\d+(?:\.\d*)?(?=px)/);p=V.style,m.font&&(p.font=m.font),m["font-family"]&&(p.fontFamily=m["font-family"]),m["font-weight"]&&(p.fontWeight=m["font-weight"]),m["font-style"]&&(p.fontStyle=m["font-style"]),X=d(m["font-size"]||X&&X[0])||10,p.fontSize=X*W+"px",t.textpath.string&&(V.innerHTML=c(t.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var Y=V.getBoundingClientRect();t.W=m.w=(Y.right-Y.left)/W,t.H=m.h=(Y.bottom-Y.top)/W,t.X=m.x,t.Y=m.y+t.H/2,("x"in i||"y"in i)&&(t.path.v=a.format("m{0},{1}l{2},{1}",f(m.x*u),f(m.y*u),f(m.x*u)+1));var Z=["x","y","text","font","font-family","font-weight","font-style","font-size"];for(var $=0,_=Z.length;$<_;$++)if(Z[$]in i){t._.dirty=1;break}switch(m["text-anchor"]){case"start":t.textpath.style["v-text-align"]="left",t.bbx=t.W/2;break;case"end":t.textpath.style["v-text-align"]="right",t.bbx=-t.W/2;break;default:t.textpath.style["v-text-align"]="center",t.bbx=0}t.textpath.style["v-text-kern"]=!0}},C=function(b,f,g){b.attrs=b.attrs||{};var h=b.attrs,i=Math.pow,j,k,l="linear",m=".5 .5";b.attrs.gradient=f,f=c(f).replace(a._radial_gradient,function(a,b,c){return l="radial",b&&c&&(b=d(b),c=d(c),i(b-.5,2)+i(c-.5,2)>.25&&(c=e.sqrt(.25-i(b-.5,2))*((c>.5)*2-1)+.5),m=b+n+c),o}),f=f.split(/\s*\-\s*/);if(l=="linear"){var p=f.shift();p=-d(p);if(isNaN(p))return null}var q=a._parseDots(f);if(!q)return null;b=b.shape||b.node;if(q.length){b.removeChild(g),g.on=!0,g.method="none",g.color=q[0].color,g.color2=q[q.length-1].color;var r=[];for(var s=0,t=q.length;s<t;s++)q[s].offset&&r.push(q[s].offset+n+q[s].color);g.colors=r.length?r.join():"0% "+g.color,l=="radial"?(g.type="gradientTitle",g.focus="100%",g.focussize="0 0",g.focusposition=m,g.angle=0):(g.type="gradient",g.angle=(270-p)%360),b.appendChild(g)}return 1},D=function(b,c){this[0]=this.node=b,b.raphael=!0,this.id=a._oid++,b.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=c,this.matrix=a.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!c.bottom&&(c.bottom=this),this.prev=c.top,c.top&&(c.top.next=this),c.top=this,this.next=null},E=a.el;D.prototype=E,E.constructor=D,E.transform=function(b){if(b==null)return this._.transform;var d=this.paper._viewBoxShift,e=d?"s"+[d.scale,d.scale]+"-1-1t"+[d.dx,d.dy]:o,f;d&&(f=b=c(b).replace(/\.{3}|\u2026/g,this._.transform||o)),a._extractTransform(this,e+b);var g=this.matrix.clone(),h=this.skew,i=this.node,j,k=~c(this.attrs.fill).indexOf("-"),l=!c(this.attrs.fill).indexOf("url(");g.translate(-0.5,-0.5);if(l||k||this.type=="image"){h.matrix="1 0 0 1",h.offset="0 0",j=g.split();if(k&&j.noRotation||!j.isSimple){i.style.filter=g.toFilter();var m=this.getBBox(),p=this.getBBox(1),q=m.x-p.x,r=m.y-p.y;i.coordorigin=q*-u+n+r*-u,z(this,1,1,q,r,0)}else i.style.filter=o,z(this,j.scalex,j.scaley,j.dx,j.dy,j.rotate)}else i.style.filter=o,h.matrix=c(g),h.offset=g.offset();return f&&(this._.transform=f),this},E.rotate=function(a,b,e){if(this.removed)return this;if(a!=null){a=c(a).split(k),a.length-1&&(b=d(a[1]),e=d(a[2])),a=d(a[0]),e==null&&(b=e);if(b==null||e==null){var f=this.getBBox(1);b=f.x+f.width/2,e=f.y+f.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",a,b,e]])),this}},E.translate=function(a,b){return this.removed?this:(a=c(a).split(k),a.length-1&&(b=d(a[1])),a=d(a[0])||0,b=+b||0,this._.bbox&&(this._.bbox.x+=a,this._.bbox.y+=b),this.transform(this._.transform.concat([["t",a,b]])),this)},E.scale=function(a,b,e,f){if(this.removed)return this;a=c(a).split(k),a.length-1&&(b=d(a[1]),e=d(a[2]),f=d(a[3]),isNaN(e)&&(e=null),isNaN(f)&&(f=null)),a=d(a[0]),b==null&&(b=a),f==null&&(e=f);if(e==null||f==null)var g=this.getBBox(1);return e=e==null?g.x+g.width/2:e,f=f==null?g.y+g.height/2:f,this.transform(this._.transform.concat([["s",a,b,e,f]])),this._.dirtyT=1,this},E.hide=function(){return!this.removed&&(this.node.style.display="none"),this},E.show=function(){return!this.removed&&(this.node.style.display=o),this},E._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},E.remove=function(){if(!this.removed){this.paper.__set__&&this.paper.__set__.exclude(this),a.eve.unbind("*.*."+this.id),a._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var b in this)this[b]=typeof this[b]=="function"?a._removedFactory(b):null;this.removed=!0}},E.attr=function(c,d){if(this.removed)return this;if(c==null){var e={};for(var f in this.attrs)this.attrs[b](f)&&(e[f]=this.attrs[f]);return e.gradient&&e.fill=="none"&&(e.fill=e.gradient)&&delete e.gradient,e.transform=this._.transform,e}if(d==null&&a.is(c,"string")){if(c==j&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;var g=c.split(k),h={};for(var i=0,m=g.length;i<m;i++)c=g[i],c in this.attrs?h[c]=this.attrs[c]:a.is(this.paper.customAttributes[c],"function")?h[c]=this.paper.customAttributes[c].def:h[c]=a._availableAttrs[c];return m-1?h:h[g[0]]}if(this.attrs&&d==null&&a.is(c,"array")){h={};for(i=0,m=c.length;i<m;i++)h[c[i]]=this.attr(c[i]);return h}var n;d!=null&&(n={},n[c]=d),d==null&&a.is(c,"object")&&(n=c);for(var o in n)l("attr."+o+"."+this.id,this,n[o]);if(n){for(o in this.paper.customAttributes)if(this.paper.customAttributes[b](o)&&n[b](o)&&a.is(this.paper.customAttributes[o],"function")){var p=this.paper.customAttributes[o].apply(this,[].concat(n[o]));this.attrs[o]=n[o];for(var q in p)p[b](q)&&(n[q]=p[q])}n.text&&this.type=="text"&&(this.textpath.string=n.text),B(this,n)}return this},E.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&a._tofront(this,this.paper),this},E.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),a._toback(this,this.paper)),this)},E.insertAfter=function(b){return this.removed?this:(b.constructor==a.st.constructor&&(b=b[b.length-1]),b.node.nextSibling?b.node.parentNode.insertBefore(this.node,b.node.nextSibling):b.node.parentNode.appendChild(this.node),a._insertafter(this,b,this.paper),this)},E.insertBefore=function(b){return this.removed?this:(b.constructor==a.st.constructor&&(b=b[0]),b.node.parentNode.insertBefore(this.node,b.node),a._insertbefore(this,b,this.paper),this)},E.blur=function(b){var c=this.node.runtimeStyle,d=c.filter;d=d.replace(r,o),+b!==0?(this.attrs.blur=b,c.filter=d+n+m+".Blur(pixelradius="+(+b||1.5)+")",c.margin=a.format("-{0}px 0 0 -{0}px",f(+b||1.5))):(c.filter=d,c.margin=0,delete this.attrs.blur)},a._engine.path=function(a,b){var c=F("shape");c.style.cssText=t,c.coordsize=u+n+u,c.coordorigin=b.coordorigin;var d=new D(c,b),e={fill:"none",stroke:"#000"};a&&(e.path=a),d.type="path",d.path=[],d.Path=o,B(d,e),b.canvas.appendChild(c);var f=F("skew");return f.on=!0,c.appendChild(f),d.skew=f,d.transform(o),d},a._engine.rect=function(b,c,d,e,f,g){var h=a._rectPath(c,d,e,f,g),i=b.path(h),j=i.attrs;return i.X=j.x=c,i.Y=j.y=d,i.W=j.width=e,i.H=j.height=f,j.r=g,j.path=h,i.type="rect",i},a._engine.ellipse=function(a,b,c,d,e){var f=a.path(),g=f.attrs;return f.X=b-d,f.Y=c-e,f.W=d*2,f.H=e*2,f.type="ellipse",B(f,{cx:b,cy:c,rx:d,ry:e}),f},a._engine.circle=function(a,b,c,d){var e=a.path(),f=e.attrs;return e.X=b-d,e.Y=c-d,e.W=e.H=d*2,e.type="circle",B(e,{cx:b,cy:c,r:d}),e},a._engine.image=function(b,c,d,e,f,g){var h=a._rectPath(d,e,f,g),i=b.path(h).attr({stroke:"none"}),k=i.attrs,l=i.node,m=l.getElementsByTagName(j)[0];return k.src=c,i.X=k.x=d,i.Y=k.y=e,i.W=k.width=f,i.H=k.height=g,k.path=h,i.type="image",m.parentNode==l&&l.removeChild(m),m.rotate=!0,m.src=c,m.type="tile",i._.fillpos=[d,e],i._.fillsize=[f,g],l.appendChild(m),z(i,1,1,0,0,0),i},a._engine.text=function(b,d,e,g){var h=F("shape"),i=F("path"),j=F("textpath");d=d||0,e=e||0,g=g||"",i.v=a.format("m{0},{1}l{2},{1}",f(d*u),f(e*u),f(d*u)+1),i.textpathok=!0,j.string=c(g),j.on=!0,h.style.cssText=t,h.coordsize=u+n+u,h.coordorigin="0 0";var k=new D(h,b),l={fill:"#000",stroke:"none",font:a._availableAttrs.font,text:g};k.shape=h,k.path=i,k.textpath=j,k.type="text",k.attrs.text=c(g),k.attrs.x=d,k.attrs.y=e,k.attrs.w=1,k.attrs.h=1,B(k,l),h.appendChild(j),h.appendChild(i),b.canvas.appendChild(h);var m=F("skew");return m.on=!0,h.appendChild(m),k.skew=m,k.transform(o),k},a._engine.setSize=function(b,c){var d=this.canvas.style;return this.width=b,this.height=c,b==+b&&(b+="px"),c==+c&&(c+="px"),d.width=b,d.height=c,d.clip="rect(0 "+b+" "+c+" 0)",this._viewBox&&a._engine.setViewBox.apply(this,this._viewBox),this},a._engine.setViewBox=function(b,c,d,e,f){a.eve("setViewBox",this,this._viewBox,[b,c,d,e,f]);var h=this.width,i=this.height,j=1/g(d/h,e/i),k,l;return f&&(k=i/e,l=h/d,d*k<h&&(b-=(h-d*k)/2/k),e*l<i&&(c-=(i-e*l)/2/l)),this._viewBox=[b,c,d,e,!!f],this._viewBoxShift={dx:-b,dy:-c,scale:j},this.forEach(function(a){a.transform("...")}),this};var F;a._engine.initWin=function(a){var b=a.document;b.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!b.namespaces.rvml&&b.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),F=function(a){return b.createElement("<rvml:"+a+' class="rvml">')}}catch(c){F=function(a){return b.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},a._engine.initWin(a._g.win),a._engine.create=function(){var b=a._getContainer.apply(0,arguments),c=b.container,d=b.height,e,f=b.width,g=b.x,h=b.y;if(!c)throw new Error("VML container not found.");var i=new a._Paper,j=i.canvas=a._g.doc.createElement("div"),k=j.style;return g=g||0,h=h||0,f=f||512,d=d||342,i.width=f,i.height=d,f==+f&&(f+="px"),d==+d&&(d+="px"),i.coordsize=u*1e3+n+u*1e3,i.coordorigin="0 0",i.span=a._g.doc.createElement("span"),i.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",j.appendChild(i.span),k.cssText=a.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",f,d),c==1?(a._g.doc.body.appendChild(j),k.left=g+"px",k.top=h+"px",k.position="absolute"):c.firstChild?c.insertBefore(j,c.firstChild):c.appendChild(j),i.renderfix=function(){},i},a.prototype.clear=function(){a.eve("clear",this),this.canvas.innerHTML=o,this.span=a._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},a.prototype.remove=function(){a.eve("remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var b in this)this[b]=typeof this[b]=="function"?a._removedFactory(b):null;return!0};var G=a.st;for(var H in E)E[b](H)&&!G[b](H)&&(G[H]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(H))}(window.Raphael);
Raphael.fn.star=function(a,b,c,d,e){d=d||c*.382,e=e||5;var f=["M",a,b+d,"L"],g;for(var h=1;h<e*2;h++)g=h%2?c:d,f=f.concat([a+g*Math.sin(h*Math.PI/e),b+g*Math.cos(h*Math.PI/e)]);return f.push("z"),this.path(f.join())},Raphael.fn.flower=function(a,b,c,d,e){d=d||c*.5,e=+e<3||!e?5:e;var f=["M",a,b+d,"Q"],g;for(var h=1;h<e*2+1;h++)g=h%2?c:d,f=f.concat([+(a+g*Math.sin(h*Math.PI/e)).toFixed(3),+(b+g*Math.cos(h*Math.PI/e)).toFixed(3)]);return f.push("z"),this.path(f)},Raphael.fn.spike=function(a,b,c,d,e){d=d||c*.5,e=+e<3||!e?5:e;var f=["M",a,b-c,"Q"],g;for(var h=1;h<e*2+1;h++)g=h%2?d:c,f=f.concat([a+g*Math.sin(h*Math.PI/e-Math.PI),b+g*Math.cos(h*Math.PI/e-Math.PI)]);return f.push("z"),this.path(f)},Raphael.fn.polyline=function(){var a="M".concat(arguments[0]||0,",",arguments[1]||0,"L");for(var b=2,c=arguments.length-1;b<c;b++)a+=arguments[b]+","+arguments[++b];return arguments[c].toLowerCase()=="z"&&(a+="z"),this.path(a)},Raphael.fn.polygon=function(a,b,c,d){d=+d<3||!d?5:d;var e=["M",a,b-c,"L"],f;for(var g=1;g<d;g++)e=e.concat([a+c*Math.sin(g*Math.PI*2/d-Math.PI),b+c*Math.cos(g*Math.PI*2/d-Math.PI)]);return e.push("z"),this.path(e)},Raphael.fn.line=function(a,b,c,d){return this.path(["M",a,b,"L",c,d])},Raphael.fn.drawGrid=function(a,b,c,d,e,f,g){g=g||"#000";var h=["M",a,b,"L",a+c,b,a+c,b+d,a,b+d,a,b],i=d/f,j=c/e;for(var k=1;k<f;k++)h=h.concat(["M",a,b+k*i,"L",a+c,b+k*i]);for(var k=1;k<e;k++)h=h.concat(["M",a+k*j,b,"L",a+k*j,b+d]);return this.path(h.join(",")).attr({stroke:g})},Raphael.fn.square=function(a,b,c){return c*=.7,this.rect(a-c,b-c,2*c,2*c)},Raphael.fn.triangle=function(a,b,c){return c*=1.75,this.path("M".concat(a,",",b,"m0-",c*.58,"l",c*.5,",",c*.87,"-",c,",0z"))},Raphael.fn.diamond=function(a,b,c){return this.path(["M",a,b-c,"l",c,c,-c,c,-c,-c,c,-c,"z"])},Raphael.fn.cross=function(a,b,c){return c/=2.5,this.path("M".concat(a-c,",",b,"l",[-c,-c,c,-c,c,c,c,-c,c,c,-c,c,c,c,-c,c,-c,-c,-c,c,-c,-c,"z"]))},Raphael.fn.plus=function(a,b,c){return c/=2,this.path("M".concat(a-c/2,",",b-c/2,"l",[0,-c,c,0,0,c,c,0,0,c,-c,0,0,c,-c,0,0,-c,-c,0,0,-c,"z"]))},Raphael.fn.arrow=function(a,b,c){return this.path("M".concat(a-c*.7,",",b-c*.4,"l",[c*.6,0,0,-c*.4,c,c*.8,-c,c*.8,0,-c*.4,-c*.6,0],"z"))};
var jsonlint=function(){var a=!0,b=!1,c={},d=function(){var a={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(a,b,c,d,e,f,g){var h=f.length-1;switch(e){case 1:this.$=a;break;case 2:this.$=Number(a);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=f[h-1];case 13:this.$={};break;case 14:this.$=f[h-1];break;case 15:this.$=[f[h-2],f[h]];break;case 16:this.$={},this.$[f[h][0]]=f[h][1];break;case 17:this.$=f[h-2],f[h-2][f[h][0]]=f[h][1];break;case 18:this.$=[];break;case 19:this.$=f[h-1];break;case 20:this.$=[f[h]];break;case 21:this.$=f[h-2],f[h-2].push(f[h])}},table:[{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],defaultActions:{16:[2,6]},parseError:function(a,b){throw new Error(a)},parse:function(a){function b(){var a;return a=d.lexer.lex()||1,typeof a!="number"&&(a=d.symbols_[a]||a),a}function c(a){e.length=e.length-2*a,f.length=f.length-a,g.length=g.length-a}var d=this,e=[0],f=[null],g=[],h=this.table,i="",j=0,k=0,l=0,m=2,n=1;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var o=this.lexer.yylloc;g.push(o),typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var p,q,r,s,t,u,v={},w,x,y,z;for(;;){r=e[e.length-1],this.defaultActions[r]?s=this.defaultActions[r]:(p==null&&(p=b()),s=h[r]&&h[r][p]);if(typeof s=="undefined"||!s.length||!s[0]){if(!l){z=[];for(w in h[r])this.terminals_[w]&&w>2&&z.push("'"+this.terminals_[w]+"'");var A="";this.lexer.showPosition?A="Parse error on line "+(j+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+z.join(", "):A="Parse error on line "+(j+1)+": Unexpected "+(p==1?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(A,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:o,expected:z})}if(l==3){if(p==n)throw new Error(A||"Parsing halted.");k=this.lexer.yyleng,i=this.lexer.yytext,j=this.lexer.yylineno,o=this.lexer.yylloc,p=b()}for(;;){if(m.toString()in h[r])break;if(r==0)throw new Error(A||"Parsing halted.");c(1),r=e[e.length-1]}q=p,p=m,r=e[e.length-1],s=h[r]&&h[r][m],l=3}if(s[0]instanceof Array&&s.length>1)throw new Error("Parse Error: multiple actions possible at state: "+r+", token: "+p);switch(s[0]){case 1:e.push(p),f.push(this.lexer.yytext),g.push(this.lexer.yylloc),e.push(s[1]),p=null,q?(p=q,q=null):(k=this.lexer.yyleng,i=this.lexer.yytext,j=this.lexer.yylineno,o=this.lexer.yylloc,l>0&&l--);break;case 2:x=this.productions_[s[1]][1],v.$=f[f.length-x],v._$={first_line:g[g.length-(x||1)].first_line,last_line:g[g.length-1].last_line,first_column:g[g.length-(x||1)].first_column,last_column:g[g.length-1].last_column},u=this.performAction.call(v,i,k,j,this.yy,s[1],f,g);if(typeof u!="undefined")return u;x&&(e=e.slice(0,-1*x*2),f=f.slice(0,-1*x),g=g.slice(0,-1*x)),e.push(this.productions_[s[1]][0]),f.push(v.$),g.push(v._$),y=h[e[e.length-2]][e[e.length-1]],e.push(y);break;case 3:return!0}}return!0}},b=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parseError)throw new Error(a);this.yy.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.match+=a,this.matched+=a;var b=a.match(/\n/);return b&&this.yylineno++,this._input=this._input.slice(1),a},unput:function(a){return this._input=a+this._input,this},more:function(){return this._more=!0,this},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d;this._more||(this.yytext="",this.match="");var e=this._currentRules();for(var f=0;f<e.length;f++){b=this._input.match(this.rules[e[f]]);if(b){d=b[0].match(/\n.*/g),d&&(this.yylineno+=d.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:d?d[d.length-1].length-1:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,e[f],this.conditionStack[this.conditionStack.length-1]);if(a)return a;return}}if(this._input==="")return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return typeof a!="undefined"?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules}};return a.performAction=function(a,b,c,d){var e=d;switch(c){case 0:break;case 1:return 6;case 2:return b.yytext=b.yytext.substr(1,b.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},a.rules=[/^\s+/,/^-?([0-9]|[1-9][0-9]+)(\.[0-9]+)?([eE][-+]?[0-9]+)?\b/,/^"(\\["bfnrt/\\]|\\u[a-fA-F0-9]{4}|[^\0-\x09\x0a-\x1f"\\])*"/,/^\{/,/^\}/,/^\[/,/^\]/,/^,/,/^:/,/^true\b/,/^false\b/,/^null\b/,/^$/,/^./],a.conditions={INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}},a}();return a.lexer=b,a}();return typeof a!="undefined"&&typeof c!="undefined"&&(c.parser=d,c.parse=function(){return d.parse.apply(d,arguments)},c.main=function(b){if(!b[1])throw new Error("Usage: "+b[0]+" FILE");if(typeof process!="undefined")var d=a("fs").readFileSync(a("path").join(process.cwd(),b[1]),"utf8");else var e=a("file").path(a("file").cwd()),d=e.join(b[1]).read({charset:"utf-8"});return c.parser.parse(d)},typeof b!="undefined"&&a.main===b&&c.main(typeof process!="undefined"?process.argv.slice(1):a("system").args)),c}();
var CodeMirror=function(){function a(c,d){function bN(a){return a>=0&&a<bm.size}function bP(a){return t(bm,a)}function bQ(a,b){bB=!0;var c=b-a.height;for(var d=a;d;d=d.parent)d.height+=c}function bR(a){var b={line:0,ch:0};cc(b,{line:bm.size-1,ch:bP(bm.size-1).text.length},Y(a),b,b),bv=!0}function bS(a){var b=[];return bm.iter(0,bm.size,function(a){b.push(a.text)}),b.join("\n")}function bT(a){function j(a){var b=dw(a,!0);if(b&&!Q(b,g)){bo||ca(),g=b,cD(d,b),bv=!1;var c=cw();if(b.line>=c.to||b.line<c.from)h=setTimeout(dJ(function(){j(a)}),150)}}cC(a.shiftKey);for(var c=D(a);c!=B;c=c.parentNode)if(c.parentNode==_&&c!=ba)return;for(var c=D(a);c!=B;c=c.parentNode)if(c.parentNode==bc)return e.onGutterClick&&e.onGutterClick(bO,W(bc.childNodes,c)+bE,a),A(a);var d=dw(a);switch(E(a)){case 3:I&&!b&&dx(a);return;case 2:d&&cG(d.line,d.ch,!0);return}if(!d){D(a)==N&&A(a);return}bo||ca();var f=+(new Date);if(bs&&bs.time>f-400&&Q(bs.pos,d))return A(a),setTimeout(cs,20),cP(d.line);if(br&&br.time>f-400&&Q(br.pos,d))return bs={time:f,pos:d},A(a),cO(d);br={time:f,pos:d};var g=d,h;if(H&&!Q(bp.from,bp.to)&&!R(d,bp.from)&&!R(bp.to,d)){K&&(bd.draggable=!0);var i=F(y,"mouseup",dJ(function(b){K&&(bd.draggable=!1),bt=!1,i(),Math.abs(a.clientX-b.clientX)+Math.abs(a.clientY-b.clientY)<10&&(A(b),cG(d.line,d.ch,!0),cs())}),!0);bt=!0;return}A(a),cG(d.line,d.ch,!0);var k=F(y,"mousemove",dJ(function(a){clearTimeout(h),A(a),j(a)}),!0),i=F(y,"mouseup",dJ(function(a){clearTimeout(h);var b=dw(a);b&&cD(d,b),A(a),cs(),bv=!0,k(),i()}),!0)}function bU(a){for(var b=D(a);b!=B;b=b.parentNode)if(b.parentNode==bc)return A(a);var c=dw(a);if(!c)return;bs={time:+(new Date),pos:c},A(a),cO(c)}function bV(a){a.preventDefault();var b=dw(a,!0),c=a.dataTransfer.files;if(!b||e.readOnly)return;if(c&&c.length&&window.FileReader&&window.File){function d(a,c){var d=new FileReader;d.onload=function(){g[c]=d.result,++h==f&&(b=cI(b),dJ(function(){var a=ch(g.join(""),b,b);cD(b,a)})())},d.readAsText(a)}var f=c.length,g=Array(f),h=0;for(var i=0;i<f;++i)d(c[i],i)}else try{var g=a.dataTransfer.getData("Text");if(g){var j=ch(g,b,b),k=bp.from,l=bp.to;cD(b,j),bt&&ch("",k,l),cs()}}catch(a){}}function bW(a){var b=cl();U(b),a.dataTransfer.setDragImage(T,0,0),a.dataTransfer.setData("Text",b)}function bX(a){var b=$[a.keyCode],c=h[e.keyMap].auto,d,f;if(b==null||a.altGraphKey)return c&&(e.keyMap=c),null;a.altKey&&(b="Alt-"+b),a.ctrlKey&&(b="Ctrl-"+b),a.metaKey&&(b="Cmd-"+b),a.shiftKey&&(d=i("Shift-"+b,e.extraKeys,e.keyMap))?f=!0:d=i(b,e.extraKeys,e.keyMap),typeof d=="string"&&(g.propertyIsEnumerable(d)?d=g[d]:d=null),c&&(d||!j(a))&&(e.keyMap=c);if(!d)return!1;if(f){var k=bq;bq=null,d(bO),bq=k}else d(bO);return A(a),!0}function bZ(a){bo||ca();var c=a.keyCode;J&&c==27&&(a.returnValue=!1),cC(c==16||a.shiftKey);if(e.onKeyEvent&&e.onKeyEvent(bO,z(a)))return;var d=bX(a);window.opera&&(bY=d?a.keyCode:null,!d&&(b?a.metaKey:a.ctrlKey)&&a.keyCode==88&&ci(""))}function b$(a){if(window.opera&&a.keyCode==bY){bY=null,A(a);return}if(e.onKeyEvent&&e.onKeyEvent(bO,z(a)))return;if(window.opera&&!a.which&&bX(a))return;if(e.electricChars&&bl.electricChars){var b=String.fromCharCode(a.charCode==null?a.keyCode:a.charCode);bl.electricChars.indexOf(b)>-1&&setTimeout(dJ(function(){cR(bp.to.line,"smart")}),75)}co()}function b_(a){if(e.onKeyEvent&&e.onKeyEvent(bO,z(a)))return;a.keyCode==16&&(bq=null)}function ca(){if(e.readOnly)return;bo||(e.onFocus&&e.onFocus(bO),bo=!0,B.className.search(/\bCodeMirror-focused\b/)==-1&&(B.className+=" CodeMirror-focused"),bA||cr(!0)),cn(),dy()}function cb(){bo&&(e.onBlur&&e.onBlur(bO),bo=!1,B.className=B.className.replace(" CodeMirror-focused","")),clearInterval(bk),setTimeout(function(){bo||(bq=null)},150)}function cc(a,b,c,d,f){if(bL){var g=[];bm.iter(a.line,b.line+1,function(a){g.push(a.text)}),bL.addChange(a.line,c.length,g);while(bL.done.length>e.undoDepth)bL.done.shift()}cg(a,b,c,d,f)}function cd(a,b){var c=a.pop();if(c){var d=[],e=c.start+c.added;bm.iter(c.start,e,function(a){d.push(a.text)}),b.push({start:c.start,added:c.old.length,old:d});var f=cI({line:c.start+c.old.length-1,ch:V(d[d.length-1],c.old[c.old.length-1])});cg({line:c.start,ch:0},{line:e-1,ch:bP(e-1).text.length},c.old,f,f),bv=!0}}function ce(){cd(bL.done,bL.undone)}function cf(){cd(bL.undone,bL.done)}function cg(a,b,c,d,f){function y(a){return a<=Math.min(b.line,b.line+s)?a:a+s}var g=!1,h=bI.length;e.lineWrapping||bm.iter(a.line,b.line,function(a){if(a.text.length==h)return g=!0,!0});if(a.line!=b.line||c.length>1)bB=!0;var i=b.line-a.line,j=bP(a.line),k=bP(b.line);if(a.ch==0&&b.ch==0&&c[c.length-1]==""){var l=[],m=null;a.line?(m=bP(a.line-1),m.fixMarkEnds(k)):k.fixMarkStarts();for(var n=0,o=c.length-1;n<o;++n)l.push(p.inheritMarks(c[n],m));i&&bm.remove(a.line,i,bC),l.length&&bm.insert(a.line,l)}else if(j==k)if(c.length==1)j.replace(a.ch,b.ch,c[0]);else{k=j.split(b.ch,c[c.length-1]),j.replace(a.ch,null,c[0]),j.fixMarkEnds(k);var l=[];for(var n=1,o=c.length-1;n<o;++n)l.push(p.inheritMarks(c[n],j));l.push(k),bm.insert(a.line+1,l)}else if(c.length==1)j.replace(a.ch,null,c[0]),k.replace(null,b.ch,""),j.append(k),bm.remove(a.line+1,i,bC);else{var l=[];j.replace(a.ch,null,c[0]),k.replace(null,b.ch,c[c.length-1]),j.fixMarkEnds(k);for(var n=1,o=c.length-1;n<o;++n)l.push(p.inheritMarks(c[n],j));i>1&&bm.remove(a.line+1,i-1,bC),bm.insert(a.line+1,l)}if(e.lineWrapping){var q=N.clientWidth/dt()-3;bm.iter(a.line,a.line+c.length,function(a){if(a.hidden)return;var b=Math.ceil(a.text.length/q)||1;b!=a.height&&bQ(a,b)})}else bm.iter(a.line,n+c.length,function(a){var b=a.text;b.length>h&&(bI=b,h=b.length,bJ=null,g=!1)}),g&&(h=0,bI="",bJ=null,bm.iter(0,bm.size,function(a){var b=a.text;b.length>h&&(h=b.length,bI=b)}));var r=[],s=c.length-i-1;for(var n=0,t=bn.length;n<t;++n){var u=bn[n];u<a.line?r.push(u):u>b.line&&r.push(u+s)}var v=a.line+Math.min(c.length,500);dD(a.line,v),r.push(v),bn=r,dF(100),bx.push({from:a.line,to:b.line+1,diff:s});var w={from:a,to:b,text:c};if(by){for(var x=by;x.next;x=x.next);x.next=w}else by=w;cE(d,f,y(bp.from.line),y(bp.to.line)),_.style.height=bm.height*dq()+2*du()+"px"}function ch(a,b,c){function d(d){if(R(d,b))return d;if(!R(c,d))return e;var f=d.line+a.length-(c.line-b.line)-1,g=d.ch;return d.line==c.line&&(g+=a[a.length-1].length-(c.ch-(c.line==b.line?b.ch:0))),{line:f,ch:g}}b=cI(b),c?c=cI(c):c=b,a=Y(a);var e;return cj(a,b,c,function(a){return e=a,{from:d(bp.from),to:d(bp.to)}}),e}function ci(a,b){cj(Y(a),bp.from,bp.to,function(a){return b=="end"?{from:a,to:a}:b=="start"?{from:bp.from,to:bp.from}:{from:bp.from,to:a}})}function cj(a,b,c,d){var e=a.length==1?a[0].length+b.ch:a[a.length-1].length,f=d({line:b.line+a.length-1,ch:e});cc(b,c,a,f.from,f.to)}function ck(a,b){var c=a.line,d=b.line;if(c==d)return bP(c).text.slice(a.ch,b.ch);var e=[bP(c).text.slice(a.ch)];return bm.iter(c+1,d,function(a){e.push(a.text)}),e.push(bP(d).text.slice(0,b.ch)),e.join("\n")}function cl(){return ck(bp.from,bp.to)}function cn(){if(cm)return;bi.set(e.pollInterval,function(){dG(),cq(),bo&&cn(),dH()})}function co(){function b(){dG();var c=cq();!c&&!a?(a=!0,bi.set(60,b)):(cm=!1,cn()),dH()}var a=!1;cm=!0,bi.set(20,b)}function cq(){if(bA||!bo||Z(M))return!1;var a=M.value;if(a==cp)return!1;bq=null;var b=0,c=Math.min(cp.length,a.length);while(b<c&&cp[b]==a[b])++b;return b<cp.length?bp.from={line:bp.from.line,ch:bp.from.ch-(cp.length-b)}:bu&&Q(bp.from,bp.to)&&(bp.to={line:bp.to.line,ch:Math.min(bP(bp.to.line).text.length,bp.to.ch+(a.length-b))}),ci(a.slice(b),"end"),cp=a,!0}function cr(a){Q(bp.from,bp.to)?a&&(cp=M.value=""):(cp="",M.value=cl(),M.select())}function cs(){e.readOnly||M.focus()}function ct(){if(!bf.getBoundingClientRect)return;var a=bf.getBoundingClientRect();if(J&&a.top==a.bottom)return;var b=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(a.top<0||a.bottom>b)&&bf.scrollIntoView()}function cu(){var a=dj(bp.inverted?bp.from:bp.to),b=e.lineWrapping?Math.min(a.x,bd.offsetWidth):a.x;return cv(b,a.y,b,a.yBot)}function cv(a,b,c,d){var f=dv(),g=du(),h=dq();b+=g,d+=g,a+=f,c+=f;var i=N.clientHeight,j=N.scrollTop,k=!1,l=!0;b<j?(N.scrollTop=Math.max(0,b-2*h),k=!0):d>j+i&&(N.scrollTop=d+h-i,k=!0);var m=N.clientWidth,n=N.scrollLeft,o=e.fixedGutter?bb.clientWidth:0;return a<n+o?(a<50&&(a=0),N.scrollLeft=Math.max(0,a-10-o),k=!0):c>m+n-3&&(N.scrollLeft=c+10-m,k=!0,c>_.clientWidth&&(l=!1)),k&&e.onScroll&&e.onScroll(bO),l}function cw(){var a=dq(),b=N.scrollTop-du(),c=Math.max(0,Math.floor(b/a)),d=Math.ceil((b+N.clientHeight)/a);return{from:v(bm,c),to:v(bm,d)}}function cx(a,b){if(!N.clientWidth){bE=bF=bD=0;return}var c=cw();if(a!==!0&&a.length==0&&c.from>=bE&&c.to<=bF)return;var d=Math.max(c.from-100,0),f=Math.min(bm.size,c.to+100);bE<d&&d-bE<20&&(d=bE),bF>f&&bF-f<20&&(f=Math.min(bm.size,bF));var g=a===!0?[]:cy([{from:bE,to:bF,domStart:0}],a),h=0;for(var i=0;i<g.length;++i){var j=g[i];j.from<d&&(j.domStart+=d-j.from,j.from=d),j.to>f&&(j.to=f),j.from>=j.to?g.splice(i--,1):h+=j.to-j.from}if(h==f-d)return;g.sort(function(a,b){return a.domStart-b.domStart});var k=dq(),l=bb.style.display;bg.style.display=bb.style.display="none",cz(d,f,g),bg.style.display="";var m=d!=bE||f!=bF||bG!=N.clientHeight+k;m&&(bG=N.clientHeight+k),bE=d,bF=f,bD=w(bm,d),ba.style.top=bD*k+"px",_.style.height=bm.height*k+2*du()+"px";if(bg.childNodes.length!=bF-bE)throw new Error("BAD PATCH! "+JSON.stringify(g)+" size="+(bF-bE)+" nodes="+bg.childNodes.length);if(e.lineWrapping){bJ=N.clientWidth;var n=bg.firstChild;bm.iter(bE,bF,function(a){if(!a.hidden){var b=Math.round(n.offsetHeight/k)||1;a.height!=b&&(bQ(a,b),bB=!0)}n=n.nextSibling})}else bJ==null&&(bJ=df(bI)),bJ>N.clientWidth?(bd.style.width=bJ+"px",_.style.width="",_.style.width=N.scrollWidth+"px"):bd.style.width=_.style.width="";return bb.style.display=l,(m||bB)&&cA(),cB(),!b&&e.onUpdate&&e.onUpdate(bO),!0}function cy(a,b){for(var c=0,d=b.length||0;c<d;++c){var e=b[c],f=[],g=e.diff||0;for(var h=0,i=a.length;h<i;++h){var j=a[h];e.to<=j.from&&e.diff?f.push({from:j.from+g,to:j.to+g,domStart:j.domStart}):e.to<=j.from||e.from>=j.to?f.push(j):(e.from>j.from&&f.push({from:j.from,to:e.from,domStart:j.domStart}),e.to<j.to&&f.push({from:e.to+g,to:j.to+g,domStart:j.domStart+(e.to-j.from)}))}a=f}return a}function cz(a,b,c){if(!c.length)bg.innerHTML="";else{function d(a){var b=a.nextSibling;return a.parentNode.removeChild(a),b}var e=0,f=bg.firstChild,g;for(var h=0;h<c.length;++h){var i=c[h];while(i.domStart>e)f=d(f),e++;for(var j=0,k=i.to-i.from;j<k;++j)f=f.nextSibling,e++}while(f)f=d(f)}var l=c.shift(),f=bg.firstChild,j=a,m=bp.from.line,n=bp.to.line,o=m<a&&n>=a,p=y.createElement("div"),q;bm.iter(a,b,function(a){var b=null,d=null;o?(b=0,n==j&&(o=!1,d=bp.to.ch)):m==j&&(n==j?(b=bp.from.ch,d=bp.to.ch):(o=!0,b=bp.from.ch)),l&&l.to==j&&(l=c.shift()),!l||l.from>j?(a.hidden?p.innerHTML="<pre></pre>":p.innerHTML=a.getHTML(b,d,!0,bK),bg.insertBefore(p.firstChild,f)):f=f.nextSibling,++j})}function cA(){if(!e.gutter&&!e.lineNumbers)return;var a=ba.offsetHeight,b=N.clientHeight;bb.style.height=(a-b<2?b:a)+"px";var c=[],d=bE;bm.iter(bE,Math.max(bF,bE+1),function(a){if(a.hidden)c.push("<pre></pre>");else{var b=a.gutterMarker,f=e.lineNumbers?d+e.firstLineNumber:null;b&&b.text?f=b.text.replace("%N%",f!=null?f:""):f==null&&(f=" "),c.push(b&&b.style?'<pre class="'+b.style+'">':"<pre>",f);for(var g=1;g<a.height;++g)c.push("<br/>&#160;");c.push("</pre>")}++d}),bb.style.display="none",bc.innerHTML=c.join("");var f=String(bm.size).length,g=bc.firstChild,h=P(g),i="";while(h.length+i.length<f)i+=" ";i&&g.insertBefore(y.createTextNode(i),g.firstChild),bb.style.display="",bd.style.marginLeft=bb.offsetWidth+"px",bB=!1}function cB(){var a=bp.inverted?bp.from:bp.to,b=dq(),c=dj(a,!0),d=O(B),f=O(bg);L.style.top=c.y+f.top-d.top+"px",L.style.left=c.x+f.left-d.left+"px",Q(bp.from,bp.to)?(bf.style.top=c.y+"px",bf.style.left=(e.lineWrapping?Math.min(c.x,bd.offsetWidth):c.x)+"px",bf.style.display=""):bf.style.display="none"}function cC(a){a?bq=bq||(bp.inverted?bp.to:bp.from):bq=null}function cD(a,b){var c=bq&&cI(bq);c&&(R(c,a)?a=c:R(b,c)&&(b=c)),cE(a,b),bw=!0}function cE(a,b,c,d){cM=null,c==null&&(c=bp.from.line,d=bp.to.line);if(Q(bp.from,a)&&Q(bp.to,b))return;if(R(b,a)){var e=b;b=a,a=e}a.line!=c&&(a=cF(a,c,bp.from.ch)),b.line!=d&&(b=cF(b,d,bp.to.ch)),Q(a,b)?bp.inverted=!1:Q(a,bp.to)?bp.inverted=!1:Q(b,bp.from)&&(bp.inverted=!0),Q(a,b)?Q(bp.from,bp.to)||bx.push({from:c,to:d+1}):Q(bp.from,bp.to)?bx.push({from:a.line,to:b.line+1}):(Q(a,bp.from)||(a.line<c?bx.push({from:a.line,to:Math.min(b.line,c)+1}):bx.push({from:c,to:Math.min(d,a.line)+1})),Q(b,bp.to)||(b.line<d?bx.push({from:Math.max(c,a.line),to:d+1}):bx.push({from:Math.max(a.line,d),to:b.line+1}))),bp.from=a,bp.to=b,bz=!0}function cF(a,b,c){function d(b){var d=a.line+b,e=b==1?bm.size:-1;while(d!=e){var f=bP(d);if(!f.hidden){var g=a.ch;if(g>c||g>f.text.length)g=f.text.length;return{line:d,ch:g}}d+=b}}var e=bP(a.line);return e.hidden?a.line>=b?d(1)||d(-1):d(-1)||d(1):a}function cG(a,b,c){var d=cI({line:a,ch:b||0});(c?cD:cE)(d,d)}function cH(a){return Math.max(0,Math.min(a,bm.size-1))}function cI(a){if(a.line<0)return{line:0,ch:0};if(a.line>=bm.size)return{line:bm.size-1,ch:bP(bm.size-1).text.length};var b=a.ch,c=bP(a.line).text.length;return b==null||b>c?{line:a.line,ch:c}:b<0?{line:a.line,ch:0}:a}function cJ(a,b){function g(){for(var b=d+a,c=a<0?-1:bm.size;b!=c;b+=a){var e=bP(b);if(!e.hidden)return d=b,f=e,!0}}function h(b){if(e==(a<0?0:f.text.length)){if(!!b||!g())return!1;e=a<0?f.text.length:0}else e+=a;return!0}var c=bp.inverted?bp.from:bp.to,d=c.line,e=c.ch,f=bP(d);if(b=="char")h();else if(b=="column")h(!0);else if(b=="word"){var i=!1;for(;;){if(a<0&&!h())break;if(X(f.text.charAt(e)))i=!0;else if(i){a<0&&(a=1,h());break}if(a>0&&!h())break}}return{line:d,ch:e}}function cK(a,b){var c=a<0?bp.from:bp.to;if(bq||Q(bp.from,bp.to))c=cJ(a,b);cG(c.line,c.ch,!0)}function cL(a,b){Q(bp.from,bp.to)?a<0?ch("",cJ(a,b),bp.to):ch("",bp.from,cJ(a,b)):ch("",bp.from,bp.to),bw=!0}function cN(a,b){var c=0,d=dj(bp.inverted?bp.from:bp.to,!0);cM!=null&&(d.x=cM),b=="page"?c=N.clientHeight:b=="line"&&(c=dq());var e=dk(d.x,d.y+c*a+2);cG(e.line,e.ch,!0),cM=d.x}function cO(a){var b=bP(a.line).text,c=a.ch,d=a.ch;while(c>0&&X(b.charAt(c-1)))--c;while(d<b.length&&X(b.charAt(d)))++d;cD({line:a.line,ch:c},{line:a.line,ch:d})}function cP(a){cD({line:a,ch:0},{line:a,ch:bP(a).text.length})}function cQ(a){if(Q(bp.from,bp.to))return cR(bp.from.line,a);var b=bp.to.line-(bp.to.ch?0:1);for(var c=bp.from.line;c<=b;++c)cR(c,a)}function cR(a,b){b||(b="add");if(b=="smart")if(!bl.indent)b="prev";else var c=dC(a);var d=bP(a),f=d.indentation(e.tabSize),g=d.text.match(/^\s*/)[0],h;b=="prev"?a?h=bP(a-1).indentation(e.tabSize):h=0:b=="smart"?h=bl.indent(c,d.text.slice(g.length),d.text):b=="add"?h=f+e.indentUnit:b=="subtract"&&(h=f-e.indentUnit),h=Math.max(0,h);var i=h-f;if(!i){if(bp.from.line!=a&&bp.to.line!=a)return;var j=g}else{var j="",k=0;if(e.indentWithTabs)for(var l=Math.floor(h/e.tabSize);l;--l)k+=e.tabSize,j+="\t";while(k<h)++k,j+=" "}ch(j,{line:a,ch:0},{line:a,ch:g.length})}function cS(){bl=a.getMode(e,e.mode),bm.iter(0,bm.size,function(a){a.stateAfter=null}),bn=[0],dF()}function cT(){var a=e.gutter||e.lineNumbers;bb.style.display=a?"":"none",a?bB=!0:bg.parentNode.style.marginLeft=0}function cU(a,b){if(e.lineWrapping){B.className+=" CodeMirror-wrap";var c=N.clientWidth/dt()-3;bm.iter(0,bm.size,function(a){if(a.hidden)return;var b=Math.ceil(a.text.length/c)||1;b!=1&&bQ(a,b)}),bd.style.width=_.style.width=""}else B.className=B.className.replace(" CodeMirror-wrap",""),bJ=null,bI="",bm.iter(0,bm.size,function(a){a.height!=1&&!a.hidden&&bQ(a,1),a.text.length>bI.length&&(bI=a.text)});bx.push({from:0,to:bm.size})}function cV(){for(var a='<span class="cm-tab">',b=0;b<e.tabSize;++b)a+=" ";return a+"</span>"}function cW(){bK=cV(),cx(!0)}function cX(){N.className=N.className.replace(/\s*cm-s-\w+/g,"")+e.theme.replace(/(^|\s)\s*/g," cm-s-")}function cY(){this.set=[]}function cZ(a,b,c){function e(a,b,c,e){bP(a).addMark(new n(b,c,e,d.set))}a=cI(a),b=cI(b);var d=new cY;if(a.line==b.line)e(a.line,a.ch,b.ch,c);else{e(a.line,a.ch,null,c);for(var f=a.line+1,g=b.line;f<g;++f)e(f,null,null,c);e(b.line,null,b.ch,c)}return bx.push({from:a.line,to:b.line+1}),d}function c$(a){a=cI(a);var b=new o(a.ch);return bP(a.line).addMark(b),b}function c_(a,b,c){return typeof a=="number"&&(a=bP(cH(a))),a.gutterMarker={text:b,style:c},bB=!0,a}function da(a){typeof a=="number"&&(a=bP(cH(a))),a.gutterMarker=null,bB=!0}function db(a,b){var c=a,d=a;return typeof a=="number"?d=bP(cH(a)):c=u(a),c==null?null:b(d,c)?(bx.push({from:c,to:c+1}),d):null}function dc(a,b){return db(a,function(a){if(a.className!=b)return a.className=b,!0})}function dd(a,b){return db(a,function(a,c){if(a.hidden!=b)return a.hidden=b,bQ(a,b?0:1),b&&(bp.from.line==c||bp.to.line==c)&&cE(cF(bp.from,bp.from.line,bp.from.ch),cF(bp.to,bp.to.line,bp.to.ch)),bB=!0})}function de(a){if(typeof a=="number"){if(!bN(a))return null;var b=a;a=bP(a);if(!a)return null}else{var b=u(a);if(b==null)return null}var c=a.gutterMarker;return{line:b,handle:a,text:a.text,markerText:c&&c.text,markerClass:c&&c.style,lineClass:a.className}}function df(a){return be.innerHTML="<pre><span>x</span></pre>",be.firstChild.firstChild.firstChild.nodeValue=a,be.firstChild.firstChild.offsetWidth||10}function dg(a,b){function e(a){return be.innerHTML="<pre><span>"+c.getHTML(null,null,!1,bK,a)+"</span></pre>",be.firstChild.firstChild.offsetWidth}if(b<=0)return 0;var c=bP(a),d=c.text,f=0,g=0,h=d.length,i,j=Math.min(h,Math.ceil(b/dt()));for(;;){var k=e(j);if(!(k<=b&&j<h)){i=k,h=j;break}j=Math.min(h,Math.ceil(j*1.2))}if(b>i)return h;j=Math.floor(h*.8),k=e(j),k<b&&(f=j,g=k);for(;;){if(h-f<=1)return i-b>b-g?f:h;var l=Math.ceil((f+h)/2),m=e(l);m>b?(h=l,i=m):(f=l,g=m)}}function di(a,b){var c="";if(e.lineWrapping){var d=a.text.indexOf(" ",b+2);c=U(a.text.slice(b+1,d<0?a.text.length:d+(J?5:0)))}be.innerHTML="<pre>"+a.getHTML(null,null,!1,bK,b)+'<span id="CodeMirror-temp-'+dh+'">'+U(a.text.charAt(b)||" ")+"</span>"+c+"</pre>";var f=document.getElementById("CodeMirror-temp-"+dh),g=f.offsetTop,h=f.offsetLeft;if(J&&b&&g==0&&h==0){var i=document.createElement("span");i.innerHTML="x",f.parentNode.insertBefore(i,f.nextSibling),g=i.offsetTop}return{top:g,left:h}}function dj(a,b){var c,d=dq(),f=d*(w(bm,a.line)-(b?bD:0));if(a.ch==0)c=0;else{var g=di(bP(a.line),a.ch);c=g.left,e.lineWrapping&&(f+=Math.max(0,g.top))}return{x:c,y:f,yBot:f+d}}function dk(a,b){function l(a){var b=di(h,a);if(j){var d=Math.round(b.top/c);return Math.max(0,b.left+(d-k)*N.clientWidth)}return b.left}b<0&&(b=0);var c=dq(),d=dt(),f=bD+Math.floor(b/c),g=v(bm,f);if(g>=bm.size)return{line:bm.size-1,ch:bP(bm.size-1).text.length};var h=bP(g),i=h.text,j=e.lineWrapping,k=j?f-w(bm,g):0;if(a<=0&&k==0)return{line:g,ch:0};var m=0,n=0,o=i.length,p,q=Math.min(o,Math.ceil((a+k*N.clientWidth*.9)/d));for(;;){var r=l(q);if(!(r<=a&&q<o)){p=r,o=q;break}q=Math.min(o,Math.ceil(q*1.2))}if(a>p)return{line:g,ch:o};q=Math.floor(o*.8),r=l(q),r<a&&(m=q,n=r);for(;;){if(o-m<=1)return{line:g,ch:p-a>a-n?m:o};var s=Math.ceil((m+o)/2),t=l(s);t>a?(o=s,p=t):(m=s,n=t)}}function dl(a){var b=dj(a,!0),c=O(bd);return{x:c.left+b.x,y:c.top+b.y,yBot:c.top+b.yBot}}function dq(){if(dp==null){dp="<pre>";for(var a=0;a<49;++a)dp+="x<br/>";dp+="x</pre>"}var b=bg.clientHeight;return b==dn?dm:(dn=b,be.innerHTML=dp,dm=be.firstChild.offsetHeight/50||1,be.innerHTML="",dm)}function dt(){return N.clientWidth==ds?dr:(ds=N.clientWidth,dr=df("x"))}function du(){return bd.offsetTop}function dv(){return bd.offsetLeft}function dw(a,b){var c=O(N,!0),d,e;try{d=a.clientX,e=a.clientY}catch(a){return null}if(!b&&(d-c.left>N.clientWidth||e-c.top>N.clientHeight))return null;var f=O(bd,!0);return dk(d-f.left,e-f.top)}function dx(a){function e(){var a=Y(M.value).join("\n");a!=d&&dJ(ci)(a,"end"),L.style.position="relative",M.style.cssText=c,bA=!1,cr(!0),cn()}var b=dw(a);if(!b||window.opera)return;(Q(bp.from,bp.to)||R(b,bp.from)||!R(b,bp.to))&&dJ(cG)(b.line,b.ch);var c=M.style.cssText;L.style.position="absolute",M.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(a.clientY-5)+"px; left: "+(a.clientX-5)+"px; z-index: 1000; background: white; "+"border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",bA=!0;var d=M.value=cl();cs(),M.select();if(I){C(a);var f=F(window,"mouseup",function(){f(),setTimeout(e,20)},!0)}else setTimeout(e,50)}function dy(){clearInterval(bk);var a=!0;bf.style.visibility="",bk=setInterval(function(){bf.style.visibility=(a=!a)?"":"hidden"},650)}function dA(a){function p(a,b,c){if(!a.text)return;var d=a.styles,e=g?0:a.text.length-1,f;for(var i=g?0:d.length-2,j=g?d.length:-2;i!=j;i+=2*h){var k=d[i];if(d[i+1]!=null&&d[i+1]!=m){e+=h*k.length;continue}for(var l=g?0:k.length-1,p=g?k.length:-1;l!=p;l+=h,e+=h)if(e>=b&&e<c&&o.test(f=k.charAt(l))){var q=dz[f];if(q.charAt(1)==">"==g)n.push(f);else{if(n.pop()!=q.charAt(0))return{pos:e,match:!1};if(!n.length)return{pos:e,match:!0}}}}}var b=bp.inverted?bp.from:bp.to,c=bP(b.line),d=b.ch-1,e=d>=0&&dz[c.text.charAt(d)]||dz[c.text.charAt(++d)];if(!e)return;var f=e.charAt(0),g=e.charAt(1)==">",h=g?1:-1,i=c.styles;for(var j=d+1,k=0,l=i.length;k<l;k+=2)if((j-=i[k].length)<=0){var m=i[k+1];break}var n=[c.text.charAt(d)],o=/[(){}[\]]/;for(var k=b.line,l=g?Math.min(k+100,bm.size):Math.max(-1,k-100);k!=l;k+=h){var c=bP(k),q=k==b.line,r=p(c,q&&g?d+1:0,q&&!g?d:c.text.length);if(r)break}r||(r={pos:null,match:!1});var m=r.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",s=cZ({line:b.line,ch:d},{line:b.line,ch:d+1},m),t=r.pos!=null&&cZ({line:k,ch:r.pos},{line:k,ch:r.pos+1},m),u=dJ(function(){s.clear(),t&&t.clear()});a?setTimeout(u,800):bH=u}function dB(a){var b,c;for(var d=a,f=a-40;d>f;--d){if(d==0)return 0;var g=bP(d-1);if(g.stateAfter)return d;var h=g.indentation(e.tabSize);if(c==null||b>h)c=d-1,b=h}return c}function dC(a){var b=dB(a),c=b&&bP(b-1).stateAfter;return c?c=k(bl,c):c=l(bl),bm.iter(b,a,function(a){a.highlight(bl,c,e.tabSize),a.stateAfter=k(bl,c)}),b<a&&bx.push({from:b,to:a}),a<bm.size&&!bP(a).stateAfter&&bn.push(a),c}function dD(a,b){var c=dC(a);bm.iter(a,b,function(a){a.highlight(bl,c,e.tabSize),a.stateAfter=k(bl,c)})}function dE(){var a=+(new Date)+e.workTime,b=bn.length;while(bn.length){if(!bP(bE).stateAfter)var c=bE;else var c=bn.pop();if(c>=bm.size)continue;var d=dB(c),f=d&&bP(d-1).stateAfter;f?f=k(bl,f):f=l(bl);var g=0,h=bl.compareStates,i=!1,j=d,m=!1;bm.iter(j,bm.size,function(b){var d=b.stateAfter;if(+(new Date)>a)return bn.push(j),dF(e.workDelay),i&&bx.push({from:c,to:j+1}),m=!0;var l=b.highlight(bl,f,e.tabSize);l&&(i=!0),b.stateAfter=k(bl,f);if(h){if(d&&h(d,f))return!0}else if(l!==!1||!d)g=0;else if(++g>3&&(!bl.indent||bl.indent(d,"")==bl.indent(f,"")))return!0;++j});if(m)return;i&&bx.push({from:c,to:j+1})}b&&e.onHighlightComplete&&e.onHighlightComplete(bO)}function dF(a){if(!bn.length)return;bj.set(a,dJ(dE))}function dG(){bv=bw=by=null,bx=[],bz=!1,bC=[]}function dH(){var a=!1,b;bz&&(a=!cu()),bx.length?b=cx(bx,!0):(bz&&cB(),bB&&cA()),a&&cu(),bz&&(ct(),dy()),bo&&!bA&&(bv===!0||bv!==!1&&bz)&&cr(bw),bz&&e.matchBrackets&&setTimeout(dJ(function(){bH&&(bH(),bH=null),Q(bp.from,bp.to)&&dA(!1)}),20);var c=by,d=bC;bz&&e.onCursorActivity&&e.onCursorActivity(bO),c&&e.onChange&&bO&&e.onChange(bO,c);for(var f=0;f<d.length;++f)d[f](bO);b&&e.onUpdate&&e.onUpdate(bO)}function dJ(a){return function(){dI++||dG();try{var b=a.apply(this,arguments)}finally{--dI||dH()}return b}}var e={},m=a.defaults;for(var q in m)m.hasOwnProperty(q)&&(e[q]=(d&&d.hasOwnProperty(q)?d:m)[q]);var y=e.document,B=y.createElement("div");B.className="CodeMirror"+(e.lineWrapping?" CodeMirror-wrap":""),B.innerHTML='<div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea style="position: absolute; padding: 0; width: 1px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll" tabindex="-1"><div style="position: relative"><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative"><div style="position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden"></div><pre class="CodeMirror-cursor">&#160;</pre><div></div></div></div></div></div></div>',c.appendChild?c.appendChild(B):c(B);var L=B.firstChild,M=L.firstChild,N=B.lastChild,_=N.firstChild,ba=_.firstChild,bb=ba.firstChild,bc=bb.firstChild,bd=bb.nextSibling.firstChild,be=bd.firstChild,bf=be.nextSibling,bg=bf.nextSibling;cX(),/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent)&&(M.style.width="0px"),K||(bd.draggable=!0),e.tabindex!=null&&(M.tabIndex=e.tabindex),!e.gutter&&!e.lineNumbers&&(bb.style.display="none");try{df("x")}catch(bh){throw bh.message.match(/runtime/i)&&(bh=new Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)")),bh}var bi=new G,bj=new G,bk,bl,bm=new s([new r([new p("")])]),bn,bo;cS();var bp={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},bq,br,bs,bt,bu=!1,bv,bw,bx,by,bz,bA,bB,bC,bD=0,bE=0,bF=0,bG=0,bH,bI="",bJ,bK=cV();dJ(function(){bR(e.value||""),bv=!1})();var bL=new x;F(N,"mousedown",dJ(bT)),F(N,"dblclick",dJ(bU)),F(bd,"dragstart",bW),F(bd,"selectstart",A),I||F(N,"contextmenu",dx),F(N,"scroll",function(){cx([]),e.fixedGutter&&(bb.style.left=N.scrollLeft+"px"),e.onScroll&&e.onScroll(bO)}),F(window,"resize",function(){cx(!0)}),F(M,"keyup",dJ(b_)),F(M,"input",co),F(M,"keydown",dJ(bZ)),F(M,"keypress",dJ(b$)),F(M,"focus",ca),F(M,"blur",cb),F(N,"dragenter",C),F(N,"dragover",C),F(N,"drop",dJ(bV)),F(N,"paste",function(){cs(),co()}),F(M,"paste",co),F(M,"cut",dJ(function(){ci("")}));var bM;try{bM=y.activeElement==M}catch(bh){}bM?setTimeout(ca,20):cb();var bO=B.CodeMirror={getValue:bS,setValue:dJ(bR),getSelection:cl,replaceSelection:dJ(ci),focus:function(){cs(),ca(),co()},setOption:function(a,b){var c=e[a];e[a]=b,a=="mode"||a=="indentUnit"?cS():a=="readOnly"&&b?(cb(),M.blur()):a=="theme"?cX():a=="lineWrapping"&&c!=b?dJ(cU)():a=="tabSize"&&dJ(cW)(),(a=="lineNumbers"||a=="gutter"||a=="firstLineNumber"||a=="theme")&&dJ(cT)()},getOption:function(a){return e[a]},undo:dJ(ce),redo:dJ(cf),indentLine:dJ(function(a,b){bN(a)&&cR(a,b==null?"smart":b?"add":"subtract")}),indentSelection:dJ(cQ),historySize:function(){return{undo:bL.done.length,redo:bL.undone.length}},clearHistory:function(){bL=new x},matchBrackets:dJ(function(){dA(!0)}),getTokenAt:dJ(function(a){return a=cI(a),bP(a.line).getTokenAt(bl,dC(a.line),a.ch)}),getStateAfter:function(a){return a=cH(a==null?bm.size-1:a),dC(a+1)},cursorCoords:function(a){return a==null&&(a=bp.inverted),dl(a?bp.from:bp.to)},charCoords:function(a){return dl(cI(a))},coordsChar:function(a){var b=O(bd);return dk(a.x-b.left,a.y-b.top)},markText:dJ(cZ),setBookmark:c$,setMarker:dJ(c_),clearMarker:dJ(da),setLineClass:dJ(dc),hideLine:dJ(function(a){return dd(a,!0)}),showLine:dJ(function(a){return dd(a,!1)}),onDeleteLine:function(a,b){if(typeof a=="number"){if(!bN(a))return null;a=bP(a)}return(a.handlers||(a.handlers=[])).push(b),a},lineInfo:de,addWidget:function(a,b,c,d,e){a=dj(cI(a));var f=a.yBot,g=a.x;b.style.position="absolute",_.appendChild(b);if(d=="over")f=a.y;else if(d=="near"){var h=Math.max(N.offsetHeight,bm.height*dq()),i=Math.max(_.clientWidth,bd.clientWidth)-dv();a.yBot+b.offsetHeight>h&&a.y>b.offsetHeight&&(f=a.y-b.offsetHeight),g+b.offsetWidth>i&&(g=i-b.offsetWidth)}b.style.top=f+du()+"px",b.style.left=b.style.right="",e=="right"?(g=_.clientWidth-b.offsetWidth,b.style.right="0px"):(e=="left"?g=0:e=="middle"&&(g=(_.clientWidth-b.offsetWidth)/2),b.style.left=g+dv()+"px"),c&&cv(g,f,g+b.offsetWidth,f+b.offsetHeight)},lineCount:function(){return bm.size},clipPos:cI,getCursor:function(a){return a==null&&(a=bp.inverted),S(a?bp.from:bp.to)},somethingSelected:function(){return!Q(bp.from,bp.to)},setCursor:dJ(function(a,b,c){b==null&&typeof a.line=="number"?cG(a.line,a.ch,c):cG(a,b,c)}),setSelection:dJ(function(a,b,c){(c?cD:cE)(cI(a),cI(b||a))}),getLine:function(a){if(bN(a))return bP(a).text},getLineHandle:function(a){if(bN(a))return bP(a)},setLine:dJ(function(a,b){bN(a)&&ch(b,{line:a,ch:0},{line:a,ch:bP(a).text.length})}),removeLine:dJ(function(a){bN(a)&&ch("",{line:a,ch:0},cI({line:a+1,ch:0}))}),replaceRange:dJ(ch),getRange:function(a,b){return ck(cI(a),cI(b))},execCommand:function(a){return g[a](bO)},moveH:dJ(cK),deleteH:dJ(cL),moveV:dJ(cN),toggleOverwrite:function(){bu=!bu},posFromIndex:function(a){var b=0,c;return bm.iter(0,bm.size,function(d){var e=d.text.length+1;if(e>a)return c=a,!0;a-=e,++b}),cI({line:b,ch:c})},indexFromPos:function(a){if(a.line<0||a.ch<0)return 0;var b=a.ch;return bm.iter(0,a.line,function(a){b+=a.text.length+1}),b},operation:function(a){return dJ(a)()},refresh:function(){cx(!0)},getInputField:function(){return M},getWrapperElement:function(){return B},getScrollerElement:function(){return N},getGutterElement:function(){return bb}},bY=null,cm=!1,cp="",cM=null;cY.prototype.clear=dJ(function(){var a=Infinity,b=-Infinity;for(var c=0,d=this.set.length;c<d;++c){var e=this.set[c],f=e.marked;if(!f||!e.parent)continue;var g=u(e);a=Math.min(a,g),b=Math.max(b,g);for(var h=0;h<f.length;++h)f[h].set==this.set&&f.splice(h--,1)}a!=Infinity&&bx.push({from:a,to:b+1})}),cY.prototype.find=function(){var a,b;for(var c=0,d=this.set.length;c<d;++c){var e=this.set[c],f=e.marked;for(var g=0;g<f.length;++g){var h=f[g];if(h.set==this.set)if(h.from!=null||h.to!=null){var i=u(e);i!=null&&(h.from!=null&&(a={line:i,ch:h.from}),h.to!=null&&(b={line:i,ch:h.to}))}}}return{from:a,to:b}};var dh=Math.floor(Math.random()*16777215).toString(16),dm,dn,dp,dr,ds=0,dz={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},dI=0;for(var dK in f)f.propertyIsEnumerable(dK)&&!bO.propertyIsEnumerable(dK)&&(bO[dK]=f[dK]);return bO}function i(a,b,c){function d(a,b,c){var e=b[a];if(e!=null)return e;c==null&&(c=b.fallthrough);if(c==null)return b.catchall;if(typeof c=="string")return d(a,h[c]);for(var f=0,g=c.length;f<g;++f){e=d(a,h[c[f]]);if(e!=null)return e}return null}return b?d(a,b,c):d(a,h[c])}function j(a){var b=$[a.keyCode];return b=="Ctrl"||b=="Alt"||b=="Shift"||b=="Mod"}function k(a,b){if(b===!0)return b;if(a.copyState)return a.copyState(b);var c={};for(var d in b){var e=b[d];e instanceof Array&&(e=e.concat([])),c[d]=e}return c}function l(a,b,c){return a.startState?a.startState(b,c):!0}function m(a,b){this.pos=this.start=0,this.string=a,this.tabSize=b||8}function n(a,b,c,d){this.from=a,this.to=b,this.style=c,this.set=d}function o(a){this.from=a,this.to=a,this.line=null}function p(a,b){this.styles=b||[a,null],this.text=a,this.height=1,this.marked=this.gutterMarker=this.className=this.handlers=null,this.stateAfter=this.parent=this.hidden=null}function q(a,b,c,d){for(var e=0,f=0,g=0;f<b;e+=2){var h=c[e],i=f+h.length;g==0?(i>a&&d.push(h.slice(a-f,Math.min(h.length,b-f)),c[e+1]),i>=a&&(g=1)):g==1&&(i>b?d.push(h.slice(0,b-f),c[e+1]):d.push(h,c[e+1])),f=i}}function r(a){this.lines=a,this.parent=null;for(var b=0,c=a.length,d=0;b<c;++b)a[b].parent=this,d+=a[b].height;this.height=d}function s(a){this.children=a;var b=0,c=0;for(var d=0,e=a.length;d<e;++d){var f=a[d];b+=f.chunkSize(),c+=f.height,f.parent=this}this.size=b,this.height=c,this.parent=null}function t(a,b){while(!a.lines)for(var c=0;;++c){var d=a.children[c],e=d.chunkSize();if(b<e){a=d;break}b-=e}return a.lines[b]}function u(a){if(a.parent==null)return null;var b=a.parent,c=W(b.lines,a);for(var d=b.parent;d;b=d,d=d.parent)for(var e=0,f=d.children.length;;++e){if(d.children[e]==b)break;c+=d.children[e].chunkSize()}return c}function v(a,b){var c=0;a:do{for(var d=0,e=a.children.length;d<e;++d){var f=a.children[d],g=f.height;if(b<g){a=f;continue a}b-=g,c+=f.chunkSize()}return c}while(!a.lines);for(var d=0,e=a.lines.length;d<e;++d){var h=a.lines[d],i=h.height;if(b<i)break;b-=i}return c+d}function w(a,b){var c=0;a:do{for(var d=0,e=a.children.length;d<e;++d){var f=a.children[d],g=f.chunkSize();if(b<g){a=f;continue a}b-=g,c+=f.height}return c}while(!a.lines);for(var d=0;d<b;++d)c+=a.lines[d].height;return c}function x(){this.time=0,this.done=[],this.undone=[]}function y(){C(this)}function z(a){return a.stop||(a.stop=y),a}function A(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function B(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function C(a){A(a),B(a)}function D(a){return a.target||a.srcElement}function E(a){if(a.which)return a.which;if(a.button&1)return 1;if(a.button&2)return 3;if(a.button&4)return 2}function F(a,b,c,d){if(typeof a.addEventListener=="function"){a.addEventListener(b,c,!1);if(d)return function(){a.removeEventListener(b,c,!1)}}else{var e=function(a){c(a||window.event)};a.attachEvent("on"+b,e);if(d)return function(){a.detachEvent("on"+b,e)}}}function G(){this.id=null}function M(a,b,c){b==null&&(b=a.search(/[^\s\u00a0]/),b==-1&&(b=a.length));for(var d=0,e=0;d<b;++d)a.charAt(d)=="\t"?e+=c-e%c:++e;return e}function N(a){return a.currentStyle?a.currentStyle:window.getComputedStyle(a,null)}function O(a,b){var c=a.ownerDocument.body,d=0,e=0,f=!1;for(var g=a;g;g=g.offsetParent){var h=g.offsetLeft,i=g.offsetTop;g==c?(d+=Math.abs(h),e+=Math.abs(i)):(d+=h,e+=i),b&&N(g).position=="fixed"&&(f=!0)}var j=b&&!f?null:c;for(var g=a.parentNode;g!=j;g=g.parentNode)g.scrollLeft!=null&&(d-=g.scrollLeft,e-=g.scrollTop);return{left:d,top:e}}function P(a){return a.textContent||a.innerText||a.nodeValue||""}function Q(a,b){return a.line==b.line&&a.ch==b.ch}function R(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function S(a){return{line:a.line,ch:a.ch}}function U(a){return T.textContent=a,T.innerHTML}function V(a,b){if(!b)return a?a.length:0;if(!a)return b.length;for(var c=a.length,d=b.length;c>=0&&d>=0;--c,--d)if(a.charAt(c)!=b.charAt(d))break;return d+1}function W(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;++c)if(a[c]==b)return c;return-1}function X(a){return/\w/.test(a)||a.toUpperCase()!=a.toLowerCase()}a.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,onKeyEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,readOnly:!1,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,document:window.document};var b=/Mac/.test(navigator.platform),c=/Win/.test(navigator.platform),d={},e={};a.defineMode=function(b,c){!a.defaults.mode&&b!="null"&&(a.defaults.mode=b),d[b]=c},a.defineMIME=function(a,b){e[a]=b},a.getMode=function(b,c){typeof c=="string"&&e.hasOwnProperty(c)&&(c=e[c]);if(typeof c=="string")var f=c,g={};else if(c!=null)var f=c.name,g=c;var h=d[f];return h?h(b,g||{}):(window.console&&console.warn("No mode "+f+" found, falling back to plain text."),a.getMode(b,"text/plain"))},a.listModes=function(){var a=[];for(var b in d)d.propertyIsEnumerable(b)&&a.push(b);return a},a.listMIMEs=function(){var a=[];for(var b in e)e.propertyIsEnumerable(b)&&a.push({mime:b,mode:e[b]});return a};var f=a.extensions={};a.defineExtension=function(a,b){f[a]=b};var g=a.commands={selectAll:function(a){a.setSelection({line:0,ch:0},{line:a.lineCount()-1})},killLine:function(a){var b=a.getCursor(!0),c=a.getCursor(!1),d=!Q(b,c);!d&&a.getLine(b.line).length==b.ch?a.replaceRange("",b,{line:b.line+1,ch:0}):a.replaceRange("",b,d?c:{line:b.line})},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",{line:b,ch:0},{line:b})},undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.setCursor(0,0,!0)},goDocEnd:function(a){a.setSelection({line:a.lineCount()-1},null,!0)},goLineStart:function(a){a.setCursor(a.getCursor().line,0,!0)},goLineStartSmart:function(a){var b=a.getCursor(),c=a.getLine(b.line),d=Math.max(0,c.search(/\S/));a.setCursor(b.line,b.ch<=d&&b.ch?0:d,!0)},goLineEnd:function(a){a.setSelection({line:a.getCursor().line},null,!0)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goWordRight:function(a){a.moveH(1,"word")},delCharLeft:function(a){a.deleteH(-1,"char")},delCharRight:function(a){a.deleteH(1,"char")},delWordLeft:function(a){a.deleteH(-1,"word")},delWordRight:function(a){a.deleteH(1,"word")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t","end")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);b.ch>0&&b.ch<c.length-1&&a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),{line:b.line,ch:b.ch-1},{line:b.line,ch:b.ch+1})},newlineAndIndent:function(a){a.replaceSelection("\n","end"),a.indentLine(a.getCursor().line)},toggleOverwrite:function(a){a.toggleOverwrite()}},h=a.keyMap={};h.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"indentMore","Shift-Tab":"indentLess",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},h.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll",fallthrough:"basic"},h.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll",fallthrough:["basic","emacsy"]},h["default"]=b?h.macDefault:h.pcDefault,h.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},a.fromTextArea=function(b,c){function d(){b.value=h.getValue()}c||(c={}),c.value=b.value,!c.tabindex&&b.tabindex&&(c.tabindex=b.tabindex);if(b.form){var e=F(b.form,"submit",d,!0);if(typeof b.form.submit=="function"){var f=b.form.submit;function g(){d(),b.form.submit=f,b.form.submit(),b.form.submit=g}b.form.submit=g}}b.style.display="none";var h=a(function(a){b.parentNode.insertBefore(a,b.nextSibling)},c);return h.save=d,h.getTextArea=function(){return b},h.toTextArea=function(){d(),b.parentNode.removeChild(h.getWrapperElement()),b.style.display="",b.form&&(e(),typeof b.form.submit=="function"&&(b.form.submit=f))},h},a.copyState=k,a.startState=l,m.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);if(typeof a=="string")var c=b==a;else var c=b&&(a.test?a.test(b):a(b));if(c)return++this.pos,b},eatWhile:function(a){var b=this.pos;while(this.eat(a));return this.pos>b},eatSpace:function(){var a=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){var b=this.string.indexOf(a,this.pos);if(b>-1)return this.pos=b,!0},backUp:function(a){this.pos-=a},column:function(){return M(this.string,this.start,this.tabSize)},indentation:function(){return M(this.string,null,this.tabSize)},match:function(a,b,c){if(typeof a!="string"){var e=this.string.slice(this.pos).match(a);return e&&b!==!1&&(this.pos+=e[0].length),e}function d(a){return c?a.toLowerCase():a}if(d(this.string).indexOf(d(a),this.pos)==this.pos)return b!==!1&&(this.pos+=a.length),!0},current:function(){return this.string.slice(this.start,this.pos)}},a.StringStream=m,n.prototype={attach:function(a){this.set.push(a)},detach:function(a){var b=W(this.set,a);b>-1&&this.set.splice(b,1)},split:function(a,b){if(this.to<=a&&this.to!=null)return null;var c=this.from<a||this.from==null?null:this.from-a+b,d=this.to==null?null:this.to-a+b;return new n(c,d,this.style,this.set)},dup:function(){return new n(null,null,this.style,this.set)},clipTo:function(a,b,c,d,e){this.from!=null&&this.from>=b&&(this.from=Math.max(d,this.from)+e),this.to!=null&&this.to>b&&(this.to=d<this.to?this.to+e:b),a&&d>this.from&&(d<this.to||this.to==null)&&(this.from=null),c&&(b<this.to||this.to==null)&&(b>this.from||this.from==null)&&(this.to=null)},isDead:function(){return this.from!=null&&this.to!=null&&this.from>=this.to},sameSet:function(a){return this.set==a.set}},o.prototype={attach:function(a){this.line=a},detach:function(a){this.line==a&&(this.line=null)},split:function(a,b){if(a<this.from)return this.from=this.to=this.from-a+b,this},isDead:function(){return this.from>this.to},clipTo:function(a,b,c,d,e){(a||b<this.from)&&(c||d>this.to)?(this.from=0,this.to=-1):this.from>b&&(this.from=this.to=Math.max(d,this.from)+e)},sameSet:function(a){return!1},find:function(){return!this.line||!this.line.parent?null:{line:u(this.line),ch:this.from}},clear:function(){if(this.line){var a=W(this.line.marked,this);a!=-1&&this.line.marked.splice(a,1),this.line=null}}},p.inheritMarks=function(a,b){var c=new p(a),d=b&&b.marked;if(d)for(var e=0;e<d.length;++e)if(d[e].to==null&&d[e].style){var f=c.marked||(c.marked=[]),g=d[e],h=g.dup();f.push(h),h.attach(c)}return c},p.prototype={replace:function(a,b,c){var d=[],e=this.marked,f=b==null?this.text.length:b;q(0,a,this.styles,d),c&&d.push(c,null),q(f,this.text.length,this.styles,d),this.styles=d,this.text=this.text.slice(0,a)+c+this.text.slice(f),this.stateAfter=null;if(e){var g=c.length-(f-a);for(var h=0,i=e[h];h<e.length;++h)i.clipTo(a==null,a||0,b==null,f,g),i.isDead()&&(i.detach(this),e.splice(h--,1))}},split:function(a,b){var c=[b,null],d=this.marked;q(a,this.text.length,this.styles,c);var e=new p(b+this.text.slice(a),c);if(d)for(var f=0;f<d.length;++f){var g=d[f],h=g.split(a,b.length);h&&(e.marked||(e.marked=[]),e.marked.push(h),h.attach(e))}return e},append:function(a){var b=this.text.length,c=a.marked,d=this.marked;this.text+=a.text,q(0,a.text.length,a.styles,this.styles);if(d)for(var e=0;e<d.length;++e)d[e].to==null&&(d[e].to=b);if(c&&c.length){d||(this.marked=d=[]);a:for(var e=0;e<c.length;++e){var f=c[e];if(!f.from)for(var g=0;g<d.length;++g){var h=d[g];if(h.to==b&&h.sameSet(f)){h.to=f.to==null?null:f.to+b,h.isDead()&&(h.detach(this),c.splice(e--,1));continue a}}d.push(f),f.attach(this),f.from+=b,f.to!=null&&(f.to+=b)}}},fixMarkEnds:function(a){var b=this.marked,c=a.marked;if(!b)return;for(var d=0;d<b.length;++d){var e=b[d],f=e.to==null;if(f&&c)for(var g=0;g<c.length;++g)if(c[g].sameSet(e)){f=!1;break}f&&(e.to=this.text.length)}},fixMarkStarts:function(){var a=this.marked;if(!a)return;for(var b=0;b<a.length;++b)a[b].from==null&&(a[b].from=0)},addMark:function(a){a.attach(this),this.marked==null&&(this.marked=[]),this.marked.push(a),this.marked.sort(function(a,b){return(a.from||0)-(b.from||0)})},highlight:function(a,b,c){var d=new m(this.text,c),e=this.styles,f=0,g=!1,h=e[0],i;this.text==""&&a.blankLine&&a.blankLine(b);while(!d.eol()){var j=a.token(d,b),k=this.text.slice(d.start,d.pos);d.start=d.pos,f&&e[f-1]==j?e[f-2]+=k:k&&(!g&&(e[f+1]!=j||f&&e[f-2]!=i)&&(g=!0),e[f++]=k,e[f++]=j,i=h,h=e[f]);if(d.pos>5e3){e[f++]=this.text.slice(d.pos),e[f++]=null;break}}return e.length!=f&&(e.length=f,g=!0),f&&e[f-2]!=i&&(g=!0),g||(e.length<5&&this.text.length<10?null:!1)},getTokenAt:function(a,b,c){var d=this.text,e=new m(d);while(e.pos<c&&!e.eol()){e.start=e.pos;var f=a.token(e,b)}return{start:e.start,end:e.pos,string:e.current(),className:f||null,state:b}},indentation:function(a){return M(this.text,null,a)},getHTML:function(a,b,c,d,e){function h(a,b){if(!a)return;g&&J&&a.charAt(0)==" "&&(a=" "+a.slice(1)),g=!1,b?f.push('<span class="',b,'">',U(a).replace(/\t/g,d),"</span>"):f.push(U(a).replace(/\t/g,d))}var f=[],g=!0;c&&f.push(this.className?'<pre class="'+this.className+'">':"<pre>");var i=this.styles,j=this.text,k=this.marked;a==b&&(a=null);var l=j.length;e!=null&&(l=Math.min(e,l));if(!j&&e==null)h(" ",a!=null&&b==null?"CodeMirror-selected":null);else if(!k&&a==null)for(var m=0,n=0;n<l;m+=2){var o=i[m],p=i[m+1],q=o.length;n+q>l&&(o=o.slice(0,l-n)),n+=q,h(o,p&&"cm-"+p)}else{var r=0,m=0,s="",p,t=0,u=-1,v=null;function w(){k&&(u+=1,v=u<k.length?k[u]:null)}w();while(r<l){var x=l,y="";if(a!=null)if(a>r)x=a;else if(b==null||b>r)y=" CodeMirror-selected",b!=null&&(x=Math.min(x,b));while(v&&v.to!=null&&v.to<=r)w();v&&(v.from>r?x=Math.min(x,v.from):(y+=" "+v.style,v.to!=null&&(x=Math.min(x,v.to))));for(;;){var z=r+s.length,A=p;y&&(A=p?p+y:y),h(z>x?s.slice(0,x-r):s,A);if(z>=x){s=s.slice(x-r),r=x;break}r=z,s=i[m++],p="cm-"+i[m++]}}a!=null&&b==null&&h(" ","CodeMirror-selected")}return c&&f.push("</pre>"),f.join("")},cleanUp:function(){this.parent=null;if(this.marked)for(var a=0,b=this.marked.length;a<b;++a)this.marked[a].detach(this)}},r.prototype={chunkSize:function(){return this.lines.length},remove:function(a,b,c){for(var d=a,e=a+b;d<e;++d){var f=this.lines[d];this.height-=f.height,f.cleanUp();if(f.handlers)for(var g=0;g<f.handlers.length;++g)c.push(f.handlers[g])}this.lines.splice(a,b)},collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertHeight:function(a,b,c){this.height+=c,this.lines.splice.apply(this.lines,[a,0].concat(b));for(var d=0,e=b.length;d<e;++d)b[d].parent=this},iterN:function(a,b,c){for(var d=a+b;a<d;++a)if(c(this.lines[a]))return!0}},s.prototype={chunkSize:function(){return this.size},remove:function(a,b,c){this.size-=b;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<f){var g=Math.min(b,f-a),h=e.height;e.remove(a,g,c),this.height-=h-e.height,f==g&&(this.children.splice(d--,1),e.parent=null);if((b-=g)==0)break;a=0}else a-=f}if(this.size-b<25){var i=[];this.collapse(i),this.children=[new r(i)]}},collapse:function(a){for(var b=0,c=this.children.length;b<c;++b)this.children[b].collapse(a)},insert:function(a,b){var c=0;for(var d=0,e=b.length;d<e;++d)c+=b[d].height;this.insertHeight(a,b,c)},insertHeight:function(a,b,c){this.size+=b.length,this.height+=c;for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],g=f.chunkSize();if(a<=g){f.insertHeight(a,b,c);if(f.lines&&f.lines.length>50){while(f.lines.length>50){var h=f.lines.splice(f.lines.length-25,25),i=new r(h);f.height-=i.height,this.children.splice(d+1,0,i),i.parent=this}this.maybeSpill()}break}a-=g}},maybeSpill:function(){if(this.children.length<=10)return;var a=this;do{var b=a.children.splice(a.children.length-5,5),c=new s(b);if(!a.parent){var d=new s(a.children);d.parent=a,a.children=[d,c],a=d}else{a.size-=c.size,a.height-=c.height;var e=W(a.parent.children,a);a.parent.children.splice(e+1,0,c)}c.parent=a.parent}while(a.children.length>10);a.parent.maybeSpill()},iter:function(a,b,c){this.iterN(a,b-a,c)},iterN:function(a,b,c){for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],g=f.chunkSize();if(a<g){var h=Math.min(b,g-a);if(f.iterN(a,h,c))return!0;if((b-=h)==0)break;a=0}else a-=g}}},x.prototype={addChange:function(a,b,c){this.undone.length=0;var d=+(new Date),e=this.done[this.done.length-1];if(d-this.time>400||!e||e.start>a+b||e.start+e.added<a-e.added+e.old.length)this.done.push({start:a,added:b,old:c});else{var f=0;if(a<e.start){for(var g=e.start-a-1;g>=0;--g)e.old.unshift(c[g]);e.added+=e.start-a,e.start=a}else e.start<a&&(f=a-e.start,b+=f);for(var g=e.added-f,h=c.length;g<h;++g)e.old.push(c[g]);e.added<b&&(e.added=b)}this.time=d}},a.e_stop=C,a.e_preventDefault=A,a.e_stopPropagation=B,a.connect=F,G.prototype={set:function(a,b){clearTimeout(this.id),this.id=setTimeout(b,a)}};var H=function(){if(/MSIE [1-8]\b/.test(navigator.userAgent))return!1;var a=document.createElement("div");return"draggable"in a}(),I=/gecko\/\d{7}/i.test(navigator.userAgent),J=/MSIE \d/.test(navigator.userAgent),K=/WebKit\//.test(navigator.userAgent),L="\n";(function(){var a=document.createElement("textarea");a.value="foo\nbar",a.value.indexOf("\r")>-1&&(L="\r\n")})(),document.documentElement.getBoundingClientRect!=null&&(O=function(a,b){try{var c=a.getBoundingClientRect();c={top:c.top,left:c.left}}catch(d){c={top:0,left:0}}if(!b)if(window.pageYOffset==null){var e=document.documentElement||document.body.parentNode;e.scrollTop==null&&(e=document.body),c.top+=e.scrollTop,c.left+=e.scrollLeft}else c.top+=window.pageYOffset,c.left+=window.pageXOffset;return c});var T=document.createElement("pre");U("a")=="\na"?U=function(a){return T.textContent=a,T.innerHTML.slice(1)}:U("\t")!="\t"&&(U=function(a){return T.innerHTML="",T.appendChild(document.createTextNode(a)),T.innerHTML}),a.htmlEscape=U;var Y="\n\nb".split(/\n/).length!=3?function(a){var b=0,c,d=[];while((c=a.indexOf("\n",b))>-1)d.push(a.slice(b,a.charAt(c-1)=="\r"?c-1:c)),b=c+1;return d.push(a.slice(b)),d}:function(a){return a.split(/\r?\n/)};a.splitLines=Y;var Z=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return!b||b.parentElement()!=a?!1:b.compareEndPoints("StartToEnd",b)!=0};a.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}}),a.defineMIME("text/plain","null");var $={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};return a.keyNames=$,function(){for(var a=0;a<10;a++)$[a+48]=String(a);for(var a=65;a<=90;a++)$[a]=String.fromCharCode(a);for(var a=1;a<=12;a++)$[a+111]=$[a+63235]="F"+a}(),a}();
CodeMirror.runMode=function(a,b,c){var d=CodeMirror.getMode({indentUnit:2},b),e=c.nodeType==1;if(e){var f=c,g=[];c=function(a,b){a=="\n"?g.push("<br>"):b?g.push('<span class="cm-'+CodeMirror.htmlEscape(b)+'">'+CodeMirror.htmlEscape(a)+"</span>"):g.push(CodeMirror.htmlEscape(a))}}var h=CodeMirror.splitLines(a),i=CodeMirror.startState(d);for(var j=0,k=h.length;j<k;++j){j&&c("\n");var l=new CodeMirror.StringStream(h[j]);while(!l.eol()){var m=d.token(l,i);c(l.current(),m,j,l.start),l.start=l.pos}}e&&(f.innerHTML=g.join(""))};
CodeMirror.modeExtensions||(CodeMirror.modeExtensions={}),CodeMirror.defineExtension("getModeExt",function(){return CodeMirror.modeExtensions[this.getOption("mode")]}),CodeMirror.defineExtension("getModeExtAtPos",function(a){var b=this.getTokenAt(a);return b&&b.state&&b.state.mode?CodeMirror.modeExtensions[b.state.mode=="html"?"htmlmixed":b.state.mode]:this.getModeExt()}),CodeMirror.defineExtension("commentRange",function(a,b,c){var d=this.getModeExtAtPos(this.getCursor());if(a){var e=this.getRange(b,c);this.replaceRange(d.commentStart+this.getRange(b,c)+d.commentEnd,b,c),b.line==c.line&&b.ch==c.ch&&this.setCursor(b.line,b.ch+d.commentStart.length)}else{var f=this.getRange(b,c),g=f.indexOf(d.commentStart),h=f.lastIndexOf(d.commentEnd);g>-1&&h>-1&&h>g&&(f=f.substr(0,g)+f.substring(g+d.commentStart.length,h)+f.substr(h+d.commentEnd.length)),this.replaceRange(f,b,c)}}),CodeMirror.defineExtension("autoIndentRange",function(a,b){var c=this;this.operation(function(){for(var d=a.line;d<=b.line;d++)c.indentLine(d)})}),CodeMirror.defineExtension("autoFormatRange",function(a,b){var c=this.indexFromPos(a),d=this.indexFromPos(b),e=this.getModeExt().autoFormatLineBreaks(this.getValue(),c,d),f=this;this.operation(function(){f.replaceRange(e,a,b);var d=f.posFromIndex(c).line,g=f.posFromIndex(c+e.length).line;for(var h=d;h<=g;h++)f.indentLine(h)})}),CodeMirror.modeExtensions.css={commentStart:"/*",commentEnd:"*/",wordWrapChars:[";","\\{","\\}"],autoFormatLineBreaks:function(a){return a.replace(new RegExp("(;|\\{|\\})([^\r\n])","g"),"$1\n$2")}},CodeMirror.modeExtensions.javascript={commentStart:"/*",commentEnd:"*/",wordWrapChars:[";","\\{","\\}"],getNonBreakableBlocks:function(a){var b=[new RegExp("for\\s*?\\(([\\s\\S]*?)\\)"),new RegExp("'([\\s\\S]*?)('|$)"),new RegExp('"([\\s\\S]*?)("|$)'),new RegExp("//.*([\r\n]|$)")],c=new Array;for(var d=0;d<b.length;d++){var e=0;while(e<a.length){var f=a.substr(e).match(b[d]);if(f==null)break;c.push({start:e+f.index,end:e+f.index+f[0].length}),e+=f.index+Math.max(1,f[0].length)}}return c.sort(function(a,b){return a.start-b.start}),c},autoFormatLineBreaks:function(a){var b=0,c=new RegExp("(;|\\{|\\})([^\r\n])","g"),d=this.getNonBreakableBlocks(a);if(d!=null){var e="";for(var f=0;f<d.length;f++)d[f].start>b&&(e+=a.substring(b,d[f].start).replace(c,"$1\n$2"),b=d[f].start),d[f].start<=b&&d[f].end>=b&&(e+=a.substring(b,d[f].end),b=d[f].end);return b<a.length-1&&(e+=a.substr(b).replace(c,"$1\n$2")),e}return a.replace(c,"$1\n$2")}},CodeMirror.modeExtensions.xml={commentStart:"<!--",commentEnd:"-->",wordWrapChars:[">"],autoFormatLineBreaks:function(a){var b=a.split("\n"),c=new RegExp("(^\\s*?<|^[^<]*?)(.+)(>\\s*?$|[^>]*?$)"),d=new RegExp("<","g"),e=new RegExp("(>)([^\r\n])","g");for(var f=0;f<b.length;f++){var g=b[f].match(c);if(g!=null&&g.length>3){b[f]=g[1]+g[2].replace(d,"\n$&").replace(e,"$1\n$2")+g[3];continue}}return b.join("\n")}},CodeMirror.modeExtensions.htmlmixed={commentStart:"<!--",commentEnd:"-->",wordWrapChars:[">",";","\\{","\\}"],getModeInfos:function(a,b){var c=new Array;c[0]={pos:0,modeExt:CodeMirror.modeExtensions.xml,modeName:"xml"};var d=new Array;d[0]={regex:new RegExp("<style[^>]*>([\\s\\S]*?)(</style[^>]*>|$)","i"),modeExt:CodeMirror.modeExtensions.css,modeName:"css"},d[1]={regex:new RegExp("<script[^>]*>([\\s\\S]*?)(</script[^>]*>|$)","i"),modeExt:CodeMirror.modeExtensions.javascript,modeName:"javascript"};var e=typeof b!="undefined"?b:a.length-1;for(var f=0;f<d.length;f++){var g=0;while(g<=e){var h=a.substr(g).match(d[f].regex);if(h==null)break;if(h.length>1&&h[1].length>0){var i=g+h.index+h[0].indexOf(h[1]);c.push({pos:i,modeExt:d[f].modeExt,modeName:d[f].modeName}),c.push({pos:i+h[1].length,modeExt:c[0].modeExt,modeName:c[0].modeName}),g+=h.index+h[0].length;continue}g+=h.index+Math.max(h[0].length,1)}}return c.sort(function(b,c){return b.pos-c.pos}),c},autoFormatLineBreaks:function(a,b,c){var d=this.getModeInfos(a),e=new RegExp("^\\s*?\n"),f=new RegExp("\n\\s*?$"),g="";if(d.length>1)for(var h=1;h<=d.length;h++){var i=d[h-1].pos,j=h<d.length?d[h].pos:c;if(i>=c)break;if(i<b){if(j<=b)continue;i=b}j>c&&(j=c);var k=a.substring(i,j);d[h-1].modeName!="xml"&&(!e.test(k)&&i>0&&(k="\n"+k),!f.test(k)&&j<a.length-1&&(k+="\n")),g+=d[h-1].modeExt.autoFormatLineBreaks(k)}else g=d[0].modeExt.autoFormatLineBreaks(a.substring(b,c));return g}};
var qq=qq||{};qq.extend=function(a,b){for(var c in b)a[c]=b[c]},qq.indexOf=function(a,b,c){if(a.indexOf)return a.indexOf(b,c);c=c||0;var d=a.length;c<0&&(c+=d);for(;c<d;c++)if(c in a&&a[c]===b)return c;return-1},qq.getUniqueId=function(){var a=0;return function(){return a++}}(),qq.attach=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},qq.detach=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.attachEvent&&a.detachEvent("on"+b,c)},qq.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},qq.insertBefore=function(a,b){b.parentNode.insertBefore(a,b)},qq.remove=function(a){a.parentNode.removeChild(a)},qq.contains=function(a,b){return a==b?!0:a.contains?a.contains(b):!!(b.compareDocumentPosition(a)&8)},qq.toElement=function(){var a=document.createElement("div");return function(b){a.innerHTML=b;var c=a.firstChild;return a.removeChild(c),c}}(),qq.css=function(a,b){b.opacity!=null&&typeof a.style.opacity!="string"&&typeof a.filters!="undefined"&&(b.filter="alpha(opacity="+Math.round(100*b.opacity)+")"),qq.extend(a.style,b)},qq.hasClass=function(a,b){var c=new RegExp("(^| )"+b+"( |$)");return c.test(a.className)},qq.addClass=function(a,b){qq.hasClass(a,b)||(a.className+=" "+b)},qq.removeClass=function(a,b){var c=new RegExp("(^| )"+b+"( |$)");a.className=a.className.replace(c," ").replace(/^\s+|\s+$/g,"")},qq.setText=function(a,b){a.innerText=b,a.textContent=b},qq.children=function(a){var b=[],c=a.firstChild;while(c)c.nodeType==1&&b.push(c),c=c.nextSibling;return b},qq.getByClass=function(a,b){if(a.querySelectorAll)return a.querySelectorAll("."+b);var c=[],d=a.getElementsByTagName("*"),e=d.length;for(var f=0;f<e;f++)qq.hasClass(d[f],b)&&c.push(d[f]);return c},qq.obj2url=function(a,b,c){var d=[],e="&",f=function(a,c){var e=b?/\[\]$/.test(b)?b:b+"["+c+"]":c;e!="undefined"&&c!="undefined"&&d.push(typeof a=="object"?qq.obj2url(a,e,!0):Object.prototype.toString.call(a)==="[object Function]"?encodeURIComponent(e)+"="+encodeURIComponent(a()):encodeURIComponent(e)+"="+encodeURIComponent(a))};if(!c&&b)e=/\?/.test(b)?/\?$/.test(b)?"":"&":"?",d.push(b),d.push(qq.obj2url(a));else if(Object.prototype.toString.call(a)==="[object Array]"&&typeof a!="undefined")for(var g=0,h=a.length;g<h;++g)f(a[g],g);else if(typeof a!="undefined"&&a!==null&&typeof a=="object")for(var g in a)f(a[g],g);else d.push(encodeURIComponent(b)+"="+encodeURIComponent(a));return d.join(e).replace(/^&/,"").replace(/%20/g,"+")};var qq=qq||{};qq.FileUploaderBasic=function(a){this._options={debug:!1,action:"/server/upload",params:{},button:null,multiple:!0,maxConnections:3,allowedExtensions:[],sizeLimit:0,minSizeLimit:0,onSubmit:function(a,b){},onProgress:function(a,b,c,d){},onComplete:function(a,b,c){},onCancel:function(a,b){},messages:{typeError:"{file} has invalid extension. Only {extensions} are allowed.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},showMessage:function(a){alert(a)}},qq.extend(this._options,a),this._filesInProgress=0,this._handler=this._createUploadHandler(),this._options.button&&(this._button=this._createUploadButton(this._options.button)),this._preventLeaveInProgress()},qq.FileUploaderBasic.prototype={setParams:function(a){this._options.params=a},getInProgress:function(){return this._filesInProgress},_createUploadButton:function(a){var b=this;return new qq.UploadButton({element:a,multiple:this._options.multiple&&qq.UploadHandlerXhr.isSupported(),onChange:function(a){b._onInputChange(a)}})},_createUploadHandler:function(){var a=this,b;qq.UploadHandlerXhr.isSupported()?b="UploadHandlerXhr":b="UploadHandlerForm";var c=new qq[b]({debug:this._options.debug,action:this._options.action,maxConnections:this._options.maxConnections,onProgress:function(b,c,d,e){a._onProgress(b,c,d,e),a._options.onProgress(b,c,d,e)},onComplete:function(b,c,d){a._onComplete(b,c,d),a._options.onComplete(b,c,d)},onCancel:function(b,c){a._onCancel(b,c),a._options.onCancel(b,c)}});return c},_preventLeaveInProgress:function(){var a=this;qq.attach(window,"beforeunload",function(b){if(!a._filesInProgress)return;var b=b||window.event;return b.returnValue=a._options.messages.onLeave,a._options.messages.onLeave})},_onSubmit:function(a,b){this._filesInProgress++},_onProgress:function(a,b,c,d){},_onComplete:function(a,b,c){this._filesInProgress--,c.error&&this._options.showMessage(c.error)},_onCancel:function(a,b){this._filesInProgress--},_onInputChange:function(a){this._handler instanceof qq.UploadHandlerXhr?this._uploadFileList(a.files):this._validateFile(a)&&this._uploadFile(a),this._button.reset()},_uploadFileList:function(a){for(var b=0;b<a.length;b++)if(!this._validateFile(a[b]))return;for(var b=0;b<a.length;b++)this._uploadFile(a[b])},_uploadFile:function(a){var b=this._handler.add(a),c=this._handler.getName(b);this._options.onSubmit(b,c)!==!1&&(this._onSubmit(b,c),this._handler.upload(b,this._options.params))},_validateFile:function(a){var b,c;return a.value?b=a.value.replace(/.*(\/|\\)/,""):(b=a.fileName!=null?a.fileName:a.name,c=a.fileSize!=null?a.fileSize:a.size),this._isAllowedExtension(b)?c===0?(this._error("emptyError",b),!1):c&&this._options.sizeLimit&&c>this._options.sizeLimit?(this._error("sizeError",b),!1):c&&c<this._options.minSizeLimit?(this._error("minSizeError",b),!1):!0:(this._error("typeError",b),!1)},_error:function(a,b){function d(a,b){c=c.replace(a,b)}var c=this._options.messages[a];d("{file}",this._formatFileName(b)),d("{extensions}",this._options.allowedExtensions.join(", ")),d("{sizeLimit}",this._formatSize(this._options.sizeLimit)),d("{minSizeLimit}",this._formatSize(this._options.minSizeLimit)),this._options.showMessage(c)},_formatFileName:function(a){return a.length>33&&(a=a.slice(0,19)+"..."+a.slice(-13)),a},_isAllowedExtension:function(a){var b=-1!==a.indexOf(".")?a.replace(/.*[.]/,"").toLowerCase():"",c=this._options.allowedExtensions;if(!c.length)return!0;for(var d=0;d<c.length;d++)if(c[d].toLowerCase()==b)return!0;return!1},_formatSize:function(a){var b=-1;do a/=1024,b++;while(a>99);return Math.max(a,.1).toFixed(1)+["kB","MB","GB","TB","PB","EB"][b]}},qq.FileUploader=function(a){qq.FileUploaderBasic.apply(this,arguments),qq.extend(this._options,{element:null,listElement:null,template:'<div class="qq-uploader"><div class="qq-upload-drop-area"><span>Drop files here to upload</span></div><div class="qq-upload-button">Upload a file</div><ul class="qq-upload-list"></ul></div>',fileTemplate:'<li><span class="qq-upload-file"></span><span class="qq-upload-spinner"></span><span class="qq-upload-size"></span><a class="qq-upload-cancel" href="#">Cancel</a><span class="qq-upload-failed-text">Failed</span></li>',classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",list:"qq-upload-list",file:"qq-upload-file",spinner:"qq-upload-spinner",size:"qq-upload-size",cancel:"qq-upload-cancel",success:"qq-upload-success",fail:"qq-upload-fail"}}),qq.extend(this._options,a),this._element=this._options.element,this._element.innerHTML=this._options.template,this._listElement=this._options.listElement||this._find(this._element,"list"),this._classes=this._options.classes,this._button=this._createUploadButton(this._find(this._element,"button")),this._bindCancelEvent(),this._setupDragDrop()},qq.extend(qq.FileUploader.prototype,qq.FileUploaderBasic.prototype),qq.extend(qq.FileUploader.prototype,{_find:function(a,b){var c=qq.getByClass(a,this._options.classes[b])[0];if(!c)throw new Error("element not found "+b);return c},_setupDragDrop:function(){var a=this,b=this._find(this._element,"drop"),c=new qq.UploadDropZone({element:b,onEnter:function(c){qq.addClass(b,a._classes.dropActive),c.stopPropagation()},onLeave:function(a){a.stopPropagation()},onLeaveNotDescendants:function(c){qq.removeClass(b,a._classes.dropActive)},onDrop:function(c){b.style.display="none",qq.removeClass(b,a._classes.dropActive),a._uploadFileList(c.dataTransfer.files)}});b.style.display="none",qq.attach(document,"dragenter",function(a){if(!c._isValidFileDrag(a))return;b.style.display="block"}),qq.attach(document,"dragleave",function(a){if(!c._isValidFileDrag(a))return;var d=document.elementFromPoint(a.clientX,a.clientY);if(!d||d.nodeName=="HTML")b.style.display="none"})},_onSubmit:function(a,b){qq.FileUploaderBasic.prototype._onSubmit.apply(this,arguments),this._addToList(a,b)},_onProgress:function(a,b,c,d){qq.FileUploaderBasic.prototype._onProgress.apply(this,arguments);var e=this._getItemByFileId(a),f=this._find(e,"size");f.style.display="inline";var g;c!=d?g=Math.round(c/d*100)+"% from "+this._formatSize(d):g=this._formatSize(d),qq.setText(f,g)},_onComplete:function(a,b,c){qq.FileUploaderBasic.prototype._onComplete.apply(this,arguments);var d=this._getItemByFileId(a);qq.remove(this._find(d,"cancel")),qq.remove(this._find(d,"spinner")),c.success?qq.addClass(d,this._classes.success):qq.addClass(d,this._classes.fail)},_addToList:function(a,b){var c=qq.toElement(this._options.fileTemplate);c.qqFileId=a;var d=this._find(c,"file");qq.setText(d,this._formatFileName(b)),this._find(c,"size").style.display="none",this._listElement.appendChild(c)},_getItemByFileId:function(a){var b=this._listElement.firstChild;while(b){if(b.qqFileId==a)return b;b=b.nextSibling}},_bindCancelEvent:function(){var a=this,b=this._listElement;qq.attach(b,"click",function(b){b=b||window.event;var c=b.target||b.srcElement;if(qq.hasClass(c,a._classes.cancel)){qq.preventDefault(b);var d=c.parentNode;a._handler.cancel(d.qqFileId),qq.remove(d)}})}}),qq.UploadDropZone=function(a){this._options={element:null,onEnter:function(a){},onLeave:function(a){},onLeaveNotDescendants:function(a){},onDrop:function(a){}},qq.extend(this._options,a),this._element=this._options.element,this._disableDropOutside(),this._attachEvents()},qq.UploadDropZone.prototype={_disableDropOutside:function(a){qq.UploadDropZone.dropOutsideDisabled||(qq.attach(document,"dragover",function(a){a.dataTransfer&&(a.dataTransfer.dropEffect="none",a.preventDefault())}),qq.UploadDropZone.dropOutsideDisabled=!0)},_attachEvents:function(){var a=this;qq.attach(a._element,"dragover",function(b){if(!a._isValidFileDrag(b))return;var c=b.dataTransfer.effectAllowed;c=="move"||c=="linkMove"?b.dataTransfer.dropEffect="move":b.dataTransfer.dropEffect="copy",b.stopPropagation(),b.preventDefault()}),qq.attach(a._element,"dragenter",function(b){if(!a._isValidFileDrag(b))return;a._options.onEnter(b)}),qq.attach(a._element,"dragleave",function(b){if(!a._isValidFileDrag(b))return;a._options.onLeave(b);var c=document.elementFromPoint(b.clientX,b.clientY);if(qq.contains(this,c))return;a._options.onLeaveNotDescendants(b)}),qq.attach(a._element,"drop",function(b){if(!a._isValidFileDrag(b))return;b.preventDefault(),a._options.onDrop(b)})},_isValidFileDrag:function(a){var b=a.dataTransfer,c=navigator.userAgent.indexOf("AppleWebKit")>-1;return b&&b.effectAllowed!="none"&&(b.files||!c&&b.types.contains&&b.types.contains("Files"))}},qq.UploadButton=function(a){this._options={element:null,multiple:!1,name:"file",onChange:function(a){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"},qq.extend(this._options,a),this._element=this._options.element,qq.css(this._element,{position:"relative",overflow:"hidden",direction:"ltr"}),this._input=this._createInput()},qq.UploadButton.prototype={getInput:function(){return this._input},reset:function(){this._input.parentNode&&qq.remove(this._input),qq.removeClass(this._element,this._options.focusClass),this._input=this._createInput()},_createInput:function(){var a=document.createElement("input");this._options.multiple&&a.setAttribute("multiple","multiple"),a.setAttribute("type","file"),a.setAttribute("name",this._options.name),qq.css(a,{position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0}),this._element.appendChild(a);var b=this;return qq.attach(a,"change",function(){b._options.onChange(a)}),qq.attach(a,"mouseover",function(){qq.addClass(b._element,b._options.hoverClass)}),qq.attach(a,"mouseout",function(){qq.removeClass(b._element,b._options.hoverClass)}),qq.attach(a,"focus",function(){qq.addClass(b._element,b._options.focusClass)}),qq.attach(a,"blur",function(){qq.removeClass(b._element,b._options.focusClass)}),window.attachEvent&&a.setAttribute("tabIndex","-1"),a}},qq.UploadHandlerAbstract=function(a){this._options={debug:!1,action:"/upload.php",maxConnections:999,onProgress:function(a,b,c,d){},onComplete:function(a,b,c){},onCancel:function(a,b){}},qq.extend(this._options,a),this._queue=[],this._params=[]},qq.UploadHandlerAbstract.prototype={log:function(a){this._options.debug&&window.console&&console.log("[uploader] "+a)},add:function(a){},upload:function(a,b){var c=this._queue.push(a),d={};qq.extend(d,b),this._params[a]=d,c<=this._options.maxConnections&&this._upload(a,this._params[a])},cancel:function(a){this._cancel(a),this._dequeue(a)},cancelAll:function(){for(var a=0;a<this._queue.length;a++)this._cancel(this._queue[a]);this._queue=[]},getName:function(a){},getSize:function(a){},getQueue:function(){return this._queue},_upload:function(a){},_cancel:function(a){},_dequeue:function(a){var b=qq.indexOf(this._queue,a);this._queue.splice(b,1);var c=this._options.maxConnections;if(this._queue.length>=c&&b<c){var d=this._queue[c-1];this._upload(d,this._params[d])}}},qq.UploadHandlerForm=function(a){qq.UploadHandlerAbstract.apply(this,arguments),this._inputs={}},qq.extend(qq.UploadHandlerForm.prototype,qq.UploadHandlerAbstract.prototype),qq.extend(qq.UploadHandlerForm.prototype,{add:function(a){a.setAttribute("name","qqfile");var b="qq-upload-handler-iframe"+qq.getUniqueId();return this._inputs[b]=a,a.parentNode&&qq.remove(a),b},getName:function(a){return this._inputs[a].value.replace(/.*(\/|\\)/,"")},_cancel:function(a){this._options.onCancel(a,this.getName(a)),delete this._inputs[a];var b=document.getElementById(a);b&&(b.setAttribute("src","javascript:false;"),qq.remove(b))},_upload:function(a,b){var c=this._inputs[a];if(!c)throw new Error("file with passed id was not added, or already uploaded or cancelled");var d=this.getName(a),e=this._createIframe(a),f=this._createForm(e,b);f.appendChild(c);var g=this;return this._attachLoadEvent(e,function(){g.log("iframe loaded");var b=g._getIframeContentJSON(e);g._options.onComplete(a,d,b),g._dequeue(a),delete g._inputs[a],setTimeout(function(){qq.remove(e)},1)}),f.submit(),qq.remove(f),a},_attachLoadEvent:function(a,b){qq.attach(a,"load",function(){if(!a.parentNode)return;if(a.contentDocument&&a.contentDocument.body&&a.contentDocument.body.innerHTML=="false")return;b()})},_getIframeContentJSON:function(iframe){var doc=iframe.contentDocument?iframe.contentDocument:iframe.contentWindow.document,response;this.log("converting iframe's innerHTML to JSON"),this.log("innerHTML = "+doc.body.innerHTML);try{response=eval("("+doc.body.innerHTML+")")}catch(err){response={}}return response},_createIframe:function(a){var b=qq.toElement('<iframe src="javascript:false;" name="'+a+'" />');return b.setAttribute("id",a),b.style.display="none",document.body.appendChild(b),b},_createForm:function(a,b){var c=qq.toElement('<form method="post" enctype="multipart/form-data"></form>'),d=qq.obj2url(b,this._options.action);return c.setAttribute("action",d),c.setAttribute("target",a.name),c.style.display="none",document.body.appendChild(c),c}}),qq.UploadHandlerXhr=function(a){qq.UploadHandlerAbstract.apply(this,arguments),this._files=[],this._xhrs=[],this._loaded=[]},qq.UploadHandlerXhr.isSupported=function(){var a=document.createElement("input");return a.type="file","multiple"in a&&typeof File!="undefined"&&typeof (new XMLHttpRequest).upload!="undefined"},qq.extend(qq.UploadHandlerXhr.prototype,qq.UploadHandlerAbstract.prototype),qq.extend(qq.UploadHandlerXhr.prototype,{add:function(a){if(a instanceof File)return this._files.push(a)-1;throw new Error("Passed obj in not a File (in qq.UploadHandlerXhr)")},getName:function(a){var b=this._files[a];return b.fileName!=null?b.fileName:b.name},getSize:function(a){var b=this._files[a];return b.fileSize!=null?b.fileSize:b.size},getLoaded:function(a){return this._loaded[a]||0},_upload:function(a,b){var c=this._files[a],d=this.getName(a),e=this.getSize(a);this._loaded[a]=0;var f=this._xhrs[a]=new XMLHttpRequest,g=this;f.upload.onprogress=function(b){b.lengthComputable&&(g._loaded[a]=b.loaded,g._options.onProgress(a,d,b.loaded,b.total))},f.onreadystatechange=function(){f.readyState==4&&g._onComplete(a,f)},b=b||{},b.qqfile=d;var h=qq.obj2url(b,this._options.action);f.open("POST",h,!0),f.setRequestHeader("X-Requested-With","XMLHttpRequest"),f.setRequestHeader("X-File-Name",encodeURIComponent(d)),f.setRequestHeader("Content-Type","application/octet-stream"),f.send(c)},_onComplete:function(id,xhr){if(!this._files[id])return;var name=this.getName(id),size=this.getSize(id);this._options.onProgress(id,name,size,size);if(xhr.status==200){this.log("xhr - server response received"),this.log("responseText = "+xhr.responseText);var response;try{response=eval("("+xhr.responseText+")")}catch(err){response={}}this._options.onComplete(id,name,response)}else this._options.onComplete(id,name,{});this._files[id]=null,this._xhrs[id]=null,this._dequeue(id)},_cancel:function(a){this._options.onCancel(a,this.getName(a)),this._files[a]=null,this._xhrs[a]&&(this._xhrs[a].abort(),this._xhrs[a]=null)}});
(function(a){function b(a){var b=["transform","WebkitTransform","MozTransform","msTransform","OTransform"],c;while(c=b.shift())if(typeof a.style[c]!="undefined")return c;return"transform"}var c=a.fn.css;a.fn.css=function(d,e){typeof a.props["transform"]=="undefined"&&(d=="transform"||typeof d=="object"&&typeof d["transform"]!="undefined")&&(a.props.transform=b(this.get(0)));if(a.props["transform"]!="transform")if(d=="transform"){d=a.props.transform;if(typeof e=="undefined"&&jQuery.style)return jQuery.style(this.get(0),d)}else typeof d=="object"&&typeof d["transform"]!="undefined"&&(d[a.props.transform]=d.transform,delete d.transform);return c.apply(this,arguments)}})(jQuery);
(function(a){var b="deg";a.fn.rotate=function(c){var d=a(this).css("transform")||"none";if(typeof c=="undefined"){if(d){var e=d.match(/rotate\(([^)]+)\)/);if(e&&e[1])return e[1]}return 0}var e=c.toString().match(/^(-?\d+(\.\d+)?)(.+)?$/);return e&&(e[3]&&(b=e[3]),a(this).css("transform",d.replace(/none|rotate\([^)]*\)/,"")+"rotate("+e[1]+b+")")),this},a.fn.scale=function(b,c,d){var e=a(this).css("transform");if(typeof b=="undefined"){if(e){var f=e.match(/scale\(([^)]+)\)/);if(f&&f[1])return f[1]}return 1}return a(this).css("transform",e.replace(/none|scale\([^)]*\)/,"")+"scale("+b+")"),this};var c=a.fx.prototype.cur;a.fx.prototype.cur=function(){return this.prop=="rotate"?parseFloat(a(this.elem).rotate()):this.prop=="scale"?parseFloat(a(this.elem).scale()):c.apply(this,arguments)},a.fx.step.rotate=function(c){a(c.elem).rotate(c.now+b)},a.fx.step.scale=function(b){a(b.elem).scale(b.now)};var d=a.fn.animate;a.fn.animate=function(a){if(typeof a["rotate"]!="undefined"){var c=a.rotate.toString().match(/^(([+-]=)?(-?\d+(\.\d+)?))(.+)?$/);c&&c[5]&&(b=c[5]),a.rotate=c[1]}return d.apply(this,arguments)}})(jQuery);
Ext.define("Ext.ux.statusbar.StatusBar",{extend:"Ext.toolbar.Toolbar",alternateClassName:"Ext.ux.StatusBar",alias:"widget.statusbar",requires:["Ext.toolbar.TextItem"],cls:"x-statusbar",busyIconCls:"x-status-busy",busyText:"Loading...",autoClear:5e3,emptyText:"&nbsp;",activeThreadId:0,initComponent:function(){this.statusAlign==="right"&&(this.cls+=" x-status-right"),this.callParent(arguments)},afterRender:function(){this.callParent(arguments);var a=this.statusAlign==="right";this.currIconCls=this.iconCls||this.defaultIconCls,this.statusEl=Ext.create("Ext.toolbar.TextItem",{cls:"x-status-text "+(this.currIconCls||""),text:this.text||this.defaultText||""}),a?(this.add("->"),this.add(this.statusEl)):(this.insert(0,this.statusEl),this.insert(1,"->")),this.height=27,this.doLayout()},setStatus:function(a){a=a||{},Ext.isString(a)&&(a={text:a}),a.text!==undefined&&this.setText(a.text),a.iconCls!==undefined&&this.setIcon(a.iconCls);if(a.clear){var b=a.clear,c=this.autoClear,d={useDefaults:!0,anim:!0};Ext.isObject(b)?(b=Ext.applyIf(b,d),b.wait&&(c=b.wait)):Ext.isNumber(b)?(c=b,b=d):Ext.isBoolean(b)&&(b=d),b.threadId=this.activeThreadId,Ext.defer(this.clearStatus,c,this,[b])}return this.doLayout(),this},clearStatus:function(a){a=a||{};if(a.threadId&&a.threadId!==this.activeThreadId)return this;var b=a.useDefaults?this.defaultText:this.emptyText,c=a.useDefaults?this.defaultIconCls?this.defaultIconCls:"":"";return a.anim?this.statusEl.el.puff({remove:!1,useDisplay:!0,scope:this,callback:function(){this.setStatus({text:b,iconCls:c}),this.statusEl.el.show()}}):(this.statusEl.hide(),this.setStatus({text:b,iconCls:c}),this.statusEl.show()),this.doLayout(),this},setText:function(a){return this.activeThreadId++,this.text=a||"",this.rendered&&this.statusEl.setText(this.text),this},getText:function(){return this.text},setIcon:function(a){return this.activeThreadId++,a=a||"",this.rendered?(this.currIconCls&&(this.statusEl.removeCls(this.currIconCls),this.currIconCls=null),a.length>0&&(this.statusEl.addCls(a),this.currIconCls=a)):this.currIconCls=a,this},showBusy:function(a){return Ext.isString(a)&&(a={text:a}),a=Ext.applyIf(a||{},{text:this.busyText,iconCls:this.busyIconCls}),this.setStatus(a)}});
Array.prototype.map||(Array.prototype.map=function(a,b){var c=this.length,d=new Array(c);for(var e=0;e<c;e++)e in this&&(d[e]=a.call(b,this[e],e,this));return d}),Array.prototype.filter||(Array.prototype.filter=function(a,b){var c=this.length,d=new Array;for(var e=0;e<c;e++)if(e in this){var f=this[e];a.call(b,f,e,this)&&d.push(f)}return d}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){var c=this.length>>>0;for(var d=0;d<c;d++)d in this&&a.call(b,this[d],d,this)}),Array.prototype.reduce||(Array.prototype.reduce=function(a,b){var c=this.length;if(!c&&arguments.length==1)throw new Error("reduce: empty array, no initial value");var d=0;if(arguments.length<2)for(;;){if(d in this){b=this[d++];break}if(++d>=c)throw new Error("reduce: no values, no initial value")}for(;d<c;d++)d in this&&(b=a(b,this[d],d,this));return b});var pv={};pv.version={major:3,minor:2},pv.identity=function(a){return a},pv.index=function(){return this.index},pv.child=function(){return this.childIndex},pv.parent=function(){return this.parent.index},pv.extend=function(a){function b(){}return b.prototype=a.prototype||a,new b};try{eval("pv.parse = function(x) x;")}catch(e){pv.parse=function(a){var b=new RegExp("function\\s*(\\b\\w+)?\\s*\\([^)]*\\)\\s*","mg"),c,d,e=0,f="";while(c=b.exec(a)){var g=c.index+c[0].length;if(a.charAt(g)!="{"){f+=a.substring(e,g)+"{return ",e=g;for(var h=0;h>=0&&g<a.length;g++){var i=a.charAt(g);switch(i){case'"':case"'":while(++g<a.length&&(d=a.charAt(g))!=i)d=="\\"&&g++;break;case"[":case"(":h++;break;case"]":case")":h--;break;case";":case",":h==0&&h--}}f+=pv.parse(a.substring(e,--g))+";}",e=g}b.lastIndex=g}return f+=a.substring(e),f}}pv.css=function(a,b){return window.getComputedStyle?window.getComputedStyle(a,null).getPropertyValue(b):a.currentStyle[b]},pv.error=function(a){typeof console=="undefined"?alert(a):console.error(a)},pv.listen=function(a,b,c){return c=pv.listener(c),a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},pv.listener=function(a){return a.$listener||(a.$listener=function(b){try{return pv.event=b,a.call(this,b)}finally{delete pv.event}})},pv.ancestor=function(a,b){while(b){if(b==a)return!0;b=b.parentNode}return!1},pv.id=function(){var a=1;return function(){return a++}}(),pv.functor=function(a){return typeof a=="function"?a:function(){return a}},pv.listen(window,"load",function(){pv.$={i:0,x:document.getElementsByTagName("script")};for(;pv.$.i<pv.$.x.length;pv.$.i++){pv.$.s=pv.$.x[pv.$.i];if(pv.$.s.type=="text/javascript+protovis")try{window.eval(pv.parse(pv.$.s.text))}catch(a){pv.error(a)}}delete pv.$}),pv.Format={},pv.Format.re=function(a){return a.replace(/[\\\^\$\*\+\?\[\]\(\)\.\{\}]/g,"\\$&")},pv.Format.pad=function(a,b,c){var d=b-String(c).length;return d<1?c:(new Array(d+1)).join(a)+c},pv.Format.date=function(a){function c(c){return a.replace(/%[a-zA-Z0-9]/g,function(a){switch(a){case"%a":return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][c.getDay()];case"%A":return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][c.getDay()];case"%h":case"%b":return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][c.getMonth()];case"%B":return["January","February","March","April","May","June","July","August","September","October","November","December"][c.getMonth()];case"%c":return c.toLocaleString();case"%C":return b("0",2,Math.floor(c.getFullYear()/100)%100);case"%d":return b("0",2,c.getDate());case"%x":case"%D":return b("0",2,c.getMonth()+1)+"/"+b("0",2,c.getDate())+"/"+b("0",2,c.getFullYear()%100);case"%e":return b(" ",2,c.getDate());case"%H":return b("0",2,c.getHours());case"%I":var e=c.getHours()%12;return e?b("0",2,e):12;case"%m":return b("0",2,c.getMonth()+1);case"%M":return b("0",2,c.getMinutes());case"%n":return"\n";case"%p":return c.getHours()<12?"AM":"PM";case"%T":case"%X":case"%r":var e=c.getHours()%12;return(e?b("0",2,e):12)+":"+b("0",2,c.getMinutes())+":"+b("0",2,c.getSeconds())+" "+(c.getHours()<12?"AM":"PM");case"%R":return b("0",2,c.getHours())+":"+b("0",2,c.getMinutes());case"%S":return b("0",2,c.getSeconds());case"%Q":return b("0",3,c.getMilliseconds());case"%t":return"\t";case"%u":var f=c.getDay();return f?f:1;case"%w":return c.getDay();case"%y":return b("0",2,c.getFullYear()%100);case"%Y":return c.getFullYear();case"%%":return"%"}return a})}var b=pv.Format.pad;return c.format=c,c.parse=function(b){var c=1970,d=0,e=1,f=0,g=0,h=0,i=[function(){}],j=pv.Format.re(a).replace(/%[a-zA-Z0-9]/g,function(a){switch(a){case"%b":return i.push(function(a){d={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11}[a]}),"([A-Za-z]+)";case"%h":case"%B":return i.push(function(a){d={January:0,February:1,March:2,April:3,May:4,June:5,July:6,August:7,September:8,October:9,November:10,December:11}[a]}),"([A-Za-z]+)";case"%e":case"%d":return i.push(function(a){e=a}),"([0-9]+)";case"%I":case"%H":return i.push(function(a){f=a}),"([0-9]+)";case"%m":return i.push(function(a){d=a-1}),"([0-9]+)";case"%M":return i.push(function(a){g=a}),"([0-9]+)";case"%p":return i.push(function(a){f==12?a=="am"&&(f=0):a=="pm"&&(f=Number(f)+12)}),"(am|pm)";case"%S":return i.push(function(a){h=a}),"([0-9]+)";case"%y":return i.push(function(a){a=Number(a),c=a+(0<=a&&a<69?2e3:a>=69&&a<100?1900:0)}),"([0-9]+)";case"%Y":return i.push(function(a){c=a}),"([0-9]+)";case"%%":return i.push(function(){}),"%"}return a}),k=b.match(j);return k&&k.forEach(function(a,b){i[b](a)}),new Date(c,d,e,f,g,h)},c},pv.Format.time=function(a){function c(c){c=Number(c);switch(a){case"short":if(c>=31536e6)return(c/31536e6).toFixed(1)+" years";if(c>=6048e5)return(c/6048e5).toFixed(1)+" weeks";if(c>=864e5)return(c/864e5).toFixed(1)+" days";if(c>=36e5)return(c/36e5).toFixed(1)+" hours";if(c>=6e4)return(c/6e4).toFixed(1)+" minutes";return(c/1e3).toFixed(1)+" seconds";case"long":var d=[],e=c%6e4/1e3>>0,f=c%36e5/6e4>>0;d.push(b("0",2,e));if(c>=36e5){var g=c%864e5/36e5>>0;d.push(b("0",2,f)),c>=864e5?(d.push(b("0",2,g)),d.push(Math.floor(c/864e5).toFixed())):d.push(g.toFixed())}else d.push(f.toFixed());return d.reverse().join(":")}}var b=pv.Format.pad;return c.format=c,c.parse=function(b){switch(a){case"short":var c=/([0-9,.]+)\s*([a-z]+)/g,d,e=0;while(d=c.exec(b)){var f=parseFloat(d[0].replace(",","")),g=0;switch(d[2].toLowerCase()){case"year":case"years":g=31536e6;break;case"week":case"weeks":g=6048e5;break;case"day":case"days":g=864e5;break;case"hour":case"hours":g=36e5;break;case"minute":case"minutes":g=6e4;break;case"second":case"seconds":g=1e3}e+=f*g}return e;case"long":var d=b.replace(",","").split(":").reverse(),e=0;return d.length&&(e+=parseFloat(d[0])*1e3),d.length>1&&(e+=parseFloat(d[1])*6e4),d.length>2&&(e+=parseFloat(d[2])*36e5),d.length>3&&(e+=parseFloat(d[3])*864e5),e}},c},pv.Format.number=function(){function l(l){Infinity>e&&(l=Math.round(l*f)/f);var m=String(Math.abs(l)).split("."),n=m[0],o=l<0?"-":"";n.length>b&&(n=n.substring(n.length-b)),i&&n.length<a&&(n=o+(new Array(a-n.length+1)).join(g)+n),n.length>3&&(n=n.replace(/\B(?=(?:\d{3})+(?!\d))/g,k)),!i&&n.length<c&&(n=(new Array(c-n.length+1)).join(g)+o+n),m[0]=n;var p=m[1]||"";return p.length<d&&(m[1]=p+(new Array(d-p.length+1)).join(h)),m.join(j)}var a=0,b=Infinity,c=0,d=0,e=0,f=1,g="0",h="0",i=!0,j=".",k=",";return l.format=l,l.parse=function(a){var c=pv.Format.re,d=String(a).replace(new RegExp("^("+c(g)+")*"),"").replace(new RegExp("("+c(h)+")*$"),"").split(j),i=d[0].replace(new RegExp(c(k),"g"),"");i.length>b&&(i=i.substring(i.length-b));var l=d[1]?Number("0."+d[1]):0;return Infinity>e&&(l=Math.round(l*f)/f),Math.round(i)+l},l.integerDigits=function(d,e){return arguments.length?(a=Number(d),b=arguments.length>1?Number(e):a,c=a+Math.floor(a/3)*k.length,this):[a,b]},l.fractionDigits=function(a,b){return arguments.length?(d=Number(a),e=arguments.length>1?Number(b):d,f=Math.pow(10,e),this):[d,e]},l.integerPad=function(a){return arguments.length?(g=String(a),i=/\d/.test(g),this):g},l.fractionPad=function(a){return arguments.length?(h=String(a),this):h},l.decimal=function(a){return arguments.length?(j=String(a),this):j},l.group=function(b){return arguments.length?(k=b?String(b):"",c=a+Math.floor(a/3)*k.length,this):k},l},pv.map=function(a,b){var c={};return b?a.map(function(a,d){return c.index=d,b.call(c,a)}):a.slice()},pv.repeat=function(a,b){return arguments.length==1&&(b=2),pv.blend(pv.range(b).map(function(){return a}))},pv.cross=function(a,b){var c=[];for(var d=0,e=a.length,f=b.length;d<e;d++)for(var g=0,h=a[d];g<f;g++)c.push([h,b[g]]);return c},pv.blend=function(a){return Array.prototype.concat.apply([],a)},pv.transpose=function(a){var b=a.length,c=pv.max(a,function(a){return a.length});if(c>b){a.length=c;for(var d=b;d<c;d++)a[d]=new Array(b);for(var d=0;d<b;d++)for(var e=d+1;e<c;e++){var f=a[d][e];a[d][e]=a[e][d],a[e][d]=f}}else{for(var d=0;d<c;d++)a[d].length=b;for(var d=0;d<b;d++)for(var e=0;e<d;e++){var f=a[d][e];a[d][e]=a[e][d],a[e][d]=f}}a.length=c;for(var d=0;d<c;d++)a[d].length=b;return a},pv.normalize=function(a,b){var c=pv.map(a,b),d=pv.sum(c);for(var e=0;e<c.length;e++)c[e]/=d;return c},pv.permute=function(a,b,c){c||(c=pv.identity);var d=new Array(b.length),e={};return b.forEach(function(b,g){e.index=b,d[g]=c.call(e,a[b])}),d},pv.numerate=function(a,b){b||(b=pv.identity);var c={},d={};return a.forEach(function(a,e){d.index=e,c[b.call(d,a)]=e}),c},pv.uniq=function(a,b){b||(b=pv.identity);var c={},d=[],e={},f;return a.forEach(function(a,g){e.index=g,f=b.call(e,a),f in c||(c[f]=d.push(f))}),d},pv.naturalOrder=function(a,b){return a<b?-1:a>b?1:0},pv.reverseOrder=function(a,b){return b<a?-1:b>a?1:0},pv.search=function(a,b,c){c||(c=pv.identity);var d=0,e=a.length-1;while(d<=e){var f=d+e>>1,g=c(a[f]);if(g<b)d=f+1;else{if(!(g>b))return f;e=f-1}}return-d-1},pv.search.index=function(a,b,c){var d=pv.search(a,b,c);return d<0?-d-1:d},pv.range=function(a,b,c){arguments.length==1&&(b=a,a=0),c==undefined&&(c=1);if((b-a)/c==Infinity)throw new Error("range must be finite");var d=[],e=0,f;if(c<0)while((f=a+c*e++)>b)d.push(f);else while((f=a+c*e++)<b)d.push(f);return d},pv.random=function(a,b,c){return arguments.length==1&&(b=a,a=0),c==undefined&&(c=1),c?Math.floor(Math.random()*(b-a)/c)*c+a:Math.random()*(b-a)+a},pv.sum=function(a,b){var c={};return a.reduce(b?function(a,d,e){return c.index=e,a+b.call(c,d)}:function(a,b){return a+b},0)},pv.max=function(a,b){return b==pv.index?a.length-1:Math.max.apply(null,b?pv.map(a,b):a)},pv.max.index=function(a,b){if(!a.length)return-1;if(b==pv.index)return a.length-1;b||(b=pv.identity);var c=0,d=-Infinity,e={};for(var f=0;f<a.length;f++){e.index=f;var g=b.call(e,a[f]);g>d&&(d=g,c=f)}return c},pv.min=function(a,b){return b==pv.index?0:Math.min.apply(null,b?pv.map(a,b):a)},pv.min.index=function(a,b){if(!a.length)return-1;if(b==pv.index)return 0;b||(b=pv.identity);var c=0,d=Infinity,e={};for(var f=0;f<a.length;f++){e.index=f;var g=b.call(e,a[f]);g<d&&(d=g,c=f)}return c},pv.mean=function(a,b){return pv.sum(a,b)/a.length},pv.median=function(a,b){if(b==pv.index)return(a.length-1)/2;a=pv.map(a,b).sort(pv.naturalOrder);if(a.length%2)return a[Math.floor(a.length/2)];var c=a.length/2;return(a[c-1]+a[c])/2},pv.variance=function(a,b){if(a.length<1)return NaN;if(a.length==1)return 0;var c=pv.mean(a,b),d=0,e={};b||(b=pv.identity);for(var f=0;f<a.length;f++){e.index=f;var g=b.call(e,a[f])-c;d+=g*g}return d},pv.deviation=function(a,b){return Math.sqrt(pv.variance(a,b)/(a.length-1))},pv.log=function(a,b){return Math.log(a)/Math.log(b)},pv.logSymmetric=function(a,b){return a==0?0:a<0?-pv.log(-a,b):pv.log(a,b)},pv.logAdjusted=function(a,b){if(!isFinite(a))return a;var c=a<0;return a<b&&(a+=(b-a)/b),c?-pv.log(a,b):pv.log(a,b)},pv.logFloor=function(a,b){return a>0?Math.pow(b,Math.floor(pv.log(a,b))):-Math.pow(b,-Math.floor(-pv.log(-a,b)))},pv.logCeil=function(a,b){return a>0?Math.pow(b,Math.ceil(pv.log(a,b))):-Math.pow(b,-Math.ceil(-pv.log(-a,b)))},function(){var a=Math.PI/180,b=180/Math.PI;pv.radians=function(b){return a*b},pv.degrees=function(a){return b*a}}(),pv.keys=function(a){var b=[];for(var c in a)b.push(c);return b},pv.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},pv.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},pv.dict=function(a,b){var c={},d={};for(var e=0;e<a.length;e++)if(e in a){var f=a[e];d.index=e,c[f]=b.call(d,f)}return c},pv.dom=function(a){return new pv.Dom(a)},pv.Dom=function(a){this.$map=a},pv.Dom.prototype.$leaf=function(a){return typeof a!="object"},pv.Dom.prototype.leaf=function(a){return arguments.length?(this.$leaf=a,this):this.$leaf},pv.Dom.prototype.root=function(a){function d(a){var c=new pv.Dom.Node;for(var e in a){var f=a[e];c.appendChild(b(f)?new pv.Dom.Node(f):d(f)).nodeName=e}return c}var b=this.$leaf,c=d(this.$map);return c.nodeName=a,c},pv.Dom.prototype.nodes=function(){return this.root().nodes()},pv.Dom.Node=function(a){this.nodeValue=a,this.childNodes=[]},pv.Dom.Node.prototype.parentNode=null,pv.Dom.Node.prototype.firstChild=null,pv.Dom.Node.prototype.lastChild=null,pv.Dom.Node.prototype.previousSibling=null,pv.Dom.Node.prototype.nextSibling=null,pv.Dom.Node.prototype.removeChild=function(a){var b=this.childNodes.indexOf(a);if(b==-1)throw new Error("child not found");return this.childNodes.splice(b,1),a.previousSibling?a.previousSibling.nextSibling=a.nextSibling:this.firstChild=a.nextSibling,a.nextSibling?a.nextSibling.previousSibling=a.previousSibling:this.lastChild=a.previousSibling,delete a.nextSibling,delete a.previousSibling,delete a.parentNode,a},pv.Dom.Node.prototype.appendChild=function(a){return a.parentNode&&a.parentNode.removeChild(a),a.parentNode=this,a.previousSibling=this.lastChild,this.lastChild?this.lastChild.nextSibling=a:this.firstChild=a,this.lastChild=a,this.childNodes.push(a),a},pv.Dom.Node.prototype.insertBefore=function(a,b){if(!b)return this.appendChild(a);var c=this.childNodes.indexOf(b);if(c==-1)throw new Error("child not found");return a.parentNode&&a.parentNode.removeChild(a),a.parentNode=this,a.nextSibling=b,a.previousSibling=b.previousSibling,b.previousSibling?b.previousSibling.nextSibling=a:(b==this.lastChild&&(this.lastChild=a),this.firstChild=a),this.childNodes.splice(c,0,a),a},pv.Dom.Node.prototype.replaceChild=function(a,b){var c=this.childNodes.indexOf(b);if(c==-1)throw new Error("child not found");return a.parentNode&&a.parentNode.removeChild(a),a.parentNode=this,a.nextSibling=b.nextSibling,a.previousSibling=b.previousSibling,b.previousSibling?b.previousSibling.nextSibling=a:this.firstChild=a,b.nextSibling?b.nextSibling.previousSibling=a:this.lastChild=a,this.childNodes[c]=a,b},pv.Dom.Node.prototype.visitBefore=function(a){function b(c,d){a(c,d);for(var e=c.firstChild;e;e=e.nextSibling)b(e,d+1)}b(this,0)},pv.Dom.Node.prototype.visitAfter=function(a){function b(c,d){for(var e=c.firstChild;e;e=e.nextSibling)b(e,d+1);a(c,d)}b(this,0)},pv.Dom.Node.prototype.sort=function(a){if(this.firstChild){this.childNodes.sort(a);var b=this.firstChild=this.childNodes[0],c;delete b.previousSibling;for(var d=1;d<this.childNodes.length;d++)b.sort(a),c=this.childNodes[d],c.previousSibling=b,b=b.nextSibling=c;this.lastChild=b,delete b.nextSibling,b.sort(a)}return this},pv.Dom.Node.prototype.reverse=function(){var a=[];return this.visitAfter(function(b){while(b.lastChild)a.push(b.removeChild(b.lastChild));for(var c;c=a.pop();)b.insertBefore(c,b.firstChild)}),this},pv.Dom.Node.prototype.nodes=function(){function b(c){a.push(c),c.childNodes.forEach(b)}var a=[];return b(this,a),a},pv.Dom.Node.prototype.toggle=function(a){if(a)return this.toggled?this.visitBefore(function(a){a.toggled&&a.toggle()}):this.visitAfter(function(a){a.toggled||a.toggle()});var b=this;if(b.toggled){for(var c;c=b.toggled.pop();)b.appendChild(c);delete b.toggled}else if(b.lastChild){b.toggled=[];while(b.lastChild)b.toggled.push(b.removeChild(b.lastChild))}},pv.nodes=function(a){var b=new pv.Dom.Node;for(var c=0;c<a.length;c++)b.appendChild(new pv.Dom.Node(a[c]));return b.nodes()},pv.tree=function(a){return new pv.Tree(a)},pv.Tree=function(a){this.array=a},pv.Tree.prototype.keys=function(a){return this.k=a,this},pv.Tree.prototype.value=function(a){return this.v=a,this},pv.Tree.prototype.map=function(){var a={},b={};for(var c=0;c<this.array.length;c++){b.index=c;var d=this.array[c],e=this.k.call(b,d),f=a;for(var g=0;g<e.length-1;g++)f=f[e[g]]||(f[e[g]]={});f[e[g]]=this.v?this.v.call(b,d):d}return a},pv.nest=function(a){return new pv.Nest(a)},pv.Nest=function(a){this.array=a,this.keys=[]},pv.Nest.prototype.key=function(a){return this.keys.push(a),this},pv.Nest.prototype.sortKeys=function(a){return this.keys[this.keys.length-1].order=a||pv.naturalOrder,this},pv.Nest.prototype.sortValues=function(a){return this.order=a||pv.naturalOrder,this},pv.Nest.prototype.map=function(){var a={},b=[];for(var c,d=0;d<this.array.length;d++){var e=this.array[d],f=a;for(c=0;c<this.keys.length-1;c++){var g=this.keys[c](e);f[g]||(f[g]={}),f=f[g]}g=this.keys[c](e);if(!f[g]){var h=[];b.push(h),f[g]=h}f[g].push(e)}if(this.order)for(var c=0;c<b.length;c++)b[c].sort(this.order);return a},pv.Nest.prototype.entries=function(){function a(b){var c=[];for(var d in b){var e=b[d];c.push({key:d,values:e instanceof Array?e:a(e)})}return c}function b(a,c){var d=this.keys[c].order;d&&a.sort(function(a,b){return d(a.key,b.key)});if(++c<this.keys.length)for(var e=0;e<a.length;e++)b.call(this,a[e].values,c);return a}return b.call(this,a(this.map()),0)},pv.Nest.prototype.rollup=function(a){function b(c){for(var d in c){var e=c[d];e instanceof Array?c[d]=a(e):b(e)}return c}return b(this.map())},pv.flatten=function(a){return new pv.Flatten(a)},pv.Flatten=function(a){this.map=a,this.keys=[]},pv.Flatten.prototype.key=function(a,b){return this.keys.push({name:a,value:b}),delete this.$leaf,this},pv.Flatten.prototype.leaf=function(a){return this.keys.length=0,this.$leaf=a,this},pv.Flatten.prototype.array=function(){function f(d,e){if(e<c.length-1)for(var g in d)b.push(g),f(d[g],e+1),b.pop();else a.push(b.concat(d))}var a=[],b=[],c=this.keys,d=this.$leaf;if(d){function e(c,f){if(d(c))a.push({keys:b.slice(),value:c});else for(var g in c)b.push(g),e(c[g],f+1),b.pop()}return e(this.map,0),a}return f(this.map,0),a.map(function(a){var b={};for(var d=0;d<c.length;d++){var e=c[d],f=a[d];b[e.name]=e.value?e.value.call(null,f):f}return b})},pv.vector=function(a,b){return new pv.Vector(a,b)},pv.Vector=function(a,b){this.x=a,this.y=b},pv.Vector.prototype.perp=function(){return new pv.Vector(-this.y,this.x)},pv.Vector.prototype.norm=function(){var a=this.length();return this.times(a?1/a:1)},pv.Vector.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},pv.Vector.prototype.times=function(a){return new pv.Vector(this.x*a,this.y*a)},pv.Vector.prototype.plus=function(a,b){return arguments.length==1?new pv.Vector(this.x+a.x,this.y+a.y):new pv.Vector(this.x+a,this.y+b)},pv.Vector.prototype.minus=function(a,b){return arguments.length==1?new pv.Vector(this.x-a.x,this.y-a.y):new pv.Vector(this.x-a,this.y-b)},pv.Vector.prototype.dot=function(a,b){return arguments.length==1?this.x*a.x+this.y*a.y:this.x*a+this.y*b},pv.Transform=function(){},pv.Transform.prototype={k:1,x:0,y:0},pv.Transform.identity=new pv.Transform,pv.Transform.prototype.translate=function(a,b){var c=new pv.Transform;return c.k=this.k,c.x=this.k*a+this.x,c.y=this.k*b+this.y,c},pv.Transform.prototype.scale=function(a){var b=new pv.Transform;return b.k=this.k*a,b.x=this.x,b.y=this.y,b},pv.Transform.prototype.invert=function(){var a=new pv.Transform,b=1/this.k;return a.k=b,a.x=-this.x*b,a.y=-this.y*b,a},pv.Transform.prototype.times=function(a){var b=new pv.Transform;return b.k=this.k*a.k,b.x=this.k*a.x+this.x,b.y=this.k*a.y+this.y,b},pv.Scale=function(){},pv.Scale.interpolator=function(a,b){return typeof a=="number"?function(c){return c*(b-a)+a}:(a=pv.color(a).rgb(),b=pv.color(b).rgb(),function(c){var d=a.a*(1-c)+b.a*c;return d<1e-5&&(d=0),a.a==0?pv.rgb(b.r,b.g,b.b,d):b.a==0?pv.rgb(a.r,a.g,a.b,d):pv.rgb(Math.round(a.r*(1-c)+b.r*c),Math.round(a.g*(1-c)+b.g*c),Math.round(a.b*(1-c)+b.b*c),d)})},pv.Scale.quantitative=function(){function j(a){return new Date(a)}function k(c){var e=pv.search(a,c);return e<0&&(e=-e-2),e=Math.max(0,Math.min(d.length-1,e)),d[e]((g(c)-b[e])/(b[e+1]-b[e]))}var a=[0,1],b=[0,1],c=[0,1],d=[pv.identity],e=Number,f=!1,g=pv.identity,h=pv.identity,i=String;return k.transform=function(c,d){return g=function(a){return f?-c(-a):c(a)},h=function(a){return f?-d(-a):d(a)},b=a.map(g),this},k.domain=function(c,d,h){if(arguments.length){var i;return c instanceof Array?(arguments.length<2&&(d=pv.identity),arguments.length<3&&(h=d),i=c.length&&d(c[0]),a=c.length?[pv.min(c,d),pv.max(c,h)]:[]):(i=c,a=Array.prototype.slice.call(arguments).map(Number)),a.length?a.length==1&&(a=[a[0],a[0]]):a=[-Infinity,Infinity],f=(a[0]||a[a.length-1])<0,b=a.map(g),e=i instanceof Date?j:Number,this}return a.map(e)},k.range=function(){if(arguments.length){c=Array.prototype.slice.call(arguments),c.length?c.length==1&&(c=[c[0],c[0]]):c=[-Infinity,Infinity],d=[];for(var a=0;a<c.length-1;a++)d.push(pv.Scale.interpolator(c[a],c[a+1]));return this}return c},k.invert=function(a){var f=pv.search(c,a);return f<0&&(f=-f-2),f=Math.max(0,Math.min(d.length-1,f)),e(h(b[f]+(a-c[f])/(c[f+1]-c[f])*(b[f+1]-b[f])))},k.ticks=function(b){var c=a[0],d=a[a.length-1],f=d<c,g=f?d:c,h=f?c:d,k=h-g;if(!k||!isFinite(k))return e==j&&(i=pv.Format.date("%x")),[e(g)];if(e==j){function l(a,b){switch(b){case 31536e6:a.setMonth(0);case 2592e6:a.setDate(1);case 6048e5:b==6048e5&&a.setDate(a.getDate()-a.getDay());case 864e5:a.setHours(0);case 36e5:a.setMinutes(0);case 6e4:a.setSeconds(0);case 1e3:a.setMilliseconds(0)}}var m,n,o,p=1;k>=94608e6?(m=31536e6,n="%Y",o=function(a){a.setFullYear(a.getFullYear()+p)}):k>=7776e6?(m=2592e6,n="%m/%Y",o=function(a){a.setMonth(a.getMonth()+p)}):k>=18144e5?(m=6048e5,n="%m/%d",o=function(a){a.setDate(a.getDate()+7*p)}):k>=2592e5?(m=864e5,n="%m/%d",o=function(a){a.setDate(a.getDate()+p)}):k>=108e5?(m=36e5,n="%I:%M %p",o=function(a){a.setHours(a.getHours()+p)}):k>=18e4?(m=6e4,n="%I:%M %p",o=function(a){a.setMinutes(a.getMinutes()+p)}):k>=3e3?(m=1e3,n="%I:%M:%S",o=function(a){a.setSeconds(a.getSeconds()+p)}):(m=1,n="%S.%Qs",o=function(a){a.setTime(a.getTime()+p)}),i=pv.Format.date(n);var q=new Date(g),r=[];l(q,m);var s=k/m;if(s>10)switch(m){case 36e5:p=s>20?6:3,q.setHours(Math.floor(q.getHours()/p)*p);break;case 2592e6:p=3,q.setMonth(Math.floor(q.getMonth()/p)*p);break;case 6e4:p=s>30?15:s>15?10:5,q.setMinutes(Math.floor(q.getMinutes()/p)*p);break;case 1e3:p=s>90?15:s>60?10:5,q.setSeconds(Math.floor(q.getSeconds()/p)*p);break;case 1:p=s>1e3?250:s>200?100:s>100?50:s>50?25:5,q.setMilliseconds(Math.floor(q.getMilliseconds()/p)*p);break;default:p=pv.logCeil(s/15,10),s/p<2?p/=5:s/p<5&&(p/=2),q.setFullYear(Math.floor(q.getFullYear()/p)*p)}for(;;){o(q);if(q>h)break;r.push(new Date(q))}return f?r.reverse():r}arguments.length||(b=10);var p=pv.logFloor(k/b,10),t=b/(k/p);t<=.15?p*=10:t<=.35?p*=5:t<=.75&&(p*=2);var c=Math.ceil(g/p)*p,d=Math.floor(h/p)*p;i=pv.Format.number().fractionDigits(Math.max(0,-Math.floor(pv.log(p,10)+.01)));var u=pv.range(c,d+p,p);return f?u.reverse():u},k.tickFormat=function(a){return i(a)},k.nice=function(){if(a.length!=2)return this;var c=a[0],d=a[a.length-1],e=d<c,f=e?d:c,h=e?c:d,i=h-f;if(!i||!isFinite(i))return this;var j=Math.pow(10,Math.round(Math.log(i)/Math.log(10))-1);return a=[Math.floor(f/j)*j,Math.ceil(h/j)*j],e&&a.reverse(),b=a.map(g),this},k.by=function(a){function b(){return k(a.apply(this,arguments))}for(var c in k)b[c]=k[c];return b},k.domain.apply(k,arguments),k},pv.Scale.linear=function(){var a=pv.Scale.quantitative();return a.domain.apply(a,arguments),a},pv.Scale.log=function(){var a=pv.Scale.quantitative(1,10),b,c,d=function(a){return Math.log(a)/c},e=function(a){return Math.pow(b,a)};return a.ticks=function(){var c=a.domain(),f=c[0]<0,g=Math.floor(f?-d(-c[0]):d(c[0])),h=Math.ceil(f?-d(-c[1]):d(c[1])),i=[];if(f){i.push(-e(-g));for(;g++<h;)for(var j=b-1;j>0;j--)i.push(-e(-g)*j)}else{for(;g<h;g++)for(var j=1;j<b;j++)i.push(e(g)*j);i.push(e(g))}for(g=0;i[g]<c[0];g++);for(h=i.length;i[h-1]>c[1];h--);return i.slice(g,h)},a.tickFormat=function(a){return a.toPrecision(1)},a.nice=function(){var c=a.domain();return a.domain(pv.logFloor(c[0],b),pv.logCeil(c[1],b))},a.base=function(f){return arguments.length?(b=Number(f),c=Math.log(b),a.transform(d,e),this):b},a.domain.apply(a,arguments),a.base(10)},pv.Scale.root=function(){var a=pv.Scale.quantitative();return a.power=function(b){if(arguments.length){var c=Number(b),d=1/c;return a.transform(function(a){return Math.pow(a,d)},function(a){return Math.pow(a,c)}),this}return c},a.domain.apply(a,arguments),a.power(2)},pv.Scale.ordinal=function(){function e(d){return d in b||(b[d]=a.push(d)-1),c[b[d]%c.length]}var a=[],b={},c=[],d=0;return e.domain=function(c,d){if(arguments.length){c=c instanceof Array?arguments.length>1?pv.map(c,d):c:Array.prototype.slice.call(arguments),a=[];var e={};for(var f=0;f<c.length;f++){var g=c[f];g in e||(e[g]=!0,a.push(g))}return b=pv.numerate(a),this}return a},e.range=function(a,b){return arguments.length?(c=a instanceof Array?arguments.length>1?pv.map(a,b):a:Array.prototype.slice.call(arguments),typeof c[0]=="string"&&(c=c.map(pv.color)),this):c},e.split=function(a,b){var d=(b-a)/this.domain().length;return c=pv.range(a+d/2,b,d),this},e.splitFlush=function(a,b){var d=this.domain().length,e=(b-a)/(d-1);return c=d==1?[(a+b)/2]:pv.range(a,b+e/2,e),this},e.splitBanded=function(a,b,d){arguments.length<3&&(d=1);if(d<0){var e=this.domain().length,f=-d*e,g=b-a-f,h=g/(e+1);c=pv.range(a+h,b,h-d),c.band=-d}else{var i=(b-a)/(this.domain().length+(1-d));c=pv.range(a+i*(1-d),b,i),c.band=i*d}return this},e.by=function(a){function b(){return e(a.apply(this,arguments))}for(var c in e)b[c]=e[c];return b},e.domain.apply(e,arguments),e},pv.Scale.quantile=function(){function f(a){return e(Math.max(0,Math.min(b,pv.search.index(c,a)-1))/b)}var a=-1,b=-1,c=[],d=[],e=pv.Scale.linear();return f.quantiles=function(e){if(arguments.length){a=Number(e);if(a<0)c=[d[0]].concat(d),b=d.length-1;else{c=[],c[0]=d[0];for(var f=1;f<=a;f++)c[f]=d[~~(f*(d.length-1)/a)];b=a-1}return this}return c},f.domain=function(b,c){return arguments.length?(d=b instanceof Array?pv.map(b,c):Array.prototype.slice.call(arguments),d.sort(pv.naturalOrder),f.quantiles(a),this):d},f.range=function(){return arguments.length?(e.range.apply(e,arguments),this):e.range()},f.by=function(a){function b(){return f(a.apply(this,arguments))}for(var c in f)b[c]=f[c];return b},f.domain.apply(f,arguments),f},pv.histogram=function(a,b){var c=!0;return{bins:function(d){var e=pv.map(a,b),g=[];arguments.length||(d=pv.Scale.linear(e).ticks());for(var h=0;h<d.length-1;h++){var i=g[h]=[];i.x=d[h],i.dx=d[h+1]-d[h],i.y=0}for(var h=0;h<e.length;h++){var j=pv.search.index(d,e[h])-1,i=g[Math.max(0,Math.min(g.length-1,j))];i.y++,i.push(a[h])}if(!c)for(var h=0;h<g.length;h++)g[h].y/=e.length;return g},frequency:function(a){return arguments.length?(c=Boolean(a),this):c}}},pv.color=function(a){if(a.rgb)return a.rgb();var b=/([a-z]+)\((.*)\)/i.exec(a);if(b){var c=b[2].split(","),d=1;switch(b[1]){case"hsla":case"rgba":d=parseFloat(c[3]);if(!d)return pv.Color.transparent}switch(b[1]){case"hsla":case"hsl":var e=parseFloat(c[0]),f=parseFloat(c[1])/100,g=parseFloat(c[2])/100;return(new pv.Color.Hsl(e,f,g,d)).rgb();case"rgba":case"rgb":function h(a){var b=parseFloat(a);return a[a.length-1]=="%"?Math.round(b*2.55):b}var i=h(c[0]),j=h(c[1]),k=h(c[2]);return pv.rgb(i,j,k,d)}}var l=pv.Color.names[a];if(l)return l;if(a.charAt(0)=="#"){var i,j,k;return a.length==4?(i=a.charAt(1),i+=i,j=a.charAt(2),j+=j,k=a.charAt(3),k+=k):a.length==7&&(i=a.substring(1,3),j=a.substring(3,5),k=a.substring(5,7)),pv.rgb(parseInt(i,16),parseInt(j,16),parseInt(k,16),1)}return new pv.Color(a,1)},pv.Color=function(a,b){this.color=a,this.opacity=b},pv.Color.prototype.brighter=function(a){return this.rgb().brighter(a)},pv.Color.prototype.darker=function(a){return this.rgb().darker(a)},pv.rgb=function(a,b,c,d){return new pv.Color.Rgb(a,b,c,arguments.length==4?d:1)},pv.Color.Rgb=function(a,b,c,d){pv.Color.call(this,d?"rgb("+a+","+b+","+c+")":"none",d),this.r=a,this.g=b,this.b=c,this.a=d},pv.Color.Rgb.prototype=pv.extend(pv.Color),pv.Color.Rgb.prototype.red=function(a){return pv.rgb(a,this.g,this.b,this.a)},pv.Color.Rgb.prototype.green=function(a){return pv.rgb(this.r,a,this.b,this.a)},pv.Color.Rgb.prototype.blue=function(a){return pv.rgb(this.r,this.g,a,this.a)},pv.Color.Rgb.prototype.alpha=function(a){return pv.rgb(this.r,this.g,this.b,a)},pv.Color.Rgb.prototype.rgb=function(){return this},pv.Color.Rgb.prototype.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;return!b&&!c&&!d?pv.rgb(e,e,e,this.a):(b&&b<e&&(b=e),c&&c<e&&(c=e),d&&d<e&&(d=e),pv.rgb(Math.min(255,Math.floor(b/a)),Math.min(255,Math.floor(c/a)),Math.min(255,Math.floor(d/a)),this.a))},pv.Color.Rgb.prototype.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),pv.rgb(Math.max(0,Math.floor(a*this.r)),Math.max(0,Math.floor(a*this.g)),Math.max(0,Math.floor(a*this.b)),this.a)},pv.hsl=function(a,b,c,d){return new pv.Color.Hsl(a,b,c,arguments.length==4?d:1)},pv.Color.Hsl=function(a,b,c,d){pv.Color.call(this,"hsl("+a+","+b*100+"%,"+c*100+"%)",d),this.h=a,this.s=b,this.l=c,this.a=d},pv.Color.Hsl.prototype=pv.extend(pv.Color),pv.Color.Hsl.prototype.hue=function(a){return pv.hsl(a,this.s,this.l,this.a)},pv.Color.Hsl.prototype.saturation=function(a){return pv.hsl(this.h,a,this.l,this.a)},pv.Color.Hsl.prototype.lightness=function(a){return pv.hsl(this.h,this.s,a,this.a)},pv.Color.Hsl.prototype.alpha=function(a){return pv.hsl(this.h,this.s,this.l,a)},pv.Color.Hsl.prototype.rgb=function(){function f(a){return a>360?a-=360:a<0&&(a+=360),a<60?e+(d-e)*a/60:a<180?d:a<240?e+(d-e)*(240-a)/60:e}function g(a){return Math.round(f(a)*255)}var a=this.h,b=this.s,c=this.l;a%=360,a<0&&(a+=360),b=Math.max(0,Math.min(b,1)),c=Math.max(0,Math.min(c,1));var d=c<=.5?c*(1+b):c+b-c*b,e=2*c-d;return pv.rgb(g(a+120),g(a),g(a-120),this.a)},pv.Color.names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:pv.Color.transparent=pv.rgb(0,0,0,0)},function(){var a=pv.Color.names;for(var b in a)a[b]=pv.color(a[b])}(),pv.colors=function(){var a=pv.Scale.ordinal();return a.range.apply(a,arguments),a},pv.Colors={},pv.Colors.category10=function(){var a=pv.colors("#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf");return a.domain.apply(a,arguments),a},pv.Colors.category20=function(){var a=pv.colors("#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5");return a.domain.apply(a,arguments),a},pv.Colors.category19=function(){var a=pv.colors("#9c9ede","#7375b5","#4a5584","#cedb9c","#b5cf6b","#8ca252","#637939","#e7cb94","#e7ba52","#bd9e39","#8c6d31","#e7969c","#d6616b","#ad494a","#843c39","#de9ed6","#ce6dbd","#a55194","#7b4173");return a.domain.apply(a,arguments),a},pv.ramp=function(a,b){var c=pv.Scale.linear();return c.range.apply(c,arguments),c},pv.Scene=pv.SvgScene={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml",scale:1,events:["DOMMouseScroll","mousewheel","mousedown","mouseup","mouseover","mouseout","mousemove","click","dblclick"],implicit:{svg:{"shape-rendering":"auto","pointer-events":"painted",x:0,y:0,dy:0,"text-anchor":"start",transform:"translate(0,0)",fill:"none","fill-opacity":1,stroke:"none","stroke-opacity":1,"stroke-width":1.5,"stroke-linejoin":"miter"},css:{font:"10px sans-serif"}}},pv.SvgScene.updateAll=function(a){if(a.length&&a[0].reverse&&a.type!="line"&&a.type!="area"){var b=pv.extend(a);for(var c=0,d=a.length-1;d>=0;c++,d--)b[c]=a[d];a=b}this.removeSiblings(this[a.type](a))},pv.SvgScene.create=function(a){return document.createElementNS(this.svg,a)},pv.SvgScene.expect=function(a,b,c,d){if(a){a.tagName=="a"&&(a=a.firstChild);if(a.tagName!=b){var e=this.create(b);a.parentNode.replaceChild(e,a),a=e}}else a=this.create(b);for(var f in c){var g=c[f];g==this.implicit.svg[f]&&(g=null),g==null?a.removeAttribute(f):a.setAttribute(f,g)}for(var f in d){var g=d[f];g==this.implicit.css[f]&&(g=null),g==null?a.style.removeProperty(f):a.style[f]=g}return a},pv.SvgScene.append=function(a,b,c){return a.$scene={scenes:b,index:c},a=this.title(a,b[c]),a.parentNode||b.$g.appendChild(a),a.nextSibling},pv.SvgScene.title=function(a,b){var c=a.parentNode;return c&&c.tagName!="a"&&(c=null),b.title?(c||(c=this.create("a"),a.parentNode&&a.parentNode.replaceChild(c,a),c.appendChild(a)),c.setAttributeNS(this.xlink,"title",b.title),c):(c&&c.parentNode.replaceChild(a,c),a)},pv.SvgScene.dispatch=pv.listener(function(a){var b=a.target.$scene;if(b){var c=a.type;switch(c){case"DOMMouseScroll":c="mousewheel",a.wheel=-480*a.detail;break;case"mousewheel":a.wheel=(window.opera?12:1)*a.wheelDelta}pv.Mark.dispatch(c,b.scenes,b.index)&&a.preventDefault()}}),pv.SvgScene.removeSiblings=function(a){while(a){var b=a.nextSibling;a.parentNode.removeChild(a),a=b}},pv.SvgScene.undefined=function(){},pv.SvgScene.pathBasis=function(){function b(a,b,c,d,e){return{x:a[0]*b.left+a[1]*c.left+a[2]*d.left+a[3]*e.left,y:a[0]*b.top+a[1]*c.top+a[2]*d.top+a[3]*e.top}}var a=[[1/6,2/3,1/6,0],[0,2/3,1/3,0],[0,1/3,2/3,0],[0,1/6,2/3,1/6]],c=function(c,d,e,f){var g=b(a[1],c,d,e,f),h=b(a[2],c,d,e,f),i=b(a[3],c,d,e,f);return"C"+g.x+","+g.y+","+h.x+","+h.y+","+i.x+","+i.y};return c.segment=function(c,d,e,f){var g=b(a[0],c,d,e,f),h=b(a[1],c,d,e,f),i=b(a[2],c,d,e,f),j=b(a[3],c,d,e,f);return"M"+g.x+","+g.y+"C"+h.x+","+h.y+","+i.x+","+i.y+","+j.x+","+j.y},c}(),pv.SvgScene.curveBasis=function(a){if(a.length<=2)return"";var b="",c=a[0],d=c,e=c,f=a[1];b+=this.pathBasis(c,d,e,f);for(var g=2;g<a.length;g++)c=d,d=e,e=f,f=a[g],b+=this.pathBasis(c,d,e,f);return b+=this.pathBasis(d,e,f,f),b+=this.pathBasis(e,f,f,f),b},pv.SvgScene.curveBasisSegments=function(a){if(a.length<=2)return"";var b=[],c=a[0],d=c,e=c,f=a[1],g=this.pathBasis.segment(c,d,e,f);c=d,d=e,e=f,f=a[2],b.push(g+this.pathBasis(c,d,e,f));for(var h=3;h<a.length;h++)c=d,d=e,e=f,f=a[h],b.push(this.pathBasis.segment(c,d,e,f));return b.push(this.pathBasis.segment(d,e,f,f)+this.pathBasis(e,f,f,f)),b},pv.SvgScene.curveHermite=function(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return"";var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;c&&(d+="Q"+(f.left-g.x*2/3)+","+(f.top-g.y*2/3)+","+f.left+","+f.top,e=a[1],i=2);if(b.length>1){h=b[1],f=a[i],i++,d+="C"+(e.left+g.x)+","+(e.top+g.y)+","+(f.left-h.x)+","+(f.top-h.y)+","+f.left+","+f.top;for(var j=2;j<b.length;j++,i++)f=a[i],h=b[j],d+="S"+(f.left-h.x)+","+(f.top-h.y)+","+f.left+","+f.top}if(c){var k=a[i];d+="Q"+(f.left+h.x*2/3)+","+(f.top+h.y*2/3)+","+k.left+","+k.top}return d},pv.SvgScene.curveHermiteSegments=function(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return[];var c=a.length!=b.length,d=[],e=a[0],f=e,g=b[0],h=g,i=1;c&&(f=a[1],d.push("M"+e.left+","+e.top+"Q"+(f.left-h.x*2/3)+","+(f.top-h.y*2/3)+","+f.left+","+f.top),i=2);for(var j=1;j<b.length;j++,i++)e=f,g=h,f=a[i],h=b[j],d.push("M"+e.left+","+e.top+"C"+(e.left+g.x)+","+(e.top+g.y)+","+(f.left-h.x)+","+(f.top-h.y)+","+f.left+","+f.top);if(c){var k=a[i];d.push("M"+f.left+","+f.top+"Q"+(f.left+h.x*2/3)+","+(f.top+h.y*2/3)+","+k.left+","+k.top)}return d},pv.SvgScene.cardinalTangents=function(a,b){var c=[],d=(1-b)/2,e=a[0],f=a[1],g=a[2];for(var h=3;h<a.length;h++)c.push({x:d*(g.left-e.left),y:d*(g.top-e.top)}),e=f,f=g,g=a[h];return c.push({x:d*(g.left-e.left),y:d*(g.top-e.top)}),c},pv.SvgScene.curveCardinal=function(a,b){return a.length<=2?"":this.curveHermite(a,this.cardinalTangents(a,b))},pv.SvgScene.curveCardinalSegments=function(a,b){return a.length<=2?"":this.curveHermiteSegments(a,this.cardinalTangents(a,b))},pv.SvgScene.monotoneTangents=function(a){var b=[],c=[],d=[],e=[],f=0;for(f=0;f<a.length-1;f++)c[f]=(a[f+1].top-a[f].top)/(a[f+1].left-a[f].left);d[0]=c[0],e[0]=a[1].left-a[0].left;for(f=1;f<a.length-1;f++)d[f]=(c[f-1]+c[f])/2,e[f]=(a[f+1].left-a[f-1].left)/2;d[f]=c[f-1],e[f]=a[f].left-a[f-1].left;for(f=0;f<a.length-1;f++)c[f]==0&&(d[f]=0,d[f+1]=0);for(f=0;f<a.length-1;f++){if(Math.abs(d[f])<1e-5||Math.abs(d[f+1])<1e-5)continue;var g=d[f]/c[f],h=d[f+1]/c[f],i=g*g+h*h;if(i>9){var j=3/Math.sqrt(i);d[f]=j*g*c[f],d[f+1]=j*h*c[f]}}var k;for(var l=0;l<a.length;l++)k=1+d[l]*d[l],b.push({x:e[l]/3/k,y:d[l]*e[l]/3/k});return b},pv.SvgScene.curveMonotone=function(a){return a.length<=2?"":this.curveHermite(a,this.monotoneTangents(a))},pv.SvgScene.curveMonotoneSegments=function(a){return a.length<=2?"":this.curveHermiteSegments(a,this.monotoneTangents(a))},pv.SvgScene.area=function(a){function f(b,d){var e=[],f=[];for(var g=d;b<=g;b++,d--){var h=a[b],i=a[d],j=h.left+","+h.top,k=i.left+i.width+","+(i.top+i.height);if(b<g){var l=a[b+1],m=a[d-1];switch(c.interpolate){case"step-before":j+="V"+l.top,k+="H"+(m.left+m.width);break;case"step-after":j+="H"+l.left,k+="V"+(m.top+m.height)}}e.push(j),f.push(k)}return e.concat(f).join("L")}function g(b,d){var e=[],f=[],g,h;for(var i=d;b<=i;b++,d--){var j=a[d];e.push(a[b]),f.push({left:j.left+j.width,top:j.top+j.height})}return c.interpolate=="basis"?(g=pv.SvgScene.curveBasis(e),h=pv.SvgScene.curveBasis(f)):c.interpolate=="cardinal"?(g=pv.SvgScene.curveCardinal(e,c.tension),h=pv.SvgScene.curveCardinal(f,c.tension)):(g=pv.SvgScene.curveMonotone(e),h=pv.SvgScene.curveMonotone(f)),e[0].left+","+e[0].top+g+"L"+f[0].left+","+f[0].top+h}var b=a.$g.firstChild;if(!a.length)return b;var c=a[0];if(c.segmented)return this.areaSegment(a);if(!c.visible)return b;var d=c.fillStyle,e=c.strokeStyle;if(!d.opacity&&!e.opacity)return b;var h=[],i,j;for(var k=0;k<a.length;k++){i=a[k];if(!i.width&&!i.height)continue;for(var l=k+1;l<a.length;l++){j=a[l];if(!j.width&&!j.height)break}k&&c.interpolate!="step-after"&&k--,l<a.length&&c.interpolate!="step-before"&&l++,h.push((l-k>2&&(c.interpolate=="basis"||c.interpolate=="cardinal"||c.interpolate=="monotone")?g:f)(k,l-1)),k=l-1}return h.length?(b=this.expect(b,"path",{"shape-rendering":c.antialias?null:"crispEdges","pointer-events":c.events,cursor:c.cursor,d:"M"+h.join("ZM")+"Z",fill:d.color,"fill-opacity":d.opacity||null,stroke:e.color,"stroke-opacity":e.opacity||null,"stroke-width":e.opacity?c.lineWidth/this.scale:null}),this.append(b,a,0)):b},pv.SvgScene.areaSegment=function(a){var b=a.$g.firstChild,c=a[0],d,e;if(c.interpolate=="basis"||c.interpolate=="cardinal"||c.interpolate=="monotone"){var f=[],g=[];for(var h=0,i=a.length;h<i;h++){var j=a[i-h-1];f.push(a[h]),g.push({left:j.left+j.width,top:j.top+j.height})}c.interpolate=="basis"?(d=this.curveBasisSegments(f),e=this.curveBasisSegments(g)):c.interpolate=="cardinal"?(d=this.curveCardinalSegments(f,c.tension),e=this.curveCardinalSegments(g,c.tension)):(d=this.curveMonotoneSegments(f),e=this.curveMonotoneSegments(g))}for(var h=0,i=a.length-1;h<i;h++){var k=a[h],l=a[h+1];if(!k.visible||!l.visible)continue;var m=k.fillStyle,n=k.strokeStyle;if(!m.opacity&&!n.opacity)continue;var o;if(d){var p=d[h],q="L"+e[i-h-1].substr(1);o=p+q+"Z"}else{var r=k,j=l;switch(k.interpolate){case"step-before":r=l;break;case"step-after":j=k}o="M"+k.left+","+r.top+"L"+l.left+","+j.top+"L"+(l.left+l.width)+","+(j.top+j.height)+"L"+(k.left+k.width)+","+(r.top+r.height)+"Z"}b=this.expect(b,"path",{"shape-rendering":k.antialias?null:"crispEdges","pointer-events":k.events,cursor:k.cursor,d:o,fill:m.color,"fill-opacity":m.opacity||null,stroke:n.color,"stroke-opacity":n.opacity||null,"stroke-width":n.opacity?k.lineWidth/this.scale:null}),b=this.append(b,a,h)}return b},pv.SvgScene.bar=function(a){var b=a.$g.firstChild;for(var c=0;c<a.length;c++){var d=a[c];if(!d.visible)continue;var e=d.fillStyle,f=d.strokeStyle;if(!e.opacity&&!f.opacity)continue;b=this.expect(b,"rect",{"shape-rendering":d.antialias?null:"crispEdges","pointer-events":d.events,cursor:d.cursor,x:d.left,y:d.top,width:Math.max(1e-10,d.width),height:Math.max(1e-10,d.height),fill:e.color,"fill-opacity":e.opacity||null,stroke:f.color,"stroke-opacity":f.opacity||null,"stroke-width":f.opacity?d.lineWidth/this.scale:null}),b=this.append(b,a,c)}return b},pv.SvgScene.dot=function(a){var b=a.$g.firstChild;for(var c=0;c<a.length;c++){var d=a[c];if(!d.visible)continue;var e=d.fillStyle,f=d.strokeStyle;if(!e.opacity&&!f.opacity)continue;var g=d.radius,h=null;switch(d.shape){case"cross":h="M"+ -g+","+ -g+"L"+g+","+g+"M"+g+","+ -g+"L"+ -g+","+g;break;case"triangle":var i=g,j=g*1.1547;h="M0,"+i+"L"+j+","+ -i+" "+ -j+","+ -i+"Z";break;case"diamond":g*=Math.SQRT2,h="M0,"+ -g+"L"+g+",0"+" 0,"+g+" "+ -g+",0"+"Z";break;case"square":h="M"+ -g+","+ -g+"L"+g+","+ -g+" "+g+","+g+" "+ -g+","+g+"Z";break;case"tick":h="M0,0L0,"+ -d.size;break;case"bar":h="M0,"+d.size/2+"L0,"+ -(d.size/2)}var k={"shape-rendering":d.antialias?null:"crispEdges","pointer-events":d.events,cursor:d.cursor,fill:e.color,"fill-opacity":e.opacity||null,stroke:f.color,"stroke-opacity":f.opacity||null,"stroke-width":f.opacity?d.lineWidth/this.scale:null};h?(k.transform="translate("+d.left+","+d.top+")",d.angle&&(k.transform+=" rotate("+180*d.angle/Math.PI+")"),k.d=h,b=this.expect(b,"path",k)):(k.cx=d.left,k.cy=d.top,k.r=g,b=this.expect(b,"circle",k)),b=this.append(b,a,c)}return b},pv.SvgScene.image=function(a){var b=a.$g.firstChild;for(var c=0;c<a.length;c++){var d=a[c];if(!d.visible)continue;b=this.fill(b,a,c);if(d.image){b=this.expect(b,"foreignObject",{cursor:d.cursor,x:d.left,y:d.top,width:d.width,height:d.height});var e=b.firstChild||b.appendChild(document.createElementNS(this.xhtml,"canvas"));e.$scene={scenes:a,index:c},e.style.width=d.width,e.style.height=d.height,e.width=d.imageWidth,e.height=d.imageHeight,e.getContext("2d").putImageData(d.image,0,0)}else b=this.expect(b,"image",{preserveAspectRatio:"none",cursor:d.cursor,x:d.left,y:d.top,width:d.width,height:d.height}),b.setAttributeNS(this.xlink,"href",d.url);b=this.append(b,a,c),b=this.stroke(b,a,c)}return b},pv.SvgScene.label=function(a){var b=a.$g.firstChild;for(var c=0;c<a.length;c++){var d=a[c];if(!d.visible)continue;var e=d.textStyle;if(!e.opacity||!d.text)continue;var f=0,g=0,h=0,i="start";switch(d.textBaseline){case"middle":h=".35em";break;case"top":h=".71em",g=d.textMargin;break;case"bottom":g="-"+d.textMargin}switch(d.textAlign){case"right":i="end",f="-"+d.textMargin;break;case"center":i="middle";break;case"left":f=d.textMargin}b=this.expect(b,"text",{"pointer-events":d.events,cursor:d.cursor,x:f,y:g,dy:h,transform:"translate("+d.left+","+d.top+")"+(d.textAngle?" rotate("+180*d.textAngle/Math.PI+")":"")+(this.scale!=1?" scale("+1/this.scale+")":""),fill:e.color,"fill-opacity":e.opacity||null,"text-anchor":i},{font:d.font,"text-shadow":d.textShadow,"text-decoration":d.textDecoration}),b.firstChild?b.firstChild.nodeValue=d.text:b.appendChild(document.createTextNode(d.text)),b=this.append(b,a,c)}return b},pv.SvgScene.line=function(a){var b=a.$g.firstChild;if(a.length<2)return b;var c=a[0];if(c.segmented)return this.lineSegment(a);if(!c.visible)return b;var d=c.fillStyle,e=c.strokeStyle;if(!d.opacity&&!e.opacity)return b;var f="M"+c.left+","+c.top;if(a.length>2&&(c.interpolate=="basis"||c.interpolate=="cardinal"||c.interpolate=="monotone"))switch(c.interpolate){case"basis":f+=this.curveBasis(a);break;case"cardinal":f+=this.curveCardinal(a,c.tension);break;case"monotone":f+=this.curveMonotone(a)}else for(var g=1;g<a.length;g++)f+=this.pathSegment(a[g-1],a[g]);return b=this.expect(b,"path",{"shape-rendering":c.antialias?null:"crispEdges","pointer-events":c.events,cursor:c.cursor,d:f,fill:d.color,"fill-opacity":d.opacity||null,stroke:e.color,"stroke-opacity":e.opacity||null,"stroke-width":e.opacity?c.lineWidth/this.scale:null,"stroke-linejoin":c.lineJoin}),this.append(b,a,0)},pv.SvgScene.lineSegment=function(a){var b=a.$g.firstChild,c=a[0],d;switch(c.interpolate){case"basis":d=this.curveBasisSegments(a);break;case"cardinal":d=this.curveCardinalSegments(a,c.tension);break;case"monotone":d=this.curveMonotoneSegments(a)}for(var e=0,f=a.length-1;e<f;e++){var g=a[e],h=a[e+1];if(!g.visible||!h.visible)continue;var i=g.strokeStyle,j=pv.Color.transparent;if(!i.opacity)continue;var k;g.interpolate=="linear"&&g.lineJoin=="miter"?(j=i,i=pv.Color.transparent,k=this.pathJoin(a[e-1],g,h,a[e+2])):d?k=d[e]:k="M"+g.left+","+g.top+this.pathSegment(g,h),b=this.expect(b,"path",{"shape-rendering":g.antialias?null:"crispEdges","pointer-events":g.events,cursor:g.cursor,d:k,fill:j.color,"fill-opacity":j.opacity||null,stroke:i.color,"stroke-opacity":i.opacity||null,"stroke-width":i.opacity?g.lineWidth/this.scale:null,"stroke-linejoin":g.lineJoin}),b=this.append(b,a,e)}return b},pv.SvgScene.pathSegment=function(a,b){var c=1;switch(a.interpolate){case"polar-reverse":c=0;case"polar":var d=b.left-a.left,e=b.top-a.top,f=1-a.eccentricity,g=Math.sqrt(d*d+e*e)/(2*f);if(f<=0||f>1)break;return"A"+g+","+g+" 0 0,"+c+" "+b.left+","+b.top;case"step-before":return"V"+b.top+"H"+b.left;case"step-after":return"H"+b.left+"V"+b.top}return"L"+b.left+","+b.top},pv.SvgScene.lineIntersect=function(a,b,c,d){return a.plus(b.times(c.minus(a).dot(d.perp())/b.dot(d.perp())))},pv.SvgScene.pathJoin=function(a,b,c,d){var e=pv.vector(b.left,b.top),f=pv.vector(c.left,c.top),g=f.minus(e),h=g.perp().norm(),i=h.times(b.lineWidth/(2*this.scale)),j=e.plus(i),k=f.plus(i),l=f.minus(i),m=e.minus(i);if(a&&a.visible){var n=e.minus(a.left,a.top).perp().norm().plus(h);m=this.lineIntersect(e,n,m,g),j=this.lineIntersect(e,n,j,g)}if(d&&d.visible){var o=pv.vector(d.left,d.top).minus(f).perp().norm().plus(h);l=this.lineIntersect(f,o,l,g),k=this.lineIntersect(f,o,k,g)}return"M"+j.x+","+j.y+"L"+k.x+","+k.y+" "+l.x+","+l.y+" "+m.x+","+m.y},pv.SvgScene.panel=function(a){var b=a.$g,c=b&&b.firstChild;for(var d=0;d<a.length;d++){var e=a[d];if(!e.visible)continue;if(!a.parent){e.canvas.style.display="inline-block",b&&b.parentNode!=e.canvas&&(b=e.canvas.firstChild,c=b&&b.firstChild);if(!b){b=e.canvas.appendChild(this.create("svg")),b.setAttribute("font-size","10px"),b.setAttribute("font-family","sans-serif"),b.setAttribute("fill","none"),b.setAttribute("stroke","none"),b.setAttribute("stroke-width",1.5);for(var f=0;f<this.events.length;f++)b.addEventListener(this.events[f],this.dispatch,!1);c=b.firstChild}a.$g=b,b.setAttribute("width",e.width+e.left+e.right),b.setAttribute("height",e.height+e.top+e.bottom)}if(e.overflow=="hidden"){var g=pv.id().toString(36),h=this.expect(c,"g",{"clip-path":"url(#"+g+")"});h.parentNode||b.appendChild(h),a.$g=b=h,c=h.firstChild,c=this.expect(c,"clipPath",{id:g});var i=c.firstChild||c.appendChild(this.create("rect"));i.setAttribute("x",e.left),i.setAttribute("y",e.top),i.setAttribute("width",e.width),i.setAttribute("height",e.height),c.parentNode||b.appendChild(c),c=c.nextSibling}c=this.fill(c,a,d);var j=this.scale,k=e.transform,l=e.left+k.x,m=e.top+k.y;this.scale*=k.k;for(var f=0;f<e.children.length;f++)e.children[f].$g=c=this.expect(c,"g",{transform:"translate("+l+","+m+")"+(k.k!=1?" scale("+k.k+")":"")}),this.updateAll(e.children[f]),c.parentNode||b.appendChild(c),c=c.nextSibling;this.scale=j,c=this.stroke(c,a,d),e.overflow=="hidden"&&(a.$g=b=h.parentNode,c=h.nextSibling)}return c},pv.SvgScene.fill=function(a,b,c){var d=b[c],e=d.fillStyle;if(e.opacity||d.events=="all")a=this.expect(a,"rect",{"shape-rendering":d.antialias?null:"crispEdges","pointer-events":d.events,cursor:d.cursor,x:d.left,y:d.top,width:d.width,height:d.height,fill:e.color,"fill-opacity":e.opacity,stroke:null}),a=this.append(a,b,c);return a},pv.SvgScene.stroke=function(a,b,c){var d=b[c],e=d.strokeStyle;if(e.opacity||d.events=="all")a=this.expect(a,"rect",{"shape-rendering":d.antialias?null:"crispEdges","pointer-events":d.events=="all"?"stroke":d.events,cursor:d.cursor,x:d.left,y:d.top,width:Math.max(1e-10,d.width),height:Math.max(1e-10,d.height),fill:null,stroke:e.color,"stroke-opacity":e.opacity,"stroke-width":d.lineWidth/this.scale}),a=this.append(a,b,c);return a},pv.SvgScene.rule=function(a){var b=a.$g.firstChild;for(var c=0;c<a.length;c++){var d=a[c];if(!d.visible)continue;var e=d.strokeStyle;if(!e.opacity)continue;b=this.expect(b,"line",{"shape-rendering":d.antialias?null:"crispEdges","pointer-events":d.events,cursor:d.cursor,x1:d.left,y1:d.top,x2:d.left+d.width,y2:d.top+d.height,stroke:e.color,"stroke-opacity":e.opacity,"stroke-width":d.lineWidth/this.scale}),b=this.append(b,a,c)}return b},pv.SvgScene.wedge=function(a){var b=a.$g.firstChild;for(var c=0;c<a.length;c++){var d=a[c];if(!d.visible)continue;var e=d.fillStyle,f=d.strokeStyle;if(!e.opacity&&!f.opacity)continue;var g=d.innerRadius,h=d.outerRadius,i=Math.abs(d.angle),j;if(i>=2*Math.PI)g?j="M0,"+h+"A"+h+","+h+" 0 1,1 0,"+ -h+"A"+h+","+h+" 0 1,1 0,"+h+"M0,"+g+"A"+g+","+g+" 0 1,1 0,"+ -g+"A"+g+","+g+" 0 1,1 0,"+g+"Z":j="M0,"+h+"A"+h+","+h+" 0 1,1 0,"+ -h+"A"+h+","+h+" 0 1,1 0,"+h+"Z";else{var k=Math.min(d.startAngle,d.endAngle),l=Math.max(d.startAngle,d.endAngle),m=Math.cos(k),n=Math.cos(l),o=Math.sin(k),p=Math.sin(l);g?j="M"+h*m+","+h*o+"A"+h+","+h+" 0 "+(i<Math.PI?"0":"1")+",1 "+h*n+","+h*p+"L"+g*n+","+g*p+"A"+g+","+g+" 0 "+(i<Math.PI?"0":"1")+",0 "+g*m+","+g*o+"Z":j="M"+h*m+","+h*o+"A"+h+","+h+" 0 "+(i<Math.PI?"0":"1")+",1 "+h*n+","+h*p+"L0,0Z"}b=this.expect(b,"path",{"shape-rendering":d.antialias?null:"crispEdges","pointer-events":d.events,cursor:d.cursor,transform:"translate("+d.left+","+d.top+")",d:j,fill:e.color,"fill-rule":"evenodd","fill-opacity":e.opacity||null,stroke:f.color,"stroke-opacity":f.opacity||null,"stroke-width":f.opacity?d.lineWidth/this.scale:null}),b=this.append(b,a,c)}return b},pv.Mark=function(){this.$properties=[],this.$handlers={}},pv.Mark.prototype.properties={},pv.Mark.cast={},pv.Mark.prototype.property=function(a,b){return this.hasOwnProperty("properties")||(this.properties=pv.extend(this.properties)),this.properties[a]=!0,pv.Mark.prototype.propertyMethod(a,!1,pv.Mark.cast[a]=b),this},pv.Mark.prototype.propertyMethod=function(a,b,c){c||(c=pv.Mark.cast[a]),this[a]=function(d){if(b&&this.scene){var e=this.scene.defs;return arguments.length?(e[a]={id:d==null?0:pv.id(),value:d!=null&&c?c(d):d},this):e[a]?e[a].value:null}if(arguments.length){var f=!b<<1|typeof d=="function";return this.propertyValue(a,f&1&&c?function(){var a=d.apply(this,arguments);return a!=null?c(a):null}:d!=null&&c?c(d):d).type=f,this}return this.instance()[a]}},pv.Mark.prototype.propertyValue=function(a,b){var c=this.$properties,d={name:a,id:pv.id(),value:b};for(var e=0;e<c.length;e++)if(c[e].name==a){c.splice(e,1);break}return c.push(d),d},pv.Mark.prototype.property("data").property("visible",Boolean).property("left",Number).property("right",Number).property("top",Number).property("bottom",Number).property("cursor",String).property("title",String).property("reverse",Boolean).property("antialias",Boolean).property("events",String),pv.Mark.prototype.childIndex=-1,pv.Mark.prototype.index=-1,pv.Mark.prototype.scale=1,pv.Mark.prototype.defaults=(new pv.Mark).data(function(a){return[a]}).visible(!0).antialias(!0).events("painted"),pv.Mark.prototype.extend=function(a){return this.proto=a,this},pv.Mark.prototype.add=function(a){return this.parent.add(a).extend(this)},pv.Mark.prototype.def=function(a,b){return this.propertyMethod(a,!0),this[a](arguments.length>1?b:null)},pv.Mark.prototype.anchor=function(a){function d(a){var d=b,e=[];while(!(c=d.scene))a=a.parent,e.push({index:a.index,childIndex:d.childIndex}),d=d.parent;while(e.length){var f=e.pop();c=c[f.index].children[f.childIndex]}if(b.hasOwnProperty("index")){var g=pv.extend(c[b.index]);return g.right=g.top=g.left=g.bottom=0,[g]}return c}var b=this,c;return a||(a="center"),(new pv.Anchor(this)).name(a).def("$mark.anchor",function(){c=this.scene.target=d(this)}).data(function(){return c.map(function(a){return a.data})}).visible(function(){return c[this.index].visible}).left(function(){var a=c[this.index],b=a.width||0;switch(this.name()){case"bottom":case"top":case"center":return a.left+b/2;case"left":return null}return a.left+b}).top(function(){var a=c[this.index],b=a.height||0;switch(this.name()){case"left":case"right":case"center":return a.top+b/2;case"top":return null}return a.top+b}).right(function(){var a=c[this.index];return this.name()=="left"?a.right+(a.width||0):null}).bottom(function(){var a=c[this.index];return this.name()=="top"?a.bottom+(a.height||0):null}).textAlign(function(){switch(this.name()){case"bottom":case"top":case"center":return"center";case"right":return"right"}return"left"}).textBaseline(function(){switch(this.name()){case"right":case"left":case"center":return"middle";case"top":return"top"}return"bottom"})},pv.Mark.prototype.anchorTarget=function(){return this.proto.anchorTarget()},pv.Mark.prototype.margin=function(a){return this.left(a).right(a).top(a).bottom(a)},pv.Mark.prototype.instance=function(a){var b=this.scene||this.parent.instance(-1).children[this.childIndex],c=!arguments.length||this.hasOwnProperty("index")?this.index:a;return b[c<0?b.length-1:c]},pv.Mark.prototype.first=function(){return this.scene[0]},pv.Mark.prototype.last=function(){return this.scene[this.scene.length-1]},pv.Mark.prototype.sibling=function(){return this.index==0?null:this.scene[this.index-1]},pv.Mark.prototype.cousin=function(){var a=this.parent,b=a&&a.sibling();return b&&b.children?b.children[this.childIndex][this.index]:null},pv.Mark.prototype.render=function(){function e(a,d,e){a.scale=e;if(d<c.length){b.unshift(null);if(a.hasOwnProperty("index"))f(a,d,e);else{for(var g=0,h=a.scene.length;g<h;g++)a.index=g,f(a,d,e);delete a.index}b.shift()}else a.build(),pv.Scene.scale=e,pv.Scene.updateAll(a.scene);delete a.scale}function f(a,d,f){var g=a.scene[a.index],h;if(g.visible){var i=c[d],j=a.children[i];for(h=0;h<i;h++)a.children[h].scene=g.children[h];b[0]=g.data,j.scene?e(j,d+1,f*g.transform.k):(j.scene=g.children[i],e(j,d+1,f*g.transform.k),delete j.scene);for(h=0;h<i;h++)delete a.children[h].scene}}var a=this.parent,b=pv.Mark.stack;if(a&&!this.root.scene){this.root.render();return}var c=[];for(var d=this;d.parent;d=d.parent)c.unshift(d.childIndex);this.bind();while(a&&!a.hasOwnProperty("index"))a=a.parent;this.context(a?a.scene:undefined,a?a.index:-1,function(){e(this.root,0,1)})},pv.Mark.stack=[],pv.Mark.prototype.bind=function(){function e(e){do{var f=e.$properties;for(var g=f.length-1;g>=0;g--){var h=f[g];if(!(h.name in a)){a[h.name]=h;switch(h.name){case"data":c=h;break;case"visible":d=h;break;default:b[h.type].push(h)}}}}while(e=e.proto)}var a={},b=[[],[],[],[]],c,d;e(this),e(this.defaults),b[1].reverse(),b[3].reverse();var f=this;do for(var g in f.properties)g in a||b[2].push(a[g]={name:g,type:2,value:null});while(f=f.proto);var h=b[0].concat(b[1]);for(var i=0;i<h.length;i++)this.propertyMethod(h[i].name,!0);this.binds={properties:a,data:c,defs:h,required:[d],optional:pv.blend(b)}},pv.Mark.prototype.build=function(){var a=this.scene,b=pv.Mark.stack;a||(a=this.scene=[],a.mark=this,a.type=this.type,a.childIndex=this.childIndex,this.parent&&(a.parent=this.parent.scene,a.parentIndex=this.parent.index));if(this.binds.defs.length){var c=a.defs;c||(a.defs=c={});for(var d=0;d<this.binds.defs.length;d++){var e=this.binds.defs[d],f=c[e.name];if(!f||e.id>f.id)c[e.name]={id:0,value:e.type&1?e.value.apply(this,b):e.value}}}var g=this.binds.data;g=g.type&1?g.value.apply(this,b):g.value,b.unshift(null),a.length=g.length;for(var d=0;d<g.length;d++){pv.Mark.prototype.index=this.index=d;var h=a[d];h||(a[d]=h={}),h.data=b[0]=g[d],this.buildInstance(h)}return pv.Mark.prototype.index=-1,delete this.index,b.shift(),this},pv.Mark.prototype.buildProperties=function(a,b){for(var c=0,d=b.length;c<d;c++){var e=b[c],f=e.value;switch(e.type){case 0:case 1:f=this.scene.defs[e.name].value;break;case 3:f=f.apply(this,pv.Mark.stack)}a[e.name]=f}},pv.Mark.prototype.buildInstance=function(a){this.buildProperties(a,this.binds.required),a.visible&&(this.buildProperties(a,this.binds.optional),this.buildImplied(a))},pv.Mark.prototype.buildImplied=function(a){var b=a.left,c=a.right,d=a.top,e=a.bottom,f=this.properties,g=f.width?a.width:0,h=f.height?a.height:0,i=this.parent?this.parent.width():g+b+c;g==null?g=i-(c=c||0)-(b=b||0):c==null?c=i-g-(b=b||0):b==null&&(b=i-g-(c=c||0));var j=this.parent?this.parent.height():h+d+e;h==null?h=j-(d=d||0)-(e=e||0):e==null?e=j-h-(d=d||0):d==null&&(d=j-h-(e=e||0)),a.left=b,a.right=c,a.top=d,a.bottom=e,f.width&&(a.width=g),f.height&&(a.height=h),f.textStyle&&!a.textStyle&&(a.textStyle=pv.Color.transparent),f.fillStyle&&!a.fillStyle&&(a.fillStyle=pv.Color.transparent),f.strokeStyle&&!a.strokeStyle&&(a.strokeStyle=pv.Color.transparent)},pv.Mark.prototype.mouse=function(){var a=pv.event.pageX||0,b=pv.event.pageY||0,c=this.root.canvas();do a-=c.offsetLeft,b-=c.offsetTop;while(c=c.offsetParent);var d=pv.Transform.identity,e=this.properties.transform?this:this.parent,f=[];do f.push(e);while(e=e.parent);while(e=f.pop())d=d.translate(e.left(),e.top()).times(e.transform());return d=d.invert(),pv.vector(a*d.k+d.x,b*d.k+d.y)},pv.Mark.prototype.event=function(a,b){return this.$handlers[a]=pv.functor(b),this},pv.Mark.prototype.context=function(a,b,c){function h(a,b){pv.Mark.scene=a,d.index=b;if(!a)return;var c=a.mark,f=c,g=[];do g.push(f),e.push(a[b].data),f.index=b,f.scene=a,b=a.parentIndex,a=a.parent;while(f=f.parent);for(var h=g.length-1,i=1;h>0;h--)f=g[h],f.scale=i,i*=f.scene[f.index].transform.k;if(c.children)for(var h=0,j=c.children.length;h<j;h++)f=c.children[h],f.scene=c.scene[c.index].children[h],f.scale=i}function i(a,b){if(!a)return;var c=a.mark,d;if(c.children)for(var f=0,g=c.children.length;f<g;f++)d=c.children[f],delete d.scene,delete d.scale;d=c;do e.pop(),d.parent&&(delete d.scene,delete d.scale),delete d.index;while(d=d.parent)}var d=pv.Mark.prototype,e=pv.Mark.stack,f=pv.Mark.scene,g=d.index;i(f,g),h(a,b);try{c.apply(this,e)}finally{i(a,b),h(f,g)}},pv.Mark.dispatch=function(a,b,c){var d=b.mark,e=b.parent,f=d.$handlers[a];return f?(d.context(b,c,function(){d=f.apply(d,pv.Mark.stack),d&&d.render&&d.render()}),!0):e&&pv.Mark.dispatch(a,e,b.parentIndex)},pv.Anchor=function(a){pv.Mark.call(this),this.target=a,this.parent=a.parent},pv.Anchor.prototype=pv.extend(pv.Mark).property("name",String),pv.Anchor.prototype.anchorTarget=function(){return this.target},pv.Area=function(){pv.Mark.call(this)},pv.Area.prototype=pv.extend(pv.Mark).property("width",Number).property("height",Number).property("lineWidth",Number).property("strokeStyle",pv.color).property("fillStyle",pv.color).property("segmented",Boolean).property("interpolate",String).property("tension",Number),pv.Area.prototype.type="area",pv.Area.prototype.defaults=(new pv.Area).extend(pv.Mark.prototype.defaults).lineWidth(1.5).fillStyle(pv.Colors.category20().by(pv.parent)).interpolate("linear").tension(.7),pv.Area.prototype.buildImplied=function(a){a.height==null&&(a.height=0),a.width==null&&(a.width=0),pv.Mark.prototype.buildImplied.call(this,a)},pv.Area.fixed={lineWidth:1,lineJoin:1,strokeStyle:1,fillStyle:1,segmented:1,interpolate:1,tension:1},pv.Area.prototype.bind=function(){pv.Mark.prototype.bind.call(this);var a=this.binds,b=a.required,c=a.optional;for(var d=0,e=c.length;d<e;d++){var f=c[d];f.fixed=f.name in pv.Area.fixed,f.name=="segmented"&&(b.push(f),c.splice(d,1),d--,e--)}this.binds.$required=b,this.binds.$optional=c},pv.Area.prototype.buildInstance=function(a){var b=this.binds;if(this.index){var c=b.fixed;if(!c){c=b.fixed=[];function d(a){return!a.fixed||(c.push(a),!1)}b.required=b.required.filter(d),this.scene[0].segmented||(b.optional=b.optional.filter(d))}for(var e=0,f=c.length;e<f;e++){var g=c[e].name;a[g]=this.scene[0][g]}}else b.required=b.$required,b.optional=b.$optional,b.fixed=null;pv.Mark.prototype.buildInstance.call(this,a)},pv.Area.prototype.anchor=function(a){var b;return pv.Mark.prototype.anchor.call(this,a).def("$area.anchor",function(){b=this.scene.target}).interpolate(function(){return b[this.index].interpolate}).eccentricity(function(){return b[this.index].eccentricity}).tension(function(){return b[this.index].tension})},pv.Bar=function(){pv.Mark.call(this)},pv.Bar.prototype=pv.extend(pv.Mark).property("width",Number).property("height",Number).property("lineWidth",Number).property("strokeStyle",pv.color).property("fillStyle",pv.color),pv.Bar.prototype.type="bar",pv.Bar.prototype.defaults=(new pv.Bar).extend(pv.Mark.prototype.defaults).lineWidth(1.5).fillStyle(pv.Colors.category20().by(pv.parent)),pv.Dot=function(){pv.Mark.call(this)},pv.Dot.prototype=pv.extend(pv.Mark).property("size",Number).property("radius",Number).property("shape",String).property("angle",Number).property("lineWidth",Number).property("strokeStyle",pv.color).property("fillStyle",pv.color),pv.Dot.prototype.type="dot",pv.Dot.prototype.defaults=(new pv.Dot).extend(pv.Mark.prototype.defaults).size(20).shape("circle").lineWidth(1.5).strokeStyle(pv.Colors.category10().by(pv.parent)),pv.Dot.prototype.anchor=function(a){var b;return pv.Mark.prototype.anchor.call(this,a).def("$wedge.anchor",function(){b=this.scene.target}).left(function(){var a=b[this.index];switch(this.name()){case"bottom":case"top":case"center":return a.left;case"left":return null}return a.left+a.radius}).right(function(){var a=b[this.index];return this.name()=="left"?a.right+a.radius:null}).top(function(){var a=b[this.index];switch(this.name()){case"left":case"right":case"center":return a.top;case"top":return null}return a.top+a.radius}).bottom(function(){var a=b[this.index];return this.name()=="top"?a.bottom+a.radius:null}).textAlign(function(){switch(this.name()){case"left":return"right";case"bottom":case"top":case"center":return"center"}return"left"}).textBaseline(function(){switch(this.name()){case"right":case"left":case"center":return"middle";case"bottom":return"top"}return"bottom"})},pv.Dot.prototype.buildImplied=function(a){a.radius==null?a.radius=Math.sqrt(a.size):a.size==null&&(a.size=a.radius*a.radius),pv.Mark.prototype.buildImplied.call(this,a)},pv.Label=function(){pv.Mark.call(this)},pv.Label.prototype=pv.extend(pv.Mark).property("text",String).property("font",String).property("textAngle",Number).property("textStyle",pv.color).property("textAlign",String).property("textBaseline",String).property("textMargin",Number).property("textDecoration",String).property("textShadow",String),pv.Label.prototype.type="label",pv.Label.prototype.defaults=(new pv.Label).extend(pv.Mark.prototype.defaults).events("none").text(pv.identity).font("10px sans-serif").textAngle(0).textStyle("black").textAlign("left").textBaseline("bottom").textMargin(3),pv.Line=function(){pv.Mark.call(this)},pv.Line.prototype=pv.extend(pv.Mark).property("lineWidth",Number).property("lineJoin",String).property("strokeStyle",pv.color).property("fillStyle",pv.color).property("segmented",Boolean).property("interpolate",String).property("eccentricity",Number).property("tension",Number),pv.Line.prototype.type="line",pv.Line.prototype.defaults=(new pv.Line).extend(pv.Mark.prototype.defaults).lineJoin("miter").lineWidth(1.5).strokeStyle(pv.Colors.category10().by(pv.parent)).interpolate("linear").eccentricity(0).tension(.7),pv.Line.prototype.bind=pv.Area.prototype.bind,pv.Line.prototype.buildInstance=pv.Area.prototype.buildInstance,pv.Line.prototype.anchor=function(a){return pv.Area.prototype.anchor.call(this,a).textAlign(function(a){switch(this.name()){case"left":return"right";case"bottom":case"top":case"center":return"center";case"right":return"left"}}).textBaseline(function(a){switch(this.name()){case"right":case"left":case"center":return"middle";case"top":return"bottom";case"bottom":return"top"}})},pv.Rule=function(){pv.Mark.call(this)},pv.Rule.prototype=pv.extend(pv.Mark).property("width",Number).property("height",Number).property("lineWidth",Number).property("strokeStyle",pv.color),pv.Rule.prototype.type="rule",pv.Rule.prototype.defaults=(new pv.Rule).extend(pv.Mark.prototype.defaults).lineWidth(1).strokeStyle("black").antialias(!1),pv.Rule.prototype.anchor=pv.Line.prototype.anchor,pv.Rule.prototype.buildImplied=function(a){var b=a.left,c=a.right,d=a.top,e=a.bottom;a.width!=null||b==null&&c==null||c!=null&&b!=null?a.height=0:a.width=0,pv.Mark.prototype.buildImplied.call(this,a)},pv.Panel=function(){pv.Bar.call(this),this.children=[],this.root=this,this.$dom=pv.$&&pv.$.s},pv.Panel.prototype=pv.extend(pv.Bar).property("transform").property("overflow",String).property("canvas",function(a){return typeof a=="string"?document.getElementById(a):a}),pv.Panel.prototype.type="panel",pv.Panel.prototype.defaults=(new pv.Panel).extend(pv.Bar.prototype.defaults).fillStyle(null).overflow("visible"),pv.Panel.prototype.anchor=function(a){var b=pv.Bar.prototype.anchor.call(this,a);return b.parent=this,b},pv.Panel.prototype.add=function(a){var b=new a;return b.parent=this,b.root=this.root,b.childIndex=this.children.length,this.children.push(b),b},pv.Panel.prototype.bind=function(){pv.Mark.prototype.bind.call(this);for(var a=0;a<this.children.length;a++)this.children[a].bind()},pv.Panel.prototype.buildInstance=function(a){pv.Bar.prototype.buildInstance.call(this,a);if(!a.visible)return;a.children||(a.children=[]);var b=this.scale*a.transform.k,c,d=this.children.length;pv.Mark.prototype.index=-1;for(var e=0;e<d;e++)c=this.children[e],c.scene=a.children[e],c.scale=b,c.build();for(var e=0;e<d;e++)c=this.children[e],a.children[e]=c.scene,delete c.scene,delete c.scale;a.children.length=d},pv.Panel.prototype.buildImplied=function(a){if(!this.parent){var b=a.canvas;if(b){if(b.$panel!=this){b.$panel=this;while(b.lastChild)b.removeChild(b.lastChild)}var c,d;a.width==null&&(c=parseFloat(pv.css(b,"width")),a.width=c-a.left-a.right),a.height==null&&(d=parseFloat(pv.css(b,"height")),a.height=d-a.top-a.bottom)}else{var e=this.$canvas||(this.$canvas=[]);if(!(b=e[this.index])){b=e[this.index]=document.createElement("span");if(this.$dom)this.$dom.parentNode.insertBefore(b,this.$dom);else{var f=document.body;while(f.lastChild&&f.lastChild.tagName)f=f.lastChild;f!=document.body&&(f=f.parentNode),f.appendChild(b)}}}a.canvas=b}a.transform||(a.transform=pv.Transform.identity),pv.Mark.prototype.buildImplied.call(this,a)},pv.Image=function(){pv.Bar.call(this)},pv.Image.prototype=pv.extend(pv.Bar).property("url",String).property("imageWidth",Number).property("imageHeight",Number),pv.Image.prototype.type="image",pv.Image.prototype.defaults=(new pv.Image).extend(pv.Bar.prototype.defaults).fillStyle(null),pv.Image.prototype.image=function(a){return this.$image=function(){var b=a.apply(this,arguments);return b==null?pv.Color.transparent:typeof b=="string"?pv.color(b):b},this},pv.Image.prototype.bind=function(){pv.Bar.prototype.bind.call(this);var a=this.binds,b=this;do a.image=b.$image;while(!a.image&&(b=b.proto))},pv.Image.prototype.buildImplied=function(a){pv.Bar.prototype.buildImplied.call(this,a);if(!a.visible)return;a.imageWidth==null&&(a.imageWidth=a.width),a.imageHeight==null&&(a.imageHeight=a.height);if(a.url==null&&this.binds.image){var b=this.$canvas||(this.$canvas=document.createElement("canvas")),c=b.getContext("2d"),d=a.imageWidth,e=a.imageHeight,f=pv.Mark.stack,g;b.width=d,b.height=e,g=(a.image=c.createImageData(d,e)).data,f.unshift(null,null);for(var h=0,i=0;h<e;h++){f[1]=h;for(var j=0;j<d;j++){f[0]=j;var k=this.binds.image.apply(this,f);g[i++]=k.r,g[i++]=k.g,g[i++]=k.b,g[i++]=255*k.a}}f.splice(0,2)}},pv.Wedge=function(){pv.Mark.call(this)},pv.Wedge.prototype=pv.extend(pv.Mark).property("startAngle",Number).property("endAngle",Number).property("angle",Number).property("innerRadius",Number).property("outerRadius",Number).property("lineWidth",Number).property("strokeStyle",pv.color).property("fillStyle",pv.color),pv.Wedge.prototype.type="wedge",pv.Wedge.prototype.defaults=(new pv.Wedge).extend(pv.Mark.prototype.defaults).startAngle(function(){var a=this.sibling();return a?a.endAngle:-Math.PI/2}).innerRadius(0).lineWidth(1.5).strokeStyle(null).fillStyle(pv.Colors.category20().by(pv.index)),pv.Wedge.prototype.midRadius=function(){return(this.innerRadius()+this.outerRadius())/2},pv.Wedge.prototype.midAngle=function(){return(this.startAngle()+this.endAngle())/2},pv.Wedge.prototype.anchor=function(a){function b(a){return a.innerRadius||a.angle<2*Math.PI}function c(a){return(a.innerRadius+a.outerRadius)/2}function d(a){return(a.startAngle+a.endAngle)/2}var e;return pv.Mark.prototype.anchor.call(this,a).def("$wedge.anchor",function(){e=this.scene.target}).left(function(){var a=e[this.index];if(b(a))switch(this.name()){case"outer":return a.left+a.outerRadius*Math.cos(d(a));case"inner":return a.left+a.innerRadius*Math.cos(d(a));case"start":return a.left+c(a)*Math.cos(a.startAngle);case"center":return a.left+c(a)*Math.cos(d(a));case"end":return a.left+c(a)*Math.cos(a.endAngle)}return a.left}).top(function(){var a=e[this.index];if(b(a))switch(this.name()){case"outer":return a.top+a.outerRadius*Math.sin(d(a));case"inner":return a.top+a.innerRadius*Math.sin(d(a));case"start":return a.top+c(a)*Math.sin(a.startAngle);case"center":return a.top+c(a)*Math.sin(d(a));case"end":return a.top+c(a)*Math.sin(a.endAngle)}return a.top}).textAlign(function(){var a=e[this.index];if(b(a))switch(this.name()){case"outer":return pv.Wedge.upright(d(a))?"right":"left";case"inner":return pv.Wedge.upright(d(a))?"left":"right"}return"center"}).textBaseline(function(){var a=e[this.index];if(b(a))switch(this.name()){case"start":return pv.Wedge.upright(a.startAngle)?"top":"bottom";case"end":return pv.Wedge.upright(a.endAngle)?"bottom":"top"}return"middle"}).textAngle(function(){var a=e[this.index],c=0;if(b(a))switch(this.name()){case"center":case"inner":case"outer":c=d(a);break;case"start":c=a.startAngle;break;case"end":c=a.endAngle}return pv.Wedge.upright(c)?c:c+Math.PI})},pv.Wedge.upright=function(a){return a%=2*Math.PI,a=a<0?2*Math.PI+a:a,a<Math.PI/2||a>=3*Math.PI/2},pv.Wedge.prototype.buildImplied=function(a){a.angle==null?a.angle=a.endAngle-a.startAngle:a.endAngle==null&&(a.endAngle=a.startAngle+a.angle),pv.Mark.prototype.buildImplied.call(this,a)},pv.simulation=function(a){return new pv.Simulation(a)},pv.Simulation=function(a){for(var b=0;b<a.length;b++)this.particle(a[b])},pv.Simulation.prototype.particle=function(a){return a.next=this.particles,isNaN(a.px)&&(a.px=a.x),isNaN(a.py)&&(a.py=a.y),isNaN(a.fx)&&(a.fx=0),isNaN(a.fy)&&(a.fy=0),this.particles=a,this},pv.Simulation.prototype.force=function(a){return a.next=this.forces,this.forces=a,this},pv.Simulation.prototype.constraint=function(a){return a.next=this.constraints,this.constraints=a,this},pv.Simulation.prototype.stabilize=function(a){var b;arguments.length||(a=3);for(var c=0;c<a;c++){var d=new pv.Quadtree(this.particles);for(b=this.constraints;b;b=b.next)b.apply(this.particles,d)}for(var e=this.particles;e;e=e.next)e.px=e.x,e.py=e.y;return this},pv.Simulation.prototype.step=function(){var a,b,c;for(a=this.particles;a;a=a.next){var d=a.px,e=a.py;a.px=a.x,a.py=a.y,a.x+=a.vx=a.x-d+a.fx,a.y+=a.vy=a.y-e+a.fy}var f=new pv.Quadtree(this.particles);for(c=this.constraints;c;c=c.next)c.apply(this.particles,f);for(a=this.particles;a;a=a.next)a.fx=a.fy=0;for(b=this.forces;b;b=b.next)b.apply(this.particles,f)},pv.Quadtree=function(a){function i(a,b,c,d,e,f){if(isNaN(b.x)||isNaN(b.y))return;if(a.leaf)if(a.p)if(Math.abs(a.p.x-b.x)+Math.abs(a.p.y-b.y)<.01)j(a,b,c,d,e,f);else{var g=a.p;a.p=null,j(a,g,c,d,e,f),j(a,b,c,d,e,f)}else a.p=b;else j(a,b,c,d,e,f)}function j(a,b,c,d,e,f){var g=(c+e)*.5,h=(d+f)*.5,j=b.x>=g,k=b.y>=h;a.leaf=!1;switch((k<<1)+j){case 0:a=a.c1||(a.c1=new pv.Quadtree.Node);break;case 1:a=a.c2||(a.c2=new pv.Quadtree.Node);break;case 2:a=a.c3||(a.c3=new pv.Quadtree.Node);break;case 3:a=a.c4||(a.c4=new pv.Quadtree.Node)}j?c=g:e=g,k?d=h:f=h,i(a,b,c,d,e,f)}var b,c=Number.POSITIVE_INFINITY,d=c,e=Number.NEGATIVE_INFINITY,f=e;for(b=a;b;b=b.next)b.x<c&&(c=b.x),b.y<d&&(d=b.y),b.x>e&&(e=b.x),b.y>f&&(f=b.y);var g=e-c,h=f-d;g>h?f=d+g:e=c+h,this.xMin=c,this.yMin=d,this.xMax=e,this.yMax=f,this.root=new pv.Quadtree.Node;for(b=a;b;b=b.next)i(this.root,b,c,d,e,f)},pv.Quadtree.Node=function(){this.leaf=!0,this.c1=null,this.c2=null,this.c3=null,this.c4=null,this.p=null},pv.Force={},pv.Force.charge=function(a){function h(b){function e(a){h(a),b.cn+=a.cn,c+=a.cn*a.cx,d+=a.cn*a.cy}var c=0,d=0;b.cn=0,b.leaf||(b.c1&&e(b.c1),b.c2&&e(b.c2),b.c3&&e(b.c3),b.c4&&e(b.c4)),b.p&&(b.cn+=a,c+=a*b.p.x,d+=a*b.p.y),b.cx=c/b.cn,b.cy=d/b.cn}function i(b,d,g,h,j,l){var m=b.cx-d.x,n=b.cy-d.y,o=1/Math.sqrt(m*m+n*n);if(b.leaf&&b.p!=d||(j-g)*o<f){if(o<e)return;o>c&&(o=c);var p=b.cn*o*o*o,q=m*p,r=n*p;d.fx+=q,d.fy+=r}else if(!b.leaf){var s=(g+j)*.5,t=(h+l)*.5;b.c1&&i(b.c1,d,g,h,s,t),b.c2&&i(b.c2,d,s,h,j,t),b.c3&&i(b.c3,d,g,t,s,l),b.c4&&i(b.c4,d,s,t,j,l);if(o<e)return;o>c&&(o=c);if(b.p&&b.p!=d){var p=a*o*o*o,q=m*p,r=n*p;d.fx+=q,d.fy+=r}}}var b=2,c=1/b,d=500,e=1/d,f=.9,g={};return arguments.length||(a=-40),g.constant=function(b){return arguments.length?(a=Number(b),g):a},g.domain=function(a,f){return arguments.length?(b=Number(a),c=1/b,d=Number(f),e=1/d,g):[b,d]},g.theta=function(a){return arguments.length?(f=Number(a),g):f},g.apply=function(a,b){h(b.root);for(var c=a;c;c=c.next)i(b.root,c,b.xMin,b.yMin,b.xMax,b.yMax)},g},pv.Force.drag=function(a){var b={};return arguments.length||(a=.1),b.constant=function(c){return arguments.length?(a=c,b):a},b.apply=function(b){if(a)for(var c=b;c;c=c.next)c.fx-=a*c.vx,c.fy-=a*c.vy},b},pv.Force.spring=function(a){var b=.1,c=20,d,e,f={};return arguments.length||(a=.1),f.links=function(a){return arguments.length?(d=a,e=a.map(function(a){return 1/Math.sqrt(Math.max(a.sourceNode.linkDegree,a.targetNode.linkDegree))}),f):d},f.constant=function(b){return arguments.length?(a=Number(b),f):a},f.damping=function(a){return arguments.length?(b=Number(a),f):b},f.length=function(a){return arguments.length?(c=Number(a),f):c},f.apply=function(f){for(var g=0;g<d.length;g++){var h=d[g].sourceNode,i=d[g].targetNode,j=h.x-i.x,m=h.y-i.y,n=Math.sqrt(j*j+m*m),o=n?1/n:1,p=a*e[g],q=b*e[g],r=(p*(n-c)+q*(j*(h.vx-i.vx)+m*(h.vy-i.vy))*o)*o,s=-r*(n?j:.01*(.5-Math.random())),t=-r*(n?m:.01*(.5-Math.random()));h.fx+=s,h.fy+=t,i.fx-=s,i.fy-=t}},f},pv.Constraint={},pv.Constraint.collision=function(a){function i(b,h,j,k,l,m){if(!b.leaf){var n=(j+l)*.5,o=(k+m)*.5,p=o>e,q=o<g,r=n>d,s=n<f;p&&(b.c1&&r&&i(b.c1,h,j,k,n,o),b.c2&&s&&i(b.c2,h,n,k,l,o)),q&&(b.c3&&r&&i(b.c3,h,j,o,n,m),b.c4&&s&&i(b.c4,h,n,o,l,m))}if(b.p&&b.p!=h){var t=h.x-b.p.x,u=h.y-b.p.y,v=Math.sqrt(t*t+u*u),w=c+a(b.p);if(v<w){var x=(v-w)/v*.5;t*=x,u*=x,h.x-=t,h.y-=u,b.p.x+=t,b.p.y+=u}}}var b=1,c,d,e,f,g,h={};return arguments.length||(c=10),h.repeat=function(a){return arguments.length?(b=Number(a),h):b},h.apply=function(h,j){var k,l,m=-Infinity;for(k=h;k;k=k.next)l=a(k),l>m&&(m=l);for(var o=0;o<b;o++)for(k=h;k;k=k.next)l=(c=a(k))+m,d=k.x-l,f=k.x+l,e=k.y-l,g=k.y+l,i(j.root,k,j.xMin,j.yMin,j.xMax,j.yMax)},h},pv.Constraint.position=function(a){var b=1,c={};return arguments.length||(a=function(a){return a.fix}),c.alpha=function(a){return arguments.length?(b=Number(a),c):b},c.apply=function(c){for(var d=c;d;d=d.next){var e=a(d);e&&(d.x+=(e.x-d.x)*b,d.y+=(e.y-d.y)*b,d.fx=d.fy=d.vx=d.vy=0)}},c},pv.Constraint.bound=function(){var a={},b,c;return a.x=function(a,c){return arguments.length?(b={min:Math.min(a,c),max:Math.max(a,c)},this):b},a.y=function(a,b){return arguments.length?(c={min:Math.min(a,b),max:Math.max(a,b)},this):c},a.apply=function(a){if(b)for(var d=a;d;d=d.next)d.x=d.x<b.min?b.min:d.x>b.max?b.max:d.x;if(c)for(var d=a;d;d=d.next)d.y=d.y<c.min?c.min:d.y>c.max?c.max:d.y},a},pv.Layout=function(){pv.Panel.call(this)},pv.Layout.prototype=pv.extend(pv.Panel),pv.Layout.prototype.property=function(a,b){return this.hasOwnProperty("properties")||(this.properties=pv.extend(this.properties)),this.properties[a]=!0,this.propertyMethod(a,!1,pv.Mark.cast[a]=b),this},pv.Layout.Network=function(){pv.Layout.call(this);var a=this;this.$id=pv.id(),(this.node=(new pv.Mark).data(function(){return a.nodes()}).strokeStyle("#1f77b4").fillStyle("#fff").left(function(a){return a.x}).top(function(a){return a.y})).parent=this,this.link=(new pv.Mark).extend(this.node).data(function(a){return[a.sourceNode,a.targetNode]}).fillStyle(null).lineWidth(function(a,b){return b.linkValue*1.5}).strokeStyle("rgba(0,0,0,.2)"),this.link.add=function(b){return a.add(pv.Panel).data(function(){return a.links()}).add(b).extend(this)},(this.label=(new pv.Mark).extend(this.node).textMargin(7).textBaseline("middle").text(function(a){return a.nodeName||a.nodeValue}).textAngle(function(a){var b=a.midAngle;return pv.Wedge.upright(b)?b:b+Math.PI}).textAlign(function(a){return pv.Wedge.upright(a.midAngle)?"left":"right"})).parent=this},pv.Layout.Network.prototype=pv.extend(pv.Layout).property("nodes",function(a){return a.map(function(a,b){return typeof a!="object"&&(a={nodeValue:a}),a.index=b,a.linkDegree=0,a})}).property("links",function(a){return a.map(function(a){return isNaN(a.linkValue)&&(a.linkValue=isNaN(a.value)?1:a.value),a})}),pv.Layout.Network.prototype.reset=function(){return this.$id=pv.id(),this},pv.Layout.Network.prototype.buildProperties=function(a,b){(a.$id||0)<this.$id&&pv.Layout.prototype.buildProperties.call(this,a,b)},pv.Layout.Network.prototype.buildImplied=function(a){pv.Layout.prototype.buildImplied.call(this,a);if(a.$id>=this.$id)return!0;a.$id=this.$id,a.links.forEach(function(b){var c=b.linkValue;(b.sourceNode||(b.sourceNode=a.nodes[b.source])).linkDegree+=c,(b.targetNode||(b.targetNode=a.nodes[b.target])).linkDegree+=c})},pv.Layout.Hierarchy=function(){pv.Layout.Network.call(this),this.link.strokeStyle("#ccc")},pv.Layout.Hierarchy.prototype=pv.extend(pv.Layout.Network),pv.Layout.Hierarchy.prototype.buildImplied=function(a){a.links||(a.links=pv.Layout.Hierarchy.links.call(this)),pv.Layout.Network.prototype.buildImplied.call(this,a)},pv.Layout.Hierarchy.links=function(){return this.nodes().filter(function(a){return a.parentNode}).map(function(a){return{sourceNode:a,targetNode:a.parentNode,linkValue:1}})},pv.Layout.Hierarchy.NodeLink={buildImplied:function(a){function i(a){return a.parentNode?a.depth*(h-g)+g:0}function j(a){return a.parentNode?(a.breadth-.25)*2*Math.PI:0}function k(a){switch(c){case"left":return a.depth*e;case"right":return e-a.depth*e;case"top":return a.breadth*e;case"bottom":return e-a.breadth*e;case"radial":return e/2+i(a)*Math.cos(a.midAngle)}}function l(a){switch(c){case"left":return a.breadth*f;case"right":return f-a.breadth*f;case"top":return a.depth*f;case"bottom":return f-a.depth*f;case"radial":return f/2+i(a)*Math.sin(a.midAngle)}}var b=a.nodes,c=a.orient,d=/^(top|bottom)$/.test(c),e=a.width,f=a.height;if(c=="radial"){var g=a.innerRadius,h=a.outerRadius;g==null&&(g=0),h==null&&(h=Math.min(e,f)/2)}for(var m=0;m<b.length;m++){var n=b[m];n.midAngle=c=="radial"?j(n):d?Math.PI/2:0,n.x=k(n),n.y=l(n),n.firstChild&&(n.midAngle+=Math.PI)}}},pv.Layout.Hierarchy.Fill={constructor:function(){this.node.strokeStyle("#fff").fillStyle("#ccc").width(function(a){return a.dx}).height(function(a){return a.dy}).innerRadius(function(a){return a.innerRadius}).outerRadius(function(a){return a.outerRadius}).startAngle(function(a){return a.startAngle}).angle(function(a){return a.angle}),this.label.textAlign("center").left(function(a){return a.x+a.dx/2}).top(function(a){return a.y+a.dy/2}),delete this.link},buildImplied:function(a){function j(a,b){return(a+b)/(1+b)}function k(a){switch(c){case"left":return j(a.minDepth,g)*e;case"right":return(1-j(a.maxDepth,g))*e;case"top":return a.minBreadth*e;case"bottom":return(1-a.maxBreadth)*e;case"radial":return e/2}}function l(a){switch(c){case"left":return a.minBreadth*f;case"right":return(1-a.maxBreadth)*f;case"top":return j(a.minDepth,g)*f;case"bottom":return(1-j(a.maxDepth,g))*f;case"radial":return f/2}}function m(a){switch(c){case"left":case"right":return(a.maxDepth-a.minDepth)/(1+g)*e;case"top":case"bottom":return(a.maxBreadth-a.minBreadth)*e;case"radial":return a.parentNode?(a.innerRadius+a.outerRadius)*Math.cos(a.midAngle):0}}function n(a){switch(c){case"left":case"right":return(a.maxBreadth-a.minBreadth)*f;case"top":case"bottom":return(a.maxDepth-a.minDepth)/(1+g)*f;case"radial":return a.parentNode?(a.innerRadius+a.outerRadius)*Math.sin(a.midAngle):0}}function o(a){return Math.max(0,j(a.minDepth,g/2))*(i-h)+h}function p(a){return j(a.maxDepth,g/2)*(i-h)+h}function q(a){return(a.parentNode?a.minBreadth-.25:0)*2*Math.PI}function r(a){return(a.parentNode?a.maxBreadth-a.minBreadth:1)*2*Math.PI}var b=a.nodes,c=a.orient,d=/^(top|bottom)$/.test(c),e=a.width,f=a.height,g=-b[0].minDepth;if(c=="radial"){var h=a.innerRadius,i=a.outerRadius;h==null&&(h=0),h&&(g*=2),i==null&&(i=Math.min(e,f)/2)}for(var s=0;s<b.length;s++){var t=b[s];t.x=k(t),t.y=l(t),c=="radial"?(t.innerRadius=o(t),t.outerRadius=p(t),t.startAngle=q(t),t.angle=r(t),t.midAngle=t.startAngle+t.angle/2):t.midAngle=d?-Math.PI/2:0,t.dx=m(t),t.dy=n(t)}}},pv.Layout.Grid=function(){pv.Layout.call(this);var a=this;(this.cell=(new pv.Mark).data(function(){return a.scene[a.index].$grid}).width(function(){return a.width()/a.cols()}).height(function(){return a.height()/a.rows()}).left(function(){return this.width()*(this.index%a.cols())}).top(function(){return this.height()*Math.floor(this.index/a.cols())})).parent=this},pv.Layout.Grid.prototype=pv.extend(pv.Layout).property("rows").property("cols"),pv.Layout.Grid.prototype.defaults=(new pv.Layout.Grid).extend(pv.Layout.prototype.defaults).rows(1).cols(1),pv.Layout.Grid.prototype.buildImplied=function(a){pv.Layout.prototype.buildImplied.call(this,a);var b=a.rows,c=a.cols;typeof c=="object"&&(b=pv.transpose(c)),typeof b=="object"?(a.$grid=pv.blend(b),a.rows=b.length,a.cols=b[0]?b[0].length:0):a.$grid=pv.repeat([a.data],b*c)},pv.Layout.Stack=function(){function f(a){return function(){return c[a](this.parent.index,this.index)}}pv.Layout.call(this);var a=this,b=function(){return null},c={t:b,l:b,r:b,b:b,w:b,h:b},d,e=a.buildImplied;this.buildImplied=function(a){e.call(this,a);var f=a.layers,g=f.length,h,i=a.orient,j=/^(top|bottom)\b/.test(i),k=this.parent[j?"height":"width"](),l=[],m=[],n=[],o=pv.Mark.stack,p={parent:{parent:this}};o.unshift(null),d=[];for(var q=0;q<g;q++){n[q]=[],m[q]=[],p.parent.index=q,o[0]=f[q],d[q]=this.$values.apply(p.parent,o),q||(h=d[q].length),o.unshift(null);for(var r=0;r<h;r++)o[0]=d[q][r],p.index=r,q||(l[r]=this.$x.apply(p,o)),n[q][r]=this.$y.apply(p,o);o.shift()}o.shift();var s;switch(a.order){case"inside-out":var t=n.map(function(a){return pv.max.index(a)}),u=pv.range(g).sort(function(a,b){return t[a]-t[b]}),v=n.map(function(a){return pv.sum(a)}),w=0,x=0,y=[],z=[];for(var q=0;q<g;q++){var r=u[q];w<x?(w+=v[r],y.push(r)):(x+=v[r],z.push(r))}s=z.reverse().concat(y);break;case"reverse":s=pv.range(g-1,-1,-1);break;default:s=pv.range(g)}switch(a.offset){case"silohouette":for(var r=0;r<h;r++){var p=0;for(var q=0;q<g;q++)p+=n[q][r];m[s[0]][r]=(k-p)/2}break;case"wiggle":var p=0;for(var q=0;q<g;q++)p+=n[q][0];m[s[0]][0]=p=(k-p)/2;for(var r=1;r<h;r++){var A=0,B=0,C=l[r]-l[r-1];for(var q=0;q<g;q++)A+=n[q][r];for(var q=0;q<g;q++){var D=(n[s[q]][r]-n[s[q]][r-1])/(2*C);for(var E=0;E<q;E++)D+=(n[s[E]][r]-n[s[E]][r-1])/C;B+=D*n[s[q]][r]}m[s[0]][r]=p-=A?B/A*C:0}break;case"expand":for(var r=0;r<h;r++){m[s[0]][r]=0;var E=0;for(var q=0;q<g;q++)E+=n[q][r];if(E){E=k/E;for(var q=0;q<g;q++)n[q][r]*=E}else{E=k/g;for(var q=0;q<g;q++)n[q][r]=E}}break;default:for(var r=0;r<h;r++)m[s[0]][r]=0}for(var r=0;r<h;r++){var p=m[s[0]][r];for(var q=1;q<g;q++)p+=n[s[q-1]][r],m[s[q]][r]=p}var q=i.indexOf("-"),F=j?"h":"w",G=q<0?j?"l":"b":i.charAt(q+1),H=i.charAt(0);for(var I in c)c[I]=b;c[G]=function(a,b){return l[b]},c[H]=function(a,b){return m[a][b]},c[F]=function(a,b){return n[a][b]}},this.layer=(new pv.Mark).data(function(){return d[this.parent.index]}).top(f("t")).left(f("l")).right(f("r")).bottom(f("b")).width(f("w")).height(f("h")),this.layer.add=function(b){return a.add(pv.Panel).data(function(){return a.layers()}).add(b).extend(this)}},pv.Layout.Stack.prototype=pv.extend(pv.Layout).property("orient",String).property("offset",String).property("order",String).property("layers"),pv.Layout.Stack.prototype.defaults=(new pv.Layout.Stack).extend(pv.Layout.prototype.defaults).orient("bottom-left").offset("zero").layers([[]]),pv.Layout.Stack.prototype.$x=pv.Layout.Stack.prototype.$y=function(){return 0},pv.Layout.Stack.prototype.x=function(a){return this.$x=pv.functor(a),this},pv.Layout.Stack.prototype.y=function(a){return this.$y=pv.functor(a),this},pv.Layout.Stack.prototype.$values=pv.identity,pv.Layout.Stack.prototype.values=function(a){return this.$values=pv.functor(a),this},pv.Layout.Treemap=function(){pv.Layout.Hierarchy.call(this),this.node.strokeStyle("#fff").fillStyle("rgba(31, 119, 180, .25)").width(function(a){return a.dx}).height(function(a){return a.dy}),this.label.visible(function(a){return!a.firstChild}).left(function(a){return a.x+a.dx/2}).top(function(a){return a.y+a.dy/2}).textAlign("center").textAngle(function(a){return a.dx>a.dy?0:-Math.PI/2}),(this.leaf=(new pv.Mark).extend(this.node).fillStyle(null).strokeStyle(null).visible(function(a){return!a.firstChild})).parent=this,delete this.link},pv.Layout.Treemap.prototype=pv.extend(pv.Layout.Hierarchy).property("round",Boolean).property("paddingLeft",Number).property("paddingRight",Number).property("paddingTop",Number).property("paddingBottom",Number).property("mode",String).property("order",String),pv.Layout.Treemap.prototype.defaults=(new pv.Layout.Treemap).extend(pv.Layout.Hierarchy.prototype.defaults).mode("squarify").order("ascending"),pv.Layout.Treemap.prototype.padding=function(a){return this.paddingLeft(a).paddingRight(a).paddingTop(a).paddingBottom(a)},pv.Layout.Treemap.prototype.$size=function(a){return Number(a.nodeValue)},pv.Layout.Treemap.prototype.size=function(a){return this.$size=pv.functor(a),this},pv.Layout.Treemap.prototype.buildImplied=function(a){function m(a,b,c,d,e,f,g){for(var h=0,i=0;h<a.length;h++){var j=a[h];c?(j.x=d+i,j.y=e,i+=j.dx=k(f*j.size/b),j.dy=g):(j.x=d,j.y=e+i,j.dx=f,i+=j.dy=k(g*j.size/b))}j&&(c?j.dx+=f-i:j.dy+=g-i)}function n(a,b){var c=-Infinity,d=Infinity,e=0;for(var f=0;f<a.length;f++){var g=a[f].size;g<d&&(d=g),g>c&&(c=g),e+=g}return e*=e,b*=b,Math.max(b*c/e,e/(b*d))}function o(a,b){function t(a){var b=e==r,f=pv.sum(a,j),g=r?k(f/r):0;return m(a,f,b,c,d,b?e:g,b?g:o),b?(d+=g,o-=g):(c+=g,e-=g),r=Math.min(e,o),b}var c=a.x+f,d=a.y+h,e=a.dx-f-g,o=a.dy-h-i;if(l!="squarify"){m(a.childNodes,a.size,l=="slice"?!0:l=="dice"?!1:b&1,c,d,e,o);return}var p=[],q=Infinity,r=Math.min(e,o),s=e*o/a.size;if(a.size<=0)return;a.visitBefore(function(a){a.size*=s});var u=a.childNodes.slice();while(u.length){var v=u[u.length-1];if(!v.size){u.pop();continue}p.push(v);var s=n(p,r);s<=q?(u.pop(),q=s):(p.pop(),t(p),p.length=0,q=Infinity)}if(t(p))for(var b=0;b<p.length;b++)p[b].dy+=o;else for(var b=0;b<p.length;b++)p[b].dx+=e}if(pv.Layout.Hierarchy.prototype.buildImplied.call(this,a))return;var b=this,c=a.nodes,d=c[0],e=pv.Mark.stack,f=a.paddingLeft,g=a.paddingRight,h=a.paddingTop,i=a.paddingBottom,j=function(a){return a.size},k=a.round?Math.round:Number,l=a.mode;e.unshift(null),d.visitAfter(function(a,c){a.depth=c,a.x=a.y=a.dx=a.dy=0,a.size=a.firstChild?pv.sum(a.childNodes,function(a){return a.size}):b.$size.apply(b,(e[0]=a,e))}),e.shift();switch(a.order){case"ascending":d.sort(function(a,b){return a.size-b.size});break;case"descending":d.sort(function(a,b){return b.size-a.size});break;case"reverse":d.reverse()}d.x=0,d.y=0,d.dx=a.width,d.dy=a.height,d.visitBefore(o)},pv.Layout.Tree=function(){pv.Layout.Hierarchy.call(this)},pv.Layout.Tree.prototype=pv.extend(pv.Layout.Hierarchy).property("group",Number).property("breadth",Number).property("depth",Number).property("orient",String),pv.Layout.Tree.prototype.defaults=(new pv.Layout.Tree).extend(pv.Layout.Hierarchy.prototype.defaults).group(1).breadth(15).depth(60).orient("top"),pv.Layout.Tree.prototype.buildImplied=function(a){function i(a){var b,c,d;if(!a.firstChild){if(b=a.previousSibling)a.prelim=b.prelim+q(a.depth,!0)}else{b=a.firstChild,c=a.lastChild,d=b;for(var e=b;e;e=e.nextSibling)i(e),d=k(e,d);o(a);var f=.5*(b.prelim+c.prelim);(b=a.previousSibling)?(a.prelim=b.prelim+q(a.depth,!0),a.mod=a.prelim-f):a.prelim=f}}function j(a,b,c){a.breadth=a.prelim+b,b+=a.mod;for(var d=a.firstChild;d;d=d.nextSibling)j(d,b,c)}function k(a,b){var c=a.previousSibling;if(c){var d=a,e=a,f=c,g=a.parentNode.firstChild,h=d.mod,i=e.mod,j=f.mod,k=g.mod,o=m(f),r=l(d);while(o&&r){f=o,d=r,g=l(g),e=m(e),e.ancestor=a;var s=f.prelim+j-(d.prelim+h)+q(f.depth,!1);s>0&&(n(p(f,a,b),a,s),h+=s,i+=s),j+=f.mod,h+=d.mod,k+=g.mod,i+=e.mod,o=m(f),r=l(d)}o&&!m(e)&&(e.thread=o,e.mod+=j-i),r&&!l(g)&&(g.thread=r,g.mod+=h-k,b=a)}return b}function l(a){return a.firstChild||a.thread}function m(a){return a.lastChild||a.thread}function n(a,b,c){var d=b.number-a.number;b.change-=c/d,b.shift+=c,a.change+=c/d,b.prelim+=c,b.mod+=c}function o(a){var b=0,c=0;for(var d=a.lastChild;d;d=d.previousSibling)d.prelim+=b,d.mod+=b,c+=d.change,b+=d.shift+c}function p(a,b,c){return a.ancestor.parentNode==b.parentNode?a.ancestor:c}function q(a,b){return(b?1:f+1)/(c=="radial"?a:1)}function s(a){return c=="radial"?a.breadth/d:0}function t(a){switch(c){case"left":return a.depth;case"right":return g-a.depth;case"top":case"bottom":return a.breadth+g/2;case"radial":return g/2+a.depth*Math.cos(s(a))}}function u(a){switch(c){case"left":case"right":return a.breadth+h/2;case"top":return a.depth;case"bottom":return h-a.depth;case"radial":return h/2+a.depth*Math.sin(s(a))}}if(pv.Layout.Hierarchy.prototype.buildImplied.call(this,a))return;var b=a.nodes,c=a.orient,d=a.depth,e=a.breadth,f=a.group,g=a.width,h=a.height,r=b[0];r.visitAfter(function(a,b){a.ancestor=a,a.prelim=0,a.mod=0,a.change=0,a.shift=0,a.number=a.previousSibling?a.previousSibling.number+1:0,a.depth=b}),i(r),j(r,-r.prelim,0),r.visitAfter(function(a){a.breadth*=e,a.depth*=d,a.midAngle=s(a),a.x=t(a),a.y=u(a),a.firstChild&&(a.midAngle+=Math.PI),delete a.breadth,delete a.depth,delete a.ancestor,delete a.prelim,delete a.mod,delete a.change,delete a.shift,delete a.number,delete a.thread})},pv.Layout.Indent=function(){pv.Layout.Hierarchy.call(this),this.link.interpolate("step-after")},pv.Layout.Indent.prototype=pv.extend(pv.Layout.Hierarchy).property("depth",Number).property("breadth",Number),pv.Layout.Indent.prototype.defaults=(new pv.Layout.Indent).extend(pv.Layout.Hierarchy.prototype.defaults).depth(15).breadth(15),pv.Layout.Indent.prototype.buildImplied=function(a){function g(a,b,h){a.x=e+h++*d,a.y=f+b++*c,a.midAngle=0;for(var i=a.firstChild;i;i=i.nextSibling)b=g(i,b,h);return b}if(pv.Layout.Hierarchy.prototype.buildImplied.call(this,a))return;var b=a.nodes,c=a.breadth,d=a.depth,e=0,f=0;g(b[0],1,1)},pv.Layout.Pack=function(){pv.Layout.Hierarchy.call(this),this.node.radius(function(a){return a.radius}).strokeStyle("rgb(31, 119, 180)").fillStyle("rgba(31, 119, 180, .25)"),this.label.textAlign("center"),delete this.link},pv.Layout.Pack.prototype=pv.extend(pv.Layout.Hierarchy).property("spacing",Number).property("order",String),pv.Layout.Pack.prototype.defaults=(new pv.Layout.Pack).extend(pv.Layout.Hierarchy.prototype.defaults).spacing(1).order("ascending"),pv.Layout.Pack.prototype.$radius=function(){return 1},pv.Layout.Pack.prototype.size=function(a){return this.$radius=typeof a=="function"?function(){return Math.sqrt(a.apply(this,arguments))}:(a=Math.sqrt(a),function(){return a}),this},pv.Layout.Pack.prototype.buildImplied=function(a){function e(a){var c=pv.Mark.stack;c.unshift(null);for(var d=0,e=a.length;d<e;d++){var f=a[d];f.firstChild||(f.radius=b.$radius.apply(b,(c[0]=f,c)))}c.shift()}function f(b){var c=[];for(var d=b.firstChild;d;d=d.nextSibling)d.firstChild&&(d.radius=f(d)),d.n=d.p=d,c.push(d);switch(a.order){case"ascending":c.sort(function(a,b){return a.radius-b.radius});break;case"descending":c.sort(function(a,b){return b.radius-a.radius});break;case"reverse":c.reverse()}return g(c)}function g(b){function m(a){c=Math.min(a.x-a.radius,c),d=Math.max(a.x+a.radius,d),e=Math.min(a.y-a.radius,e),f=Math.max(a.y+a.radius,f)}function n(a,b){var c=a.n;a.n=b,b.p=a,b.n=c,c.p=b}function o(a,b){a.n=b,b.p=a}function p(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.radius+b.radius;return e*e-c*c-d*d>.001}var c=Infinity,d=-Infinity,e=Infinity,f=-Infinity,g,i,j,k,l;g=b[0],g.x=-g.radius,g.y=0,m(g);if(b.length>1){i=b[1],i.x=i.radius,i.y=0,m(i);if(b.length>2){j=b[2],h(g,i,j),m(j),n(g,j),g.p=j,n(j,i),i=g.n;for(var q=3;q<b.length;q++){h(g,i,j=b[q]);var r=0,t=1,u=1;for(k=i.n;k!=i;k=k.n,t++)if(p(k,j)){r=1;break}if(r==1)for(l=g.p;l!=k.p;l=l.p,u++)if(p(l,j)){u<t&&(r=-1,k=l);break}r==0?(n(g,j),i=j,m(j)):r>0?(o(g,k),i=k,q--):r<0&&(o(k,i),g=k,q--)}}}var v=(c+d)/2,w=(e+f)/2,x=0;for(var q=0;q<b.length;q++){var y=b[q];y.x-=v,y.y-=w,x=Math.max(x,y.radius+Math.sqrt(y.x*y.x+y.y*y.y))}return x+a.spacing}function h(a,b,c){var d=b.radius+c.radius,e=a.radius+c.radius,f=b.x-a.x,g=b.y-a.y,h=Math.sqrt(f*f+g*g),i=(e*e+h*h-d*d)/(2*e*h),j=Math.acos(i),k=i*e,l=Math.sin(j)*e;f/=h,g/=h,c.x=a.x+k*f+l*g,c.y=a.y+k*g-l*f}function i(a,b,c,d){for(var e=a.firstChild;e;e=e.nextSibling)e.x+=a.x,e.y+=a.y,i(e,b,c,d);a.x=b+d*a.x,a.y=c+d*a.y,a.radius*=d}if(pv.Layout.Hierarchy.prototype.buildImplied.call(this,a))return;var b=this,c=a.nodes,d=c[0];e(c),d.x=0,d.y=0,d.radius=f(d);var j=this.width(),k=this.height(),l=1/Math.max(2*d.radius/j,2*d.radius/k);i(d,j/2,k/2,l)},pv.Layout.Force=function(){pv.Layout.Network.call(this),this.link.lineWidth(function(a,b){return Math.sqrt(b.linkValue)*1.5}),this.label.textAlign("center")},pv.Layout.Force.prototype=pv.extend(pv.Layout.Network).property("bound",Boolean).property("iterations",Number).property("dragConstant",Number).property("chargeConstant",Number).property("chargeMinDistance",Number).property("chargeMaxDistance",Number).property("chargeTheta",Number).property("springConstant",Number).property("springDamping",Number).property("springLength",Number),pv.Layout.Force.prototype.defaults=(new pv.Layout.Force).extend(pv.Layout.Network.prototype.defaults).dragConstant(.1).chargeConstant(-40).chargeMinDistance(2).chargeMaxDistance(500).chargeTheta(.9).springConstant(.1).springDamping(.3).springLength(20),pv.Layout.Force.prototype.buildImplied=function(a){function l(a){return a.fix?1:a.vx*a.vx+a.vy*a.vy}if(pv.Layout.Network.prototype.buildImplied.call(this,a)){var b=a.$force;b&&(b.next=this.binds.$force,this.binds.$force=b);return}var c=this,d=a.nodes,e=a.links,f=a.iterations,g=a.width,h=a.height;for(var i=0,j;i<d.length;i++)j=d[i],isNaN(j.x)&&(j.x=g/2+40*Math.random()-20),isNaN(j.y)&&(j.y=h/2+40*Math.random()-20);var k=pv.simulation(d);k.force(pv.Force.drag(a.dragConstant)),k.force(pv.Force.charge(a.chargeConstant).domain(a.chargeMinDistance,a.chargeMaxDistance).theta(a.chargeTheta)),k.force(pv.Force.spring(a.springConstant).damping(a.springDamping).length(a.springLength).links(e)),k.constraint(pv.Constraint.position()),a.bound&&k.constraint(pv.Constraint.bound().x(6,g-6).y(6,h-6));if(f==null){k.step(),k.step();var m=a.$force=this.binds.$force={next:this.binds.$force,nodes:d,min:1e-4*(e.length+1),sim:k};this.$timer||(this.$timer=setInterval(function(){var a=!1;for(var b=c.binds.$force;b;b=b.next)pv.max(b.nodes,l)>b.min&&(b.sim.step(),a=!0);a&&c.render()},42))}else for(var i=0;i<f;i++)k.step()},pv.Layout.Cluster=function(){pv.Layout.Hierarchy.call(this);var a,b=this.buildImplied;this.buildImplied=function(c){b.call(this,c),a=/^(top|bottom)$/.test(c.orient)?"step-before":/^(left|right)$/.test(c.orient)?"step-after":"linear"},this.link.interpolate(function(){return a})},pv.Layout.Cluster.prototype=pv.extend(pv.Layout.Hierarchy).property("group",Number).property("orient",String).property("innerRadius",Number).property("outerRadius",Number),pv.Layout.Cluster.prototype.defaults=(new pv.Layout.Cluster).extend(pv.Layout.Hierarchy.prototype.defaults).group(0).orient("top"),pv.Layout.Cluster.prototype.buildImplied=function(a){if(pv.Layout.Hierarchy.prototype.buildImplied.call(this,a))return;var b=a.nodes[0],c=a.group,d,e,f=0,g=.5-c/2,h=undefined;b.visitAfter(function(a){a.firstChild?a.depth=1+pv.max(a.childNodes,function(a){return a.depth}):(c&&h!=a.parentNode&&(h=a.parentNode,f+=c),f++,a.depth=0)}),d=1/f,e=1/b.depth;var h=undefined;b.visitAfter(function(a){a.firstChild?a.breadth=pv.mean(a.childNodes,function(a){return a.breadth}):(c&&h!=a.parentNode&&(h=a.parentNode,g+=c),a.breadth=d*g++),a.depth=1-a.depth*e}),b.visitAfter(function(a){a.minBreadth=a.firstChild?a.firstChild.minBreadth:a.breadth-d/2,a.maxBreadth=a.firstChild?a.lastChild.maxBreadth:a.breadth+d/2}),b.visitBefore(function(a){a.minDepth=a.parentNode?a.parentNode.maxDepth:0,a.maxDepth=a.parentNode?a.depth+b.depth:a.minDepth+2*b.depth}),b.minDepth=-e,pv.Layout.Hierarchy.NodeLink.buildImplied.call(this,a)},pv.Layout.Cluster.Fill=function(){pv.Layout.Cluster.call(this),pv.Layout.Hierarchy.Fill.constructor.call(this)},pv.Layout.Cluster.Fill.prototype=pv.extend(pv.Layout.Cluster),pv.Layout.Cluster.Fill.prototype.buildImplied=function(a){if(pv.Layout.Cluster.prototype.buildImplied.call(this,a))return;pv.Layout.Hierarchy.Fill.buildImplied.call(this,a)},pv.Layout.Partition=function(){pv.Layout.Hierarchy.call(this)},pv.Layout.Partition.prototype=pv.extend(pv.Layout.Hierarchy).property("order",String).property("orient",String).property("innerRadius",Number).property("outerRadius",Number),pv.Layout.Partition.prototype.defaults=(new pv.Layout.Partition).extend(pv.Layout.Hierarchy.prototype.defaults).orient("top"),pv.Layout.Partition.prototype.$size=function(){return 1},pv.Layout.Partition.prototype.size=function(a){return this.$size=a,this},pv.Layout.Partition.prototype.buildImplied=function(a){if(pv.Layout.Hierarchy.prototype.buildImplied.call(this,a))return;var b=this,c=a.nodes[0],d=pv.Mark.stack,e=0;d.unshift(null),c.visitAfter(function(a,c){c>e&&(e=c),a.size=a.firstChild?pv.sum(a.childNodes,function(a){return a.size}):b.$size.apply(b,(d[0]=a,d))}),d.shift();switch(a.order){case"ascending":c.sort(function(a,b){return a.size-b.size});break;case"descending":c.sort(function(a,b){return b.size-a.size})}var f=1/e;c.minBreadth=0,c.breadth=.5,c.maxBreadth=1,c.visitBefore(function(a){var b=a.minBreadth,c=a.maxBreadth-b;for(var d=a.firstChild;d;d=d.nextSibling)d.minBreadth=b,d.maxBreadth=b+=d.size/a.size*c,d.breadth=(b+d.minBreadth)/2}),c.visitAfter(function(a,b){a.minDepth=(b-1)*f,a.maxDepth=a.depth=b*f}),pv.Layout.Hierarchy.NodeLink.buildImplied.call(this,a)},pv.Layout.Partition.Fill=function(){pv.Layout.Partition.call(this),pv.Layout.Hierarchy.Fill.constructor.call(this)},pv.Layout.Partition.Fill.prototype=pv.extend(pv.Layout.Partition),pv.Layout.Partition.Fill.prototype.buildImplied=function(a){if(pv.Layout.Partition.prototype.buildImplied.call(this,a))return;pv.Layout.Hierarchy.Fill.buildImplied.call(this,a)},pv.Layout.Arc=function(){pv.Layout.Network.call(this);var a,b,c,d=this.buildImplied;this.buildImplied=function(e){d.call(this,e),b=e.directed,a=e.orient=="radial"?"linear":"polar",c=e.orient=="right"||e.orient=="top"},this.link.data(function(a){var d=a.sourceNode,e=a.targetNode;return c!=(b||d.breadth<e.breadth)?[d,e]:[e,d]}).interpolate(function(){return a})},pv.Layout.Arc.prototype=pv.extend(pv.Layout.Network).property("orient",String).property("directed",Boolean),pv.Layout.Arc.prototype.defaults=(new pv.Layout.Arc).extend(pv.Layout.Network.prototype.defaults).orient("bottom"),pv.Layout.Arc.prototype.sort=function(a){return this.$sort=a,this},pv.Layout.Arc.prototype.buildImplied=function(a){function i(a){switch(c){case"top":return-Math.PI/2;case"bottom":return Math.PI/2;case"left":return Math.PI;case"right":return 0;case"radial":return(a-.25)*2*Math.PI}}function j(a){switch(c){case"top":case"bottom":return a*f;case"left":return 0;case"right":return f;case"radial":return f/2+h*Math.cos(i(a))}}function k(a){switch(c){case"top":return 0;case"bottom":return g;case"left":case"right":return a*g;case"radial":return g/2+h*Math.sin(i(a))}}if(pv.Layout.Network.prototype.buildImplied.call(this,a))return;var b=a.nodes,c=a.orient,d=this.$sort,e=pv.range(b.length),f=a.width,g=a.height,h=Math.min(f,g)/2;d&&e.sort(function(a,c){return d(b[a],b[c])});for(var l=0;l<b.length;l++){var m=b[e[l]],n=m.breadth=(l+.5)/b.length;m.x=j(n),m.y=k(n),m.midAngle=i(n)}},pv.Layout.Horizon=function(){pv.Layout.call(this);var a=this,b,c,d,e,f,g,h=this.buildImplied;this.buildImplied=function(a){h.call(this,a),b=a.bands,c=a.mode,d=Math.round((c=="color"?.5:1)*a.height),e=a.backgroundStyle,f=pv.ramp(e,a.negativeStyle).domain(0,b),g=pv.ramp(e,a.positiveStyle).domain(0,b)};var b=(new pv.Panel).data(function(){return pv.range(b*2)}).overflow("hidden").height(function(){return d}).top(function(a){return c=="color"?(a&1)*d:0}).fillStyle(function(a){return a?null:e});this.band=(new pv.Mark).top(function(a,b){return c=="mirror"&&b&1?(b+1>>1)*d:null}).bottom(function(a,b){return c=="mirror"?b&1?null:(b+1>>1)*-d:(b&1||-1)*(b+1>>1)*d}).fillStyle(function(a,b){return(b&1?f:g)((b>>1)+1)}),this.band.add=function(c){return a.add(pv.Panel).extend(b).add(c).extend(this)}},pv.Layout.Horizon.prototype=pv.extend(pv.Layout).property("bands",Number).property("mode",String).property("backgroundStyle",pv.color).property("positiveStyle",pv.color).property("negativeStyle",pv.color),pv.Layout.Horizon.prototype.defaults=(new pv.Layout.Horizon).extend(pv.Layout.prototype.defaults).bands(2).mode("offset").backgroundStyle("white").positiveStyle("#1f77b4").negativeStyle("#d62728"),pv.Layout.Rollup=function(){pv.Layout.Network.call(this);var a=this,b,c,d=a.buildImplied;this.buildImplied=function(a){d.call(this,a),b=a.$rollup.nodes,c=a.$rollup.links},this.node.data(function(){return b}).size(function(a){return a.nodes.length*20}),this.link.interpolate("polar").eccentricity(.8),this.link.add=function(b){return a.add(pv.Panel).data(function(){return c}).add(b).extend(this)}},pv.Layout.Rollup.prototype=pv.extend(pv.Layout.Network).property("directed",Boolean),pv.Layout.Rollup.prototype.x=function(a){return this.$x=pv.functor(a),this},pv.Layout.Rollup.prototype.y=function(a){return this.$y=pv.functor(a),this},pv.Layout.Rollup.prototype.buildImplied=function(a){function k(a){return f[a]+","+g[a]}if(pv.Layout.Network.prototype.buildImplied.call(this,a))return;var b=a.nodes,c=a.links,d=a.directed,e=b.length,f=[],g=[],h=0,i={},j={},l=pv.Mark.stack,m={parent:this};l.unshift(null);for(var n=0;n<e;n++)m.index=n,l[0]=b[n],f[n]=this.$x.apply(m,l),g[n]=this.$y.apply(m,l);l.shift();for(var n=0;n<b.length;n++){var o=k(n),p=i[o];p||(p=i[o]=pv.extend(b[n]),p.index=h++,p.x=f[n],p.y=g[n],p.nodes=[]),p.nodes.push(b[n])}for(var n=0;n<c.length;n++){var q=c[n].sourceNode,r=c[n].targetNode,s=i[k(q.index)],t=i[k(r.index)],u=!d&&s.index>t.index,v=u?t.index+","+s.index:s.index+","+t.index,w=j[v];w||(w=j[v]={sourceNode:s,targetNode:t,linkValue:0,links:[]}),w.links.push(c[n]),w.linkValue+=c[n].linkValue}a.$rollup={nodes:pv.values(i),links:pv.values(j)}},pv.Layout.Matrix=function(){pv.Layout.Network.call(this);var a=this,b,c,d,e,f,g=a.buildImplied;this.buildImplied=function(a){g.call(this,a),b=a.nodes.length,c=a.width/b,d=a.height/b,e=a.$matrix.labels,f=a.$matrix.pairs},this.link.data(function(){return f}).left(function(){return c*(this.index%b)}).top(function(){return d*Math.floor(this.index/b)}).width(function(){return c}).height(function(){return d}).lineWidth(1.5).strokeStyle("#fff").fillStyle(function(a){return a.linkValue?"#555":"#eee"}).parent=this,delete this.link.add,this.label.data(function(){return e}).left(function(){return this.index&1?c*((this.index>>1)+.5):null}).top(function(){return this.index&1?null:d*((this.index>>1)+.5)}).textMargin(4).textAlign(function(){return this.index&1?"left":"right"}).textAngle(function(){return this.index&1?-Math.PI/2:0}),delete this.node},pv.Layout.Matrix.prototype=pv.extend(pv.Layout.Network).property("directed",Boolean),pv.Layout.Matrix.prototype.sort=function(a){return this.$sort=a,this},pv.Layout.Matrix.prototype.buildImplied=function(a){if(pv.Layout.Network.prototype.buildImplied.call(this,a))return;var b=a.nodes,c=a.links,d=this.$sort,e=b.length,f=pv.range(e),g=[],h=[],i={};a.$matrix={labels:g,pairs:h},d&&f.sort(function(a,c){return d(b[a],b[c])});for(var j=0;j<e;j++)for(var k=0;k<e;k++){var l=f[j],m=f[k],n={row:j,col:k,sourceNode:b[l],targetNode:b[m],linkValue:0};h.push(i[l+"."+m]=n)}for(var j=0;j<e;j++){var l=f[j];g.push(b[l],b[l])}for(var j=0;j<c.length;j++){var o=c[j],p=o.sourceNode.index,q=o.targetNode.index,r=o.linkValue;i[p+"."+q].linkValue+=r,a.directed||(i[q+"."+p].linkValue+=r)}},pv.Layout.Bullet=function(){pv.Layout.call(this);var a=this,b=a.buildImplied,c=a.x=pv.Scale.linear(),d,e,f,g,h;this.buildImplied=function(a){b.call(this,h=a),d=a.orient,e=/^left|right$/.test(d),f=pv.ramp("#bbb","#eee").domain(0,Math.max(1,h.ranges.length-1)),g=pv.ramp("steelblue","lightsteelblue").domain(0,Math.max(1,h.measures.length-1))},(this.range=new pv.Mark).data(function(){return h.ranges}).reverse(!0).left(function(){return d=="left"?0:null}).top(function(){return d=="top"?0:null}).right(function(){return d=="right"?0:null}).bottom(function(){return d=="bottom"?0:null}).width(function(a){return e?c(a):null}).height(function(a){return e?null:c(a)}).fillStyle(function(){return f(this.index)}).antialias(!1).parent=a,(this.measure=new pv.Mark).extend(this.range).data(function(){return h.measures}).left(function(){return d=="left"?0:e?null:this.parent.width()/3.25}).top(function(){return d=="top"?0:e?this.parent.height()/3.25:null}).right(function(){return d=="right"?0:e?null:this.parent.width()/3.25}).bottom(function(){return d=="bottom"?0:e?this.parent.height()/3.25:null}).fillStyle(function(){return g(this.index)}).parent=a,(this.marker=new pv.Mark).data(function(){return h.markers}).left(function(a){return d=="left"?c(a):e?null:this.parent.width()/2}).top(function(a){return d=="top"?c(a):e?this.parent.height()/2:null}).right(function(a){return d=="right"?c(a):null}).bottom(function(a){return d=="bottom"?c(a):null}).strokeStyle("black").shape("bar").angle(function(){return e?0:Math.PI/2}).parent=a,(this.tick=new pv.Mark).data(function(){return c.ticks(7)}).left(function(a){return d=="left"?c(a):null}).top(function(a){return d=="top"?c(a):null}).right(function(a){return d=="right"?c(a):e?null:-6}).bottom(function(a){return d=="bottom"?c(a):e?-8:null}).height(function(){return e?6:null}).width(function(){return e?null:6}).parent=a},pv.Layout.Bullet.prototype=pv.extend(pv.Layout).property("orient",String).property("ranges").property("markers").property("measures").property("maximum",Number),pv.Layout.Bullet.prototype.defaults=(new pv.Layout.Bullet).extend(pv.Layout.prototype.defaults).orient("left").ranges([]).markers([]).measures([]),pv.Layout.Bullet.prototype.buildImplied=function(a){pv.Layout.prototype.buildImplied.call(this,a);var b=this.parent[/^left|right$/.test(a.orient)?"width":"height"]();a.maximum=a.maximum||pv.max([].concat(a.ranges,a.markers,a.measures)),this.x.domain(0,a.maximum).range(0,b)},pv.Behavior={},pv.Behavior.drag=function(){function f(f){b=this.index,a=this.scene;var g=this.mouse();d=((c=f).fix=pv.vector(f.x,f.y)).minus(g),e={x:this.parent.width()-(f.dx||0),y:this.parent.height()-(f.dy||0)},a.mark.context(a,b,function(){this.render()}),pv.Mark.dispatch("dragstart",a,b)}function g(){if(!a)return;a.mark.context(a,b,function(){var a=this.mouse();c.x=c.fix.x=Math.max(0,Math.min(d.x+a.x,e.x)),c.y=c.fix.y=Math.max(0,Math.min(d.y+a.y,e.y)),this.render()}),pv.Mark.dispatch("drag",a,b)}function h(){if(!a)return;c.fix=null,a.mark.context(a,b,function(){this.render()}),pv.Mark.dispatch("dragend",a,b),a=null}var a,b,c,d,e;return pv.listen(window,"mousemove",g),pv.listen(window,"mouseup",h),f},pv.Behavior.point=function(a){function g(a,b){var c=a[b],f={cost:Infinity};for(var h=0,i=c.visible&&c.children.length;h<i;h++){var j=c.children[h],k=j.mark,l;if(k.type=="panel"){k.scene=j;for(var m=0,n=j.length;m<n;m++)k.index=m,l=g(j,m),l.cost<f.cost&&(f=l);delete k.scene,delete k.index}else if(k.$handlers.point){var o=k.mouse();for(var m=0,n=j.length;m<n;m++){var p=j[m],q=o.x-p.left-(p.width||0)/2,r=o.y-p.top-(p.height||0)/2,s=d*q*q+e*r*r;s<f.cost&&(f.distance=q*q+r*r,f.cost=s,f.scene=j,f.index=m)}}}return f}function h(){var a=g(this.scene,this.index);if(a.cost==Infinity||a.distance>f)a=null;if(b){if(a&&b.scene==a.scene&&b.index==a.index)return;pv.Mark.dispatch("unpoint",b.scene,b.index)}if(b=a)pv.Mark.dispatch("point",a.scene,a.index),pv.listen(this.root.canvas(),"mouseout",i)}function i(a){b&&!pv.ancestor(this,a.relatedTarget)&&(pv.Mark.dispatch("unpoint",b.scene,b.index),b=null)}var b,c=null,d=1,e=1,f=arguments.length?a*a:900;return h.collapse=function(a){if(arguments.length){c=String(a);switch(c){case"y":d=1,e=0;break;case"x":d=0,e=1;break;default:d=1,e=1}return h}return c},h},pv.Behavior.select=function(){function e(e){b=this.index,a=this.scene,d=this.mouse(),c=e,c.x=d.x,c.y=d.y,c.dx=c.dy=0,pv.Mark.dispatch("selectstart",a,b)}function f(){if(!a)return;a.mark.context(a,b,function(){var a=this.mouse();c.x=Math.max(0,Math.min(d.x,a.x)),c.y=Math.max(0,Math.min(d.y,a.y)),c.dx=Math.min(this.width(),Math.max(a.x,d.x))-c.x,c.dy=Math.min(this.height(),Math.max(a.y,d.y))-c.y,this.render()}),pv.Mark.dispatch("select",a,b)}function g(){if(!a)return;pv.Mark.dispatch("selectend",a,b),a=null}var a,b,c,d;return pv.listen(window,"mousemove",f),pv.listen(window,"mouseup",g),e},pv.Behavior.resize=function(a){function f(f){c=this.index,b=this.scene,e=this.mouse(),d=f;switch(a){case"left":e.x=d.x+d.dx;break;case"right":e.x=d.x;break;case"top":e.y=d.y+d.dy;break;case"bottom":e.y=d.y}pv.Mark.dispatch("resizestart",b,c)}function g(){if(!b)return;b.mark.context(b,c,function(){var a=this.mouse();d.x=Math.max(0,Math.min(e.x,a.x)),d.y=Math.max(0,Math.min(e.y,a.y)),d.dx=Math.min(this.parent.width(),Math.max(a.x,e.x))-d.x,d.dy=Math.min(this.parent.height(),Math.max(a.y,e.y))-d.y,this.render()}),pv.Mark.dispatch("resize",b,c)}function h(){if(!b)return;pv.Mark.dispatch("resizeend",b,c),b=null}var b,c,d,e;return pv.listen(window,"mousemove",g),pv.listen(window,"mouseup",h),f},pv.Behavior.pan=function(){function g(){b=this.index,a=this.scene,d=pv.vector(pv.event.pageX,pv.event.pageY),c=this.transform(),e=1/(c.k*this.scale),f&&(f={x:(1-c.k)*this.width(),y:(1-c.k)*this.height()})}function h(){if(!a)return;a.mark.context(a,b,function(){var a=(pv.event.pageX-d.x)*e,b=(pv.event.pageY-d.y)*e,g=c.translate(a,b);f&&(g.x=Math.max(f.x,Math.min(0,g.x)),g.y=Math.max(f.y,Math.min(0,g.y))),this.transform(g).render()}),pv.Mark.dispatch("pan",a,b)}function i(){a=null}var a,b,c,d,e,f;return g.bound=function(a){return arguments.length?(f=Boolean(a),this):Boolean(f)},pv.listen(window,"mousemove",h),pv.listen(window,"mouseup",i),g},pv.Behavior.zoom=function(a){function c(){var c=this.mouse(),d=pv.event.wheel*a,e=this.transform().translate(c.x,c.y).scale(d<0?1e3/(1e3-d):(1e3+d)/1e3).translate(-c.x,-c.y);b&&(e.k=Math.max(1,e.k),e.x=Math.max((1-e.k)*this.width(),Math.min(0,e.x)),e.y=Math.max((1-e.k)*this.height(),Math.min(0,e.y))),this.transform(e).render(),pv.Mark.dispatch("zoom",this.scene,this.index)}var b;return arguments.length||(a=1/48),c.bound=function(a){return arguments.length?(b=Boolean(a),this):Boolean(b)},c},pv.Geo=function(){},pv.Geo.projections={mercator:{project:function(a){return{x:a.lng/180,y:a.lat>85?1:a.lat<-85?-1:Math.log(Math.tan(Math.PI/4+pv.radians(a.lat)/2))/Math.PI}},invert:function(a){return{lng:a.x*180,lat:pv.degrees(2*Math.atan(Math.exp(a.y*Math.PI))-Math.PI/2)}}},"gall-peters":{project:function(a){return{x:a.lng/180,y:Math.sin(pv.radians(a.lat))}},invert:function(a){return{lng:a.x*180,lat:pv.degrees(Math.asin(a.y))}}},sinusoidal:{project:function(a){return{x:pv.radians(a.lng)*Math.cos(pv.radians(a.lat))/Math.PI,y:a.lat/90}},invert:function(a){return{lng:pv.degrees(a.x*Math.PI/Math.cos(a.y*Math.PI/2)),lat:a.y*90}}},aitoff:{project:function(a){var b=pv.radians(a.lng),c=pv.radians(a.lat),d=Math.acos(Math.cos(c)*Math.cos(b/2));return{x:2*(d?Math.cos(c)*Math.sin(b/2)*d/Math.sin(d):0)/Math.PI,y:2*(d?Math.sin(c)*d/Math.sin(d):0)/Math.PI}},invert:function(a){var b=a.x*Math.PI/2,c=a.y*Math.PI/2;return{lng:pv.degrees(b/Math.cos(c)),lat:pv.degrees(c)}}},hammer:{project:function(a){var b=pv.radians(a.lng),c=pv.radians(a.lat),d=Math.sqrt(1+Math.cos(c)*Math.cos(b/2));return{x:2*Math.SQRT2*Math.cos(c)*Math.sin(b/2)/d/3,y:Math.SQRT2*Math.sin(c)/d/1.5}},invert:function(a){var b=a.x*3,c=a.y*1.5,d=Math.sqrt(1-b*b/16-c*c/4);return{lng:pv.degrees(2*Math.atan2(d*b,2*(2*d*d-1))),lat:pv.degrees(Math.asin(d*c))}}},identity:{project:function(a){return{x:a.lng/180,y:a.lat/90}},invert:function(a){return{lng:a.x*180,lat:a.y*90}}}},pv.Geo.scale=function(a){function k(a){if(!i||a.lng!=i.lng||a.lat!=i.lat){i=a;var b=l(a);j={x:f(b.x),y:g(b.y)}}return j}function l(a){var b={lng:a.lng-h.lng,lat:a.lat};return e.project(b)}function m(a){var b=e.invert(a);return b.lng+=h.lng,b}var b={x:0,y:0},c={x:1,y:1},d=[],e=pv.Geo.projections.identity,f=pv.Scale.linear(-1,1).range(0,1),g=pv.Scale.linear(-1,1).range(1,0),h={lng:0,lat:0},i,j;return k.x=function(a){return k(a).x},k.y=function(a){return k(a).y},k.ticks={lng:function(a){var b,c;if(d.length>1){var e=pv.Scale.linear();a==undefined&&(a=10),b=e.domain(d,function(a){return a.lat}).ticks(a),c=e.domain(d,function(a){return a.lng}).ticks(a)}else b=pv.range(-80,81,10),c=pv.range(-180,181,10);return c.map(function(a){return b.map(function(b){return{lat:b,lng:a}})})},lat:function(a){return pv.transpose(k.ticks.lng(a))}},k.invert=function(a){return m({x:f.invert(a.x),y:g.invert(a.y)})},k.domain=function(a,b){if(arguments.length){d=a instanceof Array?arguments.length>1?pv.map(a,b):a:Array.prototype.slice.call(arguments);if(d.length>1){var c=d.map(function(a){return a.lng}),e=d.map(function(a){return a.lat});h={lng:(pv.max(c)+pv.min(c))/2,lat:(pv.max(e)+pv.min(e))/2};var j=d.map(l);f.domain(j,function(a){return a.x}),g.domain(j,function(a){return a.y})}else h={lng:0,lat:0},f.domain(-1,1),g.domain(-1,1);return i=null,this}return d},k.range=function(a,d){return arguments.length?(typeof a=="object"?(b={x:Number(a.x),y:Number(a.y)},c={x:Number(d.x),y:Number(d.y)}):(b={x:0,y:0},c={x:Number(a),y:Number(d)}),f.range(b.x,c.x),g.range(c.y,b.y),i=null,this):[b,c]},k.projection=function(a){return arguments.length?(e=typeof a=="string"?pv.Geo.projections[a]||pv.Geo.projections.identity:a,this.domain(d)):a},k.by=function(a){function b(){return k(a.apply(this,arguments))}for(var c in k)b[c]=k[c];return b},arguments.length&&k.projection(a),k};
Ext.define("Ext.ux.form.field.BoxSelect",{extend:"Ext.form.field.ComboBox",alias:["widget.comboboxselect","widget.boxselect"],multiSelect:!0,forceSelection:!0,selectOnFocus:!0,createNewOnEnter:!1,stacked:!1,pinList:!0,fieldSubTpl:['<div class="x-boxselect">','<ul class="x-boxselect-list {fieldCls} {typeCls}">','<li class="x-boxselect-input">','<input id="{id}" type="{type}" ','<tpl if="name">name="{name}" </tpl>','<tpl if="size">size="{size}" </tpl>','<tpl if="tabIdx">tabIndex="{tabIdx}" </tpl>','class="x-boxselect-input-field" autocomplete="off" />',"</li>","</ul>",'<div class="{triggerWrapCls}" role="presentation">',"{triggerEl}",'<div class="{clearCls}" role="presentation"></div>',"</div>","</div>",{compiled:!0,disableFormats:!0}],renderSelectors:{itemList:"ul.x-boxselect-list",inputEl:"input.x-boxselect-input-field",inputElCt:"li.x-boxselect-input"},componentLayout:"boxselectfield",initComponent:function(){var a=this,b=a.typeAhead;b&&!a.editable&&Ext.Error.raise("If typeAhead is enabled the combo must be editable: true -- please change one of those settings."),Ext.apply(a,{typeAhead:!1}),a.callParent(arguments),a.typeAhead=b,a.selectionModel=new Ext.selection.Model({store:a.valueStore,mode:"MULTI",onSelectChange:function(a,b,c,d){d()}}),!Ext.isEmpty(a.delimiter)&&a.multiSelect&&(a.delimiterEndingRegexp=new RegExp(String(a.delimiter).replace(/[$%()*+.?\[\\\]{|}]/g,"\\$&")+"$"))},initEvents:function(){var a=this;a.callParent(arguments),a.enableKeyEvents||a.mon(a.inputEl,"keydown",a.onKeyDown,a),a.mon(a.itemList,"click",a.onItemListClick,a),a.mon(a.selectionModel,"selectionchange",a.applyMultiselectItemMarkup,a)},bindStore:function(a,b){var c=this,d=c.store;d&&c.mun(d,"beforeload",c.onBeforeLoad,c),c.valueStore&&(c.mun(c.valueStore,"datachanged",c.applyMultiselectItemMarkup,c),c.valueStore=null),c.callParent(arguments),c.store&&(c.valueStore=new Ext.data.Store({model:c.store.model,proxy:{type:"memory"}}),c.mon(c.valueStore,"datachanged",c.applyMultiselectItemMarkup,c),c.mon(c.store,"beforeload",c.onBeforeLoad,c))},createPicker:function(){var a=this,b=a.callParent(arguments);return a.mon(b,"beforerefresh",a.onBeforeListRefresh,a),b},onDestroy:function(){var a=this;Ext.destroyMembers(a,"selectionModel","valueStore"),a.callParent(arguments)},afterRender:function(){var a=this;Ext.supports.Placeholder&&a.inputEl&&a.emptyText&&delete a.inputEl.dom.placeholder,a.callParent(arguments),a.stacked===!0&&a.itemList.addCls("x-boxselect-stacked"),a.applyMultiselectItemMarkup()},findRecord:function(a,b){var c=this.store,d=!1,e;return c.snapshot?(e=c.snapshot.findIndexBy(function(c){return c.get(a)===b}),d=e!==-1?c.snapshot.getAt(e):!1):(e=c.findExact(a,b),d=e!==-1?c.getAt(e):!1),d},onBeforeLoad:function(){this.ignoreSelection++},onLoad:function(){var a=this,b=a.valueField,c=a.valueStore,d=!1;c.suspendEvents(),c.each(function(e){var f=a.findRecord(b,e.get(b)),g=f?c.indexOf(e):-1;g>=0&&(c.removeAt(g),c.insert(g,f),d=!0)}),c.resumeEvents(),d&&c.fireEvent("datachanged",c),a.callParent(arguments),a.ignoreSelection--},isFilteredRecord:function(a){var b=this,c=b.store,d=b.valueField,e,f=!1;return e=c.findExact(d,a.get(d)),f=e===-1&&(!c.snapshot||b.findRecord(d,a.get(d))!==!1),f=f||!f&&e===-1&&b.forceSelection!==!0&&b.valueStore.findExact(d,a.get(d))>=0,f},doRawQuery:function(){var a=this,b=a.inputEl.dom.value;a.multiSelect&&(b=b.split(a.delimiter).pop()),this.doQuery(b)},onBeforeListRefresh:function(){this.ignoreSelection++},onListRefresh:function(){this.callParent(arguments),this.ignoreSelection--},onListSelectionChange:function(a,b){var c=this,d=c.valueStore,e=[],f;if(!c.ignoreSelection&&c.isExpanded){d.each(function(a){(Ext.Array.contains(b,a)||c.isFilteredRecord(a))&&e.push(a)}),e=Ext.Array.merge(e,b),f=Ext.Array.intersect(e,d.getRange()).length;if(f!=e.length||f!=c.valueStore.getCount())c.setValue(e,!1),(!c.multiSelect||!c.pinList)&&Ext.defer(c.collapse,1,c),d.getCount()>0&&c.fireEvent("select",c,d.getRange()),c.inputEl.focus();c.alignPicker()}},syncSelection:function(){var a=this,b=a.picker,c=a.valueField,d,e,f;b&&(d=b.store,e=[],a.valueStore.each(function(a){var b=d.findExact(c,a.get(c));b>=0&&e.push(d.getAt(b))}),a.ignoreSelection++,f=b.getSelectionModel(),f.deselectAll(),e.length>0&&f.select(e),a.ignoreSelection--)},alignPicker:function(){var a=this,b,c,d="-above",e=a.itemList.getBox(!1,!0);if(this.isExpanded){b=a.getPicker();var f=b.getTargetEl().dom.scrollTop;a.matchFieldWidth&&b.setSize(e.width,b.store&&b.store.getCount()?null:0),b.isFloating()&&(b.alignTo(a.itemList,a.pickerAlign,a.pickerOffset),c=b.el.getY()<a.inputEl.getY(),a.bodyEl[c?"addCls":"removeCls"](a.openCls+d),b.el[c?"addCls":"removeCls"](b.baseCls+d)),b.getSelectedNodes().length>0&&b.getTargetEl().scrollTo("top",f)}},getCursorPosition:function(){var a;return Ext.isIE?(a=document.selection.createRange(),a.collapse(!0),a.moveStart("character",-this.inputEl.dom.value.length),a=a.text.length):a=this.inputEl.dom.selectionStart,a},hasSelectedText:function(){var a,b;return Ext.isIE?(a=document.selection,b=a.createRange(),b.parentElement()==this.inputEl.dom):this.inputEl.dom.selectionStart!=this.inputEl.dom.selectionEnd},onKeyDown:function(a,b){var c=this,d=a.getKey(),e=c.inputEl.dom.value,f=c.valueStore,g=c.selectionModel,h=!1,i,j;!c.readOnly&&!c.disabled&&f.getCount()>0&&(e==""||c.getCursorPosition()===0&&!c.hasSelectedText())&&(d==a.BACKSPACE||d==a.DELETE?(g.getCount()>0?c.valueStore.remove(g.getSelection()):c.valueStore.remove(c.valueStore.last()),c.setValue(c.valueStore.getRange()),g.deselectAll(),h=!0):d==a.RIGHT||d==a.LEFT?g.getCount()===0&&d==a.LEFT?(g.select(f.last()),h=!0):g.getCount()>0&&(i=g.getLastFocused()||g.getLastSelected(),i&&(j=f.indexOf(i),d==a.RIGHT?j<f.getCount()-1?(g.select(j+1,a.shiftKey),h=!0):a.shiftKey||(g.deselect(i),h=!0):d==a.LEFT&&j>0&&(g.select(j-1,a.shiftKey),h=!0))):d==a.A&&a.ctrlKey&&(g.selectAll(),h=a.A),c.inputEl.focus());if(h){c.preventKeyUpEvent=h,a.stopEvent();return}c.enableKeyEvents&&c.callParent(arguments),!a.isSpecialKey()&&!a.hasModifier()&&(c.selectionModel.deselectAll(),c.inputEl.focus())},onKeyUp:function(a,b){var c=this,d=c.inputEl.dom.value,e;if(c.preventKeyUpEvent){a.stopEvent(),c.selectText(0,0),(c.preventKeyUpEvent===!0||a.getKey()===c.preventKeyUpEvent)&&delete c.preventKeyUpEvent;return}if(c.multiSelect&&c.delimiterEndingRegexp&&c.delimiterEndingRegexp.test(d)||c.createNewOnEnter===!0&&a.getKey()==a.ENTER)d=d.replace(c.delimiterEndingRegexp,""),Ext.isEmpty(d)||(e=c.valueStore.findExact(c.valueField,d),e>=0?e=c.valueStore.getAt(e):(e=c.store.findExact(c.valueField,d),e>=0?e=c.store.getAt(e):e=!1),!e&&!c.forceSelection&&(e={},e[c.valueField]=d,e[c.displayField]=d,e=new c.valueStore.model(e)),e&&(c.setValue(c.valueStore.getRange().concat(e)),c.inputEl.dom.value="",c.inputEl.focus()));c.callParent([a,b]),Ext.Function.defer(c.alignPicker,10,c)},onTypeAhead:function(){var a=this,b=a.displayField,c=a.inputEl.dom,d=a.store.findRecord(b,c.value),e=a.getPicker(),f,g,h;d&&(f=d.get(b),g=f.length,h=c.value.length,e.highlightItem(e.getNode(d)),h!==0&&h!==g&&(c.value=f,a.selectText(h,f.length)))},onItemListClick:function(a,b,c){var d=this,e=a.getTarget(".x-boxselect-item"),f=e?a.getTarget(".x-boxselect-item-close"):!1;e?(f?d.removeByListItemNode(e):d.toggleSelectionByListItemNode(e,a.shiftKey),d.inputEl.focus()):d.onTriggerClick()},getMultiSelectItemMarkup:function(){var a=this;return a.multiSelectItemTpl||(a.multiSelectItemTpl=['<tpl for=".">','<li class="x-boxselect-item ','<tpl if="this.isSelected(values.'+a.valueField+')">'," selected","</tpl>",'" qtip="{[typeof values === "string" ? values : values.'+a.displayField+']}">','<div class="x-boxselect-item-text">{[typeof values === "string" ? values : values.'+a.displayField+"]}</div>",'<div class="x-tab-close-btn x-boxselect-item-close"></div>',"</li>","</tpl>",{compile:!0,disableFormats:!0,isSelected:function(b){var c=a.valueStore.findExact(a.valueField,b);if(c>=0)return a.selectionModel.isSelected(a.valueStore.getAt(c))}}]),this.getTpl("multiSelectItemTpl").apply(Ext.Array.pluck(this.valueStore.getRange(),"data"))},applyMultiselectItemMarkup:function(){var a=this;a.itemList&&(a.el.appendChild(a.inputElCt),a.itemList.update(a.getMultiSelectItemMarkup()),a.itemList.appendChild(a.inputElCt),a.autoSize(),a.alignPicker())},getRecordByListItemNode:function(a){var b=this,c=0,d=b.itemList.dom.firstChild;while(d&&d.nextSibling){if(d==a)break;c++,d=d.nextSibling}return c=d==a?c:!1,c===!1?!1:b.valueStore.getAt(c)},toggleSelectionByListItemNode:function(a,b){var c=this,d=c.getRecordByListItemNode(a);d&&(c.selectionModel.isSelected(d)?c.selectionModel.deselect(d):c.selectionModel.select(d,b))},removeByListItemNode:function(a){var b=this,c=b.getRecordByListItemNode(a);c&&(b.valueStore.remove(c),b.setValue(b.valueStore.getRange()))},getRawValue:function(){var a=this,b=a.inputEl,c;return a.inputEl=!1,c=a.callParent(arguments),a.inputEl=b,c},setRawValue:function(a){var b=this,c=b.inputEl,d;return b.inputEl=!1,d=b.callParent([a]),b.inputEl=c,d},setValue:function(a,b,c){var d=this,e=d.valueStore,f=d.valueField,g,h,i,j,k,l=[];Ext.isString(a)&&d.multiSelect&&(a=a.split(d.delimiter)),a=Ext.Array.from(a);for(i=0,h=a.length;i<h;i++){g=a[i];if(!g||!g.isModel)j=e.findExact(f,g),j>=0?a[i]=e.getAt(j):(j=d.findRecord(f,g),j?a[i]=j:d.forceSelection&&l.push(g))}if(c!==!0&&l.length>0&&d.queryMode==="remote"){var m={};return m[d.valueField]=l.join(d.delimiter),d.store.load({params:m,callback:function(){d.itemList.unmask(),d.setValue(a,b,!0)}}),!1}!d.multiSelect&&a.length>0&&(a=a[a.length-1]),d.callParent([a,b]),d.updateValueStore()},getValueRecords:function(){return this.valueStore.getRange()},assertValue:function(){var a=this,b=a.inputEl.dom.value,c=b?a.findRecordByDisplay(b):!1;c&&!Ext.Array.contains(a.value,c.get(a.valueField))&&a.setValue(a.value.concat(c.get(a.valueField))),a.inputEl.dom.value="",a.collapse()},updateValueStore:function(){var a=this,b=a.valueStore;b.suspendEvents(),b.removeAll(),Ext.isArray(a.valueModels)&&b.add(a.valueModels),b.resumeEvents(),b.fireEvent("datachanged",b)},applyEmptyText:function(){var a=this,b=a.emptyText,c;a.rendered&&b&&(c=a.value.length<1&&!a.hasFocus,c&&(a.setRawValue(b),a.inputEl.addCls(a.emptyCls)),a.autoSize())},onFocus:function(){var a=this,b=a.focusCls,c=a.itemList;b&&c&&c.addCls(b),a.callParent(arguments)},onBlur:function(){var a=this,b=a.focusCls,c=a.itemList;b&&c&&c.removeCls(b),a.callParent(arguments)},renderActiveError:function(){var a=this,b=a.invalidCls,c=a.itemList,d=a.hasActiveError();b&&c&&c[d?"addCls":"removeCls"](a.invalidCls+"-field"),a.callParent(arguments)},autoSize:function(){if(!this.rendered)return this;var a=this,b=a.inputElCt,c=b.dom.previousSibling,d=a.itemList,e=d.getBox(!0,!0),f=e.width,g=f-10,h;c&&(g-=c.offsetLeft+Ext.fly(c).getWidth()),g<35&&(g=f-10),b.setWidth(g+"px"),a.callParent(arguments),h=d.getHeight(),a.lastHeight?a.lastHeight!=h&&(a.fireEvent("autosize",h),a.lastHeight=h,a.alignPicker()):a.lastHeight=h}}),Ext.define("Ext.ux.layout.component.field.BoxSelectField",{alias:["layout.boxselectfield"],extend:"Ext.layout.component.field.Field",type:"boxselectfield",sizeBodyContents:function(a,b){var c=this,d=c.owner,e=d.itemList,f=d.triggerWrap,g=d.getTriggerWidth();if(d.hideTrigger||d.readOnly||g>0)c.setElementSize(e,Ext.isNumber(a)?a-g:a),f.setWidth(g),d.autoSize()}});
Ext.define("Components.ObjectBrowser",{extend:"Ext.tree.Panel",alias:"widget.objectbrowser",objId:1,getNewId:function(){return this.objId++,this.objId},initComponent:function(){return Ext.apply(this,{forceFit:!0,useArrows:!0,rootVisible:!1,multiSelect:!0,columns:[{xtype:"treecolumn",text:this.keyTitle||"Key",sortable:!0,dataIndex:"key",flex:2},{text:this.valueTitle||"Value",sortable:!0,dataIndex:"value"}]}),typeof this.nullValue=="undefined"&&(this.nullValue="null"),this.store=this.createStore(this.data),this.callParent(arguments)},createStore:function(a){var b=this.id+"-Objects";return Ext.define(b,{extend:"Ext.data.Model",fields:[{name:"key",type:"string"},{name:"value",type:"string"},{name:"id",type:"string"}],idProperty:"id"}),Ext.create("Ext.data.TreeStore",{folderSort:!0,model:b,proxy:{type:"memory",data:{text:"root",children:this.parseObject(a)}}})},getNodeId:function(a){return this.getId()+"-node-"+a},parseObject:function(a){function d(a,b){if(typeof b=="object"&&b!==null)return{key:a,value:'<a href="'+c.getNodeId(b)+'">'+c.getTypeName(b)+"</a>",iconCls:"tree-node-"+c.findType(b),children:c.parseObject(b)};var d=b===null?c.nullValue:b;return{key:a,value:d,leaf:!0,iconCls:"tree-node-"+c.findType(d)}}var b=[],c=this;if(!a._objTreeId){a._objTreeId=this.getNewId();if(a.hasOwnProperty("length")&&typeof a=="object"){var e=a.length;while(e--)b.push(d("["+e+"]",a[e]))}else if(!a.hasOwnProperty("length")&&typeof a=="object")for(var f in a)a.hasOwnProperty(f)&&f!="_objTreeId"&&b.push(d(f,a[f]))}return b},getTypeName:function(a){return typeof a!="undefined"?a.constructor.name:"undefined"},findType:function(a){return typeof a=="object"?a.hasOwnProperty("length")?"array":"object":typeof a}});
(function(){var a="undefined"!=typeof exports?global:window;a.glMatrixArrayType=a.MatrixArray=null,a.vec3={},a.mat3={},a.mat4={},a.quat4={},a.setMatrixArrayType=function(a){return glMatrixArrayType=MatrixArray=a},a.determineMatrixArrayType=function(){return setMatrixArrayType("undefined"!=typeof Float32Array?Float32Array:Array)},determineMatrixArrayType()})(),vec3.create=function(a){var b=new MatrixArray(3);return a?(b[0]=a[0],b[1]=a[1],b[2]=a[2]):b[0]=b[1]=b[2]=0,b},vec3.set=function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b},vec3.add=function(a,b,c){return!c||a===c?(a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a):(c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c)},vec3.subtract=function(a,b,c){return!c||a===c?(a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a):(c[0]=a[0]-b[0],c[1]=a[1]-b[1],c[2]=a[2]-b[2],c)},vec3.multiply=function(a,b,c){return!c||a===c?(a[0]*=b[0],a[1]*=b[1],a[2]*=b[2],a):(c[0]=a[0]*b[0],c[1]=a[1]*b[1],c[2]=a[2]*b[2],c)},vec3.negate=function(a,b){return b||(b=a),b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b},vec3.scale=function(a,b,c){return!c||a===c?(a[0]*=b,a[1]*=b,a[2]*=b,a):(c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b,c)},vec3.normalize=function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=Math.sqrt(c*c+d*d+e*e);return f?1===f?(b[0]=c,b[1]=d,b[2]=e,b):(f=1/f,b[0]=c*f,b[1]=d*f,b[2]=e*f,b):(b[0]=0,b[1]=0,b[2]=0,b)},vec3.cross=function(a,b,c){c||(c=a);var d=a[0],e=a[1],a=a[2],f=b[0],g=b[1],b=b[2];return c[0]=e*b-a*g,c[1]=a*f-d*b,c[2]=d*g-e*f,c},vec3.length=function(a){var b=a[0],c=a[1],a=a[2];return Math.sqrt(b*b+c*c+a*a)},vec3.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},vec3.direction=function(a,b,c){c||(c=a);var d=a[0]-b[0],e=a[1]-b[1],a=a[2]-b[2],b=Math.sqrt(d*d+e*e+a*a);return b?(b=1/b,c[0]=d*b,c[1]=e*b,c[2]=a*b,c):(c[0]=0,c[1]=0,c[2]=0,c)},vec3.lerp=function(a,b,c,d){return d||(d=a),d[0]=a[0]+c*(b[0]-a[0]),d[1]=a[1]+c*(b[1]-a[1]),d[2]=a[2]+c*(b[2]-a[2]),d},vec3.dist=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return Math.sqrt(c*c+d*d+e*e)},vec3.unproject=function(a,b,c,d,e){e||(e=a);var f=mat4.create(),g=new MatrixArray(4);return g[0]=2*(a[0]-d[0])/d[2]-1,g[1]=2*(a[1]-d[1])/d[3]-1,g[2]=2*a[2]-1,g[3]=1,mat4.multiply(c,b,f),mat4.inverse(f)?(mat4.multiplyVec4(f,g),0===g[3]?null:(e[0]=g[0]/g[3],e[1]=g[1]/g[3],e[2]=g[2]/g[3],e)):null},vec3.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"},mat3.create=function(a){var b=new MatrixArray(9);return a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8]),b},mat3.set=function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b},mat3.identity=function(a){return a||(a=mat3.create()),a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},mat3.transpose=function(a,b){if(!b||a===b){var c=a[1],d=a[2],e=a[5];return a[1]=a[3],a[2]=a[6],a[3]=c,a[5]=a[7],a[6]=d,a[7]=e,a}return b[0]=a[0],b[1]=a[3],b[2]=a[6],b[3]=a[1],b[4]=a[4],b[5]=a[7],b[6]=a[2],b[7]=a[5],b[8]=a[8],b},mat3.toMat4=function(a,b){return b||(b=mat4.create()),b[15]=1,b[14]=0,b[13]=0,b[12]=0,b[11]=0,b[10]=a[8],b[9]=a[7],b[8]=a[6],b[7]=0,b[6]=a[5],b[5]=a[4],b[4]=a[3],b[3]=0,b[2]=a[2],b[1]=a[1],b[0]=a[0],b},mat3.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"},mat4.create=function(a){var b=new MatrixArray(16);return a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]),b},mat4.set=function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},mat4.identity=function(a){return a||(a=mat4.create()),a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},mat4.transpose=function(a,b){if(!b||a===b){var c=a[1],d=a[2],e=a[3],f=a[6],g=a[7],h=a[11];return a[1]=a[4],a[2]=a[8],a[3]=a[12],a[4]=c,a[6]=a[9],a[7]=a[13],a[8]=d,a[9]=f,a[11]=a[14],a[12]=e,a[13]=g,a[14]=h,a}return b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15],b},mat4.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],m=a[11],n=a[12],o=a[13],p=a[14],a=a[15];return n*k*h*e-j*o*h*e-n*g*l*e+f*o*l*e+j*g*p*e-f*k*p*e-n*k*d*i+j*o*d*i+n*c*l*i-b*o*l*i-j*c*p*i+b*k*p*i+n*g*d*m-f*o*d*m-n*c*h*m+b*o*h*m+f*c*p*m-b*g*p*m-j*g*d*a+f*k*d*a+j*c*h*a-b*k*h*a-f*c*l*a+b*g*l*a},mat4.inverse=function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7],k=a[8],l=a[9],m=a[10],n=a[11],o=a[12],p=a[13],q=a[14],r=a[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,b[0]=(h*D-i*C+j*B)*E,b[1]=(-d*D+e*C-f*B)*E,b[2]=(p*x-q*w+r*v)*E,b[3]=(-l*x+m*w-n*v)*E,b[4]=(-g*D+i*A-j*z)*E,b[5]=(c*D-e*A+f*z)*E,b[6]=(-o*x+q*u-r*t)*E,b[7]=(k*x-m*u+n*t)*E,b[8]=(g*C-h*A+j*y)*E,b[9]=(-c*C+d*A-f*y)*E,b[10]=(o*w-p*u+r*s)*E,b[11]=(-k*w+l*u-n*s)*E,b[12]=(-g*B+h*z-i*y)*E,b[13]=(c*B-d*z+e*y)*E,b[14]=(-o*v+p*t-q*s)*E,b[15]=(k*v-l*t+m*s)*E,b):null},mat4.toRotationMat=function(a,b){return b||(b=mat4.create()),b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},mat4.toMat3=function(a,b){return b||(b=mat3.create()),b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[4],b[4]=a[5],b[5]=a[6],b[6]=a[8],b[7]=a[9],b[8]=a[10],b},mat4.toInverseMat3=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[4],g=a[5],h=a[6],i=a[8],j=a[9],k=a[10],l=k*g-h*j,m=-k*f+h*i,n=j*f-g*i,o=c*l+d*m+e*n;return o?(o=1/o,b||(b=mat3.create()),b[0]=l*o,b[1]=(-k*d+e*j)*o,b[2]=(h*d-e*g)*o,b[3]=m*o,b[4]=(k*c-e*i)*o,b[5]=(-h*c+e*f)*o,b[6]=n*o,b[7]=(-j*c+d*i)*o,b[8]=(g*c-d*f)*o,b):null},mat4.multiply=function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7],l=a[8],m=a[9],n=a[10],o=a[11],p=a[12],q=a[13],r=a[14],a=a[15],s=b[0],t=b[1],u=b[2],v=b[3],w=b[4],x=b[5],y=b[6],z=b[7],A=b[8],B=b[9],C=b[10],D=b[11],E=b[12],F=b[13],G=b[14],b=b[15];return c[0]=s*d+t*h+u*l+v*p,c[1]=s*e+t*i+u*m+v*q,c[2]=s*f+t*j+u*n+v*r,c[3]=s*g+t*k+u*o+v*a,c[4]=w*d+x*h+y*l+z*p,c[5]=w*e+x*i+y*m+z*q,c[6]=w*f+x*j+y*n+z*r,c[7]=w*g+x*k+y*o+z*a,c[8]=A*d+B*h+C*l+D*p,c[9]=A*e+B*i+C*m+D*q,c[10]=A*f+B*j+C*n+D*r,c[11]=A*g+B*k+C*o+D*a,c[12]=E*d+F*h+G*l+b*p,c[13]=E*e+F*i+G*m+b*q,c[14]=E*f+F*j+G*n+b*r,c[15]=E*g+F*k+G*o+b*a,c},mat4.multiplyVec3=function(a,b,c){c||(c=b);var d=b[0],e=b[1],b=b[2];return c[0]=a[0]*d+a[4]*e+a[8]*b+a[12],c[1]=a[1]*d+a[5]*e+a[9]*b+a[13],c[2]=a[2]*d+a[6]*e+a[10]*b+a[14],c},mat4.multiplyVec4=function(a,b,c){c||(c=b);var d=b[0],e=b[1],f=b[2],b=b[3];return c[0]=a[0]*d+a[4]*e+a[8]*f+a[12]*b,c[1]=a[1]*d+a[5]*e+a[9]*f+a[13]*b,c[2]=a[2]*d+a[6]*e+a[10]*f+a[14]*b,c[3]=a[3]*d+a[7]*e+a[11]*f+a[15]*b,c},mat4.translate=function(a,b,c){var d=b[0],e=b[1],b=b[2],f,g,h,i,j,k,l,m,n,o,p,q;return!c||a===c?(a[12]=a[0]*d+a[4]*e+a[8]*b+a[12],a[13]=a[1]*d+a[5]*e+a[9]*b+a[13],a[14]=a[2]*d+a[6]*e+a[10]*b+a[14],a[15]=a[3]*d+a[7]*e+a[11]*b+a[15],a):(f=a[0],g=a[1],h=a[2],i=a[3],j=a[4],k=a[5],l=a[6],m=a[7],n=a[8],o=a[9],p=a[10],q=a[11],c[0]=f,c[1]=g,c[2]=h,c[3]=i,c[4]=j,c[5]=k,c[6]=l,c[7]=m,c[8]=n,c[9]=o,c[10]=p,c[11]=q,c[12]=f*d+j*e+n*b+a[12],c[13]=g*d+k*e+o*b+a[13],c[14]=h*d+l*e+p*b+a[14],c[15]=i*d+m*e+q*b+a[15],c)},mat4.scale=function(a,b,c){var d=b[0],e=b[1],b=b[2];return!c||a===c?(a[0]*=d,a[1]*=d,a[2]*=d,a[3]*=d,a[4]*=e,a[5]*=e,a[6]*=e,a[7]*=e,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a):(c[0]=a[0]*d,c[1]=a[1]*d,c[2]=a[2]*d,c[3]=a[3]*d,c[4]=a[4]*e,c[5]=a[5]*e,c[6]=a[6]*e,c[7]=a[7]*e,c[8]=a[8]*b,c[9]=a[9]*b,c[10]=a[10]*b,c[11]=a[11]*b,c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c)},mat4.rotate=function(a,b,c,d){var e=c[0],f=c[1],c=c[2],g=Math.sqrt(e*e+f*f+c*c),h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;return g?(1!==g&&(g=1/g,e*=g,f*=g,c*=g),h=Math.sin(b),i=Math.cos(b),j=1-i,b=a[0],g=a[1],k=a[2],l=a[3],m=a[4],n=a[5],o=a[6],p=a[7],q=a[8],r=a[9],s=a[10],t=a[11],u=e*e*j+i,v=f*e*j+c*h,w=c*e*j-f*h,x=e*f*j-c*h,y=f*f*j+i,z=c*f*j+e*h,A=e*c*j+f*h,e=f*c*j-e*h,f=c*c*j+i,d?a!==d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a,d[0]=b*u+m*v+q*w,d[1]=g*u+n*v+r*w,d[2]=k*u+o*v+s*w,d[3]=l*u+p*v+t*w,d[4]=b*x+m*y+q*z,d[5]=g*x+n*y+r*z,d[6]=k*x+o*y+s*z,d[7]=l*x+p*y+t*z,d[8]=b*A+m*e+q*f,d[9]=g*A+n*e+r*f,d[10]=k*A+o*e+s*f,d[11]=l*A+p*e+t*f,d):null},mat4.rotateX=function(a,b,c){var d=Math.sin(b),b=Math.cos(b),e=a[4],f=a[5],g=a[6],h=a[7],i=a[8],j=a[9],k=a[10],l=a[11];return c?a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a,c[4]=e*b+i*d,c[5]=f*b+j*d,c[6]=g*b+k*d,c[7]=h*b+l*d,c[8]=e*-d+i*b,c[9]=f*-d+j*b,c[10]=g*-d+k*b,c[11]=h*-d+l*b,c},mat4.rotateY=function(a,b,c){var d=Math.sin(b),b=Math.cos(b),e=a[0],f=a[1],g=a[2],h=a[3],i=a[8],j=a[9],k=a[10],l=a[11];return c?a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a,c[0]=e*b+i*-d,c[1]=f*b+j*-d,c[2]=g*b+k*-d,c[3]=h*b+l*-d,c[8]=e*d+i*b,c[9]=f*d+j*b,c[10]=g*d+k*b,c[11]=h*d+l*b,c},mat4.rotateZ=function(a,b,c){var d=Math.sin(b),b=Math.cos(b),e=a[0],f=a[1],g=a[2],h=a[3],i=a[4],j=a[5],k=a[6],l=a[7];return c?a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a,c[0]=e*b+i*d,c[1]=f*b+j*d,c[2]=g*b+k*d,c[3]=h*b+l*d,c[4]=e*-d+i*b,c[5]=f*-d+j*b,c[6]=g*-d+k*b,c[7]=h*-d+l*b,c},mat4.frustum=function(a,b,c,d,e,f,g){g||(g=mat4.create());var h=b-a,i=d-c,j=f-e;return g[0]=2*e/h,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=2*e/i,g[6]=0,g[7]=0,g[8]=(b+a)/h,g[9]=(d+c)/i,g[10]=-(f+e)/j,g[11]=-1,g[12]=0,g[13]=0,g[14]=-(2*f*e)/j,g[15]=0,g},mat4.perspective=function(a,b,c,d,e){return a=c*Math.tan(a*Math.PI/360),b*=a,mat4.frustum(-b,b,-a,a,c,d,e)},mat4.ortho=function(a,b,c,d,e,f,g){g||(g=mat4.create());var h=b-a,i=d-c,j=f-e;return g[0]=2/h,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=2/i,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=-2/j,g[11]=0,g[12]=-(a+b)/h,g[13]=-(d+c)/i,g[14]=-(f+e)/j,g[15]=1,g},mat4.lookAt=function(a,b,c,d){d||(d=mat4.create());var e,f,g,h,i,j,k,l,m=a[0],n=a[1],a=a[2];return g=c[0],h=c[1],f=c[2],k=b[0],c=b[1],e=b[2],m===k&&n===c&&a===e?mat4.identity(d):(b=m-k,c=n-c,k=a-e,l=1/Math.sqrt(b*b+c*c+k*k),b*=l,c*=l,k*=l,e=h*k-f*c,f=f*b-g*k,g=g*c-h*b,(l=Math.sqrt(e*e+f*f+g*g))?(l=1/l,e*=l,f*=l,g*=l):g=f=e=0,h=c*g-k*f,i=k*e-b*g,j=b*f-c*e,(l=Math.sqrt(h*h+i*i+j*j))?(l=1/l,h*=l,i*=l,j*=l):j=i=h=0,d[0]=e,d[1]=h,d[2]=b,d[3]=0,d[4]=f,d[5]=i,d[6]=c,d[7]=0,d[8]=g,d[9]=j,d[10]=k,d[11]=0,d[12]=-(e*m+f*n+g*a),d[13]=-(h*m+i*n+j*a),d[14]=-(b*m+c*n+k*a),d[15]=1,d)},mat4.fromRotationTranslation=function(a,b,c){c||(c=mat4.create());var d=a[0],e=a[1],f=a[2],g=a[3],h=d+d,i=e+e,j=f+f,a=d*h,k=d*i,d=d*j,l=e*i,e=e*j,f=f*j,h=g*h,i=g*i,g=g*j;return c[0]=1-(l+f),c[1]=k+g,c[2]=d-i,c[3]=0,c[4]=k-g,c[5]=1-(a+f),c[6]=e+h,c[7]=0,c[8]=d+i,c[9]=e-h,c[10]=1-(a+l),c[11]=0,c[12]=b[0],c[13]=b[1],c[14]=b[2],c[15]=1,c},mat4.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"},quat4.create=function(a){var b=new MatrixArray(4);return a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]),b},quat4.set=function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},quat4.calculateW=function(a,b){var c=a[0],d=a[1],e=a[2];return!b||a===b?(a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a):(b[0]=c,b[1]=d,b[2]=e,b[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e)),b)},quat4.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},quat4.inverse=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],c=(c=c*c+d*d+e*e+f*f)?1/c:0;return!b||a===b?(a[0]*=-c,a[1]*=-c,a[2]*=-c,a[3]*=c,a):(b[0]=-a[0]*c,b[1]=-a[1]*c,b[2]=-a[2]*c,b[3]=a[3]*c,b)},quat4.conjugate=function(a,b){return!b||a===b?(a[0]*=-1,a[1]*=-1,a[2]*=-1,a):(b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=a[3],b)},quat4.length=function(a){var b=a[0],c=a[1],d=a[2],a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)},quat4.normalize=function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=a[3],g=Math.sqrt(c*c+d*d+e*e+f*f);return 0===g?(b[0]=0,b[1]=0,b[2]=0,b[3]=0,b):(g=1/g,b[0]=c*g,b[1]=d*g,b[2]=e*g,b[3]=f*g,b)},quat4.multiply=function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],a=a[3],g=b[0],h=b[1],i=b[2],b=b[3];return c[0]=d*b+a*g+e*i-f*h,c[1]=e*b+a*h+f*g-d*i,c[2]=f*b+a*i+d*h-e*g,c[3]=a*b-d*g-e*h-f*i,c},quat4.multiplyVec3=function(a,b,c){c||(c=b);var d=b[0],e=b[1],f=b[2],b=a[0],g=a[1],h=a[2],a=a[3],i=a*d+g*f-h*e,j=a*e+h*d-b*f,k=a*f+b*e-g*d,d=-b*d-g*e-h*f;return c[0]=i*a+d*-b+j*-h-k*-g,c[1]=j*a+d*-g+k*-b-i*-h,c[2]=k*a+d*-h+i*-g-j*-b,c},quat4.toMat3=function(a,b){b||(b=mat3.create());var c=a[0],d=a[1],e=a[2],f=a[3],g=c+c,h=d+d,i=e+e,j=c*g,k=c*h,c=c*i,l=d*h,d=d*i,e=e*i,g=f*g,h=f*h,f=f*i;return b[0]=1-(l+e),b[1]=k+f,b[2]=c-h,b[3]=k-f,b[4]=1-(j+e),b[5]=d+g,b[6]=c+h,b[7]=d-g,b[8]=1-(j+l),b},quat4.toMat4=function(a,b){b||(b=mat4.create());var c=a[0],d=a[1],e=a[2],f=a[3],g=c+c,h=d+d,i=e+e,j=c*g,k=c*h,c=c*i,l=d*h,d=d*i,e=e*i,g=f*g,h=f*h,f=f*i;return b[0]=1-(l+e),b[1]=k+f,b[2]=c-h,b[3]=0,b[4]=k-f,b[5]=1-(j+e),b[6]=d+g,b[7]=0,b[8]=c+h,b[9]=d-g,b[10]=1-(j+l),b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},quat4.slerp=function(a,b,c,d){d||(d=a);var e=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3],f,g;return 1<=Math.abs(e)?(d!==a&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3]),d):(f=Math.acos(e),g=Math.sqrt(1-e*e),.001>Math.abs(g)?(d[0]=.5*a[0]+.5*b[0],d[1]=.5*a[1]+.5*b[1],d[2]=.5*a[2]+.5*b[2],d[3]=.5*a[3]+.5*b[3],d):(e=Math.sin((1-c)*f)/g,c=Math.sin(c*f)/g,d[0]=a[0]*e+b[0]*c,d[1]=a[1]*e+b[1]*c,d[2]=a[2]*e+b[2]*c,d[3]=a[3]*e+b[3]*c,d))},quat4.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"},function(a){function c(b){var c=[].slice.call(arguments,1),d=0,e=!0;return b=a.event.fix(b||window.event),b.type="mousewheel",b.wheelDelta&&(d=b.wheelDelta/120),b.detail&&(d=-b.detail/3),c.unshift(b,d),a.event.handle.apply(this,c)}var b=["DOMMouseScroll","mousewheel"];a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=b.length;a;)this.addEventListener(b[--a],c,!1);else this.onmousewheel=c},teardown:function(){if(this.removeEventListener)for(var a=b.length;a;)this.removeEventListener(b[--a],c,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}(jQuery);
var ChemDoodle=function(){var a={};a.structures={},a.iChemLabs={},a.informatics={},a.io={};var b="4.6.0";return a.getVersion=function(){return b},a}();(function(a,b,c,d,e){b.SERVER_URL="http://ichemlabs.cloud.chemdoodle.com/ICL_servlets/WebHQ1",b.inRelay=!1,b.asynchronous=!0,b.INFO={userAgent:navigator.userAgent,v_cwc:a.getVersion(),v_jQuery:e.version,v_jQuery_ui:e.ui?e.ui.version:"N/A"},b.contactServer=function(a,c,d,f){this.inRelay?alert("Already connecting to the server, please wait for the first request to finish."):(b.inRelay=!0,e.ajax({dataType:"text",type:"POST",data:JSON.stringify({call:a,content:c,info:b.INFO}),url:this.SERVER_URL,success:function(a){b.inRelay=!1,o=JSON.parse(a),o.message&&alert(o.message),d!=null&&o.content&&!o.stop&&d(o.content),o.stop&&f!=null&&f()},error:function(a,c,d){b.inRelay=!1,alert("Server connectivity failed. Please try again or update this browser to the latest version. (XHR2 not supported)"),f!=null&&f()},beforeSend:function(a){a.withCredentials=!0},async:b.asynchronous}))},b.optimize=function(a,b,d,e){this.contactServer("optimize",{mol:c.toJSONDummy(a),dimension:b},function(e){var f=c.fromJSONDummy(e.mol);if(b==2){for(var g=0,h=f.atoms.length;g<h;g++)a.atoms[g].x=f.atoms[g].x,a.atoms[g].y=f.atoms[g].y;d()}else if(b==3){for(var g=0,h=f.atoms.length;g<h;g++)f.atoms[g].x/=20,f.atoms[g].y/=20,f.atoms[g].z/=20;d(f)}},e)},b.readSMILES=function(a,b,d){this.contactServer("readSMILES",{smiles:a},function(a){b(c.fromJSONDummy(a.mol))},d)},b.writeSMILES=function(a,b,d){this.contactServer("writeSMILES",{mol:c.toJSONDummy(a)},function(a){b(a.smiles)},d)},b.saveFile=function(a,b,d,e){this.contactServer("saveFile",{mol:c.toJSONDummy(a),ext:b},function(a){d(a.link)},e)},b.getMoleculeFromDatabase=function(a,b,d,e,f){this.contactServer("getMoleculeFromDatabase",{database:a,dimension:e?e:2,query:b},function(a){if(e==3)for(var b=0,f=a.mol.a.length;b<f;b++)a.mol.a[b].x/=20,a.mol.a[b].y/=-20,a.mol.a[b].z/=20;d(c.fromJSONDummy(a.mol))},f)},b.getMoleculeFromContent=function(a,b,c,d){this.contactServer("getMoleculeFromContent",{content:a,format:b},function(a){var b=!1;for(var d=0,e=a.mol.a.length;d<e;d++)if(a.mol.a[d].z!=0){b=!0;break}if(b)for(var d=0,e=a.mol.a.length;d<e;d++)a.mol.a[d].x/=20,a.mol.a[d].y/=20,a.mol.a[d].z/=20;c(ChemDoodle.io.fromJSONDummy(a.mol))},d)},b.calculate=function(a,b,d,e){this.contactServer("calculate",{mol:c.toJSONDummy(a),descriptors:b},function(a){d(a)},e)},b.simulate1HNMR=function(b,d,e){this.contactServer("simulateNMR",{mol:c.toJSONDummy(b),nucleus:"H",isotope:1},function(b){d(a.readJCAMP(b.jcamp))},e)},b.simulate13CNMR=function(b,d,e){this.contactServer("simulateNMR",{mol:c.toJSONDummy(b),nucleus:"C",isotope:13},function(b){d(a.readJCAMP(b.jcamp))},e)},b.simulateMassParentPeak=function(b,d,e){this.contactServer("simulateMassParentPeak",{mol:c.toJSONDummy(b)},function(b){d(a.readJCAMP(b.jcamp))},e)},b.getOptimizedPDBStructure=function(a,b,e,f){this.contactServer("getOptimizedPDBStructure",{id:a,withAtoms:b},function(a){var b=null;if(a.mol)b=c.fromJSONDummy(a.mol);else var b=new d.Molecule;b.chains=c.fromJSONChains(a.ribbons),b.fromJSON=!0,e(b)},f)},b.getAd=function(a,b){this.contactServer("getAd",{},function(b){a(b.image_url,b.target_url)},b)},b.kekulize=function(a,b,d){this.contactServer("kekulize",{mol:c.toJSONDummy(a)},function(a){b(c.fromJSONDummy(a.mol))},d)},b.isGraphIsomorphism=function(a,b,d,e){this.contactServer("isGraphIsomorphism",{arrow:c.toJSONDummy(a),target:c.toJSONDummy(b)},function(a){d(a.value)},e)},b.isSubgraphIsomorphism=function(a,b,d,e){this.contactServer("isSubgraphIsomorphism",{arrow:c.toJSONDummy(a),target:c.toJSONDummy(b)},function(a){d(a.value)},e)},b.readIUPACName=function(a,b,d){this.contactServer("readIUPACName",{iupac:a},function(a){b(c.fromJSONDummy(a.mol))},d)},b.generateImage=function(a,b,d,e){this.contactServer("generateImage",{mol:c.toJSONDummy(a),ext:b},function(a){d(a.link)},e)},b.getZeoliteFromIZA=function(a,b,c,d,e,f){this.contactServer("getZeoliteFromIZA",{query:a},function(a){b(ChemDoodle.readCIF(a.cif,c,d,e))},f)}})(ChemDoodle,ChemDoodle.iChemLabs,ChemDoodle.io,ChemDoodle.structures,jQuery),ChemDoodle.extensions=function(a,b,c){var d={};return d.stringStartsWith=function(a,b){return a.match("^"+b)==b},d.vec3AngleFrom=function(a,d){var e=b.length(a),f=b.length(d),g=b.dot(a,d),h=g/e/f;return c.acos(h)},d.contextHashTo=function(b,c,d,e,f,g,h){var i=0,j=(new a.Point(c,d)).distance(new a.Point(e,f)),k=!1,l=c,m=d,n=e-c,o=f-d;while(i<j){if(k){if(i+h>j){b.moveTo(e,f);break}var p=h/j;l+=p*n,m+=p*o,b.moveTo(l,m),i+=h}else{if(i+g>j){b.lineTo(e,f);break}var p=g/j;l+=p*n,m+=p*o,b.lineTo(l,m),i+=g}k=!k}},d.contextRoundRect=function(a,b,c,d,e,f){a.beginPath(),a.moveTo(b+f,c),a.lineTo(b+d-f,c),a.quadraticCurveTo(b+d,c,b+d,c+f),a.lineTo(b+d,c+e-f),a.quadraticCurveTo(b+d,c+e,b+d-f,c+e),a.lineTo(b+f,c+e),a.quadraticCurveTo(b,c+e,b,c+e-f),a.lineTo(b,c+f),a.quadraticCurveTo(b,c,b+f,c),a.closePath()},d.contextEllipse=function(a,b,c,d,e){var f=.5522848,g=d/2*f,h=e/2*f,i=b+d,j=c+e,k=b+d/2,l=c+e/2;a.beginPath(),a.moveTo(b,l),a.bezierCurveTo(b,l-h,k-g,c,k,c),a.bezierCurveTo(k+g,c,i,l-h,i,l),a.bezierCurveTo(i,l+h,k+g,j,k,j),a.bezierCurveTo(k-g,j,b,l+h,b,l),a.closePath()},d}(ChemDoodle.structures,vec3,Math),ChemDoodle.math=function(a,b,c){var d={},e={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return d.angleBetweenLargest=function(a){if(a.length==0)return{angle:0,largest:c.PI*2};if(a.length==1)return{angle:a[0]+c.PI,largest:c.PI*2};var b=0,d=0,e=-1;for(var f=0,g=a.length-1;f<g;f++){var h=a[f+1]-a[f];h>b&&(b=h,d=(a[f+1]+a[f])/2,e=f)}var i=a[0]+c.PI*2-a[a.length-1];return i>b&&(d=a[0]-i/2,b=i,d<0&&(d+=c.PI*2),e=a.length-1),{angle:d,largest:b}},d.isBetween=function(a,b,c){return a>=b&&a<=c},d.getRGB=function(b,c){var d=[0,0,0];e[b.toLowerCase()]!=null&&(b=e[b.toLowerCase()]);if(b.charAt(0)=="#")return b.length==4&&(b="#"+b.charAt(1)+b.charAt(1)+b.charAt(2)+b.charAt(2)+b.charAt(3)+b.charAt(3)),[parseInt(b.substring(1,3),16)/255*c,parseInt(b.substring(3,5),16)/255*c,parseInt(b.substring(5,7),16)/255*c];if(a.stringStartsWith(b,"rgb")){var f=b.replace(/rgb\(|\)/g,"").split(",");return f.length!=3?d:[parseInt(f[0])/255*c,parseInt(f[1])/255*c,parseInt(f[2])/255*c]}return d},d.distanceFromPointToLineInclusive=function(a,e,f){var g=e.distance(f),h=e.angle(f),i=c.PI/2-h,j=new b.Point(a.x-e.x,a.y-e.x),k=new b.Point,l=e.angle(a)+i,n=e.distance(a);return pcopRot=new b.Point(n*c.cos(l),-n*c.sin(l)),d.isBetween(-pcopRot.y,0,g)?c.abs(pcopRot.x):-1},d.hsl2rgb=function(a,b,c){var d,e,f;if(b==0)d=e=f=c;else{function g(a,b,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?a+(b-a)*6*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a}var h=c<.5?c*(1+b):c+b-c*b,i=2*c-h;d=g(i,h,a+1/3),e=g(i,h,a),f=g(i,h,a-1/3)}return[d*255,e*255,f*255]},d}(ChemDoodle.extensions,ChemDoodle.structures,Math),ChemDoodle.featureDetection=function(a,b,c,d){var e={};return e.supports_canvas=function(){return!!c.createElement("canvas").getContext},e.supports_canvas_text=function(){if(!e.supports_canvas())return!1;var a=c.createElement("canvas"),b=a.getContext("2d");return typeof b.fillText=="function"},e.supports_webgl=function(){var a=c.createElement("canvas");try{if(a.getContext("webgl"))return!0;if(a.getContext("experimental-webgl"))return!0}catch(b){}return!1},e.supports_xhr2=function(){return b.support.cors},e.supports_touch=function(){return"ontouchstart"in d},e.supports_gesture=function(){return"ongesturestart"in d},e}(ChemDoodle.iChemLabs,jQuery,document,window),ChemDoodle.SYMBOLS=["H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br","Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I","Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At","Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Uut","Uuq","Uup","Uuh","Uus","Uuo"],ChemDoodle.ELEMENT=function(a){function c(a,b,c){return this.symbol=a,this.name=b,this.atomicNumber=c,!0}var b=[];b.H=new c("H","Hydrogen",1),b.He=new c("He","Helium",2),b.Li=new c("Li","Lithium",3),b.Be=new c("Be","Beryllium",4),b.B=new c("B","Boron",5),b.C=new c("C","Carbon",6),b.N=new c("N","Nitrogen",7),b.O=new c("O","Oxygen",8),b.F=new c("F","Fluorine",9),b.Ne=new c("Ne","Neon",10),b.Na=new c("Na","Sodium",11),b.Mg=new c("Mg","Magnesium",12),b.Al=new c("Al","Aluminum",13),b.Si=new c("Si","Silicon",14),b.P=new c("P","Phosphorus",15),b.S=new c("S","Sulfur",16),b.Cl=new c("Cl","Chlorine",17),b.Ar=new c("Ar","Argon",18),b.K=new c("K","Potassium",19),b.Ca=new c("Ca","Calcium",20),b.Sc=new c("Sc","Scandium",21),b.Ti=new c("Ti","Titanium",22),b.V=new c("V","Vanadium",23),b.Cr=new c("Cr","Chromium",24),b.Mn=new c("Mn","Manganese",25),b.Fe=new c("Fe","Iron",26),b.Co=new c("Co","Cobalt",27),b.Ni=new c("Ni","Nickel",28),b.Cu=new c("Cu","Copper",29),b.Zn=new c("Zn","Zinc",30),b.Ga=new c("Ga","Gallium",31),b.Ge=new c("Ge","Germanium",32),b.As=new c("As","Arsenic",33),b.Se=new c("Se","Selenium",34),b.Br=new c("Br","Bromine",35),b.Kr=new c("Kr","Krypton",36),b.Rb=new c("Rb","Rubidium",37),b.Sr=new c("Sr","Strontium",38),b.Y=new c("Y","Yttrium",39),b.Zr=new c("Zr","Zirconium",40),b.Nb=new c("Nb","Niobium",41),b.Mo=new c("Mo","Molybdenum",42),b.Tc=new c("Tc","Technetium",43),b.Ru=new c("Ru","Ruthenium",44),b.Rh=new c("Rh","Rhodium",45),b.Pd=new c("Pd","Palladium",46),b.Ag=new c("Ag","Silver",47),b.Cd=new c("Cd","Cadmium",48),b.In=new c("In","Indium",49),b.Sn=new c("Sn","Tin",50),b.Sb=new c("Sb","Antimony",51),b.Te=new c("Te","Tellurium",52),b.I=new c("I","Iodine",53),b.Xe=new c("Xe","Xenon",54),b.Cs=new c("Cs","Cesium",55),b.Ba=new c("Ba","Barium",56),b.La=new c("La","Lanthanum",57),b.Ce=new c("Ce","Cerium",58),b.Pr=new c("Pr","Praseodymium",59),b.Nd=new c("Nd","Neodymium",60),b.Pm=new c("Pm","Promethium",61),b.Sm=new c("Sm","Samarium",62),b.Eu=new c("Eu","Europium",63),b.Gd=new c("Gd","Gadolinium",64),b.Tb=new c("Tb","Terbium",65),b.Dy=new c("Dy","Dysprosium",66),b.Ho=new c("Ho","Holmium",67),b.Er=new c("Er","Erbium",68),b.Tm=new c("Tm","Thulium",69),b.Yb=new c("Yb","Ytterbium",70),b.Lu=new c("Lu","Lutetium",71),b.Hf=new c("Hf","Hafnium",72),b.Ta=new c("Ta","Tantalum",73),b.W=new c("W","Tungsten",74),b.Re=new c("Re","Rhenium",75),b.Os=new c("Os","Osmium",76),b.Ir=new c("Ir","Iridium",77),b.Pt=new c("Pt","Platinum",78),b.Au=new c("Au","Gold",79),b.Hg=new c("Hg","Mercury",80),b.Tl=new c("Tl","Thallium",81),b.Pb=new c("Pb","Lead",82),b.Bi=new c("Bi","Bismuth",83),b.Po=new c("Po","Polonium",84),b.At=new c("At","Astatine",85),b.Rn=new c("Rn","Radon",86),b.Fr=new c("Fr","Francium",87),b.Ra=new c("Ra","Radium",88),b.Ac=new c("Ac","Actinium",89),b.Th=new c("Th","Thorium",90),b.Pa=new c("Pa","Protactinium",91),b.U=new c("U","Uranium",92),b.Np=new c("Np","Neptunium",93),b.Pu=new c("Pu","Plutonium",94),b.Am=new c("Am","Americium",95),b.Cm=new c("Cm","Curium",96),b.Bk=new c("Bk","Berkelium",97),b.Cf=new c("Cf","Californium",98),b.Es=new c("Es","Einsteinium",99),b.Fm=new c("Fm","Fermium",100),b.Md=new c("Md","Mendelevium",101),b.No=new c("No","Nobelium",102),b.Lr=new c("Lr","Lawrencium",103),b.Rf=new c("Rf","Rutherfordium",104),b.Db=new c("Db","Dubnium",105),b.Sg=new c("Sg","Seaborgium",106),b.Bh=new c("Bh","Bohrium",107),b.Hs=new c("Hs","Hassium",108),b.Mt=new c("Mt","Meitnerium",109),b.Ds=new c("Ds","Darmstadtium",110),b.Rg=new c("Rg","Roentgenium",111),b.Cn=new c("Cn","Copernicium",112),b.Uut=new c("Uut","Ununtrium",113),b.Uuq=new c("Uuq","Ununquadium",114),b.Uup=new c("Uup","Ununpentium",115),b.Uuh=new c("Uuh","Ununhexium",116),b.Uus=new c("Uus","Ununseptium",117),b.Uuo=new c("Uuo","Ununoctium",118),b.H.jmolColor="#FFFFFF",b.He.jmolColor="#D9FFFF",b.Li.jmolColor="#CC80FF",b.Be.jmolColor="#C2FF00",b.B.jmolColor="#FFB5B5",b.C.jmolColor="#909090",b.N.jmolColor="#3050F8",b.O.jmolColor="#FF0D0D",b.F.jmolColor="#90E050",b.Ne.jmolColor="#B3E3F5",b.Na.jmolColor="#AB5CF2",b.Mg.jmolColor="#8AFF00",b.Al.jmolColor="#BFA6A6",b.Si.jmolColor="#F0C8A0",b.P.jmolColor="#FF8000",b.S.jmolColor="#FFFF30",b.Cl.jmolColor="#1FF01F",b.Ar.jmolColor="#80D1E3",b.K.jmolColor="#8F40D4",b.Ca.jmolColor="#3DFF00",b.Sc.jmolColor="#E6E6E6",b.Ti.jmolColor="#BFC2C7",b.V.jmolColor="#A6A6AB",b.Cr.jmolColor="#8A99C7",b.Mn.jmolColor="#9C7AC7",b.Fe.jmolColor="#E06633",b.Co.jmolColor="#F090A0",b.Ni.jmolColor="#50D050",b.Cu.jmolColor="#C88033",b.Zn.jmolColor="#7D80B0",b.Ga.jmolColor="#C28F8F",b.Ge.jmolColor="#668F8F",b.As.jmolColor="#BD80E3",b.Se.jmolColor="#FFA100",b.Br.jmolColor="#A62929",b.Kr.jmolColor="#5CB8D1",b.Rb.jmolColor="#702EB0",b.Sr.jmolColor="#00FF00",b.Y.jmolColor="#94FFFF",b.Zr.jmolColor="#94E0E0",b.Nb.jmolColor="#73C2C9",b.Mo.jmolColor="#54B5B5",b.Tc.jmolColor="#3B9E9E",b.Ru.jmolColor="#248F8F",b.Rh.jmolColor="#0A7D8C",b.Pd.jmolColor="#006985",b.Ag.jmolColor="#C0C0C0",b.Cd.jmolColor="#FFD98F",b.In.jmolColor="#A67573",b.Sn.jmolColor="#668080",b.Sb.jmolColor="#9E63B5",b.Te.jmolColor="#D47A00",b.I.jmolColor="#940094",b.Xe.jmolColor="#429EB0",b.Cs.jmolColor="#57178F",b.Ba.jmolColor="#00C900",b.La.jmolColor="#70D4FF",b.Ce.jmolColor="#FFFFC7",b.Pr.jmolColor="#D9FFC7",b.Nd.jmolColor="#C7FFC7",b.Pm.jmolColor="#A3FFC7",b.Sm.jmolColor="#8FFFC7",b.Eu.jmolColor="#61FFC7",b.Gd.jmolColor="#45FFC7",b.Tb.jmolColor="#30FFC7",b.Dy.jmolColor="#1FFFC7",b.Ho.jmolColor="#00FF9C",b.Er.jmolColor="#00E675",b.Tm.jmolColor="#00D452",b.Yb.jmolColor="#00BF38",b.Lu.jmolColor="#00AB24",b.Hf.jmolColor="#4DC2FF",b.Ta.jmolColor="#4DA6FF",b.W.jmolColor="#2194D6",b.Re.jmolColor="#267DAB",b.Os.jmolColor="#266696",b.Ir.jmolColor="#175487",b.Pt.jmolColor="#D0D0E0",b.Au.jmolColor="#FFD123",b.Hg.jmolColor="#B8B8D0",b.Tl.jmolColor="#A6544D",b.Pb.jmolColor="#575961",b.Bi.jmolColor="#9E4FB5",b.Po.jmolColor="#AB5C00",b.At.jmolColor="#754F45",b.Rn.jmolColor="#428296",b.Fr.jmolColor="#420066",b.Ra.jmolColor="#007D00",b.Ac.jmolColor="#70ABFA",b.Th.jmolColor="#00BAFF",b.Pa.jmolColor="#00A1FF",b.U.jmolColor="#008FFF",b.Np.jmolColor="#0080FF",b.Pu.jmolColor="#006BFF",b.Am.jmolColor="#545CF2",b.Cm.jmolColor="#785CE3",b.Bk.jmolColor="#8A4FE3",b.Cf.jmolColor="#A136D4",b.Es.jmolColor="#B31FD4",b.Fm.jmolColor="#B31FBA",b.Md.jmolColor="#B30DA6",b.No.jmolColor="#BD0D87",b.Lr.jmolColor="#C70066",b.Rf.jmolColor="#CC0059",b.Db.jmolColor="#D1004F",b.Sg.jmolColor="#D90045",b.Bh.jmolColor="#E00038",b.Hs.jmolColor="#E6002E",b.Mt.jmolColor="#EB0026",b.Ds.jmolColor="#000000",b.Rg.jmolColor="#000000",b.Cn.jmolColor="#000000",b.Uut.jmolColor="#000000",b.Uuq.jmolColor="#000000",b.Uup.jmolColor="#000000",b.Uuh.jmolColor="#000000",b.Uus.jmolColor="#000000",b.Uuo.jmolColor="#000000";for(var d=0,e=a.length;d<e;d++)b[a[d]].pymolColor=b[a[d]].jmolColor;return b.H.pymolColor="#E6E6E6",b.C.pymolColor="#33FF33",b.N.pymolColor="#3333FF",b.O.pymolColor="#FF4D4D",b.F.pymolColor="#B3FFFF",b.S.pymolColor="#E6C640",b.H.covalentRadius=.31,b.He.covalentRadius=.28,b.Li.covalentRadius=1.28,b.Be.covalentRadius=.96,b.B.covalentRadius=.84,b.C.covalentRadius=.76,b.N.covalentRadius=.71,b.O.covalentRadius=.66,b.F.covalentRadius=.57,b.Ne.covalentRadius=.58,b.Na.covalentRadius=1.66,b.Mg.covalentRadius=1.41,b.Al.covalentRadius=1.21,b.Si.covalentRadius=1.11,b.P.covalentRadius=1.07,b.S.covalentRadius=1.05,b.Cl.covalentRadius=1.02,b.Ar.covalentRadius=1.06,b.K.covalentRadius=2.03,b.Ca.covalentRadius=1.76,b.Sc.covalentRadius=1.7,b.Ti.covalentRadius=1.6,b.V.covalentRadius=1.53,b.Cr.covalentRadius=1.39,b.Mn.covalentRadius=1.39,b.Fe.covalentRadius=1.32,b.Co.covalentRadius=1.26,b.Ni.covalentRadius=1.24,b.Cu.covalentRadius=1.32,b.Zn.covalentRadius=1.22,b.Ga.covalentRadius=1.22,b.Ge.covalentRadius=1.2,b.As.covalentRadius=1.19,b.Se.covalentRadius=1.2,b.Br.covalentRadius=1.2,b.Kr.covalentRadius=1.16,b.Rb.covalentRadius=2.2,b.Sr.covalentRadius=1.95,b.Y.covalentRadius=1.9,b.Zr.covalentRadius=1.75,b.Nb.covalentRadius=1.64,b.Mo.covalentRadius=1.54,b.Tc.covalentRadius=1.47,b.Ru.covalentRadius=1.46,b.Rh.covalentRadius=1.42,b.Pd.covalentRadius=1.39,b.Ag.covalentRadius=1.45,b.Cd.covalentRadius=1.44,b.In.covalentRadius=1.42,b.Sn.covalentRadius=1.39,b.Sb.covalentRadius=1.39,b.Te.covalentRadius=1.38,b.I.covalentRadius=1.39,b.Xe.covalentRadius=1.4,b.Cs.covalentRadius=2.44,b.Ba.covalentRadius=2.15,b.La.covalentRadius=2.07,b.Ce.covalentRadius=2.04,b.Pr.covalentRadius=2.03,b.Nd.covalentRadius=2.01,b.Pm.covalentRadius=1.99,b.Sm.covalentRadius=1.98,b.Eu.covalentRadius=1.98,b.Gd.covalentRadius=1.96,b.Tb.covalentRadius=1.94,b.Dy.covalentRadius=1.92,b.Ho.covalentRadius=1.92,b.Er.covalentRadius=1.89,b.Tm.covalentRadius=1.9,b.Yb.covalentRadius=1.87,b.Lu.covalentRadius=1.87,b.Hf.covalentRadius=1.75,b.Ta.covalentRadius=1.7,b.W.covalentRadius=1.62,b.Re.covalentRadius=1.51,b.Os.covalentRadius=1.44,b.Ir.covalentRadius=1.41,b.Pt.covalentRadius=1.36,b.Au.covalentRadius=1.36,b.Hg.covalentRadius=1.32,b.Tl.covalentRadius=1.45,b.Pb.covalentRadius=1.46,b.Bi.covalentRadius=1.48,b.Po.covalentRadius=1.4,b.At.covalentRadius=1.5,b.Rn.covalentRadius=1.5,b.Fr.covalentRadius=2.6,b.Ra.covalentRadius=2.21,b.Ac.covalentRadius=2.15,b.Th.covalentRadius=2.06,b.Pa.covalentRadius=2,b.U.covalentRadius=1.96,b.Np.covalentRadius=1.9,b.Pu.covalentRadius=1.87,b.Am.covalentRadius=1.8,b.Cm.covalentRadius=1.69,b.Bk.covalentRadius=0,b.Cf.covalentRadius=0,b.Es.covalentRadius=0,b.Fm.covalentRadius=0,b.Md.covalentRadius=0,b.No.covalentRadius=0,b.Lr.covalentRadius=0,b.Rf.covalentRadius=0,b.Db.covalentRadius=0,b.Sg.covalentRadius=0,b.Bh.covalentRadius=0,b.Hs.covalentRadius=0,b.Mt.covalentRadius=0,b.Ds.covalentRadius=0,b.Rg.covalentRadius=0,b.Cn.covalentRadius=0,b.Uut.covalentRadius=0,b.Uuq.covalentRadius=0,b.Uup.covalentRadius=0,b.Uuh.covalentRadius=0,b.Uus.covalentRadius=0,b.Uuo.covalentRadius=0,b.H.vdWRadius=1.2,b.He.vdWRadius=1.4,b.Li.vdWRadius=1.82,b.Be.vdWRadius=0,b.B.vdWRadius=0,b.C.vdWRadius=1.7,b.N.vdWRadius=1.55,b.O.vdWRadius=1.52,b.F.vdWRadius=1.47,b.Ne.vdWRadius=1.54,b.Na.vdWRadius=2.27,b.Mg.vdWRadius=1.73,b.Al.vdWRadius=0,b.Si.vdWRadius=2.1,b.P.vdWRadius=1.8,b.S.vdWRadius=1.8,b.Cl.vdWRadius=1.75,b.Ar.vdWRadius=1.88,b.K.vdWRadius=2.75,b.Ca.vdWRadius=0,b.Sc.vdWRadius=0,b.Ti.vdWRadius=0,b.V.vdWRadius=0,b.Cr.vdWRadius=0,b.Mn.vdWRadius=0,b.Fe.vdWRadius=0,b.Co.vdWRadius=0,b.Ni.vdWRadius=1.63,b.Cu.vdWRadius=1.4,b.Zn.vdWRadius=1.39,b.Ga.vdWRadius=1.87,b.Ge.vdWRadius=0,b.As.vdWRadius=1.85,b.Se.vdWRadius=1.9,b.Br.vdWRadius=1.85,b.Kr.vdWRadius=2.02,b.Rb.vdWRadius=0,b.Sr.vdWRadius=0,b.Y.vdWRadius=0,b.Zr.vdWRadius=0,b.Nb.vdWRadius=0,b.Mo.vdWRadius=0,b.Tc.vdWRadius=0,b.Ru.vdWRadius=0,b.Rh.vdWRadius=0,b.Pd.vdWRadius=1.63,b.Ag.vdWRadius=1.72,b.Cd.vdWRadius=1.58,b.In.vdWRadius=1.93,b.Sn.vdWRadius=2.17,b.Sb.vdWRadius=0,b.Te.vdWRadius=2.06,b.I.vdWRadius=1.98,b.Xe.vdWRadius=2.16,b.Cs.vdWRadius=0,b.Ba.vdWRadius=0,b.La.vdWRadius=0,b.Ce.vdWRadius=0,b.Pr.vdWRadius=0,b.Nd.vdWRadius=0,b.Pm.vdWRadius=0,b.Sm.vdWRadius=0,b.Eu.vdWRadius=0,b.Gd.vdWRadius=0,b.Tb.vdWRadius=0,b.Dy.vdWRadius=0,b.Ho.vdWRadius=0,b.Er.vdWRadius=0,b.Tm.vdWRadius=0,b.Yb.vdWRadius=0,b.Lu.vdWRadius=0,b.Hf.vdWRadius=0,b.Ta.vdWRadius=0,b.W.vdWRadius=0,b.Re.vdWRadius=0,b.Os.vdWRadius=0,b.Ir.vdWRadius=0,b.Pt.vdWRadius=1.75,b.Au.vdWRadius=1.66,b.Hg.vdWRadius=1.55,b.Tl.vdWRadius=1.96,b.Pb.vdWRadius=2.02,b.Bi.vdWRadius=0,b.Po.vdWRadius=0,b.At.vdWRadius=0,b.Rn.vdWRadius=0,b.Fr.vdWRadius=0,b.Ra.vdWRadius=0,b.Ac.vdWRadius=0,b.Th.vdWRadius=0,b.Pa.vdWRadius=0,b.U.vdWRadius=1.86,b.Np.vdWRadius=0,b.Pu.vdWRadius=0,b.Am.vdWRadius=0,b.Cm.vdWRadius=0,b.Bk.vdWRadius=0,b.Cf.vdWRadius=0,b.Es.vdWRadius=0,b.Fm.vdWRadius=0,b.Md.vdWRadius=0,b.No.vdWRadius=0,b.Lr.vdWRadius=0,b.Rf.vdWRadius=0,b.Db.vdWRadius=0,b.Sg.vdWRadius=0,b.Bh.vdWRadius=0,b.Hs.vdWRadius=0,b.Mt.vdWRadius=0,b.Ds.vdWRadius=0,b.Rg.vdWRadius=0,b.Cn.vdWRadius=0,b.Uut.vdWRadius=0,b.Uuq.vdWRadius=0,b.Uup.vdWRadius=0,b.Uuh.vdWRadius=0,b.Uus.vdWRadius=0,b.Uuo.vdWRadius=0,b.H.valency=1,b.He.valency=0,b.Li.valency=1,b.Be.valency=2,b.B.valency=3,b.C.valency=4,b.N.valency=3,b.O.valency=2,b.F.valency=1,b.Ne.valency=0,b.Na.valency=1,b.Mg.valency=0,b.Al.valency=0,b.Si.valency=4,b.P.valency=3,b.S.valency=2,b.Cl.valency=1,b.Ar.valency=0,b.K.valency=0,b.Ca.valency=0,b.Sc.valency=0,b.Ti.valency=1,b.V.valency=1,b.Cr.valency=2,b.Mn.valency=3,b.Fe.valency=2,b.Co.valency=1,b.Ni.valency=1,b.Cu.valency=0,b.Zn.valency=0,b.Ga.valency=0,b.Ge.valency=4,b.As.valency=3,b.Se.valency=2,b.Br.valency=1,b.Kr.valency=0,b.Rb.valency=0,b.Sr.valency=0,b.Y.valency=0,b.Zr.valency=0,b.Nb.valency=1,b.Mo.valency=2,b.Tc.valency=3,b.Ru.valency=2,b.Rh.valency=1,b.Pd.valency=0,b.Ag.valency=0,b.Cd.valency=0,b.In.valency=0,b.Sn.valency=4,b.Sb.valency=3,b.Te.valency=2,b.I.valency=1,b.Xe.valency=0,b.Cs.valency=0,b.Ba.valency=0,b.La.valency=0,b.Ce.valency=0,b.Pr.valency=0,b.Nd.valency=0,b.Pm.valency=0,b.Sm.valency=0,b.Eu.valency=0,b.Gd.valency=0,b.Tb.valency=0,b.Dy.valency=0,b.Ho.valency=0,b.Er.valency=0,b.Tm.valency=0,b.Yb.valency=0,b.Lu.valency=0,b.Hf.valency=0,b.Ta.valency=1,b.W.valency=2,b.Re.valency=3,b.Os.valency=2,b.Ir.valency=3,b.Pt.valency=0,b.Au.valency=1,b.Hg.valency=0,b.Tl.valency=0,b.Pb.valency=4,b.Bi.valency=3,b.Po.valency=2,b.At.valency=1,b.Rn.valency=0,b.Fr.valency=0,b.Ra.valency=0,b.Ac.valency=0,b.Th.valency=0,b.Pa.valency=0,b.U.valency=0,b.Np.valency=0,b.Pu.valency=0,b.Am.valency=0,b.Cm.valency=0,b.Bk.valency=0,b.Cf.valency=0,b.Es.valency=0,b.Fm.valency=0,b.Md.valency=0,b.No.valency=0,b.Lr.valency=0,b.Rf.valency=0,b.Db.valency=0,b.Sg.valency=0,b.Bh.valency=0,b.Hs.valency=0,b.Mt.valency=0,b.Ds.valency=0,b.Rg.valency=0,b.Cn.valency=0,b.Uut.valency=0,b.Uuq.valency=0,b.Uup.valency=0,b.Uuh.valency=0,b.Uus.valency=0,b.Uuo.valency=0,b.H.mass=1,b.He.mass=4,b.Li.mass=7,b.Be.mass=9,b.B.mass=11,b.C.mass=12,b.N.mass=14,b.O.mass=16,b.F.mass=19,b.Ne.mass=20,b.Na.mass=23,b.Mg.mass=24,b.Al.mass=27,b.Si.mass=28,b.P.mass=31,b.S.mass=32,b.Cl.mass=35,b.Ar.mass=40,b.K.mass=39,b.Ca.mass=40,b.Sc.mass=45,b.Ti.mass=48,b.V.mass=51,b.Cr.mass=52,b.Mn.mass=55,b.Fe.mass=56,b.Co.mass=59,b.Ni.mass=58,b.Cu.mass=63,b.Zn.mass=64,b.Ga.mass=69,b.Ge.mass=74,b.As.mass=75,b.Se.mass=80,b.Br.mass=79,b.Kr.mass=84,b.Rb.mass=85,b.Sr.mass=88,b.Y.mass=89,b.Zr.mass=90,b.Nb.mass=93,b.Mo.mass=98,b.Tc.mass=0,b.Ru.mass=102,b.Rh.mass=103,b.Pd.mass=106,b.Ag.mass=107,b.Cd.mass=114,b.In.mass=115,b.Sn.mass=120,b.Sb.mass=121,b.Te.mass=130,b.I.mass=127,b.Xe.mass=132,b.Cs.mass=133,b.Ba.mass=138,b.La.mass=139,b.Ce.mass=140,b.Pr.mass=141,b.Nd.mass=142,b.Pm.mass=0,b.Sm.mass=152,b.Eu.mass=153,b.Gd.mass=158,b.Tb.mass=159,b.Dy.mass=164,b.Ho.mass=165,b.Er.mass=166,b.Tm.mass=169,b.Yb.mass=174,b.Lu.mass=175,b.Hf.mass=180,b.Ta.mass=181,b.W.mass=184,b.Re.mass=187,b.Os.mass=192,b.Ir.mass=193,b.Pt.mass=195,b.Au.mass=197,b.Hg.mass=202,b.Tl.mass=205,b.Pb.mass=208,b.Bi.mass=209,b.Po.mass=0,b.At.mass=0,b.Rn.mass=0,b.Fr.mass=0,b.Ra.mass=0,b.Ac.mass=0,b.Th.mass=232,b.Pa.mass=231,b.U.mass=238,b.Np.mass=0,b.Pu.mass=0,b.Am.mass=0,b.Cm.mass=0,b.Bk.mass=0,b.Cf.mass=0,b.Es.mass=0,b.Fm.mass=0,b.Md.mass=0,b.No.mass=0,b.Lr.mass=0,b.Rf.mass=0,b.Db.mass=0,b.Sg.mass=0,b.Bh.mass=0,b.Hs.mass=0,b.Mt.mass=0,b.Ds.mass=0,b.Rg.mass=0,b.Cn.mass=0,b.Uut.mass=0,b.Uuq.mass=0,b.Uup.mass=0,b.Uuh.mass=0,b.Uus.mass=0,b.Uuo.mass=0,b}(ChemDoodle.SYMBOLS),ChemDoodle.RESIDUE=function(){function b(a,b){return this.symbol=a,this.name=b,!0}var a=[];return a.Ala=new b("Ala","Alanine"),a.Arg=new b("Arg","Arginine"),a.Asn=new b("Asn","Asparagine"),a.Asp=new b("Asp","Aspartic Acid"),a.Cys=new b("Cys","Cysteine"),a.Gln=new b("Gln","Glutamine"),a.Glu=new b("Glu","Glutamic Acid"),a.Gly=new b("Gly","Glycine"),a.His=new b("His","Histidine"),a.Ile=new b("Ile","Isoleucine"),a.Leu=new b("Leu","Leucine"),a.Lys=new b("Lys","Lysine"),a.Met=new b("Met","Methionine"),a.Phe=new b("Phe","Phenylalanine"),a.Pro=new b("Pro","Proline"),a.Ser=new b("Ser","Serine"),a.Thr=new b("Thr","Threonine"),a.Trp=new b("Trp","Tryptophan"),a.Tyr=new b("Tyr","Tyrosine"),a.Val=new b("Val","Valine"),a.Asx=new b("Asx","Asparagine/Aspartic Acid"),a.Glx=new b("Glx","Glutamine/Glutamic Acid"),a["*"]=new b("*","Other"),a.A=new b("A","Adenine"),a.G=new b("G","Guanine"),a.I=new b("I",""),a.C=new b("C","Cytosine"),a.T=new b("T","Thymine"),a.U=new b("U","Uracil"),a.Ala.polar=!1,a.Arg.polar=!0,a.Asn.polar=!0,a.Asp.polar=!0,a.Cys.polar=!0,a.Gln.polar=!0,a.Glu.polar=!0,a.Gly.polar=!1,a.His.polar=!0,a.Ile.polar=!1,a.Leu.polar=!1,a.Lys.polar=!0,a.Met.polar=!1,a.Phe.polar=!1,a.Pro.polar=!1,a.Ser.polar=!0,a.Thr.polar=!0,a.Trp.polar=!0,a.Tyr.polar=!0,a.Val.polar=!1,a.Asx.polar=!0,a.Glx.polar=!0,a.Ala.aminoColor="#C8C8C8",a.Arg.aminoColor="#145AFF",a.Asn.aminoColor="#00DCDC",a.Asp.aminoColor="#E60A0A",a.Cys.aminoColor="#E6E600",a.Gln.aminoColor="#00DCDC",a.Glu.aminoColor="#E60A0A",a.Gly.aminoColor="#EBEBEB",a.His.aminoColor="#8282D2",a.Ile.aminoColor="#0F820F",a.Leu.aminoColor="#0F820F",a.Lys.aminoColor="#145AFF",a.Met.aminoColor="#E6E600",a.Phe.aminoColor="#3232AA",a.Pro.aminoColor="#DC9682",a.Ser.aminoColor="#FA9600",a.Thr.aminoColor="#FA9600",a.Trp.aminoColor="#B45AB4",a.Tyr.aminoColor="#3232AA",a.Val.aminoColor="#0F820F",a.Asx.aminoColor="#FF69B4",a.Glx.aminoColor="#FF69B4",a["*"].aminoColor="#BEA06E",a.A.aminoColor="#BEA06E",a.G.aminoColor="#BEA06E",a.I.aminoColor="#BEA06E",a.C.aminoColor="#BEA06E",a.T.aminoColor="#BEA06E",a.U.aminoColor="#BEA06E",a.Ala.shapelyColor="#8CFF8C",a.Arg.shapelyColor="#00007C",a.Asn.shapelyColor="#FF7C70",a.Asp.shapelyColor="#A00042",a.Cys.shapelyColor="#FFFF70",a.Gln.shapelyColor="#FF4C4C",a.Glu.shapelyColor="#660000",a.Gly.shapelyColor="#FFFFFF",a.His.shapelyColor="#7070FF",a.Ile.shapelyColor="#004C00",a.Leu.shapelyColor="#455E45",a.Lys.shapelyColor="#4747B8",a.Met.shapelyColor="#B8A042",a.Phe.shapelyColor="#534C52",a.Pro.shapelyColor="#525252",a.Ser.shapelyColor="#FF7042",a.Thr.shapelyColor="#B84C00",a.Trp.shapelyColor="#4F4600",a.Tyr.shapelyColor="#8C704C",a.Val.shapelyColor="#FF8CFF",a.Asx.shapelyColor="#FF00FF",a.Glx.shapelyColor="#FF00FF",a["*"].shapelyColor="#FF00FF",a.A.shapelyColor="#A0A0FF",a.G.shapelyColor="#FF7070",a.I.shapelyColor="#80FFFF",a.C.shapelyColor="#FF8C4B",a.T.shapelyColor="#A0FFA0",a.U.shapelyColor="#FF8080",a}(),function(a){a.Queue=function(){var a=[],b=0;this.getSize=function(){return a.length-b},this.isEmpty=function(){return a.length==0},this.enqueue=function(b){a.push(b)},this.dequeue=function(){var c=undefined;return a.length&&(c=a[b],++b*2>=a.length&&(a=a.slice(b),b=0)),c},this.getOldestElement=function(){var c=undefined;return a.length&&(c=a[b]),c}}}(ChemDoodle.structures),function(a,b){a.Point=function(a,c){return this.x=a?a:0,this.y=c?c:0,this.sub=function(a){this.x-=a.x,this.y-=a.y},this.add=function(a){this.x+=a.x,this.y+=a.y},this.distance=function(a){var c=a.x-this.x,d=a.y-this.y;return b.sqrt(c*c+d*d)},this.angleForStupidCanvasArcs=function(a){var c=a.x-this.x,d=a.y-this.y,e=0;c==0?d==0?e=0:d>0?e=b.PI/2:e=3*b.PI/2:d==0?c>0?e=0:e=b.PI:c<0?e=b.atan(d/c)+b.PI:d<0?e=b.atan(d/c)+2*b.PI:e=b.atan(d/c);while(e<0)e+=b.PI*2;return e%=b.PI*2,e},this.angle=function(a){var c=a.x-this.x,d=this.y-a.y,e=0;c==0?d==0?e=0:d>0?e=b.PI/2:e=3*b.PI/2:d==0?c>0?e=0:e=b.PI:c<0?e=b.atan(d/c)+b.PI:d<0?e=b.atan(d/c)+2*b.PI:e=b.atan(d/c);while(e<0)e+=b.PI*2;return e%=b.PI*2,e},!0}}(ChemDoodle.structures,Math),function(a,b,c,d,e){c.Atom=function(c,f,g,h){return this.x=f?f:0,this.y=g?g:0,this.z=h?h:0,this.charge=0,this.numLonePair=0,this.mass=-1,this.coordinationNumber=0,this.bondNumber=0,this.angleOfLeastInterference=0,this.isHidden=!1,this.label=c?c.replace(/\s/g,""):"C",this.altLabel=null,a[this.label]||(this.label="C"),this.isLone=!1,this.isHover=!1,this.isSelected=!1,this.add3D=function(a){this.x+=a.x,this.y+=a.y,this.z+=a.z},this.sub3D=function(a){this.x-=a.x,this.y-=a.y,this.z-=a.z},this.distance3D=function(a){var b=a.x-this.x,c=a.y-this.y,e=a.z-this.z;return d.sqrt(b*b+c*c+e*e)},this.draw=function(c,e){this.specs&&(e=this.specs);var f=e.getFontString(e.atoms_font_size_2D,e.atoms_font_families_2D,e.atoms_font_bold_2D,e.atoms_font_italic_2D);c.font=f,c.fillStyle=e.atoms_color,e.atoms_useJMOLColors?c.fillStyle=a[this.label].jmolColor:e.atoms_usePYMOLColors&&(c.fillStyle=a[this.label].pymolColor);if(this.isLone&&!e.atoms_displayAllCarbonLabels_2D||e.atoms_circles_2D)c.beginPath(),c.arc(this.x,this.y,e.atoms_circleDiameter_2D/2,0,d.PI*2,!1),c.fill(),e.atoms_circleBorderWidth_2D>0&&(c.lineWidth=e.atoms_circleBorderWidth_2D,c.strokeStyle="black",c.stroke(this.x,this.y,0,d.PI*2,e.atoms_circleDiameter_2D/2));else if(this.isLabelVisible(e)){c.textAlign="center",c.textBaseline="middle";if(this.altLabel!=undefined)c.fillText(this.altLabel,this.x,this.y);else{c.fillText(this.label,this.x,this.y);if(this.mass!=-1){var g=c.measureText(this.label).width,h=e.getFontString(e.atoms_font_size_2D*.7,e.atoms_font_families_2D,e.atoms_font_bold_2D,e.atoms_font_italic_2D),i=c.font;c.font=h;var j=c.measureText(this.mass).width;c.fillText(this.mass,this.x-j-.5,this.y-e.atoms_font_size_2D*.3),c.font=i}var k=this.getImplicitHydrogenCount();if(e.atoms_implicitHydrogens_2D&&k>0){var g=c.measureText(this.label).width,l=c.measureText("H").width;if(k>1){var n=g/2+l/2,o=0,h=e.getFontString(e.atoms_font_size_2D*.8,e.atoms_font_families_2D,e.atoms_font_bold_2D,e.atoms_font_italic_2D);c.font=h;var p=c.measureText(k).width;this.bondNumber==1?this.angleOfLeastInterference>d.PI/2&&this.angleOfLeastInterference<3*d.PI/2&&(n=-g/2-p-l/2):this.angleOfLeastInterference<=d.PI/4||(this.angleOfLeastInterference<3*d.PI/4?(n=0,o=-e.atoms_font_size_2D*.9):this.angleOfLeastInterference<=5*d.PI/4?n=-g/2-p-l/2:this.angleOfLeastInterference<7*d.PI/4&&(n=0,o=e.atoms_font_size_2D*.9)),c.font=f,c.fillText("H",this.x+n,this.y+o),c.font=h,c.fillText(k,this.x+n+l/2+p/2,this.y+o+e.atoms_font_size_2D*.3)}else{var n=g/2+l/2,o=0;this.bondNumber==1?this.angleOfLeastInterference>d.PI/2&&this.angleOfLeastInterference<3*d.PI/2&&(n=-g/2-l/2):this.angleOfLeastInterference<=d.PI/4||(this.angleOfLeastInterference<3*d.PI/4?(n=0,o=-e.atoms_font_size_2D*.9):this.angleOfLeastInterference<=5*d.PI/4?n=-g/2-l/2:this.angleOfLeastInterference<7*d.PI/4&&(n=0,o=e.atoms_font_size_2D*.9)),c.fillText("H",this.x+n,this.y+o)}}}if(this.charge!=0){var q=this.charge.toFixed(0);q=="1"?q="+":q=="-1"?q="–":b.stringStartsWith(q,"-")?q=q.substring(1)+"–":q+="+";var r=this.angleOfLeastInterference,s=e.atoms_font_size_2D;this.isLabelVisible(e)&&k>0&&(r+=d.PI/4),c.textAlign="center",c.textBaseline="middle",c.fillText(q,this.x+s*d.cos(r),this.y-s*d.sin(r))}this.numLonePair>0&&(c.fillStyle="black",this.bondNumber==2&&d.abs(this.largestAngle-d.PI)<d.PI/60?(this.drawLonePairs(c,e,d.floor(this.numLonePair/2),this.angleOfLeastInterference,this.largestAngle),this.drawLonePairs(c,e,d.floor(this.numLonePair/2)+this.numLonePair%2,this.angleOfLeastInterference+d.PI,this.largestAngle)):this.drawLonePairs(c,e,this.numLonePair,this.angleOfLeastInterference,this.largestAngle))}},this.drawLonePairs=function(a,b,c,e,f){var g=f/(c+(this.bondNumber==0?0:1)),h=e-f/2+g;for(var i=0;i<c;i++){var e=h+i*g,j=this.x+Math.cos(e)*b.atoms_lonePairDistance_2D,k=this.y-Math.sin(e)*b.atoms_lonePairDistance_2D,l=e+Math.PI/2,n=Math.cos(l)*b.atoms_lonePairSpread_2D/2,o=-Math.sin(l)*b.atoms_lonePairSpread_2D/2;a.beginPath(),a.arc(j+n,k+o,b.atoms_lonePairDiameter_2D,0,d.PI*2,!1),a.fill(),a.beginPath(),a.arc(j-n,k-o,b.atoms_lonePairDiameter_2D,0,d.PI*2,!1),a.fill()}},this.drawDecorations=function(a){if(this.isHover||this.isSelected){a.strokeStyle=this.isHover?"#885110":"#0060B2",a.lineWidth=1.2,a.beginPath();var b=this.isHover?7:15;a.arc(this.x,this.y,b,0,d.PI*2,!1),a.stroke()}},this.render=function(b,c){this.specs&&(c=this.specs);var d=e.translate(b.modelViewMatrix,[this.x,this.y,this.z],[]),f=c.atoms_useVDWDiameters_3D?a[this.label].vdWRadius*c.atoms_vdwMultiplier_3D:c.atoms_sphereDiameter_3D/2;f==0&&(f=1),e.scale(d,[f,f,f]);var g=c.atoms_color;c.atoms_useJMOLColors?g=a[this.label].jmolColor:c.atoms_usePYMOLColors&&(g=a[this.label].pymolColor),b.material.setDiffuseColor(g),b.setMatrixUniforms(d);var h=this.renderAsStar?b.starBuffer:b.sphereBuffer;b.drawElements(b.TRIANGLES,h.vertexIndexBuffer.numItems,b.UNSIGNED_SHORT,0)},this.isLabelVisible=function(a){return a.atoms_displayAllCarbonLabels_2D||this.label!="C"||this.altLabel||this.mass!=-1||this.charge!=0||this.numLonePair!=0||this.isHidden&&a.atoms_showHiddenCarbons_2D||a.atoms_displayTerminalCarbonLabels_2D&&this.bondNumber==1},this.getImplicitHydrogenCount=function(){if(this.label=="H"||a[this.label]==null)return 0;var b=a[this.label].valency,c=b-this.coordinationNumber;if(this.charge>0){var d=4-b;this.charge<=d?c+=this.charge:c=4-this.coordinationNumber-this.charge+d}else c+=this.charge;return c<0?0:c},!0},c.Atom.prototype=new c.Point(0,0)}(ChemDoodle.ELEMENT,ChemDoodle.extensions,ChemDoodle.structures,Math,mat4),function(a,b,c,d,e,f){c.Bond=function(g,h,i){return this.a1=g,this.a2=h,this.bondOrder=i?i:1,this.stereo=c.Bond.STEREO_NONE,this.isHover=!1,this.ring=null,this.getCenter=function(){return new c.Point((this.a1.x+this.a2.x)/2,(this.a1.y+this.a2.y)/2)},this.getLength=function(){return this.a1.distance(this.a2)},this.getLength3D=function(){return this.a1.distance3D(this.a2)},this.contains=function(a){return a==this.a1||a==this.a2},this.getNeighbor=function(a){return a==this.a1?this.a2:a==this.a2?this.a1:null},this.draw=function(e,f){this.specs&&(f=this.specs);var g=this.a1.x,h=this.a2.x,i=this.a1.y,j=this.a2.y,k=h-g,l=j-i;f.atoms_display&&!f.atoms_circles_2D&&this.a1.isLabelVisible(f)&&(g+=k*f.bonds_atomLabelBuffer_2D,i+=l*f.bonds_atomLabelBuffer_2D),f.atoms_display&&!f.atoms_circles_2D&&this.a2.isLabelVisible(f)&&(h-=k*f.bonds_atomLabelBuffer_2D,j-=l*f.bonds_atomLabelBuffer_2D);if(f.bonds_clearOverlaps_2D){var n=g+k*.15,o=i+l*.15,p=h-k*.15,q=j-l*.15;e.strokeStyle=f.backgroundColor,e.lineWidth=f.bonds_width_2D+f.bonds_overlapClearWidth_2D*2,e.lineCap="round",e.beginPath(),e.moveTo(n,o),e.lineTo(p,q),e.closePath(),e.stroke()}e.strokeStyle=f.bonds_color,e.fillStyle=f.bonds_color,e.lineWidth=f.bonds_width_2D,e.lineCap=f.bonds_ends_2D;if(f.bonds_useJMOLColors||f.bonds_usePYMOLColors){var r=e.createLinearGradient(g,i,h,j),s=a[this.a1.label].jmolColor,t=a[this.a2.label].jmolColor;if(f.atoms_usePYMOLColors)var s=a[this.a1.label].pymolColor,t=a[this.a2.label].pymolColor;r.addColorStop(0,s),f.bonds_colorGradient||(r.addColorStop(.5,s),r.addColorStop(.51,t)),r.addColorStop(1,t),e.strokeStyle=r,e.fillStyle=r}switch(this.bondOrder){case.5:e.beginPath(),e.moveTo(g,i),b.contextHashTo(e,g,i,h,j,f.bonds_hashSpacing_2D,f.bonds_hashSpacing_2D),e.stroke();break;case 1:if(this.stereo==c.Bond.STEREO_PROTRUDING||this.stereo==c.Bond.STEREO_RECESSED){var u=f.bonds_width_2D/2,v=this.a1.distance(this.a2)*f.bonds_wedgeThickness_2D/2,w=this.a1.angle(this.a2)+d.PI/2,x=d.cos(w),y=d.sin(w),z=g-x*u,A=i+y*u,B=g+x*u,C=i-y*u,D=h+x*v,E=j-y*v,F=h-x*v,G=j+y*v;e.beginPath(),e.moveTo(z,A),e.lineTo(B,C),e.lineTo(D,E),e.lineTo(F,G),e.closePath(),this.stereo==c.Bond.STEREO_PROTRUDING?e.fill():(e.save(),e.clip(),e.lineWidth=v*2,e.lineCap="butt",e.beginPath(),e.moveTo(g,i),b.contextHashTo(e,g,i,h,j,f.bonds_hashWidth_2D,f.bonds_hashSpacing_2D),e.stroke(),e.restore())}else{if(this.stereo==c.Bond.STEREO_AMBIGUOUS){e.beginPath(),e.moveTo(g,i);var H=d.floor(d.sqrt(k*k+l*l)/f.bonds_wavyLength_2D),I=g,J=i,w=this.a1.angle(this.a2)+d.PI/2,x=d.cos(w),y=d.sin(w),K=k/H,L=l/H,M,N,O,P;for(var Q=0,R=H;Q<R;Q++)I+=K,J+=L,M=f.bonds_wavyLength_2D*x+I-K*.5,O=f.bonds_wavyLength_2D*-y+J-L*.5,N=f.bonds_wavyLength_2D*-x+I-K*.5,P=f.bonds_wavyLength_2D*y+J-L*.5,Q%2==0?e.quadraticCurveTo(M,O,I,J):e.quadraticCurveTo(N,P,I,J);e.stroke();break}e.beginPath(),e.moveTo(g,i),e.lineTo(h,j),e.stroke()}break;case 1.5:e.beginPath(),e.moveTo(g,i),e.lineTo(h,j),e.stroke();break;case 2:if(this.stereo==c.Bond.STEREO_AMBIGUOUS){var v=this.a1.distance(this.a2)*f.bonds_saturationWidth_2D/2,w=this.a1.angle(this.a2)+d.PI/2,z=g-d.cos(w)*v,A=i+d.sin(w)*v,B=g+d.cos(w)*v,C=i-d.sin(w)*v,D=h+d.cos(w)*v,E=j-d.sin(w)*v,F=h-d.cos(w)*v,G=j+d.sin(w)*v;e.beginPath(),e.moveTo(z,A),e.lineTo(D,E),e.moveTo(B,C),e.lineTo(F,G),e.stroke()}else if(!f.bonds_symmetrical_2D&&(this.ring!=null||this.a1.label=="C"&&this.a2.label=="C")){e.beginPath(),e.moveTo(g,i),e.lineTo(h,j);var S=0,T=this.a1.distance(this.a2),U=this.a1.angle(this.a2),w=U+d.PI/2,v=T*f.bonds_saturationWidth_2D,V=f.bonds_saturationAngle_2D;V<d.PI/2&&(S=-(v/d.tan(V)));if(d.abs(S)<T/2){var W=g-d.cos(U)*S,X=h+d.cos(U)*S,Y=i+d.sin(U)*S,Z=j-d.sin(U)*S,z=W-d.cos(w)*v,A=Y+d.sin(w)*v,B=W+d.cos(w)*v,C=Y-d.sin(w)*v,D=X-d.cos(w)*v,E=Z+d.sin(w)*v,F=X+d.cos(w)*v,G=Z-d.sin(w)*v,$=this.ring==null||this.ring.center.angle(this.a1)>this.ring.center.angle(this.a2)&&!(this.ring.center.angle(this.a1)-this.ring.center.angle(this.a2)>d.PI)||this.ring.center.angle(this.a1)-this.ring.center.angle(this.a2)<-d.PI;$?(e.moveTo(z,A),e.lineTo(D,E)):(e.moveTo(B,C),e.lineTo(F,G)),e.stroke()}}else{var v=this.a1.distance(this.a2)*f.bonds_saturationWidth_2D/2,w=this.a1.angle(this.a2)+d.PI/2,z=g-d.cos(w)*v,A=i+d.sin(w)*v,B=g+d.cos(w)*v,C=i-d.sin(w)*v,D=h+d.cos(w)*v,E=j-d.sin(w)*v,F=h-d.cos(w)*v,G=j+d.sin(w)*v;e.beginPath(),e.moveTo(z,A),e.lineTo(F,G),e.moveTo(B,C),e.lineTo(D,E),e.stroke()}break;case 3:var v=this.a1.distance(this.a2)*f.bonds_saturationWidth_2D,w=this.a1.angle(this.a2)+d.PI/2,z=g-d.cos(w)*v,A=i+d.sin(w)*v,B=g+d.cos(w)*v,C=i-d.sin(w)*v,D=h+d.cos(w)*v,E=j-d.sin(w)*v,F=h-d.cos(w)*v,G=j+d.sin(w)*v;e.beginPath(),e.moveTo(z,A),e.lineTo(F,G),e.moveTo(B,C),e.lineTo(D,E),e.moveTo(g,i),e.lineTo(h,j),e.stroke()}},this.drawDecorations=function(a){if(this.isHover||this.isSelected){var b=2*d.PI,c=(this.a1.angleForStupidCanvasArcs(this.a2)+d.PI/2)%b;a.strokeStyle=this.isHover?"#885110":"#0060B2",a.lineWidth=1.2,a.beginPath();var e=(c+d.PI)%b;e%=d.PI*2,a.arc(this.a1.x,this.a1.y,7,c,e,!1),a.stroke(),a.beginPath(),c+=d.PI,e=(c+d.PI)%b,a.arc(this.a2.x,this.a2.y,7,c,e,!1),a.stroke()}},this.render=function(c,g){this.specs&&(g=this.specs);var h=(g.bonds_renderAsLines_3D?1.1:1.001)*this.a1.distance3D(this.a2)/(g.bonds_useJMOLColors||g.bonds_usePYMOLColors?2:1);if(h==0)return!1;var i=[g.bonds_cylinderDiameter_3D/2,h,g.bonds_cylinderDiameter_3D/2],j=e.translate(c.modelViewMatrix,[this.a1.x,this.a1.y,this.a1.z],[]),k=null,l=[this.a2.x-this.a1.x,this.a2.y-this.a1.y,this.a2.z-this.a1.z];if(g.bonds_useJMOLColors||g.bonds_usePYMOLColors)f.scale(l,.5),k=e.translate(c.modelViewMatrix,[this.a2.x,this.a2.y,this.a2.z],[]);var n=[0],o=null;if(g.bonds_showBondOrders_3D){switch(this.bondOrder){case 2:n=[-g.bonds_cylinderDiameter_3D,g.bonds_cylinderDiameter_3D];break;case 3:n=[-1.2*g.bonds_cylinderDiameter_3D,0,1.2*g.bonds_cylinderDiameter_3D]}if(n.length>1){var p=[0,0,1],q=e.inverse(c.rotationMatrix,[]);e.multiplyVec3(q,p),o=f.cross(l,p,[]),f.normalize(o)}}var r=[0,1,0],s=0,t=null;this.a1.x==this.a2.x&&this.a1.z==this.a2.z?(t=[0,0,1],this.a2.y<this.a1.y&&(s=d.PI)):(s=b.vec3AngleFrom(r,l),t=f.cross(r,l,[]));for(var u=0,v=n.length;u<v;u++){var w=e.set(j,[]);n[u]!=0&&e.translate(w,f.scale(o,n[u],[])),s!=0&&e.rotate(w,s,t),e.scale(w,i);var x=g.bonds_color;g.bonds_useJMOLColors?x=a[this.a1.label].jmolColor:g.bonds_usePYMOLColors&&(x=a[this.a1.label].pymolColor),c.material.setDiffuseColor(x),c.setMatrixUniforms(w),g.bonds_renderAsLines_3D?c.drawArrays(c.LINES,0,c.lineBuffer.vertexPositionBuffer.numItems):c.drawArrays(c.TRIANGLE_STRIP,0,c.cylinderBuffer.vertexPositionBuffer.numItems);if(g.bonds_useJMOLColors||g.bonds_usePYMOLColors)e.set(k,w),n[u]!=0&&e.translate(w,f.scale(o,n[u],[])),e.rotate(w,s+d.PI,t),e.scale(w,i),c.material.setDiffuseColor(g.bonds_usePYMOLColors?a[this.a2.label].pymolColor:a[this.a2.label].jmolColor),c.setMatrixUniforms(w),g.bonds_renderAsLines_3D?c.drawArrays(c.LINES,0,c.lineBuffer.vertexPositionBuffer.numItems):c.drawArrays(c.TRIANGLE_STRIP,0,c.cylinderBuffer.vertexPositionBuffer.numItems)}},!0},c.Bond.STEREO_NONE="none",c.Bond.STEREO_PROTRUDING="protruding",c.Bond.STEREO_RECESSED="recessed",c.Bond.STEREO_AMBIGUOUS="ambiguous"}(ChemDoodle.ELEMENT,ChemDoodle.extensions,ChemDoodle.structures,Math,mat4,vec3),function(a,b){a.Ring=function(){return this.atoms=[],this.bonds=[],this.center=null,this.setupBonds=function(){for(var a=0,b=this.bonds.length;a<b;a++)this.bonds[a].ring=this;this.center=this.getCenter()},this.getCenter=function(){var c=minY=Infinity,d=maxY=-Infinity;for(var e=0,f=this.atoms.length;e<f;e++)c=b.min(this.atoms[e].x,c),minY=b.min(this.atoms[e].y,minY),d=b.max(this.atoms[e].x,d),maxY=b.max(this.atoms[e].y,maxY);return new a.Point((d+c)/2,(maxY+minY)/2)},!0}}(ChemDoodle.structures,Math),function(a,b,c,d,e){c.Molecule=function(){return this.atoms=[],this.bonds=[],this.rings=[],this.findRings=!0,this.draw=function(a,b){this.specs&&(b=this.specs);if(b.bonds_display)for(var c=0,d=this.bonds.length;c<d;c++)this.bonds[c].draw(a,b);if(b.atoms_display)for(var c=0,d=this.atoms.length;c<d;c++)this.atoms[c].draw(a,b)},this.render=function(a,b){this.specs&&(b=this.specs);var e=this.atoms.length>0&&this.atoms[0].hetatm!=undefined;if(e){if(b.macro_displayBonds){this.bonds.length>0&&(b.bonds_renderAsLines_3D&&!this.residueSpecs||this.residueSpecs&&this.residueSpecs.bonds_renderAsLines_3D?(a.lineWidth(this.residueSpecs?this.residueSpecs.bonds_width_2D:b.bonds_width_2D),a.lineBuffer.bindBuffers(a)):a.cylinderBuffer.bindBuffers(a),a.material.setTempColors(b.bonds_materialAmbientColor_3D,null,b.bonds_materialSpecularColor_3D,b.bonds_materialShininess_3D));for(var f=0,g=this.bonds.length;f<g;f++){var h=this.bonds[f];!h.a1.hetatm&&(b.macro_atomToLigandDistance==-1||h.a1.closestDistance!=undefined&&b.macro_atomToLigandDistance>=h.a1.closestDistance&&b.macro_atomToLigandDistance>=h.a2.closestDistance)&&h.render(a,this.residueSpecs?this.residueSpecs:b)}}if(b.macro_displayAtoms){this.atoms.length>0&&(a.sphereBuffer.bindBuffers(a),a.material.setTempColors(b.atoms_materialAmbientColor_3D,null,b.atoms_materialSpecularColor_3D,b.atoms_materialShininess_3D));for(var f=0,g=this.atoms.length;f<g;f++){var i=this.atoms[f];!i.hetatm&&(b.macro_atomToLigandDistance==-1||i.closestDistance!=undefined&&b.macro_atomToLigandDistance>=i.closestDistance)&&i.render(a,this.residueSpecs?this.residueSpecs:b)}}}if(b.bonds_display){this.bonds.length>0&&(b.bonds_renderAsLines_3D?(a.lineWidth(b.bonds_width_2D),a.lineBuffer.bindBuffers(a)):a.cylinderBuffer.bindBuffers(a),a.material.setTempColors(b.bonds_materialAmbientColor_3D,null,b.bonds_materialSpecularColor_3D,b.bonds_materialShininess_3D));for(var f=0,g=this.bonds.length;f<g;f++){var h=this.bonds[f];(!e||h.a1.hetatm)&&h.render(a,b)}}if(b.atoms_display){for(var f=0,g=this.atoms.length;f<g;f++){var i=this.atoms[f];i.bondNumber=0,i.renderAsStar=!1}for(var f=0,g=this.bonds.length;f<g;f++){var h=this.bonds[f];h.a1.bondNumber++,h.a2.bondNumber++}this.atoms.length>0&&(a.sphereBuffer.bindBuffers(a),a.material.setTempColors(b.atoms_materialAmbientColor_3D,null,b.atoms_materialSpecularColor_3D,b.atoms_materialShininess_3D));var j=[];for(var f=0,g=this.atoms.length;f<g;f++){var i=this.atoms[f];if(!e||i.hetatm&&(b.macro_showWater||!i.isWater))b.atoms_nonBondedAsStars_3D&&i.bondNumber==0?(i.renderAsStar=!0,j.push(i)):i.render(a,b)}if(j.length>0){a.starBuffer.bindBuffers(a);for(var f=0,g=j.length;f<g;f++)j[f].render(a,b)}}if(this.chains){a.setMatrixUniforms(a.modelViewMatrix);if(b.proteins_displayRibbon){a.material.setTempColors(b.proteins_materialAmbientColor_3D,null,b.proteins_materialSpecularColor_3D,b.proteins_materialShininess_3D);for(var k=0,l=this.ribbons.length;k<l;k++)if(b.proteins_useShapelyColors||b.proteins_useAminoColors||b.proteins_usePolarityColors){var m=b.proteins_ribbonCartoonize?this.cartoons[k]:this.ribbons[k];m.front.bindBuffers(a);for(var f=0,g=m.front.segments.length;f<g;f++)m.front.segments[f].render(a,b);m.back.bindBuffers(a);for(var f=0,g=m.back.segments.length;f<g;f++)m.back.segments[f].render(a,b)}else if(b.proteins_ribbonCartoonize){var m=this.cartoons[k];m.front.bindBuffers(a);for(var f=0,g=m.front.cartoonSegments.length;f<g;f++)m.front.cartoonSegments[f].render(a,b);m.back.bindBuffers(a);for(var f=0,g=m.back.cartoonSegments.length;f<g;f++)m.back.cartoonSegments[f].render(a,b)}else{var m=this.ribbons[k];m.front.render(a,b),m.back.render(a,b)}}if(b.proteins_displayBackbone){if(!this.alphaCarbonTrace){this.alphaCarbonTrace={nodes:[],edges:[]};for(var k=0,l=this.chains.length;k<l;k++){var n=this.chains[k],o=n.length>2&&d[n[2].name]&&d[n[2].name].aminoColor=="#BEA06E";if(!o&&n.length>0)for(var f=1,g=n.length-2;f<g;f++){var p=n[f].cp1;p.chainColor=n.chainColor,this.alphaCarbonTrace.nodes.push(p);var h=new c.Bond(n[f].cp1,n[f+1].cp1);h.residueName=n[f].name,h.chainColor=n.chainColor,this.alphaCarbonTrace.edges.push(h),f==n.length-3&&(p=n[f+1].cp1,p.chainColor=n.chainColor,this.alphaCarbonTrace.nodes.push(p))}}}if(this.alphaCarbonTrace.nodes.length>0){var q=new c.VisualSpecifications;q.atoms_display=!0,q.bonds_display=!0,q.atoms_sphereDiameter_3D=b.proteins_backboneThickness,q.bonds_cylinderDiameter_3D=b.proteins_backboneThickness,q.bonds_useJMOLColors=!1,q.atoms_color=b.proteins_backboneColor,q.bonds_color=b.proteins_backboneColor,q.atoms_useVDWDiameters_3D=!1,a.material.setTempColors(b.proteins_materialAmbientColor_3D,null,b.proteins_materialSpecularColor_3D,b.proteins_materialShininess_3D),a.material.setDiffuseColor(b.proteins_backboneColor);for(var f=0,g=this.alphaCarbonTrace.nodes.length;f<g;f++){var p=this.alphaCarbonTrace.nodes[f];b.macro_colorByChain&&(q.atoms_color=p.chainColor),a.sphereBuffer.bindBuffers(a),p.render(a,q)}for(var f=0,g=this.alphaCarbonTrace.edges.length;f<g;f++){var r=this.alphaCarbonTrace.edges[f],s=null,t=d[r.residueName]?d[r.residueName]:d["*"];b.macro_colorByChain?s=r.chainColor:b.proteins_useShapelyColors?s=t.shapelyColor:b.proteins_useAminoColors?s=t.aminoColor:b.proteins_usePolarityColors&&(t.polar?s="#C10000":s="#FFFFFF"),s!=null&&(q.bonds_color=s),a.cylinderBuffer.bindBuffers(a),r.render(a,q)}}}if(b.nucleics_display){a.material.setTempColors(b.nucleics_materialAmbientColor_3D,null,b.nucleics_materialSpecularColor_3D,b.nucleics_materialShininess_3D);for(var k=0,l=this.tubes.length;k<l;k++){a.setMatrixUniforms(a.modelViewMatrix);var m=this.tubes[k];m.render(a,b)}}}b.crystals_displayUnitCell&&this.unitCell&&(a.setMatrixUniforms(a.modelViewMatrix),this.unitCell.bindBuffers(a),a.material.setDiffuseColor(b.crystals_unitCellColor),a.lineWidth(b.crystals_unitCellLineWidth),a.drawElements(a.LINES,this.unitCell.vertexIndexBuffer.numItems,a.UNSIGNED_SHORT,0)),this.surface&&b.surfaces_display&&(a.setMatrixUniforms(a.modelViewMatrix),this.surface.bindBuffers(a),a.material.setTempColors(b.surfaces_materialAmbientColor_3D,b.surfaces_color,b.surfaces_materialSpecularColor_3D,b.surfaces_materialShininess_3D),b.surfaces_style=="Dot"?a.drawArrays(a.POINTS,0,this.surface.vertexPositionBuffer.numItems):a.drawElements(a.TRIANGLES,this.surface.vertexIndexBuffer.numItems,a.UNSIGNED_SHORT,0))},this.getCenter3D=function(){if(this.atoms.length==1)return new c.Atom("C",this.atoms[0].x,this.atoms[0].y,this.atoms[0].z);var a=minY=minZ=Infinity,b=maxY=maxZ=-Infinity;if(this.chains)for(var d=0,f=this.chains.length;d<f;d++){var g=this.chains[d];for(var h=0,i=g.length;h<i;h++){var j=g[h];a=e.min(j.cp1.x,a),minY=e.min(j.cp1.y,minY),minZ=e.min(j.cp1.z,minZ),b=e.max(j.cp1.x,b),maxY=e.max(j.cp1.y,maxY),maxZ=e.max(j.cp1.z,maxZ),a=e.min(j.cp2.x,a),minY=e.min(j.cp2.y,minY),minZ=e.min(j.cp2.z,minZ),b=e.max(j.cp2.x,b),maxY=e.max(j.cp2.y,maxY),maxZ=e.max(j.cp2.z,maxZ)}}for(var d=0,f=this.atoms.length;d<f;d++)a=e.min(this.atoms[d].x,a),minY=e.min(this.atoms[d].y,minY),minZ=e.min(this.atoms[d].z,minZ),b=e.max(this.atoms[d].x,b),maxY=e.max(this.atoms[d].y,maxY),maxZ=e.max(this.atoms[d].z,maxZ);return new c.Atom("C",(b+a)/2,(maxY+minY)/2,(maxZ+minZ)/2)},this.getCenter=function(){if(this.atoms.length==1)return new c.Point(this.atoms[0].x,this.atoms[0].y);var a=minY=Infinity,b=maxY=-Infinity;for(var d=0,f=this.atoms.length;d<f;d++)a=e.min(this.atoms[d].x,a),minY=e.min(this.atoms[d].y,minY),b=e.max(this.atoms[d].x,b),maxY=e.max(this.atoms[d].y,maxY);return new c.Point((b+a)/2,(maxY+minY)/2)},this.getDimension=function(){if(this.atoms.length==1)return new c.Point(0,0);var a=minY=Infinity,b=maxY=-Infinity;if(this.chains){for(var d=0,f=this.chains.length;d<f;d++){var g=this.chains[d];for(var h=0,i=g.length;h<i;h++){var j=g[h];a=e.min(j.cp1.x,a),minY=e.min(j.cp1.y,minY),b=e.max(j.cp1.x,b),maxY=e.max(j.cp1.y,maxY),a=e.min(j.cp2.x,a),minY=e.min(j.cp2.y,minY),b=e.max(j.cp2.x,b),maxY=e.max(j.cp2.y,maxY)}}a-=30,minY-=30,minZ-=30,b+=30,maxY+=30,maxZ+=30}for(var d=0,f=this.atoms.length;d<f;d++)a=e.min(this.atoms[d].x,a),minY=e.min(this.atoms[d].y,minY),b=e.max(this.atoms[d].x,b),maxY=e.max(this.atoms[d].y,maxY);return new c.Point(b-a,maxY-minY)},this.check=function(){if(this.findRings){this.rings=(new a.informatics.SSSRFinder(this)).rings;for(var b=0,c=this.bonds.length;b<c;b++)this.bonds[b].ring=null;for(var b=0,c=this.rings.length;b<c;b++)this.rings[b].setupBonds()}for(var b=0,c=this.atoms.length;b<c;b++){this.atoms[b].isLone=!1;if(this.atoms[b].label=="C"){var d=0;for(var e=0,f=this.bonds.length;e<f;e++)(this.bonds[e].a1==this.atoms[b]||this.bonds[e].a2==this.atoms[b])&&d++;d==0&&(this.atoms[b].isLone=!0)}}var g=!1;for(var b=0,c=this.atoms.length;b<c;b++)this.atoms[b].z!=0&&(g=!0);g&&(this.sortAtomsByZ(),this.sortBondsByZ()),this.setupMetaData()},this.getAngles=function(a){var b=[];for(var c=0,d=this.bonds.length;c<d;c++)this.bonds[c].contains(a)&&b.push(a.angle(this.bonds[c].getNeighbor(a)));return b.sort(),b},this.getCoordinationNumber=function(a){var b=0;for(var c=0,d=a.length;c<d;c++)b+=a[c].bondOrder;return b},this.getBonds=function(a){var b=[];for(var c=0,d=this.bonds.length;c<d;c++)this.bonds[c].contains(a)&&b.push(this.bonds[c]);return b},this.sortAtomsByZ=function(){for(var a=1,b=this.atoms.length;a<b;a++){var c=a;while(c>0&&this.atoms[c].z<this.atoms[c-1].z){var d=this.atoms[c];this.atoms[c]=this.atoms[c-1],this.atoms[c-1]=d,c--}}},this.sortBondsByZ=function(){for(var a=1,b=this.bonds.length;a<b;a++){var c=a;while(c>0&&this.bonds[c].a1.z+this.bonds[c].a2.z<this.bonds[c-1].a1.z+this.bonds[c-1].a2.z){var d=this.bonds[c];this.bonds[c]=this.bonds[c-1],this.bonds[c-1]=d,c--}}},this.setupMetaData=function(){for(var b=0,c=this.atoms.length;b<c;b++){var d=this.atoms[b],f=this.getBonds(d),g=this.getAngles(d);d.isHidden=f.length==2&&e.abs(e.abs(g[1]-g[0])-e.PI)<e.PI/30&&f[0].bondOrder==f[1].bondOrder;var h=a.math.angleBetweenLargest(g);d.angleOfLeastInterference=h.angle%(e.PI*2),d.largestAngle=h.largest,d.coordinationNumber=this.getCoordinationNumber(f),d.bondNumber=f.length}},this.scaleToAverageBondLength=function(a){var b=this.getAverageBondLength();if(b!=0){var c=a/b;for(var d=0,e=this.atoms.length;d<e;d++)this.atoms[d].x*=c,this.atoms[d].y*=c}},this.getAverageBondLength=function(){if(this.bonds.length==0)return 0;var a=0;for(var b=0,c=this.bonds.length;b<c;b++)a+=this.bonds[b].getLength();return a/=this.bonds.length,a},!0}}(ChemDoodle,ChemDoodle.math,ChemDoodle.structures,ChemDoodle.RESIDUE,Math),function(a,b,c,d){var e=10,f=e*e,g=e*e*e,h=[6/g,0,0,0,6/g,2/f,0,0,1/g,1/f,1/e,0,0,0,0,1],i=[-1/6,.5,-0.5,1/6,.5,-1,.5,0,-0.5,0,.5,0,1/6,2/3,1/6,0],j=c.multiply(i,h,[]);a.Residue=function(f){this.Ns=9,this.resSeq=f,this.setup=function(b){var c=[b.x-this.cp1.x,b.y-this.cp1.y,b.z-this.cp1.z],e=[this.cp2.x-this.cp1.x,this.cp2.y-this.cp1.y,this.cp2.z-this.cp1.z],f=d.cross(c,e,[]);this.D=d.cross(f,c,[]),d.normalize(f),d.normalize(this.D),this.guidePointsSmall=[],this.guidePointsLarge=[];var g=[(b.x+this.cp1.x)/2,(b.y+this.cp1.y)/2,(b.z+this.cp1.z)/2];this.helix&&(d.scale(f,1.5),d.add(g,f)),this.guidePointsSmall[0]=new a.Atom("",g[0]-this.D[0]/2,g[1]-this.D[1]/2,g[2]-this.D[2]/2);for(var h=1;h<this.Ns;h++)this.guidePointsSmall[h]=new a.Atom("",this.guidePointsSmall[0].x+this.D[0]*h/this.Ns,this.guidePointsSmall[0].y+this.D[1]*h/this.Ns,this.guidePointsSmall[0].z+this.D[2]*h/this.Ns);d.scale(this.D,4),this.guidePointsLarge[0]=new a.Atom("",g[0]-this.D[0]/2,g[1]-this.D[1]/2,g[2]-this.D[2]/2);for(var h=1;h<this.Ns;h++)this.guidePointsLarge[h]=new a.Atom("",this.guidePointsLarge[0].x+this.D[0]*h/this.Ns,this.guidePointsLarge[0].y+this.D[1]*h/this.Ns,this.guidePointsLarge[0].z+this.D[2]*h/this.Ns)},this.getGuidePointSet=function(a){if(a==0)return this.helix||this.sheet?this.guidePointsLarge:this.guidePointsSmall;if(a==1)return this.guidePointsSmall;if(a==2)return this.guidePointsLarge},this.computeLineSegments=function(a,b,c,d){this.split=b.helix!=this.helix||b.sheet!=this.sheet,this.lineSegments=this.innerCompute(0,a,b,c,!1),d&&(this.lineSegmentsCartoon=this.innerCompute(b.helix||b.sheet?2:1,a,b,c,!0))},this.innerCompute=function(f,g,h,i,k){var l=[],n=this.getGuidePointSet(f),o=g.getGuidePointSet(f),p=h.getGuidePointSet(f),q=i.getGuidePointSet(f);for(var r=0,s=this.guidePointsLarge.length;r<s;r++){var t=[o[r].x,o[r].y,o[r].z,1,n[r].x,n[r].y,n[r].z,1,p[r].x,p[r].y,p[r].z,1,q[r].x,q[r].y,q[r].z,1],u=c.multiply(t,j,[]),v=[];for(var w=0;w<e;w++){for(var x=3;x>0;x--)for(var y=0;y<4;y++)u[x*4+y]+=u[(x-1)*4+y];v[w]=new a.Atom("",u[12]/u[15],u[13]/u[15],u[14]/u[15])}l[r]=v}if(k&&this.arrow)for(var x=0,z=e;x<z;x++){var A=1.5-1.3*x/e,B=b.floor(this.Ns/2),C=l[B];for(var y=0,D=l.length;y<D;y++)if(y!=B){var E=C[x],F=l[y][x],G=[F.x-E.x,F.y-E.y,F.z-E.z];d.scale(G,A),F.x=E.x+G[0],F.y=E.y+G[1],F.z=E.z+G[2]}}return l}}}(ChemDoodle.structures,Math,mat4,vec3),function(a,b,c,d,e){b.Spectrum=function(){this.data=[],this.metadata=[],this.dataDisplay=[],this.title=null,this.xUnit=null,this.yUnit=null,this.continuous=!0,this.integrationSensitivity=.01;var f=0,g=!1;return this.draw=function(c,h,i,j){var k=5,l=0,n=0;c.fillStyle=h.text_color,c.textAlign="center",c.textBaseline="alphabetic",c.font=h.getFontString(h.text_font_size,h.text_font_families),this.xUnit&&(n+=h.text_font_size,c.fillText(this.xUnit,i/2,j-2)),this.yUnit&&h.plots_showYAxis&&(l+=h.text_font_size,c.save(),c.translate(h.text_font_size,j/2),c.rotate(-e.PI/2),c.fillText(this.yUnit,0,0),c.restore()),this.title!=null&&(k+=h.text_font_size,c.fillText(this.title,i/2,h.text_font_size)),n+=5+h.text_font_size,h.plots_showYAxis&&(l+=5+c.measureText("1000").width),h.plots_showGrid&&(c.strokeStyle=h.plots_gridColor,c.lineWidth=h.plots_gridLineWidth,c.strokeRect(l,k,i-l,j-n-k)),c.textAlign="center",c.textBaseline="top";var o=this.maxX-this.minX,p=o/100,r=.001;while(r<p||o/r>25)r*=10;var s=0,t=h.plots_flipXAxis?i:0;for(var u=e.round(this.minX/r)*r;u<=this.maxX;u+=r/2){var v=this.getTransformedX(u,h,i,l);if(v>l){c.strokeStyle="black",c.lineWidth=1;if(s%2==0){c.beginPath(),c.moveTo(v,j-n),c.lineTo(v,j-n+2),c.stroke();var w=u.toFixed(5);while(w.charAt(w.length-1)=="0")w=w.substring(0,w.length-1);w.charAt(w.length-1)=="."&&(w=w.substring(0,w.length-1));var x=c.measureText(w).width;h.plots_flipXAxis&&(x*=-1);var y=v-x/2;if(h.plots_flipXAxis?y<t:y>t)c.fillText(w,v,j-n+2),t=v+x/2;h.plots_showGrid&&(c.strokeStyle=h.plots_gridColor,c.lineWidth=h.plots_gridLineWidth,c.beginPath(),c.moveTo(v,j-n),c.lineTo(v,k),c.stroke())}else c.beginPath(),c.moveTo(v,j-n),c.lineTo(v,j-n+2),c.stroke()}s++}if(h.plots_showYAxis||h.plots_showGrid){var z=1/h.scale,s=0;c.textAlign="right",c.textBaseline="middle";for(var u=0;u<=10;u++){var A=z/10*u,B=k+(j-n-k)*(1-A*h.scale);h.plots_showGrid&&(c.strokeStyle=h.plots_gridColor,c.lineWidth=h.plots_gridLineWidth,c.beginPath(),c.moveTo(l,B),c.lineTo(i,B),c.stroke());if(h.plots_showYAxis){c.strokeStyle="black",c.lineWidth=1,c.beginPath(),c.moveTo(l,B),c.lineTo(l-3,B),c.stroke();var C=A*100,D=e.max(0,3-e.floor(C).toString().length),w=C.toFixed(D);if(D>0)while(w.charAt(w.length-1)=="0")w=w.substring(0,w.length-1);w.charAt(w.length-1)=="."&&(w=w.substring(0,w.length-1)),c.fillText(w,l-3,B)}}}c.strokeStyle="black",c.lineWidth=1,c.beginPath(),c.moveTo(i,j-n),c.lineTo(l,j-n),h.plots_showYAxis&&c.lineTo(l,k),c.stroke();if(this.dataDisplay.length>0){c.textAlign="left",c.textBaseline="top";var E=0;for(var u=0,F=this.dataDisplay.length;u<F;u++)if(this.dataDisplay[u].value)c.fillText([this.dataDisplay[u].display,": ",this.dataDisplay[u].value].join(""),l+10,k+10+E*(h.text_font_size+5)),E++;else if(this.dataDisplay[u].tag)for(var G=0,H=this.metadata.length;G<H;G++)if(a.stringStartsWith(this.metadata[G],this.dataDisplay[u].tag)){var I=this.metadata[G];if(this.dataDisplay[u].display){var J=d.inArray("=",this.metadata[G]);I=[this.dataDisplay[u].display,": ",J>-1?this.metadata[G].substring(J+2):this.metadata[G]].join("")}c.fillText(I,l+10,k+10+E*(h.text_font_size+5)),E++;break}}c.strokeStyle=h.plots_color,c.lineWidth=h.plots_width;var K=[];c.beginPath();if(this.continuous){var L=!1;for(var u=0,F=this.data.length;u<F;u++){var v=this.getTransformedX(this.data[u].x,h,i,l);if(v>=l&&v<i){var B=this.getTransformedY(this.data[u].y,h,j,n,k);h.plots_showIntegration&&e.abs(this.data[u].y)>this.integrationSensitivity&&K.push(new b.Point(this.data[u].x,this.data[u].y)),L||(c.moveTo(v,B),L=!0),c.lineTo(v,B)}else if(L)break}}else for(var u=0,F=this.data.length;u<F;u++){var v=this.getTransformedX(this.data[u].x,h,i,l);v>=l&&v<i&&(c.moveTo(v,j-n),c.lineTo(v,this.getTransformedY(this.data[u].y,h,j,n,k)))}c.stroke();if(h.plots_showIntegration&&K.length>1){c.strokeStyle=h.plots_integrationColor,c.lineWidth=h.plots_integrationLineWidth,c.beginPath();var M=K[1].x>K[0].x,N;if(this.flipXAxis&&!M||!this.flipXAxis&&M){for(var u=K.length-2;u>=0;u--)K[u].y=K[u].y+K[u+1].y;N=K[0].y}else{for(var u=1,F=K.length;u<F;u++)K[u].y=K[u].y+K[u-1].y;N=K[K.length-1].y}for(var u=0,F=K.length;u<F;u++){var v=this.getTransformedX(K[u].x,h,i,l),B=this.getTransformedY(K[u].y/h.scale/N,h,j,n,k);u==0?c.moveTo(v,B):c.lineTo(v,B)}c.stroke()}f=l,g=h.plots_flipXAxis},this.getTransformedY=function(a,b,c,d,e){return e+(c-d-e)*(1-a*b.scale)},this.getTransformedX=function(a,b,c,d){var e=d+(a-this.minX)/(this.maxX-this.minX)*(c-d);return b.plots_flipXAxis&&(e=c+d-e),e},this.getInverseTransformedX=function(a,b,c){return g&&(a=b+c-a),(a-c)*(this.maxX-this.minX)/(b-c)+this.minX},this.setup=function(){var a=Number.MAX_VALUE,b=Number.MIN_VALUE,c=Number.MIN_VALUE;for(var d=0,f=this.data.length;d<f;d++)a=e.min(a,this.data[d].x),b=e.max(b,this.data[d].x),c=e.max(c,this.data[d].y);this.continuous?(this.minX=a,this.maxX=b):(this.minX=a-1,this.maxX=b+1);for(var d=0,f=this.data.length;d<f;d++)this.data[d].y/=c},this.zoom=function(a,b,d,g){var h=this.getInverseTransformedX(a,d,f),i=this.getInverseTransformedX(b,d,f);this.minX=e.min(h,i),this.maxX=e.max(h,i);if(g){var j=Number.MIN_VALUE;for(var k=0,l=this.data.length;k<l;k++)c.isBetween(this.data[k].x,this.minX,this.maxX)&&(j=e.max(j,this.data[k].y));return 1/j}},this.translate=function(a,b){var c=a/(b-f)*(this.maxX-this.minX)*(g?1:-1);this.minX+=c,this.maxX+=c},this.alertMetadata=function(){alert(this.metadata.join("\n"))},!0}}(ChemDoodle.extensions,ChemDoodle.structures,ChemDoodle.math,jQuery,Math),function(a,b){a._Mesh=function(){return!0},a._Mesh.prototype.storeData=function(a,b,c){this.positionData=a,this.normalData=b,this.indexData=c},a._Mesh.prototype.setupBuffers=function(a){this.vertexPositionBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.vertexPositionBuffer),a.bufferData(a.ARRAY_BUFFER,new Float32Array(this.positionData),a.STATIC_DRAW),this.vertexPositionBuffer.itemSize=3,this.vertexPositionBuffer.numItems=this.positionData.length/3,this.vertexNormalBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.vertexNormalBuffer),a.bufferData(a.ARRAY_BUFFER,new Float32Array(this.normalData),a.STATIC_DRAW),this.vertexNormalBuffer.itemSize=3,this.vertexNormalBuffer.numItems=this.normalData.length/3,this.indexData&&(this.vertexIndexBuffer=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.vertexIndexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.indexData),a.STATIC_DRAW),this.vertexIndexBuffer.itemSize=1,this.vertexIndexBuffer.numItems=this.indexData.length)},a._Mesh.prototype.bindBuffers=function(a){this.vertexPositionBuffer||this.setupBuffers(a),a.bindBuffer(a.ARRAY_BUFFER,this.vertexPositionBuffer),a.vertexAttribPointer(a.shader.vertexPositionAttribute,this.vertexPositionBuffer.itemSize,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,this.vertexNormalBuffer),a.vertexAttribPointer(a.shader.vertexNormalAttribute,this.vertexNormalBuffer.itemSize,a.FLOAT,!1,0,0),this.vertexIndexBuffer&&a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.vertexIndexBuffer)}}(ChemDoodle.structures,Math),function(a,b){a.Cylinder=function(a,c,d){var e=[],f=[];for(var g=0;g<d;g++){var h=g*2*b.PI/d,i=b.cos(h),j=b.sin(h);f.push(i,0,j),e.push(a*i,0,a*j),f.push(i,0,j),e.push(a*i,c,a*j)}return f.push(1,0,0),e.push(a,0,0),f.push(1,0,0),e.push(a,c,0),this.storeData(e,f),!0},a.Cylinder.prototype=new a._Mesh}(ChemDoodle.structures,Math),function(a,b){a.Sphere=function(a,c,d){var e=[],f=[];for(var g=0;g<=c;g++){var h=g*b.PI/c,i=b.sin(h),j=b.cos(h);for(var k=0;k<=d;k++){var l=k*2*b.PI/d,n=b.sin(l),o=b.cos(l),p=o*i,q=j,r=n*i;f.push(p,q,r),e.push(a*p,a*q,a*r)}}var s=[];d+=1;for(var g=0;g<c;g++)for(var k=0;k<d;k++){var t=g*d+k%d,u=t+d;s.push(t),s.push(u),s.push(t+1),k<d-1&&(s.push(u),s.push(u+1),s.push(t+1))}return this.storeData(e,f,s),!0},a.Sphere.prototype=new a._Mesh}(ChemDoodle.structures,Math),function(a,b,c,d){function e(b,c,d){this.name=c,this.entire=b,this.getColor=function(c){return c.macro_colorByChain?this.chainColor:this.name?this.getResidueColor(a[this.name]?this.name:"*",c):this.helix?b.front?c.proteins_ribbonCartoonHelixPrimaryColor:c.proteins_ribbonCartoonHelixSecondaryColor:this.sheet?c.proteins_ribbonCartoonSheetColor:b.front?c.proteins_primaryColor:c.proteins_secondaryColor},this.getResidueColor=function(b,c){var d=a[b];return c.proteins_useShapelyColors?d.shapelyColor:c.proteins_useAminoColors?d.aminoColor:c.proteins_usePolarityColors?d.polar?"#C10000":"#FFFFFF":"#FFFFFF"},this.render=function(a,b){this.vertexIndexBuffer||(this.vertexIndexBuffer=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.vertexIndexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(d),a.STATIC_DRAW),this.vertexIndexBuffer.itemSize=1,this.vertexIndexBuffer.numItems=d.length),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.vertexIndexBuffer),a.material.setDiffuseColor(this.getColor(b)),a.drawElements(a.TRIANGLES,this.vertexIndexBuffer.numItems,a.UNSIGNED_SHORT,0)}}b.Ribbon=function(a,b,f){var g=a[0].lineSegments.length,h=a[0].lineSegments[0].length,i=[],j=[];this.front=b>0;for(var k=0,l=a.length-1;k<l;k++){var n=a[k];for(var o=0;o<g;o++){var p=f?n.lineSegmentsCartoon[o]:n.lineSegments[o],q=o==0,r=!1;for(var s=0;s<h;s++){var t=p[s],u=k,v=s+1;k==a.length-2&&s==h-1?v--:s==h-1&&(u++,v=0);var w=f?a[u].lineSegmentsCartoon[o][v]:a[u].lineSegments[o][v],x=!1,y=o+1;o==g-1&&(y-=2,x=!0);var z=f?n.lineSegmentsCartoon[y][s]:n.lineSegments[y][s],A=[w.x-t.x,w.y-t.y,w.z-t.z],B=[z.x-t.x,z.y-t.y,z.z-t.z],C=d.cross(A,B,[]);s==0&&(d.normalize(A),d.scale(A,-1),j.push(A[0],A[1],A[2]),i.push(t.x,t.y,t.z)),q||r?(d.normalize(B),d.scale(B,-1),j.push(B[0],B[1],B[2]),i.push(t.x,t.y,t.z),q&&s==h-1&&(q=!1,s=-1)):(d.normalize(C),(x&&!this.front||!x&&this.front)&&d.scale(C,-1),j.push(C[0],C[1],C[2]),d.scale(C,c.abs(b)),i.push(t.x+C[0],t.y+C[1],t.z+C[2]),o==g-1&&s==h-1&&(r=!0,s=-1));if(s==-1||s==h-1)d.normalize(A),j.push(A[0],A[1],A[2]),i.push(t.x,t.y,t.z)}}}g+=2,h+=2,this.segments=[];var D;f&&(this.cartoonSegments=[],D=[]);var E=[];for(var k=0,l=a.length-1;k<l;k++){if(k>0&&D){var F=a[k-1];if(a[k].split){var G=new e(this,null,D);a[k].helix&&(G.helix=!0),a[k].sheet&&(G.sheet=!0),this.cartoonSegments.push(G),D=[]}}var H=k*g*h,I=[];for(var o=0,J=g-1;o<J;o++){var K=H+o*h;for(var s=0;s<h;s++){var L=1;k==a.length-2?L=0:s==h-1&&(L=g*h-s);var M=[K+s,K+h+s,K+h+s+L,K+s,K+s+L,K+h+s+L];if(s!=h-1)for(var N=0;N<6;N++)I.push(M[N]);if(s==h-2&&k<a.length-3){var O=g*h-s;M[2]+=O,M[4]+=O,M[5]+=O}for(var N=0;N<6;N++)E.push(M[N]);if(D)for(var N=0;N<6;N++)D.push(M[N])}}var P=a[k+1].name;this.segments.push(new e(this,P,I))}return D&&this.cartoonSegments.push(new e(this,null,D)),this.storeData(i,j,E),this.render=function(a,b){this.bindBuffers(a);var c=b.macro_colorByChain?this.chainColor:null;c||(c=this.front?b.proteins_primaryColor:b.proteins_secondaryColor),a.material.setDiffuseColor(c),a.drawElements(a.TRIANGLES,this.vertexIndexBuffer.numItems,a.UNSIGNED_SHORT,0)},!0},b.Ribbon.prototype=new b._Mesh}(ChemDoodle.RESIDUE,ChemDoodle.structures,Math,vec3),function(a,b,c){b.Light=function(b,d,e){return this.diffuseRGB=a.getRGB(b,1),this.specularRGB=a.getRGB(d,1),this.direction=e,this.lightScene=function(a){var b="u_light.";a.uniform3f(a.getUniformLocation(a.program,b+"diffuse_color"),this.diffuseRGB[0],this.diffuseRGB[1],this.diffuseRGB[2]),a.uniform3f(a.getUniformLocation(a.program,b+"specular_color"),this.specularRGB[0],this.specularRGB[1],this.specularRGB[2]);var d=c.create(this.direction);c.normalize(d),c.negate(d),a.uniform3f(a.getUniformLocation(a.program,b+"direction"),d[0],d[1],d[2]);var e=[0,0,0],f=[e[0]+d[0],e[1]+d[1],e[2]+d[2]],g=c.length(f);g==0?f=[0,0,1]:c.scale(1/g),a.uniform3f(a.getUniformLocation(a.program,b+"half_vector"),f[0],f[1],f[2])},!0}}(ChemDoodle.math,ChemDoodle.structures,vec3),function(a){a.Line=function(){return this.storeData([0,0,0,0,1,0],[0,0,0,0,0,0]),!0},a.Line.prototype=new a._Mesh}(ChemDoodle.structures),function(a,b){b.Material=function(b){var c="u_material.",d=b.getUniformLocation(b.program,c+"ambient_color"),e=b.getUniformLocation(b.program,c+"diffuse_color"),f=b.getUniformLocation(b.program,c+"specular_color"),g=b.getUniformLocation(b.program,c+"shininess"),h=b.getUniformLocation(b.program,c+"alpha");return this.setTempColors=function(c,i,j,k){if(!this.aCache||this.aCache!=c){this.aCache=c;var l=a.getRGB(c,1);b.uniform3f(d,l[0],l[1],l[2])}if(i!=null&&(!this.dCache||this.dCache!=i)){this.dCache=i;var l=a.getRGB(i,1);b.uniform3f(e,l[0],l[1],l[2])}if(!this.sCache||this.sCache!=j){this.sCache=j;var l=a.getRGB(j,1);b.uniform3f(f,l[0],l[1],l[2])}if(!this.snCache||this.snCache!=k)this.snCache=k,b.uniform1f(g,k);this.alCache=1,b.uniform1f(h,1)},this.setDiffuseColor=function(c){if(!this.dCache||this.dCache!=c){this.dCache=c;var d=a.getRGB(c,1);b.uniform3f(e,d[0],d[1],d[2])}},this.setAlpha=function(a){if(!this.alCache||this.alCache!=a)this.alCache=a,b.uniform1f(h,a)},!0}}(ChemDoodle.math,ChemDoodle.structures),function(a,b,c){a.MolecularSurface=function(d,e,f,g,h){function L(a,b,c,d){var e=a.index;if(a.contained){e=-1;var f=Infinity;for(var g=0,h=b.length;g<h;g++){var i=b[g];for(var j=0,k=i.length;j<k;j++){var l=i[j];if(!l.contained&&l.index!=c&&l.index!=d){var m=l.distance3D(a);m<f&&(e=l.index,f=m)}}}}return e}var i=[],j=[],k=[],l=[];for(var n=0;n<=e;n++){var o=n*c.PI/e,p=c.sin(o),q=c.cos(o);for(var r=0;r<=f;r++){var s=r*2*c.PI/f;l.push(c.cos(s)*p,q,c.sin(s)*p)}}var t=[];for(var u=0,v=d.atoms.length;u<v;u++){var w=[],x=d.atoms[u],y=b[x.label][h]+g,z=[];for(var A=0,B=d.atoms.length;A<B;A++)if(A!=u){var C=d.atoms[A];C.index=A,x.distance3D(C)<y+b[C.label][h]+g&&z.push(C)}for(var A=0,B=l.length;A<B;A+=3){var D=new a.Atom("C",x.x+y*l[A],x.y+y*l[A+1],x.z+y*l[A+2]);for(var E=0,F=z.length;E<F;E++){var C=z[E];if(D.distance3D(C)<b[C.label][h]+g){D.contained=!0;break}}w.push(D)}t.push(w)}var G=[];f++;for(var n=0;n<e;n++)for(var r=0;r<f;r++){var H=n*f+r%f,I=H+f;G.push(H),G.push(I),G.push(H+1),r<f-1&&(G.push(I),G.push(I+1),G.push(H+1))}var J=0;for(var u=0,v=t.length;u<v;u++){var w=t[u];for(var A=0,B=w.length;A<B;A++){var D=w[A];D.contained||(D.index=J,J++,i.push(D.x,D.y,D.z),j.push(l[A*3],l[A*3+1],l[A*3+2]))}for(var A=0,B=G.length;A<B;A+=3){var H=w[G[A]],I=w[G[A+1]],K=w[G[A+2]];!H.contained&&!I.contained&&!K.contained&&k.push(H.index,I.index,K.index)}}var M=[];for(var u=0,v=t.length;u<v;u++){var w=t[u];for(var A=0,B=G.length;A<B;A+=3){var H=w[G[A]],I=w[G[A+1]],K=w[G[A+2]],z=[];for(var E=0,F=t.length;E<F;E++)E!=u&&z.push(t[E]);if(!(H.contained&&I.contained&&K.contained)&&(H.contained||I.contained||K.contained)){var N=L(H,z,-1,-1),O=L(I,z,N,-1),P=L(K,z,N,O);if(N!=-1&&O!=-1&&P!=-1){var Q=!1;for(var E=0,F=M.length;E<F;E+=3){var R=M[E],S=M[E+1],T=M[E+2],U=N==R||N==S||N==T,V=O==R||O==S||O==T,W=P==R||P==S||P==T;if(U&&V&&W){Q=!0;break}}Q||M.push(N,O,P)}}}}return k=k.concat(M),this.storeData(i,j,k),!0},a.MolecularSurface.prototype=new a._Mesh}(ChemDoodle.structures,ChemDoodle.ELEMENT,Math),function(a,b){a.Shader=function(){return this.init=function(a){var b=this.getShader(a,"vertex-shader");b==null&&(b=this.loadDefaultVertexShader(a));var c=this.getShader(a,"fragment-shader");c==null&&(c=this.loadDefaultFragmentShader(a)),a.attachShader(a.program,b),a.attachShader(a.program,c),a.linkProgram(a.program),a.getProgramParameter(a.program,a.LINK_STATUS)||alert("Could not initialize shaders: "+a.getProgramInfoLog(program)),a.useProgram(a.program),this.vertexPositionAttribute=a.getAttribLocation(a.program,"a_vertex_position"),a.enableVertexAttribArray(this.vertexPositionAttribute),this.vertexNormalAttribute=a.getAttribLocation(a.program,"a_vertex_normal"),a.enableVertexAttribArray(this.vertexNormalAttribute)},this.getShader=function(a,c){var d=b.getElementById(c);if(!d)return null;var e=[],f=d.firstChild;while(f)f.nodeType==3&&e.push(f.textContent),f=f.nextSibling;var g;if(d.type=="x-shader/x-fragment")g=a.createShader(a.FRAGMENT_SHADER);else{if(d.type!="x-shader/x-vertex")return null;g=a.createShader(a.VERTEX_SHADER)}return a.shaderSource(g,e.join("")),a.compileShader(g),a.getShaderParameter(g,a.COMPILE_STATUS)?g:(alert(d.type+" "+a.getShaderInfoLog(g)),null)},this.loadDefaultVertexShader=function(a){var b=[];b.push("struct Light"),b.push("{"),b.push("vec3 diffuse_color;"),b.push("vec3 specular_color;"),b.push("vec3 direction;"),b.push("vec3 half_vector;"),b.push("};"),b.push("struct Material"),b.push("{"),b.push("vec3 ambient_color;"),b.push("vec3 diffuse_color;"),b.push("vec3 specular_color;"),b.push("float shininess;"),b.push("float alpha;"),b.push("};"),b.push("attribute vec3 a_vertex_position;"),b.push("attribute vec3 a_vertex_normal;"),b.push("uniform Light u_light;"),b.push("uniform Material u_material;"),b.push("uniform mat4 u_model_view_matrix;"),b.push("uniform mat4 u_projection_matrix;"),b.push("uniform mat3 u_normal_matrix;"),b.push("varying vec4 v_diffuse;"),b.push("varying vec4 v_ambient;"),b.push("varying vec3 v_normal;"),b.push("varying vec3 v_light_direction;"),b.push("void main(void)"),b.push("{"),b.push("if(length(a_vertex_normal)==0.0){"),b.push("v_normal = a_vertex_normal;"),b.push("}else{"),b.push("v_normal = normalize(u_normal_matrix * a_vertex_normal);"),b.push("}"),b.push("vec4 diffuse = vec4(u_light.diffuse_color, 1.0);"),b.push("v_light_direction = u_light.direction;"),b.push("v_ambient = vec4(u_material.ambient_color, 1.0);"),b.push("v_diffuse = vec4(u_material.diffuse_color, 1.0) * diffuse;"),b.push("gl_Position = u_projection_matrix * u_model_view_matrix * vec4(a_vertex_position, 1.0);"),b.push("}");var c=a.createShader(a.VERTEX_SHADER);return a.shaderSource(c,b.join("")),a.compileShader(c),a.getShaderParameter(c,a.COMPILE_STATUS)?c:(alert("Vertex shader failed to compile: "+a.getShaderInfoLog(c)),null)},this.loadDefaultFragmentShader=function(a){var b=[];b.push("precision mediump float;\n"),b.push("struct Light"),b.push("{"),b.push("vec3 diffuse_color;"),b.push("vec3 specular_color;"),b.push("vec3 direction;"),b.push("vec3 half_vector;"),b.push("};"),b.push("struct Material"),b.push("{"),b.push("vec3 ambient_color;"),b.push("vec3 diffuse_color;"),b.push("vec3 specular_color;"),b.push("float shininess;"),b.push("float alpha;"),b.push("};"),b.push("uniform Light u_light;"),b.push("uniform Material u_material;"),b.push("varying vec4 v_diffuse;"),b.push("varying vec4 v_ambient;"),b.push("varying vec3 v_normal;"),b.push("varying vec3 v_light_direction;"),b.push("void main(void)"),b.push("{"),b.push("if(length(v_normal)==0.0){"),b.push("gl_FragColor = vec4(v_diffuse.rgba);"),b.push("}else{"),b.push("float nDotL = max(dot(v_normal, v_light_direction), 0.0);"),b.push("vec4 color = vec4(v_diffuse.rgb*nDotL, v_diffuse.a);"),b.push("float nDotHV = max(dot(v_normal, u_light.half_vector), 0.0);"),b.push("vec4 specular = vec4(u_material.specular_color * u_light.specular_color, 1.0);"),b.push("color+=vec4(specular.rgb * pow(nDotHV, u_material.shininess), specular.a);"),b.push("gl_FragColor = color+v_ambient;"),b.push("gl_FragColor.a*=u_material.alpha;"),b.push("}"),b.push("}");var c=a.createShader(a.FRAGMENT_SHADER);return a.shaderSource(c,b.join("")),a.compileShader(c),a.getShaderParameter(c,a.COMPILE_STATUS)?c:(alert("Fragment shader failed to compile: "+a.getShaderInfoLog(c)),null)},!0}}(ChemDoodle.structures,document),function(a,b){a.Shape=function(c,d){var e=c.length,f=[],g=[],h=new a.Point;for(var i=0,j=e;i<j;i++){var k=i+1;i==j-1&&(k=0);var l=[0,0,1],m=c[i],n=c[k],o=[n.x-m.x,n.y-m.y,0],p=b.cross(l,o);for(var q=0;q<2;q++)f.push(m.x,m.y,d/2),f.push(m.x,m.y,-d/2),f.push(n.x,n.y,d/2),f.push(n.x,n.y,-d/2);for(var q=0;q<4;q++)g.push(p[0],p[1],p[2]);g.push(0,0,1),g.push(0,0,-1),g.push(0,0,1),g.push(0,0,-1),h.add(m)}h.x/=e,h.y/=e,g.push(0,0,1),f.push(h.x,h.y,d/2),g.push(0,0,-1),f.push(h.x,h.y,-d/2);var r=[],s=e*8;for(var i=0,j=e;i<j;i++){var t=i*8;r.push(t),r.push(t+1),r.push(t+3),r.push(t),r.push(t+2),r.push(t+3),r.push(t+4),r.push(t+6),r.push(s),r.push(t+5),r.push(t+7),r.push(s+1)}return this.storeData(f,g,r),!0},a.Shape.prototype=new a._Mesh}(ChemDoodle.structures,vec3),function(a,b,c){a.Star=function(){var a=[.8944,.4472,0,.2764,.4472,.8506,.2764,.4472,-0.8506,-0.7236,.4472,.5257,-0.7236,.4472,-0.5257,-0.3416,.4472,0,-0.1056,.4472,.3249,-0.1056,.4472,-0.3249,.2764,.4472,.2008,.2764,.4472,-0.2008,-0.8944,-0.4472,0,-0.2764,-0.4472,.8506,-0.2764,-0.4472,-0.8506,.7236,-0.4472,.5257,.7236,-0.4472,-0.5257,.3416,-0.4472,0,.1056,-0.4472,.3249,.1056,-0.4472,-0.3249,-0.2764,-0.4472,.2008,-0.2764,-0.4472,-0.2008,-0.5527,.1058,0,-0.1708,.1058,.5527,-0.1708,.1058,-0.5527,.4471,.1058,.3249,.4471,.1058,-0.3249,.5527,-0.1058,0,.1708,-0.1058,.5527,.1708,-0.1058,-0.5527,-0.4471,-0.1058,.3249,-0.4471,-0.1058,-0.3249,0,1,0,0,-1,0],b=[0,9,8,2,7,9,4,5,7,3,6,5,1,8,6,0,8,23,30,6,8,3,21,6,11,26,21,13,23,26,2,9,24,30,8,9,1,23,8,13,25,23,14,24,25,4,7,22,30,9,7,0,24,9,14,27,24,12,22,27,3,5,20,30,7,5,2,22,7,12,29,22,10,20,29,1,6,21,30,5,6,4,20,5,10,28,20,11,21,28,10,19,18,12,17,19,14,15,17,13,16,15,11,18,16,31,19,17,14,17,27,2,27,22,4,22,29,10,29,19,31,18,19,12,19,29,4,29,20,3,20,28,11,28,18,31,16,18,10,18,28,3,28,21,1,21,26,13,26,16,31,15,16,11,16,26,1,26,23,0,23,25,14,25,15,31,17,15,13,15,25,0,25,24,2,24,27,12,27,17],d=[],e=[],f=[];for(var g=0,h=b.length;g<h;g+=3){var i=b[g]*3,j=b[g+1]*3,k=b[g+2]*3,l=[a[i],a[i+1],a[i+2]],m=[a[j],a[j+1],a[j+2]],n=[a[k],a[k+1],a[k+2]],o=[l[0]-m[0],l[1]-m[1],l[2]-m[2]],p=[n[0]-m[0],n[1]-m[1],n[2]-m[2]],q=c.cross(p,o,[]);c.normalize(q),d.push(l[0],l[1],l[2],m[0],m[1],m[2],n[0],n[1],n[2]),e.push(q[0],q[1],q[2],q[0],q[1],q[2],q[0],q[1],q[2]),f.push(g,g+1,g+2)}return this.storeData(d,e,f),!0},a.Star.prototype=new a._Mesh}(ChemDoodle.structures,Math,vec3),function(a,b,c,d,e,f){var g=function(a,b,c){var f=d.sqrt(b[1]*b[1]+b[2]*b[2]),g=[1,0,0,0,0,b[2]/f,-b[1]/f,0,0,b[1]/f,b[2]/f,0,0,0,0,1],h=[1,0,0,0,0,b[2]/f,b[1]/f,0,0,-b[1]/f,b[2]/f,0,0,0,0,1],i=[f,0,-b[0],0,0,1,0,0,b[0],0,f,0,0,0,0,1],j=[f,0,b[0],0,0,1,0,0,-b[0],0,f,0,0,0,0,1],k=[d.cos(c),-d.sin(c),0,0,d.sin(c),d.cos(c),0,0,0,0,1,0,0,0,0,1],l=e.multiply(g,e.multiply(i,e.multiply(k,e.multiply(j,h,[]))));this.rotate=function(){return e.multiplyVec3(l,a)}};c.Tube=function(h,i,j){var k=h[0].lineSegments[0].length,l=[],n=[];this.ends=[],this.ends.push(h[0].lineSegments[0][0]),this.ends.push(h[h.length-2].lineSegments[0][0]);var o=[1,0,0];for(var p=0,q=h.length-1;p<q;p++){var r=h[p],s=Infinity,t=new c.Atom("",h[p+1].cp1.x,h[p+1].cp1.y,h[p+1].cp1.z);for(var u=0;u<k;u++){var v=r.lineSegments[0][u],w=null;u==k-1?p==h.length-2?w=r.lineSegments[0][u-1]:w=h[p+1].lineSegments[0][0]:w=r.lineSegments[0][u+1];var x=[w.x-v.x,w.y-v.y,w.z-v.z];f.normalize(x),p==h.length-2&&u==k-1&&f.scale(x,-1);var y=vec3.cross(x,o,[]);f.normalize(y),f.scale(y,i/2);var z=new g(y,x,2*Math.PI/j);for(var A=0,B=j;A<B;A++){var C=z.rotate();A==d.floor(j/4)&&(o=[C[0],C[1],C[2]]),n.push(C[0],C[1],C[2]),l.push(v.x+C[0],v.y+C[1],v.z+C[2])}if(t!=null){var D=v.distance3D(t);D<s&&(s=D,h[p+1].pPoint=v)}}}var E=[];for(var p=0,q=h.length-2;p<q;p++){var F=p*k*j;for(var u=0,G=k;u<G;u++){var H=F+u*j;for(var A=0;A<j;A++){var I=1;A==j-1&&(p==h.length-2?nextRes=0:nextRes=-A);var J=H+A;E.push(J),E.push(J+j),E.push(J+j+I),E.push(J),E.push(J+I),E.push(J+j+I)}}}this.storeData(l,n,E);var K=[new c.Point(2,0)];for(var p=0;p<60;p++){var L=p/60*d.PI;K.push(new c.Point(2*d.cos(L),-2*d.sin(L)))}K.push(new c.Point(-2,0),new c.Point(-2,4),new c.Point(2,4));var M=new c.Shape(K,1);return this.render=function(g,j){this.bindBuffers(g),g.material.setDiffuseColor(j.macro_colorByChain?this.chainColor:j.nucleics_tubeColor),g.drawElements(g.TRIANGLES,this.vertexIndexBuffer.numItems,g.UNSIGNED_SHORT,0),g.sphereBuffer.bindBuffers(g);for(var k=0;k<2;k++){var l=this.ends[k],n=e.translate(g.modelViewMatrix,[l.x,l.y,l.z],[]),o=i/2;e.scale(n,[o,o,o]),g.setMatrixUniforms(n),g.drawElements(g.TRIANGLES,g.sphereBuffer.vertexIndexBuffer.numItems,g.UNSIGNED_SHORT,0)}g.cylinderBuffer.bindBuffers(g);for(var k=1,p=h.length-1;k<p;k++){var q=h[k],r=q.pPoint,s=new c.Atom("",q.cp2.x,q.cp2.y,q.cp2.z),t=1.001*r.distance3D(s),u=[i/4,t,i/4],n=e.translate(g.modelViewMatrix,[r.x,r.y,r.z],[]),v=[0,1,0],w=0,x=null,y=[s.x-r.x,s.y-r.y,s.z-r.z];r.x==s.x&&r.z==s.z?(x=[0,0,1],r.y<r.y&&(w=d.PI)):(w=a.vec3AngleFrom(v,y),x=f.cross(v,y,[])),w!=0&&e.rotate(n,w,x),e.scale(n,u),g.setMatrixUniforms(n),g.drawArrays(g.TRIANGLE_STRIP,0,g.cylinderBuffer.vertexPositionBuffer.numItems)}M.bindBuffers(g),!j.nucleics_useShapelyColors&&!j.macro_colorByChain&&g.material.setDiffuseColor(j.nucleics_baseColor);for(var k=1,p=h.length-1;k<p;k++){var q=h[k],s=q.cp2,n=e.translate(g.modelViewMatrix,[s.x,s.y,s.z],[]),v=[0,1,0],w=0,x=null,z=q.cp3,y=[z.x-s.x,z.y-s.y,z.z-s.z];s.x==z.x&&s.z==z.z?(x=[0,0,1],s.y<s.y&&(w=d.PI)):(w=a.vec3AngleFrom(v,y),x=f.cross(v,y,[])),w!=0&&e.rotate(n,w,x);var A=[1,0,0],B=e.rotate(e.identity([]),w,x);e.multiplyVec3(B,A);var C=q.cp4,D=q.cp5;if(C.y!=D.y||C.z!=D.z){var E=[D.x-C.x,D.y-C.y,D.z-C.z],F=a.vec3AngleFrom(A,E);f.dot(y,f.cross(A,E))<0&&(F*=-1),e.rotateY(n,F)}j.nucleics_useShapelyColors&&!j.macro_colorByChain&&(b[q.name]?g.material.setDiffuseColor(b[q.name].shapelyColor):g.material.setDiffuseColor(b["*"].shapelyColor)),g.setMatrixUniforms(n),g.drawElements(g.TRIANGLES,M.vertexIndexBuffer.numItems,g.UNSIGNED_SHORT,0)}},!0},c.Tube.prototype=new c._Mesh}(ChemDoodle.extensions,ChemDoodle.RESIDUE,ChemDoodle.structures,Math,mat4,vec3),function(a,b){a.UnitCell=function(a){var b=[],c=[],d=function(a,d,e,f){b.push(a[0],a[1],a[2]),b.push(d[0],d[1],d[2]),b.push(e[0],e[1],e[2]),b.push(f[0],f[1],f[2]);for(var g=0;g<4;g++)c.push(0,0,0)};d(a.o,a.x,a.xy,a.y),d(a.o,a.y,a.yz,a.z),d(a.o,a.z,a.xz,a.x),d(a.yz,a.y,a.xy,a.xyz),d(a.xyz,a.xz,a.z,a.yz),d(a.xy,a.x,a.xz,a.xyz);var e=[];for(var f=0;f<6;f++){var g=f*4;e.push(g,g+1,g+1,g+2,g+2,g+3,g+3,g)}return this.storeData(b,c,e),!0},a.UnitCell.prototype=new a._Mesh}(ChemDoodle.structures,vec3),function(a,b,c){a.Plate=function(a){this.lanes=new Array(a);for(i=0,ii=a;i<ii;i++)this.lanes[i]=[];return this.sort=function(){for(i=0,ii=this.lanes.length;i<ii;i++)this.lanes[i].sort(function(a,b){return a-b})},this.draw=function(a,d){var e=a.canvas.width,f=a.canvas.height;this.origin=9*f/10,this.front=f/10,this.laneLength=this.origin-this.front,a.strokeStyle="#000000",a.beginPath(),a.moveTo(0,this.front),b.contextHashTo(a,0,this.front,e,this.front,3,3),a.closePath(),a.stroke(),a.beginPath(),a.moveTo(0,this.origin),a.lineTo(e,this.origin),a.closePath(),a.stroke();for(i=0,ii=this.lanes.length;i<ii;i++){var g=(i+1)*e/(ii+1);a.beginPath(),a.moveTo(g,this.origin),a.lineTo(g,this.origin+3),a.closePath(),a.stroke();for(s=0,ss=this.lanes[i].length;s<ss;s++){var h=this.origin-this.laneLength*this.lanes[i][s].rf;switch(this.lanes[i][s].type){case"compact":a.beginPath(),a.arc(g,h,3,0,2*c.PI,!1),a.closePath();break;case"expanded":a.beginPath(),a.arc(g,h,7,0,2*c.PI,!1),a.closePath();break;case"trailing":break;case"widened":b.contextOval(a,g-18,h-10,36,10);break;case"cresent":a.beginPath(),a.arc(g,h,9,0,c.PI,!0),a.closePath()}switch(this.lanes[i][s].style){case"solid":a.fillStyle="#000000",a.fill();break;case"transparent":a.stroke();break;case"gradient":}}}},!0},a.Plate.Spot=function(a,b,c){this.type=a,this.rf=b,this.style=c?c:"solid"}}(ChemDoodle.structures,ChemDoodle.extensions,Math),function(a,b,c){a.default_backgroundColor="#FFFFFF",a.default_scale=1,a.default_rotateAngle=0,a.default_bondLength_2D=20,a.default_angstromsPerBondLength=1.25,a.default_lightDirection_3D=[-0.1,-0.1,-1],a.default_lightDiffuseColor_3D="#FFFFFF",a.default_lightSpecularColor_3D="#FFFFFF",a.default_projectionPerspective_3D=!0,a.default_projectionPerspectiveVerticalFieldOfView_3D=45,a.default_projectionOrthoWidth_3D=40,a.default_projectionWidthHeightRatio_3D=1,a.default_projectionFrontCulling_3D=.1,a.default_projectionBackCulling_3D=1e4,a.default_atoms_display=!0,a.default_atoms_color="#000000",a.default_atoms_font_size_2D=12,a.default_atoms_font_families_2D=["Helvetica","Arial","Dialog"],a.default_atoms_font_bold_2D=!1,a.default_atoms_font_italic_2D=!1,a.default_atoms_circles_2D=!1,a.default_atoms_circleDiameter_2D=10,a.default_atoms_circleBorderWidth_2D=1,a.default_atoms_lonePairDistance_2D=8,a.default_atoms_lonePairSpread_2D=4,a.default_atoms_lonePairDiameter_2D=1,a.default_atoms_useJMOLColors=!1,a.default_atoms_usePYMOLColors=!1,a.default_atoms_resolution_3D=60,a.default_atoms_sphereDiameter_3D=.8,a.default_atoms_useVDWDiameters_3D=!1,a.default_atoms_vdwMultiplier_3D=1,a.default_atoms_materialAmbientColor_3D="#000000",a.default_atoms_materialSpecularColor_3D="#555555",a.default_atoms_materialShininess_3D=32,a.default_atoms_implicitHydrogens_2D=!0,a.default_atoms_displayTerminalCarbonLabels_2D=!1,a.default_atoms_showHiddenCarbons_2D=!0,a.default_atoms_displayAllCarbonLabels_2D=!1,a.default_atoms_nonBondedAsStars_3D=!1,a.default_bonds_display=!0,a.default_bonds_color="#000000",a.default_bonds_width_2D=1,a.default_bonds_saturationWidth_2D=.2,a.default_bonds_ends_2D="round",a.default_bonds_useJMOLColors=!1,a.default_bonds_usePYMOLColors=!1,a.default_bonds_colorGradient=!1,a.default_bonds_saturationAngle_2D=c.PI/3,a.default_bonds_symmetrical_2D=!1,a.default_bonds_clearOverlaps_2D=!1,a.default_bonds_overlapClearWidth_2D=.5,a.default_bonds_atomLabelBuffer_2D=.25,a.default_bonds_wedgeThickness_2D=.22,a.default_bonds_hashWidth_2D=1,a.default_bonds_hashSpacing_2D=2.5,a.default_bonds_showBondOrders_3D=!1,a.default_bonds_resolution_3D=60,a.default_bonds_renderAsLines_3D=!1,a.default_bonds_cylinderDiameter_3D=.3,a.default_bonds_materialAmbientColor_3D="#222222",a.default_bonds_materialSpecularColor_3D="#555555",a.default_bonds_materialShininess_3D=32,a.default_proteins_displayRibbon=!0,a.default_proteins_displayBackbone=!1,a.default_proteins_backboneThickness=1.5,a.default_proteins_backboneColor="#CCCCCC",a.default_proteins_ribbonCartoonize=!1,a.default_proteins_useShapelyColors=!1,a.default_proteins_useAminoColors=!1,a.default_proteins_usePolarityColors=!1,a.default_proteins_primaryColor="#FF0D0D",a.default_proteins_secondaryColor="#FFFF30",a.default_proteins_ribbonCartoonHelixPrimaryColor="#00E740",a.default_proteins_ribbonCartoonHelixSecondaryColor="#9905FF",a.default_proteins_ribbonCartoonSheetColor="#E8BB99",a.default_proteins_ribbonThickness=.2,a.default_proteins_materialAmbientColor_3D="#222222",a.default_proteins_materialSpecularColor_3D="#555555",a.default_proteins_materialShininess_3D=32,a.default_nucleics_display=!0,a.default_nucleics_tubeColor="#CCCCCC",a.default_nucleics_baseColor="#C10000",a.default_nucleics_useShapelyColors=!0,a.default_nucleics_tubeThickness=1.5,a.default_nucleics_tubeResolution_3D=60,a.default_nucleics_materialAmbientColor_3D="#222222",a.default_nucleics_materialSpecularColor_3D="#555555",a.default_nucleics_materialShininess_3D=32,a.default_macro_displayAtoms=!1,a.default_macro_displayBonds=!1,a.default_macro_atomToLigandDistance=-1,a.default_macro_showWater=!1,a.default_macro_colorByChain=!1,a.default_surfaces_display=!0,a.default_surfaces_style="Dot",a.default_surfaces_color="#E9B862",a.default_surfaces_materialAmbientColor_3D="#000000",a.default_surfaces_materialSpecularColor_3D="#000000",a.default_surfaces_materialShininess_3D=32,a.default_crystals_displayUnitCell=!0,a.default_crystals_unitCellColor="green",a.default_crystals_unitCellLineWidth=1,a.default_plots_color="#000000",a.default_plots_width=1,a.default_plots_showIntegration=!1,a.default_plots_integrationColor="#c10000",a.default_plots_integrationLineWidth=1,a.default_plots_showGrid=!1,a.default_plots_gridColor="gray",a.default_plots_gridLineWidth=.5,a.default_plots_showYAxis=!0,a.default_plots_flipXAxis=!1,a.default_text_font_size=12,a.default_text_font_families=["Helvetica","Arial","Dialog"],a.default_text_color="#000000",b.VisualSpecifications=function(){this.backgroundColor=a.default_backgroundColor,this.scale=a.default_scale,this.rotateAngle=a.default_rotateAngle,this.bondLength=a.default_bondLength_2D,this.angstromsPerBondLength=a.default_angstromsPerBondLength,this.lightDirection_3D=a.default_lightDirection_3D,this.lightDiffuseColor_3D=a.default_lightDiffuseColor_3D,this.lightSpecularColor_3D=a.default_lightSpecularColor_3D,this.projectionPerspective_3D=a.default_projectionPerspective_3D,this.projectionPerspectiveVerticalFieldOfView_3D=a.default_projectionPerspectiveVerticalFieldOfView_3D,this.projectionOrthoWidth_3D=a.default_projectionOrthoWidth_3D,this.projectionWidthHeightRatio_3D=a.default_projectionWidthHeightRatio_3D,this.projectionFrontCulling_3D=a.default_projectionFrontCulling_3D,this.projectionBackCulling_3D=a.default_projectionBackCulling_3D,this.atoms_display=a.default_atoms_display,this.atoms_color=a.default_atoms_color,this.atoms_font_size_2D=a.default_atoms_font_size_2D,this.atoms_font_families_2D=[];for(var b=0,c=a.default_atoms_font_families_2D.length;b<c;b++)this.atoms_font_families_2D[b]=a.default_atoms_font_families_2D[b];this.atoms_font_bold_2D=a.default_atoms_font_bold_2D,this.atoms_font_italic_2D=a.default_atoms_font_italic_2D,this.atoms_circles_2D=a.default_atoms_circles_2D,this.atoms_circleDiameter_2D=a.default_atoms_circleDiameter_2D,this.atoms_circleBorderWidth_2D=a.default_atoms_circleBorderWidth_2D,this.atoms_lonePairDistance_2D=a.default_atoms_lonePairDistance_2D,this.atoms_lonePairSpread_2D=a.default_atoms_lonePairSpread_2D,this.atoms_lonePairDiameter_2D=a.default_atoms_lonePairDiameter_2D,this.atoms_useJMOLColors=a.default_atoms_useJMOLColors,this.atoms_usePYMOLColors=a.default_atoms_usePYMOLColors,this.atoms_resolution_3D=a.default_atoms_resolution_3D,this.atoms_sphereDiameter_3D=a.default_atoms_sphereDiameter_3D,this.atoms_useVDWDiameters_3D=a.default_atoms_useVDWDiameters_3D,this.atoms_vdwMultiplier_3D=a.default_atoms_vdwMultiplier_3D,this.atoms_materialAmbientColor_3D=a.default_atoms_materialAmbientColor_3D,this.atoms_materialSpecularColor_3D=a.default_atoms_materialSpecularColor_3D,this.atoms_materialShininess_3D=a.default_atoms_materialShininess_3D,this.atoms_implicitHydrogens_2D=a.default_atoms_implicitHydrogens_2D,this.atoms_displayTerminalCarbonLabels_2D=a.default_atoms_displayTerminalCarbonLabels_2D,this.atoms_showHiddenCarbons_2D=a.default_atoms_showHiddenCarbons_2D,this.atoms_displayAllCarbonLabels_2D=a.default_atoms_displayAllCarbonLabels_2D,this.atoms_nonBondedAsStars_3D=a.default_atoms_nonBondedAsStars_3D,this.bonds_display=a.default_bonds_display,this.bonds_color=a.default_bonds_color,this.bonds_width_2D=a.default_bonds_width_2D,this.bonds_saturationWidth_2D=a.default_bonds_saturationWidth_2D,this.bonds_ends_2D=a.default_bonds_ends_2D,this.bonds_useJMOLColors=a.default_bonds_useJMOLColors,this.bonds_usePYMOLColors=a.default_bonds_usePYMOLColors,this.bonds_colorGradient=a.default_bonds_colorGradient,this.bonds_saturationAngle_2D=a.default_bonds_saturationAngle_2D,this.bonds_symmetrical_2D=a.default_bonds_symmetrical_2D,this.bonds_clearOverlaps_2D=a.default_bonds_clearOverlaps_2D,this.bonds_overlapClearWidth_2D=a.default_bonds_overlapClearWidth_2D,this.bonds_atomLabelBuffer_2D=a.default_bonds_atomLabelBuffer_2D,this.bonds_wedgeThickness_2D=a.default_bonds_wedgeThickness_2D,this.bonds_hashWidth_2D=a.default_bonds_hashWidth_2D,this.bonds_hashSpacing_2D=a.default_bonds_hashSpacing_2D,this.bonds_showBondOrders_3D=a.default_bonds_showBondOrders_3D,this.bonds_resolution_3D=a.default_bonds_resolution_3D,this.bonds_renderAsLines_3D=a.default_bonds_renderAsLines_3D,this.bonds_cylinderDiameter_3D=a.default_bonds_cylinderDiameter_3D,this.bonds_materialAmbientColor_3D=a.default_bonds_materialAmbientColor_3D,this.bonds_materialSpecularColor_3D=a.default_bonds_materialSpecularColor_3D,this.bonds_materialShininess_3D=a.default_bonds_materialShininess_3D,this.proteins_displayRibbon=a.default_proteins_displayRibbon,this.proteins_displayBackbone=a.default_proteins_displayBackbone,this.proteins_backboneThickness=a.default_proteins_backboneThickness,this.proteins_backboneColor=a.default_proteins_backboneColor,this.proteins_ribbonCartoonize=a.default_proteins_ribbonCartoonize,this.proteins_useShapelyColors=a.default_proteins_useShapelyColors,this.proteins_useAminoColors=a.default_proteins_useAminoColors,this.proteins_usePolarityColors=a.default_proteins_usePolarityColors,this.proteins_primaryColor=a.default_proteins_primaryColor,this.proteins_secondaryColor=a.default_proteins_secondaryColor,this.proteins_ribbonCartoonHelixPrimaryColor=a.default_proteins_ribbonCartoonHelixPrimaryColor,this.proteins_ribbonCartoonHelixSecondaryColor=a.default_proteins_ribbonCartoonHelixSecondaryColor,this.proteins_ribbonCartoonSheetColor=a.default_proteins_ribbonCartoonSheetColor,this.proteins_ribbonThickness=a.default_proteins_ribbonThickness,this.proteins_materialAmbientColor_3D=a.default_proteins_materialAmbientColor_3D,this.proteins_materialSpecularColor_3D=a.default_proteins_materialSpecularColor_3D,this.proteins_materialShininess_3D=a.default_proteins_materialShininess_3D,this.macro_displayAtoms=a.default_macro_displayAtoms,this.macro_displayBonds=a.default_macro_displayBonds,this.macro_atomToLigandDistance=a.default_macro_atomToLigandDistance,this.nucleics_display=a.default_nucleics_display,this.nucleics_tubeColor=a.default_nucleics_tubeColor,this.nucleics_baseColor=a.default_nucleics_baseColor,this.nucleics_useShapelyColors=a.default_nucleics_useShapelyColors,this.nucleics_tubeThickness=a.default_nucleics_tubeThickness,this.nucleics_tubeResolution_3D=a.default_nucleics_tubeResolution_3D,this.nucleics_materialAmbientColor_3D=a.default_nucleics_materialAmbientColor_3D,this.nucleics_materialSpecularColor_3D=a.default_nucleics_materialSpecularColor_3D,this.nucleics_materialShininess_3D=a.default_nucleics_materialShininess_3D,this.macro_showWater=a.default_macro_showWater,this.macro_colorByChain=a.default_macro_colorByChain,this.surfaces_display=a.default_surfaces_display,this.surfaces_style=a.default_surfaces_style,this.surfaces_color=a.default_surfaces_color,this.surfaces_materialAmbientColor_3D=a.default_surfaces_materialAmbientColor_3D,this.surfaces_materialSpecularColor_3D=a.default_surfaces_materialSpecularColor_3D,this.surfaces_materialShininess_3D=a.default_surfaces_materialShininess_3D,this.crystals_displayUnitCell=a.default_crystals_displayUnitCell,this.crystals_unitCellColor=a.default_crystals_unitCellColor,this.crystals_unitCellLineWidth=a.default_crystals_unitCellLineWidth,this.plots_color=a.default_plots_color,this.plots_width=a.default_plots_width,this.plots_showIntegration=a.default_plots_showIntegration,this.plots_integrationColor=a.default_plots_integrationColor,this.plots_integrationLineWidth=a.default_plots_integrationLineWidth,this.plots_showGrid=a.default_plots_showGrid,this.plots_gridColor=a.default_plots_gridColor,this.plots_gridLineWidth=a.default_plots_gridLineWidth,this.plots_showYAxis=a.default_plots_showYAxis,this.plots_flipXAxis=a.default_plots_flipXAxis,this.text_font_size=a.default_text_font_size,this.text_font_families=[];for(var b=0,c=a.default_text_font_families.length;b<c;b++)this.text_font_families[b]=a.default_text_font_families[b];this.text_color=a.default_text_color,this.set3DRepresentation=function(b){this.atoms_display=!0,this.bonds_display=!0,this.bonds_color="#777777",this.atoms_useVDWDiameters_3D=!0,this.atoms_useJMOLColors=!0,this.bonds_useJMOLColors=!0,this.bonds_showBondOrders_3D=!0,this.bonds_renderAsLines_3D=!1,b=="Ball and Stick"?(this.atoms_vdwMultiplier_3D=.3,this.bonds_useJMOLColors=!1,this.bonds_cylinderDiameter_3D=.3,this.bonds_materialAmbientColor_3D=a.default_atoms_materialAmbientColor_3D):b=="van der Waals Spheres"?(this.bonds_display=!1,this.atoms_vdwMultiplier_3D=1):b=="Stick"?(this.atoms_useVDWDiameters_3D=!1,this.bonds_showBondOrders_3D=!1,this.bonds_cylinderDiameter_3D=this.atoms_sphereDiameter_3D=.8,this.bonds_materialAmbientColor_3D=this.atoms_materialAmbientColor_3D):b=="Wireframe"?(this.atoms_useVDWDiameters_3D=!1,this.bonds_cylinderDiameter_3D=.05,this.atoms_sphereDiameter_3D=.15,this.bonds_materialAmbientColor_3D=a.default_atoms_materialAmbientColor_3D):b=="Line"?(this.atoms_display=!1,this.bonds_renderAsLines_3D=!0,this.bonds_width_2D=1,this.bonds_cylinderDiameter_3D=.05):alert('"'+b+'" is not recognized. Use one of the following strings:\n\n'+"1. Ball and Stick\n"+"2. van der Waals Spheres\n"+"3. Stick\n"+"4. Wireframe\n"+"5. Line\n")},this.getFontString=function(a,b,c,d){var e=[];c&&e.push("bold "),d&&e.push("italic "),e.push(a+"px ");for(var f=0,g=b.length;f<g;f++){var h=b[f];h.indexOf(" ")!=-1&&(h='"'+h+'"'),e.push((f!=0?",":"")+h)}return e.join("")}}}(ChemDoodle,ChemDoodle.structures,Math),function(a,b,c,d){c.getPointsPerAngstrom=function(){return a.default_bondLength_2D/a.default_angstromsPerBondLength},c.BondDeducer=function(){return this.margin=1.1,this.deduceCovalentBonds=function(a,e){var f=c.getPointsPerAngstrom();e&&(f=e);for(var g=0,h=a.atoms.length;g<h;g++)for(var i=g+1;i<h;i++){var j=a.atoms[g],k=a.atoms[i];j.distance3D(k)<(b[j.label].covalentRadius+b[k.label].covalentRadius)*f*this.margin&&a.bonds.push(new d.Bond(j,k,1))}},!0}}(ChemDoodle,ChemDoodle.ELEMENT,ChemDoodle.informatics,ChemDoodle.structures),function(a){a.HydrogenDeducer=function(){return this.removeHydrogens=function(a){var b=[],c=[];for(var d=0,e=a.bonds.length;d<e;d++)a.bonds[d].a1.label!="H"&&a.bonds[d].a2.label!="H"&&c.push(a.bonds[d]);for(var d=0,e=a.atoms.length;d<e;d++)a.atoms[d].label!="H"&&b.push(a.atoms[d]);a.atoms=b,a.bonds=c},!0}}(ChemDoodle.informatics),function(a,b,c){b.MolecularSurfaceGenerator=function(){return this.generateSurface=function(a,b,d,e,f){return new c.MolecularSurface(a,b,d,e,f)},!0}}(ChemDoodle,ChemDoodle.informatics,ChemDoodle.structures),function(a,b){a.Splitter=function(){return this.split=function(a){var c=[];for(var d=0,e=a.atoms.length;d<e;d++)a.atoms[d].visited=!1;for(var d=0,e=a.bonds.length;d<e;d++)a.bonds[d].visited=!1;for(var d=0,e=a.atoms.length;d<e;d++){var f=a.atoms[d];if(!f.visited){var g=new b.Molecule;g.atoms.push(f),f.visited=!0;var h=new b.Queue;h.enqueue(f);while(!h.isEmpty()){var i=h.dequeue();for(var j=0,k=a.bonds.length;j<k;j++){var l=a.bonds[j];if(l.contains(i)&&!l.visited){l.visited=!0,g.bonds.push(l);var m=l.getNeighbor(i);m.visited||(m.visited=!0,g.atoms.push(m),h.enqueue(m))}}}c.push(g)}}return c},!0}}(ChemDoodle.informatics,ChemDoodle.structures),function(a,b){a.StructureBuilder=function(){return this.copy=function(a){for(var c=0,d=a.atoms.length;c<d;c++)a.atoms[c].metaID=c;var e=new b.Molecule;for(var c=0,d=a.atoms.length;c<d;c++)e.atoms[c]=new b.Atom(a.atoms[c].label,a.atoms[c].x,a.atoms[c].y,a.atoms[c].z);for(var c=0,d=a.bonds.length;c<d;c++)e.bonds[c]=new b.Bond(e.atoms[a.bonds[c].a1.metaID],e.atoms[a.bonds[c].a2.metaID],a.bonds[c].bondOrder);return e},!0}}(ChemDoodle.informatics,ChemDoodle.structures),function(a){a._Counter=function(){return this.value=0,this.molecule=null,this.setMolecule=function(a){this.value=0,this.molecule=a,this.innerCalculate&&this.innerCalculate()},!0}}(ChemDoodle.informatics),function(a){a.FrerejacqueNumberCounter=function(a){return this.setMolecule(a),!0},a.FrerejacqueNumberCounter.prototype=new a._Counter,a.FrerejacqueNumberCounter.prototype.innerCalculate=function(){this.value=this.molecule.bonds.length-this.molecule.atoms.length+(new a.NumberOfMoleculesCounter(this.molecule)).value}}(ChemDoodle.informatics),function(a,b){b.NumberOfMoleculesCounter=function(a){return this.setMolecule(a),!0},b.NumberOfMoleculesCounter.prototype=new b._Counter,b.NumberOfMoleculesCounter.prototype.innerCalculate=function(){for(var b=0,c=this.molecule.atoms.length;b<c;b++)this.molecule.atoms[b].visited=!1;for(var b=0,c=this.molecule.atoms.length;b<c;b++)if(!this.molecule.atoms[b].visited){this.value++;var d=new a.Queue;this.molecule.atoms[b].visited=!0,d.enqueue(this.molecule.atoms[b]);while(!d.isEmpty()){var e=d.dequeue();for(var f=0,g=this.molecule.bonds.length;f<g;f++){var h=this.molecule.bonds[f];if(h.contains(e)){var i=h.getNeighbor(e);i.visited||(i.visited=!0,d.enqueue(i))}}}}}}(ChemDoodle.structures,ChemDoodle.informatics),function(a,b){a._RingFinder=function(){return this.atoms=null,this.bonds=null,this.rings=null,this.reduce=function(a){for(var b=0,c=a.atoms.length;b<c;b++)a.atoms[b].visited=!1;for(var b=0,c=a.bonds.length;b<c;b++)a.bonds[b].visited=!1;var d=!0;while(d){d=!1;for(var b=0,c=a.atoms.length;b<c;b++){var e=0,f=null;for(var g=0,h=a.bonds.length;g<h;g++)if(a.bonds[g].contains(a.atoms[b])&&!a.bonds[g].visited){e++;if(e==2)break;f=a.bonds[g]}e==1&&(d=!0,f.visited=!0,a.atoms[b].visited=!0)}}for(var b=0,c=a.atoms.length;b<c;b++)a.atoms[b].visited||this.atoms.push(a.atoms[b]);for(var b=0,c=a.bonds.length;b<c;b++)a.bonds[b].visited||this.bonds.push(a.bonds[b]);this.bonds.length==0&&this.atoms.length!=0&&(this.atoms=[])},this.setMolecule=function(a){this.atoms=[],this.bonds=[],this.rings=[],this.reduce(a),this.atoms.length>2&&this.innerGetRings&&this.innerGetRings()},this.fuse=function(){for(var a=0,c=this.rings.length;a<c;a++)for(var d=0,e=this.bonds.length;d<e;d++)b(this.bonds[d].a1,this.rings[a].atoms)!=-1&&b(this.bonds[d].a2,this.rings[a].atoms)!=-1&&this.rings[a].bonds.push(this.bonds[d])},!0}}(ChemDoodle.informatics,jQuery.inArray),function(a,b,c){function d(a,e){this.atoms=[];if(e)for(var f=0,g=e.atoms.length;f<g;f++)this.atoms[f]=e.atoms[f];return this.atoms.push(a),this.grow=function(a,b){var e=this.atoms[this.atoms.length-1],f=[];for(var g=0,h=a.length;g<h;g++)if(a[g].contains(e)){var i=a[g].getNeighbor(e);c(i,b)==-1&&f.push(i)}var j=[];for(var g=0,h=f.length;g<h;g++)j.push(new d(f[g],this));return j},this.check=function(a,d,e){for(var f=0,g=d.atoms.length-1;f<g;f++)if(c(d.atoms[f],this.atoms)!=-1)return null;var h=null;if(d.atoms[d.atoms.length-1]==this.atoms[this.atoms.length-1]){h=new b.Ring,h.atoms[0]=e;for(var f=0,g=this.atoms.length;f<g;f++)h.atoms.push(this.atoms[f]);for(var f=d.atoms.length-2;f>=0;f--)h.atoms.push(d.atoms[f])}else{var i=[];for(var f=0,g=a.length;f<g;f++)a[f].contains(d.atoms[d.atoms.length-1])&&i.push(a[f]);for(var f=0,g=i.length;f<g;f++)if((d.atoms.length==1||!i[f].contains(d.atoms[d.atoms.length-2]))&&i[f].contains(this.atoms[this.atoms.length-1])){h=new b.Ring,h.atoms[0]=e;for(var j=0,k=this.atoms.length;j<k;j++)h.atoms.push(this.atoms[j]);for(var j=d.atoms.length-1;j>=0;j--)h.atoms.push(d.atoms[j]);break}}return h},!0}a.EulerFacetRingFinder=function(a){return this.fingerBreak=5,this.setMolecule(a),!0},a.EulerFacetRingFinder.prototype=new a._RingFinder,a.EulerFacetRingFinder.prototype.innerGetRings=function(){for(var a=0,b=this.atoms.length;a<b;a++){var e=[];for(var f=0,g=this.bonds.length;f<g;f++)this.bonds[f].contains(this.atoms[a])&&e.push(this.bonds[f].getNeighbor(this.atoms[a]));for(var f=0,g=e.length;f<g;f++)for(var h=f+1;h<e.length;h++){var i=[];i[0]=new d(e[f]),i[1]=new d(e[h]);var j=[];j[0]=this.atoms[a];for(var k=0,l=e.length;k<l;k++)k!=f&&k!=h&&j.push(e[k]);var m=[],n=i[0].check(this.bonds,i[1],this.atoms[a]);n&&(m[0]=n);while(m.length==0&&i.length>0&&i[0].atoms.length<this.fingerBreak){var o=[];for(var k=0,l=i.length;k<l;k++){var p=i[k].grow(this.bonds,j);for(var q=0,r=p.length;q<r;q++)o.push(p[q])}i=o;for(var k=0,l=i.length;k<l;k++)for(var q=k+1;q<l;q++){var s=i[k].check(this.bonds,i[q],this.atoms[a]);s&&m.push(s)}if(m.length==0){var t=[];for(var k=0,l=j.length;k<l;k++)for(var q=0,r=this.bonds.length;q<r;q++)if(this.bonds[q].contains(j[k])){var e=this.bonds[q].getNeighbor(j[k]);c(e,j)==-1&&c(e,t)==-1&&t.push(e)}for(var k=0,l=t.length;k<l;k++)j.push(t[k])}}if(m.length>0){var u=null;for(var k=0,l=m.length;k<l;k++)if(!u||u.atoms.length>m[k].atoms.length)u=m[k];var v=!1;for(var k=0,l=this.rings.length;k<l;k++){var w=!0;for(var q=0,r=u.atoms.length;q<r;q++)if(c(u.atoms[q],this.rings[k].atoms)==-1){w=!1;break}if(w){v=!0;break}}v||this.rings.push(u)}}}this.fuse()}}(ChemDoodle.informatics,ChemDoodle.structures,jQuery.inArray),function(a){a.SSSRFinder=function(b){this.rings=[];if(b.atoms.length>0){var c=(new a.FrerejacqueNumberCounter(b)).value,d=(new a.EulerFacetRingFinder(b)).rings;d.sort(function(a,b){return a.atoms.length-b.atoms.length});for(var e=0,f=b.bonds.length;e<f;e++)b.bonds[e].visited=!1;for(var e=0,f=d.length;e<f;e++){var g=!1;for(var h=0,i=d[e].bonds.length;h<i;h++)if(!d[e].bonds[h].visited){g=!0;break}if(g){for(var h=0,i=d[e].bonds.length;h<i;h++)d[e].bonds[h].visited=!0;this.rings.push(d[e])}if(this.rings.length==c)break}}return!0}}(ChemDoodle.informatics),function(a,b,c,d,e,f,g){var h=/\s+/g,i=/\(|\)|\s+/g,j=/\'|\s+/g,k=/,|\'|\s+/g,l=/[0-9]/,m={P:[],A:[[0,.5,.5]],B:[[.5,0,.5]],C:[[.5,.5,0]],I:[[.5,.5,.5]],R:[[2/3,1/3,1/3],[1/3,2/3,2/3]],S:[[1/3,1/3,2/3],[2/3,2/3,1/3]],T:[[1/3,2/3,1/3],[2/3,1/3,2/3]],F:[[0,.5,.5],[.5,0,.5],[.5,.5,0]]},n=function(a){var b=0,c=0,d=0,e=0,f=a.indexOf("x"),g=a.indexOf("y"),h=a.indexOf("z");f!=-1&&(c++,f>0&&a.charAt(f-1)!="+"&&(c*=-1)),g!=-1&&(d++,g>0&&a.charAt(g-1)!="+"&&(d*=-1)),h!=-1&&(e++,h>0&&a.charAt(h-1)!="+"&&(e*=-1));if(a.length>2){var i="+";for(var j=0,k=a.length;j<k;j++){var m=a.charAt(j);(m=="-"||m=="/")&&(j==a.length-1||a.charAt(j+1).match(l))&&(i=m),m.match(l)&&(i=="+"?b+=parseInt(m):i=="-"?b-=parseInt(m):i=="/"&&(b/=parseInt(m)))}}return[b,c,d,e]},o=function(a,b,c,d,f,g){var h=(e.cos(d)-e.cos(g)*e.cos(f))/e.sin(g);return[a,0,0,0,b*e.cos(g),b*e.sin(g),0,0,c*e.cos(f),c*h,c*e.sqrt(1-e.pow(e.cos(f),2)-h*h),0,0,0,0,1]};c.CIFInterpreter=function(){this.read=function(c,g,l,p){g=g?g:1,l=l?l:1,p=p?p:1;var q=new d.Molecule;if(c==null||c.length==0)return q;var r=c.split("\n"),s=0,t=0,u=0,v=0,w=0,x=0,y="P",z=null;while(!b.stringStartsWith(z=r.shift(),"loop_"))z.length>0&&(b.stringStartsWith(z,"_cell_length_a")?s=parseFloat(z.split(i)[1]):b.stringStartsWith(z,"_cell_length_b")?t=parseFloat(z.split(i)[1]):b.stringStartsWith(z,"_cell_length_c")?u=parseFloat(z.split(i)[1]):b.stringStartsWith(z,"_cell_angle_alpha")?v=e.PI*parseFloat(z.split(i)[1])/180:b.stringStartsWith(z,"_cell_angle_beta")?w=e.PI*parseFloat(z.split(i)[1])/180:b.stringStartsWith(z,"_cell_angle_gamma")?x=e.PI*parseFloat(z.split(i)[1])/180:b.stringStartsWith(z,"_symmetry_space_group_name_H-M")&&(y=z.split(j)[1]));var A=o(s,t,u,v,w,x),B=[];while(!b.stringStartsWith(z=r.shift(),"loop_"))z.length>0&&b.stringStartsWith(z,"'")&&B.push(z);while(b.stringStartsWith(r[0],"_"))r.shift();for(var C=0,D=r.length;C<D;C++){z=r[C];if(z.length==0)break;var E=z.split(h);q.atoms.push(new d.Atom(E[2],parseFloat(E[3]),parseFloat(E[4]),parseFloat(E[5])))}var F=m[y],G=[];for(var C=0,D=B.length;C<D;C++){var H=B[C].split(k),I=n(H[1]),J=n(H[2]),K=n(H[3]);for(var L=0,M=q.atoms.length;L<M;L++){var N=q.atoms[L],O=N.x*I[1]+N.y*I[2]+N.z*I[3]+I[0],P=N.x*J[1]+N.y*J[2]+N.z*J[3]+J[0],Q=N.x*K[1]+N.y*K[2]+N.z*K[3]+K[0];G.push(new d.Atom(N.label,O,P,Q));if(F)for(var R=0,S=F.length;R<S;R++){var T=F[R];G.push(new d.Atom(N.label,O+T[0],P+T[1],Q+T[2]))}}}for(var C=0,D=G.length;C<D;C++){var N=G[C];while(N.x>=1)N.x--;while(N.x<0)N.x++;while(N.y>=1)N.y--;while(N.y<0)N.y++;while(N.z>=1)N.z--;while(N.z<0)N.z++}var U=[];for(var C=0,D=G.length;C<D;C++){var V=!1,N=G[C];for(var L=0,M=q.atoms.length;L<M;L++)if(q.atoms[L].distance3D(N)<1e-4){V=!0;break}if(!V){for(var L=0,M=U.length;L<M;L++)if(U[L].distance3D(N)<1e-4){V=!0;break}V||U.push(N)}}q.atoms=q.atoms.concat(U);var W=[];for(var C=0;C<g;C++)for(var L=0;L<l;L++)for(var R=0;R<p;R++)if(C!=0||L!=0||R!=0)for(var X=0,Y=q.atoms.length;X<Y;X++){var N=q.atoms[X];W.push(new d.Atom(N.label,N.x+C,N.y+L,N.z+R))}q.atoms=q.atoms.concat(W);for(var C=0,D=q.atoms.length;C<D;C++){var N=q.atoms[C],Z=f.multiplyVec3(A,[N.x,N.y,N.z]);N.x=Z[0],N.y=Z[1],N.z=Z[2]}(new a.informatics.BondDeducer).deduceCovalentBonds(q,1);var $=[-g/2,-l/2,-p/2];return q.unitCellVectors={o:f.multiplyVec3(A,$,[]),x:f.multiplyVec3(A,[$[0]+1,$[1],$[2]]),y:f.multiplyVec3(A,[$[0],$[1]+1,$[2]]),z:f.multiplyVec3(A,[$[0],$[1],$[2]+1]),xy:f.multiplyVec3(A,[$[0]+1,$[1]+1,$[2]]),xz:f.multiplyVec3(A,[$[0]+1,$[1],$[2]+1]),yz:f.multiplyVec3(A,[$[0],$[1]+1,$[2]+1]),xyz:f.multiplyVec3(A,[$[0]+1,$[1]+1,$[2]+1])},q}};var p=new c.CIFInterpreter;a.readCIF=function(a,b,c,d){return p.read(a,b,c,d)}}(ChemDoodle,ChemDoodle.extensions,ChemDoodle.io,ChemDoodle.structures,Math,mat4,vec3),function(a,b,c,d,e){function f(a,b,c){var d=a.length,e="";for(var f=0;f<b-d;f++)e+=" ";return c?a+e:e+a}c.MOLInterpreter=function(){this.read=function(c,e){e||(e=a.default_bondLength_2D);var f=new d.Molecule;if(c==null||c.length==0)return f;var g=c.split("\n"),h=g[3],i=parseInt(h.substring(0,3)),j=parseInt(h.substring(3,6));for(var k=0;k<i;k++){var l=g[4+k];f.atoms[k]=new d.Atom(l.substring(31,34),parseFloat(l.substring(0,10))*e,(e==1?1:-1)*parseFloat(l.substring(10,20))*e,parseFloat(l.substring(20,30))*e);var m=parseInt(l.substring(34,36));m!=0&&b[f.atoms[k].label]!=null&&(f.atoms[k].mass=b[f.atoms[k].label].mass+m);switch(parseInt(l.substring(36,39))){case 1:f.atoms[k].charge=3;break;case 2:f.atoms[k].charge=2;break;case 3:f.atoms[k].charge=1;break;case 5:f.atoms[k].charge=-1;break;case 6:f.atoms[k].charge=-2;break;case 7:f.atoms[k].charge=-3}}for(var k=0;k<j;k++){var l=g[4+i+k],n=parseInt(l.substring(6,9)),o=parseInt(l.substring(9,12));if(n>3)switch(n){case 4:n=1.5;break;default:n=1}var p=new d.Bond(f.atoms[parseInt(l.substring(0,3))-1],f.atoms[parseInt(l.substring(3,6))-1],n);switch(o){case 3:p.stereo=d.Bond.STEREO_AMBIGUOUS;break;case 1:p.stereo=d.Bond.STEREO_PROTRUDING;break;case 6:p.stereo=d.Bond.STEREO_RECESSED}f.bonds[k]=p}return f},this.write=function(c){var g="Molecule from ChemDoodle Web Components\n\nhttp://www.ichemlabs.com\n";g=g+f(c.atoms.length.toString(),3)+f(c.bonds.length.toString(),3)+"  0  0  0  0            999 v2000\n";var h=c.getCenter();for(var i=0,j=c.atoms.length;i<j;i++){var k=c.atoms[i],l=" 0";if(k.mass!=-1&&b[k.label]!=null){var m=k.mass-b[k.label].mass;m<5&&m>-4&&(l=(m>-1?" ":"")+m)}var n="  0";if(k.charge!=0)switch(k.charge){case 3:n="  1";break;case 2:n="  2";break;case 1:n="  3";break;case-1:n="  5";break;case-2:n="  6";break;case-3:n="  7"}g=g+f(((k.x-h.x)/a.default_bondLength_2D).toFixed(4),10)+f((-(k.y-h.y)/a.default_bondLength_2D).toFixed(4),10)+f((k.z/a.default_bondLength_2D).toFixed(4),10)+" "+f(k.label,3,!0)+l+n+"  0  0  0  0\n"}for(var i=0,j=c.bonds.length;i<j;i++){var o=c.bonds[i],p=0;o.stereo==d.Bond.STEREO_AMBIGUOUS?p=3:o.stereo==d.Bond.STEREO_PROTRUDING?p=1:o.stereo==d.Bond.STEREO_RECESSED&&(p=6),g=g+f((e(o.a1,c.atoms)+1).toString(),3)+f((e(o.a2,c.atoms)+1).toString(),3)+f(o.bondOrder.toString(),3)+"  "+p+"     0  0\n"}return g+="M  END",g}};var g=new c.MOLInterpreter;a.readMOL=function(a,b){return g.read(a,b)},a.writeMOL=function(a){return g.write(a)}}(ChemDoodle,ChemDoodle.ELEMENT,ChemDoodle.io,ChemDoodle.structures,jQuery.inArray),function(a,b,c,d,e){c.PDBInterpreter=function(){function c(a,b,c,d,e){for(var f=0,g=b.length;f<g;f++){var h=b[f];if(h.id==c&&d>=h.start&&d<=h.end){e?a.helix=!0:a.sheet=!0,d+1==h.end&&(a.arrow=!0);return}}}this.calculateRibbonDistances=!1,this.read=function(f,g){var h=new d.Molecule;h.chains=[];if(f==null||f.length==0)return h;var i=f.split("\n");g||(g=1);var j=[],k=[],l=null,m=[];for(var n=0,o=i.length;n<o;n++){var p=i[n];if(b.stringStartsWith(p,"HELIX"))j.push({id:p.substring(19,20),start:parseInt(p.substring(21,25)),end:parseInt(p.substring(33,37))});else if(b.stringStartsWith(p,"SHEET"))k.push({id:p.substring(21,22),start:parseInt(p.substring(22,26)),end:parseInt(p.substring(33,37))});else if(b.stringStartsWith(p,"ATOM")){var q=p.substring(16,17);if(q==" "||q=="A"){var r=e(p.substring(76,78));if(r.length==0){var s=e(p.substring(12,14));s=="HD"?r="H":s.length>0&&(s.length>1?r=s.charAt(0)+s.substring(1).toLowerCase():r=s)}var t=new d.Atom(r,parseFloat(p.substring(30,38))*g,parseFloat(p.substring(38,46))*g,parseFloat(p.substring(46,54))*g);t.hetatm=!1,h.atoms.push(t);var u=parseInt(p.substring(22,26));if(m.length==0)for(var v=0;v<2;v++){var w=new d.Residue(-1);w.cp1=t,w.cp2=t,m.push(w)}if(u!=Number.NaN&&m[m.length-1].resSeq!=u){var x=new d.Residue(u);x.name=e(p.substring(17,20)),x.name.length==3?x.name=x.name.substring(0,1)+x.name.substring(1).toLowerCase():x.name.length==2&&x.name.charAt(0)=="D"&&(x.name=x.name.substring(1)),m.push(x);var y=p.substring(21,22);c(x,j,y,u,!0),c(x,k,y,u,!1)}var z=e(p.substring(12,16)),A=m[m.length-1];if(z=="CA"||z=="P"||z=="O5'")A.cp1||(A.cp1=t);else if(z=="N3"&&(A.name=="C"||A.name=="U"||A.name=="T")||z=="N1"&&(A.name=="A"||A.name=="G"))A.cp3=t;else if(z=="C2")A.cp4=t;else if(z=="C4"&&(A.name=="C"||A.name=="U"||A.name=="T")||z=="C6"&&(A.name=="A"||A.name=="G"))A.cp5=t;else if(z=="O"||z=="C6"&&(A.name=="C"||A.name=="U"||A.name=="T")||z=="N9"){if(!m[m.length-1].cp2){if(z=="C6"||z=="N9")l=t;A.cp2=t}}else z=="C"&&(l=t)}}else if(b.stringStartsWith(p,"HETATM")){var B=e(p.substring(76,78));B.length>1&&(B=B.substring(0,1)+B.substring(1).toLowerCase());var C=new d.Atom(B,parseFloat(p.substring(30,38))*g,parseFloat(p.substring(38,46))*g,parseFloat(p.substring(46,54))*g);C.hetatm=!0;var D=e(p.substring(17,20));D=="HOH"&&(C.isWater=!0),h.atoms.push(C)}else if(b.stringStartsWith(p,"TER"))this.endChain(h,m,l),m=[];else if(b.stringStartsWith(p,"ENDMDL"))break}return this.endChain(h,m,l),(new a.informatics.BondDeducer).deduceCovalentBonds(h,g),this.calculateRibbonDistances&&this.calculateDistances(h),h},this.endChain=function(a,b,c){if(b.length>0){var e=b[b.length-1];e.cp1||(e.cp1=a.atoms[a.atoms.length-2]),e.cp2||(e.cp2=a.atoms[a.atoms.length-1]);for(var f=0;f<4;f++){var g=new d.Residue(-1);g.cp1=c,g.cp2=b[b.length-1].cp2,b.push(g)}a.chains.push(b)}},this.calculateDistances=function(a){var b=[],c=[];for(var d=0,e=a.atoms.length;d<e;d++){var f=a.atoms[d];f.hetatm?f.isWater||b.push(f):c.push(f)}for(var d=0,e=c.length;d<e;d++){var f=c[d];f.closestDistance=Number.POSITIVE_INFINITY;if(b.length==0)f.closestDistance=0;else for(var g=0,h=b.length;g<h;g++)f.closestDistance=Math.min(f.closestDistance,f.distance3D(b[g]))}}};var f=new c.PDBInterpreter;a.readPDB=function(a,b){return f.read(a,b)}}(ChemDoodle,ChemDoodle.extensions,ChemDoodle.io,ChemDoodle.structures,jQuery.trim),function(a,b,c,d,e,f){var g={"@":0,A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,I:9,a:-1,b:-2,c:-3,d:-4,e:-5,f:-6,g:-7,h:-8,i:-9},h={"%":0,J:1,K:2,L:3,M:4,N:5,O:6,P:7,Q:8,R:9,j:-1,k:-2,l:-3,m:-4,n:-5,o:-6,p:-7,q:-8,r:-9},i={S:1,T:2,U:3,V:4,W:5,X:6,Y:7,Z:8,s:9};c.JCAMPInterpreter=function(){this.convertHZ2PPM=!1,this.read=function(a){this.isBreak=function(a){return g[a]!=null||h[a]!=null||i[a]!=null||a==" "||a=="-"||a=="+"},this.getValue=function(a,b){var c=a.charAt(0),d=a.substring(1);return g[c]!=null?parseFloat(g[c]+d):h[c]!=null?parseFloat(h[c]+d)+b:parseFloat(d)};var c=new d.Spectrum;if(a==null||a.length==0)return c;var j=a.split("\n"),k=[],l,m,n,o,p=1,r=1,s=1,t=-1,u=-1,v=-1,w=!0,x=!1;for(var y=0,z=j.length;y<z;y++){var A=f(j[y]),B=e.inArray("$$",A);B!=-1&&(A=A.substring(0,B));if(k.length==0||!b.stringStartsWith(j[y],"##"))k.length!=0&&k.push("\n"),k.push(f(A));else{var C=k.join("");w&&C.length<100&&c.metadata.push(C),k=[A];if(b.stringStartsWith(C,"##TITLE="))c.title=f(C.substring(8));else if(b.stringStartsWith(C,"##XUNITS="))c.xUnit=f(C.substring(9)),this.convertHZ2PPM&&c.xUnit.toUpperCase()=="HZ"&&(c.xUnit="PPM",x=!0);else if(b.stringStartsWith(C,"##YUNITS="))c.yUnit=f(C.substring(9));else if(!b.stringStartsWith(C,"##XYPAIRS="))if(b.stringStartsWith(C,"##FIRSTX="))m=parseFloat(f(C.substring(9)));else if(b.stringStartsWith(C,"##LASTX="))l=parseFloat(f(C.substring(8)));else if(b.stringStartsWith(C,"##FIRSTY="))n=parseFloat(f(C.substring(9)));else if(b.stringStartsWith(C,"##NPOINTS="))o=parseFloat(f(C.substring(10)));else if(b.stringStartsWith(C,"##XFACTOR="))p=parseFloat(f(C.substring(10)));else if(b.stringStartsWith(C,"##YFACTOR="))r=parseFloat(f(C.substring(10)));else if(b.stringStartsWith(C,"##DELTAX="))t=parseFloat(f(C.substring(9)));else if(b.stringStartsWith(C,"##.OBSERVE FREQUENCY="))this.convertHZ2PPM&&(s=parseFloat(f(C.substring(21))));else if(b.stringStartsWith(C,"##.SHIFT REFERENCE=")){if(this.convertHZ2PPM){var D=C.substring(19).split(",");u=parseInt(f(D[2])),v=parseFloat(f(D[3]))}}else if(b.stringStartsWith(C,"##XYDATA=")){x||(s=1),w=!1;var E=!1,F=C.split("\n"),G=(l-m)/(o-1);if(t!=-1)for(var H=1,I=F.length;H<I;H++)if(F[H].charAt(0)=="|"){G=t;break}var J=m-G,K=n,L=0,M;for(var H=1,I=F.length;H<I;H++){var N=[],O=f(F[H]),k=[],P=!1;for(var Q=0,R=O.length;Q<R;Q++)this.isBreak(O.charAt(Q))?(k.length>0&&(k.length!=1||k[0]!=" ")&&N.push(k.join("")),k=[O.charAt(Q)]):O.charAt(Q)=="|"?P=!0:k.push(O.charAt(Q));N.push(k.join("")),J=parseFloat(N[0])*p-G;for(var Q=1,R=N.length;Q<R;Q++){var S=N[Q];if(i[S.charAt(0)]!=null){var T=parseInt(i[S.charAt(0)]+S.substring(1))-1;for(var U=0;U<T;U++)J+=G,L=this.getValue(M,L),K=L*r,W++,c.data[c.data.length-1]=new d.Point(J/s,K)}else g[S.charAt(0)]==null||!E?(E=h[S.charAt(0)]!=null,M=S,J+=G,L=this.getValue(S,L),K=L*r,W++,c.data.push(new d.Point(J/s,K))):(K=this.getValue(S,L)*r,P&&(J+=G,c.data.push(new d.Point(J/s,K))))}}if(u!=-1){var V=v-c.data[u-1].x;for(var y=0,z=c.data.length;y<z;y++)c.data[y].x+=V}}else if(b.stringStartsWith(C,"##PEAK TABLE=")){w=!1,c.continuous=!1;var F=C.split("\n"),W=0;for(var H=1,I=F.length;H<I;H++){var X=F[H].split(/[\s,]+/);W+=X.length/2;for(var Q=0,R=X.length;Q+1<R;Q+=2)c.data.push(new d.Point(parseFloat(f(X[Q])),parseFloat(f(X[Q+1]))))}}}}return c.setup(),c}};var j=new c.JCAMPInterpreter;j.convertHZ2PPM=!0,a.readJCAMP=function(a){return j.read(a)}}(ChemDoodle,ChemDoodle.extensions,ChemDoodle.io,ChemDoodle.structures,jQuery,jQuery.trim),function(a,b,c){a.fromJSONChains=function(a){var c=[];for(var d=0,e=a.cs.length;d<e;d++){var f=a.cs[d],g=[];for(var h=0,i=f.length;h<i;h++){var j=f[h],k=new b.Residue;k.name=j.n,k.cp1=new b.Atom("",j.x1,j.y1,j.z1),k.cp2=new b.Atom("",j.x2,j.y2,j.z2),j.x3&&(k.cp3=new b.Atom("",j.x3,j.y3,j.z3),k.cp4=new b.Atom("",j.x4,j.y4,j.z4),k.cp5=new b.Atom("",j.x5,j.y5,j.z5)),k.helix=j.h,k.sheet=j.s,k.arrow=j.a,g.push(k)}c.push(g)}return c},a.fromJSONPDB=function(b){var c=a.fromJSONDummy(b.mol);return c.findRings=!1,c.fromJSON=!0,c.chains=a.fromJSONChains(b.ribbons),c},a.fromJSONDummy=function(a){var c=new b.Molecule;for(var d=0,e=a.a.length;d<e;d++){var f=a.a[d],g=new b.Atom(f.l?f.l:"C",f.x,f.y);f.z&&(g.z=f.z),f.c&&(g.charge=f.c),f.m&&(g.mass=f.m),f.p_h!=undefined&&(g.hetatm=f.p_h),f.p_w!=undefined&&(g.isWater=f.p_w),f.p_d!=undefined&&(g.closestDistance=f.p_d),c.atoms.push(g)}for(var d=0,e=a.b.length;d<e;d++){var f=a.b[d],h=new b.Bond(c.atoms[f.b],c.atoms[f.e],f.o?f.o:1);f.s&&(h.stereo=f.s),c.bonds.push(h)}return c},a.toJSONDummy=function(a){var d={a:[],b:[]};for(var e=0,f=a.atoms.length;e<f;e++){var g=a.atoms[e];d.a[e]={x:g.x,y:g.y},g.label!="C"&&(d.a[e].l=g.label),g.z!=0&&(d.a[e].z=g.z),g.charge!=0&&(d.a[e].c=g.charge),g.mass!=-1&&(d.a[e].m=g.mass)}for(var e=0,f=a.bonds.length;e<f;e++){var h=a.bonds[e];d.b[e]={b:c(h.a1,a.atoms),e:c(h.a2,a.atoms)},h.bondOrder!=1&&(d.b[e].o=h.bondOrder),h.stereo!=b.Bond.STEREO_NONE&&(d.b[e].s=h.stereo)}return d}}(ChemDoodle.io,ChemDoodle.structures,jQuery.inArray),function(a,b,c,d,e,f){d.XYZInterpreter=function(){this.deduceCovalentBonds=!0,this.read=function(b){var d=new e.Molecule;if(b==null||b.length==0)return d;var g=b.split("\n"),h=parseInt(f(g[0]));for(var i=0;i<h;i++){var j=g[i+2],k=j.split(/\s+/g);d.atoms[i]=new e.Atom(isNaN(k[0])?k[0]:c[parseInt(k[0])-1],parseFloat(k[1]),parseFloat(k[2]),parseFloat(k[3]))}return this.deduceCovalentBonds&&(new a.informatics.BondDeducer).deduceCovalentBonds(d,1),d}};var g=new d.XYZInterpreter;a.readXYZ=function(a){return g.read(a)}}(ChemDoodle,ChemDoodle.ELEMENT,ChemDoodle.SYMBOLS,ChemDoodle.io,ChemDoodle.structures,jQuery.trim),ChemDoodle.monitor=function(a,b,c){var d={};return d.CANVAS_DRAGGING=null,d.CANVAS_OVER=null,d.ALT=!1,d.SHIFT=!1,d.META=!1,a.supports_touch()||b(c).ready(function(){b(c).mousemove(function(a){d.CANVAS_DRAGGING!=null&&d.CANVAS_DRAGGING.drag&&(d.CANVAS_DRAGGING.prehandleEvent(a),d.CANVAS_DRAGGING.drag(a))}),b(c).mouseup(function(a){d.CANVAS_DRAGGING!=null&&d.CANVAS_DRAGGING!=d.CANVAS_OVER&&d.CANVAS_DRAGGING.mouseup&&(d.CANVAS_DRAGGING.prehandleEvent(a),d.CANVAS_DRAGGING.mouseup(a)),d.CANVAS_DRAGGING=null}),b(c).keydown(function(a){d.SHIFT=a.shiftKey,d.ALT=a.altKey,d.META=a.metaKey;var b=d.CANVAS_OVER;d.CANVAS_DRAGGING!=null&&(b=d.CANVAS_DRAGGING),b!=null&&b.keydown&&(b.prehandleEvent(a),b.keydown(a))}),b(c).keypress(function(a){var b=d.CANVAS_OVER;d.CANVAS_DRAGGING!=null&&(b=d.CANVAS_DRAGGING),b!=null&&b.keypress&&(b.prehandleEvent(a),b.keypress(a))}),b(c).keyup(function(a){d.SHIFT=a.shiftKey,d.ALT=a.altKey,d.META=a.metaKey;var b=d.CANVAS_OVER;d.CANVAS_DRAGGING!=null&&(b=d.CANVAS_DRAGGING),b!=null&&b.keyup&&(b.prehandleEvent(a),b.keyup(a))})}),d}(ChemDoodle.featureDetection,jQuery,document),function(a,b,c,d,e,f,g,h,i){a._Canvas=function(){return this.molecule=null,this.emptyMessage=null,this.image=null,!0},a._Canvas.prototype.repaint=function(){var a=h.getElementById(this.id);if(a.getContext){var b=a.getContext("2d"),c=i.devicePixelRatio?i.devicePixelRatio:1;c!=1&&(a.width=this.width*c,a.height=this.height*c,b.scale(c,c)),this.image==null?this.specs.backgroundColor!=null&&(b.fillStyle=this.specs.backgroundColor,b.fillRect(0,0,this.width,this.height)):b.drawImage(this.image,0,0),this.innerRepaint?this.innerRepaint(b):this.molecule!=null&&this.molecule.atoms.length>0?(b.save(),b.translate(this.width/2,this.height/2),b.rotate(this.specs.rotateAngle),b.scale(this.specs.scale,this.specs.scale),b.translate(-this.width/2,-this.height/2),this.molecule.draw(b,this.specs),b.restore()):this.emptyMessage!=null&&(b.fillStyle="#737683",b.textAlign="center",b.textBaseline="middle",b.font="18px Helvetica, Verdana, Arial, Sans-serif",b.fillText(this.emptyMessage,this.width/2,this.height/2)),this.drawChildExtras&&this.drawChildExtras(b)}},a._Canvas.prototype.setBackgroundImage=function(a){this.image=new Image;var b=this;this.image.onload=function(){b.repaint()},this.image.src=a},a._Canvas.prototype.loadMolecule=function(a){this.molecule=a,this.center(),this instanceof ChemDoodle._Canvas3D||this.molecule.check(),this.afterLoadMolecule&&this.afterLoadMolecule(),this.repaint()},a._Canvas.prototype.center=function(){var a=this.molecule.getCenter3D(),b=new d.Atom("C",this.width/2,this.height/2,0);b.sub3D(a);for(var c=0,e=this.molecule.atoms.length;c<e;c++)this.molecule.atoms[c].add3D(b);var f=this.molecule.getDimension();this.specs.scale=1;if(f.x>this.width||f.y>this.height)this.specs.scale=g.min(this.width/f.x,this.height/f.y)*.85},a._Canvas.prototype.create=function(g,i,j){this.id=g,this.width=i,this.height=j;if(h.getElementById(g)){var k=e("#"+g);i?k.attr("width",i):this.width=k.attr("width"),j?k.attr("height",j):this.height=k.attr("height")}else!a.featureDetection.supports_canvas_text()&&f.msie&&f.version>="6"?h.writeln('<div style="border: 1px solid black;" width="'+i+'" height="'+j+'">Please install <a href="http://code.google.com/chrome/chromeframe/">Google Chrome Frame</a>, then restart Internet Explorer.</div>'):h.writeln('<canvas class="ChemDoodleWebComponent" id="'+g+'" width="'+i+'" height="'+j+'">This browser does not support HTML5/Canvas.</canvas>');var l=e("#"+g);l.css("width",this.width),l.css("height",this.height),this.specs=new d.VisualSpecifications;var m=this;b.supports_touch()?(l.bind("touchstart",function(a){var b=(new Date).getTime();m.lastTouch&&a.originalEvent.touches.length==1&&b-m.lastTouch<500?m.dbltap?(m.prehandleEvent(a),m.dbltap(a)):m.dblclick?(m.prehandleEvent(a),m.dblclick(a)):m.touchstart?(m.prehandleEvent(a),m.touchstart(a)):m.mousedown&&(m.prehandleEvent(a),m.mousedown(a)):m.touchstart?(m.prehandleEvent(a),m.touchstart(a)):m.mousedown&&(m.prehandleEvent(a),m.mousedown(a)),m.lastTouch=b}),l.bind("touchmove",function(a){if(a.originalEvent.touches.length>1&&m.multitouchmove){var b=a.originalEvent.touches.length;m.prehandleEvent(a);var c=new d.Point(-a.offset.left*b,-a.offset.top*b);for(var e=0;e<b;e++)c.x+=a.originalEvent.changedTouches[e].pageX,c.y+=a.originalEvent.changedTouches[e].pageY;c.x/=b,c.y/=b,a.p=c,m.multitouchmove(a,b)}else m.touchmove?(m.prehandleEvent(a),m.touchmove(a)):m.drag&&(m.prehandleEvent(a),m.drag(a))}),l.bind("touchend",function(a){gestureSpread=-1,m.touchend?(m.prehandleEvent(a),m.touchend(a)):m.mouseup&&(m.prehandleEvent(a),m.mouseup(a))}),l.bind("gesturestart",function(a){m.gesturestart&&(m.prehandleEvent(a),m.gesturestart(a))}),l.bind("gesturechange",function(a){m.gesturechange&&(m.prehandleEvent(a),m.gesturechange(a))}),l.bind("gestureend",function(a){m.gestureend&&(m.prehandleEvent(a),m.gestureend(a))})):(l.click(function(a){switch(a.which){case 1:m.click&&(m.prehandleEvent(a),m.click(a));break;case 2:m.middleclick&&(m.prehandleEvent(a),m.middleclick(a));break;case 3:m.rightclick&&(m.prehandleEvent(a),m.rightclick(a))}}),l.dblclick(function(a){m.dblclick&&(m.prehandleEvent(a),m.dblclick(a))}),l.mousedown(function(a){switch(a.which){case 1:c.CANVAS_DRAGGING=m,m.mousedown&&(m.prehandleEvent(a),m.mousedown(a));break;case 2:m.middlemousedown&&(m.prehandleEvent(a),m.middlemousedown(a));break;case 3:m.rightmousedown&&(m.prehandleEvent(a),m.rightmousedown(a))}}),l.mousemove(function(a){c.CANVAS_DRAGGING==null&&m.mousemove&&(m.prehandleEvent(a),m.mousemove(a))}),l.mouseout(function(a){c.CANVAS_OVER=null,m.mouseout&&(m.prehandleEvent(a),m.mouseout(a))}),l.mouseover(function(a){c.CANVAS_OVER=m,m.mouseover&&(m.prehandleEvent(a),m.mouseover(a))}),l.mouseup(function(a){switch(a.which){case 1:m.mouseup&&(m.prehandleEvent(a),m.mouseup(a));break;case 2:m.middlemouseup&&(m.prehandleEvent(a),m.middlemouseup(a));break;case 3:m.rightmouseup&&(m.prehandleEvent(a),m.rightmouseup(a))}}),l.mousewheel(function(a,b){m.mousewheel&&(m.prehandleEvent(a),m.mousewheel(a,b))})),this.subCreate&&this.subCreate()},a._Canvas.prototype.getMolecule=function(){return this.molecule},a._Canvas.prototype.prehandleEvent=function(a){a.originalEvent.changedTouches&&(a.pageX=a.originalEvent.changedTouches[0].pageX,a.pageY=a.originalEvent.changedTouches[0].pageY),a.preventDefault(),a.offset=e("#"+this.id).offset(),a.p=new d.Point(a.pageX-a.offset.left,a.pageY-a.offset.top)}}(ChemDoodle,ChemDoodle.featureDetection,ChemDoodle.monitor,ChemDoodle.structures,jQuery,jQuery.browser,Math,document,window),function(a){a._AnimatorCanvas=function(a,b,c){return a&&this.create(a,b,c),this.timeout=33,!0},a._AnimatorCanvas.prototype=new a._Canvas,a._AnimatorCanvas.prototype.startAnimation=function(){this.stopAnimation(),this.lastTime=(new Date).getTime();var a=this;this.nextFrame&&(this.handle=setInterval(function(){var b=(new Date).getTime();a.nextFrame(b-a.lastTime),a.repaint(),a.lastTime=b},this.timeout))},a._AnimatorCanvas.prototype.stopAnimation=function(){this.handle!=null&&(clearInterval(this.handle),this.handle=null)},a._AnimatorCanvas.prototype.isRunning=function(){return this.handle!=null}}(ChemDoodle),function(a,b){a.FileCanvas=function(a,c,d,e){return a&&this.create(a,c,d),form='<br><form name="FileForm" enctype="multipart/form-data" method="POST" action="'+e+'" target="HiddenFileFrame"><input type="file" name="f" /><input type="submit" name="submitbutton" value="Show File" /></form><iframe id="HFF-'+a+'" name="HiddenFileFrame" height="0" width="0" style="display:none;" onLoad="GetMolFromFrame(\'HFF-'+a+"', "+a+')"></iframe>',b.writeln(form),this.emptyMessage="Click below to load file",this.repaint(),!0},a.FileCanvas.prototype=new a._Canvas}(ChemDoodle,document),function(a){a.HyperlinkCanvas=function(a,b,c,d,e,f){return a&&this.create(a,b,c),this.urlOrFunction=d,this.color=e?e:"blue",this.size=f?f:2,this.openInNewWindow=!0,this.hoverImage=null,this.e=null,!0},a.HyperlinkCanvas.prototype=new a._Canvas,a.HyperlinkCanvas.prototype.drawChildExtras=function(a){this.e!=null&&(this.hoverImage==null?(a.strokeStyle=this.color,a.lineWidth=this.size*2,a.strokeRect(0,0,this.width,this.height)):a.drawImage(this.hoverImage,0,0))},a.HyperlinkCanvas.prototype.setHoverImage=function(a){this.hoverImage=new Image,this.hoverImage.src=a},a.HyperlinkCanvas.prototype.click=function(a){this.e=null,this.repaint(),this.urlOrFunction instanceof Function?this.urlOrFunction():this.openInNewWindow?window.open(this.urlOrFunction):location.href=this.urlOrFunction},a.HyperlinkCanvas.prototype.mouseout=function(a){this.e=null,this.repaint()},a.HyperlinkCanvas.prototype.mouseover=function(a){this.e=a,this.repaint()}}(ChemDoodle),function(a,b,c,d){a.MolGrabberCanvas=function(a,b,e){a&&this.create(a,b,e);var f=[];f.push('<br><input type="text" id="'),f.push(a),f.push('_query" size="32" value="" />'),f.push("<br><nobr>"),f.push('<select id="'),f.push(a),f.push('_select">'),f.push('<option value="chemexper">ChemExper'),f.push('<option value="chemspider">ChemSpider'),f.push('<option value="pubchem" selected>PubChem'),f.push("</select>"),f.push('<button id="'),f.push(a),f.push('_submit">Show Molecule</button>'),f.push("</nobr>"),d.writeln(f.join(""));var g=this;return c("#"+a+"_submit").click(function(){g.search()}),c("#"+a+"_query").keypress(function(a){a.which==13&&g.search()}),this.emptyMessage="Enter search term below",this.repaint(),!0},a.MolGrabberCanvas.prototype=new a._Canvas,a.MolGrabberCanvas.prototype.setSearchTerm=function(a){c("#"+this.id+"_query").val(a),this.search()},a.MolGrabberCanvas.prototype.search=function(){this.emptyMessage="Searching...",this.molecule=null,this.repaint();var a=this;b.getMoleculeFromDatabase(c("#"+this.id+"_select").val(),c("#"+this.id+"_query").val(),function(b){a.loadMolecule(b)})}}(ChemDoodle,ChemDoodle.iChemLabs,jQuery,document),function(a,b,c){a.RotatorCanvas=function(a,c,d,e){a&&this.create(a,c,d),this.rotate3D=e;var f=b.PI/15;return this.xIncrement=f,this.yIncrement=f,this.zIncrement=f,!0},a.RotatorCanvas.prototype=new a._AnimatorCanvas,a.RotatorCanvas.prototype.nextFrame=function(a){if(this.molecule==null){this.stopAnimation();return}var b=a/1e3;if(this.rotate3D){var d=[];c.identity(d),c.rotate(d,this.xIncrement*b,[1,0,0]),c.rotate(d,this.yIncrement*b,[0,1,0]),c.rotate(d,this.zIncrement*b,[0,0,1]);for(var e=0,f=this.molecule.atoms.length;e<f;e++){var g=this.molecule.atoms[e],h=[g.x-this.width/2,g.y-this.height/2,g.z];c.multiplyVec3(d,h),g.x=h[0]+this.width/2,g.y=h[1]+this.height/2,g.z=h[2]}for(var e=0,f=this.molecule.rings.length;e<f;e++)this.molecule.rings[e].center=this.molecule.rings[e].getCenter();this.specs.atoms_display&&this.specs.atoms_circles_2D&&this.molecule.sortAtomsByZ(),this.specs.bonds_display&&this.specs.bonds_clearOverlaps_2D&&this.molecule.sortBondsByZ()}else this.specs.rotateAngle+=this.zIncrement*b},a.RotatorCanvas.prototype.dblclick=function(a){this.isRunning()?this.stopAnimation():this.startAnimation()}}(ChemDoodle,Math,mat4),function(a){a.SlideshowCanvas=function(a,b,c){return a&&this.create(a,b,c),this.molecules=[],this.curIndex=0,this.timeout=5e3,this.alpha=0,this.innerHandle=null,this.phase=0,!0},a.SlideshowCanvas.prototype=new a._AnimatorCanvas,a.SlideshowCanvas.prototype.drawChildExtras=function(a){a.fillStyle="rgba("+parseInt(this.specs.backgroundColor.substring(1,3),16)+", "+parseInt(this.specs.backgroundColor.substring(3,5),16)+", "+parseInt(this.specs.backgroundColor.substring(5,7),16)+", "+this.alpha+")",a.fillRect(0,0,this.width,this.height)},a.SlideshowCanvas.prototype.nextFrame=function(a){if(this.molecules.length==0){this.stopAnimation();return}this.phase=0;var b=this,c=1;this.innerHandle=setInterval(function(){b.alpha=c/15,b.repaint(),c==15&&b.breakInnerHandle(),c++},33)},a.SlideshowCanvas.prototype.breakInnerHandle=function(){this.innerHandle!=null&&(clearInterval(this.innerHandle),this.innerHandle=null);if(this.phase==0){this.curIndex++,this.curIndex>this.molecules.length-1&&(this.curIndex=0),this.alpha=1,this.loadMolecule(this.molecules[this.curIndex]),this.phase=1;var a=this,b=1;this.innerHandle=setInterval(function(){a.alpha=(15-b)/15,a.repaint(),b==15&&a.breakInnerHandle(),b++},33)}else this.phase==1&&(this.alpha=0,this.repaint())},a.SlideshowCanvas.prototype.addMolecule=function(a){this.molecules.length==0&&this.loadMolecule(a),this.molecules.push(a)}}(ChemDoodle),function(a,b,c,d,e){a.TransformCanvas=function(a,b,c,d){return a&&this.create(a,b,c),this.lastPoint=null,this.rotate3D=d,this.rotationMultMod=1.3,this.lastPinchScale=1,this.lastGestureRotate=0,!0},a.TransformCanvas.prototype=new a._Canvas,a.TransformCanvas.prototype.mousedown=function(a){this.lastPoint=a.p},a.TransformCanvas.prototype.dblclick=function(a){var b=new c.Point(this.width/2,this.height/2);b.sub(this.molecule.getCenter());for(var d=0,e=this.molecule.atoms.length;d<e;d++)this.molecule.atoms[d].add(b);this.molecule.check(),this.repaint()},a.TransformCanvas.prototype.drag=function(a){if(!this.lastPoint.multi)if(b.ALT){var f=new c.Point(a.p.x,a.p.y);f.sub(this.lastPoint);for(var g=0,h=this.molecule.atoms.length;g<h;g++)this.molecule.atoms[g].add(f);this.lastPoint=a.p,this.molecule.check(),this.repaint()}else if(this.rotate3D==1){var i=d.max(this.width/4,this.height/4),j=a.p.x-this.lastPoint.x,k=a.p.y-this.lastPoint.y,l=j/i*this.rotationMultMod,n=-k/i*this.rotationMultMod,o=[];e.identity(o),e.rotate(o,n,[1,0,0]),e.rotate(o,l,[0,1,0]);for(var g=0,h=this.molecule.atoms.length;g<h;g++){var p=this.molecule.atoms[g],q=[p.x-this.width/2,p.y-this.height/2,p.z];e.multiplyVec3(o,q),p.x=q[0]+this.width/2,p.y=q[1]+this.height/2,p.z=q[2]}for(var g=0,h=this.molecule.rings.length;g<h;g++)this.molecule.rings[g].center=this.molecule.rings[g].getCenter();this.lastPoint=a.p,this.specs.atoms_display&&this.specs.atoms_circles_2D&&this.molecule.sortAtomsByZ(),this.specs.bonds_display&&this.specs.bonds_clearOverlaps_2D&&this.molecule.sortBondsByZ(),this.repaint()}else{var r=new c.Point(this.width/2,this.height/2),s=r.angle(this.lastPoint),t=r.angle(a.p);this.specs.rotateAngle-=t-s,this.lastPoint=a.p,this.repaint()}},a.TransformCanvas.prototype.mousewheel=function(a,b){this.specs.scale+=b/10,this.specs.scale<.01&&(this.specs.scale=.01),this.repaint()},a.TransformCanvas.prototype.multitouchmove=function(a,b){if(b==2)if(this.lastPoint.multi){var d=new c.Point(a.p.x,a.p.y);d.sub(this.lastPoint);for(var e=0,f=this.molecule.atoms.length;e<f;e++)this.molecule.atoms[e].add(d);this.lastPoint=a.p,this.lastPoint.multi=!0,this.molecule.check(),this.repaint()}else this.lastPoint=a.p,this.lastPoint.multi=!0},a.TransformCanvas.prototype.gesturechange=function(a){a.originalEvent.scale-this.lastPinchScale!=0&&(this.specs.scale*=a.originalEvent.scale/this.lastPinchScale,this.specs.scale<.01&&(this.specs.scale=.01),this.lastPinchScale=a.originalEvent.scale);if(this.lastGestureRotate-a.originalEvent.rotation!=0){var b=(this.lastGestureRotate-a.originalEvent.rotation)/180*d.PI,e=new c.Point(this.width/2,this.height/2);for(var f=0,g=this.molecule.atoms.length;f<g;f++){var h=e.distance(this.molecule.atoms[f]),i=e.angle(this.molecule.atoms[f])+b;this.molecule.atoms[f].x=e.x+h*d.cos(i),this.molecule.atoms[f].y=e.y-h*d.sin(i)}this.lastGestureRotate=a.originalEvent.rotation,this.molecule.check()}this.repaint()},a.TransformCanvas.prototype.gestureend=function(a){this.lastPinchScale=1,this.lastGestureRotate=0}}(ChemDoodle,ChemDoodle.monitor,ChemDoodle.structures,Math,mat4),function(a){a.ViewerCanvas=function(a,b,c){return a&&this.create(a,b,c),!0},a.ViewerCanvas.prototype=new a._Canvas}(ChemDoodle),function(a,b){a._SpectrumCanvas=function(a,b,c){return a&&this.create(a,b,c),this.spectrum=null,this.emptyMessage="No Spectrum Loaded or Recognized",this.loadMolecule=null,this.getMolecule=null,!0},a._SpectrumCanvas.prototype=new a._Canvas,a._SpectrumCanvas.prototype.innerRepaint=function(a){this.spectrum!=null&&this.spectrum.data.length>0?this.spectrum.draw(a,this.specs,this.width,this.height):this.emptyMessage!=null&&(a.fillStyle="#737683",a.textAlign="center",a.textBaseline="middle",a.font="18px Helvetica, Verdana, Arial, Sans-serif",a.fillText(this.emptyMessage,this.width/2,this.height/2))},a._SpectrumCanvas.prototype.loadSpectrum=function(a){this.spectrum=a,this.repaint()},a._SpectrumCanvas.prototype.getSpectrum=function(){return this.spectrum}}(ChemDoodle,document),function(a){a.ObserverCanvas=function(a,b,c){return a&&this.create(a,b,c),!0},a.ObserverCanvas.prototype=new a._SpectrumCanvas}(ChemDoodle),function(a,b,c){a.PerspectiveCanvas=function(a,b,c){return a&&this.create(a,b,c),this.dragRange=null,this.rescaleYAxisOnZoom=!0,this.lastPinchScale=1,!0},a.PerspectiveCanvas.prototype=new a._SpectrumCanvas,a.PerspectiveCanvas.prototype.mousedown=function(b){this.dragRange=new a.structures.Point(b.p.x,b.p.x)},a.PerspectiveCanvas.prototype.mouseup=function(a){if(this.dragRange!=null&&this.dragRange.x!=this.dragRange.y){if(!this.dragRange.multi){var b=this.spectrum.zoom(this.dragRange.x,a.p.x,this.width,this.rescaleYAxisOnZoom);this.rescaleYAxisOnZoom&&(this.specs.scale=b)}this.dragRange=null,this.repaint()}},a.PerspectiveCanvas.prototype.drag=function(a){this.dragRange!=null&&(this.dragRange.multi?this.dragRange=null:b.SHIFT?(this.spectrum.translate(a.p.x-this.dragRange.x,this.width),this.dragRange.x=a.p.x,this.dragRange.y=a.p.x):this.dragRange.y=a.p.x,this.repaint())},a.PerspectiveCanvas.prototype.drawChildExtras=function(a){if(this.dragRange!=null){var b=c.min(this.dragRange.x,this.dragRange.y),d=c.max(this.dragRange.x,this.dragRange.y);a.strokeStyle="gray",a.lineStyle=1,a.beginPath(),a.moveTo(b,this.height/2);for(var e=b;e<=d;e++)e%10<5?a.lineTo(e,c.round(this.height/2)):a.moveTo(e,c.round(this.height/2));a.stroke()}},a.PerspectiveCanvas.prototype.mousewheel=function(a,b){this.specs.scale+=b/10,this.specs.scale<.01&&(this.specs.scale=.01),this.repaint()},a.PerspectiveCanvas.prototype.dblclick=function(a){this.spectrum.setup(),this.specs.scale=1,this.repaint()},a.PerspectiveCanvas.prototype.multitouchmove=function(b,c){c==2&&(this.dragRange==null||!this.dragRange.multi?(this.dragRange=new a.structures.Point(b.p.x,b.p.x),this.dragRange.multi=!0):(this.spectrum.translate(b.p.x-this.dragRange.x,this.width),this.dragRange.x=b.p.x,this.dragRange.y=b.p.x,this.repaint()))},a.PerspectiveCanvas.prototype.gesturechange=function(a){this.specs.scale*=a.originalEvent.scale/this.lastPinchScale,this.specs.scale<.01&&(this.specs.scale=.01),this.lastPinchScale=a.originalEvent.scale,this.repaint()},a.PerspectiveCanvas.prototype.gestureend=function(a){this.lastPinchScale=1}}(ChemDoodle,ChemDoodle.monitor,Math),function(a,b,c,d,e,f,g,h,i,j,k){a._Canvas3D=function(a,b,c){return a&&this.create(a,b,c),this.rotationMatrix=h.identity([]),this.translationMatrix=h.identity([]),this.lastPoint=null,this.emptyMessage="WebGL is Unavailable!",!0},a._Canvas3D.prototype=new a._Canvas,a._Canvas3D.prototype.afterLoadMolecule=function(){var a=this.molecule.getDimension();this.maxDimension=f.max(a.x,a.y),this.translationMatrix=h.translate(h.identity([]),[0,0,-this.maxDimension-10]),this.setupScene()},a._Canvas3D.prototype.setViewDistance=function(a){this.translationMatrix=h.translate(h.identity([]),[0,0,-a])},a._Canvas3D.prototype.repaint=function(){this.gl&&(this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.modelViewMatrix=h.multiply(this.translationMatrix,this.rotationMatrix,[]),this.gl.rotationMatrix=this.rotationMatrix,this.molecule!=null&&this.molecule.render(this.gl,this.specs),this.gl.flush())},a._Canvas3D.prototype.center=function(){var a=g.getElementById(this.id),b=this.molecule.getCenter3D();for(var c=0,d=this.molecule.atoms.length;c<d;c++)this.molecule.atoms[c].sub3D(b);if(this.molecule.chains&&this.molecule.fromJSON)for(var c=0,d=this.molecule.chains.length;c<d;c++){var e=this.molecule.chains[c];for(var f=0,h=e.length;f<h;f++){var i=e[f];i.cp1.sub3D(b),i.cp2.sub3D(b),i.cp3&&(i.cp3.sub3D(b),i.cp4.sub3D(b),i.cp5.sub3D(b))}}},a._Canvas3D.prototype.subCreate=function(){try{var a=g.getElementById(this.id);this.gl=a.getContext("webgl"),this.gl||(this.gl=a.getContext("experimental-webgl"))}catch(b){}this.gl?(this.gl.viewport(0,0,this.width,this.height),this.gl.program=this.gl.createProgram(),this.gl.shader=new d.Shader,this.gl.shader.init(this.gl),this.setupScene()):(this.molecule=null,this.displayMessage())},a._Canvas.prototype.displayMessage=function(){var a=g.getElementById(this.id);if(a.getContext){var b=a.getContext("2d");this.specs.backgroundColor!=null&&(b.fillStyle=this.specs.backgroundColor,b.fillRect(0,0,this.width,this.height)),this.emptyMessage!=null&&(b.fillStyle="#737683",b.textAlign="center",b.textBaseline="middle",b.font="18px Helvetica, Verdana, Arial, Sans-serif",b.fillText(this.emptyMessage,this.width/2,this.height/2))}},a._Canvas3D.prototype.setupScene=function(){if(this.gl){var a=c.getRGB(this.specs.backgroundColor,1);this.gl.clearColor(a[0],a[1],a[2],1),this.gl.clearDepth(1),this.gl.enable(this.gl.DEPTH_TEST),this.gl.depthFunc(this.gl.LEQUAL),this.gl.sphereBuffer=new d.Sphere(1,this.specs.atoms_resolution_3D,this.specs.atoms_resolution_3D),this.gl.starBuffer=new d.Star,this.gl.cylinderBuffer=new d.Cylinder(1,1,this.specs.bonds_resolution_3D),this.gl.lineBuffer=new d.Line;if(this.molecule){this.molecule.unitCellVectors&&(this.molecule.unitCell=new d.UnitCell(this.molecule.unitCellVectors));if(this.molecule.chains){this.molecule.ribbons=[],this.molecule.cartoons=[],this.molecule.tubes=[];for(var g=0,k=this.molecule.chains.length;g<k;g++){var l=this.molecule.chains[g],n=l.length>2&&e[l[2].name]&&e[l[2].name].aminoColor=="#BEA06E";if(l.length>0&&!l[0].lineSegments){for(var o=0,p=l.length-1;o<p;o++)n&&(l[o].Ns=1),l[o].setup(l[o+1].cp1);if(!n)for(var o=1,p=l.length-1;o<p;o++)b.vec3AngleFrom(l[o-1].D,l[o].D)>f.PI/2&&(l[o].guidePointsSmall.reverse(),l[o].guidePointsLarge.reverse(),j.scale(l[o].D,-1));for(var o=1,p=l.length-3;o<p;o++)l[o].computeLineSegments(l[o-1],l[o+1],l[o+2],!n);l.pop(),l.pop(),l.pop(),l.shift()}var q=c.hsl2rgb(k==1?.5:g/k,1,.5),r="rgb("+q[0]+","+q[1]+","+q[2]+")";l.chainColor=r;if(n){var s=new d.Tube(l,this.specs.nucleics_tubeThickness,this.specs.nucleics_tubeResolution_3D);s.chainColor=r,this.molecule.tubes.push(s)}else{var t={front:new d.Ribbon(l,this.specs.proteins_ribbonThickness,!1),back:new d.Ribbon(l,-this.specs.proteins_ribbonThickness,!1)};t.front.chainColor=r,t.back.chainColor=r;for(var o=0,p=t.front.segments.length;o<p;o++)t.front.segments[o].chainColor=r;for(var o=0,p=t.back.segments.length;o<p;o++)t.back.segments[o].chainColor=r;this.molecule.ribbons.push(t);var u={front:new d.Ribbon(l,this.specs.proteins_ribbonThickness,!0),back:new d.Ribbon(l,-this.specs.proteins_ribbonThickness,!0)};u.front.chainColor=r,u.back.chainColor=r;for(var o=0,p=u.front.segments.length;o<p;o++)u.front.segments[o].chainColor=r;for(var o=0,p=u.back.segments.length;o<p;o++)u.back.segments[o].chainColor=r;for(var o=0,p=u.front.cartoonSegments.length;o<p;o++)u.front.cartoonSegments[o].chainColor=r;for(var o=0,p=u.back.cartoonSegments.length;o<p;o++)u.back.cartoonSegments[o].chainColor=r;this.molecule.cartoons.push(u)}}}}this.gl.lighting=new d.Light(this.specs.lightDiffuseColor_3D,this.specs.lightSpecularColor_3D,this.specs.lightDirection_3D),this.gl.lighting.lightScene(this.gl),this.gl.material=new d.Material(this.gl),this.gl.projectionMatrix=this.specs.projectionPerspective_3D?h.perspective(this.specs.projectionPerspectiveVerticalFieldOfView_3D,this.specs.projectionWidthHeightRatio_3D,this.specs.projectionFrontCulling_3D,this.specs.projectionBackCulling_3D):h.ortho(-this.specs.projectionOrthoWidth_3D/2,this.specs.projectionOrthoWidth_3D/2,-this.specs.projectionOrthoWidth_3D/2/this.specs.projectionWidthHeightRatio_3D,this.specs.projectionOrthoWidth_3D/2/this.specs.projectionWidthHeightRatio_3D,this.specs.projectionFrontCulling_3D,this.specs.projectionBackCulling_3D);var v=this.gl.getUniformLocation(this.gl.program,"u_projection_matrix");this.gl.uniformMatrix4fv(v,!1,this.gl.projectionMatrix);var w=this.gl.getUniformLocation(this.gl.program,"u_model_view_matrix"),x=this.gl.getUniformLocation(this.gl.program,"u_normal_matrix");this.gl.setMatrixUniforms=function(a){this.uniformMatrix4fv(w,!1,a);var b=i.transpose(h.toInverseMat3(a,[]));this.uniformMatrix3fv(x,!1,b)}}},a._Canvas3D.prototype.mousedown=function(a){this.lastPoint=a.p},a._Canvas3D.prototype.rightmousedown=function(a){this.lastPoint=a.p},a._Canvas3D.prototype.drag=function(b){if(a.monitor.ALT){var c=new d.Point(b.p.x,b.p.y);c.sub(this.lastPoint),h.translate(this.translationMatrix,[c.x/20,-c.y/20,0]),this.lastPoint=b.p,this.repaint()}else{var e=f.max(this.width/4,this.height/4),g=b.p.x-this.lastPoint.x,i=b.p.y-this.lastPoint.y,j=h.rotate(h.identity([]),g*f.PI/180,[0,1,0]);h.rotate(j,i*f.PI/180,[1,0,0]),this.rotationMatrix=h.multiply(j,this.rotationMatrix),this.lastPoint=b.p,this.repaint()}},a._Canvas3D.prototype.mousewheel=function(a,b){h.translate(this.translationMatrix,[0,0,b*this.maxDimension/8]),this.repaint()}}(ChemDoodle,ChemDoodle.extensions,ChemDoodle.math,ChemDoodle.structures,ChemDoodle.RESIDUE,Math,document,mat4,mat3,vec3,window),function(a,b,c,d){a.MolGrabberCanvas3D=function(a,b,e){a&&this.create(a,b,e);var f=[];f.push('<br><input type="text" id="'),f.push(a),f.push('_query" size="32" value="" />'),f.push("<br><nobr>"),f.push('<select id="'),f.push(a),f.push('_select">'),f.push('<option value="pubchem" selected>PubChem'),f.push("</select>"),f.push('<button id="'),f.push(a),f.push('_submit">Show Molecule</button>'),f.push("</nobr>"),d.writeln(f.join(""));var g=this;return c("#"+a+"_submit").click(function(){g.search()}),c("#"+a+"_query").keypress(function(a){a.which==13&&g.search()}),!0},a.MolGrabberCanvas3D.prototype=new a._Canvas3D,a.MolGrabberCanvas3D.prototype.setSearchTerm=function(a){c("#"+this.id+"_query").val(a),this.search()},a.MolGrabberCanvas3D.prototype.search=function(){var a=this;b.getMoleculeFromDatabase(c("#"+this.id+"_select").val(),c("#"+this.id+"_query").val(),function(b){a.loadMolecule(b)},3)}}(ChemDoodle,ChemDoodle.iChemLabs,jQuery,document),function(a,b){a.MovieCanvas3D=function(a,b,c){return a&&this.create(a,b,c),this.timeout=50,this.molecules=[],this.frameNumber=0,this.playMode=2,this.reverse=!1,!0},a.MovieCanvas3D.PLAY_ONCE=0,a.MovieCanvas3D.PLAY_LOOP=1,a.MovieCanvas3D.PLAY_SPRING=2,a.MovieCanvas3D.prototype=new a._Canvas3D,a.MovieCanvas3D.prototype.startAnimation=a._AnimatorCanvas.prototype.startAnimation,a.MovieCanvas3D.prototype.stopAnimation=a._AnimatorCanvas.prototype.stopAnimation,a.MovieCanvas3D.prototype.isRunning=a._AnimatorCanvas.prototype.isRunning,a.MovieCanvas3D.prototype.dblclick=a.RotatorCanvas.prototype.dblclick,a.MovieCanvas3D.prototype.nextFrame=function(a){this.molecule=this.molecules[this.frameNumber],this.playMode==2&&this.reverse?(this.frameNumber--,this.frameNumber<0&&(this.frameNumber=1,this.reverse=!1)):(this.frameNumber++,this.frameNumber>=this.molecules.length&&(this.playMode==2?(this.frameNumber-=2,this.reverse=!0):(this.frameNumber=0,this.playMode==0&&this.stopAnimation())))},a.MovieCanvas3D.prototype.center=function(){var a=this.molecule.getCenter3D(),c=new b.Atom;c.sub3D(a);for(var d=0,e=this.molecules.length;d<e;d++){var f=this.molecules[d];for(var g=0,h=f.atoms.length;g<h;g++)f.atoms[g].add3D(c)}}}(ChemDoodle,ChemDoodle.structures),function(a,b,c){a.RotatorCanvas3D=function(a,c,d){a&&this.create(a,c,d),this.timeout=33;var e=b.PI/15;return this.xIncrement=e,this.yIncrement=e,this.zIncrement=e,!0},a.RotatorCanvas3D.prototype=new a._Canvas3D,a.RotatorCanvas3D.prototype.startAnimation=a._AnimatorCanvas.prototype.startAnimation,a.RotatorCanvas3D.prototype.stopAnimation=a._AnimatorCanvas.prototype.stopAnimation,a.RotatorCanvas3D.prototype.isRunning=a._AnimatorCanvas.prototype.isRunning,a.RotatorCanvas3D.prototype.dblclick=a.RotatorCanvas.prototype.dblclick,a.RotatorCanvas3D.prototype.mousedown=null,a.RotatorCanvas3D.prototype.rightmousedown=null,a.RotatorCanvas3D.prototype.drag=null,a.RotatorCanvas3D.prototype.mousewheel=null,a.RotatorCanvas3D.prototype.nextFrame=function(a){if(this.molecule==null){this.stopAnimation();return}var b=[];c.identity(b);var d=a/1e3;c.rotate(b,this.xIncrement*d,[1,0,0]),c.rotate(b,this.yIncrement*d,[0,1,0]),c.rotate(b,this.zIncrement*d,[0,0,1]),c.multiply(this.rotationMatrix,b)}}(ChemDoodle,Math,mat4),function(a){a.TransformCanvas3D=function(a,b,c){return a&&this.create(a,b,c),!0},a.TransformCanvas3D.prototype=new a._Canvas3D}(ChemDoodle),function(a){a.ViewerCanvas3D=function(a,b,c){return a&&this.create(a,b,c),!0},a.ViewerCanvas3D.prototype=new a._Canvas3D,a.ViewerCanvas3D.prototype.mousedown=null,a.ViewerCanvas3D.prototype.rightmousedown=null,a.ViewerCanvas3D.prototype.drag=null,a.ViewerCanvas3D.prototype.mousewheel=null}(ChemDoodle),function(a,b,c,d){function e(a,b,c,d){this.element=a,this.x=b,this.y=c,this.dimension=d}a.PeriodicTableCanvas=function(a,b){return this.padding=5,a&&this.create(a,b*18+this.padding*2,b*10+this.padding*2),this.loadMolecule=null,this.getMolecule=null,this.cellDimension=b?b:20,this.setupTable(),this.repaint(),!0},a.PeriodicTableCanvas.prototype=new a._Canvas,a.PeriodicTableCanvas.prototype.getHoveredElement=function(){return this.hovered!=null?this.hovered.element:null},a.PeriodicTableCanvas.prototype.innerRepaint=function(a){for(var b=0,c=this.cells.length;b<c;b++)this.drawCell(a,this.specs,this.cells[b]);this.hovered!=null&&this.drawCell(a,this.specs,this.hovered),this.selected!=null&&this.drawCell(a,this.specs,this.selected)},a.PeriodicTableCanvas.prototype.setupTable=function(){this.cells=[];var b=y=this.padding,c=0;for(var d=0,f=a.SYMBOLS.length;d<f;d++){c==18&&(c=0,y+=this.cellDimension,b=this.padding);var g=a.ELEMENT[a.SYMBOLS[d]];if(g.atomicNumber==2)b+=16*this.cellDimension,c+=16;else if(g.atomicNumber==5||g.atomicNumber==13)b+=10*this.cellDimension,c+=10;(g.atomicNumber<58||g.atomicNumber>71&&g.atomicNumber<90||g.atomicNumber>103)&&g.atomicNumber<113&&(this.cells.push(new e(g,b,y,this.cellDimension)),b+=this.cellDimension,c++)}y+=2*this.cellDimension,b=3*this.cellDimension+this.padding;for(var d=57;d<104;d++){var g=a.ELEMENT[a.SYMBOLS[d]];g.atomicNumber==90&&(y+=this.cellDimension,b=3*this.cellDimension+this.padding);if(g.atomicNumber>=58&&g.atomicNumber<=71||g.atomicNumber>=90&&g.atomicNumber<=103)this.cells.push(new e(g,b,y,this.cellDimension)),b+=this.cellDimension}},a.PeriodicTableCanvas.prototype.drawCell=function(a,c,d){var e=a.createRadialGradient(d.x+d.dimension/3,d.y+d.dimension/3,d.dimension*1.5,d.x+d.dimension/3,d.y+d.dimension/3,d.dimension/10);e.addColorStop(0,"#000000"),e.addColorStop(.7,d.element.jmolColor),e.addColorStop(1,"#FFFFFF"),a.fillStyle=e,b.contextRoundRect(a,d.x,d.y,d.dimension,d.dimension,d.dimension/8);if(d==this.hovered||d==this.selected)a.lineWidth=2,a.strokeStyle="#c10000",a.stroke(),a.fillStyle="white";a.fill(),a.font=c.getFontString(c.text_font_size,c.text_font_families),a.fillStyle=c.text_color,a.textAlign="center",a.textBaseline="middle",a.fillText(d.element.symbol,d.x+d.dimension/2,d.y+d.dimension/2)},a.PeriodicTableCanvas.prototype.click=function(a){this.hovered!=null&&(this.selected=this.hovered,this.repaint())},a.PeriodicTableCanvas.prototype.mousemove=function(a){var b=a.p.x,d=a.p.y;this.hovered=null;for(var e=0,f=this.cells.length;e<f;e++){var g=this.cells[e];if(c.isBetween(b,g.x,g.x+g.dimension)&&c.isBetween(d,g.y,g.y+g.dimension)){this.hovered=g;break}}this.repaint()},a.PeriodicTableCanvas.prototype.mouseout=function(a){this.hovered=null,this.repaint()}}(ChemDoodle,ChemDoodle.extensions,ChemDoodle.math,document),function(a,b){a._Layout=function(){return!0},a._Layout.prototype.layout=function(){this.innerLayout&&this.innerLayout()},a._Layout.prototype.create=function(a){this.name=a,this.specs=new b.VisualSpecifications}}(ChemDoodle,ChemDoodle.structures),function(a,b,c){a.SimpleReactionLayout=function(a){return this.reactants=[],this.products=[],this.textAbove=null,this.textBelow=null,this.arrow="&rarr;",this.plus="+",this.create(a),!0},a.SimpleReactionLayout.prototype=new a._Layout,a.SimpleReactionLayout.prototype.addReactant=function(a){this.reactants.push(a)},a.SimpleReactionLayout.prototype.addProduct=function(a){this.products.push(a)},a.SimpleReactionLayout.prototype.innerLayout=function(){var d='<span style="font-size:25px;">';c.writeln("<table><tr>");for(var e=0,f=this.reactants.length;e<f;e++){e>0&&c.writeln("<td>"+d+this.plus+"</span></td>"),c.writeln("<td>");var g=this.reactants[e].getDimension(),h=new a.ViewerCanvas(this.name+"_reactant"+e,g.x+60,g.y+60);this.specs.backgroundColor==null&&b("#"+this.name+"_reactant"+e).css("border","0px"),h.specs=this.specs,h.loadMolecule(this.reactants[e]),c.writeln("</td>")}c.writeln("<td>"),c.writeln("<table>"),c.writeln("<tr><td>"),this.textAbove!=null?c.writeln("<center>"+this.textAbove+"</center>"):c.writeln("&nbsp;"),c.writeln("</td></tr>"),c.writeln("<tr><td><center>"+d+this.arrow+"</span></center></td></tr>"),c.writeln("<tr><td>"),this.textBelow!=null?c.writeln("<center>"+this.textBelow+"</center>"):c.writeln("&nbsp;"),c.writeln("</td></tr>"),c.writeln("</table>"),c.writeln("</td>");for(var e=0,f=this.products.length;e<f;e++){e>0&&c.writeln("<td>"+d+this.plus+"</td>"),c.writeln("<td>");var g=this.products[e].getDimension(),h=new a.ViewerCanvas(this.name+"_product"+e,g.x+60,g.y+60);this.specs.backgroundColor==null&&b("#"+this.name+"_product"+e).css("border","0px"),h.specs=this.specs,h.loadMolecule(this.products[e]),c.writeln("</td>")}c.writeln("</tr></table>")}}(ChemDoodle,jQuery,document),function(a,b,c){a.png={},a.png.create=function(a){c.open(b.getElementById(a.id).toDataURL("image/png"))}}(ChemDoodle.io,document,window);
(function(a,b){function c(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{},a.ui.version||(a.extend(a.ui,{version:"1.8.7",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({_focus:a.fn.focus,focus:function(b,c){return typeof b=="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){c=a(this[0]);for(var d;c.length&&c[0]!==document;){d=c.css("position");if(d==="absolute"||d==="relative"||d==="fixed"){d=parseInt(c.css("zIndex"),10);if(!isNaN(d)&&d!==0)return d}c=c.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),e&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var f=d==="Width"?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return typeof b!="number"?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){var d=b.nodeName.toLowerCase(),e=a.attr(b,"tabindex");return"area"===d?(d=b.parentNode,e=d.name,!b.href||!e||d.nodeName.toLowerCase()!=="map"?!1:(b=a("img[usemap=#"+e+"]")[0],!!b&&c(b))):(/input|select|textarea|button|object/.test(d)?!b.disabled:"a"==d?b.href||!isNaN(e):!isNaN(e))&&c(b)},tabbable:function(b){var c=a.attr(b,"tabindex");return(isNaN(c)||c>=0)&&a(b).is(":focusable")}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=c.offsetHeight===100,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,c,d){b=a.ui[b].prototype;for(var e in d)b.plugins[e]=b.plugins[e]||[],b.plugins[e].push([c,d[e]])},call:function(a,b,c){if((b=a.plugins[b])&&a.element[0].parentNode)for(var d=0;d<b.length;d++)a.options[b[d][0]]&&b[d][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;c=c&&c==="left"?"scrollLeft":"scrollTop";var d=!1;return b[c]>0?!0:(b[c]=1,d=b[c]>0,b[c]=0,d)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}}))})(jQuery),function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d=0,e;(e=b[d])!=null;d++)a(e).triggerHandler("remove");c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){a(this).triggerHandler("remove")}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e=b.split(".")[0],f;b=b.split(".")[1],f=e+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)},c=new c,c.options=a.extend(!0,{},c.options),a[e][b].prototype=a.extend(!0,c,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.widget.bridge(b,a[e][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f=typeof e=="string",g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&e.charAt(0)==="_"?h:(f?this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;if(f!==d&&f!==b)return h=f,!1}):this.each(function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(arguments.length===0)return a.extend({},this.options);if(typeof c=="string"){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e=this.options[b];c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),d=d||{};if(c.originalEvent){b=a.event.props.length;for(var f;b;)f=a.event.props[--b],c[f]=c.originalEvent[f]}return this.element.trigger(c,d),!(a.isFunction(e)&&e.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}}(jQuery),function(a){a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(d){if(!0===a.data(d.target,b.widgetName+".preventClickEvent"))return a.removeData(d.target,b.widgetName+".preventClickEvent"),d.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(b){b.originalEvent=b.originalEvent||{};if(!b.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=b.which==1,f=typeof this.options.cancel=="string"?a(b.target).parents().add(b.target).filter(this.options.cancel).length:!1;if(!e||f||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){this._mouseStarted=this._mouseStart(b)!==!1;if(!this._mouseStarted)return b.preventDefault(),!0}return this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),b.originalEvent.mouseHandled=!0}},_mouseMove:function(b){return!a.browser.msie||document.documentMode>=9||!!b.button?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&((this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1)?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a){a.ui=a.ui||{};var b=/left|center|right/,c=/top|center|bottom/,d=a.fn.position,e=a.fn.offset;a.fn.position=function(e){if(!e||!e.of)return d.apply(this,arguments);e=a.extend({},e);var f=a(e.of),g=f[0],h=(e.collision||"flip").split(" "),i=e.offset?e.offset.split(" "):[0,0],j,k,l;return g.nodeType===9?(j=f.width(),k=f.height(),l={top:0,left:0}):g.setTimeout?(j=f.width(),k=f.height(),l={top:f.scrollTop(),left:f.scrollLeft()}):g.preventDefault?(e.at="left top",j=k=0,l={top:e.of.pageY,left:e.of.pageX}):(j=f.outerWidth(),k=f.outerHeight(),l=f.offset()),a.each(["my","at"],function(){var a=(e[this]||"").split(" ");a.length===1&&(a=b.test(a[0])?a.concat(["center"]):c.test(a[0])?["center"].concat(a):["center","center"]),a[0]=b.test(a[0])?a[0]:"center",a[1]=c.test(a[1])?a[1]:"center",e[this]=a}),h.length===1&&(h[1]=h[0]),i[0]=parseInt(i[0],10)||0,i.length===1&&(i[1]=i[0]),i[1]=parseInt(i[1],10)||0,e.at[0]==="right"?l.left+=j:e.at[0]==="center"&&(l.left+=j/2),e.at[1]==="bottom"?l.top+=k:e.at[1]==="center"&&(l.top+=k/2),l.left+=i[0],l.top+=i[1],this.each(function(){var b=a(this),c=b.outerWidth(),d=b.outerHeight(),f=parseInt(a.curCSS(this,"marginLeft",!0))||0,g=parseInt(a.curCSS(this,"marginTop",!0))||0,m=c+f+parseInt(a.curCSS(this,"marginRight",!0))||0,n=d+g+parseInt(a.curCSS(this,"marginBottom",!0))||0,o=a.extend({},l),p;e.my[0]==="right"?o.left-=c:e.my[0]==="center"&&(o.left-=c/2),e.my[1]==="bottom"?o.top-=d:e.my[1]==="center"&&(o.top-=d/2),o.left=Math.round(o.left),o.top=Math.round(o.top),p={left:o.left-f,top:o.top-g},a.each(["left","top"],function(b,f){a.ui.position[h[b]]&&a.ui.position[h[b]][f](o,{targetWidth:j,targetHeight:k,elemWidth:c,elemHeight:d,collisionPosition:p,collisionWidth:m,collisionHeight:n,offset:i,my:e.my,at:e.at})}),a.fn.bgiframe&&b.bgiframe(),b.offset(a.extend(o,{using:e.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window);d=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),b.left=d>0?b.left-d:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window);d=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),b.top=d>0?b.top-d:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]!=="center"){var d=a(window);d=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();var e=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,f=c.at[0]==="left"?c.targetWidth:-c.targetWidth,g=-2*c.offset[0];b.left+=c.collisionPosition.left<0?e+f+g:d>0?e+f+g:0}},top:function(b,c){if(c.at[1]!=="center"){var d=a(window);d=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();var e=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,f=c.at[1]==="top"?c.targetHeight:-c.targetHeight,g=-2*c.offset[1];b.top+=c.collisionPosition.top<0?e+f+g:d>0?e+f+g:0}}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0;e={top:c.top-e.top+f,left:c.left-e.left+g},"using"in c?c.using.call(b,e):d.css(e)},a.fn.offset=function(b){var c=this[0];return!c||!c.ownerDocument?null:b?this.each(function(){a.offset.setOffset(this,b)}):e.call(this)})}(jQuery),function(a){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(b),this.handle?!0:!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(b,!0),!0)},_mouseDrag:function(b,c){this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute");if(!c){c=this._uiHash();if(this._trigger("drag",b,c)===!1)return this._mouseUp({}),!1;this.position=c.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b)),this.dropped&&(c=this.dropped,this.dropped=!1);if(!this.element[0]||!this.element[0].parentNode)return!1;if(this.options.revert=="invalid"&&!c||this.options.revert=="valid"&&c||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var e=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){e._trigger("stop",b)!==!1&&e._clear()})}else this._trigger("stop",b)!==!1&&this._clear();return!1},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var c=!this.options.handle||!a(this.options.handle,this.element).length?!0:!1;return a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)}),c},_createHelper:function(b){var c=this.options;return b=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):c.helper=="clone"?this.element.clone():this.element,b.parents("body").length||b.appendTo(c.appendTo=="parent"?this.element[0].parentNode:c.appendTo),b[0]!=this.element[0]&&!/(fixed|absolute)/.test(b.css("position"))&&b.css("position","absolute"),b},_adjustOffsetFromHelper:function(b){typeof b=="string"&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;b.containment=="parent"&&(b.containment=this.helper[0].parentNode);if(b.containment=="document"||b.containment=="window")this.containment=[(b.containment=="document"?0:a(window).scrollLeft())-this.offset.relative.left-this.offset.parent.left,(b.containment=="document"?0:a(window).scrollTop())-this.offset.relative.top-this.offset.parent.top,(b.containment=="document"?0:a(window).scrollLeft())+a(b.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(b.containment=="document"?0:a(window).scrollTop())+(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)&&b.containment.constructor!=Array){var c=a(b.containment)[0];if(c){b=a(b.containment).offset();var e=a(c).css("overflow")!="hidden";this.containment=[b.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,b.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,b.left+(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,b.top+(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}}else b.containment.constructor==Array&&(this.containment=b.containment)},_convertPositionTo:function(b,c){c||(c=this.position),b=b=="absolute"?1:-1;var e=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*b+this.offset.parent.top*b-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:e.scrollTop())*b),left:c.left+this.offset.relative.left*b+this.offset.parent.left*b-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*b)}},_generatePosition:function(b){var c=this.options,e=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName),g=b.pageX,h=b.pageY;return this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(g=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(h=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(g=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(h=this.containment[3]+this.offset.click.top)),c.grid&&(h=this.originalPageY+Math.round((h-this.originalPageY)/c.grid[1])*c.grid[1],h=this.containment?h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3]?h-this.offset.click.top<this.containment[1]?h+c.grid[1]:h-c.grid[1]:h:h,g=this.originalPageX+Math.round((g-this.originalPageX)/c.grid[0])*c.grid[0],g=this.containment?g-this.offset.click.left<this.containment[0]||g-this.offset.click.left>this.containment[2]?g-this.offset.click.left<this.containment[0]?g+c.grid[0]:g-c.grid[0]:g:g)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:e.scrollTop()),left:g-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,e){return e=e||this._uiHash(),a.ui.plugin.call(this,b,[c,e]),b=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,e)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.extend(a.ui.draggable,{version:"1.8.7"}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var e=a(this).data("draggable"),f=e.options,g=a.extend({},c,{item:e.element});e.sortables=[],a(f.connectToSortable).each(function(){var c=a.data(this,"sortable");c&&!c.options.disabled&&(e.sortables.push({instance:c,shouldRevert:c.options.revert}),c._refreshItems(),c._trigger("activate",b,g))})},stop:function(b,c){var e=a(this).data("draggable"),f=a.extend({},c,{item:e.element});a.each(e.sortables,function(){this.instance.isOver?(this.instance.isOver=0,e.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,e.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,f))})},drag:function(b,c){var e=a(this).data("draggable"),f=this;a.each(e.sortables,function(){this.instance.positionAbs=e.positionAbs,this.instance.helperProportions=e.helperProportions,this.instance.offset.click=e.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(f).clone().appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=e.offset.click.top,this.instance.offset.click.left=e.offset.click.left,this.instance.offset.parent.left-=e.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=e.offset.parent.top-this.instance.offset.parent.top,e._trigger("toSortable",b),e.dropped=this.instance.element,e.currentItem=e.element,this.instance.fromOutside=e),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),e._trigger("fromSortable",b),e.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),c=a(this).data("draggable").options;b.css("cursor")&&(c._cursor=b.css("cursor")),b.css("cursor",c.cursor)},stop:function(){var b=a(this).data("draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}}),a.ui.plugin.add("draggable","iframeFix",{start:function(){var b=a(this).data("draggable").options;a(b.iframeFix===!0?"iframe":b.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")})},stop:function(){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){b=a(c.helper),c=a(this).data("draggable").options,b.css("opacity")&&(c._opacity=b.css("opacity")),b.css("opacity",c.opacity)},stop:function(b,c){b=a(this).data("draggable").options,b._opacity&&a(c.helper).css("opacity",b._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("draggable");b.scrollParent[0]!=document&&b.scrollParent[0].tagName!="HTML"&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var c=a(this).data("draggable"),e=c.options,f=!1;if(c.scrollParent[0]!=document&&c.scrollParent[0].tagName!="HTML"){if(!e.axis||e.axis!="x")c.overflowOffset.top+c.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity?c.scrollParent[0].scrollTop=f=c.scrollParent[0].scrollTop+e.scrollSpeed:b.pageY-c.overflowOffset.top<e.scrollSensitivity&&(c.scrollParent[0].scrollTop=f=c.scrollParent[0].scrollTop-e.scrollSpeed);if(!e.axis||e.axis!="y")c.overflowOffset.left+c.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity?c.scrollParent[0].scrollLeft=f=c.scrollParent[0].scrollLeft+e.scrollSpeed:b.pageX-c.overflowOffset.left<e.scrollSensitivity&&(c.scrollParent[0].scrollLeft=f=c.scrollParent[0].scrollLeft-e.scrollSpeed)}else{if(!e.axis||e.axis!="x")b.pageY-a(document).scrollTop()<e.scrollSensitivity?f=a(document).scrollTop(a(document).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<e.scrollSensitivity&&(f=a(document).scrollTop(a(document).scrollTop()+e.scrollSpeed));if(!e.axis||e.axis!="y")b.pageX-a(document).scrollLeft()<e.scrollSensitivity?f=a(document).scrollLeft(a(document).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<e.scrollSensitivity&&(f=a(document).scrollLeft(a(document).scrollLeft()+e.scrollSpeed))}f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,b)}}),a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("draggable"),c=b.options;b.snapElements=[],a(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var c=a(this),e=c.offset();this!=b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:e.top,left:e.left})})},drag:function(b,c){for(var e=a(this).data("draggable"),f=e.options,g=f.snapTolerance,h=c.offset.left,i=h+e.helperProportions.width,j=c.offset.top,k=j+e.helperProportions.height,l=e.snapElements.length-1;l>=0;l--){var m=e.snapElements[l].left,n=m+e.snapElements[l].width,o=e.snapElements[l].top,p=o+e.snapElements[l].height;if(m-g<h&&h<n+g&&o-g<j&&j<p+g||m-g<h&&h<n+g&&o-g<k&&k<p+g||m-g<i&&i<n+g&&o-g<j&&j<p+g||m-g<i&&i<n+g&&o-g<k&&k<p+g){if(f.snapMode!="inner"){var q=Math.abs(o-k)<=g,r=Math.abs(p-j)<=g,s=Math.abs(m-i)<=g,t=Math.abs(n-h)<=g;q&&(c.position.top=e._convertPositionTo("relative",{top:o-e.helperProportions.height,left:0}).top-e.margins.top),r&&(c.position.top=e._convertPositionTo("relative",{top:p,left:0}).top-e.margins.top),s&&(c.position.left=e._convertPositionTo("relative",{top:0,left:m-e.helperProportions.width}).left-e.margins.left),t&&(c.position.left=e._convertPositionTo("relative",{top:0,left:n}).left-e.margins.left)}var u=q||r||s||t;f.snapMode!="outer"&&(q=Math.abs(o-j)<=g,r=Math.abs(p-k)<=g,s=Math.abs(m-h)<=g,t=Math.abs(n-i)<=g,q&&(c.position.top=e._convertPositionTo("relative",{top:o,left:0}).top-e.margins.top),r&&(c.position.top=e._convertPositionTo("relative",{top:p-e.helperProportions.height,left:0}).top-e.margins.top),s&&(c.position.left=e._convertPositionTo("relative",{top:0,left:m}).left-e.margins.left),t&&(c.position.left=e._convertPositionTo("relative",{top:0,left:n-e.helperProportions.width}).left-e.margins.left)),!e.snapElements[l].snapping&&(q||r||s||t||u)&&e.options.snap.snap&&e.options.snap.snap.call(e.element,b,a.extend(e._uiHash(),{snapItem:e.snapElements[l].item})),e.snapElements[l].snapping=q||r||s||t||u}else e.snapElements[l].snapping&&e.options.snap.release&&e.options.snap.release.call(e.element,b,a.extend(e._uiHash(),{snapItem:e.snapElements[l].item})),e.snapElements[l].snapping=!1}}}),a.ui.plugin.add("draggable","stack",{start:function(){var b=a(this).data("draggable").options;b=a.makeArray(a(b.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(b.length){var c=parseInt(b[0].style.zIndex)||0;a(b).each(function(a){this.style.zIndex=c+a}),this[0].style.zIndex=c+b.length}}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){b=a(c.helper),c=a(this).data("draggable").options,b.css("zIndex")&&(c._zIndex=b.css("zIndex")),b.css("zIndex",c.zIndex)},stop:function(b,c){b=a(this).data("draggable").options,b._zIndex&&a(c.helper).css("zIndex",b._zIndex)}})}(jQuery),function(a){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,c=b.accept;this.isover=0,this.isout=1,this.accept=a.isFunction(c)?c:function(a){return a.is(c)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[],a.ui.ddmanager.droppables[b.scope].push(this),b.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var b=a.ui.ddmanager.droppables[this.options.scope],c=0;c<b.length;c++)b[c]==this&&b.splice(c,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(b,c){b=="accept"&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;!!c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;!!c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var e=c||a.ui.ddmanager.current;if(!e||(e.currentItem||e.element)[0]==this.element[0])return!1;var f=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"droppable");if(b.options.greedy&&!b.options.disabled&&b.options.scope==e.options.scope&&b.accept.call(b.element[0],e.currentItem||e.element)&&a.ui.intersect(e,a.extend(b,{offset:b.element.offset()}),b.options.tolerance))return f=!0,!1}),f?!1:this.accept.call(this.element[0],e.currentItem||e.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(e)),this.element):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.extend(a.ui.droppable,{version:"1.8.7"}),a.ui.intersect=function(b,c,e){if(!c.offset)return!1;var f=(b.positionAbs||b.position.absolute).left,g=f+b.helperProportions.width,h=(b.positionAbs||b.position.absolute).top,i=h+b.helperProportions.height,j=c.offset.left,k=j+c.proportions.width,l=c.offset.top,m=l+c.proportions.height;switch(e){case"fit":return j<=f&&g<=k&&l<=h&&i<=m;case"intersect":return j<f+b.helperProportions.width/2&&g-b.helperProportions.width/2<k&&l<h+b.helperProportions.height/2&&i-b.helperProportions.height/2<m;case"pointer":return a.ui.isOver((b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,l,j,c.proportions.height,c.proportions.width);case"touch":return(h>=l&&h<=m||i>=l&&i<=m||h<l&&i>m)&&(f>=j&&f<=k||g>=j&&g<=k||f<j&&g>k);default:return!1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var e=a.ui.ddmanager.droppables[b.options.scope]||[],f=c?c.type:null,g=(b.currentItem||b.element).find(":data(droppable)").andSelf(),h=0;a:for(;h<e.length;h++)if(!(e[h].options.disabled||b&&!e[h].accept.call(e[h].element[0],b.currentItem||b.element))){for(var i=0;i<g.length;i++)if(g[i]==e[h].element[0]){e[h].proportions.height=0;continue a}e[h].visible=e[h].element.css("display")!="none",e[h].visible&&(e[h].offset=e[h].element.offset(),e[h].proportions={width:e[h].element[0].offsetWidth,height:e[h].element[0].offsetHeight},f=="mousedown"&&e[h]._activate.call(e[h],c))}},drop:function(b,c){var e=!1;return a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(e=e||this._drop.call(this,c)),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,c)))}),e},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var e=a.ui.intersect(b,this,this.options.tolerance);if(e=!e&&this.isover==1?"isout":e&&this.isover==0?"isover":null){var f;if(this.options.greedy){var g=this.element.parents(":data(droppable):eq(0)");g.length&&(f=a.data(g[0],"droppable"),f.greedyChild=e=="isover"?1:0)}f&&e=="isover"&&(f.isover=0,f.isout=1,f._out.call(f,c)),this[e]=1,this[e=="isout"?"isover":"isout"]=0,this[e=="isover"?"_over":"_out"].call(this,c),f&&e=="isout"&&(f.isout=0,f.isover=1,f._over.call(f,c))}}})}}}(jQuery),function(a){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var b=this,c=this.options;this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(/relative/.test(this.element.css("position"))&&a.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"}),this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=c.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var d=this.handles.split(",");this.handles={};for(var f=0;f<d.length;f++){var g=a.trim(d[f]),h=a('<div class="ui-resizable-handle '+("ui-resizable-"+g)+'"></div>');/sw|se|ne|nw/.test(g)&&h.css({zIndex:++c.zIndex}),"se"==g&&h.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[g]=".ui-resizable-"+g,this.element.append(h)}}this._renderAxis=function(b){b=b||this.element;for(var c in this.handles){this.handles[c].constructor==String&&(this.handles[c]=a(this.handles[c],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=a(this.handles[c],this.element),f=0;f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),d=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(d,f),this._proportionallyResize()}a(this.handles[c])}},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=a&&a[1]?a[1]:"se"}}),c.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").hover(function(){a(this).removeClass("ui-resizable-autohide"),b._handles.show()},function(){b.resizing||(a(this).addClass("ui-resizable-autohide"),b._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var b=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){b(this.element);var c=this.element;c.after(this.originalElement.css({position:c.css("position"),width:c.outerWidth(),height:c.outerHeight(),top:c.css("top"),left:c.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),b(this.originalElement),this},_mouseCapture:function(b){var c=!1;for(var d in this.handles)a(this.handles[d])[0]==b.target&&(c=!0);return!this.options.disabled&&c},_mouseStart:function(c){var d=this.options,f=this.element.position(),g=this.element;this.resizing=!0,this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()},(g.is(".ui-draggable")||/absolute/.test(g.css("position")))&&g.css({position:"absolute",top:f.top,left:f.left}),a.browser.opera&&/relative/.test(g.css("position"))&&g.css({position:"relative",top:"auto",left:"auto"}),this._renderProxy(),f=b(this.helper.css("left"));var h=b(this.helper.css("top"));return d.containment&&(f+=a(d.containment).scrollLeft()||0,h+=a(d.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:f,top:h},this.size=this._helper?{width:g.outerWidth(),height:g.outerHeight()}:{width:g.width(),height:g.height()},this.originalSize=this._helper?{width:g.outerWidth(),height:g.outerHeight()}:{width:g.width(),height:g.height()},this.originalPosition={left:f,top:h},this.sizeDiff={width:g.outerWidth()-g.width(),height:g.outerHeight()-g.height()},this.originalMousePosition={left:c.pageX,top:c.pageY},this.aspectRatio=typeof d.aspectRatio=="number"?d.aspectRatio:this.originalSize.width/this.originalSize.height||1,d=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor",d=="auto"?this.axis+"-resize":d),g.addClass("ui-resizable-resizing"),this._propagate("start",c),!0},_mouseDrag:function(a){var b=this.helper,c=this.originalMousePosition,d=this._change[this.axis];if(!d)return!1;c=d.apply(this,[a,a.pageX-c.left||0,a.pageY-c.top||0]);if(this._aspectRatio||a.shiftKey)c=this._updateRatio(c,a);return c=this._respectSize(c,a),this._propagate("resize",a),b.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(c),this._trigger("resize",a,this.ui()),!1},_mouseStop:function(b){this.resizing=!1;var c=this.options,d=this;if(this._helper){var f=this._proportionallyResizeElements,g=f.length&&/textarea/i.test(f[0].nodeName);f=g&&a.ui.hasScroll(f[0],"left")?0:d.sizeDiff.height,g={width:d.size.width-(g?0:d.sizeDiff.width),height:d.size.height-f},f=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null;var h=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;c.animate||this.element.css(a.extend(g,{top:h,left:f})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()}return a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateCache:function(a){this.offset=this.helper.offset(),c(a.left)&&(this.position.left=a.left),c(a.top)&&(this.position.top=a.top),c(a.height)&&(this.size.height=a.height),c(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,c=this.size,d=this.axis;return a.height?a.width=c.height*this.aspectRatio:a.width&&(a.height=c.width/this.aspectRatio),d=="sw"&&(a.left=b.left+(c.width-a.width),a.top=null),d=="nw"&&(a.top=b.top+(c.height-a.height),a.left=b.left+(c.width-a.width)),a},_respectSize:function(a){var b=this.options,d=this.axis,e=c(a.width)&&b.maxWidth&&b.maxWidth<a.width,f=c(a.height)&&b.maxHeight&&b.maxHeight<a.height,g=c(a.width)&&b.minWidth&&b.minWidth>a.width,h=c(a.height)&&b.minHeight&&b.minHeight>a.height;g&&(a.width=b.minWidth),h&&(a.height=b.minHeight),e&&(a.width=b.maxWidth),f&&(a.height=b.maxHeight);var i=this.originalPosition.left+this.originalSize.width,j=this.position.top+this.size.height,k=/sw|nw|w/.test(d);return d=/nw|ne|n/.test(d),g&&k&&(a.left=i-b.minWidth),e&&k&&(a.left=i-b.maxWidth),h&&d&&(a.top=j-b.minHeight),f&&d&&(a.top=j-b.maxHeight),(b=!a.width&&!a.height)&&!a.left&&a.top?a.top=null:b&&!a.top&&a.left&&(a.left=null),a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var b=this.helper||this.element,c=0;c<this._proportionallyResizeElements.length;c++){var d=this._proportionallyResizeElements[c];if(!this.borderDif){var f=[d.css("borderTopWidth"),d.css("borderRightWidth"),d.css("borderBottomWidth"),d.css("borderLeftWidth")],g=[d.css("paddingTop"),d.css("paddingRight"),d.css("paddingBottom"),d.css("paddingLeft")];this.borderDif=a.map(f,function(a,b){return a=parseInt(a,10)||0,b=parseInt(g[b],10)||0,a+b})}a.browser.msie&&(a(b).is(":hidden")||a(b).parents(":hidden").length)||d.css({height:b.height()-this.borderDif[0]-this.borderDif[2]||0,width:b.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var b=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var c=a.browser.msie&&a.browser.version<7,d=c?1:0;c=c?2:-1,this.helper.addClass(this._helper).css({width:this.element.outerWidth()+c,height:this.element.outerHeight()+c,position:"absolute",left:this.elementOffset.left-d+"px",top:this.elementOffset.top-d+"px",zIndex:++b.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){return{left:this.originalPosition.left+b,width:this.originalSize.width-b}},n:function(a,b,c){return{top:this.originalPosition.top+c,height:this.originalSize.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),b!="resize"&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.extend(a.ui.resizable,{version:"1.8.7"}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).data("resizable").options,c=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10),position:b.css("position")})})};typeof b.alsoResize=="object"&&!b.alsoResize.parentNode?b.alsoResize.length?(b.alsoResize=b.alsoResize[0],c(b.alsoResize)):a.each(b.alsoResize,function(a){c(a)}):c(b.alsoResize)},resize:function(b,c){var d=a(this).data("resizable");b=d.options;var f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,f){a(b).each(function(){var b=a(this),g=a(this).data("resizable-alsoresize"),i={},k=f&&f.length?f:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(k,function(a,b){(a=(g[b]||0)+(h[b]||0))&&a>=0&&(i[b]=a||null)}),a.browser.opera&&/relative/.test(b.css("position"))&&(d._revertToRelativePosition=!0,b.css({position:"absolute",top:"auto",left:"auto"})),b.css(i)})};typeof b.alsoResize=="object"&&!b.alsoResize.nodeType?a.each(b.alsoResize,function(a,b){i(a,b)}):i(b.alsoResize)},stop:function(){var b=a(this).data("resizable"),c=b.options,d=function(b){a(b).each(function(){var b=a(this);b.css({position:b.data("resizable-alsoresize").position})})};b._revertToRelativePosition&&(b._revertToRelativePosition=!1,typeof c.alsoResize=="object"&&!c.alsoResize.nodeType?a.each(c.alsoResize,function(a){d(a)}):d(c.alsoResize)),a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).data("resizable"),d=c.options,f=c._proportionallyResizeElements,g=f.length&&/textarea/i.test(f[0].nodeName),h=g&&a.ui.hasScroll(f[0],"left")?0:c.sizeDiff.height;g={width:c.size.width-(g?0:c.sizeDiff.width),height:c.size.height-h},h=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null;var i=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(g,i&&h?{top:i,left:h}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};f&&f.length&&a(f[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var c=a(this).data("resizable"),d=c.element,f=c.options.containment;if(d=f instanceof a?f.get(0):/parent/.test(f)?d.parent().get(0):f){c.containerElement=a(d);if(/document/.test(f)||f==document)c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var g=a(d),h=[];a(["Top","Right","Left","Bottom"]).each(function(a,c){h[a]=b(g.css("padding"+c))}),c.containerOffset=g.offset(),c.containerPosition=g.position(),c.containerSize={height:g.innerHeight()-h[3],width:g.innerWidth()-h[1]},f=c.containerOffset;var i=c.containerSize.height,j=c.containerSize.width;j=a.ui.hasScroll(d,"left")?d.scrollWidth:j,i=a.ui.hasScroll(d)?d.scrollHeight:i,c.parentData={element:d,left:f.left,top:f.top,width:j,height:i}}}},resize:function(b){var c=a(this).data("resizable"),d=c.options,f=c.containerOffset,g=c.position;b=c._aspectRatio||b.shiftKey;var h={top:0,left:0},i=c.containerElement;i[0]!=document&&/static/.test(i.css("position"))&&(h=f),g.left<(c._helper?f.left:0)&&(c.size.width+=c._helper?c.position.left-f.left:c.position.left-h.left,b&&(c.size.height=c.size.width/d.aspectRatio),c.position.left=d.helper?f.left:0),g.top<(c._helper?f.top:0)&&(c.size.height+=c._helper?c.position.top-f.top:c.position.top,b&&(c.size.width=c.size.height*d.aspectRatio),c.position.top=c._helper?f.top:0),c.offset.left=c.parentData.left+c.position.left,c.offset.top=c.parentData.top+c.position.top,d=Math.abs((c._helper?c.offset.left-h.left:c.offset.left-h.left)+c.sizeDiff.width),f=Math.abs((c._helper?c.offset.top-h.top:c.offset.top-f.top)+c.sizeDiff.height),g=c.containerElement.get(0)==c.element.parent().get(0),h=/relative|absolute/.test(c.containerElement.css("position")),g&&h&&(d-=c.parentData.left),d+c.size.width>=c.parentData.width&&(c.size.width=c.parentData.width-d,b&&(c.size.height=c.size.width/c.aspectRatio)),f+c.size.height>=c.parentData.height&&(c.size.height=c.parentData.height-f,b&&(c.size.width=c.size.height*c.aspectRatio))},stop:function(){var b=a(this).data("resizable"),c=b.options,d=b.containerOffset,f=b.containerPosition,g=b.containerElement,h=a(b.helper),i=h.offset(),j=h.outerWidth()-b.sizeDiff.width;h=h.outerHeight()-b.sizeDiff.height,b._helper&&!c.animate&&/relative/.test(g.css("position"))&&a(this).css({left:i.left-f.left-d.left,width:j,height:h}),b._helper&&!c.animate&&/static/.test(g.css("position"))&&a(this).css({left:i.left-f.left-d.left,width:j,height:h})}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).data("resizable"),c=b.options,d=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof c.ghost=="string"?c.ghost:""),b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).data("resizable");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).data("resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(){var b=a(this).data("resizable"),c=b.options,d=b.size,f=b.originalSize,g=b.originalPosition,h=b.axis;c.grid=typeof c.grid=="number"?[c.grid,c.grid]:c.grid;var i=Math.round((d.width-f.width)/(c.grid[0]||1))*(c.grid[0]||1);c=Math.round((d.height-f.height)/(c.grid[1]||1))*(c.grid[1]||1),/^(se|s|e)$/.test(h)?(b.size.width=f.width+i,b.size.height=f.height+c):/^(ne)$/.test(h)?(b.size.width=f.width+i,b.size.height=f.height+c,b.position.top=g.top-c):(/^(sw)$/.test(h)?(b.size.width=f.width+i,b.size.height=f.height+c):(b.size.width=f.width+i,b.size.height=f.height+c,b.position.top=g.top-c),b.position.left=g.left-i)}});var b=function(a){return parseInt(a,10)||0},c=function(a){return!isNaN(parseInt(a,10))}}(jQuery),function(a){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable"),this.dragged=!1;var c;this.refresh=function(){c=a(b.options.filter,b.element[0]),c.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=c.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(b){var c=this;this.opos=[b.pageX,b.pageY];if(!this.options.disabled){var d=this.options;this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,b.metaKey||(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().andSelf().each(function(){var d=a.data(this,"selectable-item");if(d){var g=!b.metaKey||!d.$element.hasClass("ui-selected");return d.$element.removeClass(g?"ui-unselecting":"ui-selected").addClass(g?"ui-selecting":"ui-unselecting"),d.unselecting=!g,d.selecting=g,(d.selected=g)?c._trigger("selecting",b,{selecting:d.element}):c._trigger("unselecting",b,{unselecting:d.element}),!1}})}},_mouseDrag:function(b){var c=this;this.dragged=!0;if(!this.options.disabled){var d=this.options,f=this.opos[0],g=this.opos[1],h=b.pageX,i=b.pageY;if(f>h){var j=h;h=f,f=j}return g>i&&(j=i,i=g,g=j),this.helper.css({left:f,top:g,width:h-f,height:i-g}),this.selectees.each(function(){var j=a.data(this,"selectable-item");if(!!j&&j.element!=c.element[0]){var k=!1;d.tolerance=="touch"?k=!(j.left>h||j.right<f||j.top>i||j.bottom<g):d.tolerance=="fit"&&(k=j.left>f&&j.right<h&&j.top>g&&j.bottom<i),k?(j.selected&&(j.$element.removeClass("ui-selected"),j.selected=!1),j.unselecting&&(j.$element.removeClass("ui-unselecting"),j.unselecting=!1),j.selecting||(j.$element.addClass("ui-selecting"),j.selecting=!0,c._trigger("selecting",b,{selecting:j.element}))):(j.selecting&&(b.metaKey&&j.startselected?(j.$element.removeClass("ui-selecting"),j.selecting=!1,j.$element.addClass("ui-selected"),j.selected=!0):(j.$element.removeClass("ui-selecting"),j.selecting=!1,j.startselected&&(j.$element.addClass("ui-unselecting"),j.unselecting=!0),c._trigger("unselecting",b,{unselecting:j.element}))),j.selected&&!b.metaKey&&!j.startselected&&(j.$element.removeClass("ui-selected"),j.selected=!1,j.$element.addClass("ui-unselecting"),j.unselecting=!0,c._trigger("unselecting",b,{unselecting:j.element})))}}),!1}},_mouseStop:function(b){var c=this;return this.dragged=!1,a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}}),a.extend(a.ui.selectable,{version:"1.8.7"})}(jQuery),function(a){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?/left|right/.test(this.items[0].item.css("float")):!1,this.offset=this.element.offset(),this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData("sortable-item");return this},_setOption:function(b,c){b==="disabled"?(this.options[b]=c,this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(b);var e=null,f=this;a(b.target).parents().each(function(){if(a.data(this,"sortable-item")==f)return e=a(this),!1}),a.data(b.target,"sortable-item")==f&&(e=a(b.target));if(!e)return!1;if(this.options.handle&&!c){var g=!1;a(this.options.handle,e).find("*").andSelf().each(function(){this==b.target&&(g=!0)});if(!g)return!1}return this.currentItem=e,this._removeCurrentsFromItems(),!0},_mouseStart:function(b,c,e){c=this.options;var f=this;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),c.containment&&this._setContainment(),c.cursor&&(a("body").css("cursor")&&(this._storedCursor=a("body").css("cursor")),a("body").css("cursor",c.cursor)),c.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",c.opacity)),c.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",c.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!e)for(e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("activate",b,f._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var c=this.options,e=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity?this.scrollParent[0].scrollTop=e=this.scrollParent[0].scrollTop+c.scrollSpeed:b.pageY-this.overflowOffset.top<c.scrollSensitivity&&(this.scrollParent[0].scrollTop=e=this.scrollParent[0].scrollTop-c.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity?this.scrollParent[0].scrollLeft=e=this.scrollParent[0].scrollLeft+c.scrollSpeed:b.pageX-this.overflowOffset.left<c.scrollSensitivity&&(this.scrollParent[0].scrollLeft=e=this.scrollParent[0].scrollLeft-c.scrollSpeed)):(b.pageY-a(document).scrollTop()<c.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<c.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed)),b.pageX-a(document).scrollLeft()<c.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed))),e!==!1&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(c=this.items.length-1;c>=0;c--){e=this.items[c];var f=e.item[0],g=this._intersectsWithPointer(e);if(g&&f!=this.currentItem[0]&&this.placeholder[g==1?"next":"prev"]()[0]!=f&&!a.ui.contains(this.placeholder[0],f)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],f):!0)){this.direction=g==1?"down":"up";if(this.options.tolerance!="pointer"&&!this._intersectsWithSides(e))break;this._rearrange(b,e),this._trigger("change",b,this._uiHash());break}}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b);if(this.options.revert){var e=this;c=e.placeholder.offset(),e.reverting=!0,a(this.helper).animate({left:c.left-this.offset.parent.left-e.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:c.top-this.offset.parent.top-e.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){e._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){var b=this;if(this.dragging){this._mouseUp(),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var c=this.containers.length-1;c>=0;c--)this.containers[c]._trigger("deactivate",null,b._uiHash(this)),this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",null,b._uiHash(this)),this.containers[c].containerCache.over=0)}return this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),e=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);c&&e.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!e.length&&b.key&&e.push(b.key+"="),e.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),e=[];return b=b||{},c.each(function(){e.push(a(b.item||this).attr(b.attribute||"id")||"")}),e},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left;return j=d+j>h&&d+j<i&&b+k>f&&b+k<g,this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?j:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_intersectsWithPointer:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height);b=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width),c=c&&b,b=this._getDragVerticalDirection();var e=this._getDragHorizontalDirection();return c?this.floating?e&&e=="right"||b=="down"?2:1:b&&(b=="down"?2:1):!1},_intersectsWithSides:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height);b=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width);var e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?f=="right"&&b||f=="left"&&!b:e&&(e=="down"&&c||e=="up"&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!=0&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!=0&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var c=[],e=[],f=this._connectWith();if(f&&b)for(b=f.length-1;b>=0;b--)for(var g=a(f[b]),h=g.length-1;h>=0;h--){var i=a.data(g[h],"sortable");i&&i!=this&&!i.options.disabled&&e.push([a.isFunction(i.options.items)?i.options.items.call(i.element):a(i.options.items,i.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),i])}e.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(b=e.length-1;b>=0;b--)e[b][0].each(function(){c.push(this)});return a(c)},_removeCurrentsFromItems:function(){for(var a=this.currentItem.find(":data(sortable-item)"),b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(b){this.items=[],this.containers=[this];var c=this.items,e=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],f=this._connectWith();if(f)for(var g=f.length-1;g>=0;g--)for(var h=a(f[g]),i=h.length-1;i>=0;i--){var j=a.data(h[i],"sortable");j&&j!=this&&!j.options.disabled&&(e.push([a.isFunction(j.options.items)?j.options.items.call(j.element[0],b,{item:this.currentItem}):a(j.options.items,j.element),j]),this.containers.push(j))}for(g=e.length-1;g>=0;g--){b=e[g][1],f=e[g][0],i=0;for(h=f.length;i<h;i++)j=a(f[i]),j.data("sortable-item",b),c.push({item:j,instance:b,width:0,height:0,left:0,top:0})}},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var c=this.items.length-1;c>=0;c--){var e=this.items[c],f=this.options.toleranceElement?a(this.options.toleranceElement,e.item):e.item;b||(e.width=f.outerWidth(),e.height=f.outerHeight()),f=f.offset(),e.left=f.left,e.top=f.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;c>=0;c--)f=this.containers[c].element.offset(),this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){var c=b||this,e=c.options;if(!e.placeholder||e.placeholder.constructor==String){var f=e.placeholder;e.placeholder={element:function(){var b=a(document.createElement(c.currentItem[0].nodeName)).addClass(f||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return f||(b.style.visibility="hidden"),b},update:function(a,b){if(!f||!!e.forcePlaceholderSize)b.height()||b.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10)),b.width()||b.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10))}}}c.placeholder=a(e.placeholder.element.call(c.element,c.currentItem)),c.currentItem.after(c.placeholder),e.placeholder.update(c,c.placeholder)},_contactContainers:function(b){for(var c=null,e=null,f=this.containers.length-1;f>=0;f--)if(!a.ui.contains(this.currentItem[0],this.containers[f].element[0]))if(this._intersectsWith(this.containers[f].containerCache)){if(!c||!a.ui.contains(this.containers[f].element[0],c.element[0]))c=this.containers[f],e=f}else this.containers[f].containerCache.over&&(this.containers[f]._trigger("out",b,this._uiHash(this)),this.containers[f].containerCache.over=0);if(c)if(this.containers.length===1)this.containers[e]._trigger("over",b,this._uiHash(this)),this.containers[e].containerCache.over=1;else if(this.currentContainer!=this.containers[e]){c=1e4,f=null;for(var g=this.positionAbs[this.containers[e].floating?"left":"top"],h=this.items.length-1;h>=0;h--)if(a.ui.contains(this.containers[e].element[0],this.items[h].item[0])){var i=this.items[h][this.containers[e].floating?"left":"top"];Math.abs(i-g)<c&&(c=Math.abs(i-g),f=this.items[h])}if(f||this.options.dropOnEmpty)this.currentContainer=this.containers[e],f?this._rearrange(b,f,null,!0):this._rearrange(b,null,this.containers[e].element,!0),this._trigger("change",b,this._uiHash()),this.containers[e]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[e]._trigger("over",b,this._uiHash(this)),this.containers[e].containerCache.over=1}},_createHelper:function(b){var c=this.options;return b=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):c.helper=="clone"?this.currentItem.clone():this.currentItem,b.parents("body").length||a(c.appendTo!="parent"?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0]),b[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(b[0].style.width==""||c.forceHelperSize)&&b.width(this.currentItem.width()),(b[0].style.height==""||c.forceHelperSize)&&b.height(this.currentItem.height()),b},_adjustOffsetFromHelper:function(b){typeof b=="string"&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;b.containment=="parent"&&(b.containment=this.helper[0].parentNode);if(b.containment=="document"||b.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(b.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)){var c=a(b.containment)[0];b=a(b.containment).offset();var e=a(c).css("overflow")!="hidden";this.containment=[b.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,b.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,b.left+(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,b.top+(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,c){c||(c=this.position),b=b=="absolute"?1:-1;var e=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*b+this.offset.parent.top*b-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:e.scrollTop())*b),left:c.left+this.offset.relative.left*b+this.offset.parent.left*b-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*b)}},_generatePosition:function(b){var c=this.options,e=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var g=b.pageX,h=b.pageY;return this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(g=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(h=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(g=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(h=this.containment[3]+this.offset.click.top)),c.grid&&(h=this.originalPageY+Math.round((h-this.originalPageY)/c.grid[1])*c.grid[1],h=this.containment?h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3]?h-this.offset.click.top<this.containment[1]?h+c.grid[1]:h-c.grid[1]:h:h,g=this.originalPageX+Math.round((g-this.originalPageX)/c.grid[0])*c.grid[0],g=this.containment?g-this.offset.click.left<this.containment[0]||g-this.offset.click.left>this.containment[2]?g-this.offset.click.left<this.containment[0]?g+c.grid[0]:g-c.grid[0]:g:g)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:e.scrollTop()),left:g-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this,f=this.counter;window.setTimeout(function(){f==e.counter&&e.refreshPositions(!d)},0)},_clear:function(b,c){this.reverting=!1;var e=[];!this._noFinalSort&&this.currentItem[0].parentNode&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var f in this._storedCSS)if(this._storedCSS[f]=="auto"||this._storedCSS[f]=="static")this._storedCSS[f]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!c&&e.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!c&&e.push(function(a){this._trigger("update",a,this._uiHash())});if(!a.ui.contains(this.element[0],this.currentItem[0])){c||e.push(function(a){this._trigger("remove",a,this._uiHash())});for(f=this.containers.length-1;f>=0;f--)a.ui.contains(this.containers[f].element[0],this.currentItem[0])&&!c&&(e.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.containers[f])),e.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.containers[f])))}for(f=this.containers.length-1;f>=0;f--)c||e.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over&&(e.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over=0);this._storedCursor&&a("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",b,this._uiHash());for(f=0;f<e.length;f++)e[f].call(this,b);this._trigger("stop",b,this._uiHash())}return!1}c||this._trigger("beforeStop",b,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!c){for(f=0;f<e.length;f++)e[f].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}}),a.extend(a.ui.sortable,{version:"1.8.7"})}(jQuery),function(a){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var b=this,d=b.options;b.running=0,b.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),b.headers=b.element.find(d.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){d.disabled||a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){d.disabled||a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){d.disabled||a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){d.disabled||a(this).removeClass("ui-state-focus")}),b.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(d.navigation){var e=b.element.find("a").filter(d.navigationFilter).eq(0);if(e.length){var f=e.closest(".ui-accordion-header");b.active=f.length?f:e.closest(".ui-accordion-content").prev()}}b.active=b._findActive(b.active||d.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),b.active.next().addClass("ui-accordion-content-active"),b._createIcons(),b.resize(),b.element.attr("role","tablist"),b.headers.attr("role","tab").bind("keydown.accordion",function(a){return b._keydown(a)}).next().attr("role","tabpanel"),b.headers.not(b.active||"").attr({"aria-expanded":"false",tabIndex:-1}).next().hide(),b.active.length?b.active.attr({"aria-expanded":"true",tabIndex:0}):b.headers.eq(0).attr("tabIndex",0),a.browser.safari||b.headers.find("a").attr("tabIndex",-1),d.event&&b.headers.bind(d.event.split(" ").join(".accordion ")+".accordion",function(a){b._clickHandler.call(b,a,this),a.preventDefault()})},_createIcons:function(){var b=this.options;b.icons&&(a("<span></span>").addClass("ui-icon "+b.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(b.icons.header).toggleClass(b.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var b=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var d=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(b.autoHeight||b.fillHeight)&&d.css("height",""),a.Widget.prototype.destroy.call(this)},_setOption:function(b,d){a.Widget.prototype._setOption.apply(this,arguments),b=="active"&&this.activate(d),b=="icons"&&(this._destroyIcons(),d&&this._createIcons()),b=="disabled"&&this.headers.add(this.headers.next())[d?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(b){if(!(this.options.disabled||b.altKey||b.ctrlKey)){var d=a.ui.keyCode,e=this.headers.length,f=this.headers.index(b.target),g=!1;switch(b.keyCode){case d.RIGHT:case d.DOWN:g=this.headers[(f+1)%e];break;case d.LEFT:case d.UP:g=this.headers[(f-1+e)%e];break;case d.SPACE:case d.ENTER:this._clickHandler({target:b.target},b.target),b.preventDefault()}return g?(a(b.target).attr("tabIndex",-1),a(g).attr("tabIndex",0),g.focus(),!1):!0}},resize:function(){var b=this.options,d;if(b.fillSpace){if(a.browser.msie){var e=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}d=this.element.parent().height(),a.browser.msie&&this.element.parent().css("overflow",e),this.headers.each(function(){d-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,d-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else b.autoHeight&&(d=0,this.headers.next().each(function(){d=Math.max(d,a(this).height("").height())}).height(d));return this},activate:function(a){return this.options.active=a,a=this._findActive(a)[0],this._clickHandler({target:a},a),this},_findActive:function(b){return b?typeof b=="number"?this.headers.filter(":eq("+b+")"):this.headers.not(this.headers.not(b)):b===!1?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(b,d){var e=this.options;if(!e.disabled)if(b.target)b=a(b.currentTarget||d),d=b[0]===this.active[0],e.active=e.collapsible&&d?!1:this.headers.index(b),this.running||!e.collapsible&&d||(this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(e.icons.headerSelected).addClass(e.icons.header),d||(b.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(e.icons.header).addClass(e.icons.headerSelected),b.next().addClass("ui-accordion-content-active")),h=b.next(),f=this.active.next(),g={options:e,newHeader:d&&e.collapsible?a([]):b,oldHeader:this.active,newContent:d&&e.collapsible?a([]):h,oldContent:f},e=this.headers.index(this.active[0])>this.headers.index(b[0]),this.active=d?a([]):b,this._toggle(h,f,g,d,e));else if(e.collapsible){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(e.icons.headerSelected).addClass(e.icons.header),this.active.next().addClass("ui-accordion-content-active");var f=this.active.next(),g={options:e,newHeader:a([]),oldHeader:e.active,newContent:a([]),oldContent:f},h=this.active=a([]);this._toggle(h,f,g)}},_toggle:function(b,d,e,f,g){var h=this,i=h.options;h.toShow=b,h.toHide=d,h.data=e;var j=function(){if(h)return h._completed.apply(h,arguments)};h._trigger("changestart",null,h.data),h.running=d.size()===0?b.size():d.size();if(i.animated){e={},e=i.collapsible&&f?{toShow:a([]),toHide:d,complete:j,down:g,autoHeight:i.autoHeight||i.fillSpace}:{toShow:b,toHide:d,complete:j,down:g,autoHeight:i.autoHeight||i.fillSpace},i.proxied||(i.proxied=i.animated),i.proxiedDuration||(i.proxiedDuration=i.duration),i.animated=a.isFunction(i.proxied)?i.proxied(e):i.proxied,i.duration=a.isFunction(i.proxiedDuration)?i.proxiedDuration(e):i.proxiedDuration,f=a.ui.accordion.animations;var k=i.duration,l=i.animated;l&&!f[l]&&!a.easing[l]&&(l="slide"),f[l]||(f[l]=function(a){this.slide(a,{easing:l,duration:k||700})}),f[l](e)}else i.collapsible&&f?b.toggle():(d.hide(),b.show()),j(!0);d.prev().attr({"aria-expanded":"false",tabIndex:-1}).blur(),b.prev().attr({"aria-expanded":"true",tabIndex:0}).focus()},_completed:function(a){this.running=a?0:--this.running,this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this._trigger("change",null,this.data))}}),a.extend(a.ui.accordion,{version:"1.8.7",animations:{slide:function(b,d){b=a.extend({easing:"swing",duration:300},b,d);if(b.toHide.size())if(b.toShow.size()){var e=b.toShow.css("overflow"),f=0,g={},h={},i;d=b.toShow,i=d[0].style.width,d.width(parseInt(d.parent().width(),10)-parseInt(d.css("paddingLeft"),10)-parseInt(d.css("paddingRight"),10)-(parseInt(d.css("borderLeftWidth"),10)||0)-(parseInt(d.css("borderRightWidth"),10)||0)),a.each(["height","paddingTop","paddingBottom"],function(d,e){h[e]="hide",d=(""+a.css(b.toShow[0],e)).match(/^([\d+-.]+)(.*)$/),g[e]={value:d[1],unit:d[2]||"px"}}),b.toShow.css({height:0,overflow:"hidden"}).show(),b.toHide.filter(":hidden").each(b.complete).end().filter(":visible").animate(h,{step:function(a,c){c.prop=="height"&&(f=c.end-c.start===0?0:(c.now-c.start)/(c.end-c.start)),b.toShow[0].style[c.prop]=f*g[c.prop].value+g[c.prop].unit},duration:b.duration,easing:b.easing,complete:function(){b.autoHeight||b.toShow.css("height",""),b.toShow.css({width:i,overflow:e}),b.complete()}})}else b.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},b);else b.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},b)},bounceslide:function(a){this.slide(a,{easing:a.down?"easeOutBounce":"swing",duration:a.down?1e3:200})}}})}(jQuery),function(a){a.widget("ui.autocomplete",{options:{appendTo:"body",delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},_create:function(){var b=this,c=this.element[0].ownerDocument,e;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(c){if(!b.options.disabled&&!b.element.attr("readonly")){e=!1;var g=a.ui.keyCode;switch(c.keyCode){case g.PAGE_UP:b._move("previousPage",c);break;case g.PAGE_DOWN:b._move("nextPage",c);break;case g.UP:b._move("previous",c),c.preventDefault();break;case g.DOWN:b._move("next",c),c.preventDefault();break;case g.ENTER:case g.NUMPAD_ENTER:b.menu.active&&(e=!0,c.preventDefault());case g.TAB:if(!b.menu.active)return;b.menu.select(c);break;case g.ESCAPE:b.element.val(b.term),b.close(c);break;default:clearTimeout(b.searching),b.searching=setTimeout(function(){b.term!=b.element.val()&&(b.selectedItem=null,b.search(null,c))},b.options.delay)}}}).bind("keypress.autocomplete",function(a){e&&(e=!1,a.preventDefault())}).bind("focus.autocomplete",function(){b.options.disabled||(b.selectedItem=null,b.previous=b.element.val())}).bind("blur.autocomplete",function(a){b.options.disabled||(clearTimeout(b.searching),b.closing=setTimeout(function(){b.close(a),b._change(a)},150))}),this._initSource(),this.response=function(){return b._response.apply(b,arguments)},this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",c)[0]).mousedown(function(c){var e=b.menu.element[0];a(c.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(c){c.target!==b.element[0]&&c.target!==e&&!a.ui.contains(e,c.target)&&b.close()})},1),setTimeout(function(){clearTimeout(b.closing)},13)}).menu({focus:function(a,c){c=c.item.data("item.autocomplete"),!1!==b._trigger("focus",a,{item:c})&&/^key/.test(a.originalEvent.type)&&b.element.val(c.value)},selected:function(a,d){var e=d.item.data("item.autocomplete"),f=b.previous;b.element[0]!==c.activeElement&&(b.element.focus(),b.previous=f,setTimeout(function(){b.previous=f,b.selectedItem=e},1)),!1!==b._trigger("select",a,{item:e})&&b.element.val(e.value),b.term=b.element.val(),b.close(a),b.selectedItem=e},blur:function(){b.menu.element.is(":visible")&&b.element.val()!==b.term&&b.element.val(b.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),a.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),b==="source"&&this._initSource(),b==="appendTo"&&this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0])},_initSource:function(){var b=this,c,e;a.isArray(this.options.source)?(c=this.options.source,this.source=function(b,e){e(a.ui.autocomplete.filter(c,b.term))}):typeof this.options.source=="string"?(e=this.options.source,this.source=function(c,g){b.xhr&&b.xhr.abort(),b.xhr=a.ajax({url:e,data:c,dataType:"json",success:function(a,c,d){d===b.xhr&&g(a),b.xhr=null},error:function(a){a===b.xhr&&g([]),b.xhr=null}})}):this.source=this.options.source},search:function(a,b){a=a!=null?a:this.element.val(),this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);if(this._trigger("search",b)!==!1)return this._search(a)},_search:function(a){this.element.addClass("ui-autocomplete-loading"),this.source({term:a},this.response)},_response:function(a){a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close(),this.element.removeClass("ui-autocomplete-loading")},close:function(a){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return typeof b=="string"?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b),this.menu.deactivate(),this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(b,c){var e=this;a.each(c,function(a,c){e._renderItem(b,c)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(b)},_move:function(a,b){this.menu.element.is(":visible")?this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)?(this.element.val(this.term),this.menu.deactivate()):this.menu[a](b):this.search(null,b)},widget:function(){return this.menu.element}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(b,c){var e=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return e.test(a.label||a.value||a)})}})}(jQuery),function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){a(c.target).closest(".ui-menu-item a").length&&(c.preventDefault(),b.select(c))}),this.refresh()},refresh:function(){var b=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(a,b){this.deactivate();if(this.hasScroll()){var c=b.offset().top-this.element.offset().top,d=this.element.attr("scrollTop"),e=this.element.height();c<0?this.element.attr("scrollTop",d+c):c>=e&&this.element.attr("scrollTop",d+c-e+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",a,{item:b})},deactivate:function(){this.active&&(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,b,c){this.active?(a=this.active[a+"All"](".ui-menu-item").eq(0),a.length?this.activate(c,a):this.activate(c,this.element.children(b))):this.activate(c,this.element.children(b))},nextPage:function(b){if(this.hasScroll())if(!this.active||this.last())this.activate(b,this.element.children(".ui-menu-item:first"));else{var c=this.active.offset().top,e=this.element.height(),f=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c-e+a(this).height();return b<10&&b>-10});f.length||(f=this.element.children(".ui-menu-item:last")),this.activate(b,f)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(b){if(this.hasScroll())if(!this.active||this.first())this.activate(b,this.element.children(".ui-menu-item:last"));else{var c=this.active.offset().top,e=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c+e-a(this).height();return b<10&&b>-10}),result.length||(result=this.element.children(".ui-menu-item:first")),this.activate(b,result)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})}(jQuery),function(a){var b,c=function(b){a(":ui-button",b.target.form).each(function(){var b=a(this).data("button");setTimeout(function(){b.refresh()},1)})},d=function(b){var c=b.name,d=b.form,e=a([]);return c&&(e=d?a(d).find("[name='"+c+"']"):a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form})),e};a.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",c),typeof this.options.disabled!="boolean"&&(this.options.disabled=this.element.attr("disabled")),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var e=this,f=this.options,j=this.type==="checkbox"||this.type==="radio",k="ui-state-hover"+(j?"":" ui-state-active");f.label===null&&(f.label=this.buttonElement.html()),this.element.is(":disabled")&&(f.disabled=!0),this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter.button",function(){f.disabled||(a(this).addClass("ui-state-hover"),this===b&&a(this).addClass("ui-state-active"))}).bind("mouseleave.button",function(){f.disabled||a(this).removeClass(k)}).bind("focus.button",function(){a(this).addClass("ui-state-focus")}).bind("blur.button",function(){a(this).removeClass("ui-state-focus")}),j&&this.element.bind("change.button",function(){e.refresh()}),this.type==="checkbox"?this.buttonElement.bind("click.button",function(){if(f.disabled)return!1;a(this).toggleClass("ui-state-active"),e.buttonElement.attr("aria-pressed",e.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click.button",function(){if(f.disabled)return!1;a(this).addClass("ui-state-active"),e.buttonElement.attr("aria-pressed",!0);var b=e.element[0];d(b).not(b).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed",!1)}):(this.buttonElement.bind("mousedown.button",function(){if(f.disabled)return!1;a(this).addClass("ui-state-active"),b=this,a(document).one("mouseup",function(){b=null})}).bind("mouseup.button",function(){if(f.disabled)return!1;a(this).removeClass("ui-state-active")}).bind("keydown.button",function(b){if(f.disabled)return!1;(b.keyCode==a.ui.keyCode.SPACE||b.keyCode==a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active")}).bind("keyup.button",function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",f.disabled)},_determineButtonType:function(){this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button";if(this.type==="checkbox"||this.type==="radio"){this.buttonElement=this.element.parents().last().find("label[for="+this.element.attr("id")+"]"),this.element.addClass("ui-helper-hidden-accessible");var a=this.element.is(":checked");a&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",a)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),b==="disabled"&&(c?this.element.attr("disabled",!0):this.element.removeAttr("disabled")),this._resetButton()},refresh:function(){var b=this.element.is(":disabled");b!==this.options.disabled&&this._setOption("disabled",b),this.type==="radio"?d(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed",!0):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",!1)}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed",!0):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed",!1))},_resetButton:function(){if(this.type==="input")this.options.label&&this.element.val(this.options.label);else{var b=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),c=a("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary;d.primary||d.secondary?(b.addClass("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(b.addClass(e?"ui-button-icons-only":"ui-button-icon-only").removeClass("ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary"),this.hasTitle||b.attr("title",c))):b.addClass("ui-button-text-only")}}}),a.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(b,c){b==="disabled"&&this.buttons.button("option",b,c),a.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass("ui-corner-left").end().filter(":last").addClass("ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),a.Widget.prototype.destroy.call(this)}})}(jQuery),function(a,b){var c={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},d={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};a.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(b){var c=a(this).css(b).offset().top;c<0&&a(this).css("top",b.top-c)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var b=this,c=b.options,d=c.title||"&#160;",e=a.ui.dialog.getTitleId(b.element),f=(b.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+c.dialogClass).css({zIndex:c.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(d){c.closeOnEscape&&d.keyCode&&d.keyCode===a.ui.keyCode.ESCAPE&&(b.close(d),d.preventDefault())}).attr({role:"dialog","aria-labelledby":e}).mousedown(function(a){b.moveToTop(!1,a)});b.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(f);var g=(b.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(f),h=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){h.addClass("ui-state-hover")},function(){h.removeClass("ui-state-hover")}).focus(function(){h.addClass("ui-state-focus")}).blur(function(){h.removeClass("ui-state-focus")}).click(function(a){return b.close(a),!1}).appendTo(g);(b.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(c.closeText).appendTo(h),a("<span></span>").addClass("ui-dialog-title").attr("id",e).html(d).prependTo(g),a.isFunction(c.beforeclose)&&!a.isFunction(c.beforeClose)&&(c.beforeClose=c.beforeclose),g.find("*").add(g).disableSelection(),c.draggable&&a.fn.draggable&&b._makeDraggable(),c.resizable&&a.fn.resizable&&b._makeResizable(),b._createButtons(c.buttons),b._isOpen=!1,a.fn.bgiframe&&f.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var a=this;return a.overlay&&a.overlay.destroy(),a.uiDialog.hide(),a.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),a.uiDialog.remove(),a.originalTitle&&a.element.attr("title",a.originalTitle),a},widget:function(){return this.uiDialog},close:function(b){var c=this,d,e;if(!1!==c._trigger("beforeClose",b))return c.overlay&&c.overlay.destroy(),c.uiDialog.unbind("keypress.ui-dialog"),c._isOpen=!1,c.options.hide?c.uiDialog.hide(c.options.hide,function(){c._trigger("close",b)}):(c.uiDialog.hide(),c._trigger("close",b)),a.ui.dialog.overlay.resize(),c.options.modal&&(d=0,a(".ui-dialog").each(function(){this!==c.uiDialog[0]&&(e=a(this).css("z-index"),isNaN(e)||(d=Math.max(d,e)))}),a.ui.dialog.maxZ=d),c},isOpen:function(){return this._isOpen},moveToTop:function(b,c){var d=this,e=d.options;return e.modal&&!b||!e.stack&&!e.modal?d._trigger("focus",c):(e.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=e.zIndex),d.overlay&&(a.ui.dialog.maxZ+=1,d.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)),b={scrollTop:d.element.attr("scrollTop"),scrollLeft:d.element.attr("scrollLeft")},a.ui.dialog.maxZ+=1,d.uiDialog.css("z-index",a.ui.dialog.maxZ),d.element.attr(b),d._trigger("focus",c),d)},open:function(){if(!this._isOpen){var b=this,c=b.options,d=b.uiDialog;return b.overlay=c.modal?new a.ui.dialog.overlay(b):null,b._size(),b._position(c.position),d.show(c.show),b.moveToTop(!0),c.modal&&d.bind("keypress.ui-dialog",function(b){if(b.keyCode===a.ui.keyCode.TAB){var c=a(":tabbable",this),d=c.filter(":first");c=c.filter(":last");if(b.target===c[0]&&!b.shiftKey)return d.focus(1),!1;if(b.target===d[0]&&b.shiftKey)return c.focus(1),!1}}),a(b.element.find(":tabbable").get().concat(d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus(),b._isOpen=!0,b._trigger("open"),b}},_createButtons:function(b){var c=this,d=!1,e=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),f=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);c.uiDialog.find(".ui-dialog-buttonpane").remove(),typeof b=="object"&&b!==null&&a.each(b,function(){return!(d=!0)}),d&&(a.each(b,function(b,d){d=a.isFunction(d)?{click:d,text:b}:d,b=a('<button type="button"></button>').attr(d,!0).unbind("click").click(function(){d.click.apply(c.element[0],arguments)}).appendTo(f),a.fn.button&&b.button()}),e.appendTo(c.uiDialog))},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var c=this,d=c.options,e=a(document),f;c.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,h){f=d.height==="auto"?"auto":a(this).height(),a(this).height(a(this).height()).addClass("ui-dialog-dragging"),c._trigger("dragStart",e,b(h))},drag:function(a,d){c._trigger("drag",a,b(d))},stop:function(h,i){d.position=[i.position.left-e.scrollLeft(),i.position.top-e.scrollTop()],a(this).removeClass("ui-dialog-dragging").height(f),c._trigger("dragStop",h,b(i)),a.ui.dialog.overlay.resize()}})},_makeResizable:function(c){function d(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}c=c===b?this.options.resizable:c;var e=this,f=e.options,g=e.uiDialog.css("position");c=typeof c=="string"?c:"n,e,s,w,se,sw,ne,nw",e.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:e.element,maxWidth:f.maxWidth,maxHeight:f.maxHeight,minWidth:f.minWidth,minHeight:e._minHeight(),handles:c,start:function(b,c){a(this).addClass("ui-dialog-resizing"),e._trigger("resizeStart",b,d(c))},resize:function(a,b){e._trigger("resize",a,d(b))},stop:function(b,c){a(this).removeClass("ui-dialog-resizing"),f.height=a(this).height(),f.width=a(this).width(),e._trigger("resizeStop",b,d(c)),a.ui.dialog.overlay.resize()}}).css("position",g).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return a.height==="auto"?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var c=[],d=[0,0],e;if(b){if(typeof b=="string"||typeof b=="object"&&"0"in b)c=b.split?b.split(" "):[b[0],b[1]],c.length===1&&(c[1]=c[0]),a.each(["left","top"],function(a,b){+c[a]===c[a]&&(d[a]=c[a],c[a]=b)}),b={my:c.join(" "),at:c.join(" "),offset:d.join(" ")};b=a.extend({},a.ui.dialog.prototype.options.position,b)}else b=a.ui.dialog.prototype.options.position;(e=this.uiDialog.is(":visible"))||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},b)),e||this.uiDialog.hide()},_setOptions:function(b){var e=this,f={},g=!1;a.each(b,function(a,b){e._setOption(a,b),a in c&&(g=!0),a in d&&(f[a]=b)}),g&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",f)},_setOption:function(b,c){var d=this,e=d.uiDialog;switch(b){case"beforeclose":b="beforeClose";break;case"buttons":d._createButtons(c);break;case"closeText":d.uiDialogTitlebarCloseText.text(""+c);break;case"dialogClass":e.removeClass(d.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+c);break;case"disabled":c?e.addClass("ui-dialog-disabled"):e.removeClass("ui-dialog-disabled");break;case"draggable":var f=e.is(":data(draggable)");f&&!c&&e.draggable("destroy"),!f&&c&&d._makeDraggable();break;case"position":d._position(c);break;case"resizable":(f=e.is(":data(resizable)"))&&!c&&e.resizable("destroy"),f&&typeof c=="string"&&e.resizable("option","handles",c),!f&&c!==!1&&d._makeResizable(c);break;case"title":a(".ui-dialog-title",d.uiDialogTitlebar).html(""+(c||"&#160;"))}a.Widget.prototype._setOption.apply(d,arguments)},_size:function(){var b=this.options,c,d,e=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),b.minWidth>b.width&&(b.width=b.minWidth),c=this.uiDialog.css({height:"auto",width:b.width}).height(),d=Math.max(0,b.minHeight-c),b.height==="auto"?a.support.minHeight?this.element.css({minHeight:d,height:"auto"}):(this.uiDialog.show(),b=this.element.css("height","auto").height(),e||this.uiDialog.hide(),this.element.height(Math.max(b,d))):this.element.height(Math.max(b.height-c,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),a.extend(a.ui.dialog,{version:"1.8.7",uuid:0,maxZ:0,getTitleId:function(a){return a=a.attr("id"),a||(this.uuid+=1,a=this.uuid),"ui-dialog-title-"+a},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}}),a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(b){this.instances.length===0&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(b){if(a(b.target).zIndex()<a.ui.dialog.overlay.maxZ)return!1})},1),a(document).bind("keydown.dialog-overlay",function(c){b.options.closeOnEscape&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var c=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return a.fn.bgiframe&&c.bgiframe(),this.instances.push(c),c},destroy:function(b){var c=a.inArray(b,this.instances);c!=-1&&this.oldInstances.push(this.instances.splice(c,1)[0]),this.instances.length===0&&a([document,window]).unbind(".dialog-overlay"),b.remove();var d=0;a.each(this.instances,function(){d=Math.max(d,this.css("z-index"))}),this.maxZ=d},height:function(){var b,c;return a.browser.msie&&a.browser.version<7?(b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),b<c?a(window).height()+"px":b+"px"):a(document).height()+"px"},width:function(){var b,c;return a.browser.msie&&a.browser.version<7?(b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),b<c?a(window).width()+"px":b+"px"):a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)}),b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}}),a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(a){a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var b=this,c=this.options;this._mouseSliding=this._keySliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),c.disabled&&this.element.addClass("ui-slider-disabled ui-disabled"),this.range=a([]),c.range&&(c.range===!0?(this.range=a("<div></div>"),c.values||(c.values=[this._valueMin(),this._valueMin()]),c.values.length&&c.values.length!==2&&(c.values=[c.values[0],c.values[0]])):this.range=a("<div></div>"),this.range.appendTo(this.element).addClass("ui-slider-range"),(c.range==="min"||c.range==="max")&&this.range.addClass("ui-slider-range-"+c.range),this.range.addClass("ui-widget-header")),a(".ui-slider-handle",this.element).length===0&&a("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");if(c.values&&c.values.length)for(;a(".ui-slider-handle",this.element).length<c.values.length;)a("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");this.handles=a(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all"),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){c.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){c.disabled?a(this).blur():(a(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),a(this).addClass("ui-state-focus"))}).blur(function(){a(this).removeClass("ui-state-focus")}),this.handles.each(function(b){a(this).data("index.ui-slider-handle",b)}),this.handles.keydown(function(c){var e=!0,f=a(this).data("index.ui-slider-handle"),g,h,i;if(!b.options.disabled){switch(c.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:e=!1;if(!b._keySliding){b._keySliding=!0,a(this).addClass("ui-state-active"),g=b._start(c,f);if(g===!1)return}}i=b.options.step,g=b.options.values&&b.options.values.length?h=b.values(f):h=b.value();switch(c.keyCode){case a.ui.keyCode.HOME:h=b._valueMin();break;case a.ui.keyCode.END:h=b._valueMax();break;case a.ui.keyCode.PAGE_UP:h=b._trimAlignValue(g+(b._valueMax()-b._valueMin())/5);break;case a.ui.keyCode.PAGE_DOWN:h=b._trimAlignValue(g-(b._valueMax()-b._valueMin())/5);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(g===b._valueMax())return;h=b._trimAlignValue(g+i);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(g===b._valueMin())return;h=b._trimAlignValue(g-i)}return b._slide(c,f,h),e}}).keyup(function(c){var e=a(this).data("index.ui-slider-handle");b._keySliding&&(b._keySliding=!1,b._stop(c,e),b._change(c,e),a(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(b){var c=this.options,e,f,g,h,i;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),e=this._normValueFromMouse({x:b.pageX,y:b.pageY}),f=this._valueMax()-this._valueMin()+1,h=this,this.handles.each(function(b){var c=Math.abs(e-h.values(b));f>c&&(f=c,g=a(this),i=b)}),c.range===!0&&this.values(1)===c.min&&(i+=1,g=a(this.handles[i])),this._start(b,i)===!1?!1:(this._mouseSliding=!0,h._handleIndex=i,g.addClass("ui-state-active").focus(),c=g.offset(),this._clickOffset=a(b.target).parents().andSelf().is(".ui-slider-handle")?{left:b.pageX-c.left-g.width()/2,top:b.pageY-c.top-g.height()/2-(parseInt(g.css("borderTopWidth"),10)||0)-(parseInt(g.css("borderBottomWidth"),10)||0)+(parseInt(g.css("marginTop"),10)||0)}:{left:0,top:0},this.handles.hasClass("ui-state-hover")||this._slide(b,i,e),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b=this._normValueFromMouse({x:a.pageX,y:a.pageY});return this._slide(a,this._handleIndex,b),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._clickOffset=this._handleIndex=null,this._animateOff=!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(a){var b;return this.orientation==="horizontal"?(b=this.elementSize.width,a=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,a=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),b=a/b,b>1&&(b=1),b<0&&(b=0),this.orientation==="vertical"&&(b=1-b),a=this._valueMax()-this._valueMin(),this._trimAlignValue(this._valueMin()+b*a)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d;this.options.values&&this.options.values.length?(d=this.values(b?0:1),this.options.values.length===2&&this.options.range===!0&&(b===0&&c>d||b===1&&c<d)&&(c=d),c!==this.values(b)&&(d=this.values(),d[b]=c,a=this._trigger("slide",a,{handle:this.handles[b],value:c,values:d}),this.values(b?0:1),a!==!1&&this.values(b,c,!0))):c!==this.value()&&(a=this._trigger("slide",a,{handle:this.handles[b],value:c}),a!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("change",a,c)}},value:function(a){return arguments.length&&(this.options.value=this._trimAlignValue(a),this._refreshValue(),this._change(null,0)),this._value()},values:function(b,c){var e,f,g;arguments.length>1&&(this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),this._change(null,b));if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();e=this.options.values,f=arguments[0];for(g=0;g<e.length;g+=1)e[g]=this._trimAlignValue(f[g]),this._change(null,g);this._refreshValue()},_setOption:function(b,c){var e,f=0;a.isArray(this.options.values)&&(f=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments);switch(b){case"disabled":c?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.attr("disabled","disabled"),this.element.addClass("ui-disabled")):(this.handles.removeAttr("disabled"),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(e=0;e<f;e+=1)this._change(null,e);this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);b=this.options.values.slice();for(c=0;c<b.length;c+=1)b[c]=this._trimAlignValue(b[c]);return b},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b;return alignValue=a-c,Math.abs(c)*2>=b&&(alignValue+=c>0?b:-b),parseFloat(alignValue.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b=this.options.range,c=this.options,e=this,f=this._animateOff?!1:c.animate,g,h={},i,j,k,l;this.options.values&&this.options.values.length?this.handles.each(function(b){g=(e.values(b)-e._valueMin())/(e._valueMax()-e._valueMin())*100,h[e.orientation==="horizontal"?"left":"bottom"]=g+"%",a(this).stop(1,1)[f?"animate":"css"](h,c.animate),e.options.range===!0&&(e.orientation==="horizontal"?(b===0&&e.range.stop(1,1)[f?"animate":"css"]({left:g+"%"},c.animate),b===1&&e.range[f?"animate":"css"]({width:g-i+"%"},{queue:!1,duration:c.animate})):(b===0&&e.range.stop(1,1)[f?"animate":"css"]({bottom:g+"%"},c.animate),b===1&&e.range[f?"animate":"css"]({height:g-i+"%"},{queue:!1,duration:c.animate}))),i=g}):(j=this.value(),k=this._valueMin(),l=this._valueMax(),g=l!==k?(j-k)/(l-k)*100:0,h[e.orientation==="horizontal"?"left":"bottom"]=g+"%",this.handle.stop(1,1)[f?"animate":"css"](h,c.animate),b==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[f?"animate":"css"]({width:g+"%"},c.animate),b==="max"&&this.orientation==="horizontal"&&this.range[f?"animate":"css"]({width:100-g+"%"},{queue:!1,duration:c.animate}),b==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[f?"animate":"css"]({height:g+"%"},c.animate),b==="max"&&this.orientation==="vertical"&&this.range[f?"animate":"css"]({height:100-g+"%"},{queue:!1,duration:c.animate}))}}),a.extend(a.ui.slider,{version:"1.8.7"})}(jQuery),function(a,b){function c(){return++e}function d(){return++f}var e=0,f=0;a.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(a,b){a=="selected"?this.options.collapsible&&b==this.options.selected||this.select(b):(this.options[a]=b,this._tabify())},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+c()},_sanitizeSelector:function(a){return a.replace(/:/g,"\\:")},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+d());return a.cookie.apply(null,[b].concat(a.makeArray(arguments)))},_ui:function(a,b){return{tab:a,panel:b,index:this.anchors.index(a)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var b=a(this);b.html(b.data("label.tabs")).removeData("label.tabs")})},_tabify:function(c){function d(b,c){b.css("display",""),!a.support.opacity&&c.opacity&&b[0].style.removeAttribute("filter")}var e=this,f=this.options,g=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=a(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return a("a",this)[0]}),this.panels=a([]),this.anchors.each(function(b,c){var d=a(c).attr("href"),h=d.split("#")[0],i;h&&(h===location.toString().split("#")[0]||(i=a("base")[0])&&h===i.href)&&(d=c.hash,c.href=d),g.test(d)?e.panels=e.panels.add(e.element.find(e._sanitizeSelector(d))):d&&d!=="#"?(a.data(c,"href.tabs",d),a.data(c,"load.tabs",d.replace(/#.*$/,"")),d=e._tabId(c),c.href="#"+d,c=e.element.find("#"+d),c.length||(c=a(f.panelTemplate).attr("id",d).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(e.panels[b-1]||e.list),c.data("destroy.tabs",!0)),e.panels=e.panels.add(c)):f.disabled.push(b)}),c?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),f.selected===b?(location.hash&&this.anchors.each(function(a,b){if(b.hash==location.hash)return f.selected=a,!1}),typeof f.selected!="number"&&f.cookie&&(f.selected=parseInt(e._cookie(),10)),typeof f.selected!="number"&&this.lis.filter(".ui-tabs-selected").length&&(f.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),f.selected=f.selected||(this.lis.length?0:-1)):f.selected===null&&(f.selected=-1),f.selected=f.selected>=0&&this.anchors[f.selected]||f.selected<0?f.selected:0,f.disabled=a.unique(f.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"),function(a){return e.lis.index(a)}))).sort(),a.inArray(f.selected,f.disabled)!=-1&&f.disabled.splice(a.inArray(f.selected,f.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),f.selected>=0&&this.anchors.length&&(e.element.find(e._sanitizeSelector(e.anchors[f.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(f.selected).addClass("ui-tabs-selected ui-state-active"),e.element.queue("tabs",function(){e._trigger("show",null,e._ui(e.anchors[f.selected],e.element.find(e._sanitizeSelector(e.anchors[f.selected].hash))))}),this.load(f.selected)),a(window).bind("unload",function(){e.lis.add(e.anchors).unbind(".tabs"),e.lis=e.anchors=e.panels=null})):f.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[f.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),f.cookie&&this._cookie(f.selected,f.cookie),c=0;for(var h;h=this.lis[c];c++)a(h)[a.inArray(c,f.disabled)!=-1&&!a(h).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");f.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs");if(f.event!=="mouseover"){var i=function(a,b){b.is(":not(.ui-state-disabled)")&&b.addClass("ui-state-"+a)},j=function(a,b){b.removeClass("ui-state-"+a)};this.lis.bind("mouseover.tabs",function(){i("hover",a(this))}),this.lis.bind("mouseout.tabs",function(){j("hover",a(this))}),this.anchors.bind("focus.tabs",function(){i("focus",a(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){j("focus",a(this).closest("li"))})}var k,l;f.fx&&(a.isArray(f.fx)?(k=f.fx[0],l=f.fx[1]):k=l=f.fx);var m=l?function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.hide().removeClass("ui-tabs-hide").animate(l,l.duration||"normal",function(){d(c,l),e._trigger("show",null,e._ui(b,c[0]))})}:function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.removeClass("ui-tabs-hide"),e._trigger("show",null,e._ui(b,c[0]))},n=k?function(a,b){b.animate(k,k.duration||"normal",function(){e.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),d(b,k),e.element.dequeue("tabs")})}:function(a,b){e.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),e.element.dequeue("tabs")};this.anchors.bind(f.event+".tabs",function(){var b=this,c=a(b).closest("li"),d=e.panels.filter(":not(.ui-tabs-hide)"),g=e.element.find(e._sanitizeSelector(b.hash));if(c.hasClass("ui-tabs-selected")&&!f.collapsible||c.hasClass("ui-state-disabled")||c.hasClass("ui-state-processing")||e.panels.filter(":animated").length||e._trigger("select",null,e._ui(this,g[0]))===!1)return this.blur(),!1;f.selected=e.anchors.index(this),e.abort();if(f.collapsible){if(c.hasClass("ui-tabs-selected"))return f.selected=-1,f.cookie&&e._cookie(f.selected,f.cookie),e.element.queue("tabs",function(){n(b,d)}).dequeue("tabs"),this.blur(),!1;if(!d.length)return f.cookie&&e._cookie(f.selected,f.cookie),e.element.queue("tabs",function(){m(b,g)}),e.load(e.anchors.index(this)),this.blur(),!1}f.cookie&&e._cookie(f.selected,f.cookie);if(!g.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";d.length&&e.element.queue("tabs",function(){n(b,d)}),e.element.queue("tabs",function(){m(b,g)}),e.load(e.anchors.index(this)),a.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(a){return typeof a=="string"&&(a=this.anchors.index(this.anchors.filter("[href$="+a+"]"))),a},destroy:function(){var b=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var b=a.data(this,"href.tabs");b&&(this.href=b);var c=a(this).unbind(".tabs");a.each(["href","load","cache"],function(a,b){c.removeData(b+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){a.data(this,"destroy.tabs")?a(this).remove():a(this).removeClass("ui-state-default ui-corner-top ui-tabs-selected ui-state-active ui-state-hover ui-state-focus ui-state-disabled ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide")}),b.cookie&&this._cookie(null,b.cookie),this},add:function(c,d,e){e===b&&(e=this.anchors.length);var f=this,g=this.options;d=a(g.tabTemplate.replace(/#\{href\}/g,c).replace(/#\{label\}/g,d)),c=c.indexOf("#")?this._tabId(a("a",d)[0]):c.replace("#",""),d.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var h=f.element.find("#"+c);return h.length||(h=a(g.panelTemplate).attr("id",c).data("destroy.tabs",!0)),h.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),e>=this.lis.length?(d.appendTo(this.list),h.appendTo(this.list[0].parentNode)):(d.insertBefore(this.lis[e]),h.insertBefore(this.panels[e])),g.disabled=a.map(g.disabled,function(a){return a>=e?++a:a}),this._tabify(),this.anchors.length==1&&(g.selected=0,d.addClass("ui-tabs-selected ui-state-active"),h.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){f._trigger("show",null,f._ui(f.anchors[0],f.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[e],this.panels[e])),this},remove:function(b){b=this._getIndex(b);var c=this.options,d=this.lis.eq(b).remove(),e=this.panels.eq(b).remove();return d.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(b+(b+1<this.anchors.length?1:-1)),c.disabled=a.map(a.grep(c.disabled,function(a){return a!=b}),function(a){return a>=b?--a:a}),this._tabify(),this._trigger("remove",null,this._ui(d.find("a")[0],e[0])),this},enable:function(b){b=this._getIndex(b);var c=this.options;if(a.inArray(b,c.disabled)!=-1)return this.lis.eq(b).removeClass("ui-state-disabled"),c.disabled=a.grep(c.disabled,function(a){return a!=b}),this._trigger("enable",null,this._ui(this.anchors[b],this.panels[b])),this},disable:function(a){a=this._getIndex(a);var b=this.options;return a!=b.selected&&(this.lis.eq(a).addClass("ui-state-disabled"),b.disabled.push(a),b.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[a],this.panels[a]))),this},select:function(a){a=this._getIndex(a);if(a==-1){if(!this.options.collapsible||this.options.selected==-1)return this;a=this.options.selected}return this.anchors.eq(a).trigger(this.options.event+".tabs"),this},load:function(b){b=this._getIndex(b);var c=this,d=this.options,e=this.anchors.eq(b)[0],f=a.data(e,"load.tabs");this.abort();if(!(!f||this.element.queue("tabs").length!==0&&a.data(e,"cache.tabs"))){this.lis.eq(b).addClass("ui-state-processing");if(d.spinner){var g=a("span",e);g.data("label.tabs",g.html()).html(d.spinner)}return this.xhr=a.ajax(a.extend({},d.ajaxOptions,{url:f,success:function(f,g){c.element.find(c._sanitizeSelector(e.hash)).html(f),c._cleanup(),d.cache&&a.data(e,"cache.tabs",!0),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.success(f,g)}catch(h){}},error:function(a,f){c._cleanup(),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.error(a,f,b,e)}catch(g){}}})),c.element.dequeue("tabs"),this}this.element.dequeue("tabs")},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(a,b){return this.anchors.eq(a).removeData("cache.tabs").data("load.tabs",b),this},length:function(){return this.anchors.length}}),a.extend(a.ui.tabs,{version:"1.8.7"}),a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(a,b){var c=this,d=this.options,e=c._rotate||(c._rotate=function(b){clearTimeout(c.rotation),c.rotation=setTimeout(function(){var a=d.selected;c.select(++a<c.anchors.length?a:0)},a),b&&b.stopPropagation()});return b=c._unrotate||(c._unrotate=b?function(){t=d.selected,e()}:function(a){a.clientX&&c.rotate(null)}),a?(this.element.bind("tabsshow",e),this.anchors.bind(d.event+".tabs",b),e()):(clearTimeout(c.rotation),this.element.unbind("tabsshow",e),this.anchors.unbind(d.event+".tabs",b),delete this._rotate,delete this._unrotate),this}})}(jQuery),function(d,G){function K(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._inDialog=this._datepickerShowing=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1},d.extend(this._defaults,this.regional[""]),this.dpDiv=d('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}function E(a,b){d.extend(a,b);for(var c in b)if(b[c]==null||b[c]==G)a[c]=b[c];return a}d.extend(d.ui,{datepicker:{version:"1.8.7"}});var y=(new Date).getTime();d.extend(K.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return E(this._defaults,a||{}),this},_attachDatepicker:function(a,b){var c=null;for(var e in this._defaults){var f=a.getAttribute("date:"+e);if(f){c=c||{};try{c[e]=eval(f)}catch(h){c[e]=f}}}e=a.nodeName.toLowerCase(),f=e=="div"||e=="span",a.id||(this.uuid+=1,a.id="dp"+this.uuid);var i=this._newInst(d(a),f);i.settings=d.extend({},b||{},c||{}),e=="input"?this._connectDatepicker(a,i):f&&this._inlineDatepicker(a,i)},_newInst:function(a,b){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?d('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'):this.dpDiv}},_connectDatepicker:function(a,b){var c=d(a);b.append=d([]),b.trigger=d([]),c.hasClass(this.markerClassName)||(this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),d.data(a,"datepicker",b))},_attachments:function(a,b){var c=this._get(b,"appendText"),e=this._get(b,"isRTL");b.append&&b.append.remove(),c&&(b.append=d('<span class="'+this._appendClass+'">'+c+"</span>"),a[e?"before":"after"](b.append)),a.unbind("focus",this._showDatepicker),b.trigger&&b.trigger.remove(),c=this._get(b,"showOn"),(c=="focus"||c=="both")&&a.focus(this._showDatepicker);if(c=="button"||c=="both"){c=this._get(b,"buttonText");var f=this._get(b,"buttonImage");b.trigger=d(this._get(b,"buttonImageOnly")?d("<img/>").addClass(this._triggerClass).attr({src:f,alt:c,title:c}):d('<button type="button"></button>').addClass(this._triggerClass).html(f==""?c:d("<img/>").attr({src:f,alt:c,title:c}))),a[e?"before":"after"](b.trigger),b.trigger.click(function(){return d.datepicker._datepickerShowing&&d.datepicker._lastInput==a[0]?d.datepicker._hideDatepicker():d.datepicker._showDatepicker(a[0]),!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){for(var b=0,c=0,d=0;d<a.length;d++)a[d].length>b&&(b=a[d].length,c=d);return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort"))),b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=d(a);c.hasClass(this.markerClassName)||(c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),d.data(a,"datepicker",b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.dpDiv.show())},_dialogDatepicker:function(a,b,c,e,f){return a=this._dialogInst,a||(this.uuid+=1,this._dialogInput=d('<input type="text" id="'+("dp"+this.uuid)+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),d("body").append(this._dialogInput),a=this._dialogInst=this._newInst(this._dialogInput,!1),a.settings={},d.data(this._dialogInput[0],"datepicker",a)),E(a.settings,e||{}),b=b&&b.constructor==Date?this._formatDate(a,b):b,this._dialogInput.val(b),this._pos=f?f.length?f:[f.pageX,f.pageY]:null,this._pos||(this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),a.settings.onSelect=c,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),d.blockUI&&d.blockUI(this.dpDiv),d.data(this._dialogInput[0],"datepicker",a),this},_destroyDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();d.removeData(a,"datepicker"),e=="input"?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(e=="div"||e=="span")&&b.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();e=="input"?(a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):(e=="div"||e=="span")&&b.children("."+this._inlineClass).children().removeClass("ui-state-disabled"),this._disabledInputs=d.map(this._disabledInputs,function(b){return b==a?null:b})}},_disableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();e=="input"?(a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):(e=="div"||e=="span")&&b.children("."+this._inlineClass).children().addClass("ui-state-disabled"),this._disabledInputs=d.map(this._disabledInputs,function(b){return b==a?null:b}),this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(a){try{return d.data(a,"datepicker")}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var e=this._getInst(a);if(arguments.length==2&&typeof b=="string")return b=="defaults"?d.extend({},d.datepicker._defaults):e?b=="all"?d.extend({},e.settings):this._get(e,b):null;var f=b||{};typeof b=="string"&&(f={},f[b]=c);if(e){this._curInst==e&&this._hideDatepicker();var g=this._getDateDatepicker(a,!0);E(e.settings,f),this._attachments(d(a),e),this._autoSize(e),this._setDateDatepicker(a,g),this._updateDatepicker(e)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){if(a=this._getInst(a))this._setDate(a,b),this._updateDatepicker(a),this._updateAlternate(a)},_getDateDatepicker:function(a,b){return(a=this._getInst(a))&&!a.inline&&this._setDateFromField(a,b),a?this._getDate(a):null},_doKeyDown:function(a){var b=d.datepicker._getInst(a.target),c=!0,e=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if(d.datepicker._datepickerShowing)switch(a.keyCode){case 9:d.datepicker._hideDatepicker(),c=!1;break;case 13:return c=d("td."+d.datepicker._dayOverClass+":not(."+d.datepicker._currentClass+")",b.dpDiv),c[0]?d.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,c[0]):d.datepicker._hideDatepicker(),!1;case 27:d.datepicker._hideDatepicker();break;case 33:d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 34:d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&d.datepicker._clearDate(a.target),c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&d.datepicker._gotoToday(a.target),c=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&d.datepicker._adjustDate(a.target,e?1:-1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&d.datepicker._adjustDate(a.target,-7,"D"),c=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&d.datepicker._adjustDate(a.target,e?-1:1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&d.datepicker._adjustDate(a.target,7,"D"),c=a.ctrlKey||a.metaKey;break;default:c=!1}else a.keyCode==36&&a.ctrlKey?d.datepicker._showDatepicker(this):c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=d.datepicker._getInst(a.target);if(d.datepicker._get(b,"constrainInput")){b=d.datepicker._possibleChars(d.datepicker._get(b,"dateFormat"));var c=String.fromCharCode(a.charCode==G?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||c<" "||!b||b.indexOf(c)>-1}},_doKeyUp:function(a){a=d.datepicker._getInst(a.target);if(a.input.val()!=a.lastVal)try{d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,d.datepicker._getFormatConfig(a))&&(d.datepicker._setDateFromField(a),d.datepicker._updateAlternate(a),d.datepicker._updateDatepicker(a))}catch(b){d.datepicker.log(b)}return!0},_showDatepicker:function(a){a=a.target||a,a.nodeName.toLowerCase()!="input"&&(a=d("input",a.parentNode)[0]);if(!d.datepicker._isDisabledDatepicker(a)&&d.datepicker._lastInput!=a){var b=d.datepicker._getInst(a);d.datepicker._curInst&&d.datepicker._curInst!=b&&d.datepicker._curInst.dpDiv.stop(!0,!0);var c=d.datepicker._get(b,"beforeShow");E(b.settings,c?c.apply(a,[a,b]):{}),b.lastVal=null,d.datepicker._lastInput=a,d.datepicker._setDateFromField(b),d.datepicker._inDialog&&(a.value=""),d.datepicker._pos||(d.datepicker._pos=d.datepicker._findPos(a),d.datepicker._pos[1]+=a.offsetHeight);var e=!1;d(a).parents().each(function(){return e|=d(this).css("position")=="fixed",!e}),e&&d.browser.opera&&(d.datepicker._pos[0]-=document.documentElement.scrollLeft,d.datepicker._pos[1]-=document.documentElement.scrollTop),c={left:d.datepicker._pos[0],top:d.datepicker._pos[1]},d.datepicker._pos=null,b.dpDiv.empty(),b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),d.datepicker._updateDatepicker(b),c=d.datepicker._checkOffset(b,c,e),b.dpDiv.css({position:d.datepicker._inDialog&&d.blockUI?"static":e?"fixed":"absolute",display:"none",left:c.left+"px",top:c.top+"px"});if(!b.inline){c=d.datepicker._get(b,"showAnim");var f=d.datepicker._get(b,"duration"),g=function(){d.datepicker._datepickerShowing=!0;var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(a.length){var c=d.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex(d(a).zIndex()+1),d.effects&&d.effects[c]?b.dpDiv.show(c,d.datepicker._get(b,"showOptions"),f,g):b.dpDiv[c||"show"](c?f:null,g),(!c||!f)&&g(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),d.datepicker._curInst=b}}},_updateDatepicker:function(a){var b=this,c=d.datepicker._getBorders(a.dpDiv);a.dpDiv.empty().append(this._generateHTML(a));var e=a.dpDiv.find("iframe.ui-datepicker-cover");e.length&&e.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}),a.dpDiv.find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){d(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&d(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&d(this).removeClass("ui-datepicker-next-hover")}).bind("mouseover",function(){b._isDisabledDatepicker(a.inline?a.dpDiv.parent()[0]:a.input[0])||(d(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),d(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&d(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&d(this).addClass("ui-datepicker-next-hover"))}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end(),c=this._getNumberOfMonths(a),e=c[1],e>1?a.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",17*e+"em"):a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),a.dpDiv[(c[0]!=1||c[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a==d.datepicker._curInst&&d.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input.focus();if(a.yearshtml){var f=a.yearshtml;setTimeout(function(){f===a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),f=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var e=a.dpDiv.outerWidth(),f=a.dpDiv.outerHeight(),g=a.input?a.input.outerWidth():0,h=a.input?a.input.outerHeight():0,i=document.documentElement.clientWidth+d(document).scrollLeft(),j=document.documentElement.clientHeight+d(document).scrollTop();return b.left-=this._get(a,"isRTL")?e-g:0,b.left-=c&&b.left==a.input.offset().left?d(document).scrollLeft():0,b.top-=c&&b.top==a.input.offset().top+h?d(document).scrollTop():0,b.left-=Math.min(b.left,b.left+e>i&&i>e?Math.abs(b.left+e-i):0),b.top-=Math.min(b.top,b.top+f>j&&j>f?Math.abs(f+h):0),b},_findPos:function(a){for(var b=this._get(this._getInst(a),"isRTL");a&&(a.type=="hidden"||a.nodeType!=1);)a=a[b?"previousSibling":"nextSibling"];return a=d(a).offset(),[a.left,a.top]},_hideDatepicker:function(a){var b=this._curInst;if(!(!b||a&&b!=d.data(a,"datepicker"))&&this._datepickerShowing){a=this._get(b,"showAnim");var c=this._get(b,"duration"),e=function(){d.datepicker._tidyDialog(b),this._curInst=null};d.effects&&d.effects[a]?b.dpDiv.hide(a,d.datepicker._get(b,"showOptions"),c,e):b.dpDiv[a=="slideDown"?"slideUp":a=="fadeIn"?"fadeOut":"hide"](a?c:null,e),a||e(),(a=this._get(b,"onClose"))&&a.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]),this._datepickerShowing=!1,this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),d.blockUI&&(d.unblockUI(),d("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){d.datepicker._curInst&&(a=d(a.target),a[0].id!=d.datepicker._mainDivId&&a.parents("#"+d.datepicker._mainDivId).length==0&&!a.hasClass(d.datepicker.markerClassName)&&!a.hasClass(d.datepicker._triggerClass)&&d.datepicker._datepickerShowing&&(!d.datepicker._inDialog||!d.blockUI)&&d.datepicker._hideDatepicker())},_adjustDate:function(a,b,c){a=d(a);var e=this._getInst(a[0]);this._isDisabledDatepicker(a[0])||(this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e))},_gotoToday:function(a){a=d(a);var b=this._getInst(a[0]);if(this._get(b,"gotoCurrent")&&b.currentDay)b.selectedDay=b.currentDay,b.drawMonth=b.selectedMonth=b.currentMonth,b.drawYear=b.selectedYear=b.currentYear;else{var c=new Date;b.selectedDay=c.getDate(),b.drawMonth=b.selectedMonth=c.getMonth(),b.drawYear=b.selectedYear=c.getFullYear()}this._notifyChange(b),this._adjustDate(a)},_selectMonthYear:function(a,b,c){a=d(a);var e=this._getInst(a[0]);e._selectingMonthYear=!1,e["selected"+(c=="M"?"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(a)},_clickMonthYear:function(a){var b=this._getInst(d(a)[0]);b.input&&b._selectingMonthYear&&setTimeout(function(){b.input.focus()},0),b._selectingMonthYear=!b._selectingMonthYear},_selectDay:function(a,b,c,e){var f=d(a);!d(e).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(f[0])&&(f=this._getInst(f[0]),f.selectedDay=f.currentDay=d("a",e).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(a){a=d(a),this._getInst(a[0]),this._selectDate(a,"")},_selectDate:function(a,b){a=this._getInst(d(a)[0]),b=b!=null?b:this._formatDate(a),a.input&&a.input.val(b),this._updateAlternate(a);var c=this._get(a,"onSelect");c?c.apply(a.input?a.input[0]:null,[b,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],typeof a.input[0]!="object"&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),e=this._getDate(a),f=this.formatDate(c,e,this._getFormatConfig(a));d(b).each(function(){d(this).val(f)})}},noWeekends:function(a){return a=a.getDay(),[a>0&&a<6,""]},iso8601Week:function(a){a=new Date(a.getTime()),a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();return a.setMonth(0),a.setDate(1),Math.floor(Math.round((b-a)/864e5)/7)+1},parseDate:function(a,b,c){if(a==null||b==null)throw"Invalid arguments";b=typeof b=="object"?b.toString():b+"";if(b=="")return null;for(var d=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff,e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=c=-1,j=-1,k=-1,l=!1,m=function(b){return(b=r+1<a.length&&a.charAt(r+1)==b)&&r++,b},n=function(a){var c=m(a);a=new RegExp("^\\d{1,"+(a=="@"?14:a=="!"?20:a=="y"&&c?4:a=="o"?3:2)+"}"),a=b.substring(q).match(a);if(!a)throw"Missing number at position "+q;return q+=a[0].length,parseInt(a[0],10)},o=function(a,c,d){a=m(a)?d:c;for(c=0;c<a.length;c++)if(b.substr(q,a[c].length).toLowerCase()==a[c].toLowerCase())return q+=a[c].length,c+1;throw"Unknown name at position "+q},p=function(){if(b.charAt(q)!=a.charAt(r))throw"Unexpected literal at position "+q;q++},q=0,r=0;r<a.length;r++)if(l)a.charAt(r)=="'"&&!m("'")?l=!1:p();else switch(a.charAt(r)){case"d":j=n("d");break;case"D":o("D",e,f);break;case"o":k=n("o");break;case"m":i=n("m");break;case"M":i=o("M",g,h);break;case"y":c=n("y");break;case"@":var s=new Date(n("@"));c=s.getFullYear(),i=s.getMonth()+1,j=s.getDate();break;case"!":s=new Date((n("!")-this._ticksTo1970)/1e4),c=s.getFullYear(),i=s.getMonth()+1,j=s.getDate();break;case"'":m("'")?p():l=!0;break;default:p()}c==-1?c=(new Date).getFullYear():c<100&&(c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=d?0:-100));if(k>-1){i=1,j=k;do{d=this._getDaysInMonth(c,i-1);if(j<=d)break;i++,j-=d}while(1)}s=this._daylightSavingAdjust(new Date(c,i-1,j));if(s.getFullYear()!=c||s.getMonth()+1!=i||s.getDate()!=j)throw"Invalid date";return s},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(a,b,c){if(!b)return"";var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;c=(c?c.monthNames:null)||this._defaults.monthNames;var g=function(b){return(b=l+1<a.length&&a.charAt(l+1)==b)&&l++,b},h=function(a,b,c){b=""+b;if(g(a))for(;b.length<c;)b="0"+b;return b},i=function(a,b,c,d){return g(a)?d[b]:c[b]},j="",k=!1;if(b)for(var l=0;l<a.length;l++)if(k)a.charAt(l)=="'"&&!g("'")?k=!1:j+=a.charAt(l);else switch(a.charAt(l)){case"d":j+=h("d",b.getDate(),2);break;case"D":j+=i("D",b.getDay(),d,e);break;case"o":j+=h("o",(b.getTime()-(new Date(b.getFullYear(),0,0)).getTime())/864e5,3);break;case"m":j+=h("m",b.getMonth()+1,2);break;case"M":j+=i("M",b.getMonth(),f,c);break;case"y":j+=g("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":j+=b.getTime();break;case"!":j+=b.getTime()*1e4+this._ticksTo1970;break;case"'":g("'")?j+="'":k=!0;break;default:j+=a.charAt(l)}return j},_possibleChars:function(a){for(var b="",c=!1,d=function(b){return(b=e+1<a.length&&a.charAt(e+1)==b)&&e++,b},e=0;e<a.length;e++)if(c)a.charAt(e)=="'"&&!d("'")?c=!1:b+=a.charAt(e);else switch(a.charAt(e)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}return b},_get:function(a,b){return a.settings[b]!==G?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e,f;e=f=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{e=this.parseDate(c,d,g)||f}catch(h){this.log(h),d=b?"":d}a.selectedDay=e.getDate(),a.drawMonth=a.selectedMonth=e.getMonth(),a.drawYear=a.selectedYear=e.getFullYear(),a.currentDay=d?e.getDate():0,a.currentMonth=d?e.getMonth():0,a.currentYear=d?e.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var e=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},f=function(b){try{return d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),b,d.datepicker._getFormatConfig(a))}catch(c){}var e=(b.toLowerCase().match(/^c/)?d.datepicker._getDate(a):null)||new Date,f=e.getFullYear(),g=e.getMonth();e=e.getDate();for(var h=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(b);i;){switch(i[2]||"d"){case"d":case"D":e+=parseInt(i[1],10);break;case"w":case"W":e+=parseInt(i[1],10)*7;break;case"m":case"M":g+=parseInt(i[1],10),e=Math.min(e,d.datepicker._getDaysInMonth(f,g));break;case"y":case"Y":f+=parseInt(i[1],10),e=Math.min(e,d.datepicker._getDaysInMonth(f,g))}i=h.exec(b)}return new Date(f,g,e)};if(b=(b=b==null||b===""?c:typeof b=="string"?f(b):typeof b=="number"?isNaN(b)?c:e(b):new Date(b.getTime()))&&b.toString()=="Invalid Date"?c:b)b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0);return this._daylightSavingAdjust(b)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear;b=this._restrictMinMax(a,this._determineDate(a,b,new Date)),a.selectedDay=a.currentDay=b.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth(),a.drawYear=a.selectedYear=a.currentYear=b.getFullYear(),(e!=a.selectedMonth||f!=a.selectedYear)&&!c&&this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),e=this._get(a,"showButtonPanel"),f=this._get(a,"hideIfNoPrevNext"),g=this._get(a,"navigationAsDateFormat"),h=this._getNumberOfMonths(a),i=this._get(a,"showCurrentAtPos"),j=this._get(a,"stepMonths"),k=h[0]!=1||h[1]!=1,l=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),m=this._getMinMaxDate(a,"min"),n=this._getMinMaxDate(a,"max");i=a.drawMonth-i;var o=a.drawYear;i<0&&(i+=12,o--);if(n){var p=this._daylightSavingAdjust(new Date(n.getFullYear(),n.getMonth()-h[0]*h[1]+1,n.getDate()));for(p=m&&p<m?m:p;this._daylightSavingAdjust(new Date(o,i,1))>p;)i--,i<0&&(i=11,o--)}a.drawMonth=i,a.drawYear=o,p=this._get(a,"prevText"),p=g?this.formatDate(p,this._daylightSavingAdjust(new Date(o,i-j,1)),this._getFormatConfig(a)):p,p=this._canAdjustMonth(a,-1,o,i)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._adjustDate('#"+a.id+"', -"+j+", 'M');\" title=\""+p+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+p+"</span></a>":f?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+p+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+p+"</span></a>";var q=this._get(a,"nextText");q=g?this.formatDate(q,this._daylightSavingAdjust(new Date(o,i+j,1)),this._getFormatConfig(a)):q,f=this._canAdjustMonth(a,1,o,i)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._adjustDate('#"+a.id+"', +"+j+", 'M');\" title=\""+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+q+"</span></a>":f?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+q+"</span></a>",j=this._get(a,"currentText"),q=this._get(a,"gotoCurrent")&&a.currentDay?l:b,j=g?this.formatDate(j,q,this._getFormatConfig(a)):j,g=a.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+y+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</button>",e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?g:"")+(this._isInRange(a,q)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._gotoToday('#"+a.id+"');\">"+j+"</button>":"")+(c?"":g)+"</div>":"",g=parseInt(this._get(a,"firstDay"),10),g=isNaN(g)?0:g,j=this._get(a,"showWeek"),q=this._get(a,"dayNames"),this._get(a,"dayNamesShort");var r=this._get(a,"dayNamesMin"),s=this._get(a,"monthNames"),t=this._get(a,"monthNamesShort"),u=this._get(a,"beforeShowDay"),v=this._get(a,"showOtherMonths"),w=this._get(a,"selectOtherMonths");this._get(a,"calculateWeek");for(var x=this._getDefaultDate(a),z="",A=0;A<h[0];A++){for(var B="",C=0;C<h[1];C++){var D=this._daylightSavingAdjust(new Date(o,i,a.selectedDay)),E=" ui-corner-all",F="";if(k){F+='<div class="ui-datepicker-group';if(h[1]>1)switch(C){case 0:F+=" ui-datepicker-group-first",E=" ui-corner-"+(c?"right":"left");break;case h[1]-1:F+=" ui-datepicker-group-last",E=" ui-corner-"+(c?"left":"right");break;default:F+=" ui-datepicker-group-middle",E=""}F+='">'}F+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+E+'">'+(/all|left/.test(E)&&A==0?c?f:p:"")+(/all|right/.test(E)&&A==0?c?p:f:"")+this._generateMonthYearHeader(a,i,o,m,n,A>0||C>0,s,t)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var G=j?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(E=0;E<7;E++){var H=(E+g)%7;G+="<th"+((E+g+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+q[H]+'">'+r[H]+"</span></th>"}F+=G+"</tr></thead><tbody>",G=this._getDaysInMonth(o,i),o==a.selectedYear&&i==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,G)),E=(this._getFirstDayOfMonth(o,i)-g+7)%7,G=k?6:Math.ceil((E+G)/7),H=this._daylightSavingAdjust(new Date(o,i,1-E));for(var I=0;I<G;I++){F+="<tr>";var J=j?'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(H)+"</td>":"";for(E=0;E<7;E++){var K=u?u.apply(a.input?a.input[0]:null,[H]):[!0,""],L=H.getMonth()!=i,M=L&&!w||!K[0]||m&&H<m||n&&H>n;J+='<td class="'+((E+g+6)%7>=5?" ui-datepicker-week-end":"")+(L?" ui-datepicker-other-month":"")+(H.getTime()==D.getTime()&&i==a.selectedMonth&&a._keyEvent||x.getTime()==H.getTime()&&x.getTime()==D.getTime()?" "+this._dayOverClass:"")+(M?" "+this._unselectableClass+" ui-state-disabled":"")+(L&&!v?"":" "+K[1]+(H.getTime()==l.getTime()?" "+this._currentClass:"")+(H.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!L||v)&&K[2]?' title="'+K[2]+'"':"")+(M?"":' onclick="DP_jQuery_'+y+".datepicker._selectDay('#"+a.id+"',"+H.getMonth()+","+H.getFullYear()+', this);return false;"')+">"+(L&&!v?"&#xa0;":M?'<span class="ui-state-default">'+H.getDate()+"</span>":'<a class="ui-state-default'+(H.getTime()==b.getTime()?" ui-state-highlight":"")+(H.getTime()==l.getTime()?" ui-state-active":"")+(L?" ui-priority-secondary":"")+'" href="#">'+H.getDate()+"</a>")+"</td>",H.setDate(H.getDate()+1),H=this._daylightSavingAdjust(H)}F+=J+"</tr>"}i++,i>11&&(i=0,o++),F+="</tbody></table>"+(k?"</div>"+(h[0]>0&&C==h[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),B+=F}z+=B}return z+=e+(d.browser.msie&&parseInt(d.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),a._keyEvent=!1,z},_generateMonthYearHeader:function(a,b,c,e,f,g,h,i){var j=this._get(a,"changeMonth"),k=this._get(a,"changeYear"),l=this._get(a,"showMonthAfterYear"),m='<div class="ui-datepicker-title">',n="";if(g||!j)n+='<span class="ui-datepicker-month">'+h[b]+"</span>";else{h=e&&e.getFullYear()==c;var o=f&&f.getFullYear()==c;n+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+y+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" onclick=\"DP_jQuery_"+y+".datepicker._clickMonthYear('#"+a.id+"');\">";for(var p=0;p<12;p++)(!h||p>=e.getMonth())&&(!o||p<=f.getMonth())&&(n+='<option value="'+p+'"'+(p==b?' selected="selected"':"")+">"+i[p]+"</option>");n+="</select>"}l||(m+=n+(g||!j||!k?"&#xa0;":"")),a.yearshtml="";if(g||!k)m+='<span class="ui-datepicker-year">'+c+"</span>";else{i=this._get(a,"yearRange").split(":");var q=(new Date).getFullYear();h=function(a){return a=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?q+parseInt(a,10):parseInt(a,10),isNaN(a)?q:a},b=h(i[0]),i=Math.max(b,h(i[1]||"")),b=e?Math.max(b,e.getFullYear()):b,i=f?Math.min(i,f.getFullYear()):i;for(a.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+y+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+y+".datepicker._clickMonthYear('#"+a.id+"');\">";b<=i;b++)a.yearshtml+='<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>";a.yearshtml+="</select>",d.browser.mozilla?m+='<select class="ui-datepicker-year"><option value="'+c+'" selected="selected">'+c+"</option></select>":(m+=a.yearshtml,a.yearshtml=null)}return m+=this._get(a,"yearSuffix"),l&&(m+=(g||!j||!k?"&#xa0;":"")+n),m+="</div>",m},_adjustInstDate:function(a,b,c){var d=a.drawYear+(c=="Y"?b:0),e=a.drawMonth+(c=="M"?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+(c=="D"?b:0),d=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,b))),a.selectedDay=d.getDate(),a.drawMonth=a.selectedMonth=d.getMonth(),a.drawYear=a.selectedYear=d.getFullYear(),(c=="M"||c=="Y")&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min");return a=this._getMinMaxDate(a,"max"),b=c&&b<c?c:b,b=a&&b>a?a:b},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){return a=this._get(a,"numberOfMonths"),a==null?[1,1]:typeof a=="number"?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a);return c=this._daylightSavingAdjust(new Date(c,d+(b<0?b:e[0]*e[1]),1)),b<0&&c.setDate(this._getDaysInMonth(c.getFullYear(),c.getMonth())),this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min");return a=this._getMinMaxDate(a,"max"),(!c||b.getTime()>=c.getTime())&&(!a||b.getTime()<=a.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){return b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear),b=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay)),this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}}),d.fn.datepicker=function(a){d.datepicker.initialized||(d(document).mousedown(d.datepicker._checkExternalClick).find("body").append(d.datepicker.dpDiv),d.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return typeof a!="string"||a!="isDisabled"&&a!="getDate"&&a!="widget"?a=="option"&&arguments.length==2&&typeof arguments[1]=="string"?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b)):this.each(function(){typeof a=="string"?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this].concat(b)):d.datepicker._attachDatepicker(this,a)}):d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b))},d.datepicker=new K,d.datepicker.initialized=!1,d.datepicker.uuid=(new Date).getTime(),d.datepicker.version="1.8.7",window["DP_jQuery_"+y]=d}(jQuery),function(a,b){a.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),a.Widget.prototype.destroy.apply(this,arguments)},value:function(a){return a===b?this._value():(this._setOption("value",a),this)},_setOption:function(b,c){b==="value"&&(this.options.value=c,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),a.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;return typeof a!="number"&&(a=0),Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value(),b=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change")),this.valueDiv.toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%"),this.element.attr("aria-valuenow",a)}}),a.extend(a.ui.progressbar,{version:"1.8.7"})}(jQuery),jQuery.effects||function(a,b){function c(b){var c;return b&&b.constructor==Array&&b.length==3?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[parseFloat(c[1])*2.55,parseFloat(c[2])*2.55,parseFloat(c[3])*2.55]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(b)?j.transparent:j[a.trim(b).toLowerCase()]}function d(b,d){var e;do{e=a.curCSS(b,d);if(e!=""&&e!="transparent"||a.nodeName(b,"body"))break;d="backgroundColor"}while(b=b.parentNode);return c(e)}function e(){var a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={},c,d;if(a&&a.length&&a[0]&&a[a[0]])for(var e=a.length;e--;)c=a[e],typeof a[c]=="string"&&(d=c.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),b[d]=a[c]);else for(c in a)typeof a[c]=="string"&&(b[c]=a[c]);return b}function f(b){var c,d;for(c in b)d=b[c],(d==null||a.isFunction(d)||c in l||/scrollbar/.test(c)||!/color/i.test(c)&&isNaN(parseFloat(d)))&&delete b[c];return b}function g(a,b){var c={_:0},d;for(d in b)a[d]!=b[d]&&(c[d]=b[d]);return c}function h(b,c,d,e){typeof b=="object"&&(e=c,d=null,c=b,b=c.effect),a.isFunction(c)&&(e=c,d=null,c={});if(typeof c=="number"||a.fx.speeds[c])e=d,d=c,c={};return a.isFunction(d)&&(e=d,d=null),c=c||{},d=d||c.duration,d=a.fx.off?0:typeof d=="number"?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,e=e||c.complete,[b,c,d,e]}function i(b){return!b||typeof b=="number"||a.fx.speeds[b]?!0:typeof b=="string"&&!a.effects[b]?!0:!1}a.effects={},a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(b,e){a.fx.step[e]=function(a){a.colorInit||(a.start=d(a.elem,e),a.end=c(a.end),a.colorInit=!0),a.elem.style[e]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var j={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},k=["add","remove","toggle"],l={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,c,d,h){return a.isFunction(d)&&(h=d,d=null),this.each(function(){a.queue(this,"fx",function(){var i=a(this),j=i.attr("style")||" ",l=f(e.call(this)),m,n=i.attr("className");a.each(k,function(a,c){b[c]&&i[c+"Class"](b[c])}),m=f(e.call(this)),i.attr("className",n),i.animate(g(l,m),c,d,function(){a.each(k,function(a,c){b[c]&&i[c+"Class"](b[c])}),typeof i.attr("style")=="object"?(i.attr("style").cssText="",i.attr("style").cssText=j):i.attr("style",j),h&&h.apply(this,arguments)}),l=a.queue(this),m=l.splice(l.length-1,1)[0],l.splice(1,0,m),a.dequeue(this)})})},a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,e,f,g){return typeof d=="boolean"||d===b?e?a.effects.animateClass.apply(this,[d?{add:c}:{remove:c},e,f,g]):this._toggleClass(c,d):a.effects.animateClass.apply(this,[{toggle:c},d,e,f])},switchClass:function(b,c,d,e,f){return a.effects.animateClass.apply(this,[{add:c,remove:b},d,e,f])}}),a.extend(a.effects,{version:"1.8.7",save:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){return b=="toggle"&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":a=0;break;case"center":a=.5;break;case"right":a=1;break;default:a=a[1]/b.width}return{x:a,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0});return b.wrap(d),d=b.parent(),b.css("position")=="static"?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0})),d.css(c).show()},removeWrapper:function(a){return a.parent().is(".ui-effects-wrapper")?a.parent().replaceWith(a):a},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){unit=b.cssUnit(c),unit[0]>0&&(e[c]=unit[0]*d+unit[1])}),e}}),a.fn.extend({effect:function(b){var c=h.apply(this,arguments),d={options:c[1],duration:c[2],callback:c[3]};c=d.options.mode;var e=a.effects[b];return a.fx.off||!e?c?this[c](d.duration,d.callback):this.each(function(){d.callback&&d.callback.call(this)}):e.call(this,d)},_show:a.fn.show,show:function(a){if(i(a))return this._show.apply(this,arguments);var b=h.apply(this,arguments);return b[1].mode="show",this.effect.apply(this,b)},_hide:a.fn.hide,hide:function(a){if(i(a))return this._hide.apply(this,arguments);var b=h.apply(this,arguments);return b[1].mode="hide",this.effect.apply(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(i(b)||typeof b=="boolean"||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=h.apply(this,arguments);return c[1].mode="toggle",this.effect.apply(this,c)},cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}}),a.easing.jswing=a.easing.swing,a.extend(a.easing,{def:"easeOutQuad",swing:function(b,c,d,e,f){return a.easing[a.easing.def](b,c,d,e,f)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return b==0?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return b==0?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){a=1.70158;var f=0,g=d;return b==0?c:(b/=e)==1?c+d:(f||(f=e*.3),g<Math.abs(d)?(g=d,a=f/4):a=f/(2*Math.PI)*Math.asin(d/g),-(g*Math.pow(2,10*(b-=1))*Math.sin((b*e-a)*2*Math.PI/f))+c)},easeOutElastic:function(a,b,c,d,e){a=1.70158;var f=0,g=d;return b==0?c:(b/=e)==1?c+d:(f||(f=e*.3),g<Math.abs(d)?(g=d,a=f/4):a=f/(2*Math.PI)*Math.asin(d/g),g*Math.pow(2,-10*b)*Math.sin((b*e-a)*2*Math.PI/f)+d+c)},easeInOutElastic:function(a,b,c,d,e){a=1.70158;var f=0,g=d;return b==0?c:(b/=e/2)==2?c+d:(f||(f=e*.3*1.5),g<Math.abs(d)?(g=d,a=f/4):a=f/(2*Math.PI)*Math.asin(d/g),b<1?-0.5*g*Math.pow(2,10*(b-=1))*Math.sin((b*e-a)*2*Math.PI/f)+c:g*Math.pow(2,-10*(b-=1))*Math.sin((b*e-a)*2*Math.PI/f)*.5+d+c)},easeInBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),e*(c/=f)*c*((g+1)*c-g)+d},easeOutBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),e*((c=c/f-1)*c*((g+1)*c+g)+1)+d},easeInOutBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),(c/=f/2)<1?e/2*c*c*(((g*=1.525)+1)*c-g)+d:e/2*((c-=2)*c*(((g*=1.525)+1)*c+g)+2)+d},easeInBounce:function(b,c,d,e,f){return e-a.easing.easeOutBounce(b,f-c,0,e,f)+d},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*7.5625*b*b+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(b,c,d,e,f){return c<f/2?a.easing.easeInBounce(b,c*2,0,e,f)*.5+d:a.easing.easeOutBounce(b,c*2-f,0,e,f)*.5+e*.5+d}})}(jQuery),function(a){a.effects.blind=function(c){return this.queue(function(){var d=a(this),e=["position","top","left"],f=a.effects.setMode(d,c.options.mode||"hide"),g=c.options.direction||"vertical";a.effects.save(d,e),d.show();var h=a.effects.createWrapper(d).css({overflow:"hidden"}),i=g=="vertical"?"height":"width";g=g=="vertical"?h.height():h.width(),f=="show"&&h.css(i,0);var j={};j[i]=f=="show"?g:0,h.animate(j,c.duration,c.options.easing,function(){f=="hide"&&d.hide(),a.effects.restore(d,e),a.effects.removeWrapper(d),c.callback&&c.callback.apply(d[0],arguments),d.dequeue()})})}}(jQuery),function(a){a.effects.bounce=function(b){return this.queue(function(){var c=a(this),d=["position","top","left"],f=a.effects.setMode(c,b.options.mode||"effect"),g=b.options.direction||"up",h=b.options.distance||20,i=b.options.times||5,j=b.duration||250;/show|hide/.test(f)&&d.push("opacity"),a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var k=g=="up"||g=="down"?"top":"left";g=g=="up"||g=="left"?"pos":"neg",h=b.options.distance||(k=="top"?c.outerHeight({margin:!0})/3:c.outerWidth({margin:!0})/3),f=="show"&&c.css("opacity",0).css(k,g=="pos"?-h:h),f=="hide"&&(h/=i*2),f!="hide"&&i--;if(f=="show"){var l={opacity:1};l[k]=(g=="pos"?"+=":"-=")+h,c.animate(l,j/2,b.options.easing),h/=2,i--}for(l=0;l<i;l++){var m={},n={};m[k]=(g=="pos"?"-=":"+=")+h,n[k]=(g=="pos"?"+=":"-=")+h,c.animate(m,j/2,b.options.easing).animate(n,j/2,b.options.easing),h=f=="hide"?h*2:h/2}f=="hide"?(l={opacity:0},l[k]=(g=="pos"?"-=":"+=")+h,c.animate(l,j/2,b.options.easing,function(){c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})):(m={},n={},m[k]=(g=="pos"?"-=":"+=")+h,n[k]=(g=="pos"?"+=":"-=")+h,c.animate(m,j/2,b.options.easing).animate(n,j/2,b.options.easing,function(){a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})),c.queue("fx",function(){c.dequeue()}),c.dequeue()})}}(jQuery),function(a){a.effects.clip=function(c){return this.queue(function(){var d=a(this),f=["position","top","left","height","width"],g=a.effects.setMode(d,c.options.mode||"hide"),h=c.options.direction||"vertical";a.effects.save(d,f),d.show();var i=a.effects.createWrapper(d).css({overflow:"hidden"});i=d[0].tagName=="IMG"?i:d;var j={size:h=="vertical"?"height":"width",position:h=="vertical"?"top":"left"};h=h=="vertical"?i.height():i.width(),g=="show"&&(i.css(j.size,0),i.css(j.position,h/2));var k={};k[j.size]=g=="show"?h:0,k[j.position]=g=="show"?0:h/2,i.animate(k,{queue:!1,duration:c.duration,easing:c.options.easing,complete:function(){g=="hide"&&d.hide(),a.effects.restore(d,f),a.effects.removeWrapper(d),c.callback&&c.callback.apply(d[0],arguments),d.dequeue()}})})}}(jQuery),function(a){a.effects.drop=function(b){return this.queue(function(){var e=a(this),f=["position","top","left","opacity"],g=a.effects.setMode(e,b.options.mode||"hide"),h=b.options.direction||"left";a.effects.save(e,f),e.show(),a.effects.createWrapper(e);var i=h=="up"||h=="down"?"top":"left";h=h=="up"||h=="left"?"pos":"neg";var j=b.options.distance||(i=="top"?e.outerHeight({margin:!0})/2:e.outerWidth({margin:!0})/2);g=="show"&&e.css("opacity",0).css(i,h=="pos"?-j:j);var k={opacity:g=="show"?1:0};k[i]=(g=="show"?h=="pos"?"+=":"-=":h=="pos"?"-=":"+=")+j,e.animate(k,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){g=="hide"&&e.hide(),a.effects.restore(e,f),a.effects.removeWrapper(e),b.callback&&b.callback.apply(this,arguments),e.dequeue()}})})}}(jQuery),function(a){a.effects.explode=function(b){return this.queue(function(){var c=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3,d=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3;b.options.mode=b.options.mode=="toggle"?a(this).is(":visible")?"hide":"show":b.options.mode;var e=a(this).show().css("visibility","hidden"),f=e.offset();f.top-=parseInt(e.css("marginTop"),10)||0,f.left-=parseInt(e.css("marginLeft"),10)||0;for(var g=e.outerWidth(!0),h=e.outerHeight(!0),i=0;i<c;i++)for(var k=0;k<d;k++)e.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-k*(g/d),top:-i*(h/c)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g/d,height:h/c,left:f.left+k*(g/d)+(b.options.mode=="show"?(k-Math.floor(d/2))*(g/d):0),top:f.top+i*(h/c)+(b.options.mode=="show"?(i-Math.floor(c/2))*(h/c):0),opacity:b.options.mode=="show"?0:1}).animate({left:f.left+k*(g/d)+(b.options.mode=="show"?0:(k-Math.floor(d/2))*(g/d)),top:f.top+i*(h/c)+(b.options.mode=="show"?0:(i-Math.floor(c/2))*(h/c)),opacity:b.options.mode=="show"?1:0},b.duration||500);setTimeout(function(){b.options.mode=="show"?e.css({visibility:"visible"}):e.css({visibility:"visible"}).hide(),b.callback&&b.callback.apply(e[0]),e.dequeue(),a("div.ui-effects-explode").remove()},b.duration||500)})}}(jQuery),function(a){a.effects.fade=function(c){return this.queue(function(){var d=a(this),e=a.effects.setMode(d,c.options.mode||"hide");d.animate({opacity:e},{queue:!1,duration:c.duration,easing:c.options.easing,complete:function(){c.callback&&c.callback.apply(this,arguments),d.dequeue()}})})}}(jQuery),function(a){a.effects.fold=function(b){return this.queue(function(){var d=a(this),e=["position","top","left"],f=a.effects.setMode(d,b.options.mode||"hide"),g=b.options.size||15,h=!!b.options.horizFirst,i=b.duration?b.duration/2:a.fx.speeds._default/2;a.effects.save(d,e),d.show();var j=a.effects.createWrapper(d).css({overflow:"hidden"}),k=f=="show"!=h,l=k?["width","height"]:["height","width"];k=k?[j.width(),j.height()]:[j.height(),j.width()];var m=/([0-9]+)%/.exec(g);m&&(g=parseInt(m[1],10)/100*k[f=="hide"?0:1]),f=="show"&&j.css(h?{height:0,width:g}:{height:g,width:0}),h={},m={},h[l[0]]=f=="show"?k[0]:g,m[l[1]]=f=="show"?k[1]:0,j.animate(h,i,b.options.easing).animate(m,i,b.options.easing,function(){f=="hide"&&d.hide(),a.effects.restore(d,e),a.effects.removeWrapper(d),b.callback&&b.callback.apply(d[0],arguments),d.dequeue()})})}}(jQuery),function(a){a.effects.highlight=function(c){return this.queue(function(){var d=a(this),e=["backgroundImage","backgroundColor","opacity"],f=a.effects.setMode(d,c.options.mode||"show"),g={backgroundColor:d.css("backgroundColor")};f=="hide"&&(g.opacity=0),a.effects.save(d,e),d.show().css({backgroundImage:"none",backgroundColor:c.options.color||"#ffff99"}).animate(g,{queue:!1,duration:c.duration,easing:c.options.easing,complete:function(){f=="hide"&&d.hide(),a.effects.restore(d,e),f=="show"&&!a.support.opacity&&this.style.removeAttribute("filter"),c.callback&&c.callback.apply(this,arguments),d.dequeue()}})})}}(jQuery),function(a){a.effects.pulsate=function(b){return this.queue(function(){var c=a(this),e=a.effects.setMode(c,b.options.mode||"show");times=(b.options.times||5)*2-1,duration=b.duration?b.duration/2:a.fx.speeds._default/2,isVisible=c.is(":visible"),animateTo=0,isVisible||(c.css("opacity",0).show(),animateTo=1),(e=="hide"&&isVisible||e=="show"&&!isVisible)&&times--;for(e=0;e<times;e++)c.animate({opacity:animateTo},duration,b.options.easing),animateTo=(animateTo+1)%2;c.animate({opacity:animateTo},duration,b.options.easing,function(){animateTo==0&&c.hide(),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}).dequeue()})}}(jQuery),function(a){a.effects.puff=function(b){return this.queue(function(){var d=a(this),e=a.effects.setMode(d,b.options.mode||"hide"),f=parseInt(b.options.percent,10)||150,g=f/100,h={height:d.height(),width:d.width()};a.extend(b.options,{fade:!0,mode:e,percent:e=="hide"?f:100,from:e=="hide"?h:{height:h.height*g,width:h.width*g}}),d.effect("scale",b.options,b.duration,b.callback),d.dequeue()})},a.effects.scale=function(b){return this.queue(function(){var d=a(this),e=a.extend(!0,{},b.options),f=a.effects.setMode(d,b.options.mode||"effect"),g=parseInt(b.options.percent,10)||(parseInt(b.options.percent,10)==0?0:f=="hide"?0:100),h=b.options.direction||"both",i=b.options.origin;f!="effect"&&(e.origin=i||["middle","center"],e.restore=!0),i={height:d.height(),width:d.width()},d.from=b.options.from||(f=="show"?{height:0,width:0}:i),g={y:h!="horizontal"?g/100:1,x:h!="vertical"?g/100:1},d.to={height:i.height*g.y,width:i.width*g.x},b.options.fade&&(f=="show"&&(d.from.opacity=0,d.to.opacity=1),f=="hide"&&(d.from.opacity=1,d.to.opacity=0)),e.from=d.from,e.to=d.to,e.mode=f,d.effect("size",e,b.duration,b.callback),d.dequeue()})},a.effects.size=function(b){return this.queue(function(){var d=a(this),e=["position","top","left","width","height","overflow","opacity"],f=["position","top","left","overflow","opacity"],g=["width","height","overflow"],h=["fontSize"],i=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],j=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],k=a.effects.setMode(d,b.options.mode||"effect"),l=b.options.restore||!1,m=b.options.scale||"both",n=b.options.origin,o={height:d.height(),width:d.width()};d.from=b.options.from||o,d.to=b.options.to||o,n&&(n=a.effects.getBaseline(n,o),d.from.top=(o.height-d.from.height)*n.y,d.from.left=(o.width-d.from.width)*n.x,d.to.top=(o.height-d.to.height)*n.y,d.to.left=(o.width-d.to.width)*n.x);var p={from:{y:d.from.height/o.height,x:d.from.width/o.width},to:{y:d.to.height/o.height,x:d.to.width/o.width}};if(m=="box"||m=="both")p.from.y!=p.to.y&&(e=e.concat(i),d.from=a.effects.setTransition(d,i,p.from.y,d.from),d.to=a.effects.setTransition(d,i,p.to.y,d.to)),p.from.x!=p.to.x&&(e=e.concat(j),d.from=a.effects.setTransition(d,j,p.from.x,d.from),d.to=a.effects.setTransition(d,j,p.to.x,d.to));(m=="content"||m=="both")&&p.from.y!=p.to.y&&(e=e.concat(h),d.from=a.effects.setTransition(d,h,p.from.y,d.from),d.to=a.effects.setTransition(d,h,p.to.y,d.to)),a.effects.save(d,l?e:f),d.show(),a.effects.createWrapper(d),d.css("overflow","hidden").css(d.from);if(m=="content"||m=="both")i=i.concat(["marginTop","marginBottom"]).concat(h),j=j.concat(["marginLeft","marginRight"]),g=e.concat(i).concat(j),d.find("*[width]").each(function(){child=a(this),l&&a.effects.save(child,g);var d={height:child.height(),width:child.width()};child.from={height:d.height*p.from.y,width:d.width*p.from.x},child.to={height:d.height*p.to.y,width:d.width*p.to.x},p.from.y!=p.to.y&&(child.from=a.effects.setTransition(child,i,p.from.y,child.from),child.to=a.effects.setTransition(child,i,p.to.y,child.to)),p.from.x!=p.to.x&&(child.from=a.effects.setTransition(child,j,p.from.x,child.from),child.to=a.effects.setTransition(child,j,p.to.x,child.to)),child.css(child.from),child.animate(child.to,b.duration,b.options.easing,function(){l&&a.effects.restore(child,g)})});d.animate(d.to,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){d.to.opacity===0&&d.css("opacity",d.from.opacity),k=="hide"&&d.hide(),a.effects.restore(d,l?e:f),a.effects.removeWrapper(d),b.callback&&b.callback.apply(this,arguments),d.dequeue()}})})}}(jQuery),function(a){a.effects.shake=function(b){return this.queue(function(){var c=a(this),e=["position","top","left"];a.effects.setMode(c,b.options.mode||"effect");var f=b.options.direction||"left",g=b.options.distance||20,h=b.options.times||3,i=b.duration||b.options.duration||140;a.effects.save(c,e),c.show(),a.effects.createWrapper(c);var j=f=="up"||f=="down"?"top":"left",k=f=="up"||f=="left"?"pos":"neg";f={};var l={},m={};f[j]=(k=="pos"?"-=":"+=")+g,l[j]=(k=="pos"?"+=":"-=")+g*2,m[j]=(k=="pos"?"-=":"+=")+g*2,c.animate(f,i,b.options.easing);for(g=1;g<h;g++)c.animate(l,i,b.options.easing).animate(m,i,b.options.easing);c.animate(l,i,b.options.easing).animate(f,i/2,b.options.easing,function(){a.effects.restore(c,e),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}),c.dequeue()})}}(jQuery),function(a){a.effects.slide=function(b){return this.queue(function(){var e=a(this),f=["position","top","left"],g=a.effects.setMode(e,b.options.mode||"show"),h=b.options.direction||"left";a.effects.save(e,f),e.show(),a.effects.createWrapper(e).css({overflow:"hidden"});var i=h=="up"||h=="down"?"top":"left";h=h=="up"||h=="left"?"pos":"neg";var j=b.options.distance||(i=="top"?e.outerHeight({margin:!0}):e.outerWidth({margin:!0}));g=="show"&&e.css(i,h=="pos"?isNaN(j)?"-"+j:-j:j);var k={};k[i]=(g=="show"?h=="pos"?"+=":"-=":h=="pos"?"-=":"+=")+j,e.animate(k,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){g=="hide"&&e.hide(),a.effects.restore(e,f),a.effects.removeWrapper(e),b.callback&&b.callback.apply(this,arguments),e.dequeue()}})})}}(jQuery),function(a){a.effects.transfer=function(b){return this.queue(function(){var c=a(this),d=a(b.options.to),f=d.offset();d={top:f.top,left:f.left,height:d.innerHeight(),width:d.innerWidth()},f=c.offset();var g=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.options.className).css({top:f.top,left:f.left,height:c.innerHeight(),width:c.innerWidth(),position:"absolute"}).animate(d,b.duration,b.options.easing,function(){g.remove(),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery);
ChemDoodle.sketcher=function(){var a={};return a.actions={},a.gui={},a.gui.desktop={},a.gui.mobile={},a.states={},a}(),function(a){a._Action=function(){return this.forward=function(a){this.innerForward(),this.checks(a)},this.reverse=function(a){this.innerReverse(),this.checks(a)},this.checks=function(a){a.molecule.check(),a.repaint()},!0}}(ChemDoodle.sketcher.actions),function(a,b){a.AddAction=function(a,b,c){return this.mol=a,this.as=b,this.bs=c,!0},a.AddAction.prototype=new a._Action,a.AddAction.prototype.innerForward=function(){if(this.as!=null)for(var a=0,b=this.as.length;a<b;a++)this.mol.atoms.push(this.as[a]);if(this.bs!=null)for(var a=0,b=this.bs.length;a<b;a++)this.mol.bonds.push(this.bs[a])},a.AddAction.prototype.innerReverse=function(){if(this.as!=null){var a=[];for(var c=0,d=this.mol.atoms.length;c<d;c++)b(this.mol.atoms[c],this.as)==-1&&a.push(this.mol.atoms[c]);this.mol.atoms=a}if(this.bs!=null){var e=[];for(var c=0,d=this.mol.bonds.length;c<d;c++)b(this.mol.bonds[c],this.bs)==-1&&e.push(this.mol.bonds[c]);this.mol.bonds=e}}}(ChemDoodle.sketcher.actions,jQuery.inArray),function(a,b){a.ChangeBondAction=function(a,c,d){return this.b=a,this.orderBefore=a.bondOrder,this.stereoBefore=a.stereo,c?(this.orderAfter=c,this.stereoAfter=d):(this.orderAfter=a.bondOrder+1,this.orderAfter>3&&(this.orderAfter=1),this.stereoAfter=b.STEREO_NONE),!0},a.ChangeBondAction.prototype=new a._Action,a.ChangeBondAction.prototype.innerForward=function(){this.b.bondOrder=this.orderAfter,this.b.stereo=this.stereoAfter},a.ChangeBondAction.prototype.innerReverse=function(){this.b.bondOrder=this.orderBefore,this.b.stereo=this.stereoBefore}}(ChemDoodle.sketcher.actions,ChemDoodle.structures.Bond),function(a){a.ChangeChargeAction=function(a,b){return this.a=a,this.delta=b,!0},a.ChangeChargeAction.prototype=new a._Action,a.ChangeChargeAction.prototype.innerForward=function(){this.a.charge+=this.delta},a.ChangeChargeAction.prototype.innerReverse=function(){this.a.charge-=this.delta}}(ChemDoodle.sketcher.actions),function(a){a.ChangeCoordinatesAction=function(a,b){this.as=a,this.recs=[];for(var c=0,d=this.as.length;c<d;c++)this.recs[c]={xo:this.as[c].x,yo:this.as[c].y,xn:b[c].x,yn:b[c].y};return!0},a.ChangeCoordinatesAction.prototype=new a._Action,a.ChangeCoordinatesAction.prototype.innerForward=function(){for(var a=0,b=this.as.length;a<b;a++)this.as[a].x=this.recs[a].xn,this.as[a].y=this.recs[a].yn},a.ChangeCoordinatesAction.prototype.innerReverse=function(){for(var a=0,b=this.as.length;a<b;a++)this.as[a].x=this.recs[a].xo,this.as[a].y=this.recs[a].yo}}(ChemDoodle.sketcher.actions),function(a){a.ChangeLabelAction=function(a,b){return this.a=a,this.before=a.label,this.after=b,!0},a.ChangeLabelAction.prototype=new a._Action,a.ChangeLabelAction.prototype.innerForward=function(){this.a.label=this.after},a.ChangeLabelAction.prototype.innerReverse=function(){this.a.label=this.before}}(ChemDoodle.sketcher.actions),function(a){a.ChangeLonePairAction=function(a,b){return this.a=a,this.delta=b,!0},a.ChangeLonePairAction.prototype=new a._Action,a.ChangeLonePairAction.prototype.innerForward=function(){this.a.numLonePair+=this.delta},a.ChangeLonePairAction.prototype.innerReverse=function(){this.a.numLonePair-=this.delta}}(ChemDoodle.sketcher.actions),function(a){a.ClearAction=function(a){return this.sketcher=a,this.before=this.sketcher.getMolecule(),this.sketcher.clear(),this.after=this.sketcher.getMolecule(),!0},a.ClearAction.prototype=new a._Action,a.ClearAction.prototype.innerForward=function(){this.sketcher.molecule=this.after},a.ClearAction.prototype.innerReverse=function(){this.sketcher.molecule=this.before}}(ChemDoodle.sketcher.actions),function(a){a.DeleteAction=function(a,b,c){return this.mol=a,this.as=b,this.bs=c,!0},a.DeleteAction.prototype=new a._Action,a.DeleteAction.prototype.innerForward=a.AddAction.prototype.innerReverse,a.DeleteAction.prototype.innerReverse=a.AddAction.prototype.innerForward}(ChemDoodle.sketcher.actions),function(a){a.FlipBondAction=function(a){return this.b=a,!0},a.FlipBondAction.prototype=new a._Action,a.FlipBondAction.prototype.innerForward=function(){var a=this.b.a1;this.b.a1=this.b.a2,this.b.a2=a},a.FlipBondAction.prototype.innerReverse=function(){this.innerForward()}}(ChemDoodle.sketcher.actions),function(a){a.MoveAction=function(a,b){return this.as=a,this.dif=b,!0},a.MoveAction.prototype=new a._Action,a.MoveAction.prototype.innerForward=function(){for(var a=0,b=this.as.length;a<b;a++)this.as[a].add(this.dif)},a.MoveAction.prototype.innerReverse=function(){for(var a=0,b=this.as.length;a<b;a++)this.as[a].sub(this.dif)}}(ChemDoodle.sketcher.actions),function(a,b){a.RotateAction=function(a,b,c){return this.as=a,this.dif=b,this.center=c,!0},a.RotateAction.prototype=new a._Action,a.RotateAction.prototype.innerForward=function(){for(var a=0,c=this.as.length;a<c;a++){var d=this.center.distance(this.as[a]),e=this.center.angle(this.as[a])+this.dif;this.as[a].x=this.center.x+d*b.cos(e),this.as[a].y=this.center.y-d*b.sin(e)}},a.RotateAction.prototype.innerReverse=function(){for(var a=0,c=this.as.length;a<c;a++){var d=this.center.distance(this.as[a]),e=this.center.angle(this.as[a])-this.dif;this.as[a].x=this.center.x+d*b.cos(e),this.as[a].y=this.center.y-d*b.sin(e)}}}(ChemDoodle.sketcher.actions,Math),function(a,b){a.SwitchMoleculeAction=function(a,b){return this.sketcher=a,this.molB=a.molecule,this.molA=b,!0},a.SwitchMoleculeAction.prototype=new a._Action,a.SwitchMoleculeAction.prototype.innerForward=function(){this.sketcher.loadMolecule(this.molA)},a.SwitchMoleculeAction.prototype.innerReverse=function(){this.sketcher.molecule=this.molB}}(ChemDoodle.sketcher.actions,jQuery.inArray),function(a){a.HistoryManager=function(a){return this.sketcher=a,this.undoStack=[],this.redoStack=[],!0},a.HistoryManager.prototype.undo=function(){if(this.undoStack.length!=0){var a=this.undoStack.pop();a.reverse(this.sketcher),this.redoStack.push(a),this.undoStack.length==0&&this.sketcher.toolbarManager.buttonUndo.disable(),this.sketcher.toolbarManager.buttonRedo.enable()}},a.HistoryManager.prototype.redo=function(){if(this.redoStack.length!=0){var a=this.redoStack.pop();a.forward(this.sketcher),this.undoStack.push(a),this.sketcher.toolbarManager.buttonUndo.enable(),this.redoStack.length==0&&this.sketcher.toolbarManager.buttonRedo.disable()}},a.HistoryManager.prototype.pushUndo=function(a){a.forward(this.sketcher),this.undoStack.push(a),this.redoStack.length!=0&&(this.redoStack=[]),this.sketcher.toolbarManager.buttonUndo.enable(),this.sketcher.toolbarManager.buttonRedo.disable()},a.HistoryManager.prototype.clear=function(a){this.undoStack.length!=0&&(this.undoStack=[],this.sketcher.toolbarManager.buttonUndo.disable()),this.redoStack.length!=0&&(this.redoStack=[],this.sketcher.toolbarManager.buttonRedo.disable())}}(ChemDoodle.sketcher.actions),function(a,b,c,d,e,f,g,h){d._State=function(){return!0},d._State.prototype.setup=function(a){this.sketcher=a},d._State.prototype.bondExists=function(a,b){for(var c=0,d=this.sketcher.molecule.bonds.length;c<d;c++)if(this.sketcher.molecule.bonds[c].contains(a)&&this.sketcher.molecule.bonds[c].contains(b))return!0;return!1},d._State.prototype.getBond=function(a,b){for(var c=0,d=this.sketcher.molecule.bonds.length;c<d;c++)if(this.sketcher.molecule.bonds[c].contains(a)&&this.sketcher.molecule.bonds[c].contains(b))return this.sketcher.molecule.bonds[c];return null},d._State.prototype.clearHover=function(){this.sketcher.hovering!=null&&(this.sketcher.hovering.isHover=!1,this.sketcher.hovering.isSelected=!1),this.sketcher.hovering=null},d._State.prototype.findHoveredObject=function(a,b,c){this.clearHover();var d=Infinity,e=null;if(b)for(var f=0,g=this.sketcher.molecule.atoms.length;f<g;f++){this.sketcher.molecule.atoms[f].isHover=!1;var h=a.p.distance(this.sketcher.molecule.atoms[f]);h<this.sketcher.specs.bondLength&&h<d&&(d=h,e=this.sketcher.molecule.atoms[f])}if(c)for(var f=0,g=this.sketcher.molecule.bonds.length;f<g;f++){this.sketcher.molecule.bonds[f].isHover=!1;var h=a.p.distance(this.sketcher.molecule.bonds[f].getCenter());h<this.sketcher.specs.bondLength&&h<d&&(d=h,e=this.sketcher.molecule.bonds[f])}e!=null&&(e.isHover=!0,this.sketcher.hovering=e)},d._State.prototype.getOptimumAngle=function(b){var c=this.sketcher.molecule.getAngles(b),d=0;if(c.length==0)d=h.PI/6;else if(c.length==1){var e=null;for(var f=0,g=this.sketcher.molecule.bonds.length;f<g;f++)this.sketcher.molecule.bonds[f].contains(this.sketcher.hovering)&&(e=this.sketcher.molecule.bonds[f]);if(e.bondOrder>=3)d=c[0]+h.PI;else{var i=c[0]%h.PI*2;a.isBetween(i,0,h.PI/2)||a.isBetween(i,h.PI,3*h.PI/2)?d=c[0]+2*h.PI/3:d=c[0]-2*h.PI/3}}else d=a.angleBetweenLargest(c).angle;return d},d._State.prototype.click=function(a){this.innerclick&&this.innerclick(a)},d._State.prototype.rightclick=function(a){this.innerrightclick&&this.innerrightclick(a)},d._State.prototype.dblclick=function(a){this.innerdblclick&&this.innerdblclick(a);if(this.sketcher.hovering==null){var b=new e.Point(this.sketcher.width/2,this.sketcher.height/2);b.sub(this.sketcher.molecule.getCenter()),this.sketcher.historyManager.pushUndo(new c.MoveAction(this.sketcher.molecule.atoms,b))}},d._State.prototype.mousedown=function(a){this.sketcher.lastPoint=a.p,this.sketcher.isHelp||this.sketcher.isMobile&&a.op.distance(this.sketcher.helpPos)<10?(this.sketcher.isHelp=!1,this.sketcher.repaint(),window.open("http://web.chemdoodle.com/sketcher")):this.innermousedown&&this.innermousedown(a)},d._State.prototype.rightmousedown=function(a){this.innerrightmousedown&&this.innerrightmousedown(a)},d._State.prototype.mousemove=function(a){this.innermousemove&&this.innermousemove(a),this.sketcher.repaint()},d._State.prototype.mouseout=function(a){this.innermouseout&&this.innermouseout(a)},d._State.prototype.mouseover=function(a){this.innermouseover&&this.innermouseover(a)},d._State.prototype.mouseup=function(a){this.parentAction=null,this.innermouseup&&this.innermouseup(a)},d._State.prototype.rightmouseup=function(a){this.innerrightmouseup&&this.innerrightmouseup(a)},d._State.prototype.mousewheel=function(a,b){this.innermousewheel&&this.innermousewheel(a),this.sketcher.specs.scale+=b/10,this.sketcher.checkScale(),this.sketcher.repaint()},d._State.prototype.drag=function(a){this.innerdrag&&this.innerdrag(a);if(this.sketcher.hovering==null){if(b.SHIFT){var d=new e.Point(this.sketcher.width/2,this.sketcher.height/2),f=d.angle(this.sketcher.lastPoint),g=d.angle(a.p),i=g-f;if(this.parentAction==null)this.parentAction=new c.RotateAction(this.sketcher.molecule.atoms,i,d),this.sketcher.historyManager.pushUndo(this.parentAction);else{this.parentAction.dif+=i;for(var j=0,k=this.sketcher.molecule.atoms.length;j<k;j++){var l=d.distance(this.sketcher.molecule.atoms[j]),n=d.angle(this.sketcher.molecule.atoms[j])+i;this.sketcher.molecule.atoms[j].x=d.x+l*h.cos(n),this.sketcher.molecule.atoms[j].y=d.y-l*h.sin(n)}this.sketcher.molecule.check()}}else{if(!this.sketcher.lastPoint)return;var o=new e.Point(a.p.x,a.p.y);o.sub(this.sketcher.lastPoint);if(this.parentAction==null)this.parentAction=new c.MoveAction(this.sketcher.molecule.atoms,o),this.sketcher.historyManager.pushUndo(this.parentAction);else{this.parentAction.dif.add(o);for(var j=0,k=this.sketcher.molecule.atoms.length;j<k;j++)this.sketcher.molecule.atoms[j].add(o);this.sketcher.molecule.check()}}this.sketcher.repaint()}this.sketcher.lastPoint=a.p},d._State.prototype.keydown=function(d){if(b.CANVAS_DRAGGING==this.sketcher)this.sketcher.lastPoint!=null&&(d.p=this.sketcher.lastPoint,this.drag(d));else if(b.META)d.which==90?this.sketcher.historyManager.undo():d.which==89?this.sketcher.historyManager.redo():d.which==83?this.sketcher.toolbarManager.buttonSave.getElement().click():d.which==79?this.sketcher.toolbarManager.buttonOpen.getElement().click():d.which==78?this.sketcher.toolbarManager.buttonClear.getElement().click():d.which==187||d.which==61?this.sketcher.toolbarManager.buttonScalePlus.getElement().click():(d.which==189||d.which==109)&&this.sketcher.toolbarManager.buttonScaleMinus.getElement().click();else if(d.which>=37&&d.which<=40){var i=new e.Point;switch(d.which){case 37:i.x=-10;break;case 38:i.y=-10;break;case 39:i.x=10;break;case 40:i.y=10}this.sketcher.historyManager.pushUndo(new c.MoveAction(this.sketcher.molecule.atoms,i))}else if(d.which==187||d.which==189||d.which==61||d.which==109)this.sketcher.hovering!=null&&this.sketcher.hovering instanceof e.Atom&&this.sketcher.historyManager.pushUndo(new c.ChangeChargeAction(this.sketcher.hovering,d.which==187||d.which==61?1:-1));else if(d.which==8||d.which==127)this.sketcher.stateManager.STATE_ERASE.handleDelete();else if(d.which>=48&&d.which<=57){if(this.sketcher.hovering!=null){var j=d.which-48,k=[],l=[];if(this.sketcher.hovering instanceof e.Atom)if(b.SHIFT){if(j>2&&j<9){var n=this.sketcher.molecule.getAngles(this.sketcher.hovering),o=3*h.PI/2;n.length!=0&&(o=a.angleBetweenLargest(n).angle);var p=this.sketcher.stateManager.STATE_NEW_RING.getRing(this.sketcher.hovering,j,this.sketcher.specs.bondLength,o,!1);g(p[0],this.sketcher.molecule.atoms)==-1&&k.push(p[0]),this.bondExists(this.sketcher.hovering,p[0])||l.push(new e.Bond(this.sketcher.hovering,p[0]));for(var q=1,r=p.length;q<r;q++)g(p[q],this.sketcher.molecule.atoms)==-1&&k.push(p[q]),this.bondExists(p[q-1],p[q])||l.push(new e.Bond(p[q-1],p[q]));this.bondExists(p[p.length-1],this.sketcher.hovering)||l.push(new e.Bond(p[p.length-1],this.sketcher.hovering))}}else{j==0&&(j=10);var s=new e.Point(this.sketcher.hovering.x,this.sketcher.hovering.y),t=this.getOptimumAngle(this.sketcher.hovering),u=this.sketcher.hovering;for(var q=0;q<j;q++){var v=t+(q%2==1?h.PI/3:0);s.x+=this.sketcher.specs.bondLength*h.cos(v),s.y-=this.sketcher.specs.bondLength*h.sin(v);var w=new e.Atom("C",s.x,s.y),x=Infinity,y=null;for(var z=0,A=this.sketcher.molecule.atoms.length;z<A;z++){var B=this.sketcher.molecule.atoms[z].distance(w);B<x&&(x=B,y=this.sketcher.molecule.atoms[z])}x<5?w=y:k.push(w),this.bondExists(u,w)||l.push(new e.Bond(u,w)),u=w}}else if(this.sketcher.hovering instanceof e.Bond)if(b.SHIFT){if(j>2&&j<9){var p=this.sketcher.stateManager.STATE_NEW_RING.getOptimalRing(this.sketcher.hovering,j),C=this.sketcher.hovering.a2,D=this.sketcher.hovering.a1;p[0]==this.sketcher.hovering.a1&&(C=this.sketcher.hovering.a1,D=this.sketcher.hovering.a2),g(p[1],this.sketcher.molecule.atoms)==-1&&k.push(p[1]),this.bondExists(C,p[1])||l.push(new e.Bond(C,p[1]));for(var q=2,r=p.length;q<r;q++)g(p[q],this.sketcher.molecule.atoms)==-1&&k.push(p[q]),this.bondExists(p[q-1],p[q])||l.push(new e.Bond(p[q-1],p[q]));this.bondExists(p[p.length-1],D)||l.push(new e.Bond(p[p.length-1],D))}}else j>0&&j<4&&this.sketcher.historyManager.pushUndo(new c.ChangeBondAction(this.sketcher.hovering,j,e.Bond.STEREO_NONE));(k.length!=0||l.length!=0)&&this.sketcher.historyManager.pushUndo(new c.AddAction(this.sketcher.molecule,k,l))}}else if(d.which>=65&&d.which<=90&&this.sketcher.hovering!=null)if(this.sketcher.hovering instanceof e.Atom){var E=String.fromCharCode(d.which),F=null,G=null,H=!1;for(var z=0,A=f.length;z<A;z++)if(this.sketcher.hovering.label.charAt(0)==E)f[z]==this.sketcher.hovering.label?H=!0:f[z].charAt(0)==E&&(H&&G==null?G=f[z]:F==null&&(F=f[z]));else if(f[z].charAt(0)==E){F=f[z];break}var w="C";G!=null?w=G:F!=null&&(w=F),this.sketcher.historyManager.pushUndo(new c.ChangeLabelAction(this.sketcher.hovering,w))}else this.sketcher.hovering instanceof e.Bond&&d.which==70&&this.sketcher.historyManager.pushUndo(new c.FlipBondAction(this.sketcher.hovering));this.innerkeydown&&this.innerkeydown(d)},d._State.prototype.keypress=function(a){this.innerkeypress&&this.innerkeypress(a)},d._State.prototype.keyup=function(a){b.CANVAS_DRAGGING==this.sketcher&&this.sketcher.lastPoint!=null&&(a.p=this.sketcher.lastPoint,this.sketcher.drag(a)),this.innerkeyup&&this.innerkeyup(a)}}(ChemDoodle.math,ChemDoodle.monitor,ChemDoodle.sketcher.actions,ChemDoodle.sketcher.states,ChemDoodle.structures,ChemDoodle.SYMBOLS,jQuery.inArray,Math),function(a,b){b.ChargeState=function(a){return this.setup(a),this.delta=1,!0},b.ChargeState.prototype=new b._State,b.ChargeState.prototype.innermouseup=function(b){this.sketcher.hovering!=null&&this.sketcher.historyManager.pushUndo(new a.ChangeChargeAction(this.sketcher.hovering,this.delta))},b.ChargeState.prototype.innermousemove=function(a){this.findHoveredObject(a,!0,!1)}}(ChemDoodle.sketcher.actions,ChemDoodle.sketcher.states),function(a,b,c,d){b.EraseState=function(a){return this.setup(a),!0},b.EraseState.prototype=new b._State,b.EraseState.prototype.handleDelete=function(){if(this.sketcher.hovering!=null){if(this.sketcher.hovering instanceof c.Atom){for(var b=0,e=this.sketcher.molecule.atoms.length;b<e;b++)this.sketcher.molecule.atoms[b].visited=!1;var f=[],g=[];this.sketcher.hovering.visited=!0;for(var b=0,e=this.sketcher.molecule.bonds.length;b<e;b++)if(this.sketcher.molecule.bonds[b].contains(this.sketcher.hovering)){var h=[],i=[],j=new c.Queue;j.enqueue(this.sketcher.molecule.bonds[b].getNeighbor(this.sketcher.hovering));while(!j.isEmpty()){var k=j.dequeue();if(!k.visited){k.visited=!0,h.push(k);for(var l=0,m=this.sketcher.molecule.bonds.length;l<m;l++)this.sketcher.molecule.bonds[l].contains(k)&&!this.sketcher.molecule.bonds[l].getNeighbor(k).visited&&(j.enqueue(this.sketcher.molecule.bonds[l].getNeighbor(k)),i.push(this.sketcher.molecule.bonds[l]))}}f.push(h),g.push(i)}var n=-1,o=-1;for(var b=0,e=f.length;b<e;b++)f[b].length>n&&(o=b,n=f[b].length);if(o>-1){var p=[],q=[];for(var r=0,s=this.sketcher.molecule.atoms.length;r<s;r++)d(this.sketcher.molecule.atoms[r],f[o])==-1&&p.push(this.sketcher.molecule.atoms[r]);for(var r=0,s=this.sketcher.molecule.bonds.length;r<s;r++)d(this.sketcher.molecule.bonds[r],g[o])==-1&&q.push(this.sketcher.molecule.bonds[r]);this.sketcher.historyManager.pushUndo(new a.DeleteAction(this.sketcher.molecule,p,q))}else this.sketcher.historyManager.pushUndo(new a.ClearAction(this.sketcher))}else if(this.sketcher.hovering instanceof c.Bond&&this.sketcher.hovering.ring!=null){var q=[];q[0]=this.sketcher.hovering,this.sketcher.historyManager.pushUndo(new a.DeleteAction(this.sketcher.molecule,null,q))}this.sketcher.repaint()}},b.EraseState.prototype.innermouseup=function(a){this.handleDelete()},b.EraseState.prototype.innermousemove=function(a){this.findHoveredObject(a,!0,!0)}}(ChemDoodle.sketcher.actions,ChemDoodle.sketcher.states,ChemDoodle.structures,jQuery.inArray),function(a,b){b.LabelState=function(a){return this.setup(a),this.label="C",!0},b.LabelState.prototype=new b._State,b.LabelState.prototype.innermouseup=function(b){this.sketcher.hovering!=null&&this.sketcher.historyManager.pushUndo(new a.ChangeLabelAction(this.sketcher.hovering,this.label))},b.LabelState.prototype.innermousemove=function(a){this.findHoveredObject(a,!0,!1)}}(ChemDoodle.sketcher.actions,ChemDoodle.sketcher.states),function(a,b){b.LonePairState=function(a){return this.setup(a),this.delta=1,!0},b.LonePairState.prototype=new b._State,b.LonePairState.prototype.innermouseup=function(b){if(this.delta<0&&this.sketcher.hovering.numLonePair<1)return;this.sketcher.hovering!=null&&this.sketcher.historyManager.pushUndo(new a.ChangeLonePairAction(this.sketcher.hovering,this.delta))},b.LonePairState.prototype.innermousemove=function(a){this.findHoveredObject(a,!0,!1)}}(ChemDoodle.sketcher.actions,ChemDoodle.sketcher.states),function(a,b,c){b.MoveState=function(a){return this.setup(a),this.action=null,!0},b.MoveState.prototype=new b._State,b.MoveState.prototype.innerdrag=function(b){if(this.sketcher.hovering!=null)if(this.action==null){var d=[],e=new c.Point(b.p.x,b.p.y);this.sketcher.hovering instanceof c.Atom?(e.sub(this.sketcher.hovering),d[0]=this.sketcher.hovering):this.sketcher.hovering instanceof c.Bond&&(e.sub(this.sketcher.lastPoint),d[0]=this.sketcher.hovering.a1,d[1]=this.sketcher.hovering.a2),this.action=new a.MoveAction(d,e),this.sketcher.historyManager.pushUndo(this.action)}else{var e=new c.Point(b.p.x,b.p.y);e.sub(this.sketcher.lastPoint),this.action.dif.add(e);for(var f=0,g=this.action.as.length;f<g;f++)this.action.as[f].add(e);this.sketcher.molecule.check(),this.sketcher.repaint()}},b.MoveState.prototype.innermousemove=function(a){this.findHoveredObject(a,!0,!0)},b.MoveState.prototype.innermouseup=function(a){this.action=null}}(ChemDoodle.sketcher.actions,ChemDoodle.sketcher.states,ChemDoodle.structures),function(a,b,c,d,e){c.NewBondState=function(a){return this.setup(a),this.bondOrder=1,this.stereo=d.Bond.STEREO_NONE,!0},c.NewBondState.prototype=new c._State,c.NewBondState.prototype.incrementBondOrder=function(a){this.bondOrder==1&&this.stereo==d.Bond.STEREO_NONE?this.sketcher.historyManager.pushUndo(new b.ChangeBondAction(a)):a.bondOrder==this.bondOrder&&a.stereo==this.stereo?(a.bondOrder==1&&a.stereo!=d.Bond.STEREO_NONE||a.bondOrder==2&&a.stereo==d.Bond.STEREO_NONE)&&this.sketcher.historyManager.pushUndo(new b.FlipBondAction(a)):this.sketcher.historyManager.pushUndo(new b.ChangeBondAction(a,this.bondOrder,this.stereo))},c.NewBondState.prototype.innerdrag=function(b){if(this.sketcher.hovering instanceof d.Atom){if(b.p.distance(this.sketcher.hovering)<15){var c=this.getOptimumAngle(this.sketcher.hovering),f=this.sketcher.hovering.x+this.sketcher.specs.bondLength*e.cos(c),g=this.sketcher.hovering.y-this.sketcher.specs.bondLength*e.sin(c);this.sketcher.tempAtom=new d.Atom("C",f,g,0)}else if(a.ALT&&a.SHIFT)this.sketcher.tempAtom=new d.Atom("C",b.p.x,b.p.y,0);else{var c=this.sketcher.hovering.angle(b.p),h=this.sketcher.hovering.distance(b.p);a.SHIFT||(h=this.sketcher.specs.bondLength);if(!a.ALT){var i=e.floor((c+e.PI/12)/(e.PI/6));c=i*e.PI/6}this.sketcher.tempAtom=new d.Atom("C",this.sketcher.hovering.x+h*e.cos(c),this.sketcher.hovering.y-h*e.sin(c),0)}for(var j=0,k=this.sketcher.molecule.atoms.length;j<k;j++)this.sketcher.molecule.atoms[j].distance(this.sketcher.tempAtom)<5&&(this.sketcher.tempAtom.x=this.sketcher.molecule.atoms[j].x,this.sketcher.tempAtom.y=this.sketcher.molecule.atoms[j].y,this.sketcher.tempAtom.isOverlap=!0);this.sketcher.repaint()}},c.NewBondState.prototype.innermousedown=function(a){this.sketcher.hovering instanceof d.Atom?(this.sketcher.hovering.isHover=!1,this.sketcher.hovering.isSelected=!0,this.drag(a)):this.sketcher.hovering instanceof d.Bond&&(this.sketcher.hovering.isHover=!1,this.incrementBondOrder(this.sketcher.hovering),this.sketcher.molecule.check(),this.sketcher.repaint())},c.NewBondState.prototype.innermouseup=function(a){if(this.sketcher.tempAtom!=null&&this.sketcher.hovering!=null){var c=[],e=[],f=!0;if(this.sketcher.tempAtom.isOverlap){for(var g=0,h=this.sketcher.molecule.atoms.length;g<h;g++)this.sketcher.molecule.atoms[g].distance(this.sketcher.tempAtom)<5&&(this.sketcher.tempAtom=this.sketcher.molecule.atoms[g]);var i=this.getBond(this.sketcher.hovering,this.sketcher.tempAtom);i!=null&&(this.incrementBondOrder(i),f=!1)}else c.push(this.sketcher.tempAtom);f&&(e[0]=new d.Bond(this.sketcher.hovering,this.sketcher.tempAtom,this.bondOrder),e[0].stereo=this.stereo,this.sketcher.historyManager.pushUndo(new b.AddAction(this.sketcher.molecule,c,e)))}this.sketcher.tempAtom=null,this.sketcher.isMobile||this.mousemove(a)},c.NewBondState.prototype.innermousemove=function(a){if(this.sketcher.tempAtom!=null)return;this.findHoveredObject(a,!0,!0)}}(ChemDoodle.monitor,ChemDoodle.sketcher.actions,ChemDoodle.sketcher.states,ChemDoodle.structures,Math),function(a,b,c,d,e,f,g){d.NewRingState=function(a){return this.setup(a),this.numSides=6,this.unsaturated=!1,!0},d.NewRingState.prototype=new d._State,d.NewRingState.prototype.getRing=function(a,b,c,d,f){var h=g.PI-2*g.PI/b;d+=h/2;var i=[];for(var j=0;j<b-1;j++){var k=j==0?new e.Atom("C",a.x,a.y):new e.Atom("C",i[i.length-1].x,i[i.length-1].y);k.x+=c*g.cos(d),k.y-=c*g.sin(d),i.push(k),d+=g.PI+h}for(var l=0,n=this.sketcher.molecule.atoms.length;l<n;l++)this.sketcher.molecule.atoms[l].isOverlap=!1;for(var j=0,o=i.length;j<o;j++){var p=Infinity,q=null;for(var l=0,n=this.sketcher.molecule.atoms.length;l<n;l++){var r=this.sketcher.molecule.atoms[l].distance(i[j]);r<p&&(p=r,q=this.sketcher.molecule.atoms[l])}p<5&&(i[j]=q,f&&(q.isOverlap=!0))}return i},d.NewRingState.prototype.getOptimalRing=function(a,b){var c=g.PI/2-g.PI/b,d=a.a1.distance(a.a2),e=this.getRing(a.a1,b,d,a.a1.angle(a.a2)-c,!1),f=this.getRing(a.a2,b,d,a.a2.angle(a.a1)-c,!1),h=0,i=0;for(var j=1,k=e.length;j<k;j++)for(var l=0,n=this.sketcher.molecule.atoms.length;l<n;l++){var o=this.sketcher.molecule.atoms[l].distance(e[j]),p=this.sketcher.molecule.atoms[l].distance(f[j]);h+=g.min(1e8,1/(o*o)),i+=g.min(1e8,1/(p*p))}return h<i?e:f},d.NewRingState.prototype.innerdrag=function(c){if(this.sketcher.hovering instanceof e.Atom){var d=0,h=0;if(c.p.distance(this.sketcher.hovering)<15){var i=this.sketcher.molecule.getAngles(this.sketcher.hovering);i.length==0?d=3*g.PI/2:d=a.angleBetweenLargest(i).angle,h=this.sketcher.specs.bondLength}else{d=this.sketcher.hovering.angle(c.p),h=this.sketcher.hovering.distance(c.p);if(!b.ALT||!b.SHIFT){b.SHIFT||(h=this.sketcher.specs.bondLength);if(!b.ALT){var j=g.floor((d+g.PI/12)/(g.PI/6));d=j*g.PI/6}}}this.sketcher.tempRing=this.getRing(this.sketcher.hovering,this.numSides,h,d,!0),this.sketcher.repaint()}else if(this.sketcher.hovering instanceof e.Bond){var k=a.distanceFromPointToLineInclusive(c.p,this.sketcher.hovering.a1,this.sketcher.hovering.a2),l=null;if(k!=-1&&k<=7)l=this.getOptimalRing(this.sketcher.hovering,this.numSides);else{var n=g.PI/2-g.PI/this.numSides,o=this.sketcher.hovering.a1.distance(this.sketcher.hovering.a2),p=this.getRing(this.sketcher.hovering.a1,this.numSides,o,this.sketcher.hovering.a1.angle(this.sketcher.hovering.a2)-n,!1),q=this.getRing(this.sketcher.hovering.a2,this.numSides,o,this.sketcher.hovering.a2.angle(this.sketcher.hovering.a1)-n,!1),r=new e.Point,s=new e.Point;for(var t=1,u=p.length;t<u;t++)r.add(p[t]),s.add(q[t]);r.x/=p.length-1,r.y/=p.length-1,s.x/=q.length-1,s.y/=q.length-1;var v=r.distance(c.p),w=s.distance(c.p);l=q,v<w&&(l=p)}for(var x=1,y=l.length;x<y;x++)f(l[x],this.sketcher.molecule.atoms)!=-1&&(l[x].isOverlap=!0);this.sketcher.tempRing=l,this.sketcher.repaint()}},d.NewRingState.prototype.innermousedown=function(a){this.sketcher.hovering!=null&&(this.sketcher.hovering.isHover=!1,this.sketcher.hovering.isSelected=!0,this.drag(a))},d.NewRingState.prototype.innermouseup=function(a){if(this.sketcher.tempRing!=null&&this.sketcher.hovering!=null){var b=[],d=[];if(this.sketcher.hovering instanceof e.Atom){f(this.sketcher.tempRing[0],this.sketcher.molecule.atoms)==-1&&b.push(this.sketcher.tempRing[0]),this.bondExists(this.sketcher.hovering,this.sketcher.tempRing[0])||d.push(new e.Bond(this.sketcher.hovering,this.sketcher.tempRing[0]));for(var g=1,h=this.sketcher.tempRing.length;g<h;g++)f(this.sketcher.tempRing[g],this.sketcher.molecule.atoms)==-1&&b.push(this.sketcher.tempRing[g]),this.bondExists(this.sketcher.tempRing[g-1],this.sketcher.tempRing[g])||d.push(new e.Bond(this.sketcher.tempRing[g-1],this.sketcher.tempRing[g],g%2==1&&this.unsaturated?2:1));this.bondExists(this.sketcher.tempRing[this.sketcher.tempRing.length-1],this.sketcher.hovering)||d.push(new e.Bond(this.sketcher.tempRing[this.sketcher.tempRing.length-1],this.sketcher.hovering,this.unsaturated?2:1))}else if(this.sketcher.hovering instanceof e.Bond){var i=this.sketcher.hovering.a2,j=this.sketcher.hovering.a1;this.sketcher.tempRing[0]==this.sketcher.hovering.a1&&(i=this.sketcher.hovering.a1,j=this.sketcher.hovering.a2),f(this.sketcher.tempRing[1],this.sketcher.molecule.atoms)==-1&&b.push(this.sketcher.tempRing[1]),this.bondExists(i,this.sketcher.tempRing[1])||d.push(new e.Bond(i,this.sketcher.tempRing[1]));for(var g=2,h=this.sketcher.tempRing.length;g<h;g++)f(this.sketcher.tempRing[g],this.sketcher.molecule.atoms)==-1&&b.push(this.sketcher.tempRing[g]),this.bondExists(this.sketcher.tempRing[g-1],this.sketcher.tempRing[g])||d.push(new e.Bond(this.sketcher.tempRing[g-1],this.sketcher.tempRing[g],g%2==0&&this.unsaturated?2:1));this.bondExists(this.sketcher.tempRing[this.sketcher.tempRing.length-1],j)||d.push(new e.Bond(this.sketcher.tempRing[this.sketcher.tempRing.length-1],j))}(b.length!=0||d.length!=0)&&this.sketcher.historyManager.pushUndo(new c.AddAction(this.sketcher.molecule,b,d))}for(var k=0,l=this.sketcher.molecule.atoms.length;k<l;k++)this.sketcher.molecule.atoms[k].isOverlap=!1;this.sketcher.tempRing=null,this.sketcher.isMobile||this.mousemove(a)},d.NewRingState.prototype.innermousemove=function(a){if(this.sketcher.tempAtom!=null)return;this.findHoveredObject(a,!0,!0)}}(ChemDoodle.math,ChemDoodle.monitor,ChemDoodle.sketcher.actions,ChemDoodle.sketcher.states,ChemDoodle.structures,jQuery.inArray,Math),function(a){a.StateManager=function(b){return this.STATE_NEW_BOND=new a.NewBondState(b),this.STATE_NEW_RING=new a.NewRingState(b),this.STATE_CHARGE=new a.ChargeState(b),this.STATE_LONE_PAIR=new a.LonePairState(b),this.STATE_MOVE=new a.MoveState(b),this.STATE_ERASE=new a.EraseState(b),this.STATE_LABEL=new a.LabelState(b),this.currentState=this.STATE_NEW_BOND,!0}}(ChemDoodle.sketcher.states),function(a,b){a.Button=function(a,b,c,d,e){return this.id=a,this.iconPath=b,this.icon=c,this.toggle=!1,this.tooltip=d?d:"",this.func=e?e:null,!0},a.Button.prototype.getElement=function(){return b("#"+this.id)},a.Button.prototype.getSource=function(a){var b=[];return this.toggle?(b.push('<input type="radio" name="'),b.push(a),b.push('" id="'),b.push(this.id),b.push('"><label for="'),b.push(this.id),b.push('"><img id="'),b.push(this.id),b.push('_icon" title="'),b.push(this.tooltip),b.push('" src="'),b.push(this.iconPath),b.push(this.icon),b.push('.png"></label>')):(b.push('<button id="'),b.push(this.id),b.push('" onclick="return false;"><img title="'),b.push(this.tooltip),b.push('" width="20" height="20" src="'),b.push(this.iconPath),b.push(this.icon),b.push('.png"></button>')),b.join("")},a.Button.prototype.setup=function(a){(!this.toggle||a)&&this.getElement().button(),this.getElement().click(this.func)},a.Button.prototype.disable=function(){var a=this.getElement();a.mouseout(),a.button("disable")},a.Button.prototype.enable=function(){this.getElement().button("enable")},a.Button.prototype.select=function(){var a=this.getElement();a.attr("checked",!0),a.button("refresh")}}(ChemDoodle.sketcher.gui.desktop,jQuery),function(a,b){a.ButtonSet=function(a){return this.id=a,this.buttons=[],this.buttonGroup="main_group",this.toggle=!0,!0},a.ButtonSet.prototype.getElement=function(){return b("#"+this.id)},a.ButtonSet.prototype.getSource=function(){var a=[];a.push('<span id="'),a.push(this.id),a.push('">');for(var b=0,c=this.buttons.length;b<c;b++)this.toggle&&(this.buttons[b].toggle=!0),a.push(this.buttons[b].getSource(this.buttonGroup));return this.dropDown!=null&&a.push(this.dropDown.getButtonSource()),a.push("</span>"),this.dropDown!=null&&a.push(this.dropDown.getHiddenSource()),a.join("")},a.ButtonSet.prototype.setup=function(){this.getElement().buttonset();for(var a=0,b=this.buttons.length;a<b;a++)this.buttons[a].setup(!1);this.dropDown!=null&&this.dropDown.setup()},a.ButtonSet.prototype.addDropDown=function(b,c){this.dropDown=new a.DropDown(this.id+"_dd",c,b,this.buttons[this.buttons.length-1])}}(ChemDoodle.sketcher.gui.desktop,jQuery),function(a,b,c){a.Dialog=function(a,b){return this.id=a,this.title=b?b:"Information",this.buttons=null,this.message=null,this.afterMessage=null,this.includeTextArea=!1,!0},a.Dialog.prototype.getElement=function(){return b("#"+this.id)},a.Dialog.prototype.getTextArea=function(){return b("#"+this.id+"_ta")},a.Dialog.prototype.setup=function(){var a=[];a.push('<div style="font-size:12px;" id="'),a.push(this.id),a.push('" title="'),a.push(this.title),a.push('">'),this.message!=null&&(a.push("<p>"),a.push(this.message),a.push("</p>")),this.includeTextArea&&(a.push('<textarea style="font-family:\'Courier New\';" id="'),a.push(this.id),a.push('_ta" cols="55" rows="10"></textarea>')),this.afterMessage!=null&&(a.push("<p>"),a.push(this.afterMessage),a.push("</p>")),a.push("</div>"),c.writeln(a.join(""));var b=this;this.getElement().dialog({autoOpen:!1,width:435,buttons:b.buttons})}}(ChemDoodle.sketcher.gui.desktop,jQuery,document),function(a,b,c,d){b.MolGrabberDialog=function(a){return this.id=a,this.title="MolGrabber",this.buttons=null,this.message=null,this.afterMessage=null,this.includeTextArea=!1,!0},b.MolGrabberDialog.prototype=new b.Dialog,b.MolGrabberDialog.prototype.setup=function(){var a=[];a.push('<div style="font-size:12px;text-align:center;" id="'),a.push(this.id),a.push('" title="'),a.push(this.title),a.push('">'),this.message!=null&&(a.push("<p>"),a.push(this.message),a.push("</p>")),d.writeln(a.join("")),this.canvas=new ChemDoodle.MolGrabberCanvas(this.id+"_mg",200,200),a=[],this.afterMessage!=null&&(a.push("<p>"),a.push(this.afterMessage),a.push("</p>")),a.push("</div>"),d.writeln(a.join(""));var b=this;this.getElement().dialog({autoOpen:!1,width:250,buttons:b.buttons})}}(ChemDoodle,ChemDoodle.sketcher.gui.desktop,jQuery,document),function(a,b,c,d){b.PeriodicTableDialog=function(a){return this.id=a,this.title="Periodic Table",this.buttons=null,this.message=null,this.afterMessage=null,this.includeTextArea=!1,!0},b.PeriodicTableDialog.prototype=new b.Dialog,b.PeriodicTableDialog.prototype.setup=function(){var a=[];a.push('<div style="text-align:center;" id="'),a.push(this.id),a.push('" title="'),a.push(this.title),a.push('">'),d.writeln(a.join("")),this.canvas=new ChemDoodle.PeriodicTableCanvas(this.id+"_pt",20),d.writeln("</div>");var b=this;this.getElement().dialog({autoOpen:!1,width:400,buttons:b.buttons})}}(ChemDoodle,ChemDoodle.sketcher.gui.desktop,jQuery,document),function(a,b,c,d){b.SaveFileDialog=function(a,b){return this.id=a,this.sketcher=b,this.title="Save File",this.buttons=null,this.afterMessage=null,this.includeTextArea=!1,!0},b.SaveFileDialog.prototype=new b.Dialog,b.SaveFileDialog.prototype.clear=function(){c("#"+this.id+"_link").html("The file link will appear here.")},b.SaveFileDialog.prototype.setup=function(){var a=[];a.push('<div style="font-size:12px;" id="'),a.push(this.id),a.push('" title="'),a.push(this.title),a.push('">'),a.push("<p>Select the file format to save your structure to and click on the <strong>Generate File</strong> button.</p>"),a.push('<select id="'),a.push(this.id),a.push('_select">'),a.push('<option value="sk2">ACD/ChemSketch Document {sk2}'),a.push('<option value="ros">Beilstein ROSDAL {ros}'),a.push('<option value="cdx">Cambridgesoft ChemDraw Exchange {cdx}'),a.push('<option value="cdxml">Cambridgesoft ChemDraw XML {cdxml}'),a.push('<option value="mrv">ChemAxon Marvin Document {mrv}'),a.push('<option value="cml">Chemical Markup Language {cml}'),a.push('<option value="smiles">Daylight SMILES {smiles}'),a.push('<option value="icl" selected>iChemLabs ChemDoodle Document {icl}'),a.push('<option value="inchi">IUPAC InChI {inchi}'),a.push('<option value="jdx">IUPAC JCAMP-DX {jdx}'),a.push('<option value="skc">MDL ISIS Sketch {skc}'),a.push('<option value="tgf">MDL ISIS Sketch Transportable Graphics File {tgf}'),a.push('<option value="mol">MDL MOLFile {mol}'),a.push('<option value="sdf">MDL SDFile {sdf}'),a.push('<option value="jme">Molinspiration JME String {jme}'),a.push('<option value="pdb">RCSB Protein Data Bank {pdb}'),a.push('<option value="mmd">Schr&ouml;dinger Macromodel {mmd}'),a.push('<option value="mae">Schr&ouml;dinger Maestro {mae}'),a.push('<option value="smd">Standard Molecular Data {smd}'),a.push('<option value="mol2">Tripos Mol2 {mol2}'),a.push('<option value="sln">Tripos SYBYL SLN {sln}'),a.push('<option value="xyz">XYZ {xyz}'),a.push("</select>"),a.push('<button id="'),a.push(this.id),a.push('_button">'),a.push("Generate File</button>"),a.push("<p>When the file is written, a link will appear in the red-bordered box below, right-click on the link and choose the browser's <strong>Save As...</strong> function to save the file to your computer.</p>"),a.push('<div style="width:100%;height:30px;border:1px solid #c10000;text-align:center;" id="'),a.push(this.id),a.push('_link">The file link will appear here.</div>'),a.push('<p><a href="http://www.chemdoodle.com" target="_blank">How do I use these files?</a></p>'),a.push("</div>"),d.writeln(a.join(""));var b=this;c("#"+this.id+"_button").click(function(){c("#"+b.id+"_link").html("Generating file, please wait..."),ChemDoodle.iChemLabs.saveFile(b.sketcher.molecule,c("#"+b.id+"_select").val(),function(a){c("#"+b.id+"_link").html('<a href="'+a+'"><span style="text-decoration:underline;">File is generated. Right-click on this link and Save As...</span></a>')})}),this.getElement().dialog({autoOpen:!1,width:435,buttons:b.buttons})}}(ChemDoodle,ChemDoodle.sketcher.gui.desktop,jQuery,document),function(a,b,c,d,e){c.DialogManager=function(c){c.useServices?this.saveDialog=new d.SaveFileDialog(c.id+"_save_dialog",c):(this.saveDialog=new d.Dialog(c.id+"_save_dialog","Save Molecule"),this.saveDialog.message="Copy and paste the content of the textarea into a file and save it with the extension <strong>.mol</strong>.",this.saveDialog.includeTextArea=!0,this.saveDialog.afterMessage='<a href="http://www.chemdoodle.com" target="_blank">How do I use MOLFiles?</a>'),this.saveDialog.setup(),this.loadDialog=new d.Dialog(c.id+"_load_dialog","Load Molecule"),this.loadDialog.message="Copy and paste the contents of a MOLFile (extension <strong>.mol</strong>) in the textarea below and then press the <strong>Load</strong> button.",this.loadDialog.includeTextArea=!0,this.loadDialog.afterMessage='<a href="http://www.chemdoodle.com" target="_blank">Where do I get MOLFiles?</a>';var f=this;return this.loadDialog.buttons={Load:function(){e(this).dialog("close");var d=a.readMOL(f.loadDialog.getTextArea().val());d.atoms.length!=0?c.historyManager.pushUndo(new b.SwitchMoleculeAction(c,d)):alert("No chemical content was recognized.")}},this.loadDialog.setup(),this.searchDialog=new d.MolGrabberDialog(c.id+"_search_dialog"),this.searchDialog.buttons={Load:function(){e(this).dialog("close");var a=f.searchDialog.canvas.molecule;a!=null&&a.atoms.length!=0&&a!=c.molecule&&c.historyManager.pushUndo(new b.SwitchMoleculeAction(c,a))}},this.searchDialog.setup(),this.periodicTableDialog=new d.PeriodicTableDialog(c.id+"_periodicTable_dialog"),this.periodicTableDialog.buttons={Close:function(){e(this).dialog("close")}},this.periodicTableDialog.setup(),this.periodicTableDialog.canvas.click=function(a){if(this.hovered!=null){this.selected=this.hovered;var b=this.getHoveredElement();c.stateManager.currentState=c.stateManager.STATE_LABEL,c.stateManager.STATE_LABEL.label=b.symbol,this.repaint()}},this.calculateDialog=new d.Dialog(c.id+"_calculate_dialog","Calculations"),this.calculateDialog.includeTextArea=!0,this.calculateDialog.afterMessage='<a href="http://www.chemdoodle.com" target="_blank">Want more calculations?</a>',this.calculateDialog.setup(),!0}}(ChemDoodle,ChemDoodle.sketcher.actions,ChemDoodle.sketcher.gui,ChemDoodle.sketcher.gui.desktop,jQuery),function(a,b,c){a.DropDown=function(b,c,d,e){return this.id=b,this.iconPath=c,this.tooltip=d,this.dummy=e,this.buttonSet=new a.ButtonSet(b+"_set"),this.buttonSet.buttonGroup=d,this.defaultButton=null,!0},a.DropDown.prototype.getButtonSource=function(){var a=[];return a.push('<button id="'),a.push(this.id),a.push('" onclick="return false;"><img title="'),a.push(this.tooltip),a.push('" src="'),a.push(this.iconPath),a.push('arrowDown.png"></button>'),a.join("")},a.DropDown.prototype.getHiddenSource=function(){var a=[];return a.push('<div style="display:none;position:absolute;z-index:10;border:1px #C1C1C1 solid;background:#F5F5F5;padding:5px;border-bottom-left-radius:5px;-moz-border-radius-bottomleft:5px;border-bottom-right-radius:5px;-moz-border-radius-bottomright:5px;" id="'),a.push(this.id),a.push('_hidden">'),a.push(this.buttonSet.getSource()),a.push("</div>"),a.join("")},a.DropDown.prototype.setup=function(){this.defaultButton==null&&(this.defaultButton=this.buttonSet.buttons[0]);var a="#"+this.id;b(a).button(),b(a+"_hidden").hide(),b(a).click(function(){var d=b(a+"_hidden");return d.show().position({my:"center top",at:"center bottom",of:this,collision:"fit"}),b(c).one("click",function(){d.hide()}),!1}),this.buttonSet.setup();var d=this;b.each(this.buttonSet.buttons,function(a,b){d.buttonSet.buttons[a].getElement().click(function(){d.dummy.absorb(d.buttonSet.buttons[a]),d.dummy.select(),d.dummy.func()})}),d.dummy.absorb(this.defaultButton),this.defaultButton.select()}}(ChemDoodle.sketcher.gui.desktop,jQuery,document),function(a,b){a.DummyButton=function(a,b,c,d){return this.id=a,this.iconPath=b,this.icon=c,this.toggle=!1,this.tooltip=d?d:"",this.func=null,!0},a.DummyButton.prototype=new a.Button,a.DummyButton.prototype.setup=function(){var a=this;this.getElement().click(function(){a.func()})},a.DummyButton.prototype.absorb=function(a){b("#"+this.id+"_icon").attr("src",a.iconPath+a.icon+".png"),b("#"+this.id).button("refresh"),this.func=a.func}}(ChemDoodle.sketcher.gui.desktop,jQuery),function(a,b,c,d,e,f,g,h,i){e.ToolbarManager=function(e){return this.sketcher=e,this.buttonOpen=new f.Button(e.id+"_button_open",e.iconPath,"open20","Open",function(){e.dialogManager.loadDialog.getTextArea().val(""),e.dialogManager.loadDialog.getElement().dialog("open")}),this.buttonSave=new f.Button(e.id+"_button_save",e.iconPath,"save20","Save",function(){e.useServices?e.dialogManager.saveDialog.clear():e.dialogManager.saveDialog.getTextArea().val(a.writeMOL(e.molecule)),e.dialogManager.saveDialog.getElement().dialog("open")}),this.buttonSearch=new f.Button(e.id+"_button_search",e.iconPath,"search20","Search",function(){e.dialogManager.searchDialog.getElement().dialog("open")}),this.buttonCalculate=new f.Button(e.id+"_button_calculate",e.iconPath,"calculate20","Calculate",function(){b.calculate(e.molecule,["mf","mw","miw","deg_unsat","hba","hbd","pol_miller","cmr","tpsa","xlogp2"],function(a){function c(a,c,d){b.push(a),b.push(": ");for(var e=a.length+2;e<30;e++)b.push(" ");b.push(c),b.push(" "),b.push(d),b.push("\n")}var b=[];c("Molecular Formula",a.mf,""),c("Molecular Mass",a.mw,"amu"),c("Monoisotopic Mass",a.miw,"amu"),c("Degree of Unsaturation",a.deg_unsat,""),c("Hydrogen Bond Acceptors",a.hba,""),c("Hydrogen Bond Donors",a.hbd,""),c("Molecular Polarizability",a.pol_miller,"Å³"),c("Molar Refractivity",a.cmr,"cm³/mol"),c("Polar Surface Area",a.tpsa,"Å²"),c("logP",a.xlogp2,""),e.dialogManager.calculateDialog.getTextArea().val(b.join("")),e.dialogManager.calculateDialog.getElement().dialog("open")})}),this.buttonMove=new f.Button(e.id+"_button_move",e.iconPath,"move20","Move",function(){e.stateManager.currentState=e.stateManager.STATE_MOVE}),this.buttonMove.toggle=!0,this.buttonErase=new f.Button(e.id+"_button_erase",e.iconPath,"erase20","Erase",function(){e.stateManager.currentState=e.stateManager.STATE_ERASE}),this.buttonErase.toggle=!0,this.buttonClear=new f.Button(e.id+"_button_clear",e.iconPath,"clear20","Clear",function(){var a=!0;if(e.molecule.atoms.length==1){var b=e.molecule.atoms[0];b.label=="C"&&b.charge==0&&b.mass==-1&&(a=!1)}a&&e.historyManager.pushUndo(new d.ClearAction(e))}),this.buttonClean=new f.Button(e.id+"_button_clean",e.iconPath,"optimize20","Clean",function(){b.contactServer("optimize",{mol:c.toJSONDummy(e.molecule),dimension:2},function(a){var b=c.fromJSONDummy(a.mol),f=b.getCenter(),h=new g.Point(e.width/2,e.height/2);h.sub(f);for(var i=0,j=b.atoms.length;i<j;i++)b.atoms[i].add(h);e.historyManager.pushUndo(new d.ChangeCoordinatesAction(e.molecule.atoms,b.atoms))})}),this.makeScaleSet(this),this.makeHistorySet(this),this.makeLabelSet(this),this.makeBondSet(this),this.makeRingSet(this),this.makeAttributeSet(this),!0},e.ToolbarManager.prototype.write=function(){var a=[];a.push(this.buttonOpen.getSource()),a.push(this.buttonSave.getSource()),this.sketcher.useServices&&a.push(this.buttonSearch.getSource()),a.push(this.scaleSet.getSource()),a.push(this.buttonClear.getSource()),a.push(this.buttonErase.getSource("main_group")),a.push(this.buttonMove.getSource("main_group")),this.sketcher.useServices&&a.push(this.buttonClean.getSource()),a.push(this.historySet.getSource()),this.sketcher.useServices&&a.push(this.buttonCalculate.getSource()),a.push("<br>"),a.push(this.labelSet.getSource()),a.push(this.bondSet.getSource()),a.push(this.ringSet.getSource()),a.push(this.attributeSet.getSource()),a.push("<br>"),i.write(a.join(""))},e.ToolbarManager.prototype.setup=function(){this.buttonOpen.setup(),this.buttonSave.setup(),this.sketcher.useServices&&this.buttonSearch.setup(),this.scaleSet.setup(),this.buttonClear.setup(),this.buttonErase.setup(!0),this.buttonMove.setup(!0),this.sketcher.useServices&&this.buttonClean.setup(),this.historySet.setup(),this.sketcher.useServices&&this.buttonCalculate.setup(),this.labelSet.setup(),this.bondSet.setup(),this.ringSet.setup(),this.attributeSet.setup(),this.buttonSingle.select(),this.buttonUndo.disable(),this.buttonRedo.disable()},e.ToolbarManager.prototype.makeScaleSet=function(a){this.scaleSet=new f.ButtonSet(a.sketcher.id+"_buttons_scale"),this.scaleSet.toggle=!1,this.buttonScalePlus=new f.Button(a.sketcher.id+"_button_scale_plus",a.sketcher.iconPath,"zoomIn20","Increase Scale",function(){a.sketcher.specs.scale*=1.5,a.sketcher.checkScale(),a.sketcher.repaint()}),this.scaleSet.buttons.push(this.buttonScalePlus),this.buttonScaleMinus=new f.Button(a.sketcher.id+"_button_scale_minus",a.sketcher.iconPath,"zoomOut20","Decrease Scale",function(){a.sketcher.specs.scale/=1.5,a.sketcher.checkScale(),a.sketcher.repaint()}),this.scaleSet.buttons.push(this.buttonScaleMinus)},e.ToolbarManager.prototype.makeHistorySet=function(a){this.historySet=new f.ButtonSet(a.sketcher.id+"_buttons_history"),this.historySet.toggle=!1,this.buttonUndo=new f.Button(a.sketcher.id+"_button_undo",a.sketcher.iconPath,"undo20","Undo",function(){a.sketcher.historyManager.undo()}),this.historySet.buttons.push(this.buttonUndo),this.buttonRedo=new f.Button(a.sketcher.id+"_button_redo",a.sketcher.iconPath,"redo20","Redo",function(){a.sketcher.historyManager.redo()}),this.historySet.buttons.push(this.buttonRedo)},e.ToolbarManager.prototype.makeLabelSet=function(a){this.labelSet=new f.ButtonSet(a.sketcher.id+"_buttons_label"),this.buttonLabel=new f.DummyButton(a.sketcher.id+"_button_label",a.sketcher.iconPath,"Carbon","Set Label"),this.labelSet.buttons.push(this.buttonLabel),this.labelSet.addDropDown("More Labels",a.sketcher.iconPath),this.labelSet.dropDown.buttonSet.buttons.push(new f.Button(a.sketcher.id+"_button_label_h",a.sketcher.iconPath,"Hydrogen","Hydrogen",function(){a.sketcher.stateManager.currentState=a.sketcher.stateManager.STATE_LABEL,a.sketcher.stateManager.STATE_LABEL.label="H"})),this.labelSet.dropDown.buttonSet.buttons.push(new f.Button(a.sketcher.id+"_button_label_c",a.sketcher.iconPath,"Carbon","Carbon",function(){a.sketcher.stateManager.currentState=a.sketcher.stateManager.STATE_LABEL,a.sketcher.stateManager.STATE_LABEL.label="C"})),this.labelSet.dropDown.defaultButton=this.labelSet.dropDown.buttonSet.buttons[this.labelSet.dropDown.buttonSet.buttons.length-1],this.labelSet.dropDown.buttonSet.buttons.push(new f.Button(a.sketcher.id+"_button_label_n",a.sketcher.iconPath,"Nitrogen","Nitrogen",function(){a.sketcher.stateManager.currentState=a.sketcher.stateManager.STATE_LABEL,a.sketcher.stateManager.STATE_LABEL.label="N"})),this.labelSet.dropDown.buttonSet.buttons.push(new f.Button(a.sketcher.id+"_button_label_o",a.sketcher.iconPath,"Oxygen","Oxygen",function(){a.sketcher.stateManager.currentState=a.sketcher.stateManager.STATE_LABEL,a.sketcher.stateManager.STATE_LABEL.label="O"})),this.labelSet.dropDown.buttonSet.buttons.push(new f.Button(a.sketcher.id+"_button_label_f",a.sketcher.iconPath,"Fluorine","Fluorine",function(){a.sketcher.stateManager.currentState=a.sketcher.stateManager.STATE_LABEL,a.sketcher.stateManager.STATE_LABEL.label="F"})),this.labelSet.dropDown.buttonSet.buttons.push(new f.Button(a.sketcher.id+"_button_label_cl",a.sketcher.iconPath,"Chlorine","Chlorine",function(){a.sketcher.stateManager.currentState=a.sketcher.stateManager.STATE_LABEL,a.sketcher.stateManager.STATE_LABEL.label="Cl"})),this.labelSet.dropDown.buttonSet.buttons.push(new f.Button(a.sketcher.id+"_button_label_br",a.sketcher.iconPath,"Bromine","Bromine",function(){a.sketcher.stateManager.currentState=a.sketcher.stateManager.STATE_LABEL,a.sketcher.stateManager.STATE_LABEL.label="Br"})),this.labelSet.dropDown.buttonSet.buttons.push(new f.Button(a.sketcher.id+"_button_label_i",a.sketcher.iconPath,"Iodine","Iodine",function(){a.sketcher.stateManager.currentState=a.sketcher.stateManager.STATE_LABEL,a.sketcher.stateManager.STATE_LABEL.label="I"})),this.labelSet.dropDown.buttonSet.buttons.push(new f.Button(a.sketcher.id+"_button_label_p",a.sketcher.iconPath,"Phosphorus","Phosphorus",function(){a.sketcher.stateManager.currentState=a.sketcher.stateManager.STATE_LABEL,a.sketcher.stateManager.STATE_LABEL.label="P"})),this.labelSet.dropDown.buttonSet.buttons.push(new f.Button(a.sketcher.id+"_button_label_s",a.sketcher.iconPath,"Sulfur","Sulfur",function(){a.sketcher.stateManager.currentState=a.sketcher.stateManager.STATE_LABEL,a.sketcher.stateManager.STATE_LABEL.label="S"})),this.labelSet.dropDown.buttonSet.buttons.push(new f.Button(a.sketcher.id+"_button_label_pt",a.sketcher.iconPath,"periodicTable20","Choose Symbol",function(){for(var b=0,c=a.sketcher.dialogManager.periodicTableDialog.canvas.cells.length;b<c;b++){var d=a.sketcher.dialogManager.periodicTableDialog.canvas.cells[b];if(d.element.symbol==a.sketcher.stateManager.STATE_LABEL.label){a.sketcher.dialogManager.periodicTableDialog.canvas.selected=d,a.sketcher.dialogManager.periodicTableDialog.canvas.repaint();break}}a.sketcher.dialogManager.periodicTableDialog.getElement().dialog("open")}))},e.ToolbarManager.prototype.makeBondSet=function(a){this.bondSet=new f.ButtonSet(a.sketcher.id+"_buttons_bond"),this.buttonSingle=new f.Button(a.sketcher.id+"_button_bond_single",a.sketcher.iconPath,"SingleBond","Single Bond",function(){a.sketcher.stateManager.currentState=a.sketcher.stateManager.STATE_NEW_BOND,a.sketcher.stateManager.STATE_NEW_BOND.bondOrder=1,a.sketcher.stateManager.STATE_NEW_BOND.stereo=g.Bond.STEREO_NONE}),this.bondSet.buttons.push(this.buttonSingle),this.buttonRecessed=new f.Button(a.sketcher.id+"_button_bond_recessed",a.sketcher.iconPath,"RecessedBond","Recessed Bond",function(){a.sketcher.stateManager.currentState=a.sketcher.stateManager.STATE_NEW_BOND,a.sketcher.stateManager.STATE_NEW_BOND.bondOrder=1,a.sketcher.stateManager.STATE_NEW_BOND.stereo=g.Bond.STEREO_RECESSED}),this.bondSet.buttons.push(this.buttonRecessed),this.buttonProtruding=new f.Button(a.sketcher.id+"_button_bond_protruding",a.sketcher.iconPath,"ProtrudingBond","Protruding Bond",function(){a.sketcher.stateManager.currentState=a.sketcher.stateManager.STATE_NEW_BOND,a.sketcher.stateManager.STATE_NEW_BOND.bondOrder=1,a.sketcher.stateManager.STATE_NEW_BOND.stereo=g.Bond.STEREO_PROTRUDING}),this.bondSet.buttons.push(this.buttonProtruding),this.buttonDouble=new f.Button(a.sketcher.id+"_button_bond_double",a.sketcher.iconPath,"DoubleBond","Double Bond",function(){a.sketcher.stateManager.currentState=a.sketcher.stateManager.STATE_NEW_BOND,a.sketcher.stateManager.STATE_NEW_BOND.bondOrder=2,a.sketcher.stateManager.STATE_NEW_BOND.stereo=g.Bond.STEREO_NONE}),this.bondSet.buttons.push(this.buttonDouble),this.buttonBond=new f.DummyButton(a.sketcher.id+"_button_bond",a.sketcher.iconPath,"TripleBond","Other Bond"),this.bondSet.buttons.push(this.buttonBond),this.bondSet.addDropDown("More Bonds",a.sketcher.iconPath),this.bondSet.dropDown.buttonSet.buttons.push(new f.Button(a.sketcher.id+"_button_bond_triple",a.sketcher.iconPath,"TripleBond","Triple Bond",function(){a.sketcher.stateManager.currentState=a.sketcher.stateManager.STATE_NEW_BOND,a.sketcher.stateManager.STATE_NEW_BOND.bondOrder=3,a.sketcher.stateManager.STATE_NEW_BOND.stereo=g.Bond.STEREO_NONE})),this.bondSet.dropDown.defaultButton=this.bondSet.dropDown.buttonSet.buttons[this.bondSet.dropDown.buttonSet.buttons.length-1],this.bondSet.dropDown.buttonSet.buttons.push(new f.Button(a.sketcher.id+"_button_bond_ambiguous_double",a.sketcher.iconPath,"AmbiguousDoubleBond","Ambiguous Double Bond",function(){a.sketcher.stateManager.currentState=a.sketcher.stateManager.STATE_NEW_BOND,a.sketcher.stateManager.STATE_NEW_BOND.bondOrder=2,a.sketcher.stateManager.STATE_NEW_BOND.stereo=g.Bond.STEREO_AMBIGUOUS}))},e.ToolbarManager.prototype.makeRingSet=function(a){this.ringSet=new f.ButtonSet(a.sketcher.id+"_buttons_ring"),this.buttonCyclohexane=new f.Button(a.sketcher.id+"_button_ring_cyclohexane",a.sketcher.iconPath,"Cyclohexane","Cyclohexane Ring",function(){a.sketcher.stateManager.currentState=a.sketcher.stateManager.STATE_NEW_RING,a.sketcher.stateManager.STATE_NEW_RING.numSides=6,a.sketcher.stateManager.STATE_NEW_RING.unsaturated=!1}),this.ringSet.buttons.push(this.buttonCyclohexane),this.buttonBenzene=new f.Button(a.sketcher.id+"_button_ring_benzene",a.sketcher.iconPath,"Benzene","Benzene Ring",function(){a.sketcher.stateManager.currentState=a.sketcher.stateManager.STATE_NEW_RING,a.sketcher.stateManager.STATE_NEW_RING.numSides=6,a.sketcher.stateManager.STATE_NEW_RING.unsaturated=!0}),this.ringSet.buttons.push(this.buttonBenzene),this.buttonBond=new f.DummyButton(a.sketcher.id+"_button_ring",a.sketcher.iconPath,"Cyclopentane","Other Ring"),this.ringSet.buttons.push(this.buttonBond),this.ringSet.addDropDown("More Rings",a.sketcher.iconPath),this.ringSet.dropDown.buttonSet.buttons.push(new f.Button(a.sketcher.id+"_button_ring_cyclopropane",a.sketcher.iconPath,"Cyclopropane","Cyclopropane Ring",function(){a.sketcher.stateManager.currentState=a.sketcher.stateManager.STATE_NEW_RING,a.sketcher.stateManager.STATE_NEW_RING.numSides=3,a.sketcher.stateManager.STATE_NEW_RING.unsaturated=!1})),this.ringSet.dropDown.buttonSet.buttons.push(new f.Button(a.sketcher.id+"_button_ring_cyclobutane",a.sketcher.iconPath,"Cyclobutane","Cyclobutane Ring",function(){a.sketcher.stateManager.currentState=a.sketcher.stateManager.STATE_NEW_RING,a.sketcher.stateManager.STATE_NEW_RING.numSides=4,a.sketcher.stateManager.STATE_NEW_RING.unsaturated=!1})),this.ringSet.dropDown.buttonSet.buttons.push(new f.Button(a.sketcher.id+"_button_ring_cyclopentane",a.sketcher.iconPath,"Cyclopentane","Cyclopentane Ring",function(){a.sketcher.stateManager.currentState=a.sketcher.stateManager.STATE_NEW_RING,a.sketcher.stateManager.STATE_NEW_RING.numSides=5,a.sketcher.stateManager.STATE_NEW_RING.unsaturated=!1})),this.ringSet.dropDown.defaultButton=this.ringSet.dropDown.buttonSet.buttons[this.ringSet.dropDown.buttonSet.buttons.length-1],this.ringSet.dropDown.buttonSet.buttons.push(new f.Button(a.sketcher.id+"_button_ring_cycloheptane",a.sketcher.iconPath,"Cycloheptane","Cycloheptane Ring",function(){a.sketcher.stateManager.currentState=a.sketcher.stateManager.STATE_NEW_RING,a.sketcher.stateManager.STATE_NEW_RING.numSides=7,a.sketcher.stateManager.STATE_NEW_RING.unsaturated=!1})),this.ringSet.dropDown.buttonSet.buttons.push(new f.Button(a.sketcher.id+"_button_ring_cyclooctane",a.sketcher.iconPath,"Cyclooctane","Cyclooctane Ring",function(){a.sketcher.stateManager.currentState=a.sketcher.stateManager.STATE_NEW_RING,a.sketcher.stateManager.STATE_NEW_RING.numSides=8,a.sketcher.stateManager.STATE_NEW_RING.unsaturated=!1}))},e.ToolbarManager.prototype.makeAttributeSet=function(a){this.attributeSet=new f.ButtonSet(a.sketcher.id+"_buttons_attribute"),this.buttonChargePlus=new f.Button(a.sketcher.id+"_button_attribute_charge_increment",a.sketcher.iconPath,"IncreaseCharge","Increase Charge",function(){a.sketcher.stateManager.currentState=a.sketcher.stateManager.STATE_CHARGE,a.sketcher.stateManager.STATE_CHARGE.delta=1}),this.attributeSet.buttons.push(this.buttonChargePlus),this.buttonAttribute=new f.DummyButton(a.sketcher.id+"_button_attribute",a.sketcher.iconPath,"DecreaseCharge","Other Attribute"),this.attributeSet.buttons.push(this.buttonAttribute),this.attributeSet.addDropDown("More Attributes",a.sketcher.iconPath),this.attributeSet.dropDown.buttonSet.buttons.push(new f.Button(a.sketcher.id+"_button_attribute_charge_decrement",a.sketcher.iconPath,"DecreaseCharge","Decrease Charge",function(){a.sketcher.stateManager.currentState=a.sketcher.stateManager.STATE_CHARGE,a.sketcher.stateManager.STATE_CHARGE.delta=-1})),this.attributeSet.dropDown.buttonSet.buttons.push(new f.Button(a.sketcher.id+"_button_attribute_lonePair_increment",a.sketcher.iconPath,"AddLonePair","Add Lone Pair",function(){a.sketcher.stateManager.currentState=a.sketcher.stateManager.STATE_LONE_PAIR,a.sketcher.stateManager.STATE_LONE_PAIR.delta=1})),this.attributeSet.dropDown.buttonSet.buttons.push(new f.Button(a.sketcher.id+"_button_attribute_lonePair_decrement",a.sketcher.iconPath,"RemoveLonePair","Remove Lone Pair",function(){a.sketcher.stateManager.currentState=a.sketcher.stateManager.STATE_LONE_PAIR,a.sketcher.stateManager.STATE_LONE_PAIR.delta=-1}))}}(ChemDoodle,ChemDoodle.iChemLabs,ChemDoodle.io,ChemDoodle.sketcher.actions,ChemDoodle.sketcher.gui,ChemDoodle.sketcher.gui.desktop,ChemDoodle.structures,jQuery,document),function(a,b,c,d,e,f,g){a.SketcherCanvas=function(a,b,f,h,i,j){var k=this;return this.iconPath=h,this.isMobile=i,this.useServices=j,this.id=a,this.toolbarManager=new c.gui.ToolbarManager(this),h!=null&&(this.toolbarManager.write(),e(g).load(function(){k.toolbarManager.setup()}),this.dialogManager=new c.gui.DialogManager(this)),this.stateManager=new c.states.StateManager(this),this.historyManager=new c.actions.HistoryManager(this),a&&this.create(a,b,f),this.specs.atoms_circleDiameter_2D=7,this.specs.atoms_circleBorderWidth_2D=0,this.isHelp=!1,this.helpPos=new d.Point(this.width-20,20),this.clear(),this.lastPinchScale=1,this.lastGestureRotate=0,!0},a.SketcherCanvas.prototype=new a._Canvas,a.SketcherCanvas.prototype.clear=function(){var a=new d.Molecule;a.atoms[0]=new d.Atom("C",0,0,0),this.loadMolecule(a)},a.SketcherCanvas.prototype.drawSketcherDecorations=function(a){a.save(),a.translate(this.width/2,this.height/2),a.rotate(this.specs.rotateAngle),a.scale(this.specs.scale,this.specs.scale),a.translate(-this.width/2,-this.height/2),this.hovering!=null&&this.hovering.drawDecorations(a),this.tempAtom!=null&&(a.strokeStyle="#00FF00",a.fillStyle="#00FF00",a.lineWidth=1,a.beginPath(),a.moveTo(this.hovering.x,this.hovering.y),b.contextHashTo(a,this.hovering.x,this.hovering.y,this.tempAtom.x,this.tempAtom.y,2,2),a.stroke(),a.beginPath(),a.arc(this.tempAtom.x,this.tempAtom.y,3,0,f.PI*2,!1),a.fill(),this.tempAtom.isOverlap&&(a.strokeStyle="#C10000",a.lineWidth=1.2,a.beginPath(),a.arc(this.tempAtom.x,this.tempAtom.y,7,0,f.PI*2,!1),a.stroke()));if(this.tempRing!=null){a.strokeStyle="#00FF00",a.fillStyle="#00FF00",a.lineWidth=1,a.beginPath();if(this.hovering instanceof d.Atom){a.moveTo(this.hovering.x,this.hovering.y),b.contextHashTo(a,this.hovering.x,this.hovering.y,this.tempRing[0].x,this.tempRing[0].y,2,2);for(var c=1,e=this.tempRing.length;c<e;c++)b.contextHashTo(a,this.tempRing[c-1].x,this.tempRing[c-1].y,this.tempRing[c].x,this.tempRing[c].y,2,2);b.contextHashTo(a,this.tempRing[this.tempRing.length-1].x,this.tempRing[this.tempRing.length-1].y,this.hovering.x,this.hovering.y,2,2)}else if(this.hovering instanceof d.Bond){var g=this.hovering.a2,h=this.hovering.a1;this.tempRing[0]==this.hovering.a1&&(g=this.hovering.a1,h=this.hovering.a2),a.moveTo(g.x,g.y),b.contextHashTo(a,g.x,g.y,this.tempRing[1].x,this.tempRing[1].y,2,2);for(var c=2,e=this.tempRing.length;c<e;c++)b.contextHashTo(a,this.tempRing[c-1].x,this.tempRing[c-1].y,this.tempRing[c].x,this.tempRing[c].y,2,2);b.contextHashTo(a,this.tempRing[this.tempRing.length-1].x,this.tempRing[this.tempRing.length-1].y,h.x,h.y,2,2)}a.stroke();for(var c=0,e=this.molecule.atoms.length;c<e;c++)this.molecule.atoms[c].isOverlap&&(a.strokeStyle="#C10000",a.lineWidth=1.2,a.beginPath(),a.arc(this.molecule.atoms[c].x,this.molecule.atoms[c].y,7,0,f.PI*2,!1),a.stroke())}a.restore()},a.SketcherCanvas.prototype.drawChildExtras=function(a){this.drawSketcherDecorations(a);if(!this.hideHelp){var b=a.createRadialGradient(this.width-20,20,10,this.width-20,20,2);b.addColorStop(0,"#00680F"),b.addColorStop(1,"#FFFFFF"),a.fillStyle=b,a.beginPath(),a.arc(this.helpPos.x,this.helpPos.y,10,0,f.PI*2,!1),a.fill(),this.isHelp&&(a.lineWidth=2,a.strokeStyle="black",a.stroke()),a.fillStyle=this.isHelp?"red":"black",a.textAlign="center",a.textBaseline="middle",a.font="14px sans-serif",a.fillText("?",this.helpPos.x,this.helpPos.y)}if(!this.paidToHideTrademark){var c="ChemDoodle",d=a.measureText(c).width;a.textAlign="left",a.textBaseline="bottom",a.fillStyle="rgba(0, 90, 0, 0.5)",a.fillText(c,this.width-d-18,this.height-4),a.font="8px sans-serif",a.fillText("TM",this.width-18,this.height-12)}},a.SketcherCanvas.prototype.scaleEvent=function(a){a.op=new d.Point(a.p.x,a.p.y),this.specs.scale!=1&&(a.p.x=this.width/2+(a.p.x-this.width/2)/this.specs.scale,a.p.y=this.height/2+(a.p.y-this.height/2)/this.specs.scale)},a.SketcherCanvas.prototype.checkScale=function(){this.specs.scale<.5?this.specs.scale=.5:this.specs.scale>10&&(this.specs.scale=10)},a.SketcherCanvas.prototype.click=function(a){this.scaleEvent(a),this.stateManager.currentState.click(a)},a.SketcherCanvas.prototype.rightclick=function(a){this.scaleEvent(a),this.stateManager.currentState.rightclick(a)},a.SketcherCanvas.prototype.dblclick=function(a){this.scaleEvent(a),this.stateManager.currentState.dblclick(a)},a.SketcherCanvas.prototype.mousedown=function(a){this.scaleEvent(a),this.stateManager.currentState.mousedown(a)},a.SketcherCanvas.prototype.rightmousedown=function(a){this.scaleEvent(a),this.stateManager.currentState.rightmousedown(a)},a.SketcherCanvas.prototype.mousemove=function(a){this.isHelp=!1,a.p.distance(this.helpPos)<10&&(this.isHelp=!0),this.scaleEvent(a),this.stateManager.currentState.mousemove(a)},a.SketcherCanvas.prototype.mouseout=function(a){this.scaleEvent(a),this.stateManager.currentState.mouseout(a)},a.SketcherCanvas.prototype.mouseover=function(a){this.scaleEvent(a),this.stateManager.currentState.mouseover(a)},a.SketcherCanvas.prototype.mouseup=function(a){this.scaleEvent(a),this.stateManager.currentState.mouseup(a)},a.SketcherCanvas.prototype.rightmouseup=function(a){this.scaleEvent(a),this.stateManager.currentState.rightmouseup(a)},a.SketcherCanvas.prototype.mousewheel=function(a,b){this.scaleEvent(a),this.stateManager.currentState.mousewheel(a,b)},a.SketcherCanvas.prototype.drag=function(a){this.scaleEvent(a),this.stateManager.currentState.drag(a)},a.SketcherCanvas.prototype.keydown=function(a){this.scaleEvent(a),this.stateManager.currentState.keydown(a)},a.SketcherCanvas.prototype.keypress=function(a){this.scaleEvent(a),this.stateManager.currentState.keypress(a)},a.SketcherCanvas.prototype.keyup=function(a){this.scaleEvent(a),this.stateManager.currentState.keyup(a)},a.SketcherCanvas.prototype.touchstart=function(a){if(a.originalEvent.touches&&a.originalEvent.touches.length>1){if(this.tempAtom!=null||this.tempRing!=null)this.tempAtom=null,this.tempRing=null,this.hovering=null,this.repaint();this.lastPoint=null}else this.scaleEvent(a),this.stateManager.currentState.mousemove(a),this.stateManager.currentState.mousedown(a)},a.SketcherCanvas.prototype.touchmove=function(a){this.scaleEvent(a),this.stateManager.currentState.drag(a)},a.SketcherCanvas.prototype.touchend=function(a){this.scaleEvent(a),this.stateManager.currentState.mouseup(a),this.hovering!=null&&(this.stateManager.currentState.clearHover(),this.repaint())},a.SketcherCanvas.prototype.gesturechange=function(a){a.originalEvent.scale-this.lastPinchScale!=1&&(this.specs.scale*=a.originalEvent.scale/this.lastPinchScale,this.checkScale(),this.lastPinchScale=a.originalEvent.scale);if(this.lastGestureRotate-a.originalEvent.rotation!=0){var b=(this.lastGestureRotate-a.originalEvent.rotation)/180*f.PI,e=new d.Point(this.width/2,this.height/2);if(this.parentAction==null)this.parentAction=new c.actions.RotateAction(this.molecule.atoms,b,e),this.historyManager.pushUndo(this.parentAction);else{this.parentAction.dif+=b;for(var g=0,h=this.molecule.atoms.length;g<h;g++){var i=e.distance(this.molecule.atoms[g]),j=e.angle(this.molecule.atoms[g])+b;this.molecule.atoms[g].x=e.x+i*f.cos(j),this.molecule.atoms[g].y=e.y-i*f.sin(j)}this.molecule.check()}this.lastGestureRotate=a.originalEvent.rotation}this.repaint()},a.SketcherCanvas.prototype.gestureend=function(a){this.lastPinchScale=1,this.lastGestureRotate=0,this.parentAction=null}}(ChemDoodle,ChemDoodle.extensions,ChemDoodle.sketcher,ChemDoodle.structures,jQuery,Math,window);
Ext.define("Ext.ux.RowExpander",{extend:"Ext.AbstractPlugin",alias:"plugin.rowexpander",rowBodyTpl:null,expandOnEnter:!0,expandOnDblClick:!0,selectRowOnExpand:!1,rowBodyTrSelector:".x-grid-rowbody-tr",rowBodyHiddenCls:"x-grid-row-body-hidden",rowCollapsedCls:"x-grid-row-collapsed",renderer:function(a,b,c,d,e){return e===0&&(b.tdCls="x-grid-td-expander"),'<div class="x-grid-row-expander">&#160;</div>'},constructor:function(){this.callParent(arguments);var a=this.getCmp();this.recordsExpanded={},this.rowBodyTpl||Ext.Error.raise("The 'rowBodyTpl' config is required and is not defined.");var b=Ext.create("Ext.XTemplate",this.rowBodyTpl),c=[{ftype:"rowbody",columnId:this.getHeaderId(),recordsExpanded:this.recordsExpanded,rowBodyHiddenCls:this.rowBodyHiddenCls,rowCollapsedCls:this.rowCollapsedCls,getAdditionalData:this.getRowBodyFeatureData,getRowBodyContents:function(a){return b.applyTemplate(a)}},{ftype:"rowwrap"}];a.features?a.features=c.concat(a.features):a.features=c,a.columns.unshift(this.getHeaderConfig()),a.on("afterlayout",this.onGridAfterLayout,this,{single:!0})},getHeaderId:function(){return this.headerId||(this.headerId=Ext.id()),this.headerId},getRowBodyFeatureData:function(a,b,c,d){var e=Ext.grid.feature.RowBody.prototype.getAdditionalData.apply(this,arguments),f=this.columnId;return e.rowBodyColspan=e.rowBodyColspan-1,e.rowBody=this.getRowBodyContents(a),e.rowCls=this.recordsExpanded[c.internalId]?"":this.rowCollapsedCls,e.rowBodyCls=this.recordsExpanded[c.internalId]?"":this.rowBodyHiddenCls,e[f+"-tdAttr"]=' valign="top" rowspan="2" ',d[f+"-tdAttr"]&&(e[f+"-tdAttr"]+=d[f+"-tdAttr"]),e},onGridAfterLayout:function(){var a=this.getCmp(),b,c;a.hasView?(b=a.down("gridview"),c=b.getEl(),this.expandOnEnter&&(this.keyNav=Ext.create("Ext.KeyNav",c,{enter:this.onEnter,scope:this})),this.expandOnDblClick&&b.on("itemdblclick",this.onDblClick,this),this.view=b):this.getCmp().on("afterlayout",this.onGridAfterLayout,this,{single:!0})},onEnter:function(a){var b=this.view,c=b.store,d=b.getSelectionModel(),e=d.getSelection(),f=e.length,g=0,h;for(;g<f;g++)h=c.indexOf(e[g]),this.toggleRow(h)},toggleRow:function(a){var b=this.view.getNode(a),c=Ext.get(b),d=Ext.get(c).down(this.rowBodyTrSelector),e=this.view.getRecord(b);c.hasCls(this.rowCollapsedCls)?(c.removeCls(this.rowCollapsedCls),d.removeCls(this.rowBodyHiddenCls),this.recordsExpanded[e.internalId]=!0,this.view.fireEvent("expandbody",b,e,d.dom)):(c.addCls(this.rowCollapsedCls),d.addCls(this.rowBodyHiddenCls),this.recordsExpanded[e.internalId]=!1,this.view.fireEvent("collapsebody",b,e,d.dom)),this.view.up("gridpanel").invalidateScroller()},onDblClick:function(a,b,c,d,e){this.toggleRow(c)},getHeaderConfig:function(){var a=this,b=Ext.Function.bind(a.toggleRow,a),c=a.selectRowOnExpand;return{id:this.getHeaderId(),width:24,sortable:!1,fixed:!0,draggable:!1,hideable:!1,menuDisabled:!0,cls:Ext.baseCSSPrefix+"grid-header-special",renderer:function(a,b){return b.tdCls=Ext.baseCSSPrefix+"grid-cell-special",'<div class="'+Ext.baseCSSPrefix+'grid-row-expander">&#160;</div>'},processEvent:function(a,d,e,f,g,h){if(a=="mousedown"&&h.getTarget(".x-grid-row-expander")){var i=h.getTarget(".x-grid-row");return b(i),c}}}}});
Ext.define("Ext.ux.CheckColumn",{extend:"Ext.grid.column.Column",alias:"widget.checkcolumn",constructor:function(){this.addEvents("checkchange"),this.callParent(arguments)},processEvent:function(a,b,c,d,e,f){if(a=="mousedown"||a=="keydown"&&(f.getKey()==f.ENTER||f.getKey()==f.SPACE)){var g=b.panel.store.getAt(d),h=this.dataIndex,i=!g.get(h);return g.set(h,i),this.fireEvent("checkchange",this,d,i),!1}return this.callParent(arguments)},renderer:function(a){var b=Ext.baseCSSPrefix,c=[b+"grid-checkheader"];return a&&c.push(b+"grid-checkheader-checked"),'<div class="'+c.join(" ")+'">&#160;</div>'}});
CodeMirror.defineMode("javascript",function(a,b){function g(a,b,c){return b.tokenize=c,c(a,b)}function h(a,b){var c=!1,d;while((d=a.next())!=null){if(d==b&&!c)return!1;c=!c&&d=="\\"}return c}function k(a,b,c){return i=a,j=c,b}function l(a,b){var c=a.next();if(c=='"'||c=="'")return g(a,b,m(c));if(/[\[\]{}\(\),;\:\.]/.test(c))return k(c);if(c=="0"&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),k("number","number");if(/\d/.test(c))return a.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),k("number","number");if(c=="/")return a.eat("*")?g(a,b,n):a.eat("/")?(a.skipToEnd(),k("comment","comment")):b.reAllowed?(h(a,"/"),a.eatWhile(/[gimy]/),k("regexp","string")):(a.eatWhile(f),k("operator",null,a.current()));if(c=="#")return a.skipToEnd(),k("error","error");if(f.test(c))return a.eatWhile(f),k("operator",null,a.current());a.eatWhile(/[\w\$_]/);var d=a.current(),i=e.propertyIsEnumerable(d)&&e[d];return i&&b.kwAllowed?k(i.type,i.style,d):k("variable","variable",d)}function m(a){return function(b,c){return h(b,a)||(c.tokenize=l),k("string","string")}}function n(a,b){var c=!1,d;while(d=a.next()){if(d=="/"&&c){b.tokenize=l;break}c=d=="*"}return k("comment","comment")}function p(a,b,c,d,e,f){this.indented=a,this.column=b,this.type=c,this.prev=e,this.info=f,d!=null&&(this.align=d)}function q(a,b){for(var c=a.localVars;c;c=c.next)if(c.name==b)return!0}function r(a,b,c,e,f){var g=a.cc;s.state=a,s.stream=f,s.marked=null,s.cc=g,a.lexical.hasOwnProperty("align")||(a.lexical.align=!0);for(;;){var h=g.length?g.pop():d?D:C;if(h(c,e)){while(g.length&&g[g.length-1].lex)g.pop()();return s.marked?s.marked:c=="variable"&&q(a,e)?"variable-2":b}}}function t(){for(var a=arguments.length-1;a>=0;a--)s.cc.push(arguments[a])}function u(){return t.apply(null,arguments),!0}function v(a){var b=s.state;if(b.context){s.marked="def";for(var c=b.localVars;c;c=c.next)if(c.name==a)return;b.localVars={name:a,next:b.localVars}}}function x(){s.state.context||(s.state.localVars=w),s.state.context={prev:s.state.context,vars:s.state.localVars}}function y(){s.state.localVars=s.state.context.vars,s.state.context=s.state.context.prev}function z(a,b){var c=function(){var c=s.state;c.lexical=new p(c.indented,s.stream.column(),a,null,c.lexical,b)};return c.lex=!0,c}function A(){var a=s.state;a.lexical.prev&&(a.lexical.type==")"&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function B(a){return function(c){return c==a?u():a==";"?t():u(arguments.callee)}}function C(a){return a=="var"?u(z("vardef"),L,B(";"),A):a=="keyword a"?u(z("form"),D,C,A):a=="keyword b"?u(z("form"),C,A):a=="{"?u(z("}"),K,A):a==";"?u():a=="function"?u(R):a=="for"?u(z("form"),B("("),z(")"),N,B(")"),A,C,A):a=="variable"?u(z("stat"),G):a=="switch"?u(z("form"),D,z("}","switch"),B("{"),K,A,A):a=="case"?u(D,B(":")):a=="default"?u(B(":")):a=="catch"?u(z("form"),x,B("("),S,B(")"),C,A,y):t(z("stat"),D,B(";"),A)}function D(a){return o.hasOwnProperty(a)?u(F):a=="function"?u(R):a=="keyword c"?u(E):a=="("?u(z(")"),D,B(")"),A,F):a=="operator"?u(D):a=="["?u(z("]"),J(D,"]"),A,F):a=="{"?u(z("}"),J(I,"}"),A,F):u()}function E(a){return a.match(/[;\}\)\],]/)?t():t(D)}function F(a,b){if(a=="operator"&&/\+\+|--/.test(b))return u(F);if(a=="operator")return u(D);if(a==";")return;if(a=="(")return u(z(")"),J(D,")"),A,F);if(a==".")return u(H,F);if(a=="[")return u(z("]"),D,B("]"),A,F)}function G(a){return a==":"?u(A,C):t(F,B(";"),A)}function H(a){if(a=="variable")return s.marked="property",u()}function I(a){a=="variable"&&(s.marked="property");if(o.hasOwnProperty(a))return u(B(":"),D)}function J(a,b){function c(d){return d==","?u(a,c):d==b?u():u(B(b))}return function(e){return e==b?u():t(a,c)}}function K(a){return a=="}"?u():t(C,K)}function L(a,b){return a=="variable"?(v(b),u(M)):u()}function M(a,b){if(b=="=")return u(D,M);if(a==",")return u(L)}function N(a){return a=="var"?u(L,P):a==";"?t(P):a=="variable"?u(O):t(P)}function O(a,b){return b=="in"?u(D):u(F,P)}function P(a,b){return a==";"?u(Q):b=="in"?u(D):u(D,B(";"),Q)}function Q(a){a!=")"&&u(D)}function R(a,b){if(a=="variable")return v(b),u(R);if(a=="(")return u(z(")"),x,J(S,")"),A,C,y)}function S(a,b){if(a=="variable")return v(b),u()}var c=a.indentUnit,d=b.json,e=function(){function a(a){return{type:a,style:"keyword"}}var b=a("keyword a"),c=a("keyword b"),d=a("keyword c"),e=a("operator"),f={type:"atom",style:"atom"};return{"if":b,"while":b,"with":b,"else":c,"do":c,"try":c,"finally":c,"return":d,"break":d,"continue":d,"new":d,"delete":d,"throw":d,"var":a("var"),"const":a("var"),let:a("var"),"function":a("function"),"catch":a("catch"),"for":a("for"),"switch":a("switch"),"case":a("case"),"default":a("default"),"in":e,"typeof":e,"instanceof":e,"true":f,"false":f,"null":f,"undefined":f,NaN:f,Infinity:f}}(),f=/[+\-*&%=<>!?|]/,i,j,o={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},s={state:null,column:null,marked:null,cc:null},w={name:"this",next:{name:"arguments"}};return A.lex=!0,{startState:function(a){return{tokenize:l,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new p((a||0)-c,0,"block",!1),localVars:null,context:null,indented:0}},token:function(a,b){a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=a.indentation());if(a.eatSpace())return null;var c=b.tokenize(a,b);return i=="comment"?c:(b.reAllowed=i=="operator"||i=="keyword c"||i.match(/^[\[{}\(,;:]$/),b.kwAllowed=i!=".",r(b,c,i,j,a))},indent:function(a,b){if(a.tokenize!=l)return 0;var d=b&&b.charAt(0),e=a.lexical,f=e.type,g=d==f;return f=="vardef"?e.indented+4:f=="form"&&d=="{"?e.indented:f=="stat"||f=="form"?e.indented+c:e.info=="switch"&&!g?e.indented+(/^(?:case|default)\b/.test(b)?c:2*c):e.align?e.column+(g?0:1):e.indented+(g?0:c)},electricChars:":{}"}}),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0});
CodeMirror.defineMode("stex",function(a,b){function c(a,b){a.cmdState.push(b)}function d(a){return a.cmdState.length>0?a.cmdState[a.cmdState.length-1]:null}function e(a){if(a.cmdState.length>0){var b=a.cmdState.pop();b.closeBracket()}}function f(a){var b=a.cmdState;for(var c=b.length-1;c>=0;c--){var d=b[c];if(d.name=="DEFAULT")continue;return d.styleIdentifier()}return null}function g(a,b,c,d){return function(){this.name=a,this.bracketNo=0,this.style=b,this.styles=d,this.brackets=c,this.styleIdentifier=function(a){return this.bracketNo<=this.styles.length?this.styles[this.bracketNo-1]:null},this.openBracket=function(a){return this.bracketNo++,"bracket"},this.closeBracket=function(a){}}}function i(a,b){a.f=b}function j(a,b){if(a.match(/^\\[a-z]+/)){var e=a.current();e=e.substr(1,e.length-1);var g=h[e];return typeof g=="undefined"&&(g=h.DEFAULT),g=new g,c(b,g),i(b,l),g.style}var j=a.next();if(j=="%")return i(b,k),"comment";if(j=="}"||j=="]")return g=d(b),g?(g.closeBracket(j),i(b,l),"bracket"):"error";return j=="{"||j=="["?(g=h.DEFAULT,g=new g,c(b,g),"bracket"):/\d/.test(j)?(a.eatWhile(/[\w.%]/),"atom"):(a.eatWhile(/[\w-_]/),f(b))}function k(a,b){return a.skipToEnd(),i(b,j),"comment"}function l(a,b){var c=a.peek();if(c=="{"||c=="["){var f=d(b),g=f.openBracket(c);return a.eat(c),i(b,j),"bracket"}return/[ \t\r]/.test(c)?(a.eat(c),null):(i(b,j),f=d(b),f&&e(b),j(a,b))}var h=new Array;return h.importmodule=g("importmodule","tag","{[",["string","builtin"]),h.documentclass=g("documentclass","tag","{[",["","atom"]),h.usepackage=g("documentclass","tag","[",["atom"]),h.begin=g("documentclass","tag","[",["atom"]),h.end=g("documentclass","tag","[",["atom"]),h.DEFAULT=function(){this.name="DEFAULT",this.style="tag",this.styleIdentifier=function(a){},this.openBracket=function(a){},this.closeBracket=function(a){}},{startState:function(){return{f:j,cmdState:[]}},copyState:function(a){return{f:a.f,cmdState:a.cmdState.slice(0,a.cmdState.length)}},token:function(a,b){var c=b.f(a,b),d=a.current();return c}}}),CodeMirror.defineMIME("text/x-stex","stex");
CodeMirror.defineMode("xml",function(a,b){function h(a,b){function c(c){return b.tokenize=c,c(a,b)}var d=a.next();if(d=="<"){if(a.eat("!"))return a.eat("[")?a.match("CDATA[")?c(k("atom","]]>")):null:a.match("--")?c(k("comment","-->")):a.match("DOCTYPE",!0,!0)?(a.eatWhile(/[\w\._\-]/),c(l(1))):null;if(a.eat("?"))return a.eatWhile(/[\w\._\-]/),b.tokenize=k("meta","?>"),"meta";g=a.eat("/")?"closeTag":"openTag",a.eatSpace(),f="";var e;while(e=a.eat(/[^\s\u00a0=<>\"\'\/?]/))f+=e;return b.tokenize=i,"tag"}return d=="&"?(a.eatWhile(/[^;]/),a.eat(";"),"atom"):(a.eatWhile(/[^&<]/),null)}function i(a,b){var c=a.next();return c==">"||c=="/"&&a.eat(">")?(b.tokenize=h,g=c==">"?"endTag":"selfcloseTag","tag"):c=="="?(g="equals",null):/[\'\"]/.test(c)?(b.tokenize=j(c),b.tokenize(a,b)):(a.eatWhile(/[^\s\u00a0=<>\"\'\/?]/),"word")}function j(a){return function(b,c){while(!b.eol())if(b.next()==a){c.tokenize=i;break}return"string"}}function k(a,b){return function(c,d){while(!c.eol()){if(c.match(b)){d.tokenize=h;break}c.next()}return a}}function l(a){return function(b,c){var d;while((d=b.next())!=null){if(d=="<")return c.tokenize=l(a+1),c.tokenize(b,c);if(d==">"){if(a==1){c.tokenize=h;break}return c.tokenize=l(a-1),c.tokenize(b,c)}}return"meta"}}function o(){for(var a=arguments.length-1;a>=0;a--)m.cc.push(arguments[a])}function p(){return o.apply(null,arguments),!0}function q(a,b){var c=d.doNotIndent.hasOwnProperty(a)||m.context&&m.context.noIndent;m.context={prev:m.context,tagName:a,indent:m.indented,startOfLine:b,noIndent:c}}function r(){m.context&&(m.context=m.context.prev)}function s(a){if(a=="openTag")return m.tagName=f,p(v,t(m.startOfLine));if(a=="closeTag"){var b=!1;return m.context?b=m.context.tagName!=f:b=!0,b&&(n="error"),p(u(b))}return p()}function t(a){return function(b){return b=="selfcloseTag"||b=="endTag"&&d.autoSelfClosers.hasOwnProperty(m.tagName.toLowerCase())?p():b=="endTag"?(q(m.tagName,a),p()):p()}}function u(a){return function(b){return a&&(n="error"),b=="endTag"?(r(),p()):(n="error",p(arguments.callee))}}function v(a){return a=="word"?(n="attribute",p(v)):a=="equals"?p(w,v):a=="string"?(n="error",p(v)):o()}function w(a){return a=="word"&&d.allowUnquoted?(n="string",p()):a=="string"?p(x):o()}function x(a){return a=="string"?p(x):o()}var c=a.indentUnit,d=b.htmlMode?{autoSelfClosers:{br:!0,img:!0,hr:!0,link:!0,input:!0,meta:!0,col:!0,frame:!0,base:!0,area:!0},doNotIndent:{pre:!0},allowUnquoted:!0}:{autoSelfClosers:{},doNotIndent:{},allowUnquoted:!1},e=b.alignCDATA,f,g,m,n;return{startState:function(){return{tokenize:h,cc:[],indented:0,startOfLine:!0,tagName:null,context:null}},token:function(a,b){a.sol()&&(b.startOfLine=!0,b.indented=a.indentation());if(a.eatSpace())return null;n=g=f=null;var c=b.tokenize(a,b);b.type=g;if((c||g)&&c!="comment"){m=b;for(;;){var d=b.cc.pop()||s;if(d(g||c))break}}return b.startOfLine=!1,n||c},indent:function(a,b,d){var f=a.context;if(a.tokenize!=i&&a.tokenize!=h||f&&f.noIndent)return d?d.match(/^(\s*)/)[0].length:0;if(e&&/<!\[CDATA\[/.test(b))return 0;f&&/^<\//.test(b)&&(f=f.prev);while(f&&!f.startOfLine)f=f.prev;return f?f.indent+c:0},compareStates:function(a,b){if(a.indented!=b.indented||a.tokenize!=b.tokenize)return!1;for(var c=a.context,d=b.context;;c=c.prev,d=d.prev){if(!c||!d)return c==d;if(c.tagName!=d.tagName)return!1}},electricChars:"/"}}),CodeMirror.defineMIME("application/xml","xml"),CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0});
CodeMirror.defineMode("diff",function(){return{token:function(a){var b=a.next();a.skipToEnd();if(b=="+")return"plus";if(b=="-")return"minus";if(b=="@")return"rangeinfo"}}}),CodeMirror.defineMIME("text/x-diff","diff");
CodeMirror.defineMode("htmlmixed",function(a,b){function f(a,b){var f=c.token(a,b.htmlState);return f=="tag"&&a.current()==">"&&b.htmlState.context&&(/^script$/i.test(b.htmlState.context.tagName)?(b.token=h,b.localState=d.startState(c.indent(b.htmlState,"")),b.mode="javascript"):/^style$/i.test(b.htmlState.context.tagName)&&(b.token=i,b.localState=e.startState(c.indent(b.htmlState,"")),b.mode="css")),f}function g(a,b,c){var d=a.current(),e=d.search(b);return e>-1&&a.backUp(d.length-e),c}function h(a,b){return a.match(/^<\/\s*script\s*>/i,!1)?(b.token=f,b.curState=null,b.mode="html",f(a,b)):g(a,/<\/\s*script\s*>/,d.token(a,b.localState))}function i(a,b){return a.match(/^<\/\s*style\s*>/i,!1)?(b.token=f,b.localState=null,b.mode="html",f(a,b)):g(a,/<\/\s*style\s*>/,e.token(a,b.localState))}var c=CodeMirror.getMode(a,{name:"xml",htmlMode:!0}),d=CodeMirror.getMode(a,"javascript"),e=CodeMirror.getMode(a,"css");return{startState:function(){var a=c.startState();return{token:f,localState:null,mode:"html",htmlState:a}},copyState:function(a){if(a.localState)var b=CodeMirror.copyState(a.token==i?e:d,a.localState);return{token:a.token,localState:b,mode:a.mode,htmlState:CodeMirror.copyState(c,a.htmlState)}},token:function(a,b){return b.token(a,b)},indent:function(a,b){return a.token==f||/^\s*<\//.test(b)?c.indent(a.htmlState,b):a.token==h?d.indent(a.localState,b):e.indent(a.localState,b)},compareStates:function(a,b){return c.compareStates(a.htmlState,b.htmlState)},electricChars:"/{}:"}}),CodeMirror.defineMIME("text/html","htmlmixed");
CodeMirror.defineMode("css",function(a){function d(a,b){return c=b,a}function e(a,b){var c=a.next();if(c=="@")return a.eatWhile(/[\w\\\-]/),d("meta",a.current());if(c=="/"&&a.eat("*"))return b.tokenize=f,f(a,b);if(c=="<"&&a.eat("!"))return b.tokenize=g,g(a,b);if(c!="=")return c!="~"&&c!="|"||!a.eat("=")?c=='"'||c=="'"?(b.tokenize=h(c),b.tokenize(a,b)):c=="#"?(a.eatWhile(/[\w\\\-]/),d("atom","hash")):c=="!"?(a.match(/^\s*\w*/),d("keyword","important")):/\d/.test(c)?(a.eatWhile(/[\w.%]/),d("number","unit")):/[,.+>*\/]/.test(c)?d(null,"select-op"):/[;{}:\[\]]/.test(c)?d(null,c):(a.eatWhile(/[\w\\\-]/),d("variable","variable")):d(null,"compare");d(null,"compare")}function f(a,b){var c=!1,f;while((f=a.next())!=null){if(c&&f=="/"){b.tokenize=e;break}c=f=="*"}return d("comment","comment")}function g(a,b){var c=0,f;while((f=a.next())!=null){if(c>=2&&f==">"){b.tokenize=e;break}c=f=="-"?c+1:0}return d("comment","comment")}function h(a){return function(b,c){var f=!1,g;while((g=b.next())!=null){if(g==a&&!f)break;f=!f&&g=="\\"}return f||(c.tokenize=e),d("string","string")}}var b=a.indentUnit,c;return{startState:function(a){return{tokenize:e,baseIndent:a||0,stack:[]}},token:function(a,b){if(a.eatSpace())return null;var d=b.tokenize(a,b),e=b.stack[b.stack.length-1];if(c=="hash"&&e=="rule")d="atom";else if(d=="variable")if(e=="rule")d="number";else if(!e||e=="@media{")d="tag";return e=="rule"&&/^[\{\};]$/.test(c)&&b.stack.pop(),c=="{"?e=="@media"?b.stack[b.stack.length-1]="@media{":b.stack.push("{"):c=="}"?b.stack.pop():c=="@media"?b.stack.push("@media"):e=="{"&&c!="comment"&&b.stack.push("rule"),d},indent:function(a,c){var d=a.stack.length;return/^\}/.test(c)&&(d-=a.stack[a.stack.length-1]=="rule"?2:1),a.baseIndent+d*b},electricChars:"}"}}),CodeMirror.defineMIME("text/css","css");
CodeMirror.defineMode("clike",function(a,b){function k(a,b){var c=a.next();if(g[c]){var h=g[c](a,b);if(h!==!1)return h}if(c=='"'||c=="'")return b.tokenize=l(c),b.tokenize(a,b);if(/[\[\]{}\(\),;\:\.]/.test(c))return j=c,null;if(/\d/.test(c))return a.eatWhile(/[\w\.]/),"number";if(c=="/"){if(a.eat("*"))return b.tokenize=m,m(a,b);if(a.eat("/"))return a.skipToEnd(),"comment"}if(i.test(c))return a.eatWhile(i),"operator";a.eatWhile(/[\w\$_]/);var k=a.current();return d.propertyIsEnumerable(k)?(e.propertyIsEnumerable(k)&&(j="newstatement"),"keyword"):f.propertyIsEnumerable(k)?"atom":"word"}function l(a){return function(b,c){var d=!1,e,f=!1;while((e=b.next())!=null){if(e==a&&!d){f=!0;break}d=!d&&e=="\\"}if(f||!d&&!h)c.tokenize=k;return"string"}}function m(a,b){var c=!1,d;while(d=a.next()){if(d=="/"&&c){b.tokenize=k;break}c=d=="*"}return"comment"}function n(a,b,c,d,e){this.indented=a,this.column=b,this.type=c,this.align=d,this.prev=e}function o(a,b,c){return a.context=new n(a.indented,b,c,null,a.context)}function p(a){var b=a.context.type;if(b==")"||b=="]"||b=="}")a.indented=a.context.indented;return a.context=a.context.prev}var c=a.indentUnit,d=b.keywords||{},e=b.blockKeywords||{},f=b.atoms||{},g=b.hooks||{},h=b.multiLineStrings,i=/[+\-*&%=<>!?|\/]/,j;return{startState:function(a){return{tokenize:null,context:new n((a||0)-c,0,"top",!1),indented:0,startOfLine:!0}},token:function(a,b){var c=b.context;a.sol()&&(c.align==null&&(c.align=!1),b.indented=a.indentation(),b.startOfLine=!0);if(a.eatSpace())return null;j=null;var d=(b.tokenize||k)(a,b);if(d=="comment"||d=="meta")return d;c.align==null&&(c.align=!0);if(j!=";"&&j!=":"||c.type!="statement")if(j=="{")o(b,a.column(),"}");else if(j=="[")o(b,a.column(),"]");else if(j=="(")o(b,a.column(),")");else if(j=="}"){while(c.type=="statement")c=p(b);c.type=="}"&&(c=p(b));while(c.type=="statement")c=p(b)}else j==c.type?p(b):(c.type=="}"||c.type=="top"||c.type=="statement"&&j=="newstatement")&&o(b,a.column(),"statement");else p(b);return b.startOfLine=!1,d},indent:function(a,b){if(a.tokenize!=k&&a.tokenize!=null)return 0;var d=a.context,e=b&&b.charAt(0);d.type=="statement"&&e=="}"&&(d=d.prev);var f=e==d.type;return d.type=="statement"?d.indented+(e=="{"?0:c):d.align?d.column+(f?0:1):d.indented+(f?0:c)},electricChars:"{}"}}),function(){function a(a){var b={},c=a.split(" ");for(var d=0;d<c.length;++d)b[c[d]]=!0;return b}function c(a,b){return b.startOfLine?(a.skipToEnd(),"meta"):!1}function d(a,b){var c;while((c=a.next())!=null)if(c=='"'&&!a.eat('"')){b.tokenize=null;break}return"string"}var b="auto if break int case long char register continue return default short do sizeof double static else struct entry switch extern typedef float union for unsigned goto while enum void const signed volatile";CodeMirror.defineMIME("text/x-csrc",{name:"clike",keywords:a(b),blockKeywords:a("case do else for if switch while struct"),atoms:a("null"),hooks:{"#":c}}),CodeMirror.defineMIME("text/x-c++src",{name:"clike",keywords:a(b+" asm dynamic_cast namespace reinterpret_cast try bool explicit new "+"static_cast typeid catch operator template typename class friend private "+"this using const_cast inline public throw virtual delete mutable protected "+"wchar_t"),blockKeywords:a("catch class do else finally for if struct switch try while"),atoms:a("true false null"),hooks:{"#":c}}),CodeMirror.defineMIME("text/x-java",{name:"clike",keywords:a("abstract assert boolean break byte case catch char class const continue default do double else enum extends final finally float for goto if implements import instanceof int interface long native new package private protected public return short static strictfp super switch synchronized this throw throws transient try void volatile while"),blockKeywords:a("catch class do else finally for if switch try while"),atoms:a("true false null"),hooks:{"@":function(a,b){return a.eatWhile(/[\w\$_]/),"meta"}}}),CodeMirror.defineMIME("text/x-csharp",{name:"clike",keywords:a("abstract as base bool break byte case catch char checked class const continue decimal default delegate do double else enum event explicit extern finally fixed float for foreach goto if implicit in int interface internal is lock long namespace new object operator out override params private protected public readonly ref return sbyte sealed short sizeof stackalloc static string struct switch this throw try typeof uint ulong unchecked unsafe ushort using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),blockKeywords:a("catch class do else finally for foreach if struct switch try while"),atoms:a("true false null"),hooks:{"@":function(a,b){return a.eat('"')?(b.tokenize=d,d(a,b)):(a.eatWhile(/[\w\$_]/),"meta")}}}),CodeMirror.defineMIME("text/x-groovy",{name:"clike",keywords:a("abstract as assert boolean break byte case catch char class const continue def default do double else enum extends final finally float for goto if implements import in instanceof int interface long native new package property private protected public return short static strictfp super switch synchronized this throw throws transient try void volatile while"),atoms:a("true false null"),hooks:{"@":function(a,b){return a.eatWhile(/[\w\$_]/),"meta"}}})}();
CodeMirror.defineMode("python",function(a,b){function d(a){return new RegExp("^(("+a.join(")|(")+"))\\b")}function t(a,b){if(a.sol()){var d=b.scopes[0].offset;if(a.eatSpace()){var l=a.indentation();return l>d?s="indent":l<d&&(s="dedent"),null}d>0&&w(a,b)}if(a.eatSpace())return null;var m=a.peek();if(m==="#")return a.skipToEnd(),"comment";if(a.match(/^[0-9\.]/,!1)){var n=!1;a.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)&&(n=!0),a.match(/^\d+\.\d*/)&&(n=!0),a.match(/^\.\d+/)&&(n=!0);if(n)return a.eat(/J/i),"number";var o=!1;a.match(/^0x[0-9a-f]+/i)&&(o=!0),a.match(/^0b[01]+/i)&&(o=!0),a.match(/^0o[0-7]+/i)&&(o=!0),a.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(a.eat(/J/i),o=!0),a.match(/^0(?![\dx])/i)&&(o=!0);if(o)return a.eat(/L/i),"number"}return a.match(p)?(b.tokenize=u(a.current()),b.tokenize(a,b)):a.match(i)||a.match(h)?null:a.match(g)||a.match(e)||a.match(k)?"operator":a.match(f)?null:a.match(r)?"builtin":a.match(q)?"keyword":a.match(j)?"variable":(a.next(),c)}function u(a){while("rub".indexOf(a.charAt(0).toLowerCase())>=0)a=a.substr(1);var d=a.length==1,e="string";return function(g,h){while(!g.eol()){g.eatWhile(/[^'"\\]/);if(g.eat("\\")){g.next();if(d&&g.eol())return e}else{if(g.match(a))return h.tokenize=t,e;g.eat(/['"]/)}}if(d){if(b.singleLineStringErrors)return c;h.tokenize=t}return e}}function v(b,c,d){d=d||"py";var e=0;if(d==="py"){if(c.scopes[0].type!=="py"){c.scopes[0].offset=b.indentation();return}for(var f=0;f<c.scopes.length;++f)if(c.scopes[f].type==="py"){e=c.scopes[f].offset+a.indentUnit;break}}else e=b.column()+b.current().length;c.scopes.unshift({offset:e,type:d})}function w(a,b,c){c=c||"py";if(b.scopes.length==1)return;if(b.scopes[0].type==="py"){var d=a.indentation(),e=-1;for(var f=0;f<b.scopes.length;++f)if(d===b.scopes[f].offset){e=f;break}if(e===-1)return!0;while(b.scopes[0].offset!==d)b.scopes.shift();return!1}return c==="py"?(b.scopes[0].offset=a.indentation(),!1):b.scopes[0].type!=c?!0:(b.scopes.shift(),!1)}function x(a,b){s=null;var d=b.tokenize(a,b),e=a.current();if(e===".")return d=b.tokenize(a,b),e=a.current(),d==="variable"?"variable":c;if(e==="@")return d=b.tokenize(a,b),e=a.current(),d==="variable"||e==="@staticmethod"||e==="@classmethod"?"meta":c;if(e==="pass"||e==="return")b.dedent+=1;(e===":"&&!b.lambda&&b.scopes[0].type=="py"||s==="indent")&&v(a,b);var f="[({".indexOf(e);return f!==-1&&v(a,b,"])}".slice(f,f+1)),s==="dedent"&&w(a,b)?c:(f="])}".indexOf(e),f!==-1&&w(a,b,e)?c:(b.dedent>0&&a.eol()&&b.scopes[0].type=="py"&&(b.scopes.length>1&&b.scopes.shift(),b.dedent-=1),d))}var c="error",e=new RegExp("^[\\+\\-\\*/%&|\\^~<>!]"),f=new RegExp("^[\\(\\)\\[\\]\\{\\}@,:`=;\\.]"),g=new RegExp("^((==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//)|(\\*\\*))"),h=new RegExp("^((\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))"),i=new RegExp("^((//=)|(>>=)|(<<=)|(\\*\\*=))"),j=new RegExp("^[_A-Za-z][_A-Za-z0-9]*"),k=d(["and","or","not","is","in"]),l=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield"],m=["bool","classmethod","complex","dict","enumerate","float","frozenset","int","list","object","property","reversed","set","slice","staticmethod","str","super","tuple","type"],n={types:["basestring","buffer","file","long","unicode","xrange"],keywords:["exec","print"]},o={types:["bytearray","bytes","filter","map","memoryview","open","range","zip"],keywords:["nonlocal"]};if(!b.version||parseInt(b.version,10)!==3){l=l.concat(n.keywords),m=m.concat(n.types);var p=new RegExp("^(([rub]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}else{l=l.concat(o.keywords),m=m.concat(o.types);var p=new RegExp("^(([rb]|(br))?('{3}|\"{3}|['\"]))","i")}var q=d(l),r=d(m),s=null,y={startState:function(a){return{tokenize:t,scopes:[{offset:a||0,type:"py"}],lastToken:null,lambda:!1,dedent:0}},token:function(a,b){var c=x(a,b);return b.lastToken={style:c,content:a.current()},a.eol()&&a.lambda&&(b.lambda=!1),c},indent:function(a,b){return a.tokenize!=t?0:a.scopes[0].offset}};return y}),CodeMirror.defineMIME("text/x-python","python");
CodeMirror.defineMode("ruby",function(a,b){function c(a){var b={};for(var c=0,d=a.length;c<d;++c)b[a[c]]=!0;return b}function i(a,b,c){return c.tokenize.push(a),a(b,c)}function j(a,b){h=null;if(a.sol()&&a.match("=begin")&&a.eol())return b.tokenize.push(n),"comment";if(a.eatSpace())return null;var c=a.next();if(c=="`"||c=="'"||c=='"'||c=="/")return i(l(c,"string",c=='"'),a,b);if(c=="%"){var d,e=!1;a.eat("s")?d="atom":a.eat(/[WQ]/)?(d="string",e=!0):a.eat(/[wxqr]/)&&(d="string");var f=a.eat(/[^\w\s]/);return f?(g.propertyIsEnumerable(f)&&(f=g[f]),i(l(f,d,e,!0),a,b)):"operator"}if(c=="#")return a.skipToEnd(),"comment";if(c=="<"&&a.eat("<")){a.eat("-"),a.eat(/[\'\"\`]/);var j=a.match(/^\w+/);return a.eat(/[\'\"\`]/),j?i(m(j[0]),a,b):null}if(c=="0")return a.eat("x")?a.eatWhile(/[\da-fA-F]/):a.eat("b")?a.eatWhile(/[01]/):a.eatWhile(/[0-7]/),"number";if(/\d/.test(c))return a.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+\-]?[\d_]+)?/),"number";if(c=="?"){while(a.match(/^\\[CM]-/));return a.eat("\\")?a.eatWhile(/\w/):a.next(),"string"}return c==":"?a.eat("'")?i(l("'","atom",!1),a,b):a.eat('"')?i(l('"',"atom",!0),a,b):(a.eatWhile(/[\w\?]/),"atom"):c=="@"?(a.eat("@"),a.eatWhile(/[\w\?]/),"variable-2"):c=="$"?(a.next(),a.eatWhile(/[\w\?]/),"variable-3"):/\w/.test(c)?(a.eatWhile(/[\w\?]/),a.eat(":")?"atom":"ident"):c!="|"||!b.varList&&b.lastTok!="{"&&b.lastTok!="do"?/[\(\)\[\]{}\\;]/.test(c)?(h=c,null):c=="-"&&a.eat(">")?"arrow":/[=+\-\/*:\.^%<>~|]/.test(c)?(a.eatWhile(/[=+\-\/*:\.^%<>~|]/),"operator"):null:(h="|",null)}function k(){var a=1;return function(b,c){if(b.peek()=="}"){a--;if(a==0)return c.tokenize.pop(),c.tokenize[c.tokenize.length-1](b,c)}else b.peek()=="{"&&a++;return j(b,c)}}function l(a,b,c,d){return function(e,f){var g=!1,h;while((h=e.next())!=null){if(h==a&&(d||!g)){f.tokenize.pop();break}if(c&&h=="#"&&!g&&e.eat("{")){f.tokenize.push(k(arguments.callee));break}g=!g&&h=="\\"}return b}}function m(a){return function(b,c){return b.match(a)?c.tokenize.pop():b.skipToEnd(),"string"}}function n(a,b){return a.sol()&&a.match("=end")&&a.eol()&&b.tokenize.pop(),a.skipToEnd(),"comment"}var d=c(["alias","and","BEGIN","begin","break","case","class","def","defined?","do","else","elsif","END","end","ensure","false","for","if","in","module","next","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield","nil","raise","throw","catch","fail","loop","callcc","caller","lambda","proc","public","protected","private","require","load","require_relative","extend","autoload"]),e=c(["def","class","case","for","while","do","module","then","unless","catch","loop","proc"]),f=c(["end","until"]),g={"[":"]","{":"}","(":")"},h;return{startState:function(){return{tokenize:[j],indented:0,context:{type:"top",indented:-a.indentUnit},continuedLine:!1,lastTok:null,varList:!1}},token:function(a,b){a.sol()&&(b.indented=a.indentation());var c=b.tokenize[b.tokenize.length-1](a,b),g;if(c=="ident"){var i=a.current();c=d.propertyIsEnumerable(a.current())?"keyword":/^[A-Z]/.test(i)?"tag":b.lastTok=="def"||b.lastTok=="class"||b.varList?"def":"variable",e.propertyIsEnumerable(i)?g="indent":f.propertyIsEnumerable(i)?g="dedent":i=="if"&&a.column()==a.indentation()&&(g="indent")}if(h||c&&c!="comment")b.lastTok=i||h||c;return h=="|"&&(b.varList=!b.varList),g=="indent"||/[\(\[\{]/.test(h)?b.context={prev:b.context,type:h||c,indented:b.indented}:(g=="dedent"||/[\)\]\}]/.test(h))&&b.context.prev&&(b.context=b.context.prev),a.eol()&&(b.continuedLine=h=="\\"||c=="operator"),c},indent:function(b,c){if(b.tokenize[b.tokenize.length-1]!=j)return 0;var d=c&&c.charAt(0),e=b.context,f=e.type==g[d]||e.type=="keyword"&&/^(?:end|until|else|elsif|when)\b/.test(c);return e.indented+(f?0:a.indentUnit)+(b.continuedLine?a.indentUnit:0)}}}),CodeMirror.defineMIME("text/x-ruby","ruby");
CodeMirror.defineMode("coffeescript",function(a){function c(a){return new RegExp("^(("+a.join(")|(")+"))\\b")}function r(a,c){if(a.sol()){var k=c.scopes[0].offset;if(a.eatSpace()){var l=a.indentation();return l>k?"indent":l<k?"dedent":null}k>0&&u(a,c)}if(a.eatSpace())return null;var p=a.peek();if(p==="#")return a.skipToEnd(),"comment";if(a.match(/^-?[0-9\.]/,!1)){var r=!1;a.match(/^-?\d*\.\d+(e[\+\-]?\d+)?/i)&&(r=!0),a.match(/^-?\d+\.\d*/)&&(r=!0),a.match(/^-?\.\d+/)&&(r=!0);if(r)return"number";var t=!1;a.match(/^-?0x[0-9a-f]+/i)&&(t=!0),a.match(/^-?[1-9]\d*(e[\+\-]?\d+)?/)&&(t=!0),a.match(/^-?0(?![\dx])/i)&&(t=!0);if(t)return"number"}if(a.match(n))return c.tokenize=s(a.current(),"string"),c.tokenize(a,c);if(a.match(o)){if(a.current()!="/"||a.match(/^.*\//,!1))return c.tokenize=s(a.current(),"string-2"),c.tokenize(a,c);a.backUp(1)}return a.match(h)||a.match(g)?"punctuation":a.match(f)||a.match(d)||a.match(j)?"operator":a.match(e)?"punctuation":a.match(q)?"atom":a.match(m)?"keyword":a.match(i)?"variable":(a.next(),b)}function s(c,d){var e=new RegExp(c),f=c.length==1;return function(g,h){while(!g.eol()){g.eatWhile(/[^'"\/\\]/);if(g.eat("\\")){g.next();if(f&&g.eol())return d}else{if(g.match(e))return h.tokenize=r,d;g.eat(/['"\/]/)}}return f&&(a.mode.singleLineStringErrors?d=b:h.tokenize=r),d}}function t(b,c,d){d=d||"coffee";var e=0;if(d==="coffee"){for(var f=0;f<c.scopes.length;f++)if(c.scopes[f].type==="coffee"){e=c.scopes[f].offset+a.indentUnit;break}}else e=b.column()+b.current().length;c.scopes.unshift({offset:e,type:d})}function u(a,b){if(b.scopes.length==1)return;if(b.scopes[0].type==="coffee"){var c=a.indentation(),d=-1;for(var e=0;e<b.scopes.length;++e)if(c===b.scopes[e].offset){d=e;break}if(d===-1)return!0;while(b.scopes[0].offset!==c)b.scopes.shift();return!1}return b.scopes.shift(),!1}function v(a,c){var d=c.tokenize(a,c),e=a.current();if(e===".")return d=c.tokenize(a,c),e=a.current(),d==="variable"?"variable":b;if(e==="@")return d=c.tokenize(a,c),e=a.current(),d==="variable"?"variable-2":b;e==="return"&&(c.dedent+=1),((e==="->"||e==="=>")&&!c.lambda&&c.scopes[0].type=="coffee"&&a.peek()===""||d==="indent")&&t(a,c);var f="[({".indexOf(e);return f!==-1&&t(a,c,"])}".slice(f,f+1)),k.exec(e)&&t(a,c),e=="then"&&u(a,c),d==="dedent"&&u(a,c)?b:(f="])}".indexOf(e),f!==-1&&u(a,c)?b:(c.dedent>0&&a.eol()&&c.scopes[0].type=="coffee"&&(c.scopes.length>1&&c.scopes.shift(),c.dedent-=1),d))}var b="error",d=new RegExp("^[\\+\\-\\*/%&|\\^~<>!?]"),e=new RegExp("^[\\(\\)\\[\\]\\{\\}@,:`=;\\.]"),f=new RegExp("^((->)|(=>)|(\\+\\+)|(\\+\\=)|(\\-\\-)|(\\-\\=)|(\\*\\*)|(\\*\\=)|(\\/\\/)|(\\/\\=)|(==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//))"),g=new RegExp("^((\\.\\.)|(\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))"),h=new RegExp("^((\\.\\.\\.)|(//=)|(>>=)|(<<=)|(\\*\\*=))"),i=new RegExp("^[_A-Za-z][_A-Za-z0-9]*"),j=c(["and","or","not","is","isnt","in","instanceof","typeof"]),k=["for","while","loop","if","unless","else","switch","try","catch","finally","class"],l=["break","by","continue","debugger","delete","do","in","of","new","return","then","this","throw","when","until"],m=c(k.concat(l));k=c(k);var n=new RegExp("^('{3}|\"{3}|['\"])"),o=new RegExp("^(/{3}|/)"),p=["Infinity","NaN","undefined","null","true","false","on","off","yes","no"],q=c(p),w={startState:function(a){return{tokenize:r,scopes:[{offset:a||0,type:"coffee"}],lastToken:null,lambda:!1,dedent:0}},token:function(a,b){var c=v(a,b);return b.lastToken={style:c,content:a.current()},a.eol()&&a.lambda&&(b.lambda=!1),c},indent:function(a,b){return a.tokenize!=r?0:a.scopes[0].offset}};return w}),CodeMirror.defineMIME("text/x-coffeescript","coffeescript");
(function(){function g(){}function h(){}function i(a,b,c){this.init(a,[b],[c||(a&&a.length>1?a.slice(1):a)])}function j(){}function k(b,c,d){if(!arguments.length)return;var e=this;e.parent=b,e.prev=c||0,e.next=d||0,e.jQinit(e.fold(a(),function(a,b){return b.jQ.add(a)}))}function l(c,e,f,g){function n(){m=b;var a=i.selection?"$"+i.selection.latex()+"$":"";l.val(a);if(a)if(l[0].select)l[0].select();else if(document.selection){var c=l[0].createTextRange();c.expand("textedit"),c.select()}}function q(b){return i.seek(a(b.target),b.pageX,b.pageY),(i.prev!==o.prev||i.parent!==o.parent)&&i.selectFrom(o),!1}function r(a){return delete a.target,q(a)}function s(d){o=b,i.blink=p,i.selection||(g?i.show():j.detach()),c.unbind("mousemove",q),a(document).unbind("mousemove",r).unbind("mouseup",s)}function u(){l.focus()}function v(){var a=l.val();a.slice(0,1)==="$"&&a.slice(-1)==="$"?a=a.slice(1,-1):a="\\text{"+a+"}",i.writeLatex(a).show(),l.val("")}function y(){if(x)return;var a=l.val();if(a){l.val("");for(var c=0;c<a.length;c+=1)i.parent.textInput(a.charAt(c))}else(i.selection||m!==b)&&n()}var h=c.contents().detach();f||c.addClass("mathquill-rendered-math"),e.jQ=c.data(d,{block:e,revert:function(){c.empty().unbind(".mathquill").removeClass("mathquill-rendered-math mathquill-editable mathquill-textbox").append(h)}});var i=e.cursor=new Y(e);e.renderLatex(h.text());var j=e.textarea=a('<span class="textarea"><textarea></textarea></span>'),l=j.children(),m;e.selectionChanged=function(){m===b&&(m=setTimeout(n))},c.bind("selectstart.mathquill",function(a){a.target!==l[0]&&a.preventDefault(),a.stopPropagation()});var o,p=i.blink;c.bind("mousedown.mathquill",function(b){i.blink=a.noop,i.seek(a(b.target),b.pageX,b.pageY),o=new k(i.parent,i.prev,i.next),g||c.prepend(j),c.mousemove(q),a(document).mousemove(r).mouseup(s),b.stopPropagation()});if(!g){c.bind("cut paste",!1).bind("copy",n).prepend('<span class="selectable">$'+e.latex()+"$</span>"),l.blur(function(){i.clearSelection(),setTimeout(t)});function t(){j.detach()}return}c.prepend(j),c.addClass("mathquill-editable"),f&&c.addClass("mathquill-textbox"),l.focus(function(a){i.parent||i.appendTo(e),i.parent.jQ.addClass("hasCursor"),i.selection?(i.selection.jQ.removeClass("blur"),setTimeout(e.selectionChanged)):i.show(),a.stopPropagation()}).blur(function(a){i.hide().parent.blur(),i.selection&&i.selection.jQ.addClass("blur"),a.stopPropagation()}),c.bind("focus.mathquill blur.mathquill",function(a){l.trigger(a)}).bind("mousedown.mathquill",function(){setTimeout(u)}).bind("click.mathquill",u).blur(),c.bind("cut",function(a){n(),i.selection&&setTimeout(function(){i.deleteSelection(),i.redraw()}),a.stopPropagation()}).bind("copy",function(a){n(),x=!0,a.stopPropagation()}).bind("paste",function(a){x=!0,setTimeout(v),a.stopPropagation()});var w={},x=!1;c.bind("keydown.mathquill",function(a){w.evt=a,w.happened=!0,i.parent.keydown(a)===!1&&a.preventDefault()}).bind("keypress.mathquill",function(a){w.happened?w.happened=!1:i.parent.keydown(w.evt),m!==b&&clearTimeout(m),(i.selection||m!==b)&&l.val(""),x=!1,setTimeout(y)})}function m(){}function n(a){this.init("$"),this.firstChild.cursor=a,this.firstChild.textInput=function(b){if(this.skipTextInput)return;b!=="$"||a.parent!==this?a.write(b):this.isEmpty()?a.insertAfter(this.parent).backspace().insertNew(new S("\\$","$")).show():a.next?a.prev?a.write(b):a.insertBefore(this.parent):a.insertAfter(this.parent)}}function o(){}function x(a,b){return b.prototype=a.prototype,b}function y(a){var b=Array.prototype.slice.call(arguments,1);return x(a,function(){a.apply(this,Array.prototype.concat.apply(b,arguments))})}function z(a,c,d){this.init(a,[c],b,d)}function A(a,b,c,d){this.init(a,[b],[c],d)}function B(a){this.init("\\frac",b,b,a),this.jQ.append('<span style="display:inline-block;width:0">&nbsp;</span>')}function C(){B.apply(this,arguments)}function D(a){this.init("\\sqrt",b,b,a)}function E(a){D.call(this,a),this.jQ=this.firstChild.jQ.detach().add(this.jQ)}function F(a,b,c,d,e){this.init("\\left"+c,['<span class="block"><span class="paren">'+a+'</span><span class="block"></span><span class="paren">'+b+"</span></span>"],[a,b],e),this.end="\\right"+d}function G(a,b,c,d,e){F.apply(this,arguments)}function H(a,b,c){F.call(this,a,b,a,b,c)}function I(a,b,c){G.call(this,a,b,a,b,c)}function J(a){H.call(this,"|","|",a)}function K(a){a instanceof k?this.replacedText=a.remove().jQ.text():typeof a=="string"&&(this.replacedText=a),this.init()}function L(){}function M(a,b){function d(){K.apply(this,arguments)}return c=d.prototype=new K,c.cmd=a,c.html_template=[b],d}function N(a){this.init("\\"),a&&(this.replacedFragment=a.detach(),this.isEmpty=function(){return!1})}function O(c){this.init("\\binom",b,b,c),this.jQ.wrapInner('<span class="array"></span>'),this.blockjQ=this.jQ.children(),this.bracketjQs=a('<span class="paren">(</span>').prependTo(this.jQ).add(a('<span class="paren">)</span>').appendTo(this.jQ))}function P(){O.apply(this,arguments)}function Q(a){this.init("\\vector",b,b,a)}function R(a,b){i.call(this,a,"<var>"+(b||a)+"</var>")}function S(a,b){i.call(this,a,"<span>"+(b||a)+"</span>")}function T(a,b){i.call(this,a,'<span class="nonSymbola">'+(b||a)+"</span>")}function U(a,b,c){i.call(this,a,'<span class="binary-operator">'+b+"</span>",c)}function V(a,b){S.apply(this,arguments)}function W(a,b){i.call(this,a,"<big>"+b+"</big>")}function X(a,b){i.call(this,"\\"+b+" ","<span>"+b+"</span>")}function Y(b){this.parent=this.root=b;var c=this.jQ=this._jQ=a('<span class="cursor"></span>');this.blink=function(){c.toggleClass("blink")}}function Z(a,b,c){k.apply(this,arguments)}var a=jQuery,b,c,d="[[mathquill internal data]]",e=Math.min,f=Math.max;c=g.prototype,c.prev=0,c.next=0,c.parent=0,c.firstChild=0,c.lastChild=0,c.eachChild=function(a){for(var b=this.firstChild;b;b=b.next)if(a.call(this,b)===!1)break;return this},c.foldChildren=function(a,b){return this.eachChild(function(c){a=b.call(this,a,c)}),a},c.keydown=function(a){return this.parent.keydown(a)},c.textInput=function(a){return this.parent.textInput(a)},c=h.prototype=new g,c.init=function(b,c,e,f){var g=this;b&&(g.cmd=b),c&&(g.html_template=c),e&&(g.text_template=e),g.jQ=a(g.html_template[0]).data(d,{cmd:g}),g.initBlocks(f)},c.initBlocks=function(b){var c=this;if(c.html_template.length===1){c.firstChild=c.lastChild=c.jQ.data(d).block=b&&b.blockify()||new j,c.firstChild.parent=c,c.firstChild.jQ=c.jQ.append(c.firstChild.jQ);return}var e,f,g=c.html_template.length;this.firstChild=e=f=b&&b.blockify()||new j,e.parent=c,e.jQ=a(c.html_template[1]).data(d,{block:e}).append(e.jQ).appendTo(c.jQ),e.blur();for(var h=2;h<g;h+=1)e=new j,e.parent=c,e.prev=f,f.next=e,f=e,e.jQ=a(c.html_template[h]).data(d,{block:e}).appendTo(c.jQ),e.blur();c.lastChild=e},c.latex=function(){return this.foldChildren(this.cmd,function(a,b){return a+"{"+(b.latex()||" ")+"}"})},c.text_template=[""],c.text=function(){var a=0;return this.foldChildren(this.text_template[a],function(b,c){a+=1;var d=c.text();return b&&this.text_template[a]==="("&&d[0]==="("&&d.slice(-1)===")"?b+d.slice(1,-1)+this.text_template[a]:b+c.text()+(this.text_template[a]||"")})},c.insertAt=function(a){var b=this;b.parent=a.parent,b.next=a.next,b.prev=a.prev,a.prev?a.prev.next=b:a.parent.firstChild=b,a.next?a.next.prev=b:a.parent.lastChild=b,a.prev=b,b.jQ.insertBefore(a.jQ),b.respace(),b.next&&b.next.respace(),b.prev&&b.prev.respace(),b.placeCursor(a),a.redraw()},c.respace=a.noop,c.placeCursor=function(a){a.appendTo(this.foldChildren(this.firstChild,function(a,b){return a.isEmpty()?a:b}))},c.isEmpty=function(){return this.foldChildren(!0,function(a,b){return a&&b.isEmpty()})},c.remove=function(){var a=this,b=a.prev,c=a.next,d=a.parent;return b?b.next=c:d.firstChild=c,c?c.prev=b:d.lastChild=b,a.jQ.remove(),a},c=i.prototype=new h,c.initBlocks=a.noop,c.latex=function(){return this.cmd},c.text=function(){return this.text_template},c.placeCursor=a.noop,c.isEmpty=function(){return!0},c=j.prototype=new g,c.latex=function(){return this.foldChildren("",function(a,b){return a+b.latex()})},c.text=function(){return this.firstChild===this.lastChild?this.firstChild.text():this.foldChildren("(",function(a,b){return a+b.text()})+")"},c.isEmpty=function(){return this.firstChild===0&&this.lastChild===0},c.focus=function(){return this.jQ.addClass("hasCursor"),this.isEmpty()&&this.jQ.removeClass("empty"),this},c.blur=function(){return this.jQ.removeClass("hasCursor"),this.isEmpty()&&this.jQ.addClass("empty"),this},c=k.prototype,c.remove=h.prototype.remove,c.jQinit=function(a){this.jQ=a},c.each=function(a){for(var b=this.prev.next||this.parent.firstChild;b!==this.next;b=b.next)if(a.call(this,b)===!1)break;return this},c.fold=function(a,b){return this.each(function(c){a=b.call(this,a,c)}),a},c.latex=function(){return this.fold("",function(a,b){return a+b.latex()})},c.blockify=function(){var a=this,b=a.prev,c=a.next,d=a.parent,e=new j,f=e.firstChild=b.next||d.firstChild,g=e.lastChild=c.prev||d.lastChild;return b?b.next=c:d.firstChild=c,c?c.prev=b:d.lastChild=b,f.prev=a.prev=0,g.next=a.next=0,a.parent=e,a.each(function(a){a.parent=e}),e.jQ=a.jQ,e},c=m.prototype=new j,c.latex=function(){return j.prototype.latex.call(this).replace(/(\\[a-z]+) (?![a-z])/ig,"$1")},c.text=function(){return this.foldChildren("",function(a,b){return a+b.text()})},c.renderLatex=function(a){this.jQ.children().slice(1).remove(),this.firstChild=this.lastChild=0,this.cursor.appendTo(this).writeLatex(a),this.blur()},c.keydown=function(a){a.ctrlKey=a.ctrlKey||a.metaKey;switch(a.originalEvent&&a.originalEvent.keyIdentifier||a.which){case 8:case"Backspace":case"U+0008":if(a.ctrlKey)while(this.cursor.prev||this.cursor.selection)this.cursor.backspace();else this.cursor.backspace();break;case 27:case"Esc":case"U+001B":case 9:case"Tab":case"U+0009":if(a.ctrlKey)break;var b=this.cursor.parent;if(a.shiftKey){if(b===this.cursor.root)return this.skipTextInput=!0;b.prev?this.cursor.appendTo(b.prev):this.cursor.insertBefore(b.parent)}else{if(b===this.cursor.root)return this.skipTextInput=!0;b.next?this.cursor.prependTo(b.next):this.cursor.insertAfter(b.parent)}this.cursor.clearSelection();break;case 13:case"Enter":break;case 35:case"End":if(a.shiftKey)while(this.cursor.next||a.ctrlKey&&this.cursor.parent!==this)this.cursor.selectRight();else this.cursor.clearSelection().appendTo(a.ctrlKey?this:this.cursor.parent);break;case 36:case"Home":if(a.shiftKey)while(this.cursor.prev||a.ctrlKey&&this.cursor.parent!==this)this.cursor.selectLeft();else this.cursor.clearSelection().prependTo(a.ctrlKey?this:this.cursor.parent);break;case 37:case"Left":if(a.ctrlKey)break;a.shiftKey?this.cursor.selectLeft():this.cursor.moveLeft();break;case 38:case"Up":if(a.ctrlKey)break;if(a.shiftKey)if(this.cursor.prev)while(this.cursor.prev)this.cursor.selectLeft();else this.cursor.selectLeft();else this.cursor.parent.prev?this.cursor.clearSelection().appendTo(this.cursor.parent.prev):this.cursor.prev?this.cursor.clearSelection().prependTo(this.cursor.parent):this.cursor.parent!==this&&this.cursor.clearSelection().insertBefore(this.cursor.parent.parent);break;case 39:case"Right":if(a.ctrlKey)break;a.shiftKey?this.cursor.selectRight():this.cursor.moveRight();break;case 40:case"Down":if(a.ctrlKey)break;if(a.shiftKey)if(this.cursor.next)while(this.cursor.next)this.cursor.selectRight();else this.cursor.selectRight();else this.cursor.parent.next?this.cursor.clearSelection().prependTo(this.cursor.parent.next):this.cursor.next?this.cursor.clearSelection().appendTo(this.cursor.parent):this.cursor.parent!==this&&this.cursor.clearSelection().insertAfter(this.cursor.parent.parent);break;case 46:case"Del":case"U+007F":if(a.ctrlKey)while(this.cursor.next||this.cursor.selection)this.cursor.deleteForward();else this.cursor.deleteForward();break;case 65:case"A":case"U+0041":if(a.ctrlKey&&!a.shiftKey&&!a.altKey){if(this!==this.cursor.root)return this.parent.keydown(a);this.cursor.clearSelection().appendTo(this);while(this.cursor.prev)this.cursor.selectLeft();break};default:return this.skipTextInput=!1,!0}return this.skipTextInput=!0,!1},c.textInput=function(a){this.skipTextInput||this.cursor.write(a)},c=n.prototype=new h,c.html_template=['<span class="mathquill-rendered-math"></span>'],c.initBlocks=function(){this.firstChild=this.lastChild=this.jQ.data(d).block=new m,this.firstChild.parent=this,this.firstChild.jQ=this.jQ},c.latex=function(){return"$"+this.firstChild.latex()+"$"},c=o.prototype=new j,c.renderLatex=function(a){var b=this,c=b.cursor;b.jQ.children().slice(1).remove(),b.firstChild=b.lastChild=0,c.show().appendTo(b),a=a.match(/(?:\\\$|[^$])+|\$(?:\\\$|[^$])*\$|\$(?:\\\$|[^$])*$/g)||"";for(var d=0;d<a.length;d+=1){var e=a[d];if(e[0]==="$"){e[-1+e.length]==="$"&&e[-2+e.length]!=="\\"?e=e.slice(1,-1):e=e.slice(1);var f=new n(c);c.insertNew(f),f.firstChild.renderLatex(e),c.show().insertAfter(f)}else for(var g=0;g<e.length;g+=1)this.cursor.insertNew(new S(e[g]))}},c.keydown=m.prototype.keydown,c.textInput=function(a){if(this.skipTextInput)return;this.cursor.deleteSelection(),a==="$"?this.cursor.insertNew(new n(this.cursor)):this.cursor.insertNew(new S(a))};var p={},q={},r,s=document.createElement("div"),t=s.style,u={transform:1,WebkitTransform:1,MozTransform:1,OTransform:1,msTransform:1},v;for(var w in u)if(w in t){v=w;break}v?r=function(a,b,c){a.css(v,"scale("+b+","+c+")")}:"filter"in t?r=function(a,b,c){a.css("filter","progid:DXImageTransform.Microsoft.Matrix(M11="+b+",M22="+c+",SizingMethod='auto expand')")}:r=function(a,b,c){a.css("fontSize",c+"em")},x(h,z),q.mathrm=y(z,"\\mathrm",'<span class="roman font"></span>'),q.mathit=y(z,"\\mathit",'<i class="font"></i>'),q.mathbf=y(z,"\\mathbf",'<b class="font"></b>'),q.mathsf=y(z,"\\mathsf",'<span class="sans-serif font"></span>'),q.mathtt=y(z,"\\mathtt",'<span class="monospace font"></span>'),q.underline=y(z,"\\underline",'<span class="underline"></span>'),q.overline=q.bar=y(z,"\\overline",'<span class="overline"></span>'),c=A.prototype=new h,c.latex=function(){var a=this.firstChild.latex();return a.length===1?this.cmd+a:this.cmd+"{"+(a||" ")+"}"},c.redraw=function(){this.respace(),this.next&&this.next.respace(),this.prev&&this.prev.respace()},c.respace=function(){this.prev.cmd==="\\int "||this.prev instanceof A&&this.prev.cmd!=this.cmd&&this.prev.prev&&this.prev.prev.cmd==="\\int "?this.limit||(this.limit=!0,this.jQ.addClass("limit")):this.limit&&(this.limit=!1,this.jQ.removeClass("limit"));if(this.respaced=this.prev instanceof A&&this.prev.cmd!=this.cmd&&!this.prev.respaced){var a=+this.jQ.css("fontSize").slice(0,-2),b=this.prev.jQ.outerWidth();thisWidth=this.jQ.outerWidth(),this.jQ.css({left:(this.limit&&this.cmd==="_"?-0.25:0)-b/a+"em",marginRight:.1-e(thisWidth,b)/a+"em"})}else this.limit&&this.cmd==="_"?this.jQ.css({left:"-.25em",marginRight:""}):this.jQ.css({left:"",marginRight:""});return this},q.subscript=q._=x(A,function(a){A.call(this,"_","<sub></sub>","_",a)}),q.superscript=q.supscript=q["^"]=x(A,function(a){A.call(this,"^","<sup></sup>","**",a)}),c=B.prototype=new h,c.html_template=['<span class="fraction"></span>','<span class="numerator"></span>','<span class="denominator"></span>'],c.text_template=["(","/",")"],q.frac=q.dfrac=q.cfrac=q.fraction=B,c=C.prototype=new B,c.placeCursor=function(a){if(this.firstChild.isEmpty()){var b=this.prev;while(b&&!(b instanceof U||b instanceof K||b instanceof W))b=b.prev;b instanceof W&&b.next instanceof A&&(b=b.next,b.next instanceof A&&b.next.cmd!=b.cmd&&(b=b.next));if(b!==this.prev){var c=(new k(this.parent,b,this)).blockify();c.jQ=this.firstChild.jQ.empty().removeClass("empty").append(c.jQ).data(d,{block:c}),c.next=this.lastChild,c.parent=this,this.firstChild=this.lastChild.prev=c}}a.appendTo(this.lastChild)},q.over=p["/"]=C,c=D.prototype=new h,c.html_template=['<span class="block"><span class="sqrt-prefix">&radic;</span></span>','<span class="sqrt-stem"></span>'],c.text_template=["sqrt(",")"],c.redraw=function(){var a=this.lastChild.jQ;r(a.prev(),1,a.innerHeight()/+a.css("fontSize").slice(0,-2)-.1)},q.sqrt=q["√"]=D,c=E.prototype=new D,c.html_template=['<span class="block"><span class="sqrt-prefix">&radic;</span></span>','<sup class="nthroot"></sup>','<span class="sqrt-stem"></span>'],c.text_template=["sqrt[","](",")"],c.latex=function(){return"\\sqrt["+this.firstChild.latex()+"]{"+this.lastChild.latex()+"}"},q.nthroot=E,c=F.prototype=new h,c.initBlocks=function(a){this.firstChild=this.lastChild=a&&a.blockify()||new j,this.firstChild.parent=this,this.firstChild.jQ=this.jQ.children(":eq(1)").data(d,{block:this.firstChild}).append(this.firstChild.jQ);var b=this.blockjQ=this.firstChild.jQ;this.bracketjQs=b.prev().add(b.next())},c.latex=function(){return this.cmd+this.firstChild.latex()+this.end},c.redraw=function(){var a=this.blockjQ.outerHeight()/+this.blockjQ.css("fontSize").slice(0,-2);r(this.bracketjQs,e(1+.2*(a-1),1.2),1.05*a)},q.lbrace=p["{"]=x(F,function(a){F.call(this,"{","}","\\{","\\}",a)}),q.langle=q.lang=x(F,function(a){F.call(this,"&lang;","&rang;","\\langle ","\\rangle ",a)}),c=G.prototype=new F,c.placeCursor=function(a){!this.next&&this.parent.parent&&this.parent.parent.end===this.end&&this.firstChild.isEmpty()?a.backspace().insertAfter(this.parent.parent):this.firstChild.blur()},q.rbrace=p["}"]=x(G,function(a){G.call(this,"{","}","\\{","\\}",a)}),q.rangle=q.rang=x(G,function(a){G.call(this,"&lang;","&rang;","\\langle ","\\rangle ",a)}),H.prototype=F.prototype,q.lparen=p["("]=x(H,function(a){H.call(this,"(",")",a)}),q.lbrack=q.lbracket=p["["]=x(H,function(a){H.call(this,"[","]",a)}),I.prototype=G.prototype,q.rparen=p[")"]=x(I,function(a){I.call(this,"(",")",a)}),q.rbrack=q.rbracket=p["]"]=x(I,function(a){I.call(this,"[","]",a)}),c=J.prototype=new H,c.placeCursor=function(a){!this.next&&this.parent.parent&&this.parent.parent.end===this.end&&this.firstChild.isEmpty()?a.backspace().insertAfter(this.parent.parent):a.appendTo(this.firstChild)},q.lpipe=q.rpipe=p["|"]=J,c=K.prototype=new h,c.cmd="\\text",c.html_template=['<span class="text"></span>'],c.text_template=['"','"'],c.initBlocks=function(){this.firstChild=this.lastChild=this.jQ.data(d).block=new L,this.firstChild.parent=this,this.firstChild.jQ=this.jQ.append(this.firstChild.jQ)},c.placeCursor=function(a){(this.cursor=a).appendTo(this.firstChild);if(this.replacedText)for(var b=0;b<this.replacedText.length;b+=1)this.write(this.replacedText.charAt(b))},c.write=function(a){this.cursor.insertNew(new S(a))},c.keydown=function(a){return!this.cursor.selection&&(a.which===8&&!this.cursor.prev||a.which===46&&!this.cursor.next)?(this.isEmpty()&&this.cursor.insertAfter(this),!1):this.parent.keydown(a)},c.textInput=function(a){this.cursor.deleteSelection();if(a!=="$")this.write(a);else if(this.isEmpty())this.cursor.insertAfter(this).backspace().insertNew(new S("\\$","$"));else if(!this.cursor.next)this.cursor.insertAfter(this);else if(!this.cursor.prev)this.cursor.insertBefore(this);else{var b=new K(new k(this.firstChild,this.cursor.prev));b.placeCursor=function(a){this.prev=0,delete this.placeCursor,this.placeCursor(a)},b.firstChild.focus=function(){return this},this.cursor.insertAfter(this).insertNew(b),b.prev=this,this.cursor.insertBefore(b),delete b.firstChild.focus}},c=L.prototype=new j,c.blur=function(){this.jQ.removeClass("hasCursor");if(this.isEmpty()){var a=this.parent,b=a.cursor;b.parent===this?this.jQ.addClass("empty"):(b.hide(),a.remove(),b.next===a?b.next=a.next:b.prev===a&&(b.prev=a.prev),b.show().redraw())}return this},c.focus=function(){j.prototype.focus.call(this);var a=this.parent;if(a.next.cmd===a.cmd){var b=this,c=a.cursor,d=a.next.firstChild;d.eachChild(function(a){a.parent=b,a.jQ.appendTo(b.jQ)}),this.lastChild?this.lastChild.next=d.firstChild:this.firstChild=d.firstChild,d.firstChild.prev=this.lastChild,this.lastChild=d.lastChild,d.parent.remove(),c.prev?c.insertAfter(c.prev):c.prependTo(this),c.redraw()}else if(a.prev.cmd===a.cmd){var c=a.cursor;c.prev?a.prev.firstChild.focus():c.appendTo(a.prev.firstChild)}return this},p.$=q.text=q.textnormal=q.textrm=q.textup=q.textmd=K,q.em=q.italic=q.italics=q.emph=q.textit=q.textsl=M("\\textit",'<i class="text"></i>'),q.strong=q.bold=q.textbf=M("\\textbf",'<b class="text"></b>'),q.sf=q.textsf=M("\\textsf",'<span class="sans-serif text"></span>'),q.tt=q.texttt=M("\\texttt",'<span class="monospace text"></span>'),q.textsc=M("\\textsc",'<span style="font-variant:small-caps" class="text"></span>'),q.uppercase=M("\\uppercase",'<span style="text-transform:uppercase" class="text"></span>'),q.lowercase=M("\\lowercase",'<span style="text-transform:lowercase" class="text"></span>'),c=N.prototype=new h,c.html_template=['<span class="latex-command-input">\\</span>'],c.text_template=["\\"],c.placeCursor=function(b){this.cursor=b.appendTo(this.firstChild),this.replacedFragment&&(this.jQ=this.jQ.add(this.replacedFragment.jQ.addClass("blur").bind("mousedown mousemove",function(b){return a(b.target=this.nextSibling).trigger(b),!1}).insertBefore(this.jQ)))},c.latex=function(){return"\\"+this.firstChild.latex()+" "},c.keydown=function(a){return a.which===9||a.which===13?(this.renderCommand(),!1):this.parent.keydown(a)},c.textInput=function(a){if(a.match(/[a-z]/i)){this.cursor.deleteSelection(),this.cursor.insertNew(new S(a));return}this.renderCommand();if(a===" "||a==="\\"&&this.firstChild.isEmpty())return;this.cursor.parent.textInput(a)},c.renderCommand=function(){this.jQ=this.jQ.last(),this.remove(),this.next?this.cursor.insertBefore(this.next):this.cursor.appendTo(this.parent);var a=this.firstChild.latex(),b;if(a){if(!(b=q[a])){b=new K(a),b.firstChild.focus=function(){return delete this.focus,this},this.cursor.insertNew(b).insertAfter(b),this.replacedFragment&&this.replacedFragment.remove();return}b=new b(this.replacedFragment,a)}else b=new S("\\backslash ","\\");this.cursor.insertNew(b),b instanceof i&&this.replacedFragment&&this.replacedFragment.remove()},p["\\"]=N,c=O.prototype=new h,c.html_template=['<span class="block"></span>',"<span></span>","<span></span>"],c.text_template=["choose(",",",")"],c.redraw=F.prototype.redraw,q.binom=q.binomial=O,c=P.prototype=new O,c.placeCursor=C.prototype.placeCursor,q.choose=P,c=Q.prototype=new h,c.html_template=['<span class="array"></span>',"<span></span>"],c.latex=function(){return"\\begin{matrix}"+this.foldChildren([],function(a,b){return a.push(b.latex()),a}).join("\\\\")+"\\end{matrix}"},c.text=function(){return"["+this.foldChildren([],function(a,b){return a.push(b.text()),a}).join()+"]"},c.placeCursor=function(a){this.cursor=a.appendTo(this.firstChild)},c.keydown=function(b){var c=this.cursor.parent;if(c.parent===this){if(b.which===13){var e=new j;return e.parent=this,e.jQ=a("<span></span>").data(d,{block:e}).insertAfter(c.jQ),c.next?c.next.prev=e:this.lastChild=e,e.next=c.next,c.next=e,e.prev=c,this.cursor.appendTo(e).redraw(),!1}if(b.which===9&&!b.shiftKey&&!c.next){if(c.isEmpty())return c.prev?(this.cursor.insertAfter(this),delete c.prev.next,this.lastChild=c.prev,c.jQ.remove(),this.cursor.redraw(),!1):this.parent.keydown(b);var e=new j;return e.parent=this,e.jQ=a("<span></span>").data(d,{block:e}).appendTo(this.jQ),this.lastChild=e,c.next=e,e.prev=c,this.cursor.appendTo(e).redraw(),!1}if(b.which===8){if(c.isEmpty())return c.prev?(this.cursor.appendTo(c.prev),c.prev.next=c.next):(this.cursor.insertBefore(this),this.firstChild=c.next),c.next?c.next.prev=c.prev:this.lastChild=c.prev,c.jQ.remove(),this.isEmpty()?this.cursor.deleteForward():this.cursor.redraw(),!1;if(!this.cursor.prev)return!1}}return this.parent.keydown(b)},q.vector=Q,q.editable=x(n,function(){this.init("\\editable"),l(this.jQ,this.firstChild,!1,!0);var a;this.placeCursor=function(b){a=b.appendTo(this.firstChild)},this.firstChild.blur=function(){if(a.prev!==this.parent)return;delete this.blur,this.cursor.appendTo(this),j.prototype.blur.call(this)},this.latex=function(){return this.firstChild.latex()},this.text=function(){return this.firstChild.text()}}),q.f=y(i,"f",'<var class="florin">&fnof;</var>'),c=R.prototype=new i,c.text=function(){var a=this.cmd;return this.prev&&!(this.prev instanceof R)&&!(this.prev instanceof U)&&(a="*"+a),this.next&&!(this.next instanceof U)&&this.next.cmd!=="^"&&(a+="*"),a},S.prototype=i.prototype,p[" "]=y(S,"\\:"," "),q.prime=p["'"]=y(S,"'","&prime;"),T.prototype=i.prototype,q["@"]=T,q["&"]=y(T,"\\&","&"),q["%"]=y(T,"\\%","%"),q.alpha=q.beta=q.gamma=q.delta=q.zeta=q.eta=q.theta=q.iota=q.kappa=q.mu=q.nu=q.xi=q.rho=q.sigma=q.tau=q.chi=q.psi=q.omega=x(i,function(a,b){R.call(this,"\\"+b+" ","&"+b+";")}),q.phi=y(R,"\\phi ","&#981;"),q.phiv=q.varphi=y(R,"\\varphi ","&phi;"),q.epsilon=y(R,"\\epsilon ","&#1013;"),q.epsiv=q.varepsilon=y(R,"\\varepsilon ","&epsilon;"),q.piv=q.varpi=y(R,"\\varpi ","&piv;"),q.sigmaf=q.sigmav=q.varsigma=y(R,"\\varsigma ","&sigmaf;"),q.thetav=q.vartheta=q.thetasym=y(R,"\\vartheta ","&thetasym;"),q.upsilon=q.upsi=y(R,"\\upsilon ","&upsilon;"),q.gammad=q.Gammad=q.digamma=y(R,"\\digamma ","&#989;"),q.kappav=q.varkappa=y(R,"\\varkappa ","&#1008;"),q.rhov=q.varrho=y(R,"\\varrho ","&#1009;"),q.pi=q["π"]=y(T,"\\pi ","&pi;"),q.lambda=y(T,"\\lambda ","&lambda;"),q.Upsilon=q.Upsi=q.upsih=q.Upsih=y(i,"\\Upsilon ",'<var style="font-family: serif">&upsih;</var>'),q.Gamma=q.Delta=q.Theta=q.Lambda=q.Xi=q.Pi=q.Sigma=q.Phi=q.Psi=q.Omega=q.forall=x(i,function(a,b){S.call(this,"\\"+b+" ","&"+b+";")}),U.prototype=new i,c=V.prototype=new U,c.respace=function(){return this.prev?this.prev instanceof U&&this.next&&!(this.next instanceof U)?this.jQ[0].className="unary-operator":this.jQ[0].className="binary-operator":this.jQ[0].className="",this},q["+"]=y(V,"+"),q["-"]=y(V,"-","&minus;"),q.pm=q.plusmn=q.plusminus=y(V,"\\pm ","&plusmn;"),q.mp=q.mnplus=q.minusplus=y(V,"\\mp ","&#8723;"),p["*"]=q.sdot=q.cdot=y(U,"\\cdot ","&middot;"),q["="]=y(U,"=","="),q["<"]=y(U,"<","&lt;"),q[">"]=y(U,">","&gt;"),q.notin=q.sim=q.cong=q.equiv=q.oplus=q.otimes=x(U,function(a,b){U.call(this,"\\"+b+" ","&"+b+";")}),q.times=x(U,function(a,b){U.call(this,"\\times ","&times;","[x]")}),q.div=q.divide=q.divides=y(U,"\\div ","&divide;","[/]"),q.ne=q.neq=y(U,"\\ne ","&ne;"),q.ast=q.star=q.loast=q.lowast=y(U,"\\ast ","&lowast;"),q.therefor=q.therefore=y(U,"\\therefore ","&there4;"),q.cuz=q.because=y(U,"\\because ","&#8757;"),q.prop=q.propto=y(U,"\\propto ","&prop;"),q.asymp=q.approx=y(U,"\\approx ","&asymp;"),q.lt=y(U,"<","&lt;"),q.gt=y(U,">","&gt;"),q.le=q.leq=y(U,"\\le ","&le;"),q.ge=q.geq=y(U,"\\ge ","&ge;"),q.isin=q["in"]=y(U,"\\in ","&isin;"),q.ni=q.contains=y(U,"\\ni ","&ni;"),q.notni=q.niton=q.notcontains=q.doesnotcontain=y(U,"\\not\\ni ","&#8716;"),q.sub=q.subset=y(U,"\\subset ","&sub;"),q.sup=q.supset=q.superset=y(U,"\\supset ","&sup;"),q.nsub=q.notsub=q.nsubset=q.notsubset=y(U,"\\not\\subset ","&#8836;"),q.nsup=q.notsup=q.nsupset=q.notsupset=q.nsuperset=q.notsuperset=y(U,"\\not\\supset ","&#8837;"),q.sube=q.subeq=q.subsete=q.subseteq=y(U,"\\subseteq ","&sube;"),q.supe=q.supeq=q.supsete=q.supseteq=q.supersete=q.superseteq=y(U,"\\supseteq ","&supe;"),q.nsube=q.nsubeq=q.notsube=q.notsubeq=q.nsubsete=q.nsubseteq=q.notsubsete=q.notsubseteq=y(U,"\\not\\subseteq ","&#8840;"),q.nsupe=q.nsupeq=q.notsupe=q.notsupeq=q.nsupsete=q.nsupseteq=q.notsupsete=q.notsupseteq=q.nsupersete=q.nsuperseteq=q.notsupersete=q.notsuperseteq=y(U,"\\not\\supseteq ","&#8841;"),W.prototype=new i,q.sum=q.summation=y(W,"\\sum ","&sum;"),q.prod=q.product=y(W,"\\prod ","&prod;"),q.coprod=q.coproduct=y(W,"\\coprod ","&#8720;"),q.int=q.integral=q["∫"]=y(W,"\\int ","&int;"),q.N=q.naturals=q.Naturals=y(S,"\\mathbb{N}","&#8469;"),q.P=q.primes=q.Primes=q.projective=q.Projective=q.probability=q.Probability=y(S,"\\mathbb{P}","&#8473;"),q.Z=q.integers=q.Integers=y(S,"\\mathbb{Z}","&#8484;"),q.Q=q.rationals=q.Rationals=y(S,"\\mathbb{Q}","&#8474;"),q.R=q.reals=q.Reals=y(S,"\\mathbb{R}","&#8477;"),q.C=q.complex=q.Complex=q.complexes=q.Complexes=q.complexplane=q.Complexplane=q.ComplexPlane=y(S,"\\mathbb{C}","&#8450;"),q.H=q.Hamiltonian=q.quaternions=q.Quaternions=y(S,"\\mathbb{H}","&#8461;"),q.quad=q.emsp=y(S,"\\quad ","    "),q.qquad=y(S,"\\qquad ","        "),q.diamond=y(S,"\\diamond ","&#9671;"),q.bigtriangleup=y(S,"\\bigtriangleup ","&#9651;"),q.ominus=y(S,"\\ominus ","&#8854;"),q.uplus=y(S,"\\uplus ","&#8846;"),q.bigtriangledown=y(S,"\\bigtriangledown ","&#9661;"),q.sqcap=y(S,"\\sqcap ","&#8851;"),q.triangleleft=y(S,"\\triangleleft ","&#8882;"),q.sqcup=y(S,"\\sqcup ","&#8852;"),q.triangleright=y(S,"\\triangleright ","&#8883;"),q.odot=y(S,"\\odot ","&#8857;"),q.bigcirc=y(S,"\\bigcirc ","&#9711;"),q.dagger=y(S,"\\dagger ","&#0134;"),q.ddagger=y(S,"\\ddagger ","&#135;"),q.wr=y(S,"\\wr ","&#8768;"),q.amalg=y(S,"\\amalg ","&#8720;"),q.models=y(S,"\\models ","&#8872;"),q.prec=y(S,"\\prec ","&#8826;"),q.succ=y(S,"\\succ ","&#8827;"),q.preceq=y(S,"\\preceq ","&#8828;"),q.succeq=y(S,"\\succeq ","&#8829;"),q.simeq=y(S,"\\simeq ","&#8771;"),q.mid=y(S,"\\mid ","&#8739;"),q.ll=y(S,"\\ll ","&#8810;"),q.gg=y(S,"\\gg ","&#8811;"),q.parallel=y(S,"\\parallel ","&#8741;"),q.bowtie=y(S,"\\bowtie ","&#8904;"),q.sqsubset=y(S,"\\sqsubset ","&#8847;"),q.sqsupset=y(S,"\\sqsupset ","&#8848;"),q.smile=y(S,"\\smile ","&#8995;"),q.sqsubseteq=y(S,"\\sqsubseteq ","&#8849;"),q.sqsupseteq=y(S,"\\sqsupseteq ","&#8850;"),q.doteq=y(S,"\\doteq ","&#8784;"),q.frown=y(S,"\\frown ","&#8994;"),q.vdash=y(S,"\\vdash ","&#8870;"),q.dashv=y(S,"\\dashv ","&#8867;"),q.longleftarrow=y(S,"\\longleftarrow ","&#8592;"),q.longrightarrow=y(S,"\\longrightarrow ","&#8594;"),q.Longleftarrow=y(S,"\\Longleftarrow ","&#8656;"),q.Longrightarrow=y(S,"\\Longrightarrow ","&#8658;"),q.longleftrightarrow=y(S,"\\longleftrightarrow ","&#8596;"),q.updownarrow=y(S,"\\updownarrow ","&#8597;"),q.Longleftrightarrow=y(S,"\\Longleftrightarrow ","&#8660;"),q.Updownarrow=y(S,"\\Updownarrow ","&#8661;"),q.mapsto=y(S,"\\mapsto ","&#8614;"),q.nearrow=y(S,"\\nearrow ","&#8599;"),q.hookleftarrow=y(S,"\\hookleftarrow ","&#8617;"),q.hookrightarrow=y(S,"\\hookrightarrow ","&#8618;"),q.searrow=y(S,"\\searrow ","&#8600;"),q.leftharpoonup=y(S,"\\leftharpoonup ","&#8636;"),q.rightharpoonup=y(S,"\\rightharpoonup ","&#8640;"),q.swarrow=y(S,"\\swarrow ","&#8601;"),q.leftharpoondown=y(S,"\\leftharpoondown ","&#8637;"),q.rightharpoondown=y(S,"\\rightharpoondown ","&#8641;"),q.nwarrow=y(S,"\\nwarrow ","&#8598;"),q.ldots=y(S,"\\ldots ","&#8230;"),q.cdots=y(S,"\\cdots ","&#8943;"),q.vdots=y(S,"\\vdots ","&#8942;"),q.ddots=y(S,"\\ddots ","&#8944;"),q.surd=y(S,"\\surd ","&#8730;"),q.triangle=y(S,"\\triangle ","&#9653;"),q.ell=y(S,"\\ell ","&#8467;"),q.top=y(S,"\\top ","&#8868;"),q.flat=y(S,"\\flat ","&#9837;"),q.natural=y(S,"\\natural ","&#9838;"),q.sharp=y(S,"\\sharp ","&#9839;"),q.wp=y(S,"\\wp ","&#8472;"),q.bot=y(S,"\\bot ","&#8869;"),q.clubsuit=y(S,"\\clubsuit ","&#9827;"),q.diamondsuit=y(S,"\\diamondsuit ","&#9826;"),q.heartsuit=y(S,"\\heartsuit ","&#9825;"),q.spadesuit=y(S,"\\spadesuit ","&#9824;"),q.oint=y(S,"\\oint ","&#8750;"),q.bigcap=y(S,"\\bigcap ","&#8745;"),q.bigcup=y(S,"\\bigcup ","&#8746;"),q.bigsqcup=y(S,"\\bigsqcup ","&#8852;"),q.bigvee=y(S,"\\bigvee ","&#8744;"),q.bigwedge=y(S,"\\bigwedge ","&#8743;"),q.bigodot=y(S,"\\bigodot ","&#8857;"),q.bigotimes=y(S,"\\bigotimes ","&#8855;"),q.bigoplus=y(S,"\\bigoplus ","&#8853;"),q.biguplus=y(S,"\\biguplus ","&#8846;"),q.lfloor=y(S,"\\lfloor ","&#8970;"),q.rfloor=y(S,"\\rfloor ","&#8971;"),q.lceil=y(S,"\\lceil ","&#8968;"),q.rceil=y(S,"\\rceil ","&#8969;"),q.slash=y(S,"\\slash ","&#47;"),q.opencurlybrace=y(S,"\\opencurlybrace ","&#123;"),q.closecurlybrace=y(S,"\\closecurlybrace ","&#125;"),q.caret=y(S,"\\caret ","^"),q.underscore=y(S,"\\underscore ","_"),q.backslash=y(S,"\\backslash ","\\"),q.vert=y(S,"|"),q.perp=q.perpendicular=y(S,"\\perp ","&perp;"),q.nabla=q.del=y(S,"\\nabla ","&nabla;"),q.hbar=y(S,"\\hbar ","&#8463;"),q.AA=q.Angstrom=q.angstrom=y(S,"\\text\\AA ","&#8491;"),q.ring=q.circ=q.circle=y(S,"\\circ ","&#8728;"),q.bull=q.bullet=y(S,"\\bullet ","&bull;"),q.setminus=q.smallsetminus=y(S,"\\setminus ","&#8726;"),q.not=q.neg=y(S,"\\neg ","&not;"),q.dots=q.ellip=q.hellip=q.ellipsis=q.hellipsis=y(S,"\\dots ","&hellip;"),q.converges=q.darr=q.dnarr=q.dnarrow=q.downarrow=y(S,"\\downarrow ","&darr;"),q.dArr=q.dnArr=q.dnArrow=q.Downarrow=y(S,"\\Downarrow ","&dArr;"),q.diverges=q.uarr=q.uparrow=y(S,"\\uparrow ","&uarr;"),q.uArr=q.Uparrow=y(S,"\\Uparrow ","&uArr;"),q.to=y(U,"\\to ","&rarr;"),q.rarr=q.rightarrow=y(S,"\\rightarrow ","&rarr;"),q.implies=y(U,"\\Rightarrow ","&rArr;"),q.rArr=q.Rightarrow=y(S,"\\Rightarrow ","&rArr;"),q.gets=y(U,"\\gets ","&larr;"),q.larr=q.leftarrow=y(S,"\\leftarrow ","&larr;"),q.impliedby=y(U,"\\Leftarrow ","&lArr;"),q.lArr=q.Leftarrow=y(S,"\\Leftarrow ","&lArr;"),q.harr=q.lrarr=q.leftrightarrow=y(S,"\\leftrightarrow ","&harr;"),q.iff=y(U,"\\Leftrightarrow ","&hArr;"),q.hArr=q.lrArr=q.Leftrightarrow=y(S,"\\Leftrightarrow ","&hArr;"),q.Re=q.Real=q.real=y(S,"\\Re ","&real;"),q.Im=q.imag=q.image=q.imagin=q.imaginary=q.Imaginary=y(S,"\\Im ","&image;"),q.part=q.partial=y(S,"\\partial ","&part;"),q.inf=q.infin=q.infty=q.infinity=y(S,"\\infty ","&infin;"),q.alef=q.alefsym=q.aleph=q.alephsym=y(S,"\\aleph ","&alefsym;"),q.xist=q.xists=q.exist=q.exists=y(S,"\\exists ","&exist;"),q.and=q.land=q.wedge=y(S,"\\wedge ","&and;"),q.or=q.lor=q.vee=y(S,"\\vee ","&or;"),q.o=q.O=q.empty=q.emptyset=q.oslash=q.Oslash=q.nothing=q.varnothing=y(U,"\\varnothing ","&empty;"),q.cup=q.union=y(S,"\\cup ","&cup;"),q.cap=q.intersect=q.intersection=y(S,"\\cap ","&cap;"),q.deg=q.degree=y(S,"^\\circ ","&deg;"),q.ang=q.angle=y(S,"\\angle ","&ang;"),c=X.prototype=new i,c.respace=function(){this.jQ[0].className=this.next instanceof A||this.next instanceof F?"":"non-italicized-function"},q.ln=q.lg=q.log=q.span=q.proj=q.det=q.dim=q.min=q.max=q.mod=q.lcm=q.gcd=q.gcf=q.hcf=q.lim=X,function(){var a=["sin","cos","tan","sec","cosec","csc","cotan","cot"];for(var b in a)q[a[b]]=q[a[b]+"h"]=q["a"+a[b]]=q["arc"+a[b]]=q["a"+a[b]+"h"]=q["arc"+a[b]+"h"]=X}(),c=Y.prototype,c.prev=0,c.next=0,c.parent=0,c.show=function(){return this.jQ=this._jQ.removeClass("blink"),"intervalId"in this?clearInterval(this.intervalId):(this.next?this.selection&&this.selection.prev===this.prev?this.jQ.insertBefore(this.selection.jQ):this.jQ.insertBefore(this.next.jQ.first()):this.jQ.appendTo(this.parent.jQ),this.parent.focus()),this.intervalId=setInterval(this.blink,500),this},c.hide=function(){return"intervalId"in this&&clearInterval(this.intervalId),delete this.intervalId,this.jQ.detach(),this.jQ=a(),this},c.redraw=function(){for(var a=this.parent;a;a=a.parent)a.redraw&&a.redraw()},c.insertAt=function(a,b,c){var d=this.parent;this.parent=a,this.prev=b,this.next=c,d.blur()},c.insertBefore=function(a){return this.insertAt(a.parent,a.prev,a),this.parent.jQ.addClass("hasCursor"),this.jQ.insertBefore(a.jQ.first()),this},c.insertAfter=function(a){return this.insertAt(a.parent,a,a.next),this.parent.jQ.addClass("hasCursor"),this.jQ.insertAfter(a.jQ.last()),this},c.prependTo=function(a){return this.insertAt(a,0,a.firstChild),a.textarea?this.jQ.insertAfter(a.textarea):this.jQ.prependTo(a.jQ),a.focus(),this},c.appendTo=function(a){return this.insertAt(a,a.lastChild,0),this.jQ.appendTo(a.jQ),a.focus(),this},c.hopLeft=function(){return this.jQ.insertBefore(this.prev.jQ.first()),this.next=this.prev,this.prev=this.prev.prev,this},c.hopRight=function(){return this.jQ.insertAfter(this.next.jQ.last()),this.prev=this.next,this.next=this.next.next,this},c.moveLeft=function(){return this.selection?this.insertBefore(this.selection.prev.next||this.parent.firstChild).clearSelection():this.prev?this.prev.lastChild?this.appendTo(this.prev.lastChild):this.hopLeft():this.parent.prev?this.appendTo(this.parent.prev):this.parent!==this.root&&this.insertBefore(this.parent.parent),this.show()},c.moveRight=function(){return this.selection?this.insertAfter(this.selection.next.prev||this.parent.lastChild).clearSelection():this.next?this.next.firstChild?this.prependTo(this.next.firstChild):this.hopRight():this.parent.next?this.prependTo(this.parent.next):this.parent!==this.root&&this.insertAfter(this.parent.parent),this.show()},c.seek=function(a,b,c){var e=this.clearSelection();if(a.hasClass("empty"))return e.prependTo(a.data(d).block),e;var f=a.data(d);if(f){if(f.cmd&&!f.block)return a.outerWidth()>2*(b-a.offset().left)?e.insertBefore(f.cmd):e.insertAfter(f.cmd),e}else a=a.parent(),f=a.data(d),f||(f={block:e.root});f.cmd?e.insertAfter(f.cmd):e.appendTo(f.block);var g=e.jQ.offset().left-b,h;do e.moveLeft(),h=g,g=e.jQ.offset().left-b;while(g>0&&(e.prev||e.parent!==e.root));return-g>h&&e.moveRight(),e},c.writeLatex=function(a){return this.deleteSelection(),a=a&&a.match(/\\text\{([^}]|\\\})*\}|\\[a-z]*|[^\s]/ig)||0,function c(d){while(a.length){var e=a.shift();if(!e||e==="}")return;var f;if(e.slice(0,6)==="\\text{"){f=new K(e.slice(6,-1)),d.insertNew(f).insertAfter(f);continue}if(e==="\\left"||e==="\\right"){e=a.shift(),e==="\\"&&(e=a.shift()),d.insertCh(e),f=d.prev||d.parent.parent;if(d.prev)return;a.unshift("{")}else if(/^\\[a-z]+$/i.test(e)){e=e.slice(1);var f=q[e];if(!f){f=new K(e),d.insertNew(f).insertAfter(f);continue}d.insertNew(f=new f(b,e))}else e.match(/[a-eg-zA-Z]/)?f=new R(e):(f=q[e])?f=new f:f=new S(e),d.insertNew(f);f.eachChild(function(b){d.appendTo(b);var e=a.shift();if(!e)return!1;e==="{"?c(d):d.insertCh(e)}),d.insertAfter(f)}}(this),this.hide()},c.write=function(a){return this.show().insertCh(a)},c.insertCh=function(a){this.selection&&(this.prev=this.selection.prev,this.next=this.selection.next);var b;return a.match(/^[a-eg-zA-Z]$/)?b=new R(a):(b=p[a]||q[a])?b=new b(this.selection,a):b=new S(a),this.selection&&(b instanceof i&&this.selection.remove(),delete this.selection),this.insertNew(b)},c.insertNew=function(a){return a.insertAt(this),this},c.unwrapGramp=function(){var a=this.parent.parent,b=a.parent,c=a.prev,d=this;a.eachChild(function(d){if(d.isEmpty())return;d.eachChild(function(c){c.parent=b,c.jQ.insertBefore(a.jQ.first())}),d.firstChild.prev=c,c?c.next=d.firstChild:b.firstChild=d.firstChild,c=d.lastChild}),c.next=a.next,a.next?a.next.prev=c:b.lastChild=c;if(!this.next)if(this.prev)this.next=this.prev.next;else while(!this.next){this.parent=this.parent.next;if(!this.parent){this.next=a.next,this.parent=b;break}this.next=this.parent.firstChild}this.next?this.insertBefore(this.next):this.appendTo(b),a.jQ.remove(),a.prev&&a.prev.respace(),a.next&&a.next.respace()},c.backspace=function(){if(!this.deleteSelection())if(this.prev)this.prev.isEmpty()?this.prev=this.prev.remove().prev:this.selectLeft();else if(this.parent!==this.root){if(this.parent.parent.isEmpty())return this.insertAfter(this.parent.parent).backspace();this.unwrapGramp()}return this.prev&&this.prev.respace(),this.next&&this.next.respace(),this.redraw(),this},c.deleteForward=function(){if(!this.deleteSelection())if(this.next)this.next.isEmpty()?this.next=this.next.remove().next:this.selectRight();else if(this.parent!==this.root){if(this.parent.parent.isEmpty())return this.insertBefore(this.parent.parent).deleteForward();this.unwrapGramp()}return this.prev&&this.prev.respace(),this.next&&this.next.respace(),this.redraw(),this},c.selectFrom=function(a){var b=this,c=a;a:for(;;){for(var d=this;d!==b.parent.parent;d=d.parent.parent)if(d.parent===c.parent){f=d,g=c;break a}for(var e=a;e!==c.parent.parent;e=e.parent.parent)if(b.parent===e.parent){f=b,g=e;break a}b.parent.parent&&(b=b.parent.parent),c.parent.parent&&(c=c.parent.parent)}var f,g,h;if(f.next!==g){for(var i=f;i;i=i.next)if(i===g.prev){h=!0;break}h||(h=g,g=f,f=h)}this.hide().selection=new Z(f.parent,f.prev,g.next),this.insertAfter(g.next.prev||g.parent.lastChild),this.root.selectionChanged()},c.selectLeft=function(){if(this.selection)if(this.selection.prev===this.prev)this.prev?(this.hopLeft().next.jQ.prependTo(this.selection.jQ),this.selection.prev=this.prev):this.parent!==this.root&&this.insertBefore(this.parent.parent).selection.levelUp();else{this.prev.jQ.insertAfter(this.selection.jQ),this.hopLeft().selection.next=this.next;if(this.selection.prev===this.prev){this.deleteSelection();return}}else{if(this.prev)this.hopLeft();else{if(this.parent===this.root)return;this.insertBefore(this.parent.parent)}this.hide().selection=new Z(this.parent,this.prev,this.next.next)}this.root.selectionChanged()},c.selectRight=function(){if(this.selection)if(this.selection.next===this.next)this.next?(this.hopRight().prev.jQ.appendTo(this.selection.jQ),this.selection.next=this.next):this.parent!==this.root&&this.insertAfter(this.parent.parent).selection.levelUp();else{this.next.jQ.insertBefore(this.selection.jQ),this.hopRight().selection.prev=this.prev;if(this.selection.next===this.next){this.deleteSelection();return}}else{if(this.next)this.hopRight();else{if(this.parent===this.root)return;this.insertAfter(this.parent.parent)}this.hide().selection=new Z(this.parent,this.prev.prev,this.next)}this.root.selectionChanged()},c.clearSelection=function(){return this.show().selection&&(this.selection.clear(),delete this.selection,this.root.selectionChanged()),this},c.deleteSelection=function(){return this.show().selection?(this.prev=this.selection.prev,this.next=this.selection.next,this.selection.remove(),delete this.selection,this.root.selectionChanged(),!0):!1},c=Z.prototype=new k,c.jQinit=function(a){this.jQ=a.wrapAll('<span class="selection"></span>').parent()},c.levelUp=function(){return this.clear().jQinit(this.parent.parent.jQ),this.prev=this.parent.parent.prev,this.next=this.parent.parent.next,this.parent=this.parent.parent.parent,this},c.clear=function(){return this.jQ.replaceWith(this.jQ.children()),this},c.blockify=function(){return this.jQ.replaceWith(this.jQ=this.jQ.children()),k.prototype.blockify.call(this)},c.detach=function(){var a=k.prototype.blockify.call(this);return this.blockify=function(){return this.jQ.replaceWith(a.jQ=this.jQ=this.jQ.children()),a},this},a.fn.mathquill=function(b,c){switch(b){case"redraw":return this.find(":not(:has(:first))").each(function(){var b=a(this).data(d);b&&(b.cmd||b.block)&&Y.prototype.redraw.call(b.cmd||b.block)}),this;case"revert":return this.each(function(){var b=a(this).data(d);b&&b.revert&&b.revert()});case"latex":if(arguments.length>1)return this.each(function(){var b=a(this).data(d);b&&b.block&&b.block.renderLatex&&b.block.renderLatex(c)});var e=this.data(d);return e&&e.block&&e.block.latex();case"text":var e=this.data(d);return e&&e.block&&e.block.text();case"html":return this.html().replace(/ ?hasCursor|hasCursor /,"").replace(/ class=(""|(?= |>))/g,"").replace(/<span class="?cursor( blink)?"?><\/span>/i,"").replace(/<span class="?textarea"?><textarea><\/textarea><\/span>/i,"");case"write":if(arguments.length>1)return this.each(function(){var b=a(this).data(d),e=b&&b.block,f=e&&e.cursor;f&&(f.writeLatex(c),e.blur())});default:var f=b==="textbox",g=f||b==="editable",h=f?o:m;return this.each(function(){l(a(this),new h,f,g)})}},a(function(){a(".mathquill-editable:not(.mathquill-rendered-math)").mathquill("editable"),a(".mathquill-textbox:not(.mathquill-rendered-math)").mathquill("textbox"),a(".mathquill-embedded-latex").mathquill()})})();
App=new Ext.util.Observable,Ext.apply(App,{name:"DyNAMiC Workbench",nameFormatted:"<b>DyNAMiC</b> Workbench",version:"unknown",isPreRelease:!0,getFullTitle:function(){return App.name+" ("+App.version+")"},getFullTitleFormatted:function(){return'<span class="app-title"><span>'+App.nameFormatted+"</span> ("+App.version+")</span>"},nextId:function(){var a=String((new Date).getTime()).substr(4),b="ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var c=0;c<4;c++)a+=b.charAt(Math.floor(Math.random()*26));return a}}),App.loadData=function(a){App._data=a},App.getLoadedData=function(){return App._data},App.getDefaultWorkspace=function(){return App.defaultWorkspace},App.Endpoints=App.endpoints=function(){var a={};return{getEndpoint:function(b){return App.baseUrl+"/"+a[b]},setEndpoint:function(b,c){a[b]=c}}}(),App.getEndpoint=App.endpoints.getEndpoint,App.setEndpoint=App.endpoints.setEndpoint,App.Ribbon=App.ribbon=function(){var a=!1;return{getRibbonItems:function(){return a},setRibbonItems:function(b){a=b}}}(),App.getRibbonItems=App.ribbon.getRibbonItems,App.setRibbonItems=App.ribbon.setRibbonItems,App.Path=App.path={addExt:function(a,b){return _.last(a.split("."))!=b?a+"."+b:a},isFolder:function(a){return a&&!!App.Path.extname(a)},join:function(){return arguments.length>1?paths=arguments:paths=arguments[0],_.flatten(_.map(paths,function(a){return a.split("/")})).join("/")},extname:function(a){return _.last(App.Path.basename(a).split("."))},basename:function(a){var b=a.split("/");return b.length>0?_.last(b):a},pop:function(a,b){Ext.isDefined(b)||(b=1);var c=a.split("/");return c.length>b?c.slice(0,c.length-1).join("/"):a},sameDirectory:function(a,b){return App.Path.join(App.Path.pop(a),b)},repostfix:function(a,b){return App.path.basename(a).indexOf(".")!=-1?(a=a.split("."),a.pop(),a.concat([b]).join(".")):[a,b].join(".")}},App.User={id:-1,name:!1,email:!1,isLoggedIn:function(){return App.User.id!=-1},setUser:function(a){a.id&&(App.User.id=a.id,App.User.name=a.name,App.User.email=a.email)}},Ext.define("App.TaskRunner",{statics:{loadTools:function(a){_.each(a,function(a){var b=_.compact(a.route.split("/"));b[b.length-1]=_.last(b).capitalize(),b=b.join("."),Ext.define("App.TaskRunner."+b,Ext.apply(a,{extend:"App.TaskRunner.Task"},{iconCls:"app"}))})},run:function(a,b,c){if(Ext.ClassManager.get(["App.TaskRunner",a].join("."))){var d=new Date,e="local",f=Ext.create("App.TaskRunner."+a,{tool:a,startDate:d,target:e});this.taskStore.add(f),f.start(b,c)}},register:function(a,b){this.serverTools[a]=b}}}),App.runTask=function(){App.TaskRunner.run.apply(App.TaskRunner,arguments)},Ext.define("App.TaskRunner.Task",{extend:"Ext.data.Model",endpoint:"",iconCls:"",timeout:36e7,fields:[{name:"tool",type:"string"},{name:"startDate",type:"date"},{name:"endDate",type:"date"},{name:"target",type:"string"}],callback:function(){return},log:function(a,b){b||(b={}),Ext.apply(b,{group:this.getGroupName(),iconCls:this.iconCls,silent:!0}),App.log(a,b)},start:function(a,b){this.arguments=a||{},this.callback=b||this.callback,this.onStart(),this.log('Starting "'+this.name+'" task at '+this.get("startDate")+' on "'+this.get("target")+'"',{});var c=Ext.Ajax.request({url:this.endpoint,method:"POST",params:a,timeout:this.timeout,success:function(b){this.end(b.responseText,a,!0)},failure:function(b){this.end(b.responseText,a,!1),b.timedout==0?this.log('Error running task on tool: "'+this.name+'". Timeout at '+this.timeout+"ms ("+this.timeout/1e3+"s)"):this.log('Error running task on tool: "'+this.name+'". '+b.responseText)},scope:this});Ext.Ajax.clearTimeout(c)},onStart:function(){},end:function(a,b,c){this.onEnd(a,b,c),Ext.isFunction(this.callback)&&this.callback(a,this.arguments,c)},getNameTimestamp:function(){return this.get("tool")+": "+this.get("startDate")+""},getGroupName:function(){return this.getNameTimestamp()+" ("+(this.arguments.node?this.arguments.node:"no path")+")"},onEnd:function(a,b,c){this.log(a);if(this.arguments&&this.arguments.node){var d=App.Path.pop(this.arguments.node);App.ui.filesTree.refreshDocument(App.DocumentStore.tree.getNodeById(d))}}}),App.TaskRunner.taskStore=Ext.create("Ext.data.Store",{model:"App.TaskRunner.Task",proxy:{type:"memory",reader:"json"},data:[]}),App.Stylesheet={Highlight:{strokeWidth:10,fill:"#FF9",stroke:"#FF9",opacity:.7,padding:0},Draw:{fill:"#fff","fill-opacity":.5,stroke:"#000","stroke-width":"1px","stroke-dasharray":"--"},Proxy:{strokeWidth:.5,stroke:"#99BBE8",fill:"#99BBE8",fillOpacity:.5,opacity:.5}},App.gluer=function(a,b){this.id=App.getId(),this.o1=a,this.o2=b,this.o1.source.on(a.eventName,this.onO1,this),this.o2.source.on(b.eventName,this.onO2,this),this.o1.source.on("destroy",this.destroy,this),this.o2.source.on("destroy",this.destroy,this),this.ignore=!1},Ext.extend(App.gluer,{onO1:function(){this.ignore||(this.ignore=!0,this.o2.handler.apply(this.o2.source,arguments),this.ignore=!1)},onO2:function(){this.ignore||(this.ignore=!0,this.o1.handler.apply(this.o1.source,arguments),this.ignore=!1)},destroy:function(){this.o1.source.un(o1.eventName,this.onO1,this),this.o2.source.un(o2.eventName,this.onO2,this),this.o1.source.un("destroy",this.destroy,this),this.o2.source.un("destroy",this.destroy,this),App.unglue(this.id,!1)}}),App.glue=function(){var a={};return App.unglue=function(b,c){c=c||!1,c&&a[b]&&a[b].destroy(),delete a[b]},function(b,c){var d=new App.gluer(b,c);a[d.id]=d}}(),App.mixin=function(a,b){Ext.override(a,b.prototype)},App.Registry=function(a){this.tname=a;var b={};Ext.apply(this,{register:function(a,c){b[a]=c,c.prototype[this.tname]=a,c[this.tname]=a},getType:function(a){return b[a]},hasType:function(a){return this.getType(a)!=0},create:function(a,b){if(this.hasType(a)){var c=this.getType(a);return new c(b)}}})};
App.scriptsUrl="/scripts",App.setEndpoint("upload","upload"),App.setEndpoint("save","save"),App.setEndpoint("load","load");
Ext.define("App.Document",{extend:"Ext.data.Model",fields:[{name:"text",type:"string"},{name:"type",type:"string"},{name:"trigger",type:"string"},{name:"node",type:"string"},{name:"size",type:"int"},{name:"preventRename",type:"bool",defaultValue:!1}],isLeaf:!0,iconCls:"document-error",getDocumentPath:function(){return this.get("node")},getBasename:function(){return App.Path.basename(this.getDocumentPath())},getExt:function(){return App.Path.extname(this.getDocumentPath())},getFolder:function(){return this.isLeaf()&&!this.isRoot()?this.parentNode:this},getSibling:function(a,b,c){return c=c||!1,this.parentNode?this.parentNode.findChildBy.apply(this.parentNode,arguments):!1},getSiblingByName:function(a){return this.getSibling(function(b){return b.get("text")==a})},createSibling:function(a){var b=this.parentNode?this.parentNode:this;return App.ui.filesTree.newFile(b,a)},download:function(){var a=Ext.urlAppend(App.getEndpoint("load"),Ext.Object.toQueryString({node:this.getDocumentPath(),download:!0}));window.open(a,"_blank")},loadBody:function(a){(function(a,b){Ext.applyIf(a,{success:function(){},failure:function(){},scope:window}),req={url:App.getEndpoint("load"),method:"GET",params:{node:b.getDocumentPath()},success:function(c){Ext.bind(a.success,a.scope)(c.responseText,b,c)},failure:function(c){Ext.bind(a.failure,a.scope)(c.responseText,b,c)}},Ext.Ajax.request(req)})(a,this)},saveBody:function(a,b){(function(a,b,c){Ext.applyIf(b,{success:function(){},failure:function(){},scope:window}),req={url:App.getEndpoint("save"),method:"POST",params:{data:a,node:c.getDocumentPath()},success:function(a){Ext.bind(b.success,b.scope)(a.responseText,c,a)},failure:function(a){Ext.bind(b.failure,b.scope)(a.responseText,c,a)}},Ext.Ajax.request(req)})(a,b,this)},checkout:function(a){this.app=a,this.fireEvent("checkout",this,a)}}),Ext.define("App.DocumentTreeStore",{constructor:function(){Ext.apply(this,{proxy:{batchActions:!1,type:"ajax",api:{create:"/new",read:"/tree",update:"/rename",destroy:"/delete"},reader:{type:"json"},writer:{type:"json",nameProperty:"name"},listeners:{exception:function(a,b,c){_.each(c.getRecords(),function(a){a.set("iconCls","document-error"),a.set("isLeaf","false")})}}}}),this.callParent(arguments)},extend:"Ext.data.TreeStore",model:"App.Document",folderSort:!0,autoSync:!0,batchActions:!1,checkout:function(a,b){},afterEdit:function(a){a.fireEvent("edit",a),this.callParent(arguments)},afterReject:function(a){a.fireEvent("reject",a),this.callParent(arguments)},afterCommit:function(a){a.fireEvent("commit",a),this.callParent(arguments)}});
Ext.require("Ext.grid.property.Store"),Ext.grid.property.Store.override({getProperty:function(a){return Ext.isNumber(a)?this.store.getAt(a):this.store.getById(a)},setValue:function(a,b,c){var d=this.getRec(a);d?(d.set("value",b),this.source[a]=b):c&&(this.source[a]=b,d=new Ext.grid.property.Property({name:a,value:b},a),this.add(d))},remove:function(a){var b=this.getRec(a);b&&(this.remove(b),delete this.source[a])},getRec:function(a){return this.getById(a)}}),Ext.require("Ext.data.TreeStore"),Ext.data.TreeStore.override({load:function(a){a=a||{},a.params=a.params||{};var b=this,c=a.node||b.tree.getRootNode(),d;return c||(c=b.setRootNode({expanded:!0})),b.clearOnLoad&&c.removeAll(!1),Ext.applyIf(a,{node:c}),a.params[b.nodeParam]=c?c.getId():"root",c&&c.set("loading",!0),b.callParent([a])}});
Ext.define("Machine.core.Serializable",{extend:"Ext.util.Observable",alias:"SerializableObject",constructor:function(){this.callParent(arguments),this._readable={},this._writeable={},this._serializable={},this._userProperties={},this._previous={},this.addEvents("change","destroy","meta")},getId:function(){return this.id?this.id:(this.id=App.nextId(),this.id)},hasWType:function(){return this.isWType.apply(this,arguments)},isWType:function(a,b){if(Ext.isFunction(a))a=a.wtype;else if(Ext.isObject(a))a=a.constructor.wtype;else if(Ext.isArray(a)){var c="/"+this.getWTypes()+"/";return b?_.reduce(a,function(a,b){return a||this.constructor.wtype==b},!1):_.reduce(a,function(a,b){return a||c.indexOf("/"+b+"/")!=-1},!1)}return b?this.constructor.wtype==a:("/"+this.getWTypes()+"/").indexOf("/"+a+"/")!=-1},getWTypes:function(){var a=this.constructor;if(!a.wtypes){var b=[],c=this;while(c&&c.wtype)b.unshift(c.wtype),c=c.superclass;a.wtypeChain=b,a.wtypes=b.join("/")}return a.wtypes},serialize:function(a){a=a||!1;var b={wtype:this.wtype,id:this.getId()};if(!a){var c;for(var d in this._serializable)c=this.get(d),c=Workspace.Components.serialize(c,!0),b[d]=c}else b.isReference=!0;return b},deserialize:function(a){for(var b in a)this.set(b,Workspace.Utils.deserialize(a[b]))},getReadableHash:function(){var a={},b;for(var c in this._readable)b=this.get(c),b&&b.getId&&(b=b.getId()),a[c]=b;return a},exposeAll:function(a){for(var b in a)this.expose(b,!0,!0,!0,!0)},expose:function(a,b,c,d,e){b=b||!1,c=c||!1,d=d!==!1,e=e||!1,b&&(b=Ext.isFunction(b)?b:Ext.isFunction(this[b])?this[b]:b,Ext.isFunction(b)?this._readable[a]=b:this._readable[a]=this._makeGetter(a)),c&&(c=Ext.isFunction(c)?c:Ext.isFunction(this[c])?this[c]:c,Ext.isFunction(c)?this._writeable[a]=c:this._writeable[a]=this._makeSetter(a)),d&&(this._serializable[a]=!0),e&&(this._userProperties[a]=!0),this.fireEvent("meta",a,{readable:b,writeable:c,serializable:d,user:e})},_makeGetter:function(a){return Ext.bind(function(a){return this[a]},this,[a],!0)},_makeSetter:function(a){return Ext.bind(function(a,b){this[b]=a},this,[a],!0)},get:function(a){return this._readable[a]?this._readable[a].apply(this,Array.prototype.slice.call(arguments,1)):!1},has:function(a){return this._readable[a]?!0:!1},set:function(a,b,c){c||(c={}),c.silent||(c.silent=!1);var d=this.get(a);this._previous[a]=d,this._writeable[a]&&(c.silent=this._writeable[a].apply(this,Array.prototype.slice.call(arguments,1))||c.silent),c.silent||this.change(a,b,d)},change:function(a,b,c){this.fireEvent("change",a,b,c,this),this.fireEvent("change:"+a,b,c,this)},setMany:function(a,b){_(a).each(function(a,c){this.set(c,a,b)},this)},previous:function(a){return _.clone(this._previous[a])},previousValues:function(){return this._previous},realize:function(){},onChange:function(){this.on.apply(this,["change:"+arguments[0]].concat(Array.prototype.slice.call(arguments,1)))},destroy:function(){this.fireEvent("destroy",this)}}),Ext.override(Ext.util.MixedCollection,{serialize:function(a){a=a||!1;var b=!1;return this.keys.length>0?(b={},this.eachKey(function(c,d){b[c]=Workspace.Components.serialize(d,a)})):(b=[],this.each(function(c){b.push(Workspace.Components.serialize(c,a))})),b}});
Ext.Loader.setPath("Workspace","client/workspace"),Ext.define("Workspace",{wtype:"Workspace",extend:"Machine.core.Serializable",requires:["Ext.core.DomHelper"],uses:["Workspace.actions.CreateObjectAction","Workspace.actions.ChangePropertyAction","Workspace.actions.DuplicateObjectAction","Workspace.actions.DeleteObjectAction","Workspace.actions.FormIdeaAction","Workspace.actions.AdoptObjectAction","Workspace.actions.OrphanObjectAction","Workspace.actions.ExpandAction","Workspace.DDManager","Workspace.FileUploader","Workspace.tools.PointerTool","Workspace.tools.RectTool","Workspace.tools.TextTool","Workspace.tools.MathTool","Workspace.tools.PencilTool","Workspace.objects.Object","Workspace.objects.ObjectCollection"],constructor:function(a,b){this.callParent([]),Ext.apply(this,b,{id:App.nextId(),tools:[],scrollParams:{hthresh:50,vthresh:50,frequency:1e3}}),this.containerEl=a,this.element=Ext.get(Ext.core.DomHelper.append(a,{tagName:"div",cls:"workspace"})),this.paper=Raphael(this.element.id),this.ddManager=new Workspace.DDManager({workspace:this}),this.lens=new Workspace.Lens,this._objects=this.objects||{},this.objects=Ext.create("Workspace.objects.ObjectCollection"),this.selection=Ext.create("Workspace.objects.ObjectCollection"),this.activeTool="pointer";var c={},d;if(this.tools.length==0){var e=Workspace.Tools.getAllTools();for(var d in e)c[d]=Workspace.Tools.getNewTool(d,this)}else for(var f=0,g=this.tools.length;f<g;f++)d=this.tools[f],c[d]=Workspace.Tools.getNewTool(d,this);this.tools=c,this.getActiveTool().activate(),this.addEvents("click","dblclick","mousedown","mouseup","mousemove","select","unselect","toolchange"),this.ignore={click:!1,dblclick:!1,mousedown:!1,mouseup:!1,mousemove:!1},this.expose("objects",!0,!0,!1),this.expose("width",!0,!0),this.expose("height",!0,!0),this.on("change:width",this.onResize,this),this.on("change:height",this.onResize,this),Ext.Function.defer(this.initialize,1,this)},register:function(a){if(a.id)this.objects.add(a.id,a);else{var b=App.nextId();a.id=b,this.objects.add(b,a)}return a.id},unregister:function(a){this.objects.removeAtKey(a)},getObjectById:function(a){return this.objects.get(a)},serialize:function(a){if(a)return null;var b=Workspace.superclass.serialize.apply(this,arguments);return b.objects=this.objects.serialize(!1),b},initialize:function(){this.createObjects(this._objects),this.fireEvent("afterload",this),Ext.Function.defer(this.render,1,this)},render:function(){if(!this.width){var a=this.getContainerEl().getWidth(),b=this.getContainerEl().getHeight();this.resize(a,b)}else this.onResize();this.ddManager.render(),this.element.on("click",this.click,this,!1),this.element.on("dblclick",this.dblclick,this,!1),this.element.on("mousedown",this.mousedown,this,!1),this.element.on("mouseup",this.mouseup,this,!1),this.element.on("mousemove",this.mousemove,this,!1)},buildObject:function(){var a,b,c;return arguments.length==1?b=arguments[0]:arguments.length==2&&Ext.isFunction(arguments[0])&&(a=arguments[0],b=arguments[1]),Ext.apply(b,{workspace:this}),a?c=Workspace.Components.create(a,b):c=Workspace.Components.create(b),c},createObjects:function(a){var b=[],c;if(Ext.isArray(a))for(var d=0,e=a.length;d<e;d++){c=this.buildObject(a[d]);if(!c)throw{message:"Couldn't create object",data:a[d]};b.push(c),this.fireEvent("instantiate",c)}else if(Ext.isObject(a))for(var f in this._objects){c=this.buildObject(this._objects[f]);if(!c)throw{message:"Couldn't create object",data:this._objects[f]};b.push(c),this.fireEvent("instantiate",c)}if(b.length>0){for(var d=0,e=b.length;d<e;d++)c=b[d],c.initialize();for(var d=0,e=b.length;d<e;d++)c=b[d],c.render(),c.realize(),this.register(c),this.fireEvent("create",c)}},createObject:function(a,b){var c=this.buildObject.apply(this,arguments);if(!c)throw{message:"Couldn't create object",data:{objectClass:a,config:b}};return this.fireEvent("instantiate",c),c?(c.initialize(),c.render(),c.realize(),this.register(c),this.fireEvent("create",c),c):!1},deleteObjects:function(a){if(Ext.isArray(a))for(var b=0,c=a.length;b<c;b++)this.unselect(a[b]),a[b].destroy(),this.unregister(a[b].getId()),this.fireEvent("destroy",a[b]);else this.unselect(a),a.destroy(),this.unregister(a.getId()),this.fireEvent("destroy",a[b])},edit:function(a){this.editingItem=a,a.setState("editing",!0);if(a.editor&&this.hasTool(a.editor))return this.changeTool(a.editor),this.getActiveTool().attach(a)?!0:(this.editingItem=!1,a.setState("editing",!1),!1)},endEdit:function(){this.editingItem&&(this.getActiveTool().detach(),this.editingItem.setState("editing",!1),this.editingItem=!1),this.changeTool("pointer")},setSelection:function(a){Ext.type(a)=="array"&&(this.unselect(),this.select(a))},select:function(a){if(Ext.type(a)=="array"){var b=this.selection;Ext.each(a,function(a){a&&a.isSelectable&&(a.unselectAncestors(),a.unselectDescendents(),this.selection.add(a.getId(),a),a.setState("selected",!0),a.fireEvent("select",a),this.fireEvent("select",a))},this)}else if(Ext.isFunction(a.getId)){var c=a;c&&c.isSelectable&&(c.unselectAncestors(),c.unselectDescendents(),this.selection.add(c.getId(),c),c.setState("selected",!0),c.fireEvent("select",c),this.fireEvent("select",c))}},unselect:function(a){if(a){if(Ext.type(a)=="array"){var b=this.selection;Ext.each(a,function(a){this.selection.removeAtKey(a.getId()),a.setState("selected",!1),a.fireEvent("unselect",a),this.fireEvent("unselect",a)},this)}else if(Ext.isFunction(a.getId)){var c=a;this.selection.removeAtKey(c.getId()),c.setState("selected",!1),c.fireEvent("unselect",c),this.fireEvent("unselect",c)}}else this.selection.each(function(a){a.setState("selected",!1),a.fireEvent("unselect",a),this.fireEvent("unselect",a)},this),this.selection.clear()},deselect:function(a){this.unselect(a)},hasSelection:function(){var a=this.selection.getCount();return a>0},getSelection:function(){return this.selection.getRange()},getSelectionWType:function(){return this.selection.getCommonWType()},getAllObjects:function(){return this.objects.getRange()},getRootObjects:function(a){return this.filterObjectsBy(function(a){return!a.hasParent()},a)},findObjectBy:function(a,b){switch(b){case"selection":return _.find(this.getSelection(),a);case"all":default:return _.find(this.getAllObjects(),a)}},filterObjectsBy:function(a,b){switch(b){case"selection":return _.filter(this.getSelection(),a);case"all":default:return _.filter(this.getAllObjects(),a)}},getActiveTool:function(){return this.tools[this.activeTool]},setActiveTool:function(a){var b=this.activeTool;this.getActiveTool().deactivate(),this.activeTool=a,this.getActiveTool().activate(),this.fireEvent("toolchange",a,b)},changeTool:function(a){this.setActiveTool(a)},hasTool:function(a){return this.tools[a]!=0},getObjectFromEvent:function(a){return a?a.getId?a:!1:!1},click:function(a,b){b=this.getObjectFromEvent(b),this.getActiveTool().click(a,b)},dblclick:function(a,b){b=this.getObjectFromEvent(b),this.getActiveTool().dblclick(a,b)},mousedown:function(a,b){b=this.getObjectFromEvent(b),this.fireEvent("mousedown",a,b)&&this.getActiveTool().mousedown(a,b)},mouseup:function(a,b){b=this.getObjectFromEvent(b),this.fireEvent("mouseup",a,b)&&this.getActiveTool().mouseup(a,b)},mouseover:function(a,b){b=this.getObjectFromEvent(b),this.getActiveTool().mouseover(a,b)},mouseout:function(a,b){b=this.getObjectFromEvent(b),this.getActiveTool().mouseout(a,b)},mousemove:function(a,b){b=this.getObjectFromEvent(b),!this.fireEvent("mousemove",a,b),this.getActiveTool().mousemove(a,b)},getPath:function(){return this.path},bodyResize:function(a,b,c){this.fireEvent("bodyresize"),this.expandToVisible()},expandToVisible:function(){var a=this.getVisibleSize(),b=this.lens.getZoom();a.width/b>this.get("width")&&this.set("width",a.width/b),a.height/b>this.get("height")&&this.set("height",a.height/b)},getVisibleSize:function(){return{width:this.containerEl.getWidth(),height:this.containerEl.getHeight()}},getVisibleDimensions:function(){return this.getVisibleSize()},resize:function(a,b){this.set("width",a),this.set("height",b)},expand:function(a,b){a=a||100,b=b||100,this.set("width",this.getWidth()+a),this.set("height",this.getHeight()+b)},getWidth:function(){return this.get("width")},getHeight:function(){return this.get("height")},onResize:function(){var a=this.lens.getZoom();a<1&&(a=1),this.getEl().setSize(this.getWidth()*a,this.getHeight()*a),this.getPaper().setSize(this.getWidth()*a,this.getHeight()*a)},addElement:function(a){return Ext.get(Ext.core.DomHelper.append(this.element,a))},getEl:function(){return this.element},refreshEl:function(){this.element=Ext.get(this.element.id)},getPaper:function(){return this.paper},getContainerEl:function(){return this.containerEl},doAction:function(a){a.handler&&(a.attachTo(this),a.handler.apply(a.scope))},destroy:function(){Ext.each(this.scrollers,function(a){a.render()}),this.paper.remove(),this.element.un("click",this.click,this,!1),this.element.un("dblclick",this.dblclick,this,!1),this.element.un("mousedown",this.mousedown,this,!1),this.element.un("mouseup",this.mouseup,this,!1),this.element.un("mousemove",this.mousemove,this,!1)},zoomTo:function(a){this.lens.setZoom(a);var b=$(this.getEl().dom);b.scale(a),this.expandToVisible(),this.onResize()}}),Workspace.Components=function(){var a={},b=new Ext.util.MixedCollection,c=Ext.create("Ext.data.ArrayStore",{fields:[{name:"wtype",type:"string"},{name:"name",type:"string"},{name:"iconCls",type:"string"}],data:[]});return{register:function(b,d){d.prototype.wtype=b,d.wtype=b,a[b]=d;var e={wtype:b};d.prototype&&d.prototype.iconCls&&(e.iconCls=d.prototype.iconCls),c.add(e)},getType:function(b){return a[b]},get:function(a){return b.get(a)},has:function(a){return b.containsKey(a)},create:function(){var c,d;arguments.length==1?(c=arguments[0],c&&c.wtype&&a[c.wtype]&&(d=a[c.wtype])):(d=arguments[0],c=arguments[1]);if(c&&d&&Ext.isFunction(d)){var e=new d(c);return b.add(e.getId(),e),e}return c.wtype&&Ext.create(c.wtype,c),!1},realize:function(a){if(a.wtype)return a.getId?a:a.id&&Workspace.Components.has(a.id)?Workspace.Components.get(a.id):Workspace.Components.create(a)},serialize:function(a,b){if(a&&a.serialize&&Ext.isFunction(a.serialize))return a.serialize(b);if(Ext.isArray(a)){var c=[];for(var d=0,e=a.length;d<e;d++)c.push(Workspace.Components.serialize(a[d],!0));return c}if(Ext.isObject(a)){var c={};for(var f in a)c[f]=Workspace.Components.serialize(a[f],!0);return c}return a},deserialize:function(a){return Ext.isObject(a)?a.wtype?Workspace.Components.realize(a):Workspace.Components.deserializeHash(a):Ext.isArray(a)?Workspace.Components.deserializeArray(a):a},deserializeHash:function(a){var b={};for(var c in a)b[c]=Workspace.Components.deserialize(a[c],!0);return b},deserializeArray:function(a){var b=[];for(var c=0,d=a.length;c<d;c++)b.push(Workspace.Components.deserialize(a[c],!0));return b},getTypeStore:function(){return c},defaultType:"Machine.core.Serializable",isWType:function(a,b){if(Ext.isString(a)){if(this.has(a)){if(a==b)return!0;var c=this.getType(a);do{if(!(c&&c.prototype&&c.prototype.superclass))break;c=c.prototype.superclass.constructor}while(c.wtype!=b);return c&&c.wtype&&c.wtype==b}}else if(Ext.isFunction(a.isWType))return a.isWType(b)}}}(),Workspace.reg=Workspace.Components.register,Workspace.Utils={deserialize:Workspace.Components.deserialize,serialize:Workspace.Components.serialize,ideaColor:function(){var a={},b=pv.Colors.category20().range(),c=-1;return function(d){d?(a[d]==undefined&&(a[d]=-1),e=a[d]):e=c;var e=e+1,f=e%b.length,g=Math.floor(e/b.length);return d?a[d]=e:c=e,b[f].darker(g).color}}(),bounds:function(a,b,c){return c=c||!1,b=b||!1,c!==!1&&a>c?c:b!==!1&&a<b?b:a},getBox:function(a){var b;if(a.length>0){b=a[0].getBox();var c=function(a){var c=a.getBox();c.tl.x<b.tl.x&&(b.tl.x=c.tl.x),c.tl.y<b.tl.y&&(b.tl.y=c.tl.y),c.br.x>b.br.x&&(b.br.x=c.br.x),c.br.y>b.br.y&&(b.br.y=c.br.y)};a.each?a.each(c):Ext.each(a,c)}else b={tl:{x:0,y:0},br:{x:0,y:0}};return Workspace.Utils.completeBox(b.tl,b.br)},getBBox:function(a,b,c,d){return{x:a,y:b,width:c,height:d}},completeBox:function(a,b){return{tl:a,tr:{x:b.x,y:a.y},br:b,bl:{x:a.x,y:b.y}}},padBox:function(a,b){var c=b/2;return a.tl.x-=c,a.tl.y-=c,a.br.x+=c,a.br.y+=c,Workspace.Utils.completeBox(a.tl,a.br)},boxUnion:function(a,b){return b.tl.x<a.tl.x&&(a.tl.x=b.tl.x),b.tl.y<a.tl.y&&(a.tl.y=b.tl.y),b.br.x>a.br.x&&(a.br.x=b.br.x),b.br.y>a.br.y&&(a.br.y=b.br.y),a}},Ext.ns("Workspace.tools"),Workspace.Tools=Workspace.tools.ToolManager=function(){var a={};return{register:function(b,c){a[b]=c},getToolClass:function(b){return a[b]},getAllTools:function(){return a},getNewTool:function(a,b,c){var d=Workspace.Tools.getToolClass(a);return new d(b,c)}}}(),Workspace.Layouts=new App.Registry("ltype"),Ext.define("Workspace.Lens",{constructor:function(a){Workspace.Lens.superclass.constructor.apply(this),Ext.apply(this,a,{origin:[0,0],zoom:1})},extend:"Ext.util.Observable",getOrigin:function(){return this.origin},getOriginX:function(){return this.origin[0]},getOriginY:function(){return this.origin[1]},getZoom:function(){return this.zoom},setZoom:function(a){this.zoom=a},getAdjustedXYcoords:function(a,b){return{x:(a-this.getOriginX())/this.getZoom(),y:(b-this.getOriginY())/this.getZoom()}},translateToViewX:function(a){return(a-this.getOriginX())*this.getZoom()},translateToViewY:function(a){return(a-this.getOriginY())*this.getZoom()},translateToViewWidth:function(a){return a*this.getZoom()},translateToViewHeight:function(a){return a*this.getZoom()},getX:function(a){return this.translateToViewX(a.get("x"))},getY:function(a){return this.translateToViewY(a.get("y"))},getWidth:function(a){return this.translateToViewWidth(a.get("width"))},getHeight:function(a){return this.translateToViewHeight(a.get("height"))},translateToRealX:function(a,b){return b/this.getZoom()+this.getOriginX()},translateToRealY:function(a,b){return b/this.getZoom()+this.getOriginY()},translateToRealWidth:function(a,b){return b/this.getZoom()},translateToRealHeight:function(a,b){return b/this.getZoom()},setX:function(a,b){return a.set("x",translateToRealX(b))},setY:function(a,b){return a.set("y",translateToRealY(b))},setWidth:function(a,b){return a.set("width",translateToRealWidth(b))},setHeight:function(a,b){return a.set("height",translateToRealHeight(b))}});
Ext.oldLog=Ext.log,Ext.apply(App,{log:function(a,b){b||(b={}),Ext.applyIf(b,{iconCls:"",silent:!1}),cp&&cp.rendered?(cp.log.call(cp,a,b),!b.silent&&cp.ownerCt.collapsed&&cp.ownerCt.expand()):Ext.oldLog&&Ext.oldLog.apply(Ext,arguments)},logf:function(a,b,c,d){App.log(String.format.apply(String,arguments))},dump:function(a){if(typeof a=="string"||typeof a=="number"||typeof a=="undefined"||Ext.isDate(a))App.log(a);else if(!a)App.log("null");else if(typeof a!="object")App.log("Unknown return type");else if(Ext.isArray(a))App.log("["+a.join(",")+"]");else{var b=["{\n"];for(var c in a){var d=typeof a[c];d!="function"&&d!="object"?b.push(Ext.String.format("  {0}: {1},\n",c,a[c])):(_.isArray(a[c])&&(d="array"),b.push(Ext.String.format("  {0}: {1},\n",c,d)))}var e=b.join("");e.length>3&&(e=e.substr(0,e.length-2)),App.log(e+"\n}")}},_timers:{},time:function(a){a=a||"def",Ext._timers[a]=(new Date).getTime()},timeEnd:function(a,b){var c=(new Date).getTime();a=a||"def";var d=String.format("{0} ms",c-Ext._timers[a]);return Ext._timers[a]=(new Date).getTime(),b!==!1&&App.log("Timer "+(a=="def"?d:a+": "+d)),d}}),Ext.apply(Ext,function(){function b(a,b){return'<div class="msg"><h3>'+a+"</h3><p>"+b+"</p></div>"}var a;return{msg:function(c,d){var e,f;arguments.length==3&&_.isObject(arguments[2])?e=arguments[2]:e={},_.defaults(e,{delay:3e3,scope:window}),a||(a=Ext.core.DomHelper.insertFirst(document.body,{id:"msg-div"},!0));var g;e.params?f=e.params:arguments.length>2&&(f=Array.prototype.slice.call(arguments,1)),f?g=Ext.String.format.apply(String,f):g=d;var h=Ext.core.DomHelper.append(a,b(c,g),!0);h.hide(),h.slideIn("t").ghost("t",{delay:e.delay,remove:!0}),Ext.callback(e.callback,e.scope,h,g)}}}()),Ext.debug={};
CodeMirror.defineMode("pepper",function(a,b){function j(a,b,c){return b.tokenize=c,c(a,b)}function l(a,b){return k=a,b}function m(a,b){var c=a.next();return c=='"'||c=="'"?j(a,b,n(c)):c=="#"?(a.skipToEnd(),l("comment","comment")):/\d/.test(c)?(a.eatWhile(/[\w\.]/),l("number","number")):c=="/"?a.eat("*")?j(a,b,o):a.eat("/")?(a.skipToEnd(),l("comment","comment")):(a.eatWhile(h),l("operator","operator")):h.test(c)?(a.eatWhile(h),l("operator")):i.test(c)?(a.eatWhile(i),l("word","pepper-dotParen")):g&&c=="$"?(a.eatWhile(/[\w\$_]/),l("word","variable")):(a.eatWhile(/[\w\$_]/),d&&d[a.current()]?l("keyword","keyword"):l("word","word"))}function n(a){return function(b,c){var d=!1,e,g=!1;while((e=b.next())!=null){if(e==a&&!d){g=!0;break}d=!d&&e=="\\"}if(g||!d&&!f)c.tokenize=m;return l("string","string")}}function o(a,b){var c=!1,d;while(d=a.next()){if(d=="/"&&c){b.tokenize=m;break}c=d=="*"}return l("comment","comment")}function p(a,b,c,d,e){this.indented=a,this.column=b,this.type=c,this.align=d,this.prev=e}function q(a,b,c){return a.context=new p(a.indented,b,c,null,a.context)}function r(a){return a.context=a.context.prev}var c=a.indentUnit,d=function(){function a(a){var b={},c=a.split(" ");for(var d=0;d<c.length;++d)b[c[d]]=!0;return b}var b="declare import component system sequence strand structure kinetic equal noninteracting";return a(b)}(),e=b.useCPP,f=b.multiLineStrings,g=b.$vars,h=/[+\-*&%=<>!?|]/,i=/[\.\(\)+]/,k;return{startState:function(a){return{tokenize:m,context:new p((a||0)-c,0,"top",!1),indented:0,startOfLine:!0}},token:function(a,b){var c=b.context;a.sol()&&(c.align==null&&(c.align=!1),b.indented=a.indentation(),b.startOfLine=!0);if(a.eatSpace())return null;var d=b.tokenize(a,b);return k=="comment"?d:(c.align==null&&(c.align=!0),k!=";"&&k!=":"||c.type!="statement"?k=="{"?q(b,a.column(),"}"):k=="["?q(b,a.column(),"]"):k=="("?q(b,a.column(),")"):k=="}"?(c.type=="statement"&&(c=r(b)),c.type=="}"&&(c=r(b)),c.type=="statement"&&(c=r(b))):k==c.type?r(b):c.type=="}"&&q(b,a.column(),"statement"):r(b),b.startOfLine=!1,d)},indent:function(a,b){if(a.tokenize!=m)return 0;var d=b&&b.charAt(0),e=a.context,f=d==e.type;return e.type=="statement"?e.indented+(d=="{"?0:c):e.align?e.column+(f?0:1):e.indented+(f?0:c)},electricChars:"{}[]()"}}),CodeMirror.defineMode("sequence",function(){return{token:function(a){if(a.sol()&&a.match(/^[\w\s-]+:\s+/))return"sequence-name";var b=a.next();switch(b){case"%":case"#":return a.skipToEnd(),"sequence-comment";case">":return a.skipToEnd(),"sequence-name";case"a":return"sequence-a";case"A":return"sequence-a";case"u":return"sequence-u";case"U":return"sequence-u";case"t":return"sequence-t";case"T":return"sequence-t";case"c":return"sequence-c";case"C":return"sequence-c";case"g":return"sequence-g";case"G":return"sequence-g";case"n":case"N":return"sequence-n"}if(b.match(/\d/))return"number"}}}),CodeMirror.defineMode("dd-sequence",function(){return{token:function(a){var b=a.next();switch(b){case"%":case"#":return a.skipToEnd(),"sequence-comment";case">":return a.skipToEnd(),"sequence-name";case"a":return"sequence-a";case"A":return"sequence-a-lock";case"u":return"sequence-u";case"U":return"sequence-u-lock";case"t":return"sequence-t";case"T":return"sequence-t-lock";case"c":return"sequence-c";case"C":return"sequence-c-lock";case"g":return"sequence-g";case"G":return"sequence-g-lock";case"n":case"N":return"sequence-n"}if(b.match(/\d/))return"number"}}}),CodeMirror.defineMode("nupack",function(a){var b=CodeMirror.getMode(a,"sequence");return{startState:function(){return{value:""}},token:function(a,c){if(a.eatSpace())return"";if(c.value==""){if(a.eat("%"))return a.skipToEnd(),"comment";if(a.match("structure",!0,!0))return c.value="structure-definition-left","keyword";if(a.match("sequence",!0,!0)||a.match("domain",!0,!0))return c.value="sequence-definition-left","keyword";if(a.match("strand",!0,!0))return c.value="structure-name","keyword";c.value="structure-name"}else{if(c.value=="structure-definition-left")return a.eatWhile(/\S/),c.value="structure-definition-assign","nupack-structure";if(c.value=="structure-definition-assign")return a.eatWhile(/[\S=]/),c.value="structure-definition-right","operator";if(c.value=="structure-definition-right")return a.skipToEnd(),c.value="","nupack-huplus";if(c.value=="sequence-definition-left")return a.eatWhile(/\S/),c.value="sequence-definition-assign","string";if(c.value=="sequence-definition-assign")return a.eatWhile(/[\S=]/),c.value="sequence-definition-right","operator";if(c.value=="sequence-definition-right"){var d=b.token(a);return a.eol()&&(c.value=""),d}if(c.value=="structure-name")return a.eatWhile(/\S/),c.value="structure-assign","variable";if(c.value=="structure-assign")return a.eat("=")||a.eat(":")?(c.value="structure-thread","operator"):a.eat("<")?(c.value="structure-objection","operator"):(a.skipToEnd(),c.value="","nupack-error");if(c.value=="structure-thread")return a.skipToEnd(),c.value="","string";if(c.value=="structure-objection")return a.skipToEnd(),c.value="","qualifier"}}}}),CodeMirror.tokenize=function(a,b,c){var d=CodeMirror.getMode({indentUnit:2},b),e=CodeMirror.splitLines(a),f=CodeMirror.startState(d),g,h=[];for(var i=0,j=e.length;i<j;++i){h[i]=[],g=new CodeMirror.StringStream(e[i]);while(!g.eol()){var k=d.token(g,f);!k||h[i].push([k,g.current()]),g.start=g.pos}}return h};
App.geom=App.Geom=function(){function a(a){this.x=a.x,this.y=a.y}function b(a){this.theta=a}return _.extend(a.prototype,{toArray:function(){return[this.x,this.y]},toPos:function(){return{x:this.x,y:this.y}},add:function(b){var c=a.fromMixed(b);return new a({x:this.x+c.x,y:this.y+c.y})},subtract:function(b){var c=a.fromMixed(b);return new a({x:this.x-c.x,y:this.y-c.y})},distance:function(b){var c=a.fromMixed(b);return Math.sqrt(Math.pow(this.x-c.x,2)+Math.pow(this.y-c.y,2))},angle:function(b){if(b){var c=a.fromMixed(b);return Math.atan2(c.y-this.y,c.x-this.x)}return Math.atan2(this.y,this.x)},addPolar:function(b,c){return new a({x:this.x+Math.cos(b)*c,y:this.y+Math.sin(b)*c})},midpoint:function(b){var c=a.fromMixed(b);return new a({x:this.x+(c.x-this.x)/2,y:this.y+(c.y-this.y)/2})}}),_.extend(a,{fromArray:function(b){return new a({x:b[0],y:b[1]})},fromPos:function(b){return new a(b)},fromMixed:function(b){if(b instanceof a)return b;if(_.isArray(b))return a.fromArray(b);if(_.isObject(b)&&b.x&&b.y)return a.fromPos(b)}}),_.extend(b.prototype,{rad:function(){return this.type=="rad"?this.theta:this.theta*Math.PI/180},deg:function(){return this.type=="deg"?this.theta:this.theta/180*Math.PI}}),_.extend(b,{fromRad:function(a){var c=new b(a);return c.type="rad",c},fromDeg:function(a){var c=new b(a);return c.type="deg",c}}),{Point:a}}();
typeof require=="function"?_=require("underscore"):exports={},exports.DNA=function(){function Node(){this.value,this.tracebackI,this.tracebackJ}function scoringMatrix_getScore(a,b){return a=a.toLowerCase(),b=b.toLowerCase(),a==b?this.match:this.mismatch}function ScoringMatrix(){this.mismatch,this.match}function setMismatch(a){this.mismatch=a}function setMatch(a){this.match=a}function Identity(){}function addReturns(a){return a=a.replace(/(.{60})/g,function(a,b,c,d){return b+"\n"}),a}function complement(a){return a=a.replace(/g/g,"1"),a=a.replace(/c/g,"2"),a=a.replace(/1/g,"c"),a=a.replace(/2/g,"g"),a=a.replace(/G/g,"1"),a=a.replace(/C/g,"2"),a=a.replace(/1/g,"C"),a=a.replace(/2/g,"G"),a=a.replace(/a/g,"1"),a=a.replace(/t/g,"2"),a=a.replace(/1/g,"t"),a=a.replace(/2/g,"a"),a=a.replace(/A/g,"1"),a=a.replace(/T/g,"2"),a=a.replace(/1/g,"T"),a=a.replace(/2/g,"A"),a=a.replace(/u/g,"a"),a=a.replace(/U/g,"A"),a=a.replace(/r/g,"1"),a=a.replace(/y/g,"2"),a=a.replace(/1/g,"y"),a=a.replace(/2/g,"r"),a=a.replace(/R/g,"1"),a=a.replace(/Y/g,"2"),a=a.replace(/1/g,"Y"),a=a.replace(/2/g,"R"),a=a.replace(/k/g,"1"),a=a.replace(/m/g,"2"),a=a.replace(/1/g,"m"),a=a.replace(/2/g,"k"),a=a.replace(/K/g,"1"),a=a.replace(/M/g,"2"),a=a.replace(/1/g,"M"),a=a.replace(/2/g,"K"),a=a.replace(/b/g,"1"),a=a.replace(/v/g,"2"),a=a.replace(/1/g,"v"),a=a.replace(/2/g,"b"),a=a.replace(/B/g,"1"),a=a.replace(/V/g,"2"),a=a.replace(/1/g,"V"),a=a.replace(/2/g,"B"),a=a.replace(/d/g,"1"),a=a.replace(/h/g,"2"),a=a.replace(/1/g,"h"),a=a.replace(/2/g,"d"),a=a.replace(/D/g,"1"),a=a.replace(/H/g,"2"),a=a.replace(/1/g,"H"),a=a.replace(/2/g,"D"),a}function reverse(a){var b=new Array;return a.search(/./)!=-1&&(b=a.match(/./g),b=b.reverse(),a=b.join("")),a}function reverseComplement(a){return reverse(complement(a))}function parseComplement(a){a=a.trim();if(a.length>1)if(a[a.length-1]=="*"||a[a.length-1]=="'")return-1*parseInt(a.substr(0,a.length-1));return parseInt(a)}function parseStrandSpec(a,b){b||(b=" ");var c=a.split(b),d=[];for(var e=0;e<c.length;e++)d.push(parseComplement(c[e]));return d}function amax(a){return Math.abs(_.max(a,Math.abs))}function mapUnique(a,b){b||(b=0);var c={};return a=_.uniq(a,!0),_.each(a,function(a,d){c[a]=d+b}),c}function absUnique(a){return _.uniq(_.map(a,Math.abs))}function sign(a){return a>0?1:a<0?-1:0}function tablify(a){var b=a.split("\n"),c=[];return _.each(b,function(a){c.push(a.split("\t"))}),c}function indexTable(a){var b={};return _.each(a,function(a){a.length>1&&(b[a[0]]||(b[a[0]]={}),b[a[0]][a[1]]=a.length>3?a.slice(2):a[2])}),b}function indexBy(a,b,c){var d={};return _.each(c,function(c){d[c[a]]||(d[c[a]]={}),d[c[a]][c[b]]=c}),d}function stripNupackHeaders(a){var b=a.split("\n");while(b[0]&&b[0][0]=="%")b.shift();return b.join("\n")}function nupackBlocks(a){return _.each(a.split("% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %"),function(a){})}var AlignPairLinear=function(){function a(){if(this.M.length==0)for(var a=1;a<=this.N.length;a++)this.alignedM.push("-"),this.alignedN.push(this.N[a-1]),this.score=this.score+this.scoreSet.gap;else if(this.N.length==0)for(var a=1;a<=this.M.length;a++)this.alignedN.push("-"),this.alignedM.push(this.M[a-1]),this.score=this.score+this.scoreSet.gap;else(this.M.length!=0||this.N.length!=0)&&this.path(0,0,this.M.length,this.N.length)}function b(a,b,c,d){if(a+1==c||b==d){var e=new Array,f=new Array;for(var g=a+1;g<=c;g++)e.push(this.M[g-1]);for(var h=b+1;h<=d;h++)f.push(this.N[h-1]);var i=new AlignPairQuad;subScoreSet=new ScoreSet,b==d?b==0?subScoreSet.setScoreSetParam(this.scoreSet.scoringMatrix,this.scoreSet.beginGap,this.scoreSet.beginGap,this.scoreSet.beginGap):b==this.N.length?subScoreSet.setScoreSetParam(this.scoreSet.scoringMatrix,this.scoreSet.endGap,this.scoreSet.endGap,this.scoreSet.endGap):subScoreSet.setScoreSetParam(this.scoreSet.scoringMatrix,this.scoreSet.gap,this.scoreSet.gap,this.scoreSet.gap):(subScoreSet.setScoreSetParam(this.scoreSet.scoringMatrix,this.scoreSet.gap,this.scoreSet.beginGap,this.scoreSet.endGap),subScoreSet.useBeginGapTop=!1,subScoreSet.useBeginGapLeft=!1,subScoreSet.useEndGapBottom=!1,subScoreSet.useEndGapRight=!1,a==0&&(subScoreSet.useBeginGapTop=!0),b==0&&(subScoreSet.useBeginGapLeft=!0),d==this.N.length&&(subScoreSet.useEndGapRight=!0),c==this.M.length&&(subScoreSet.useEndGapBottom=!0)),i.initializeMatrix(e,f,subScoreSet),i.fillMatrix(),i.align(),this.alignedM.push(i.getAlignedM()),this.alignedN.push(i.getAlignedN()),this.score=this.score+i.score}else{var j=Math.floor((a+c)/2);this.Sn[b]=0;if(a==0)for(var h=b+1;h<=d;h++)this.Sn[h]=this.Sn[h-1]-this.scoreSet.beginGap;else for(var h=b+1;h<=d;h++)this.Sn[h]=this.Sn[h-1]-this.scoreSet.gap;var k,l;for(var g=a+1;g<=j;g++){k=this.Sn[b],l,b==0?l=this.Sn[b]-this.scoreSet.beginGap:l=this.Sn[b]-this.scoreSet.gap,this.Sn[b]=l;for(var h=b+1;h<=d;h++)h==this.N.length&&g==this.M.length?l=Math.max(this.Sn[h]-this.scoreSet.endGap,Math.max(l-this.scoreSet.endGap,k+this.scoreSet.getScore(this.M[g-1],this.N[h-1]))):g==this.M.length?l=Math.max(this.Sn[h]-this.scoreSet.gap,Math.max(l-this.scoreSet.endGap,k+this.scoreSet.getScore(this.M[g-1],this.N[h-1]))):h==this.N.length?l=Math.max(this.Sn[h]-this.scoreSet.endGap,Math.max(l-this.scoreSet.gap,k+this.scoreSet.getScore(this.M[g-1],this.N[h-1]))):l=Math.max(this.Sn[h]-this.scoreSet.gap,Math.max(l-this.scoreSet.gap,k+this.scoreSet.getScore(this.M[g-1],this.N[h-1]))),k=this.Sn[h],this.Sn[h]=l}this.Sp[d]=0;if(c==this.M.length)for(var h=d-1;h>=b;h--)this.Sp[h]=this.Sp[h+1]-this.scoreSet.endGap;else for(var h=d-1;h>=b;h--)this.Sp[h]=this.Sp[h+1]-this.scoreSet.gap;var m;for(var g=c-1;g>=j;g--){k=this.Sp[d],d==this.N.length?m=this.Sp[d]-this.scoreSet.endGap:m=this.Sp[d]-this.scoreSet.gap,this.Sp[d]=m;for(var h=d-1;h>=b;h--)h==0&&g==0?m=Math.max(this.Sp[h]-this.scoreSet.beginGap,Math.max(m-this.scoreSet.beginGap,k+this.scoreSet.getScore(this.M[g+1-1],this.N[h+1-1]))):h==0?m=Math.max(this.Sp[h]-this.scoreSet.beginGap,Math.max(m-this.scoreSet.gap,k+this.scoreSet.getScore(this.M[g+1-1],this.N[h+1-1]))):g==0?m=Math.max(this.Sp[h]-this.scoreSet.gap,Math.max(m-this.scoreSet.beginGap,k+this.scoreSet.getScore(this.M[g+1-1],this.N[h+1-1]))):m=Math.max(this.Sp[h]-this.scoreSet.gap,Math.max(m-this.scoreSet.gap,k+this.scoreSet.getScore(this.M[g+1-1],this.N[h+1-1]))),k=this.Sp[h],this.Sp[h]=m}var n=this.Sn[b]+this.Sp[b],o=b;for(var h=b+1;h<=d;h++)this.Sn[h]+this.Sp[h]>=n&&(n=this.Sn[h]+this.Sp[h],o=h);this.path(a,b,j,o),this.path(j,o,c,d)}}function c(){return this.alignedM.join("")}function d(){return this.alignedN.join("")}function e(a,b,c){this.M=a,this.N=b,this.alignedM=new Array,this.alignedN=new Array,this.scoreSet=c,this.Sn=new Array(this.N.length),this.Sp=new Array(this.N.length),this.score=0}function f(){this.M,this.N,this.alignedM,this.alignedN,this.scoreSet,this.Sn,this.Sp,this.score}return new f,f.prototype.align=a,f.prototype.path=b,f.prototype.setAlignParam=e,f.prototype.getAlignedM=c,f.prototype.getAlignedN=d,f}(),AlignPairQuad=function(){function a(a,b,c){this.scoreSet=c,this.M=a,this.N=b,this.score=0,this.nodes=new Array(this.M.length+1);for(var d=0;d<this.nodes.length;d++){this.nodes[d]=new Array(this.N.length+1);for(var e=0;e<this.nodes[d].length;e++)this.nodes[d][e]=new Node}this.nodes[0][0].value=0;for(var d=1;d<this.nodes.length;d++)this.scoreSet.useBeginGapLeft?this.nodes[d][0].value=this.nodes[d-1][0].value-this.scoreSet.beginGap:this.nodes[d][0].value=this.nodes[d-1][0].value-this.scoreSet.gap,this.nodes[d][0].tracebackI=d-1,this.nodes[d][0].tracebackJ=0;for(var e=1;e<this.nodes[0].length;e++)this.scoreSet.useBeginGapTop?this.nodes[0][e].value=this.nodes[0][e-1].value-this.scoreSet.beginGap:this.nodes[0][e].value=this.nodes[0][e-1].value-this.scoreSet.gap,this.nodes[0][e].tracebackI=0,this.nodes[0][e].tracebackJ=e-1}function b(){outputWindow.document.write("Dynamic programming matrix i="+this.nodes.length+" and j="+this.nodes[0].length),outputWindow.document.write("\n");for(var a=0;a<this.nodes.length;a++){for(var b=0;b<this.nodes[a].length;b++){var c=this.nodes[a][b].tracebackI,d=this.nodes[a][b].tracebackJ;c==undefined&&(c="u"),d==undefined&&(d="u");var e="("+a+","+b+")["+c+","+d+"]="+this.nodes[a][b].value;outputWindow.document.write(rightNum(e,"",20," "))}outputWindow.document.write("\n")}outputWindow.document.write("\n")}function c(){for(var a=1;a<this.nodes.length;a++)for(var b=1;b<this.nodes[0].length;b++){var c,d,e;a==this.nodes.length-1&&b==this.nodes[0].length-1?(this.scoreSet.useEndGapRight?c=this.nodes[a-1][b].value-this.scoreSet.endGap:c=this.nodes[a-1][b].value-this.scoreSet.gap,this.scoreSet.useEndGapBottom?d=this.nodes[a][b-1].value-this.scoreSet.endGap:d=this.nodes[a][b-1].value-this.scoreSet.gap):a==this.nodes.length-1?(c=this.nodes[a-1][b].value-this.scoreSet.gap,this.scoreSet.useEndGapBottom?d=this.nodes[a][b-1].value-this.scoreSet.endGap:d=this.nodes[a][b-1].value-this.scoreSet.gap):b==this.nodes[0].length-1?(this.scoreSet.useEndGapRight?c=this.nodes[a-1][b].value-this.scoreSet.endGap:c=this.nodes[a-1][b].value-this.scoreSet.gap,d=this.nodes[a][b-1].value-this.scoreSet.gap):(c=this.nodes[a-1][b].value-this.scoreSet.gap,d=this.nodes[a][b-1].value-this.scoreSet.gap),e=this.nodes[a-1][b-1].value+this.scoreSet.getScore(this.M[a-1],this.N[b-1]),c>=d&&c>=e?(this.nodes[a][b].value=c,this.nodes[a][b].tracebackI=a-1,this.nodes[a][b].tracebackJ=b):d>=e&&d>=c?(this.nodes[a][b].value=d,this.nodes[a][b].tracebackI=a,this.nodes[a][b].tracebackJ=b-1):(this.nodes[a][b].value=e,this.nodes[a][b].tracebackI=a-1,this.nodes[a][b].tracebackJ=b-1)}this.score=this.nodes[this.nodes.length-1][this.nodes[0].length-1].value}function d(){this.alignedM=new Array,this.alignedN=new Array;var a=this.nodes.length-1,b=this.nodes[0].length-1,c=this.nodes[this.nodes.length-1][this.nodes[0].length-1];while(c.tracebackI!=undefined&&c.tracebackJ!=undefined)c.tracebackI==a-1&&c.tracebackJ==b-1?(this.alignedM.push(this.M.pop()),this.alignedN.push(this.N.pop())):c.tracebackJ==b-1?(this.alignedM.push("-"),this.alignedN.push(this.N.pop())):(this.alignedM.push(this.M.pop()),this.alignedN.push("-")),a=c.tracebackI,b=c.tracebackJ,c=this.nodes[c.tracebackI][c.tracebackJ];this.alignedM=this.alignedM.reverse(),this.alignedN=this.alignedN.reverse()}function e(){return this.alignedM.join("")}function f(){return this.alignedN.join("")}function g(){this.M,this.N,this.scoreSet,this.nodes,this.alignedM,this.alignedN,this.score}return new g,g.prototype.initializeMatrix=a,g.prototype.fillMatrix=c,g.prototype.align=d,g.prototype.getAlignedM=e,g.prototype.getAlignedN=f,g.prototype.dumpMatrix=b,g}(),ScoreSet=function(){function a(a,b){return this.scoringMatrix.scoringMatrix_getScore(a,b)}function b(a,b,c,d){this.scoringMatrix=a,this.gap=b,this.beginGap=c,this.endGap=d}function c(){this.scoringMatrix,this.gap,this.beginGap,this.endGap,this.useBeginGapTop=!0,this.useBeginGapLeft=!0,this.useEndGapBottom=!0,this.useEndGapRight=!0}return new c,c.prototype.getScore=a,c.prototype.setScoreSetParam=b,c}();return new ScoringMatrix,ScoringMatrix.prototype.scoringMatrix_getScore=scoringMatrix_getScore,Identity.prototype=new ScoringMatrix,Identity.prototype.setMismatch=setMismatch,Identity.prototype.setMatch=setMatch,{mapUnique:mapUnique,absUnique:absUnique,amax:amax,parseComplement:parseComplement,parseStrandSpec:parseStrandSpec,stripNupackHeaders:stripNupackHeaders,indexTable:indexTable,indexBy:indexBy,tablify:tablify,addReturns:addReturns,reverse:reverse,complement:complement,reverseComplement:reverseComplement,pairwiseAlign:function(a,b,c,d,e,f,g){c||(c=2),d||(d=-1),e||(e=-2),f||(f=0),g||(g=0);var h=!0,i=!1,j=new Identity;j.setMatch(c),j.setMismatch(d);var k=new ScoreSet;k.setScoreSetParam(j,e,f,g);var l;if(h)return l=new AlignPairLinear,l.setAlignParam(a,b,k),l.align(),{sequences:[l.getAlignedM(),l.getAlignedN()],score:l.score};if(i)return l=new AlignPairQuad,l.initializeMatrix(a,b,k),l.fillMatrix(),l.align(),{sequences:[l.getAlignedM(),l.getAlignedN()],score:l.score}},sequenceStats:function(sequence){var list={g:["/g/",1,1],a:["/a/",1,1],t:["/t/",1,1],c:["/c/",1,1],n:["/n/",1],u:["/u/",1,1],r:["/r/",1],y:["/y/",1],s:["/s/",1],w:["/w/",1],k:["/k/",1],m:["/m/",1],b:["/b/",1],d:["/d/",1],h:["/h/",1],v:["/v/",1],gg:["/g(?=g)/",2],ga:["/g(?=a)/",2],gt:["/g(?=t)/",2],gc:["/g(?=c)/",2],gn:["/g(?=n)/",2],ag:["/a(?=g)/",2],aa:["/a(?=a)/",2],at:["/a(?=t)/",2],ac:["/a(?=c)/",2],an:["/a(?=n)/",2],tg:["/t(?=g)/",2],ta:["/t(?=a)/",2],tt:["/t(?=t)/",2],tc:["/t(?=c)/",2],tn:["/t(?=n)/",2],cg:["/c(?=g)/",2],ca:["/c(?=a)/",2],ct:["/c(?=t)/",2],cc:["/c(?=c)/",2],cn:["/c(?=n)/",2],ng:["/n(?=g)/",2],na:["/n(?=a)/",2],nt:["/n(?=t)/",2],nc:["/n(?=c)/",2],nn:["/n(?=n)/",2],"g,c":["/g|c/",1],"a,t":["/a|t/",1],"r,y,s,w,k":["/r|y|s|w|k/",1],"b,h,d,v,n":["/b|h|d|v|n/",1],"r,y,s,w,k,m,b,d,h,v,n":["/r|y|s|w|k|m|b|d|h|v|n/",1]},originalLength=sequence.length,full=[],abbr=[];for(var name in list){var tempNumber=0,matchExp=list[name][0];matchExp=eval(matchExp+"gi"),sequence.search(matchExp)!=-1&&(tempNumber=sequence.match(matchExp).length);var percentage=0,atcguPercent=0;originalLength+1-parseFloat(list[name][1])>0&&(percentage=tempNumber/(originalLength+1-list[name][1])),full.push({name:name,count:tempNumber,percent:percentage.toFixed(2)}),"a c g t u".indexOf(name)!=-1&&tempNumber>0&&abbr.push({name:name,count:tempNumber,percent:percentage.toFixed(2)})}return{full:full,abbr:abbr}},levenshtein:function(a,b){if(a==b)return 0;var c=a.length,d=b.length;if(c===0)return d;if(d===0)return c;var e=!1;try{e=!"0"[0]}catch(f){e=!0}e&&(a=a.split(""),b=b.split(""));var g=new Array(c+1),h=new Array(c+1),i=0,j=0,k=0;for(i=0;i<c+1;i++)g[i]=i;var l="",m="";for(j=1;j<=d;j++){h[0]=j,m=b[j-1];for(i=0;i<c;i++){l=a[i],k=l==m?0:1;var n=g[i+1]+1,o=h[i]+1,p=g[i]+k;o<n&&(n=o),p<n&&(n=p),h[i+1]=n}var q=g;g=h,h=q}return g[c]},hamming:function(a,b){return _.reduce(_.map(_.zip(a.split(""),b.split("")),function(a,b){return a!=b}),function(a,b){return a+b})},generateAdjacency:function(a,b,c,d){c=c||!1,d||(d={}),_.extend(d,{strandValue:9,hybridizationValue:2,radius:300,segments:{},segmentLabels:!1});var e=[],f=[],g=[],h=0,i,j=0,k=0,l=0,m=Math.PI/a.length,n=null;if(d.segmentLabels){var o=_.keys(d.segments),p={};for(var q=0;q<o.length-1;q++)p[Math.round((o[q]+o[q+1])/2)]=d.segments[o[q]]}for(var q=0;q<a.length;q++){if(a[q]=="+")h++,j--,k=0;else{d.segments[q]&&(n=d.segments[q]),i={strand:h,nodeName:b&&b[h]?b[h][k]:!1,base:b&&b[h]?b[h][k]:!1,segment:n};if(a[q]=="(")g.push(j);else if(a[q]==")"){var r={source:g.pop(),target:j,value:d.hybridizationValue,type:"wc"};d.ppairs&&(d.ppairs[r.source+1]&&d.ppairs[r.source+1][r.target+1]?(r.probability=parseFloat(d.ppairs[r.source+1][r.target+1]),i.probability=r.probability,e[r.source]&&(e[r.source].probability=r.probability)):d.ppairs[r.target+1]&&d.ppairs[r.target+1][r.source+1]&&(r.probability=parseFloat(d.ppairs[r.target+1][r.source+1]),i.probability=r.probability,e[r.target]&&(e[r.target].probability=r.probability)),!r.probability),f.push(r)}e.push(i),c&&j>0&&a[q-1]!="+"&&f.push({source:j,target:j-1,value:d.strandValue,type:"strand"}),l+=m}j++,k++}return{nodes:e,links:f}},generateAdjacency2:function(a,b){b||(b={}),_.defaults(b,{strandValue:9,hybridizationValue:2,radius:300,segments:{},segmentLabels:!1,linkStrands:!1});var c=b.linkStrands,d=[],e=[],f=[],g=0,h,i=0,j=0,k=0,l=null,i=0;for(var g=0;g<a.length;g++){var m=a[g],n=m.strand;if(m.structure)for(var o=0;o<m.structure.length;o++){var p=m.structure[o],q=p.segment,r=p.type,s=q.getSequence();for(var t=0;t<p.length;t++){h={strand:n,segment:q.getIdentifier(),base:s[t],domain:q.getDomain().getName(),role:q.getDomain().role};if(r=="(")f.push(i);else if(r==")"){var u={source:f.pop(),target:i,value:b.hybridizationValue,type:"wc"};e.push(u)}d.push(h),c&&o+t>0&&e.push({source:i,target:i-1,value:b.strandValue,type:"strand"}),i++}}}return{nodes:d,links:e}},normalizeSystem:function(a){var b=_.map(a,parseStrandSpec),c=absUnique(_.flatten(b)).sort(function(a,b){return a-b}),d=mapUnique(c,1),e=[];return _.each(b,function(a){var b=[];_.each(a,function(a){b.push(sign(a)*d[Math.abs(a)])}),e.push(b)}),e},encodeStrand:function(a){return _.map(a,function(a){return Math.abs(a)+(sign(a)<0?"*":"")}).join(" ")},threadSegments:function(a,b){var c=_.isArray(b)?b:parseStrandSpec(b," "),d="",e;if(_.isArray(a)){if(a.length<amax(c))return"";for(var f=0;f<c.length;f++)e=c[f],a[Math.abs(e)-1]&&(e>0?d+=a[e-1]:d+=reverseComplement(a[Math.abs(e)-1]))}else for(var f=0;f<c.length;f++)e=c[f],a[Math.abs(e)]&&(e>0?d+=a[e]:d+=reverseComplement(a[Math.abs(e)]));return d},unthreadSegments:function(a,b){},structureSpec:function(a){var b={},c={};return _.each(a,function(a){if(a.length>0&&a[0][1]!="structure")if(a[0][1]=="sequence"){var d=a[1][1],e=_.select(a.slice(3),function(a){return a[0]=="number"||a[0].indexOf("sequence")!=-1});if(e[0][0]=="number"){var f=e[1][1],g=e[0][1],e="";_.times(g,function(){e+=f})}else e=_.pluck(e,1).join("");b[d]=e}else if(a[0][0]=="variable"&&a[1]&&a[1][1]==":"){var d=a[0][1],e=_.select(a.slice(2),function(a){return a[0]=="string"});e=_.pluck(e,1),e=e.join(" "),c[d]=e}}),{domains:b,strands:c}},defaultPolaritySpecifier:"*",makeIdentifier:function(a,b){return a+(b==-1?this.defaultPolaritySpecifier:"")},parsePolarity:function(a){return _.isNumber(a)?this.signum(a):a=="-"?-1:a=="+"?1:0},getPolarity:function(a){return a?a[a.length-1]=="*"||a[a.length-1]=="'"?-1:1:0},parseIdentifier:function(a){return{identity:this.normalizeIdentity(a),polarity:this.getPolarity(a)}},normalizeIdentity:function(a){return this.getPolarity(a)==-1?a.substring(0,a.length-1):a},hashBy:function(a,b){return _.reduce(a,function(a,c){a[c[b]]=c},{})},signum:function(a){return sign(a)},sign:sign}}(),DNA=exports.DNA;
typeof require=="function"?(_=require("underscore"),DNA=require("./dna-utils.js").DNA):(module={},module.exports={}),typeof App=="undefined"&&(App={}),App.dynamic=module.exports=function(a,b){function d(c){if(!c.library)throw new k({type:"no library",message:"Motif <%= motif.getName() %> instantiated without library reference",motif:this,config:c});if(c.nodes){var d=l.fromMotif(c);try{d=d.compile()}catch(e){throw e.message&&(e.message=["In motif",c.name,":\n",e.message].join(" ")),new k(e)}a.extend(this,d.toMotif()),delete c.nodes,delete c.motifs,delete c.imports,!!this.structure}else delete c.externalMotifs;a.copyTo(this,c),a.defaults(this,{name:"",type:"hairpin",polarity:0,isInitiator:!1}),this.isInitiator=this.isInitiator||this.type=="initiator";var g={};if(this.structure){var h=this.structure;a.isArray(h)||(h=[h]),h=a.map(h,function(a){return i.parseMultiple(a)}),g=a.first(h)}if(this.strands)this.strands=a.map(this.strands,function(a,b){return a.name&&g[a.name]?a.structure=g[a.name]:g[b]&&(a.structure=g[b]),a.library=this.library,new f(a)},this);else if(this.domains){var j=g[0];this.strands=[new f({library:this.library,domains:this.domains,structure:j})]}a.each(this.getDomains(),function(a){a.polarity||(a.polarity=1)},this),this.polarity=b.parsePolarity(this.polarity),this.library.register("motif",this.name,this)}function e(b){if(!b.library)throw new k({type:"no library",message:"node instantiated without library reference; can't decode motif",node:this,config:b});this.library=b.library;if(b.motif){var c=b.library.getMotif(b.motif);a.copyTo(this,c)}var d=a.reduce(b.domains||[],function(a,b){return a[b.name]=b,a},{}),g=a.reduce(b.strands||[],function(a,b){return a[b.name]=b,a},{});delete b.domains,delete b.strands,a.copyTo(this,b),a.defaults({type:"hairpin",polarity:0}),this.strands=a.map(this.strands,function(b,c){return b=a.copyWith(b,g[b.name]||{}),b.domains=a.map(b.domains,function(b){return d[b.name]&&(b=a.copyWith(b,d[b.name])),b},this),b.name||(b.name=this.strands.length>1?"strand"+c:""),b.library=this.library,new f(a.copyWith(b,{node:this}))},this),this.isInitiator&&(this.polarity=-1),e.types[this.type]&&e.types[this.type](this),this.library.register("node",this.name,this)}function f(c){if(!c.library)throw new k({type:"no library",message:"strand instantiated without library reference",strand:this,config:c});a.copyTo(this,c),a.defaults(this,{}),this.domains=a.map(this.domains,function(b){return new g(a.copyWith(b,{strand:this,library:this.library}))},this),this.structure=new i(this.structure),this.polarity=b.parsePolarity(this.polarity),this.polarity==0&&(this.polarity=1)}function g(c){if(!c.library)throw new k({type:"no library",message:"domain instantiated without library reference",domain:this,config:c});a.copyTo(this,c),a.defaults(this,{segments:[]}),this.segments=a.map(this.segments,function(b){return b=a.copyWith(b,{domain:this,library:this.library}),new h(b)},this),this.polarity=b.parsePolarity(this.polarity)}function h(c){a.copyTo(this,c),a.defaults(this,{segmentLength:6,role:"toehold",sequence:""}),this.sequence&&(this.segmentLength=this.sequence.length),this.name&&!this.identity&&a.extend(this,b.parseIdentifier(this.name)),this.id=h.getId(),this.getLibrary().register("segment",this.id,this)}function i(b){var c,d;a.isString(b)&&(c=b,c.match(".")?d="dot-paren":c.match(/[DHU]+/gi)&&(c=c.replace("H","D"),d="DU+"),b={spec:c,type:d}),a.copyTo(this,b),a.defaults(this,{})}function j(a){this.library=a.library;if(!a.library)throw new k({type:"no library",message:"complement instantiated without library reference; can't decode node references",complement:this,complements:[this],config:a});this.sourceNode=this.library.getNode(a.sourceNode),this.targetNode=this.library.getNode(a.node),this.sourcePort=this.sourceNode?this.sourceNode.getDomain(a.source):null,this.targetPort=this.targetNode?this.targetNode.getDomain(a.target):null;if(this.sourceNode==null)throw new k({type:"phantom complement",message:"Complementarity generated with no sourceNode",config:a,sourceNode:a.sourceNode,targetNode:a.node,sourcePort:a.source,targetPort:a.target,nodes:[a.sourceNode,a.targetNode],ports:[a.source,a.target],complements:[this]});if(this.targetNode==null)throw new k({type:"invalid complement",message:"In complement from Node <%= sourceNode %>, target node <%= targetNode %>, was not found.",sourceNode:a.sourceNode,targetNode:a.node,sourcePort:a.source,targetPort:a.target,nodes:[a.sourceNode,a.targetNode],ports:[a.source,a.target],complements:[this]});if(this.sourcePort==null)throw new k({type:"invalid complement",message:"In complement between Node <%= sourceNode %> and Node <%= targetNode %>, source port <%= sourcePort %> not found.",sourceNode:a.sourceNode,targetNode:a.node,sourcePort:a.source,targetPort:a.target,nodes:[a.sourceNode,a.targetNode],ports:[a.source,a.target],complements:[this]});if(this.targetPort==null)throw new k({type:"invalid complement",message:"In complement between Node <%= sourceNode %> and Node <%= targetNode %>, target port <%= targetPort %> not found.",sourceNode:a.sourceNode,targetNode:a.node,sourcePort:a.source,targetPort:a.target,nodes:[a.sourceNode,a.targetNode],ports:[a.source,a.target]})}function k(b){b.message&&(b.message=a.template(b.message,b)),a.copyTo(this,b)}function l(b){a.copyTo(this,b),this.motifs=a.clone(this.motifs),this.nodes=a.clone(this.nodes),this["import"]=a.clone(this["import"]),a.defaults(this,{motifs:[],nodes:[],"import":[],objects:{node:{},motif:{},segment:{}}})}a.mixin({serialize:function(b,c){c||(c=!1);if(b&&b.serialize&&a.isFunction(b.serialize))return b.serialize(c);if(a.isArray(b)){var d=[];for(var e=0,f=b.length;e<f;e++)d.push(a.serialize(b[e],!0));return d}if(a.isObject(b)){var d={};for(var g in b)a.has(b,g)&&(d[g]=a.serialize(b[g],!0));return d}return b},copy:function(b){return a.copyTo({},b)},copyTo:function(b,c){return a.each(c,function(d,e){a.has(c,e)&&(b[e]=d)}),b},copyWith:function(b,c){return a.extend(a.copy(b),c)},deepClone:function(b){var c;return a.isObject(b)?(c={},a.each(b,function(b,d){c[d]=a.deepClone(b)})):a.isArray(b)?c=a.map(b,a.deepClone):c=b,c}}),d.prototype={instantiate:function(a){return a.motif=this.name,new e(a)},getSegments:function(){return a.flatten(a.map(this.getDomains(),function(a){return a.getSegments()}))},getDomains:function(){return a.flatten(a.map(this.getStrands(),function(a){return a.getDomains()}))},getStrands:function(){return this.strands},getDomain:function(b){return a.find(this.getDomains(),function(a){return a.name==b})},getName:function(){return this.name},serialize:function(){var b=a.copy(this);return b.library&&delete b.library,a.serialize(b)}},a.extend(d,{nextName:function(){var a=0;return function(){return a++,"m"+a}}(),motifs:{},register:function(a,b){return this.motifs[a]=b,b},get:function(a){return a instanceof d?a:this.motifs[a]}}),a.extend(e.prototype,d.prototype),a.extend(e.prototype,{polarity:0,getPolarity:function(){return this.polarity},getConstraintMatrix:function(){var b=this.getSegments();return a.reduce(b,function(c,d){return c[d.getId()]=a.reduce(b,function(a,b){return d.getIdentity()==b.getIdentity()&&d.getId()!=b.getId()&&(a[b.getId()]=b.polarity*d.polarity),a},{}),c},{})},getSegmentIdentityMatrix:function(){function d(a,b){c[a]||(c[a]=[]),c[a].push(b)}var b=this.getSegments(),c={};return a.each(b,function(a){d(a.identity,a)}),c},getStructure:function(){return i.join(a.map(this.getStrands(),function(a){return a.getStructure()}))},getAnnotatedStructure:function(){return a.map(this.getStrands(),function(a){return{strand:a,structure:a.getAnnotatedStructure()}})},getSegmentwiseStructure:function(){return i.join(a.map(this.getStrands(),function(a){return a.getSegmentwiseStructure()}))},serialize:function(){var b=a.copy(this);return b.motif&&(b.motif=b.motif.getName()),b.library&&delete b.library,a.serialize(b)}}),a.extend(e,{types:{hairpin:function(b){a.each(b.getDomains(),function(b){if(b.role=="input")a.each(b.getSegments(),function(a){a.duplex=a.role!="toehold"});else if(b.role=="output")if(b.type=="loop"){var c="";a.each(b.getSegments(),function(a){a.duplex=a.role!="loop"&&(a.role!="clamp"||c!="loop"),c=a.role})}else if(b.type=="tail"){var c="";a.each(b.getSegments(),function(a){a.duplex=a.role=="toehold"||a.role=="clamp"&&c=="toehold",c=a.role})}})}},nodes:{},register:function(a,b){return this.nodes[a]=b,b},get:function(a){return a instanceof e?a:this.nodes[a]}}),f.prototype={getNode:function(){return this.node},getName:function(){return this.name},getQualifiedName:function(){var a=[this.getNode().name];return this.getName()&&a.push(this.getName()),a.join("_")},getAbsolutePolarity:function(){return this.node?this.node.getPolarity()*this.getPolarity():this.getPolarity()},getPolarity:function(){return this.polarity},getSegments:function(){return a.flatten(a.map(this.getDomains(),function(a){return a.getSegments()}))},getDomains:function(){return this.domains},getDomain:function(b){return a.find(this.getDomains(),function(a){return a.name==b})},getSegmentLengths:function(){return a.map(this.getSegments(),function(a){return a.getLength()})},getSegmentwiseStructure:function(){return this.structure},getAnnotatedStructure:function(){var b=-1,c=this.getSegments();return a.map(this.structure.toDotParen().split(""),function(a){return a!="+"?(b++,{type:a,segment:c[b],length:c[b].getLength()}):{type:a}})},getStructure:function(){return this.structure.expand(this.getSegmentLengths())},orphan:function(){return this.polarity=this.getAbsolutePolarity(),delete this.node,this},serialize:function(){var b=a.copy(this);return b.node&&delete b.node,b.library&&delete b.library,a.serialize(b)}},g.prototype={role:"structural",getAbsolutePolarity:function(){return this.getPolarity()*this.getStrand().getPolarity()*this.getNode().getPolarity()},getSegments:function(){return this.segments},getStrand:function(){return this.strand},getNode:function(){return this.getStrand().getNode()},getName:function(){return this.name},getPolarity:function(){return this.polarity},serialize:function(){var b=a.copy(this);return b.strand&&delete b.strand,b.node&&delete b.node,b.library&&delete b.library,a.serialize(b)}},h.prototype={getId:function(){return this.id||(this.id=h.getId()),this.id},getName:function(){return this.name},getFullName:function(){var a=this.getDomain(),b=this.getNode();return[b.getName(),a.getName(),this.getName()].join(".")},getQualifiedName:function(){return b.makeIdentifier(b.normalizeIdentity(this.name),this.polarity)},getIdentity:function(){return this.identity},getIdentifier:function(a,c){return this.identity+(this.polarity==-1?b.defaultPolaritySpecifier:"")},getNode:function(){return this.getDomain().getNode()},getDomain:function(){return this.domain},getAbsolutePolarity:function(){var a=this.getNode().polarity,b=this.getDomain().polarity;return a*b*this.polarity},getSequence:function(){return this.sequence&&this.sequence.length==this.segmentLength?this.sequence:(new Array(this.segmentLength+1)).join("N")},getLength:function(){return this.sequence?this.sequence.length:this.segmentLength},duplicate:function(){return a.copy(this)},serialize:function(){var b=a.copy(this);return b.strand&&delete b.strand,b.domain&&delete b.domain,b.node&&delete b.node,b.library&&delete b.library,a.serialize(b)},getLibrary:function(){return this.library}},a.extend(h,{segments:{},register:function(a,b){return this.segments[a]=b,b},get:function(a){return a instanceof h?a:this.segments[a]},getId:function(){var a=0;return function(){return a++,"segment_"+a}}()}),a.extend(i.prototype,{toDotParen:function(){if(this.type=="dot-paren")return this.spec;throw new k({type:"unimplemented"})},reverse:function(){if(this.type=="dot-paren")return new i(a.chain(this.spec.split("")).reverse().map(function(a){return a=="("?")":a==")"?"(":a}).value().join(""));throw new k({type:"unimplemented"})},expand:function(a){var b=this.spec,c=[],d,e;if(a.length!=b.length)throw new k({type:"structure size mismatch",structure:b,lengths:a});for(var f=0;f<a.length;f++)d=a[f],e=b[f],c.push(Array(d+1).join(e));return new i(c.join(""))}}),a.extend(i,{parseMultiple:function(b){if(a.isObject(b)){var c=b.spec||"",d=c.split("+");if(b.order)return d=a.reduce(b.order,function(a,b,c){return a[index]=new i(d[c]),a},{}),d}else d=b.split("+");return a.map(d,function(a){return new i(a)})},parseDUPlus:function(a){},DUtoDotParen:function(a){},dotParenToDU:function(a){var b="",c=0,d=[];while(a.length>0)b!=a[0]?d.push(Array(c+1).join(b)):n++,Array.prototype.shift.apply(a);return d.push(Array(c+1).join(b)),d.join("")},join:function(b){return new i(a.map(b,function(a){return a.toDotParen()}).join("+"))}}),j.prototype={getSourceDomain:function(){return this.sourcePort},getSourcePort:function(){return this.sourcePort},getTargetDomain:function(){return this.targetPort},getTargetPort:function(){return this.targetPort},getType:function(){if(this.getTargetPort().role=="input"&&this.getSourcePort().role=="output")return"output";if(this.getTargetPort().role==this.getSourcePort().role=="bridge")return"bridge"},serialize:function(){var b=a.copy(this);return b.strand&&delete b.strand,b.domain&&delete b.domain,b.node&&delete b.node,b.library&&delete b.library,a.serialize(b)}},k.prototype.serialize=function(){return a.serialize(a.copy(this))},l.prototype={getNode:function(a){return a instanceof e?a:this.objects.node[a]},getMotif:function(a){return a instanceof d?a:this.objects.motif[a]},getSegment:function(a){return a instanceof h?a:this.objects.segment[a]},register:function(a,b,c){if(!!this.objects[a][b])throw new k({type:"duplicate object",message:"Attempt to define <%= kind %> <%= name %> twice in same library",kind:a,name:b,original:this.objects[a][b],second:c});this.objects[a][b]=c},get:function(a,b){return this.objects[a][b]},compile:function(){return m.compileLibrary(this)},printStrands:function(a){return m.printStrands(this,a)},toNupackOutput:function(){function d(a){return"d"+a}var b=this,c=[];return c.push(a.map(b.segments,function(a){return["domain",d(a.identity),"=",a.getSequence()].join(" ")}).join("\n")),c.push(a.map(b.strands,function(b){return["strand",b.getQualifiedName(),"="].concat(a.map(b.getSegments(),function(a){return d(a.getIdentifier())})).join(" ")}).join("\n")),c.push(a.map(b.nodes,function(b){var c=a.map(b.getStrands(),function(a){var b=a.getStructure();return a.getAbsolutePolarity()==-1&&(b=b.reverse()),b}),d=i.join(c);return["structure",b.getName()+"_structure","=",d.toDotParen()].join(" ")}).join("\n")),c.push(a.map(b.nodes,function(b){var c=a.map(b.getStrands(),function(a){return a.getQualifiedName()});return[b.getName()+"_structure.seq","="].concat(c).join(" ")}).join("\n")),c.join("\n\n")},toDomainsOutput:function(){return m.printStrands(this,{annotations:!1})},toSVGOutput:function(){String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return typeof a[c]!="undefined"?a[c]:b})};var b={out:[],write:function(a){this.out.push(a)},close:function(){return this.out.join("")}},d=Math.PI,e=Math.atan2,f=0,g=0,h=300,i=160,j=Math.round(Math.sqrt(this.strands.length)),k=Math.ceil(this.strands.length/j);b.write('<?xml version="1.0" standalone="no"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\nviewBox = "0 0 '+A(h*k)+" "+A(i*j)+'" version = "1.1">\n'+'<defs><path id="arrow" d="M -7 -7 L 0 0 L -7 7"/>\n</defs>\n'+'<style type="text/css">text { font-family: tahoma, helvetica, arial; }</style>');for(var l=0;l<this.strands.length;l++){var m=this.strands[l],n=m.getSegmentwiseStructure().toDotParen();if(n.match(/^\.+$/)){b.write('<g stroke = "rgb(139,98,61)" stroke-width = "2" fill = "none">\n<path d = "M {0} {1} L {2} {3}"/>\n'.format(f+h*.15,g+i*.5,f+h*.6,g+i*.5)),m.getPolarity()==-1?b.write('<use x="{0}" y="{1}" xlink:href="#arrow" transform="rotate(180,{2},{3})"/>\n'.format(f+h*.15,g+i*.5,f+h*.15,g+i*.5)):b.write('<use x="{0}" y="{1}" xlink:href="#arrow"/>\n'.format(f+h*.6,g+i*.5)),b.write('</g>\n<g stroke="none" fill="black" font-size="16">\n');var o=m.getSegments();for(var p=0;p<o.length;p++){var q=o[p].getIdentifier();b.write('<text x="{0}" y="{1}" stroke="none" fill="black">{2}</text>\n'.format(f+h*.15+h*(p+.5)/o.length*.45,g+i*.5-i*.05,q))}b.write("</g>\n")}else if(n.match(/^\.+\(+\.+\)+(\.+)?$/)){var o=m.getSegments(),r=n.indexOf("("),s=r;while(n[s]=="(")s++;s--,c=n.indexOf(")");var t=c;while(n[t]==")")t++;t--;var u=m.getSegmentLengths();function v(b){return a.reduce(b,function(a,b){return a+b},0)}var w=v(u.slice(0,r)),x=v(u.slice(r,s+1)),y=v(u.slice(s+1,c)),z=v(u.slice(t+1));b.write('<g stroke = "black" stroke-width = "1" fill = "none">\n');for(var p=0;p<x;p++)b.write('<line x1 = "{0}" y1 = "{1}" x2 = "{2}" y2 = "{3}"/>\n'.format(f+h*.3+h*.3*p/x,g+i*.45,f+h*.3+h*.3*p/x,g+i*.5));b.write("</g>\n"),b.write('<g stroke = "black" stroke-width = "2" fill = "none">\n<path d = "M {0} {1} a {2} {3} 0 1 1 {4} {5} L {6} {7}" stroke="black"/>\n'.format(f+h*.6,g+i*.45,h*.085,i*.25,0,i*.05,f+h*.3,g+i*.5)),b.write('<line x1 = "{0}" y1 = "{1}" x2 = "{2}" y2 = "{3}" stroke = "rgb(241,139,17)"/>\n'.format(f+h*.15,g+i*.45,f+h*.6,g+i*.45)),z>0&&b.write('<path d = "M {0} {1} L {2} {3}" stroke = "black"/>\n'.format(f+h*.3,g+i*.5,f+h*.15,g+i*.8)),m.getPolarity()==-1?b.write('<use x="{0}" y="{1}" stroke="rgb(241,139,17)" xlink:href="#arrow" transform="rotate(180,{2},{3})"/>\n'.format(f+h*.15,g+i*.45,f+h*.15,g+i*.45)):z>0?b.write('<use x="{0}" y="{1}" xlink:href="#arrow" transform="rotate({2},{3},{4})"/>\n'.format(f+h*.15,g+i*.8,90+180/d*e(i*.3,h*.15),f+h*.15,g+i*.8)):b.write('<use x="{0}" y="{1}" xlink:href="#arrow" transform="rotate(180,{2},{3})"/>\n'.format(f+h*.3,g+i*.5,f+h*.3,g+i*.5)),b.write('</g>\n<g stroke="none" fill="black" font-size="16">\n'),labelx=[],labely=[];function A(a){return a}function B(b){return a.range(0,b)}var C=Math.cos,D=Math.sin,d=Math.PI;for(var p=0;p<r;p++)labelx.push(h*(.15+.15*(p+.5)/r)),labely.push(i*.4);for(p=0;p<s+1-r;p++)labelx.push(h*(.3+.3*(p+.5)/(s+1-r))),labely.push(i*.4);for(p=0;p<c-(s+1);p++)labelx.push(h*(.75-.05*C(2*d*(p+.5)/(c-(s+1))))),labely.push(i*(.45-.25*D(2*d*(p+.5)/(c-(s+1)))));for(p=0;p<s+1-r;p++)labelx.push(h*(.6-.3*(p+.5)/(s+1-r))),labely.push(i*.6);for(p=0;p<t+1-c;p++)labelx.push(h*(.3-.15*(p+.5)/(t+1-c))),labely.push(i*(.6+.3*(p+.5)/(t+1-c)));for(var p=0;p<o.length;p++){var E=o[p],q=E.getIdentifier();b.write('<text x="{0}" y="{1}" stroke="none" fill="black">{2}</text>\n'.format(f+labelx[p],g+labely[p],q))}b.write("</g>\n")}b.write('<text x="{0}" y="{1}" style="font-size: 18px; font-weight: bold;" stroke="none">{2}</text>\n'.format(f+h*.45,g+i*.9,m.getQualifiedName())),g+=i,g>=i*j&&(g=0,f+=h)}return b.write("</svg>\n"),b.close()},toPilOutput:function(){return""},toMotif:function(){var b=a.map(this.strands,function(b){var c=a.copy(b);return c.domains=a.map(c.domains||[],function(b){var c=a.copy(b);return b.expose?(a.extend(c,b.expose),delete c.expose):b.role="structural",c.orphan&&c.orphan(),c.strand&&delete c.strand,c.node&&delete c.node,b}),c.polarity=b.getAbsolutePolarity(),delete c.node,c});return{strands:b}}},a.extend(l,{dummy:function(){return new App.dynamic.Library({})},fromMotif:function(b){var c=a.copy(b);return delete c.library,new l(c)}});var m=function(){function c(a){var b=a,c;try{c=JSON.parse(b)}catch(d){throw new k({type:d.type,message:"Parsing error: "+d.message,stack:d.stack})}return c}function f(a){return g(c(a))}function g(c){if(c){c=new l(c),c["import"]&&a.each(c["import"],function(a){if(a.type&&a.name)switch(a.type){case"motif":c.motifs.unshift(p(a.type,a.name));break;case"node":c.nodes.unshift(p(a.type,a.name));break;default:}},this),c.motifs=a.reduce(c.motifs,function(b,e){return e=a.copyWith(e,{library:c}),b.push(new d(e)),b},[]),c.nodes=a.map(c.nodes,function(a){return a.polarity&&delete a.polarity,a.library=c,new e(a)});var f=a.chain(c.nodes).map(function(b){return a.map(b.complementarities||[],function(a){return a.sourceNode=b,a.library=c,new j(a)})}).compact().flatten().value(),g;do g=!1,a.each(f,function(b){if(b.sourceNode.polarity!=0){var c=-1*b.sourcePort.polarity*b.sourcePort.getStrand().getPolarity()*b.sourceNode.polarity;if(isNaN(c))throw isNaN(b.sourcePort.polarity)?new k({type:"polarity unspecified",message:"source port polarity is NaN",sourceNode:b.sourceNode,sourcePort:b.sourcePort,complement:b,nodes:[config.sourceNode],ports:[config.sourcePort]}):new k({type:"polarity unspecified",message:"source node polarity is NaN",sourceNode:b.sourceNode,sourcePort:b.sourcePort,complement:b,nodes:[config.sourceNode],ports:[config.sourcePort]});if(b.targetNode.polarity!=0&&b.targetNode.polarity==-c)throw new k({type:"polarity conflict",message:a.template("Complementarity statement in node <%= source %> implies node <%= target %> should have polarity <%= expected %>, but instead it has polarity <%= encountered %>",{source:b.sourceNode.name,target:b.targetNode.name,expected:c,encountered:-c}),nodes:[b.sourceNode,b.targetNode],sourceNode:b.sourceNode,targetNode:b.targetNode,sourcePort:b.getSourcePort(),targetPort:b.getTargetPort(),nodes:[b.sourceNode,b.targetNode],ports:[b.getSourcePort(),b.getTargetPort()]});if(b.targetNode.polarity==c)return;b.targetNode.polarity=c,g=!0}});while(g);a.each(c.nodes,function(a){a.polarity==0&&(a.polarity=1)});var i=a.reduce(c.nodes,function(b,c){return a.extend(b,c.getConstraintMatrix()),b},{});a.each(f,function(b){var c=a.clone(b.getSourceDomain().getSegments()),d=a.clone(b.getTargetDomain().getSegments()),e=b.getType();if(e=="output"){if(b.sourcePort.getStrand().getAbsolutePolarity()==b.targetPort.getStrand().getAbsolutePolarity()!=(b.sourceNode.polarity==b.targetNode.polarity))throw"wut";b.sourcePort.getStrand().getAbsolutePolarity()==b.targetPort.getStrand().getAbsolutePolarity()&&d.reverse()}if(c.length!=d.length)if(e=="output"&&c.length-d.length==1&&a.last(c).role=="clamp")c.pop();else{if(e!="output"||d.length-c.length!=1||a.last(d).role!="clamp")throw new k({type:"domain length mismatch",message:a.template("Complementarity statement in node <%= sourceNode %> implies domain <%= targetNode %>.<%= targetPort %> should have <%= expected %> segments, but instead it has <%= encountered %> segments",{sourceNode:b.sourceNode.getName(),targetNode:b.targetNode.getName(),targetPort:b.targetPort.getName(),expected:c.length,encountered:d.length}),nodes:[b.sourceNode,b.targetNode],sourceNode:b.sourceNode,targetNode:b.targetNode,sourcePort:b.getSourcePort(),targetPort:b.getTargetPort(),ports:[b.getSourcePort(),b.getTargetPort()]});d.pop()}for(var f=0;f<c.length;f++)i[c[f].getId()][d[f].getId()]=-1});var m=function(){var b=0;return a.reduce(a.keys(i),function(a,c){return b++,a[c]=-b,a},{})}(),g;do g=!1,a.each(i,function(d,e){a.each(d,function(d,f){if(Math.abs(d)!=1)return;var h=a.sortBy([e,f],function(a){return Math.abs(m[a])}),i=a.last(h),j=a.first(h),l=null;if(d==1){if(m[e]==-m[f]){var n=c.getSegment(e),o=c.getSegment(f);throw new k({type:"equality conflict",message:"Segments <%= left %> and <%= right %> should be equal, but they're already complementary!",left:n.getFullName(),right:o.getFullName(),leftSegment:n,rightSegment:o,nodes:[n.getNode(),o.getNode()]})}m[e]!=m[f]&&(l=m[j])}else if(d==-1){if(m[e]==m[f]){var n=c.getSegment(e),o=c.getSegment(f);throw new k({type:"equality conflict",message:"Segments <%= left %> and <%= right %> should be complementary, but they're already equal!",left:n.getFullName(),right:o.getFullName(),leftSegment:n,rightSegment:o,nodes:[n.getNode(),o.getNode()]})}m[e]!=-m[f]&&(l=-Math.abs(m[j])*b.signum(m[e])*b.signum(m[f]))}if(l!=null){var p=a.filter(a.keys(m),function(a){return Math.abs(m[a])==Math.abs(m[i])}),q=a.clone(m);a.each(p,function(a){var e=c.getSegment(a);e.identity=Math.abs(l),e.polarity=b.signum(l),d==-1?q[a]=b.signum(m[a])*l:q[a]=l,g=!0}),m=q}})});while(g);m=function(c){var d=a.chain(c).values().map(Math.abs).uniq().value(),e=b.mapUnique(d,1);return a.reduce(c,function(a,c,d){return a[d]=e[Math.abs(c)]*b.signum(c),a},{})}(m),c.allSegments=[],a.each(c.nodes,function(d){a.each(d.getStrands(),function(d){a.each(d.getSegments(),function(a){a.identity=Math.abs(m[a.getId()]),a.polarity=b.signum(m[a.getId()]),c.allSegments.push(a)})})}),c.segments=a.chain(c.allSegments).uniq(!1,function(a){return a.identity}).map(function(a){var b=a.duplicate();return delete b.name,delete b.node,delete b.polarity,new h(b)}).value(),c.strands=a.chain(c.nodes).map(function(a){return a.getStrands()}).flatten().value()}else c={};return c}function i(b,c){function f(a,b){return a+(b==-1?e:"")}c=c||{},a.defaults(c,{annotations:!0,originalSegmentNames:!1});var d="",e="*";return d+=a.map(b.segments,function(a){return["sequence",a.getIdentifier(),":",a.getSequence()].join(" ")}).join("\n"),d+="\n",d+=a.map(b.strands,function(b){var d=b.getQualifiedName(),e=a.clone(b.getDomains());return b.getAbsolutePolarity()==-1&&(e=e.reverse()),a([c.annotations?"strand":"",d,c.annotations?b.getAbsolutePolarity()==-1?"-":"+":"",":"].concat(a.map(e,function(d){var e=a.clone(d.getSegments());return b.getAbsolutePolarity()==-1&&(e=e.reverse()),[c.annotations?"[":""].concat(a.map(e,function(a){return c.originalSegmentNames?a.getQualifiedName():a.getIdentifier()})).concat([c.annotations?"]"+(d.polarity==-1?"-":"+"):""]).join(" ")},""))).compact().join(" ")}).join("\n"),d}function m(b,c){function f(a,b){return a+(b==-1?e:"")}c=c||{},a.defaults(c,{annotations:!0,originalSegmentNames:!1});var d="",e="*";return d+=a.map(b,function(b){var d=b.getQualifiedName(),e=a.clone(b.getDomains());return b.getAbsolutePolarity()==-1&&(e=e.reverse()),a([c.annotations?"strand":"",d,c.annotations?b.getAbsolutePolarity()==-1?"-":"+":"",":"].concat(a.map(e,function(d){var e=a.clone(d.getSegments());return b.getAbsolutePolarity()==-1&&(e=e.reverse()),[c.annotations?"[":""].concat(a.map(e,function(a){return c.originalSegmentNames?a.getQualifiedName():a.getIdentifier()})).concat([c.annotations?"]"+(d.polarity==-1?"-":"+"):""]).join(" ")},""))).compact().join(" ")}).join("\n"),d}function p(a,b){switch(a){case"motif":if(n[b])return n[b];if(n["m"+b])return n["m"+b];throw new k({type:"undefined motif",name:b,message:"Couldn't find imported motif '<%= name %>'"})}}function q(a){return a.role&&a.type?o[[a.role,a.type].join(".")]:o[a.role]||"#000"}var n=[{name:"m1",type:"initiator",structure:"..",isInitiator:!0,domains:[{name:"A",role:"output",type:"init",polarity:"+",segments:[{name:"a",role:""},{name:"b",role:""}]}]},{name:"m2",type:"initiator",isInitiator:!0,structure:"...",domains:[{name:"A",role:"output",type:"init",polarity:"+",segments:[{name:"a",role:""},{name:"b",role:""},{name:"c",role:""}]}]},{name:"m3",type:"hairpin",structure:".(.)",domains:[{name:"A",role:"input",polarity:"+",segments:[{name:"a",role:"toehold"},{name:"b",role:""}]},{name:"B",role:"output",type:"loop",polarity:"-",segments:[{name:"c",role:"loop"},{name:"b*",role:""}]}]},{name:"m4",type:"hairpin",structure:".((..))..",domains:[{name:"A",role:"input",polarity:"+",segments:[{name:"a",role:"toehold"},{name:"b",role:""},{name:"c",role:""}]},{name:"B",role:"output",type:"loop",polarity:"-",segments:[{name:"d",role:"loop"},{name:"e",role:"loop"},{name:"c*",role:""}]},{name:"C",role:"output",type:"tail",polarity:"+",segments:[{name:"b*",role:"toehold"},{name:"f",role:""},{name:"g",role:""}]}]},{name:"m5",type:"hairpin",structure:".((.)).",domains:[{name:"A",role:"input",polarity:"+",segments:[{name:"a",role:"toehold"},{name:"b",role:""},{name:"c",role:""}]},{name:"B",role:"bridge",type:"loop",polarity:"+",segments:[{name:"d",role:"loop"}]},{name:"C",role:"null",type:"stem",polarity:"+",segments:[{name:"b*",role:""},{name:"c*",role:""}]}]},{name:"m6",type:"hairpin",structure:".((....))..",domains:[{name:"A",role:"input",polarity:"+",segments:[{name:"a",role:"toehold"},{name:"b",role:""},{name:"c",role:""}]},{name:"B",role:"bridge",type:"loop",polarity:"+",segments:[{name:"d",role:"loop"}]},{name:"C",role:"output",type:"loop",polarity:"-",segments:[{name:"e",role:"loop"},{name:"f",role:"loop"},{name:"g",role:"loop"},{name:"c*",role:"loop"}]},{name:"D",role:"output",type:"tail",polarity:"+",segments:[{name:"b*",role:"toehold"},{name:"h",role:""},{name:"i",role:""}]}]},{name:"m7",type:"hairpin",structure:".((..))..",domains:[{name:"A",role:"input",polarity:"+",segments:[{name:"a",role:"toehold"},{name:"b",role:""},{name:"c",role:""}]},{name:"B",role:"output",type:"loop",polarity:"-",segments:[{name:"d",role:"loop"},{name:"e",role:"loop"},{name:"c*",role:""}]},{name:"C",role:"bridge",type:"stem",polarity:"+",segments:[{name:"b*",role:"toehold"},{name:"e",role:""},{name:"f",role:""}]}]},{name:"m8",type:"hairpin",structure:".((.))..",domains:[{name:"A",role:"input",polarity:"+",segments:[{name:"a",role:"toehold"},{name:"b",role:""},{name:"c",role:""}]},{name:"B",role:"bridge",type:"loop",polarity:"+",segments:[{name:"d",role:"loop"},{name:"c*",role:""}]},{name:"C",role:"output",type:"tail",polarity:"+",segments:[{name:"b*",role:""},{name:"e",role:""},{name:"f",role:""}]}]},{name:"m9",type:"hairpin",structure:".((.))",domains:[{name:"A",role:"input",polarity:"+",segments:[{name:"a",role:"toehold"},{name:"b",role:""},{name:"c",role:""}]},{name:"B",role:"bridge",type:"loop",polarity:"+",segments:[{name:"d",role:"loop"},{name:"c*",role:""}]},{name:"C",role:"null",type:"stem",polarity:"+",segments:[{name:"b*",role:""}]}]},{name:"m1c",type:"initiator",isInitiator:!0,structure:"....",domains:[{name:"A",role:"output",type:"init",polarity:"+",segments:[{name:"a",role:""},{name:"w",role:"clamp"},{name:"b",role:""},{name:"x",role:"clamp"}]}]},{name:"m19c",type:"hairpin",structure:".(((..)))",domains:[{name:"A",role:"input",polarity:"+",segments:[{name:"a",role:"toehold"},{name:"w",role:"clamp"},{name:"b",role:"reverse"},{name:"x",role:"clamp"}]},{name:"B",role:"output",polarity:"-",segments:[{name:"y",role:"clamp"},{name:"c",role:"loop"},{name:"x*",role:"clamp"},{name:"b*",role:"toehold"},{name:"w*",role:"clamp"}]}]}];n=a.reduce(n,function(a,b){return a[b.name]=b,a},{});var o={init:"#553300",input:"orange",output:"#33ccff","output.init":"#553300","output.loop":"#33ccff","output.tail":"#66ff33",bridge:"#ff1177","bridge.loop":"#ff1177","bridge.stem":"#9900cc"};return{compile:f,compileLibrary:g,parse:c,printStrands:i,printStrandsFromArray:m,importObject:p,standardMotifs:n,domainColors:o,getColor:q}}();return{Node:e,Motif:d,Strand:f,Segment:h,Library:l,Compiler:m,DynamlError:k,Structure:i}}(_,DNA);
typeof require=="function"&&(_=require("underscore"),printf=require("format").printf);var DD=function(){function f(a){return Math.log(a)/Math.LN2}function g(a,b){var c=a+Math.random()*(b-a);return Math.round(c)}function h(a,b){throw console.error(a),b||(b="Error"),b}function i(a){switch(a){case 1:return"g";case 11:return"G";case 2:return"a";case 12:return"A";case 3:return"t";case 13:return"T";case 4:return"c";case 14:return"C"}}function j(a){switch(a){case 1:case 11:return"G";case 2:case 12:return"A";case 3:case 13:return"T";case 4:case 14:return"C"}}function k(a,b,c,d){var e,f,g,i,j,k,l,m;(k=new Array(b))==null&&h("Insufficient memory for score calculations!\n"),(l=new Array(b))==null&&h("Insufficient memory for score calculations!\n"),(m=new Array(b))==null&&h("Insufficient memory for score calculations!\n");for(g=0;g<b;g++)(k[g]=new Array(d))==null&&h("Insufficient memory for score calculations!\n"),(l[g]=new Array(d))==null&&h("Insufficient memory for score calculations!\n"),(m[g]=new Array(d))==null&&h("Insufficient memory for score calculations!\n");for(g=0;g<b;g++)for(i=0;i<d;i++)(a[g]+c[d-1-i])%10==5&&a[g]*c[d-1-i]%10==4?k[g][i]=bp:(a[g]+c[d-1-i])%10==5&&a[g]*c[d-1-i]%10==6?k[g][i]=bq:(a[g]+c[d-1-i])%10==4&&a[g]*c[d-1-i]%10==3?k[g][i]=br:k[g][i]=bs;e=0,l[0][0]=k[0][0],l[0][0]<0?(l[0][0]=0,m[0][0]=0):(l[0][0]=l[0][0]+bu,m[0][0]=1),l[0][0]>e&&(e=l[0][0]);for(i=1;i<d;i++)l[0][i]=k[0][i],l[0][i]<0?(l[0][i]=0,m[0][i]=0):(l[0][i]=l[0][i]+bu,m[0][i]=1),l[0][i]>e&&(e=l[0][i]);for(g=1;g<b;g++){l[g][0]=k[g][0],l[g][0]<0?(l[g][0]=0,m[g][0]=0):(l[g][0]=l[g][0]+bu,m[g][0]=1),l[g][0]>e&&(e=l[g][0]);for(i=1;i<d;i++){if(k[g][i]<0)m[g][i]=0,l[g][i]=0,m[g-1][i-1]>0&&l[g-1][i-1]+bs>0&&(l[g][i]=l[g-1][i-1]+bs),m[g-1][i-1]==0&&l[g-1][i-1]+bt>0&&(l[g][i]=l[g-1][i-1]+bt),m[g][i-1]>0&&l[g][i-1]+bs>0&&l[g][i-1]+bs>l[g][i]&&(l[g][i]=l[g][i-1]+bs),m[g][i-1]==0&&l[g][i-1]+bt>0&&l[g][i-1]+bt>l[g][i]&&(l[g][i]=l[g][i-1]+bt),m[g-1][i]>0&&l[g-1][i]+bs>0&&l[g-1][i]+bs>l[g][i]&&(l[g][i]=l[g-1][i]+bs),m[g-1][i]==0&&l[g-1][i]+bt>0&&l[g-1][i]+bt>l[g][i]&&(l[g][i]=l[g-1][i]+bt),l[g][i]<0&&(l[g][i]=0);else{l[g][i]=k[g][i],m[g][i]=1,m[g-1][i-1]>0&&l[g-1][i-1]>0?(l[g][i]=l[g-1][i-1]+k[g][i],m[g][i]=m[g-1][i-1]+1):m[g-1][i-1]==0&&l[g-1][i-1]>0&&(l[g][i]=l[g-1][i-1]+k[g][i],m[g][i]=1),m[g][i-1]>0&&l[g][i-1]>0&&l[g][i-1]+k[g][i]-k[g][i-1]+bs>l[g][i]?(l[g][i]=l[g][i-1]+k[g][i]-k[g][i-1]+bs,m[g][i]=1):m[g][i-1]==0&&l[g][i-1]>0&&l[g][i-1]+k[g][i]>l[g][i]&&(l[g][i]=l[g][i-1]+k[g][i],m[g][i]=1),m[g-1][i]>0&&l[g-1][i]>0&&l[g-1][i]+k[g][i]-k[g-1][i]+bs>l[g][i]?(l[g][i]=l[g-1][i]+k[g][i]-k[g-1][i]+bs,m[g][i]=1):m[g-1][i]==0&&l[g-1][i]>0&&l[g-1][i]+k[g][i]>l[g][i]&&(l[g][i]=l[g-1][i]+k[g][i],m[g][i]=1);if(m[g][i]>bw){f=bx;for(j=bw;j<m[g][i];j++)f*=by;l[g][i]=l[g][i]+f}}m[g][i]>0&&(g==b-1||i==d-1)&&(l[g][i]=l[g][i]+bu),l[g][i]>e&&(e=l[g][i])}}return e}function l(a,b){var c,d,e,f,g,i,j,k;(i=new Array(b))==null&&h("Insufficient memory for score calculations!\n"),(j=new Array(b))==null&&h("Insufficient memory for score calculations!\n"),(k=new Array(b))==null&&h("Insufficient memory for score calculations!\n");for(e=0;e<b;e++)(i[e]=new Array(b))==null&&h("Insufficient memory for score calculations!\n"),(j[e]=new Array(b))==null&&h("Insufficient memory for score calculations!\n"),(k[e]=new Array(b))==null&&h("Insufficient memory for score calculations!\n");for(e=0;e<b;e++)for(f=0;f<b;f++)(a[e]+(15-a[b-1-f]))%10==5&&a[e]*(15-a[b-1-f])%10==4?i[e][f]=bp:(a[e]+(15-a[b-1-f]))%10==5&&a[e]*(15-a[b-1-f])%10==6?i[e][f]=bq:(a[e]+(15-a[b-1-f]))%10==4&&a[e]*(15-a[b-1-f])%10==3?i[e][f]=br:i[e][f]=bs;c=0,j[0][0]=0;for(f=1;f<b;f++)j[0][f]=i[0][f],j[0][f]<0?(j[0][f]=0,k[0][f]=0):(j[0][f]=j[0][f]+bu,k[0][f]=1),j[0][f]>c&&(c=j[0][f]);for(e=1;e<b;e++){j[e][0]=i[e][0],j[e][0]<0?(j[e][0]=0,k[e][0]=0):(j[e][0]=j[e][0]+bu,k[e][0]=1),j[e][0]>c&&(c=j[e][0]);for(f=1;f<b;f++){if(e==f)k[e][f]=0,j[e][f]=0;else if(i[e][f]<0)k[e][f]=0,j[e][f]=0,k[e-1][f-1]>0&&j[e-1][f-1]+bs>0&&(j[e][f]=j[e-1][f-1]+bs),k[e-1][f-1]==0&&j[e-1][f-1]+bt>0&&(j[e][f]=j[e-1][f-1]+bt),k[e][f-1]>0&&j[e][f-1]+bs>0&&j[e][f-1]+bs>j[e][f]&&(j[e][f]=j[e][f-1]+bs),k[e][f-1]==0&&j[e][f-1]+bt>0&&j[e][f-1]+bt>j[e][f]&&(j[e][f]=j[e][f-1]+bt),k[e-1][f]>0&&j[e-1][f]+bs>0&&j[e-1][f]+bs>j[e][f]&&(j[e][f]=j[e-1][f]+bs),k[e-1][f]==0&&j[e-1][f]+bt>0&&j[e-1][f]+bt>j[e][f]&&(j[e][f]=j[e-1][f]+bt),j[e][f]<0&&(j[e][f]=0);else{j[e][f]=i[e][f],k[e][f]=1,k[e-1][f-1]>0&&j[e-1][f-1]>0?(j[e][f]=j[e-1][f-1]+i[e][f],k[e][f]=k[e-1][f-1]+1):k[e-1][f-1]==0&&j[e-1][f-1]>0&&(j[e][f]=j[e-1][f-1]+i[e][f],k[e][f]=1),k[e][f-1]>0&&j[e][f-1]>0&&j[e][f-1]+i[e][f]-i[e][f-1]+bs>j[e][f]?(j[e][f]=j[e][f-1]+i[e][f]-i[e][f-1]+bs,k[e][f]=1):k[e][f-1]==0&&j[e][f-1]>0&&j[e][f-1]+i[e][f]>j[e][f]&&(j[e][f]=j[e][f-1]+i[e][f],k[e][f]=1),k[e-1][f]>0&&j[e-1][f]>0&&j[e-1][f]+i[e][f]-i[e-1][f]+bs>j[e][f]?(j[e][f]=j[e-1][f]+i[e][f]-i[e-1][f]+bs,k[e][f]=1):k[e-1][f]==0&&j[e-1][f]>0&&j[e-1][f]+i[e][f]>j[e][f]&&(j[e][f]=j[e-1][f]+i[e][f],k[e][f]=1);if(k[e][f]>bw){d=bx;for(g=bw;g<k[e][f];g++)d*=by;j[e][f]=j[e][f]+d}}k[e][f]>0&&(e==b-1||f==b-1)&&(j[e][f]=j[e][f]+bu),j[e][f]>c&&(c=j[e][f])}}return c}function bI(){be=bo.rule_4g,bf=bo.rule_6at,bg=bo.rule_ccend,bh=bo.rule_ming,bi=bo.rule_init,bj=bo.rule_lockold,bk=bo.rule_targetworst,bl=bo.rule_gatc_avail,bm=bo.rule_targetdomain,bn=bo.rule_shannon}function bJ(){bE=bH.MAX_MUTATIONS,bp=bH.GCstr,bq=bH.ATstr,br=bH.GTstr,bs=bH.MBstr,bt=bH.LLstr,bu=bH.DHstr,bv=bH.MAX_IMPORTANCE,bw=bH.LHbases,bx=bH.LHstart,by=bH.LHpower,bz=bH.INTRA_SCORE,bA=bH.CROSSTALK_SCORE,bB=bH.CROSSTALK_DIV,bC=bH.GGGG_PENALTY,bD=bH.ATATAT_PENALTY,bF=bH.SHANNON_BONUS,bG=bH.SHANNON_ADJUST}function bK(a,b,c,d){d=d||!Z;var e,f;if(!d)e=L+a.length,f=L,Z.length=e,W.length=e,Y.length=e,X.length=e;else{e=a.length,f=0;if((Z=new Array(e))==null)throw console.error("Insufficient memory for declaring domain pointers!\n"),"Error";if((W=new Array(e))==null)throw console.error("Insufficient memory for declaring domain lengths!\n"),"Error";if((Y=new Array(e))==null)throw console.error("Insufficient memory for declaring domain base availability!\n"),"Error";if((X=new Array(e))==null)throw console.error("Insufficient memory for declaring domain importances!\n"),"Error"}L=e;for(n=f;n<L;n++)N=a[n-f].trim(),m=a[n-f].length,W[n]=m,Z[n]=bN(N),X[n]=_.isArray(b)?b[n-f]:_.isNumber(b)?b:1,Y[n]=_.isArray(c)?c[n-f]:_.isNumber(c)?c:15;bQ()}function bL(){Z.pop(),W.pop(),Y.pop(),X.pop();var a=t.pop();return L--,bQ(),a}function bM(a){Z.splice(a,1),W.splice(a,1),Y.splice(a,1),X.splice(a,1);var b=t.splice(a,1);return L--,bQ(),b}function bN(a){var b=new Array(a.length);for(m=0;m<a.length;m++)if(a[m]=="g")b[m]=1;else if(a[m]=="a")b[m]=2;else if(a[m]=="t")b[m]=3;else if(a[m]=="c")b[m]=4;else if(a[m]=="G")b[m]=11;else if(a[m]=="A")b[m]=12;else if(a[m]=="T")b[m]=13;else if(a[m]=="C")b[m]=14;else if(a[m]=="N"||a[m]=="n")b[m]=bR();return b}function bO(a,b){var c=_.compact(a.split("\n"));c[0].trim().match(/^\d+$/g)&&c.shift(),L=c.length,M=b||0;if((Z=new Array(L+M))==null)throw console.error("Insufficient memory for declaring domain pointers!\n"),"Error";if((W=new Array(L+M))==null)throw console.error("Insufficient memory for declaring domain lengths!\n"),"Error";if((Y=new Array(L+M))==null)throw console.error("Insufficient memory for declaring domain base availability!\n"),"Error";if((X=new Array(L+M))==null)throw console.error("Insufficient memory for declaring domain importances!\n"),"Error";for(n=0;n<L;n++){var d=c[n].split(" ");N=c[n],m=0;while(N[m]!=" "){if(N[m]!="G"&&N[m]!="A"&&N[m]!="T"&&N[m]!="C"&&N[m]!="g"&&N[m]!="a"&&N[m]!="t"&&N[m]!="c")throw printf("Input file corrupted.  Sequence for domain %d contains a non-base (%c) at position %d.\n",n+1,N[m],m+1),"Error";m++}W[n]=m,Z[n]=bN(N.substr(0,m)),m=W[n]+1,X[n]=parseInt(d[1]),Y[n]=parseInt(d[2]);if(isNaN(X[n]))throw printf("Input file corrupted.  Non-numeric parameter for importance of domain %d.\n",n+1),"Error";if(isNaN(Y[n]))throw printf("Input file corrupted.  Non-numeric parameter for base composition of domain %d.\n",n+1),"Error";if(Y[n]>15||Y[n]<1)throw printf("Input file corrupted at domain %d.  Domain base composition must be between 1 and 15.\n",n+1),"Error"}bQ()}function bP(a,b){L=a;if((Z=new Array(L))==null)throw console.error("Insufficient memory for declaring domain pointers!\n"),"Error";if((W=new Array(L))==null)throw console.error("Insufficient memory for declaring domain lengths!\n"),"Error";if((Y=new Array(L))==null)throw console.error("Insufficient memory for declaring domain base availability!\n"),"Error";if((X=new Array(L))==null)throw console.error("Insufficient memory for declaring domain importances!\n"),"Error";if(_.isArray(b))W=b;else{b||(b=7);for(m=0;m<L;m++)W[m]=b}for(m=0;m<L;m++){if((Z[m]=new Array(W[m]))==null)throw console.error("Insufficient memory for declaring domain bases!\n"),"Error";X[m]=1}be=1,bf=1,bg=1,bh=1,bi=7,bk=1,bl=15,G=0,bQ(),bS()}function bQ(){if((t=new Array(L))==null)throw console.error("Insufficient memory for declaring domain score matrix!\n"),"Error";if((bb=new Array(L))==null)throw console.error("Insufficient memory for declaring domain score matrix!\n"),"Error";if(($=new Array(L))==null)throw console.error("Insufficient memory for declaring crosstalk matrices!\n"),"Error";for(m=0;m<L;m++)if(($[m]=new Array(L))==null)throw console.error("Insufficient memory for declaring crosstalk matrices!\n"),"Error";if((ba=new Array(L))==null)throw console.error("Insufficient memory for declaring interaction matrices!\n"),"Error";for(m=0;m<L;m++)if((ba[m]=new Array(L))==null)throw console.error("Insufficient memory for declaring interaction matrices!\n"),"Error"}function bR(){var a=0;while(a==0)o=g(1,4),o==4&&Math.floor(bi/8)==1&&(a=1),o==3&&Math.floor(bi/4)%2==1&&(a=2),o==2&&Math.floor(bi/2)%2==1&&(a=3),o==1&&Math.floor(bi%2)==1&&(a=4);return a}function bS(){for(m=0;m<L;m++)bT(m)}function bT(a){Y[a]=bl;for(n=0;n<W[a];n++)Z[a][n]=bR();bg==1&&(Math.floor(bl%2)==1?Z[a][0]=14:Math.floor(bl/8)==1?Z[a][0]=11:Math.floor(bl/2)%2==1?Z[a][0]=13:Z[a][0]=12,bl%2==1?Z[a][W[a]-1]=14:Math.floor(bl/8)==1?Z[a][W[a]-1]=11:Math.floor(bl/4)%2==1?Z[a][W[a]-1]=12:Z[a][W[a]-1]=13)}function bU(a,b){var c=new Array(a);for(m=0;m<a;m++){c[m]=new Array(b);for(n=0;n<b;n++){c[m][n]=0;while(c[m][n]==0)o=g(1,4),o==4&&Math.floor(bi/8)==1&&(c[m][n]=1),o==3&&Math.floor(bi/4)%2==1&&(c[m][n]=2),o==2&&Math.floor(bi/2)%2==1&&(c[m][n]=3),o==1&&Math.floor(bi%2)==1&&(c[m][n]=4)}bg==1&&(Math.floor(bl%2)==1?c[m][0]=14:Math.floor(bl/8)==1?c[m][0]=11:Math.floor(bl/2)%2==1?c[m][0]=13:c[m][0]=12,bl%2==1?c[m][b-1]=14:Math.floor(bl/8)==1?c[m][b-1]=11:Math.floor(bl/4)%2==1?c[m][b-1]=12:c[m][b-1]=13)}return c}function bV(){for(m=0;m<L;m++){for(n=0;n<W[m];n++)if(Z[m][n]<10){Z[m][n]=0;while(Z[m][n]==0)o=g(1,4),o==4&&bi/8==1&&(Z[m][n]=1),o==3&&bi/4%2==1&&(Z[m][n]=2),o==2&&bi/2%2==1&&(Z[m][n]=3),o==1&&bi%2==1&&(Z[m][n]=4)}bg==1&&(Y[m]%2==1?Z[m][0]=14:Y[m]/8==1?Z[m][0]=11:Y[m]/2%2==1?Z[m][0]=13:Z[m][0]=12,Y[m]%2==1?Z[m][W[m]-1]=14:Y[m]/8==1?Z[m][W[m]-1]=11:Y[m]/4%2==1?Z[m][W[m]-1]=12:Z[m][W[m]-1]=13)}}function bW(){var a="";a+=L+"\n";for(m=0;m<L;m++){for(n=0;n<W[m];n++)Z[m][n]==1&&(a+="g"),Z[m][n]==11&&(a+="G"),Z[m][n]==2&&(a+="a"),Z[m][n]==12&&(a+="A"),Z[m][n]==3&&(a+="t"),Z[m][n]==13&&(a+="T"),Z[m][n]==4&&(a+="c"),Z[m][n]==14&&(a+="C");a+=" "+X[m]+" "+Y[m]+"\n"}return a}function bX(){for(m=0;m<L;m++)for(n=0;n<L;n++)if(m==n)ba[m][n]=k(Z[m],W[m],Z[n],W[n])+bz,$[m][n]=l(Z[m],W[m])/bB+bz;else{ba[m][n]=k(Z[m],W[m],Z[n],W[n]);for(o=0;o<W[n];o++)O[o]=15-Z[n][W[n]-1-o];$[m][n]=k(Z[m],W[m],O,W[n])/bB}bY(),bZ()}function bY(){for(m=0;m<L;m++)b_(m)}function bZ(){q=0;for(m=0;m<L;m++){t[m]=0;for(n=0;n<L;n++)ba[m][n]+X[m]+X[n]>t[m]&&(t[m]=ba[m][n]+X[m]+X[n]),$[m][n]+X[m]+X[n]+bA>t[m]&&(t[m]=$[m][n]+X[m]+X[n]+bA);t[m]=t[m]+bb[m],t[m]>q&&(q=t[m],u=m)}if(bm&&bm.length>0){q=0;for(m=0;m<bm.length;m++)t[bm[m]]>q&&(q=t[bm[m]],u=bm[m])}}function b$(a){r=q,s=bb[a];for(m=0;m<L;m++)if(m==a)ba[m][m]=k(Z[m],W[m],Z[m],W[m])+bz,$[m][m]=l(Z[m],W[m])/bB+bz;else{ba[m][a]=k(Z[m],W[m],Z[a],W[a]),ba[a][m]=k(Z[a],W[a],Z[m],W[m]);for(o=0;o<W[a];o++)O[o]=15-Z[a][W[a]-1-o];$[m][a]=k(Z[m],W[m],O,W[a])/bB;for(o=0;o<W[m];o++)O[o]=15-Z[m][W[m]-1-o];$[a][m]=k(Z[a],W[a],O,W[m])/bB}b_(a),bZ()}function b_(a){bb[a]=0,be==1&&ca(a),bf==1&&cb(a),bn==1&&cc(a)}function ca(a){o=0;for(n=0;n<W[a];n++)Z[a][n]%10==1&&o<100?o++:Z[a][n]%10==1&&(o=1),Z[a][n]%10==4&&o>100?o++:Z[a][n]%10==4&&(o=101),o<100&&o>3?bb[a]=bb[a]+bC:o>103&&(bb[a]=bb[a]+bC)}function cb(a){o=0;for(n=0;n<W[a];n++)Z[a][n]%10==2||Z[a][n]%10==3?o++:o=0,o>5&&(bb[a]=bb[a]+bD);o=0;for(n=0;n<W[a];n++)Z[a][n]%10==1||Z[a][n]%10==4?o++:o=0,o>5&&(bb[a]=bb[a]+bD)}function cc(a){if(bn==1){A=0,B=0,C=0,D=0,E=0,F=0;for(n=0;n<W[a];n++)E=Z[a][n]%10,E==1?A++:E==2?B++:E==3?C++:E==4&&D++;A/=W[a],B/=W[a],C/=W[a],D/=W[a],shannon=-(A*(A>0?f(A):0)+B*(B>0?f(B):0)+C*(C>0?f(C):0)+D*(D>0?f(D):0)),F=Y[a],F=(F&1)+((F&2)>>1)+((F&4)>>2)+((F&8)>>3),bb[a]-=(shannon-bG*f(F))*bF}}function cd(){if(Z.length==0)return;bc++,z=0;while(z<bE-1&&g(0,1)==1)z++;z++,bk?g(1,3)==1?v=u?u:g(0,L-1):v=g(0,L-1):bm&&bm.length!=0?v=bm[bm.length==1?0:g(0,bm.length-1)]:v=g(0,L-1);for(o=0;o<z;o++){n=g(0,W[v]-1);if(Z[v][n]>10)w[o]=n,y[o]=Z[v][n],x[o]=y[o];else{w[o]=n,y[o]=Z[v][n];if((Y[v]&1)+(Y[v]&2)/2+(Y[v]&4)/4+(Y[v]&8)/8>1)if(bh){do x[o]=g(1,100),x[o]<5?x[o]=1:x[o]<37?x[o]=2:x[o]<69?x[o]=3:x[o]=4,x[o]==1&&Y[v]/8==0&&(x[o]=y[o]),x[o]==2&&Y[v]/4%2==0&&(x[o]=y[o]),x[o]==3&&Y[v]/2%2==0&&(x[o]=y[o]),x[o]==4&&Y[v]%2==0&&(x[o]=y[o]);while(x[o]==y[o])}else do x[o]=g(1,100),x[o]<26?x[o]=1:x[o]<51?x[o]=2:x[o]<76?x[o]=3:x[o]=4,x[o]==1&&Y[v]/8==0&&(x[o]=y[o]),x[o]==2&&Y[v]/4%2==0&&(x[o]=y[o]),x[o]==3&&Y[v]/2%2==0&&(x[o]=y[o]),x[o]==4&&Y[v]%2==0&&(x[o]=y[o]);while(x[o]==y[o])}}for(o=0;o<z;o++)Z[v][w[o]]=x[o];r=q,b$(v),bZ();if(q<r||q==r&&g(1,100)<=80)bd+=z,q!=r&&(T=0),U=r-q,V=.9*V+2*U;else{T++,q=r;for(o=z-1;o>=0;o--)Z[v][w[o]]=y[o];bb[v]=s;for(m=0;m<L;m++)if(m==v)ba[m][m]=k(Z[m],W[m],Z[m],W[m])+bz,$[m][m]=l(Z[m],W[m])/bB+bz;else{ba[m][v]=k(Z[m],W[m],Z[v],W[v]),ba[v][m]=k(Z[v],W[v],Z[m],W[m]);for(o=0;o<W[v];o++)O[o]=15-Z[v][W[v]-1-o];$[m][v]=k(Z[m],W[m],O,W[v])/bB;for(o=0;o<W[m];o++)O[o]=15-Z[m][W[m]-1-o];$[v][m]=k(Z[v],W[v],O,W[m])/bB}}}var a=90,b=80,c=60,d=1,e=0,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A=0,B=0,C=0,D=0,E=0,F=0,G,H,I,J,K,L,M,N="",O=new Array(c),P=new Array(30),Q=new Array(30),R,S;bc=0,bd=0,z=0,q=0;var T=0,U=0,V=0,W,X,Y,Z,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo={rule_4g:1,rule_6at:1,rule_ccend:1,rule_ming:1,rule_init:7,rule_targetworst:1,rule_gatc_avail:15,rule_lockold:0,rule_targetdomain:[],rule_shannon:1},bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH={MAX_MUTATIONS:10,GCstr:2,ATstr:1,GTstr:0,MBstr:-3,LLstr:-0.5,DHstr:3,MAX_IMPORTANCE:100,LHbases:4,LHstart:2,LHpower:2,INTRA_SCORE:5,CROSSTALK_SCORE:-5,CROSSTALK_DIV:2,GGGG_PENALTY:50,ATATAT_PENALTY:20,SHANNON_BONUS:3,SHANNON_ADJUST:.7};bI(),bJ();if((w=new Array(bE))==null)throw console.error("Insufficient memory for declaring mutation memories!\n"),"Error";if((y=new Array(bE))==null)throw console.error("Insufficient memory for declaring mutation memories!\n"),"Error";if((x=new Array(bE))==null)throw console.error("Insufficient memory for declaring mutation memories!\n"),"Error";_.extend(this,{version:"0.3.1",loadFile:bO,saveFile:bW,newDesign:bP,randomSequence:bU,reseed:bS,reseedDomain:bT,addDomains:bK,removeDomain:bM,mutate:cd,mutateUntil:function(a){do this.mutate();while(!a(this))},mutateWhile:function(a){do this.mutate();while(a(this))},evaluateAllScores:bX,evaluateScores:b$,evaluateIntrinsicScores:bY,popDomain:bL,saveState:function(){return state={},state.domain_length=W,state.domain_importance=X,state.domain_gatc_avail=Y,state.domain=Z,state.num_domain=L,state.num_mut_attempts=bc,bd=bd,state.score=q,state.domain_score=t,state.worst_domain=u,state.num_mut=z,state.rules=_.clone(bo),state.params=_.clone(bH),state.verson=this.version,state},loadState:function(a){W=a.domain_length||W,X=a.domain_importance||X,Y=a.domain_gatc_avail||Y,Z=a.domain||Z,bc=a.num_mut_attempts&&_.isNumber(a.num_mut_attempts)?a.num_mut_attempts:0,bd=a.total_mutations&&_.isNumber(a.total_mutations)?a.total_mutations:0,L=a.num_domain&&_.isNumber(a.num_domain)?a.num_domain:Z.length,q=a.score||q,t=a.domain_score||t,u=a.worst_domain||u,z=a.num_mut||z,_.extend(bo,a.rules),_.extend(bH,a.params),bQ()},serialize:function(){this.saveState.apply(this,arguments)},deserialize:function(){this.loadState.apply(this,arguments)},getRules:function(){return _.clone(bo)},updateRules:function(a){a=_.defaults(a,bo),_.extend(bo,a),bI()},getParams:function(){return _.clone(bH)},updateParams:function(a){a=_.defaults(a,bH),_.extend(bH,_.reduce(a,function(a,b,c){return a[c]=+b,a},{})),bJ()},updateDomain:function(a,b,c,d){b=b.trim(),Z[a]=bN(b),W[a]=b.length,c&&c!=0&&(X[a]=c),d&&d!=0&&(Y[a]=d)},targetDomain:function(a){bm.indexOf(a)==-1&&(bm.push(a),bo.rule_targetdomain=bm,bo.rule_targetworst=bk=0)},untargetDomain:function(a){var b=bm.indexOf(a);b!=-1&&(bm.splice(b),bo.rule_targetdomain=bm,bm.length==0&&(bo.rule_targetworst=bk=1))},getMutationAttempts:function(){return bc},getMutationCount:function(){return bd},getMutationFlux:function(){return V},getBoredMutations:function(){return T},getMutationDelta:function(){return U},getWorstDomain:function(){return u},getWorstScore:function(){return q},getScore:function(a,b){return(b||!1)&&this.evaluthis.domain_length,t[a]},getScores:function(a){return a=a||!1,a&&bZ(),t},getMutatedDomain:function(){return v},getDomainCount:function(){return L||0},getDomains:function(){return Z},printfDomain:function(a){return _.reduce(a,function(a,b){return a+=i(b)},"")},printDomain:function(a){return _.reduce(a,function(a,b){return a+=j(b)},"")},printDomainById:function(a){var b=Z[a];return this.printDomain(b)},printfDomainById:function(a){var b=Z[a];return this.printfDomain(b)},getImportance:function(){return Y},getCompositions:function(){return Y},getImportances:function(){return X},printComposition:function(a){var b="";return(a&8)>>3&&(b+="G"),(a&4)>>2&&(b+="A"),(a&2)>>1&&(b+="T"),a&1&&(b+="C"),b},printCompositionById:function(a){return this.printComposition(Y[a])},printDomains:function(){return _.map(Z,this.printDomain,this)},printfDomains:function(){return _.map(Z,this.printfDomain,this)}})};typeof module!="undefined"&&(module.exports=DD);
Ext.define("App.ui.Launcher",{singleton:!0,triggerDelimiter:":",_triggers:{},_openTabs:{},register:function(a,b,c){c||(c={}),this._triggers[a]={cls:b,config:c}},getActiveApp:function(){return this.tabPanel.getActiveTab()},addTab:function(a){this.tabPanel&&this.tabPanel.add(a)},launchDocument:function(a){return a.app?(this.tabPanel.setActive(a.app),a.app):a.get("trigger")?App.ui.Launcher.launch(a.get("trigger"),a):null},renewAll:function(){},launch:function(a,b){if(!a||a=="false")return;g=this._openTabs[a];if(g)this.tabPanel.setActiveTab(g);else{var c=a.split(this.triggerDelimiter),d=c.shift(),e=this._triggers[d],f,g;e?(f=this.tabPanel.setLoading("Loading..."),g=Ext.create(e.cls,Ext.apply({},e.config,{document:b||!1,initialTrigger:a,triggers:c,closable:!0,listeners:{afterrender:{fn:function(){f.hide()},single:!0}}}))):(f=this.tabPanel.setLoading("Loading..."),g=Ext.createByAlias("app."+d));if(g)return this.addTab(g),this.tabPanel.setActiveTab(g),this._openTabs[a]=g,g.on("close",function(a){delete this._openTabs[a.initialTrigger]},this),App.log("Launched application with trigger: "+a,{iconCls:"application",silent:!0}),f.hide(),g}},getLaunchers:function(){return this._triggers},makeLauncher:function(a){return Ext.bind(function(){this.launch(a)},this)},toggleConsole:function(){this.console.toggleCollapse()},showConsole:function(){this.console.expand()},getAppMenu:function(a){return this.appMenu||(this.appMenu=Ext.create("Ext.menu.Menu",{})),this.appMenu.removeAll(),this.appMenu.suspendLayout=!0,_.each(this._openTabs,function(b,c){this.appMenu.add({text:b.title,iconCls:b.iconCls||"application",handler:a?_.bind(a,b,b,c):this.makeLauncher(c)})},this),this.appMenu.suspendLayout=!1,this.appMenu.doLayout(),this.appMenu}},function(){App.ui.Launcher.register("help","App.ui.Help",{}),App.ui.Launcher.register("nodal","App.ui.NodalCanvas",{title:"Nodal System",editorType:"Nodal",iconCls:"nodal"}),App.ui.Launcher.register("secondary","App.ui.SecondaryCanvas",{title:"Secondary Structure"}),App.ui.Launcher.register("primary","App.ui.Canvas",{title:"Primary Structure",editorType:"Primary",iconCls:"line",border:!1,ribbonItems:[{xtype:"primary-hometab",title:"Home",border:!1}]}),App.ui.Launcher.register("whiteboard","App.ui.Canvas",{title:"Whiteboard"}),App.ui.Launcher.register("dashboard","App.ui.Dashboard",{}),App.ui.Launcher.register("nupack/design","App.ui.Browser",{url:"http://www.nupack.org/design",title:"NUPACK Design",iconCls:"nupack-icon"}),App.ui.Launcher.register("nupack/analyze","App.ui.Browser",{url:"http://www.nupack.org/partition",title:"NUPACK Analysis",iconCls:"nupack-icon"}),App.ui.Launcher.register("nupack/utilities","App.ui.Browser",{url:"http://www.nupack.org/utilities",title:"NUPACK Util",iconCls:"nupack-icon"}),App.ui.Launcher.register("nupack","App.ui.Browser",{url:"http://www.nupack.org/",iconCls:"nupack-icon",title:"NUPACK"}),App.ui.Launcher.register("viewer","App.ui.Viewer",{}),App.ui.Launcher.register("nupackedit","App.ui.NupackEditor",{}),App.ui.Launcher.register("taskmanager","App.ui.TaskManager",{iconCls:"system-monitor",title:"Task Manager"}),App.ui.Launcher.register("js","App.ui.JavascriptEditor",{}),App.ui.Launcher.register("txt","App.ui.TextEditor",{iconCls:"txt",editorType:"Text",mode:""}),App.ui.Launcher.register("dynaml","App.ui.DynamlEditor",{}),App.ui.Launcher.register("html","App.ui.TextEditor",{iconCls:"html",editorType:"HTML",mode:"htmlmixed"}),App.ui.Launcher.register("xml","App.ui.TextEditor",{iconCls:"xml",editorType:"XML",mode:"xml"}),App.ui.Launcher.register("tex","App.ui.TextEditor",{iconCls:"tex",editorType:"TeX",mode:"tex"}),App.ui.Launcher.register("pil","App.ui.TextEditor",{iconCls:"pil",editorType:"PIL",mode:"pepper"}),App.ui.Launcher.register("pepper","App.ui.Pepper",{iconCls:"pepper",editorType:"Pepper",mode:"pepper"}),App.ui.Launcher.register("sequence","App.ui.SequenceEditor",{}),App.ui.Launcher.register("nupackresults","App.ui.NupackResults",{iconCls:"nupack-icon",editorType:"NUPACK Results"}),App.ui.Launcher.register("dd","App.ui.DD",{iconCls:"seq"}),App.ui.active=function(){return App.ui.Launcher.getActiveApp()}});
Ext.define("App.ui.TabPanel",{extend:"Ext.tab.Panel",bodyCls:"x-docked-noborder-top",plain:!0,items:[],initComponent:function(){this.mon(this,{scope:this,afterlayout:this.onAfterLayout,single:!0}),this.callParent(arguments)},onAfterLayout:function(){this.mon(this.tabBar.el,{scope:this,contextmenu:this.onContextMenu,delegate:"div.x-tab"})},onContextMenu:function(a,b){App.ui.Launcher.getAppMenu().showAt(a.getXY()),a.preventDefault()}});
Ext.define("App.ui.Application",{autoHideLoadingMask:!0,autoHideSavingMask:!0,loadingMsg:"Loading File...",savingMsg:"Saving File...",constructor:function(a){this.bindDocument(a?a.document?a.document:null:null,!0)},renew:function(){if(this.doc){var a=this.doc.id,b=App.DocumentStore.getRootNode().findChildBy(function(b){return b.id==a},!0);b&&(this.unbindDocument(),this.bindDocument(b))}},bindDocument:function(a,b){b||(b=!1),this.doc=this.document=a,this.doc&&(this.doc.on("edit",this.updateTitle,this),this.updateTitle(),b||this.fireEvent("binddocument",this,a))},unbindDocument:function(){this.doc.un("edit",this.updateTitle,this),this.doc=this.document=null,this.fireEvent("unbinddocument",this,this.doc)},updateTitle:function(){var a=this.editorType;this.doc&&(a=this.doc.getBasename()+" ("+a+")");try{this.setTitle(a)}catch(b){}},getPath:function(){return this.doc?this.doc.getDocumentPath():!1},getDocumentPath:function(){return this.getPath()},loadFile:function(){this.loadingMask=new Ext.LoadMask(this.body,{msg:this.loadingMsg}),this.doc?this.doc.loadBody({success:this.doLoad,failure:this.doLoadFail,scope:this}):(this.data="",this.onLoad())},doLoad:function(a){this.data=a,this.onLoad(),this.autoHideLoadingMask&&this.loadingMask.hide()},doLoadFail:function(a){this.autoHideLoadingMask&&this.loadingMask.hide(),console.log("File load failed.",a),App.log("File load failed.",{silent:!0,error:!0}),Ext.msg("File","Couldn't load file <strong>{0}</strong>. Message: {1}",this.document.get("text"),a.message||"none")},onLoad:function(){},save:function(){return this.saveFile.apply(this,arguments)},saveFile:function(){this.savingMask||(this.savingMask=new Ext.LoadMask(this.body,{msg:this.savingMsg})),this.savingMask.show();var a=this.getSaveData();this._lastSave=a,Ext.isObject(a)&&(a=Ext.encode(a)),this.doc.saveBody(a,{success:this.doSave,failure:this.doSaveFail,scope:this})},doSave:function(){this.autoHideSavingMask&&this.savingMask.hide(),this.onSave(),App.log("File saved to server.",{silent:!0,iconCls:"save"}),Ext.msg("File","<strong>{0}</strong> saved to server.",this.document.get("text"))},doSaveFail:function(a){this.autoHideSavingMask&&this.savingMask.hide(),App.log("File save failed.",{silent:!0,error:!0}),Ext.msg("File","Couldn't save file <strong>{0}</strong>. Message: {1}",this.document.get("text"),a.message||"none")},onSave:function(){},getSaveData:function(){return""}});
Ext.define("App.ui.NupackMenu",{require:["App.ui.nupack.DesignWindow","App.ui.nupack.PartitionWindow"],extend:"Ext.menu.Menu",initComponent:function(){Ext.apply(this,{items:[{text:"Analyze...",handler:this.openPartitionWindow,iconCls:"nupack-icon"},{text:"Design...",handler:this.openDesignWindow,scope:this,iconCls:"nupack-icon"},{text:"Utilities",handler:App.ui.Launcher.makeLauncher("nupack/utilities"),iconCls:"nupack-icon"}]}),this.callParent(arguments)},openDesignWindow:function(){this.designWindow||(this.designWindow=Ext.create("App.ui.nupack.DesignWindow")),this.designWindow.show(),this.fireEvent("designwindow",this,this.designWindow)},openPartitionWindow:function(){this.partitionWindow||(this.partitionWindow=Ext.create("App.ui.nupack.PartitionWindow")),this.partitionWindow.show(),this.fireEvent("partitionwindow",this,this.partitionWindow)}});
Ext.define("App.ui.Attribution",{extend:"Ext.window.Window",width:500,height:500,bodyStyle:"padding:10px; background-color: white;",autoScroll:!0,closeAction:"hide",title:"About",initComponent:function(){Ext.apply(this,{autoLoad:{url:"/attribution",callback:this.initAttribution,scope:this}}),this.callParent(arguments)},initAttribution:function(){}});
Ext.define("App.ui.console.LogPanel",{extend:"Ext.panel.Panel",autoScroll:!0,region:"center",border:"0 1 0 0",bodyBorder:!1,padding:"0 0 5 0",cls:"noborder-top",bodyCls:"noborder-top",html:'<div class="logBody"></div>',getLogBody:function(){return this.body.down(".logBody")},initComponent:function(){this.groups={},this.logLevels={info:"console-info",warn:"console-warn",error:"console-error"},this.callParent(arguments)},dump:function(a){if(typeof a=="string"||typeof a=="number"||typeof a=="undefined"||Ext.isDate(a))return a;if(!a)return"null";if(typeof a!="object")return"Unknown return type";if(Ext.isArray(a))return"["+a.join(",")+"]";var b=["{\n"];for(var c in a){var d=typeof a[c];d!="function"&&d!="object"&&b.push(Ext.String.format("  {0}: {1},\n",c,a[c]))}var e=b.join("");return e.length>3&&(e=e.substr(0,e.length-2)),e+"\n}"},log:function(a,b){var c="",d,e=this.body.dom;_.defaults(b,{silent:!1,iconCls:"",level:"info"}),a&&a!=""&&(_.isString(a)||(a=this.dump(a)),c=['<div class="console-message ',b.iconCls," ",this.logLevels[b.level],'">',Ext.util.Format.htmlEncode(a).replace(/\n/g,"<br/>").replace(/\s/g,"&#160;"),"</div>"].join(""));if(b.group){var f=Ext.isObject(b.group)?b.group.name:b.group;if(!this.groups[f]){var g=Ext.isObject(b.group)?b.group:{title:b.group};Ext.apply(g,{renderTo:this.getLogBody(),margin:"5 5 5 20",collapsible:!0,layout:"auto",minHeight:100,height:100,resizable:{handles:"s"},autoScroll:!0}),this.groups[f]=Ext.create("Ext.panel.Panel",g)}d=this.groups[f].body}else d=this.getLogBody();d.insertHtml("beforeend",c),e.scrollTop=e.scrollHeight},getGroupPanel:function(a){return this.groups[a]},clear:function(){_.each(this.groups,function(a,b){a.destroy()}),this.groups={},this.body.update(""),this.body.dom.scrollTop=0}});
Ext.define("App.ui.CreateMenu",{extend:"Ext.menu.Menu",labelText:"File Name:",createText:"Create",createIconCls:"tick",autoCreateMenu:!0,afterLeaveDelay:100,initComponent:function(){this.extraMenuItems||(this.extraMenuItems=[]),Ext.apply(this,{items:[{text:this.labelText,canActivate:!1,iconCls:"rename"},{xtype:"textfield",allowBlank:!1,iconCls:"rename",ref:"fileNameField",indent:!0}].concat(this.extraMenuItems,[{text:this.createText,iconCls:this.createIconCls,ref:"createButton",disabled:!0,menu:Ext.apply(this.getCreateMenu(),{ref:"createMenu"})}])}),this.callParent(arguments),_.each(this.query("*[ref]"),function(a){this[a.ref]=a},this),this.fileNameField.on("validitychange",function(a,b){this.createButton.setDisabled(!b)},this),this.createButton.on("click",function(){var a=this.fileNameField.getValue();this.onCreateButton(a)},this),this.createMenu&&this.createMenu.on("click",function(a,b,c){if(b){var d=b.type,e=this.fileNameField.getValue(),f=d!="folder"?App.Path.addExt(e,d):e;this.onCreate(d,e,f)}},this)},afterRender:function(){this.callParent(arguments);var a=this;a.el.un(a.mouseMonitor),a.mouseMonitor=a.el.monitorMouseLeave(this.afterLeaveDelay,a.onMouseLeave,a)},onCreateButton:function(a){},onCreate:function(a,b,c){App.ui.filesTree.newFileUnderSelection(c)},getCreateMenu:function(){return this.autoCreateMenu?{items:[{text:"Nodal System",iconCls:"nodal",type:"nodal"},{text:"DyNAML File",iconCls:"dynaml",type:"dynaml"},"-",{text:"Pepper System",iconCls:"pepper",type:"sys"},{text:"Pepper Component",iconCls:"pepper",type:"comp"},{text:"Pepper Intermediate (PIL)",iconCls:"pil",type:"pil"},"-",{text:"NUPACK Multi-objective script",iconCls:"nupack",type:"nupack"},{text:"Sequence",iconCls:"seq",type:"seq"},{text:"Primary Structure",iconCls:"line",type:"primary"},{text:"Secondary Structure",iconCls:"polyline",type:"secondary"},"-",{text:"Chemical Reaction Network",iconCls:"crn",type:"crn",disabled:!0},{text:"SBML File",iconCls:"sbml",type:"sbml",disabled:!0},"-",{text:"Workspace",iconCls:"workspace",type:"workspace"},{text:"HTML File",iconCls:"html",type:"html"},{text:"XML File",iconCls:"xml",type:"xml"},{text:"Javascript File",iconCls:"js",type:"js"},{text:"Text File",iconCls:"txt",type:"txt"},"-",{text:"Folder",iconCls:"folder",type:"folder"}]}:!1}});
Ext.define("App.ui.ProtovisPanel",{alias:"widget.pvpanel",extend:"Ext.panel.Panel",pan:!0,zoom:1,bpadding:20,visPadding:10,autoRender:!1,autoSize:!0,initComponent:function(){this.callParent(arguments),this.autoRender&&this.on("afterrender",this.afterrender,this,{single:!0})},afterrender:function(){this.built||(this.buildVis(),this.collapsed||this.renderVis(),this.on("collapse",this.hideVis,this),this.on("expand",this.resizeVis,this),this.on("resize",this.resizeVis,this),this.built=!0)},getBodyWidth:function(){return this.body.getWidth()},getBodyHeight:function(){return this.body.getHeight()},resizeVis:function(a,b,c){this.autoSize&&this.doAutoSize(),this.updateVis(),this.vis.render()},doAutoSize:function(){this.vis.width(this.getBodyWidth()-this.visPadding).height(this.getBodyHeight()-this.visPadding).top(this.visPadding).left(this.visPadding)},renderVis:function(){this.vis&&(this.vis.visible(!0),this.vis.render())},updateVis:function(){},hideVis:function(){this.vis&&this.vis.render()},buildVis:function(){return this.getCanvas()},getCanvas:function(){return this.vis||(this.vis=(new pv.Panel).canvas(this.body.dom),this.autoSize&&this.doAutoSize(),this.pan&&this.vis.event("mousedown",pv.Behavior.pan()),this.zoom&&this.vis.event("mousewheel",pv.Behavior.zoom(this.zoom))),this.vis}});
Ext.define("App.ui.CodeMirror",{alias:"widget.codemirror",extend:"Ext.panel.Panel",value:"",autoScroll:!0,lineNumbers:!0,initComponent:function(){Ext.applyIf(this,{html:'<textarea style="width: 100%;border:none;">'+this.value+"</textarea>",lastPos:null,lastQuery:null,marked:[]}),this.callParent(arguments),this.on("afterrender",this.afterrender,this,{single:!0}),this.addEvents("cursorchange")},mode:"text/plain",showLineNumbers:!0,enableMatchBrackets:!0,enableElectricChars:!1,enableIndentWithTabs:!0,enableSmartIndent:!0,enableLineWrapping:!1,enableLineNumbers:!0,enableGutter:!1,enableFixedGutter:!1,firstLineNumber:1,readOnly:!1,pollInterval:100,indentUnit:4,tabSize:4,theme:"default",afterrender:function(){var a=this.getEl().down("textarea").dom;if(a){var b=this;this.codemirror=CodeMirror.fromTextArea(a,_.copyTo({matchBrackets:b.enableMatchBrackets,electricChars:b.enableElectricChars,indentUnit:b.indentUnit,smartIndent:b.enableSmartIndent,indentWithTabs:b.enableIndentWithTabs,pollInterval:b.pollInterval,lineNumbers:b.enableLineNumbers,lineWrapping:b.enableLineWrapping,firstLineNumber:b.firstLineNumber,tabSize:b.tabSize,gutter:b.enableGutter,fixedGutter:b.enableFixedGutter,theme:b.theme,onCursorActivity:Ext.bind(this.onCursorActivity,this),onBlur:Ext.bind(this.onBlur,this),onFocus:Ext.bind(this.onFocus,this)},this)),this.codemirror.setValue(this.value||"")}},onBlur:function(){this.fireEvent("blur",this,this.editor)},onFocus:function(){this.fireEvent("focus",this,this.editor)},onCursorActivity:function(){this.fireEvent("cursorchange",this,this.editor)},getValue:function(){return this.codemirror.getValue()},setValue:function(a){this.rendered?this.codemirror.setValue(a||""):this.value=a||""},getCursor:function(a){return this.codemirror.getCursor(a)},getSelectedRange:function(){return{from:this.getCursor(!0),to:this.getCursor(!1)}},autoFormatSelection:function(){var a=this.getSelectedRange();this.codemirror.autoFormatRange(a.from,a.to)},unmark:function(){for(var a=0;a<this.marked.length;++a)this.marked[a]();this.marked.length=0},search:function(a){var b=this.codemirror;this.unmark();if(!a)return;for(var c=b.getSearchCursor(a);c.findNext();)this.marked.push(b.markText(c.from(),c.to(),"searched"));this.lastQuery!=a&&(this.lastPos=null);var c=b.getSearchCursor(a,this.lastPos||b.getCursor());if(!c.findNext()){c=b.getSearchCursor(a);if(!c.findNext())return}b.setSelection(c.from(),c.to()),this.lastQuery=a,this.lastPos=c.to()},replace:function(a,b){var c=this.codemirror;this.unmark();if(!a)return;for(var d=c.getSearchCursor(a);d.findNext();)c.replaceRange(b,d.from(),d.to())}},function(){});
Ext.define("App.ui.FileUploader",{extend:"Ext.util.Observable",constructor:function(a){this.callParent(arguments),Ext.apply(this,a)},inheritableStatics:{handlers:{},handlerOrder:[],addHandler:function(a,b){Ext.isArray(a)?Ext.each(a,function(a){this.handlers[a]=b,this.handlerOrder.unshift(a)},this):(this.handlers[a]=b,this.handlerOrder.unshift(a))},hasHandler:function(a){return this.handlers[a]!=0},getHandler:function(a){return this.handlers[a]},eachHandler:function(a){Ext.each(this.handlerOrder,a)},getExtension:function(a){return a.split(".").pop()}},getConfig:function(){return{onComplete:Ext.bind(this.onComplete,this),onProgress:Ext.bind(this.onProgress,this),onCancel:Ext.bind(this.onCancel,this)}},onComplete:function(a,b,c){var d=c,e,f;c.success&&(f=c.readablePath,e=Ext.getClass(this).getExtension(f),Ext.getClass(this).hasHandler(e)&&Ext.getClass(this).getHandler(e).call(this,f))},onProgress:function(a,b,c,d){},onCancel:function(a,b){}},function(){});
jQuery.event.props.push("dataTransfer"),Ext.define("App.ui.DragDropManager",{extend:"Ext.util.Observable",allowExtDD:!1,constructor:function(a){this.callParent(arguments),Ext.apply(this,a)},inheritableStatics:{handlers:{},handlerOrder:[],addHandler:function(a,b){Ext.isArray(a)?Ext.each(a,function(a){this.handlers[a]=b,this.handlerOrder.unshift(a)},this):(this.handlers[a]=b,this.handlerOrder.unshift(a))},hasHandler:function(a){return this.handlers[a]!=0},getHandler:function(a){return this.handlers[a]},eachHandler:function(a){Ext.each(this.handlerOrder,function(b){a(b,this.getHandler(b))},this)}},getEl:function(){return this.element},render:function(){var a=$(this.getEl().dom);a.bind("drop",Ext.bind(this.onDrop,this)),a.bind("dragenter",this.onDragEnter,this),a.bind("dragover",this.onDragOver,this),this.allowExtDD&&(this.dropZone=new Ext.dd.DropTarget(this.workspace.getEl(),{notifyDrop:Ext.bind(this.notifyDrop,this)}))},notifyDrop:function(a,b,c){if(c.mimeType&&Ext.getClass(this).hasHandler(c.mimeType)){var d=Ext.getClass(this).getHandler(c.mimeType);return d.call(this,c,b),!0}return!1},onDrop:function(a){var b=this;a.dataTransfer.files&&this.fileHandler&&this.fileHandler(a.dataTransfer.files,a),Ext.getClass(this).eachHandler(function(c,d){if(a.dataTransfer.types.indexOf(c)!=-1)return d.call(b,a.dataTransfer.getData(c),a),!1}),a.preventDefault()},onDragEnter:function(a){a.preventDefault()},onDragOver:function(a){a.preventDefault()},destroy:function(){this.workspace.getEl().un("drop",this.onDrop,this)},getAdjustedXYcoords:function(){return Workspace.tools.BaseTool.prototype.getAdjustedXYcoords.apply(this,arguments)},getAdjustedXY:function(){return Workspace.tools.BaseTool.prototype.getAdjustedXY.apply(this,arguments)},onFileComplete:function(a,b,c){this.fileUploaders[a]&&(this.fileUploaders[a].onComplete(a,b,c),delete this.fileUploaders[a])},onFileProgress:function(a,b,c,d){this.fileUploaders[a]&&this.fileUploaders[a].onProgress(a,b,c,d)},onFileCancel:function(a,b){this.fileUploaders[a]&&(this.fileUploaders[a].onCancel(a,b),delete this.fileUploaders[a])},getUploadHandler:function(){return this.uploadHandler||(this.uploadHandler=new qq.UploadHandlerXhr({action:this.getUploadUrl(),onComplete:Ext.bind(this.onFileComplete,this),onCancel:Ext.bind(this.onFileCancel,this),onProgress:Ext.bind(this.onFileProgress,this)}),this.fileUploaders={}),this.uploadHandler},fileHandler:function(a,b){},getUploadUrl:function(){return App.getEndpoint("upload")}},function(){});
Ext.define("App.ui.console.ScriptsPanel",{extend:"Ext.panel.Panel",requires:["App.ui.CodeMirror"],id:"x-debug-scripts",region:"east",minWidth:200,split:!0,width:350,border:!1,layout:"fit",bodyBorder:!1,padding:"0 0 5 0",cls:"noborder-top",initComponent:function(){this.scriptField=Ext.create("App.ui.CodeMirror",{style:"border-width:0;",mode:"javascript",tbar:!1,onKeyEvent:Ext.bind(function(a,b){if(b.keyCode==13&&b.shiftKey&&b.type=="keydown")return b.stop(),this.evalScript(),!1},this)}),this.trapBox=Ext.create("Ext.form.Checkbox",{id:"console-trap",boxLabel:"Trap Errors",checked:!0}),this.toolbar=Ext.create("Ext.Toolbar",{dock:"top",items:[{text:"Run",iconCls:"run",scope:this,handler:this.evalScript},{text:"Clear",iconCls:"cross",scope:this,handler:this.clear},"->",this.trapBox," "," "]}),this.items=[this.scriptField],this.dockedItems=[this.toolbar],this.callParent(arguments)},evalScript:function(){var a=this.scriptField.getValue();this.executeInContext(a,App.ui.active(),this.trapBox.getValue())},executeInContext:function(a,b,c,d){var e=[],f=[];if(c)try{_.each(d,function(a,b){e.push(b),f.push(a)});var g=Function.apply(window,e.concat([a]));g=g.apply(b,f),App.dump(g===undefined?"(no return)":g)}catch(h){App.log(h.message||h.descript,{iconCls:"error"})}else{_.each(d,function(a,b){e.push(b),f.push(a)});var g=Function.apply(window,e.concat([a]));g=g.apply(b,f),App.dump(g===undefined?"(no return)":g)}},clear:function(){this.scriptField.setValue(""),this.scriptField.focus()}});
Ext.define("App.ui.nupack.Panel",{alias:"widget.resultspanel",requires:["App.ui.ProtovisPanel"],extend:"Ext.panel.Panel",initComponent:function(){var a=DNA.generateAdjacency(this.complexData.structure,this.complexData.strands,!1,{ppairs:this.complexData.ppairs}),b=DNA.generateAdjacency(this.complexData.structure,this.complexData.strands,!0,{ppairs:this.complexData.ppairs}),c=pv.Colors.category10(),d=pv.Scale.linear(0,.5,1).range("rgba(0,0,180,1)","rgba(180,180,0,1)","rgba(180,0,0,1)");Ext.apply(this,{title:'<span class="nupack-complex-strands">'+this.complexData.strandNames.join("+")+"</span>"+'<span class="nupack-concentration-bar"></span><span class="nupack-concentration">'+this.complexData.concentration+" M&nbsp;|&nbsp;</span>",cls:"nupack-complex-panel",collapsible:!0,titleCollapse:!0,collapsed:!0,resizable:{handles:"n s"},listeners:{expand:function(a){this.force&&this.adjacency&&this.arc&&(this.doLayout(),_.invoke([this.force,this.adjacency,this.arc],"afterrender"))}},layout:"border",defaults:{xtype:"panel",collapsible:!0,cls:"simple-header"},items:[{xtype:"pvpanel",ref:"force",title:"Secondary Structure",layout:"fit",region:"north",split:!0,flex:1,margins:"5 5 0 5",titleCollapse:!0,nodeLayout:b,buildVis:function(){this.getCanvas();var a=this.vis;a.fillStyle("white");var b=a.add(pv.Layout.Force).nodes(this.nodeLayout.nodes).links(this.nodeLayout.links).chargeConstant(-220).springConstant(.9).bound(!1);b.link.add(pv.Line).strokeStyle(function(a,b){return b.probability?d(b.probability):"rgba(0,0,0,0.2)"}),b.node.add(pv.Dot).size(function(a){return(a.linkDegree+4)*Math.pow(this.scale,-1.5)}).fillStyle(function(a){return a.fix?"brown":c(a.strand)}).strokeStyle(function(){return this.fillStyle().darker()}).lineWidth(1).title(function(a){return a.nodeName}).event("mousedown",pv.Behavior.drag()).event("drag",b)}},{layout:"border",region:"center",flex:1,collapseMode:"mini",preventHeader:!0,split:!0,margins:"0 5 5 5",border:!1,items:[{title:"Arc Diagram",xtype:"pvpanel",ref:"arc",region:"center",flex:1,titleCollapse:!0,collapseDirection:"left",headerPosition:"left",zoom:5,nodeLayout:a,buildVis:function(){this.getCanvas();var a=this.vis;this.arc=a.add(pv.Layout.Arc).nodes(this.nodeLayout.nodes).links(this.nodeLayout.links).orient("radial").fillStyle("white"),this.arc.link.add(pv.Line).strokeStyle(function(a){return a.probability?d(a.probability):"#ddd"}),this.arc.node.add(pv.Dot).fillStyle(function(a){return c(a.strand)}),this.arc.label.add(pv.Label),this.updateVis()},updateVis:function(){this.arc.top(10).left(10).bottom(10).right(10)}},{title:"Adjacency Matrix",xtype:"pvpanel",region:"east",ref:"adjacency",split:!0,flex:1,titleCollapse:!0,collapseDirection:"right",headerPosition:"right",zoom:10,nodeLayout:a,buildVis:function(){this.getCanvas();var a=this.vis,b=this.layout=a.add(pv.Layout.Matrix).nodes(this.nodeLayout.nodes).links(this.nodeLayout.links).fillStyle("white");b.link.add(pv.Bar).fillStyle(function(a,b){return a.probability?d(a.probability):"#ddd"}).antialias(!1).lineWidth(1),b.label.add(pv.Label).textStyle(function(a){return c(a.strand)}),this.updateVis()},updateVis:function(){var a=Math.max(this.layout.data.length*12,Math.min(this.getBodyWidth(),this.getBodyHeight()));this.layout.top(10).left(10).width(a).height(a)}}]}],minHeight:200,height:600}),this.callParent(),_.each(this.query("*[ref]"),function(a){this[a.ref]=a},this),this.on("afterrender",this.afterrender,this)},afterrender:function(){var a=this.getEl().down(".nupack-concentration-bar").dom,b=parseFloat(this.complexData.concentration)*1e3,c=400,d=10,e=Math.abs(b/this.maxConcentration),f=(new pv.Panel).canvas(a).width(c).height(d);f.add(pv.Bar).data([{concentration:e}]).width(function(a){return Math.round(a.concentration*c)}).height(d).top(0).left(0).fillStyle("#d00"),f.render()}});
Ext.define("App.ui.files.FileUploader",{extend:"App.ui.FileUploader"},function(){App.ui.files.FileUploader.addHandler(["jpg","png","gif","txt","pdf","svg","txt","seq","nupack","nodal","workspace","html","js","xml"],function(a){App.ui.filesTree.refreshDocument(this.record),this.filesTree.loaders--,this.filesTree.setLoading(this.filesTree.loaders>0),Ext.msg("File","{0} uploaded successfully.",a)}),App.ui.files.FileUploader.addHandler(["exe","sh","run",""],function(a){Ext.MsgBox.alert("Not Permitted","Uploading this type of file is not allowed for security reasons.")})});
Ext.define("App.ui.files.DragDropManager",{constructor:function(){this.callParent(arguments),this.filesTree&&this.filesTree.getEl()&&(this.element=this.filesTree.getEl())},requires:["App.ui.files.FileUploader"],extend:"App.ui.DragDropManager",fileHandler:function(a,b){var c=Ext.get(b.target).up(".x-grid-row"),d;c&&(d=this.filesTree.getView().getRecord(c),d&&(d=d.getFolder(),uh=this.getUploadHandler(),Ext.each(a,function(a){var b=uh.add(a),c=Ext.create("App.ui.files.FileUploader",{filesTree:this.filesTree,record:d,manager:this,fileId:b});this.fileUploaders[b]=c,uh.upload(b,{userfile:App.Path.join([d.getPath(),uh.getName(b)])}),this.filesTree.loaders++,this.filesTree.setLoading(this.filesTree.loaders>0)},this)))}},function(){});
Ext.define("App.ui.FilesTree",{extend:"Ext.tree.Panel",requires:["App.ui.files.DragDropManager","App.ui.files.FileUploader","App.ui.CreateMenu","App.ui.Launcher"],title:"Files",newFileNumber:0,loaders:0,useArrows:!0,getState:function(){var a=[],b=this.callParent(),c=function(a,b,c){b=b||a.idProperty,c=c||"/";var d=[a.get(b)],e=a.parentNode;while(e)d.unshift(e.get(b)),e=e.parentNode;return c+d.join(c)};return this.getRootNode().eachChild(function(b){var d=function(a,b){a.isExpanded()&&a.childNodes.length>0&&(b.push(c(a,"text")),a.eachChild(function(a){d(a,b)}))};d(b,a)}),Ext.apply(b,{expandedNodes:a}),b},applyState:function(a){var b=a.expandedNodes||[],c=b.length;this.collapseAll();for(var d=0;d<c;d++)typeof b[d]!="undefined"&&this.expandPath(b[d],"text");this.callParent(arguments)},createContextMenu:!0,allowDrop:!0,initComponent:function(){Ext.apply(this,{stateful:!0,stateId:this.id+"-state",stateEvents:["itemcollapse","itemexpand"]}),Ext.apply(this,{viewConfig:this.allowDrop?{plugins:[{ptype:"treeviewdragdrop"}],listeners:{drop:{fn:function(){this.getStore().sync()},scope:this}}}:{},store:App.DocumentStore,listeners:{beforeitemcontextmenu:this.createContextMenu?{fn:this.showContextMenu,scope:this}:{},itemdblclick:{fn:this.click,scope:this}}}),this.callParent(arguments),this.createContextMenu&&(this.contextMenu=Ext.create("Ext.menu.Menu",{floating:!0,shadow:"sides",items:[{text:"Open",iconCls:"folder-open",handler:function(){this.open(this.currentRecord)},scope:this},{text:"Refresh",iconCls:"refresh",handler:function(){this.refreshDocument(this.currentRecord)},scope:this},{text:"Download",iconCls:"download",handler:function(){this.download(this.currentRecord)},scope:this,enableIf:function(a){return a.isLeaf()}},{text:"Create",iconCls:"plus-button",menu:Ext.create("App.ui.CreateMenu",{})},{text:"Delete",iconCls:"delete-button",handler:function(){Ext.MessageBox.show({title:"Confirm file deletion",msg:"Are you sure you want to delete "+this.currentRecord.get("text")+" ?",buttons:Ext.MessageBox.YES+Ext.MessageBox.NO,closable:!1,fn:function(a){a=="yes"&&this.deleteSelectedDocument()},icon:Ext.MessageBox.WARNING,scope:this})},scope:this},"-",{text:"Rename:",canActivate:!1,iconCls:"rename",enableIf:function(a){return a.get("preventRename")!=1&&!a.isRoot()}},{xtype:"textfield",allowBlank:!1,itemId:"filename",ref:"fileNameField",indent:!0,enableIf:function(a){return a.get("preventRename")!=1&&!a.isRoot()}}],renderTo:Ext.getBody(),setFileName:function(a){var b=this.fileNameField;b.originalValue=a,b.setValue(a)}}),_.each(this.contextMenu.query("*[ref]"),function(a){this[a.ref]=a},this),this.contextMenu.fileNameField=this.fileNameField,this.fileNameField.on("blur",function(){var a;this.fileNameField.isDirty()&&(a=this.fileNameField.getValue(),this.currentRecord.set("text",a),this.getStore().sync(),this.fileNameField.originalValue=a,this.fileNameField.checkDirty())},this),this.on("afterrender",this.afterrender,this))},afterrender:function(){this.ddManager=Ext.create("App.ui.files.DragDropManager",{filesTree:this}),this.ddManager.render()},filter:function(a,b){var c=this.getStore();c.suspendEvents(),c.clearFilter(),this.getSelectionModel().clearSelections(),c.resumeEvents(),c.filter({property:"name",anyMatch:!0,value:b})},showContextMenu:function(a,b,c,d,e){this.currentRecord=b;var f=this.contextMenu;return f.setFileName(b.get("text")),_.each(f.query("*[enableIf]"),function(a){_.isFunction(a.enableIf)&&(a.enableIf(b)?a.enable():a.disable())}),f.showAt(e.getXY()),e.stopEvent(),!1},refreshDocument:function(a,b,c){if(a){c=c||window;var d=b?function(){b.apply(c,arguments),this.renewAll()}:this.renewAll;this.store.load({node:a,callback:d,scope:this})}},renewAll:function(){},download:function(a){a&&a.download()},deleteSelectedDocument:function(){var a=this.currentRecord;this.deleteDocument(a)},deleteDocument:function(a){a&&(a.remove(!1),this.getStore().sync())},click:function(a,b,c,d,e){this.open(b)},open:function(a){a&&!App.ui.Launcher.launchDocument(a)&&!a.isLeaf()&&this.getView().expand(a)},openSelection:function(){this.open(this.getSelectionModel().getLastSelected())},selectNode:function(a){this.selectPath(a)},newFileUnderSelection:function(a){var b=this.getSelectionModel().getLastSelected();return this.newFile(b,a)},newFile:function(a,b){a||(a=this.getRootNode()),a.isLeaf()&&a.parentNode&&(a=a.parentNode);var c=Ext.create("App.Document",{node:App.Path.join([a.get("node"),b]),text:b,leaf:!App.Path.isFolder(b)});return a.appendChild(c),c.phantom=!0,this.getStore().sync(),a.expand(),c},newFileName:function(){return this.newFileNumber++,"Untitled-"+this.newFileNumber}});
Ext.define("Workspace.DDManager",{extend:"App.ui.DragDropManager",alias:"WorkspaceDDManager",allowExtDD:!0,fileHandler:function(a,b){var c=this.getAdjustedXYcoords(b.pageX,b.pageY),d=this.getUploadHandler();Ext.each(a,function(a){var b=d.add(a),e=new Workspace.FileUploader({workspace:this.workspace,manager:this,fileId:b,position:c});this.fileUploaders[b]=e,d.upload(b,{userfile:App.Path.join([App.Path.pop(this.workspace.getPath(),1),d.getName(b)])}),e.showThrobber()},this)},getEl:function(){return this.workspace.getEl()}},function(){Workspace.DDManager.addHandler("text/plain",function(a,b){var c=this.getAdjustedXYcoords(b.pageX,b.pageY),d=this.workspace.createObject(Workspace.RichTextObject,{text:a,x:c.x,y:c.y});d.sizeToFit()}),Workspace.DDManager.addHandler("text/html",function(a,b){var c=this.getAdjustedXYcoords(b.pageX,b.pageY),d=this.workspace.createObject(Workspace.RichTextObject,{text:a,x:c.x,y:c.y});d.sizeToFit()}),Workspace.DDManager.addHandler("text/uri-list",function(a,b){var c=this.getAdjustedXYcoords(b.pageX,b.pageY),d;a.match(Workspace.EmbedObject.regex)?d=this.workspace.createObject(Workspace.EmbedObject,{url:a,x:c.x,y:c.y}):d=this.workspace.createObject(Workspace.IFrameObject,{url:a,x:c.x,y:c.y})})});
Ext.define("Workspace.FileUploader",{alias:"WorkspaceFileUploader",extend:"App.ui.FileUploader",showThrobber:function(){this.throbber=this.workspace.addElement({tag:"div",cls:"file-upload-throbber"}),this.throbber.setLeftTop(this.position.x,this.position.y)},hideThrobber:function(){this.throbber&&this.throbber.hide()}},function(){Workspace.FileUploader.addHandler(["jpg","png","gif"],function(a){this.workspace.createObject({wtype:"Workspace.objects.ImageObject",url:a,x:this.position.x,y:this.position.y}),this.hideThrobber()}),Workspace.FileUploader.addHandler(["pdf","doc","docx","ppt","pptx","xls","xlsx"],function(a){this.workspace.createObject({wtype:"Workspace.objects.PDFEmbedObject",url:a,x:this.position.x,y:this.position.y}),this.hideThrobber()})});
Ext.define("Workspace.objects.Object",{constructor:function(a){Workspace.objects.Object.superclass.constructor.apply(this,arguments),Ext.apply(this,a),Ext.applyIf(this,{id:App.nextId(),workspace:App.getDefaultWorkspace()}),this.exposeAll(a),this._children=this.children,this.children=Ext.create("Ext.util.MixedCollection"),this.state={selected:!1,dragging:!1,editing:!1,rendered:!1,destroyed:!1},this.addEvents("move","select","unselect","render","destroy"),this.expose("children",!0,!1,!0,!1),this.expose("x",!0,!0,!0,!1),this.expose("y",!0,!0,!0,!1),this.expose("id","getId",!1,!0,!1),this.expose("parent",!0,!0,!0,!1),this.expose("name",!0,!0,!0,!1),this.expose("iconCls",!0,!0,!0,!1),this.expose("movable",function(){var a=this.isMovable;return this.parent&&(a=a&&this.parent.childCanMove(this)),a},!1,!1,!1)},editable:!0,extend:"Machine.core.Serializable",wtype:"Workspace.objects.Object",x:0,y:0,isSelectable:!0,isEditable:!1,isMovable:!0,parent:!1,selectChildren:!1,editChildren:!1,moveChildren:!0,name:"New Object",initialize:function(){this.parent&&this.set("parent",Workspace.Components.realize(this.parent)),this.buildChildren()},getParent:function(){return this.get("parent")},setParent:function(a){this.set("parent",a)},hasParent:function(){return this.get("parent")!=0},orphan:function(){var a=this.getParent();a&&a.removeChild(this),this.set("parent",!1)},buildChildren:function(){var a=this._children;if(Ext.isArray(a))Ext.each(a,function(a){this.addChild(Workspace.Components.realize(a))},this);else if(Ext.isObject(a)){var b;for(var c in a)b=a[c],this.addChild(Workspace.Components.realize(b))}},addChild:function(a){this.children.add(a),a.setParent(this)},adopt:function(){this.addChild.apply(this,arguments)},removeChild:function(a){this.children.remove(a)},childCanMove:function(a){return!0},select:function(){return this.workspace.select(this),this},unselect:function(){return this.workspace.unselect(this),this},deselect:function(){return this.unselect.apply(this,arguments)},unselectAncestors:function(){var a=this.getParent();return a&&(a.unselectAncestors(),a.unselect()),this},unselectDescendents:function(){return!this.selectChildren&&this.children&&this.children.each&&this.children.each(function(a){a.unselect(),a.unselectDescendents()}),this},invertSelection:function(){this.is("selected")?this.unselect():this.select()},getChildren:function(){var a=this.get("children");if(a)return a.getRange()},getX:function(a){return a?this.get("x")-a.getX():this.get("x")},getY:function(a){return a?this.get("y")-a.getY():this.get("y")},updateX:function(a){this.fireEvent("move",a,this.getY())},updateY:function(a){this.fireEvent("move",a,this.getY())},getPosition:function(){return{x:this.get("x"),y:this.get("y")}},setPosition:function(a,b,c){c=c!==!1;var d=this.getDelta(a,b);this.set("x",a),this.set("y",b),this.ignoreTranslateChildren=!0,c&&this.moveChildren&&this.children&&this.children.each&&this.children.each(function(a){a.translate(d.dx,d.dy)}),this.ignoreTranslateChildren=!1,this.fireEvent("move",this,a,b)},getAbsolutePosition:function(){var a=this.getPosition();return a.x+=this.workspace.element.getX(),a.y+=this.workspace.element.getY(),a},moveTo:function(a,b){this.setPosition(a,b)},translate:function(a,b,c){c=c!==!1;var d=this.getX()+a,e=this.getY()+b;this.set("x",d),this.set("y",e),this.ignoreTranslateChildren=!0,c&&this.moveChildren&&this.children&&this.children.each&&this.children.each(function(c){c.translate(a,b)}),this.ignoreTranslateChildren=!1,this.fireEvent("move",this,this.getX(),this.getY())},move:function(a,b){this.translate(a,b)},getDelta:function(a,b){return{dx:a-this.getX(),dy:b-this.getY()}},setState:function(a,b){this.state[a]=b},is:function(a){return this.state[a]},addShim:function(a){this.getEl&&a.applyTo(this)},render:function(){this.on("change:x",this.updateX,this),this.on("change:y",this.updateY,this),this.setState("rendered",!0),this.fireEvent("render")},destroy:function(){this.is("destroyed")||(this.children&&this.children.getCount()>0&&this.children.each(function(a){a.orphan()}),this.parent&&this.orphan(),this.fireEvent("destroy",this),this.setState("destroyed",!0))}},function(){Workspace.reg("Workspace.objects.Object",Workspace.objects.Object)});
Ext.define("Workspace.actions.Action",{alias:"WorkspaceAction",extend:"Ext.Action",constructor:function(a){Workspace.actions.Action.superclass.constructor.apply(this,arguments),Ext.apply(this,a)},handler:function(){},getUndo:function(){},serialize:function(){},attachTo:function(a){this.workspace=a},execute:function(){this.handler?this.handler.apply(this.scope):Workspace.actions.Action.superclass.execute.apply(this,arguments)}});
Ext.define("Workspace.objects.ObjectCollection",{extend:"Ext.util.MixedCollection",alias:"Workspace.objects.Collection",getCommonWType:function(){var a=!1,b=!1;return this.each(function(c){if(!a)a=c.wtype,b=Workspace.Components.getType(a);else while(!c.isWType(a)&&b.superclass)a=b.superclass.wtype,b=Workspace.Components.getType(a)}),a}});
Ext.define("Workspace.tools.BaseTool",{constructor:function(a,b){this.callParent([b]),Ext.apply(this,b,{keyMapping:!1}),this.workspace=a,this.keyMapping&&(this.keyMap=new Ext.KeyMap(this.workspace.element,this.keyMapping),this.keyMap.stopEvent=!0,this.keyMap.disable())},extend:"Ext.util.Observable",click:function(a,b){},dblclick:function(a,b){},mousedown:function(a,b){},mouseup:function(a,b){},mousemove:function(a,b){},mouseover:function(a,b){},mouseout:function(a,b){},getAdjustedXY:function(a){return this.getAdjustedXYcoords(a.getPageX(),a.getPageY())},getAdjustedXYcoords:function(a,b){var c=this.workspace.lens.getAdjustedXYcoords(a-this.workspace.element.getX(),b-this.workspace.element.getY());return c},activate:function(){this.keyMap&&this.keyMap.enable()},deactivate:function(){this.keyMap&&this.keyMap.disable()}});
Ext.define("Workspace.tools.Highlightable",{constructor:function(){},accept:function(){return!0},setHoverItem:function(){},mouseover:function(a,b){b&&b.highlight&&this.accept(b)&&(b.highlight(),this.setHoverItem(b)),a&&a.stopEvent()},mouseout:function(a,b){b&&b.unhighlight&&(b.unhighlight(),this.setHoverItem(!1)),a&&a.stopEvent()}});
Ext.define("Workspace.tools.SelectionBand",{constructor:function(a){Workspace.tools.SelectionBand.superclass.constructor.call(this),a=a||{},Ext.applyIf(a,{shape:"rect",strokeWidth:.25,padding:10,r:5}),Ext.apply(this,App.Stylesheet.Proxy),Ext.apply(this,a);var b=this.item,c=this.item.getDimensions(),d=this.item.getPosition(),e=d.x-this.padding,f=d.y-this.padding,g=c.width+2*this.padding,h=c.height+2*this.padding;this.rect=this.workspace.paper.rect(e,f,g,h),this.rect.attr({stroke:this.stroke,fill:this.fill,"fill-opacity":this.fillOpacity,"stroke-width":this.strokeWidth,opacity:this.opacity,r:this.r}),this.item.vectorElement&&this.rect.insertBefore(this.item.vectorElement),this.item.on("move",this.adjustBand,this),this.item.on("resize",this.adjustBand,this),this.adjustBand()},extend:"Ext.util.Observable",adjustBand:function(){var a=this.item,b=a.getDimensions(),c=a.getPosition(),d=c.x-this.padding,e=c.y-this.padding,f=b.width+2*this.padding,g=b.height+2*this.padding,h=a.get("rotation");this.rect.attr({x:d,y:e,width:f,height:g,rotation:h})},destroy:function(){this.rect.remove(),this.item.un("move",this.adjustBand,this),this.item.un("resize",this.adjustBand,this)}});
Ext.define("Workspace.tools.SelectorBand",{constructor:function(a,b){this.superclass.constructor.call(this),Ext.applyIf(b||{},{shape:"rect",x1:0,y1:0,width:0,height:0,anchor:"tl"}),Ext.apply(this,b,App.Stylesheet.Proxy),this.workspace=a,this.rect=a.paper.rect(this.x1,this.y1,this.width,this.height),this.rect.attr({stroke:this.stroke,"stroke-width":this.strokeWidth,fill:this.fill,"fill-opacity":this.fillOpacity,opacity:this.opacity})},extend:"Ext.util.Observable",adjustBand:function(a,b){this.x2=a,this.y2=b;var c=Workspace.tools.SelectorBand.calculateBandBox(this.x1,this.y1,a,b);this.x=c.x,this.y=c.y,this.width=c.width,this.height=c.height,this.anchor=c.anchor,delete c.anchor,this.rect.attr(c)},getRegion:function(){var a=this.x,b=this.y,c=b+this.height,d=a+this.width;return new Ext.util.Region(b,d,c,a)},cacheRegions:function(){this.regions={},this.workspace.objects.eachKey(function(a,b){if(Ext.isFunction(b.getRegion)&!b.preventDragSelect){var c=b.getRegion();this.regions[a]=c}},this)},getItemsWithin:function(){var a=[],b=this.regions,c=this.getRegion();for(id in b)c.intersect(b[id])&&a.push(this.workspace.objects.get(id));return a},destroy:function(){this.rect.remove()},statics:{calculateBandBox:function(a,b,c,d){var e={},f,g;return e.width=Math.abs(c-a),c>a?(f="l",e.x=a):(f="r",e.x=c),e.height=Math.abs(d-b),d>b?(g="t",e.y=b):(g="b",e.y=d),e.anchor=f+g,e}}});
Ext.define("Workspace.tools.AlohaTool",{constructor:function(a,b){Workspace.tools.AlohaTool.superclass.constructor.call(this,a,b)},extend:"Workspace.tools.BaseTool",click:function(a,b){},dblclick:function(a,b){},mousedown:function(a,b){},mouseup:function(a,b){},mousemove:function(a,b){},attach:function(a){if(a.element){this.item=a,this.editable=new GENTICS.Aloha.Editable($(Ext.fly(a.element).dom).attr("contentEditable",!1));var b=this;return this.endEditFunction=function(){b.workspace.endEdit()},$(this.editable).bind("editableDeactivated",this.endEditFunction),this.editable.enable(),this.editable.activate(),!0}return!1},detach:function(){this.item&&($(Ext.fly(this.item.element).dom).attr("contentEditable",!1),this.endEditFunction&&($(this.editable).unbind("editableDeactivated",this.endEditFunction),this.endEditFunction=!1),this.editable&&(this.editable.disable(),this.editable.destroy(),this.editable=!1),this.item.buildEvents&&this.item.buildEvents(),this.item.set("text",this.item.getEl().dom.innerHTML),this.item=!1)},activate:function(){Workspace.tools.AlohaTool.superclass.activate.call(this)},deactivate:function(){Workspace.tools.AlohaTool.superclass.deactivate.call(this),this.detach()}},function(){Workspace.Tools.register("aloha",Workspace.tools.AlohaTool)});
Ext.define("Workspace.tools.MathQuillTool",{constructor:function(a,b){Workspace.tools.MathQuillTool.superclass.constructor.call(this,a,b)},extend:"Workspace.tools.BaseTool",click:function(a,b){},dblclick:function(a,b){(!b||b&&b.getId&&b.getId()!=this.item.getId())&&this.workspace.endEdit()},mousedown:function(a,b){},mouseup:function(a,b){},mousemove:function(a,b){},attach:function(a){return a&&a.element?(this.item=a,this.item.activate(),!0):!1},detach:function(){this.item&&(this.item.deactivate(),this.item.buildEvents&&this.item.buildEvents(),this.item=!1)},activate:function(){Workspace.tools.MathQuillTool.superclass.activate.call(this)},deactivate:function(){Workspace.tools.MathQuillTool.superclass.deactivate.call(this),this.detach()}},function(){Workspace.Tools.register("mathquill",Workspace.tools.MathQuillTool)});
Ext.define("Workspace.tools.Handle",{forceFront:!1,constructor:function(a,b){Workspace.tools.Handle.superclass.constructor.call(this),this.addEvents("dragstart","drag","dragend"),Ext.applyIf(b,{x:0,y:0,x1:0,y1:0,shape:"rect",width:10,stroke:"#ccc",strokeWidth:1,fill:"#fff",r:2}),Ext.apply(this,b),this.workspace=a,this.dragging=!1,this.shape=="rect"?(this.handleShape=this.workspace.paper.rect(this.x-this.width/2,this.y-this.width/2,this.width,this.width),this.handleShape.attr({stroke:this.stroke,"stroke-width":this.strokeWidth,fill:this.fill})):this.shape=="circle"&&(this.handleShape=this.workspace.paper.circle(this.x,this.y,this.width/2),this.handleShape.attr({stroke:this.stroke,"stroke-width":this.strokeWidth,fill:this.fill})),this.item&&this.item.vectorElement?this.handleShape.insertAfter(this.item.vectorElement):this.handleShape.toFront(),this.forceFront&&this.toFront();var c=this;Ext.get(this.handleShape.node).on("mousedown",this.dragStartHandler,this),this.workspace.on("mouseup",this.dragEndHandler,this),this.workspace.on("mousemove",this.dragHandler,this)},extend:"",mixins:{highlightable:"Workspace.tools.Highlightable"},extend:"Ext.util.Observable",xMax:!1,yMax:!1,xMin:!1,yMin:!1,destroy:function(){Ext.get(this.handleShape.node).un("mousedown",this.dragStartHandler,this),this.workspace.un("mouseup",this.dragEndHandler,this),this.workspace.un("mousemove",this.dragHandler,this),this.handleShape.remove(),delete this.handleShape},getAdjustedXY:function(a){return Workspace.tools.BaseTool.prototype.getAdjustedXY.call(this,a)},getAdjustedXYcoords:function(a,b){return Workspace.tools.BaseTool.prototype.getAdjustedXYcoords.apply(this,arguments)},getPosition:function(){return{x:this.x,y:this.y}},antiAlias:function(a){return Math.round(a)+.5},setPosition:function(a,b){this.x=a,this.y=b,this.handleShape&&this.handleShape.attr({x:this.antiAlias(this.x-this.width/2),y:this.antiAlias(this.y-this.width/2)})},accept:function(){return!1},toFront:function(){this.handleShape&&this.handleShape.toFront()},dragStartHandler:function(a){this.dragging=!0;var b=this.getAdjustedXY(a);this.x1=b.x,this.y1=b.y,this.fireEvent("dragstart"),this.toFront(),this.workspace.on("mouseover",this.mouseover,this),this.workspace.on("mouseout",this.mouseout,this),a.stopEvent()},dragHandler:function(a){if(this.dragging){pos=this.snap(this.getAdjustedXY(a),a);var b=pos.x-this.x1,c=pos.y-this.y1;this.x1=this.bounds(this.x1+b,this.xMax,this.xMin),this.y1=this.bounds(this.y1+c,this.yMax,this.yMin),this.setPosition(this.x1,this.y1),this.fireEvent("drag",a,pos.x,pos.y),Ext.isFunction(this.drag)&&this.drag(a,pos.x,pos.y)}},snap:function(a,b){return!b.hasModifier(),a},dragEndHandler:function(a){this.dragging&&(this.dragging=!1,this.workspace.un("mouseover",this.mouseover,this),this.workspace.un("mouseout",this.mouseout,this),this.fireEvent("dragend"))},bounds:function(a,b,c){return Workspace.Utils.bounds(a,c,b)}});
Ext.define("Workspace.objects.Interpolators",{statics:function(){function b(a){var b=[],c=0,d=a.length,e=a[0];b.push(e[0],",",e[1]);while(++c<d)b.push("L",(e=a[c])[0],",",e[1]);return b.join("")}function c(a){var b=[],c=0,d=a.length,e=a[0];b.push(e[0],",",e[1]);while(++c<d)b.push("V",(e=a[c])[1],"H",e[0]);return b.join("")}function d(a){var b=[],c=0,d=a.length,e=a[0];b.push(e[0],",",e[1]);while(++c<d)b.push("H",(e=a[c])[0],"V",e[1]);return b.join("")}function e(a,c){return a.length<4?b(a):a[1]+h(a.slice(1,a.length-1),i(a,c))}function f(a,c){return a.length<3?b(a):a[0]+h((a.push(a[0]),a),i([a[a.length-2]].concat(a,[a[1]]),c))}function g(a,c,d){return a.length<3?b(a):a[0]+h(a,i(a,c))}function h(a,c){if(c.length<1||a.length!=c.length&&a.length!=c.length+2)return b(a);var d=a.length!=c.length,e="",f=a[0],g=a[1],h=c[0],i=h,j=1;d&&(e+="Q"+(g[0]-h[0]*2/3)+","+(g[1]-h[1]*2/3)+","+g[0]+","+g[1],f=a[1],j=2);if(c.length>1){i=c[1],g=a[j],j++,e+="C"+(f[0]+h[0])+","+(f[1]+h[1])+","+(g[0]-i[0])+","+(g[1]-i[1])+","+g[0]+","+g[1];for(var k=2;k<c.length;k++,j++)g=a[j],i=c[k],e+="S"+(g[0]-i[0])+","+(g[1]-i[1])+","+g[0]+","+g[1]}if(d){var l=a[j];e+="Q"+(g[0]+i[0]*2/3)+","+(g[1]+i[1]*2/3)+","+l[0]+","+l[1]}return e}function i(a,b){var c=[],d=(1-b)/2,e,f=a[0],g=a[1],h=1,i=a.length;while(++h<i)e=f,f=g,g=a[h],c.push([d*(g[0]-e[0]),d*(g[1]-e[1])]);return c}function j(a){if(a.length<3)return b(a);var c=[],d=1,e=a.length,f=a[0],g=f[0],h=f[1],i=[g,g,g,(f=a[1])[0]],j=[h,h,h,f[1]];c.push(g,",",h),r(c,i,j);while(++d<e)f=a[d],i.shift(),i.push(f[0]),j.shift(),j.push(f[1]),r(c,i,j);d=-1;while(++d<2)i.shift(),i.push(f[0]),j.shift(),j.push(f[1]),r(c,i,j);return c.join("")}function k(a){if(a.length<4)return b(a);var c=[],d=-1,e=a.length,f,g=[0],h=[0];while(++d<3)f=a[d],g.push(f[0]),h.push(f[1]);c.push(n(q,g)+","+n(q,h)),--d;while(++d<e)f=a[d],g.shift(),g.push(f[0]),h.shift(),h.push(f[1]),r(c,g,h);return c.join("")}function l(a){var b,c=-1,d=a.length,e=d+4,f,g=[],h=[];while(++c<4)f=a[c%d],g.push(f[0]),h.push(f[1]);b=[n(q,g),",",n(q,h)],--c;while(++c<e)f=a[c%d],g.shift(),g.push(f[0]),h.shift(),h.push(f[1]),r(b,g,h);return b.join("")}function m(a,b){var c=a.length-1,d=a[0][0],e=a[0][1],f=a[c][0]-d,g=a[c][1]-e,h=-1,i,k;while(++h<=c)i=a[h],k=h/c,i[0]=b*i[0]+(1-b)*(d+k*f),i[1]=b*i[1]+(1-b)*(e+k*g);return j(a)}function n(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function r(a,b,c){a.push("C",n(o,b),",",n(o,c),",",n(p,b),",",n(p,c),",",n(q,b),",",n(q,c))}function s(a,b){return(b[1]-a[1])/(b[0]-a[0])}function t(a){var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=s(e,f);while(++b<c)d[b]=g+(g=s(e=f,f=a[b+1]));return d[b]=g,d}function u(a){var b=[],c,d,e,f,g=t(a),h=-1,i=a.length-1;while(++h<i)c=s(a[h],a[h+1]),Math.abs(c)<1e-6?g[h]=g[h+1]=0:(d=g[h]/c,e=g[h+1]/c,f=d*d+e*e,f>9&&(f=c*3/Math.sqrt(f),g[h]=f*d,g[h+1]=f*e));h=-1;while(++h<=i)f=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),b.push([f||0,g[h]*f||0]);return b}function v(a){return a.length<3?b(a):a[0]+h(a,u(a))}var a={linear:b,"step-before":c,"step-after":d,basis:j,"basis-open":k,"basis-closed":l,bundle:m,cardinal:g,"cardinal-open":e,"cardinal-closed":f,monotone:v},o=[0,2/3,1/3,0],p=[0,1/3,2/3,0],q=[0,1/6,2/3,1/6];return a}()});
Ext.define("Workspace.objects.Object2d",{constructor:function(a){Workspace.objects.Object2d.superclass.constructor.apply(this,arguments),this.addEvents("hide","show","resize","click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout"),this.expose("width",!0,!0,!0,!1),this.expose("height",!0,!0,!0,!1),this.showTitle&&(this.shimConfig=this.shimConfig||{},Ext.applyIf(this.shimConfig,{property:"name"}),this.addShim(Ext.create("Workspace.Label",this.shimConfig)))},extend:"Workspace.objects.Object",alias:"Workspace.Object2d",wtype:"Workspace.objects.Object2d",x:0,y:0,width:0,height:0,proxified:!1,render:function(){this.callParent(arguments),this.on("change:width",this.updateWidth,this),this.on("change:height",this.updateHeight,this)},getProxy:function(a,b){return a=a||{},b=b||!1,this.dragProxy?b&&this.dragProxy.setBox(this.getBox()):(Ext.applyIf(a,{workspace:this.workspace}),this.dragProxy=new Workspace.Proxy(a),this.dragProxy.render(),this.dragProxy.hide(),this.dragProxy.setBox(this.getBox())),this.dragProxy},proxify:function(){return this.applyProxy.apply(this,arguments)},deproxify:function(){return this.restoreFromProxy.apply(this,arguments)},applyProxy:function(){if(this.hide){var a=this.getProxy(!1,!0);return a.show(),this.hide(),this.proxified=!0,a}},restoreFromProxy:function(a){this.dragProxy&&(this.show(),a||this.setBox(this.dragProxy.getBox()),this.dragProxy.hide(),this.fireEvent("resize",this.getWidth(),this.getHeight()),this.fireEvent("move",this.getX(),this.getY()),this.proxified=!1)},getHighlightProxy:function(){var a=new Workspace.Proxy(Ext.applyIf({shape:"rect",workspace:this.workspace},App.Stylesheet.Highlight));return a},highlight:function(){this.is("rendered")&&(this.highlightProxy||(this.highlightProxy=this.getHighlightProxy()),this.highlightProxy.render(this.vectorElement),this.highlightProxy.attachTo(this),this.highlightProxy.show())},unhighlight:function(a){this.highlightProxy&&(this.highlightProxy.hide(),this.highlightProxy.detach(),a&&(this.highlightProxy.destroy(),this.highlightProxy=!1))},getDimensions:function(){return{width:this.getWidth(),width:this.getHeight()}},getWidth:function(){return this.get("width")},getHeight:function(){return this.get("height")},updateWidth:function(a){this.fireEvent("resize",this.width,this.height)},updateHeight:function(a){this.fireEvent("resize",this.width,this.height)},setDimensions:function(a,b){this.set("width",a),this.set("height",b)},getRegion:function(){var a=this.get("x"),b=this.get("y"),c=b+this.get("height"),d=a+this.get("width");return new Ext.util.Region(b,d,c,a)},getBBox:function(){return{x:this.getX(),y:this.getY(),width:this.getWidth(),height:this.getHeight()}},getBox:function(){return{tl:{x:this.getX(),y:this.getY()},tr:{x:this.getX()+this.getWidth(),y:this.getY()},bl:{x:this.getX(),y:this.getY()+this.getHeight()},br:{x:this.getX()+this.getWidth(),y:this.getY()+this.getHeight()}}},setBox:function(a,b,c,d){if(arguments.length==4)f=arguments[4]!==!1,this.setPosition(a,b),this.setDimensions(c-a,d-b);else{var e=arguments[0],f=arguments[1]!==!1;this.setPosition(e.tl.x,e.tl.y,f),this.setDimensions(e.tr.x-e.tl.x,e.bl.y-e.tl.y)}},show:function(){if(this.getEl&&this.is("rendered")){var a=this.getEl();a&&(a.show(),this.fireEvent("show",this)),this.children&&this.children.each(function(a){a.show()})}},hide:function(){if(this.getEl&&this.is("rendered")){var a=this.getEl();a&&(a.hide(),this.fireEvent("hide",this)),this.children&&this.children.each(function(a){a.hide()})}},click:function(a,b,c){this.fireEvent("click"),this.workspace.click(a,this)},dblclick:function(a,b,c){this.fireEvent("dblclick"),this.workspace.dblclick(a,this)},mousedown:function(a,b,c){this.fireEvent("mousedown"),this.workspace.mousedown(a,this)},mouseup:function(a,b,c){this.fireEvent("mouseup"),this.workspace.mouseup(a,this)},mousemove:function(a,b,c){this.fireEvent("mousemove"),this.workspace.mousemove(a,this)},mouseover:function(a,b,c){this.fireEvent("mouseover"),this.workspace.mouseover(a,this)},mouseout:function(a,b,c){this.fireEvent("mouseout"),this.workspace.mouseout(a,this)},destroy:function(){this.dragProxy&&this.dragProxy.destroy(),Workspace.objects.Object2d.superclass.destroy.apply(this,arguments)}},function(){Workspace.reg("Workspace.objects.Object2d",Workspace.objects.Object2d)});
Workspace.Proxy={},Ext.define("Workspace.Proxy",{constructor:function(a){Ext.apply(this,a,App.Stylesheet.Proxy),Workspace.Proxy.superclass.constructor.apply(this,arguments)},extend:"Ext.util.Observable",forceBack:!1,shape:"rect",strokeWidth:1,stroke:"#99BBE8",fill:"#99BBE8",fillOpacity:.5,opacity:.7,padding:10,x:0,y:0,rx:0,ry:0,width:0,height:0,rendered:!1,render:function(a){this.rendered||(this.vectorElement=this.workspace.paper[this.shape](this.x,this.y,this.width,this.height),a&&this.vectorElement.insertBefore(a),this.forceBack&&this.vectorElement.toBack(),this.vectorElement.attr(this.attributes()),this.rendered=!0)},getX:function(){return this.x},getY:function(){return this.y},getWidth:function(){return this.width},getHeight:function(){return this.height},updatePath:function(a){this.path=a,this.vectorElement.attr({path:a}),this.updateDimensionProps()},updateDimensionProps:function(){var a=this.vectorElement.getBBox(!0);this.x=a.x,this.y=a.y,this.height=a.height,this.width=a.width},setPosition:function(a,b){if(this.shape=="ellipse")this.vectorElement.attr({cx:a+this.width/2,cy:b+this.height/2}),this.x=a,this.y=b,this.fireEvent("move",this.x,this.y);else if(this.shape=="rect")this.vectorElement.attr({x:a,y:b}),this.x=a,this.y=b,this.fireEvent("move",this.x,this.y);else{var c=this.getDelta(a,b);this.translate(c.dx,c.dy)}},getDelta:function(a,b){return{dx:a-this.getX(),dy:b-this.getY()}},getScaleFactor:function(a,b){var c=this.getWidth(),d=this.getHeight();return{dw:c!=0?a/c:1,dh:d!=0?b/d:1}},translate:function(a,b){this.x+=a,this.y+=b;if(a!=0||b!=0)if(this.shape=="path"){var c=Raphael.pathToRelative(this.vectorElement.attr("path"));c[0][1]+=+a,c[0][2]+=+b,this.updatePath(this.path)}else this.vectorElement.attr({x:this.x,y:this.y});this.fireEvent("move",this.x,this.y)},scale:function(a,b){this.width*=a,this.height*=b,this.vectorElement.scale(a,b),this.fireEvent("resize",this.width,this.height)},setDimensions:function(a,b){this.width=a,this.height=b,this.shape=="ellipse"?this.vectorElement.attr({rx:a/2,ry:b/2}):this.vectorElement.attr({width:a,height:b}),this.fireEvent("resize",a,b)},getBox:function(){return{tl:{x:this.getX(),y:this.getY()},tr:{x:this.getX()+this.getWidth(),y:this.getY()},bl:{x:this.getX(),y:this.getY()+this.getHeight()},br:{x:this.getX()+this.getWidth(),y:this.getY()+this.getHeight()}}},setBox:function(a,b,c,d){if(arguments.length==4)this.setPosition(a,b),this.setDimensions(c-a,d-b);else{var e=arguments[0];this.setDimensions(e.tr.x-e.tl.x,e.bl.y-e.tl.y),this.setPosition(e.tl.x,e.tl.y)}},attributes:function(a){var b={};if(!a)var a=Workspace.objects.VectorObject.attrArray;for(var c=0,d=a.length;c<d;c++){var e=a[c],f=this[e.camelize().uncapitalize()];f&&(b[e]=f)}return b},updateBox:function(){this.attached&&this.setBox(Workspace.Utils.padBox(this.attached.getBox(),this.padding))},updatePosition:function(a,b){this.setPosition(a,b)},updateDimensions:function(a,b){this.setDimensions(a,b)},updateTransform:function(a){this.vectorElement.attr("transform","R"+ +a.get("rotation"))},attachTo:function(a){if(this.attached&&this.attached.getId){if(this.attached.getId()==a.getId()){this.path?this.updatePath(a.get("path")):this.setBox(Workspace.Utils.padBox(a.getBox(),this.padding));return}this.detach()}this.attached=a,a.on("move",this.updateBox,this),a.on("resize",this.updateBox,this),a.on("destroy",this.destroy,this),this.path?this.updatePath(a.get("path")):this.setBox(Workspace.Utils.padBox(a.getBox(),this.padding)),this.updateTransform(a)},detach:function(){this.attached&&(this.attached.un("move",this.updateBox,this),this.attached.un("resize",this.updateBox,this),this.attached.un("destroy",this.destroy,this),this.attached=!1)},show:function(){this.vectorElement&&(this.vectorElement.show(),this.forceBack&&this.vectorElement.toBack())},hide:function(){this.vectorElement&&this.vectorElement.hide()},destroy:function(){this.vectorElement&&this.vectorElement.remove()}});
Ext.define("Workspace.actions.AdoptObjectAction",{extend:"Workspace.actions.Action",constructor:function(a){Ext.apply(this,a),Workspace.actions.AdoptObjectAction.superclass.constructor.apply(this,arguments),Ext.applyIf(this,{scope:this})},wtype:"AdoptObjectAction",handler:function(){Ext.each(this.subjects,function(a){this.parent.adopt(a)},this),this.parent.adjustSize&&this.parent.adjustSize()},getUndo:function(){return new Workspace.actions.OrphanObjectAction({objects:this.subjects.concat([]),text:'Undo "'+this.text+'"',iconCls:this.iconCls})},serialize:function(){return{wtype:this.wtype,parent:Workspace.Components.serialize(this.parent),subjects:Workspace.Components.serialize(this.subjects)}}});
Ext.define("Workspace.actions.DuplicateObjectAction",{extend:"Workspace.actions.Action",constructor:function(a){Workspace.actions.DuplicateObjectAction.superclass.constructor.apply(this,arguments);var b=[],c;Ext.each(a.objects,function(a){c=a.serialize(),delete c.id,c.x&&(c.x+=10),c.y&&(c.y+=10),b.push(c)}),Ext.applyIf(this,{scope:this,objects:b})},wtype:"DuplicateObjectAction",handler:function(){this.workspace.createObjects(this.objects)},getUndo:function(){return new Workspace.actions.DeleteObjectAction({subjects:this.objects.concat([]),text:'Undo "'+this.text+'"',iconCls:this.iconCls})},serialize:function(){return{wtype:this.wtype,objects:Workspace.Components.serialize(this.subjects)}}});
Ext.define("Workspace.actions.CreateObjectAction",{extend:"Workspace.actions.Action",constructor:function(a){Workspace.actions.CreateObjectAction.superclass.constructor.apply(this,arguments),Ext.applyIf(this,{scope:this})},wtype:"CreateObjectAction",handler:function(){this.workspace.createObjects(this.objects)},getUndo:function(){return new Workspace.actions.DeleteObjectAction({subjects:this.subjects.concat([]),text:'Undo "'+this.text+'"',iconCls:this.iconCls})},serialize:function(){return{wtype:this.wtype,objects:Workspace.Components.serialize(this.subjects)}}});
Ext.define("Workspace.actions.DeleteObjectAction",{extend:"Workspace.actions.Action",constructor:function(a){Workspace.actions.DeleteObjectAction.superclass.constructor.apply(this,arguments),Ext.applyIf(this,{scope:this})},wtype:"DeleteObjectAction",handler:function(){this.workspace.deleteObjects(this.subjects)},getUndo:function(){return new Workspace.actions.CreateObjectAction({objects:Workspace.Components.serialize(this.subjects),text:'Undo "'+this.text+'"',iconCls:this.iconCls})},serialize:function(){return{wtype:this.wtype,subjects:Workspace.Components.serialize(this.subjects)}}});
Ext.define("Workspace.actions.FormIdeaAction",{extend:"Workspace.actions.Action",constructor:function(a){Workspace.actions.FormIdeaAction.superclass.constructor.apply(this,arguments),Ext.applyIf(this,{scope:this,ideaConfig:{}})},wtype:"FormIdeaAction",handler:function(){Ext.apply(this.ideaConfig,{children:this.subjects,wtype:"Workspace.IdeaObject"});var a=this.workspace.createObject(this.ideaConfig)},getUndo:function(){return new Workspace.actions.OrphanObjectAction({objects:this.subjects.concat([]),text:'Undo "'+this.text+'"',iconCls:this.iconCls})},serialize:function(){return{wtype:this.wtype,subjects:Workspace.Components.serialize(this.subjects)}}});
Ext.define("Workspace.actions.OrphanObjectAction",{extend:"Workspace.actions.Action",constructor:function(a){Ext.apply(this,a),Workspace.actions.OrphanObjectAction.superclass.constructor.apply(this,arguments),Ext.applyIf(this,{scope:this})},wtype:"OrphanObjectAction",handler:function(){Ext.each(this.subjects,function(a){a.orphan()})},getUndo:function(){return new Workspace.actions.AdoptObjectAction({objects:this.subjects.concat([]),text:'Undo "'+this.text+'"',iconCls:this.iconCls})},serialize:function(){return{wtype:this.wtype,subjects:Workspace.Components.serialize(this.subjects)}}});
Ext.define("Workspace.actions.ChangePropertyAction",{extend:"Workspace.actions.Action",constructor:function(a){Workspace.actions.ChangePropertyAction.superclass.constructor.apply(this,arguments),Ext.applyIf(this,{scope:this})},wtype:"ChangePropertyAction",handler:function(){for(var a=0,b=this.subjects.length,c;a<b;a++){c=this.subjects[a];for(var d in this.values)c.set(d,this.values[d])}},getUndo:function(){var a={};for(var b=0,c=this.subjects.length,d;b<c;b++){d=this.subjects[b];for(var e in this.values)a[e]=d.get(e)}return new Workspace.actions.ChangePropertyAction({subjects:this.subjects.concat([]),values:a,text:'Undo "'+this.text+'"',iconCls:this.iconCls})},serialize:function(){return{wtype:this.wtype,subjects:Workspace.Components.serialize(this.subjects),values:Workspace.Components.serialize(this.values)}}});
Ext.define("Workspace.actions.ExpandAction",{extend:"Workspace.actions.Action",constructor:function(a){Ext.apply(this,a,{size:[400,400]}),Workspace.actions.DeleteObjectAction.superclass.constructor.apply(this,arguments),Ext.applyIf(this,{scope:this})},wtype:"ExpandAction",handler:function(){this.workspace.expand(this.size[0],this.size[1])},getUndo:function(){return new Workspace.actions.ExpandAction({size:[-this.size[0],-this.size[1]],text:'Undo "'+this.text+'"',iconCls:this.iconCls})},serialize:function(){return{wtype:this.wtype,size:this.size}}});
Ext.define("Workspace.tools.ResizeHandle",{constructor:function(a,b){Workspace.tools.ResizeHandle.superclass.constructor.call(this,a,b),Ext.applyIf(this,{location:"tl"}),this.item&&this.item.vectorElement&&(this.vectorElement=this.item.vectorElement),this.addEvents(),this.item.on("move",this.onItemMove,this),this.item.on("resize",this.onItemMove,this),this.proxy=this.item.getProxy(),this.proxy.on("move",this.onProxyMove,this),this.proxy.on("resize",this.onProxyMove,this),this.onItemMove()},extend:"Workspace.tools.Handle",drag:function(){var a=this.item.getBox(),b=this.getPosition();switch(this.location){case"tl":this.proxy.setBox(b.x,b.y,a.br.x,a.br.y);break;case"tr":this.proxy.setBox(a.tl.x,b.y,b.x,a.br.y);break;case"bl":this.proxy.setBox(b.x,a.tl.y,a.br.x,b.y);break;case"br":this.proxy.setBox(a.tl.x,a.tl.y,b.x,b.y)}},dragStartHandler:function(){this.item.applyProxy(),Workspace.tools.ResizeHandle.superclass.dragStartHandler.apply(this,arguments)},dragEndHandler:function(){if(this.dragging)return this.item.restoreFromProxy(),Workspace.tools.ResizeHandle.superclass.dragEndHandler.apply(this,arguments),!1},onItemMove:function(){this.move(this.item.getBox())},onProxyMove:function(){this.move(this.proxy.getBox())},move:function(a){switch(this.location){case"tl":this.setPosition(a.tl.x,a.tl.y);break;case"tr":this.setPosition(a.tr.x,a.tr.y);break;case"bl":this.setPosition(a.bl.x,a.bl.y);break;case"br":this.setPosition(a.br.x,a.br.y)}},destroy:function(){this.callParent(arguments),this.item.un("move",this.onItemMove,this),this.item.un("resize",this.onItemMove,this),this.proxy.un("move",this.onProxyMove,this),this.proxy.un("resize",this.onProxyMove,this)}});
Ext.define("Workspace.tools.PointerTool",{constructor:function(a,b){Ext.applyIf(b,{keyMap:[{key:[Ext.EventManager.BACKSPACE,Ext.EventManager.DELETE,Ext.EventManager.D],fn:this.deleteSelection,scope:this}]}),Workspace.tools.PointerTool.superclass.constructor.call(this,a,b),this.dragging=!1,this.selectorBand=!1,this.selectionBands=new Ext.util.MixedCollection,this.handles=new Ext.util.MixedCollection,this.inspectors=new Ext.util.MixedCollection,this.itemsWithinBand=new Ext.util.MixedCollection,this.mixins.highlightable.constructor.apply(this,arguments)},extend:"Workspace.tools.BaseTool",requires:["Workspace.tools.SelectionBand","Workspace.tools.SelectorBand","Workspace.tools.ResizeHandle"],mixins:{highlightable:"Workspace.tools.Highlightable"},proxified:!1,dragged:!1,threshold:10,dragCount:0,click:function(a,b){b?a.stopEvent():(this.workspace.deselect(),a.stopEvent())},dblclick:function(a,b){console.log("Workspace.tools.PointerTool.click"),b.editor&&this.workspace.hasTool(b.editor)?(this.workspace.edit(b),a.stopEvent()):Ext.type(b.select)=="function"?(b.select(),a.stopEvent()):(this.workspace.deselect(),a.stopEvent())},mousedown:function(a,b){this.dragging=!0,pos=this.getAdjustedXY(a),this.x1=pos.x,this.y1=pos.y,this.selectorBand&&(this.selectorBand.destroy(),this.selectorBand=!1),b?(Ext.isFunction(b.select)&&!b.is("selected")&&(a.shiftKey?b.select():this.workspace.setSelection([b])),a.stopEvent()):(this.selectorBand=new Workspace.tools.SelectorBand(this.workspace,{x1:pos.x,y1:pos.y}),this.selectorBand.cacheRegions(),a.shiftKey||this.workspace.deselect(),this.itemsWithinBand.clear(),a.stopEvent())},mouseup:function(a,b){this.dragging=!1,this.selectorBand&&(this.selectorBand.destroy(),this.selectorBand=!1,a.stopEvent()),this.proxified&&this.deproxify()},mousemove:function(a,b){if(this.dragging){this.dragCount++;var c=this.workspace.getSelection();if(this.selectorBand){pos=this.getAdjustedXY(a),this.selectorBand.adjustBand(pos.x,pos.y);var d=this.selectorBand.getItemsWithin(),e=this.itemsWithinBand.clone(),f=new Ext.util.MixedCollection,b;for(var g=0,h=d.length;g<h;g++)b=d[g],this.itemsWithinBand.contains(b)||b.invertSelection(),f.add(b.getId(),b),e.removeAtKey(b.getId());e.eachKey(function(a,b){b.invertSelection()}),this.itemsWithinBand=f}else if(this.workspace.hasSelection()){this.proxified||this.proxify(),pos=this.getAdjustedXY(a);var i=pos.x-this.x1,j=pos.y-this.y1;this.x1=pos.x,this.y1=pos.y;for(var g=0,h=c.length;g<h;g++)Ext.isFunction(c[g].translate)&&(c[g].proxified?c[g].getProxy().translate(i,j):c[g].translate(i,j));a.stopEvent()}}},mouseover:function(a,b){this.mixins.highlightable.mouseover.apply(this,arguments)},mouseout:function(a,b){this.mixins.highlightable.mouseout.apply(this,arguments)},proxify:function(){var a=this.workspace.getSelection();Ext.each(a,function(a){a.get("movable")&&a.proxifyOnMove&&a.proxify()}),this.proxified=!0},deproxify:function(){var a=this.workspace.getSelection();Ext.each(a,function(a){a.proxified&&a.deproxify(!a.get("movable"))}),this.proxified=!1},selectHandler:function(a){this.addSelectionBand(a),this.addHandles(a);var b=a.getId()},unselectHandler:function(a){this.removeSelectionBand(a.getId()),this.removeHandles(a.getId())},addSelectionBand:function(a){this.selectionBands.containsKey(a.getId())||this.selectionBands.add(a.getId(),new Workspace.tools.SelectionBand({item:a,workspace:this.workspace}))},removeSelectionBand:function(a){a?(!Ext.isString(a)&&Ext.isFunction(a.getId)&&(a=a.getId()),Ext.isString(a)&&this.selectionBands.containsKey(a)&&(this.selectionBands.get(a).destroy(),this.selectionBands.removeAtKey(a))):(this.selectionBands.each(function(a){a.destroy()}),this.selectionBands.clear())},onHandleDragEnd:function(a){var b=a.item,c,d;b&&(c=b.getId(),d=this.handles.get(c),c&&d&&this.setHandleBounds(b,d))},setHandleBounds:function(a,b){var c=a.getBox();Ext.apply(b.tl,{xMin:!1,xMax:c.tr.x,yMin:!1,yMax:c.bl.y}),Ext.apply(b.tr,{xMin:c.tl.x,xMax:!1,yMin:!1,yMax:c.bl.y}),Ext.apply(b.bl,{xMin:!1,xMax:c.tr.x,yMin:c.tl.y,yMax:!1}),Ext.apply(b.br,{xMin:c.tl.x,xMax:!1,yMin:c.tl.y,yMax:!1})},addHandles:function(a){if(!this.handles.containsKey(a.getId())){var b;if(Ext.isFunction(a.getBox)&&a.isResizable){var c=a.getBox();b={tl:new Workspace.tools.ResizeHandle(this.workspace,{location:"tl",item:a,x:c.tl.x,y:c.tl.y,item:a}),tr:new Workspace.tools.ResizeHandle(this.workspace,{location:"tr",item:a,x:c.tr.x,y:c.tr.y,item:a}),bl:new Workspace.tools.ResizeHandle(this.workspace,{location:"bl",item:a,x:c.bl.x,y:c.bl.y,item:a}),br:new Workspace.tools.ResizeHandle(this.workspace,{location:"br",item:a,x:c.br.x,y:c.br.y,item:a})},this.setHandleBounds(a,b)}else Workspace.Components.isWType(a,"Workspace.ConnectionObject")&&(b={left:new Workspace.tools.ConnectorHandle(this.workspace,{item:a,location:"left"}),right:new Workspace.tools.ConnectorHandle(this.workspace,{item:a,location:"right"})});this.handles.add(a.getId(),b)}},removeHandles:function(a){if(a){!Ext.isString(a)&&Ext.isFunction(a.getId)&&(a=a.getId());if(Ext.isString(a)&&this.handles.containsKey(a)){handles=this.handles.get(a);for(position in handles)handles[position].destroy();this.handles.removeAtKey(a)}}else this.handles.each(function(a){for(handle in a)Ext.isFunction(a[handle].destroy)&&a[handle].destroy()}),this.handles.clear()},destroyInspectors:function(a){},deleteSelection:function(a){this.workspace.deleteObjects(this.workspace.getSelection()),a.stop()},activate:function(){Workspace.tools.PointerTool.superclass.activate.call(this),this.workspace.on("select",this.selectHandler,this),this.workspace.on("unselect",this.unselectHandler,this),Ext.each(this.workspace.getSelection(),function(a){this.selectHandler(a)},this)},deactivate:function(){this.mixins.highlightable.mouseout.apply(this,arguments),Workspace.tools.PointerTool.superclass.deactivate.call(this),this.workspace.un("select",this.selectHandler,this),this.workspace.un("unselect",this.unselectHandler,this),this.selectorBand&&this.selectorBand.destoy(),this.removeHandles(),this.removeSelectionBand()}},function(){Workspace.Tools.register("pointer",Workspace.tools.PointerTool)});
Ext.define("Workspace.objects.VectorObject",{alias:"Workspace.VectorObject",statics:{attrArray:["arrow-end","arrow-start","clip-rect","fill","fill-opacity","font","font-family","font-size","font-weight","height","opacity","path","r","rotation","rx","ry","src","stroke","stroke-dasharray","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","translation","width","x","y"]},constructor:function(a,b){Workspace.objects.VectorObject.superclass.constructor.call(this,a,b),this.expose("fill",!0,!0,!0,!1),this.expose("fillOpacity",!0,!0,!0,!1),this.expose("opacity",!0,!0,!0,!1),this.expose("stroke",!0,!0,!0,!1),this.expose("strokeWidth",!0,!0,!0,!1),this.expose("strokeDasharray",!0,!0,!0,!1),this.expose("strokeLinecap",!0,!0,!0,!1),this.expose("strokeLinejoin",!0,!0,!0,!1),this.expose("strokeMiterlimit",!0,!0,!0,!1),this.expose("strokeOpacity",!0,!0,!0,!1),this.expose("path",!0,!0,!0,!1),this.expose("shape",!0,!0,!0,!1),this.expose("rotation",!0,!0,!0,!1),this.expose("arrowEnd",!0,!0,!0,!1),this.expose("arrowStart",!0,!0,!0,!1)},requires:["Workspace.Proxy"],extend:"Workspace.objects.Object2d",wtype:"Workspace.objects.VectorObject",iconCls:"vector",shape:"rect",arguments:[],fill:"#FFF",fillOpacity:1,stroke:"#000",strokeWidth:1,strokeDasharray:"",strokeLinecap:"square",strokeLinejoin:"",strokeMiterlimit:1,strokeOpacity:1,rotation:0,render:function(){this.buildObject(),this.buildEvents(),Workspace.objects.VectorObject.superclass.render.apply(this,arguments)},buildObject:function(){Ext.isFunction(this.workspace.paper[this.shape])&&(this.vectorElement=this.workspace.paper[this.shape].apply(this.workspace.paper,this.arguments),this.vectorElement.attr(this.attributes()),this.element=Ext.get(this.vectorElement.node),this.element.dom.className="workspace-object",this.element.set({objectId:this.getId()}),this.element.on("click",this.click,this),this.element.on("dblclick",this.dblclick,this),this.element.on("mouseup",this.mouseup,this),this.element.on("mousedown",this.mousedown,this),this.element.on("mousemove",this.mousemove,this),this.element.on("mouseover",this.mouseover,this),this.element.on("mouseout",this.mouseout,this))},buildEvents:function(){_.each(Workspace.objects.VectorObject.attrArrayCamel,function(a,b){this.on("change:"+b,_.bind(this.updateAttr,this,a))},this)},getTransform:function(){return"r"+(+this.get("rotation")||0)},updateAttr:function(a,b){if(a=="x"||a=="y"||a=="width"||a=="height"){if(a=="x"||a=="y")b=Math.round(b)+.5;this.vectorElement.transform(""),this.vectorElement.attr(a,b),this.vectorElement.transform(this.getTransform());return}a=="rotation"&&(this.vectorElement.transform(""),this.vectorElement.transform("r"+(+b||0))),this.vectorElement.attr(a,b)},getHighlightProxy:function(){return Ext.create("Workspace.Proxy",Ext.applyIf({shape:this.shape,strokeWidth:this.strokeWidth+App.Stylesheet.Highlight.strokeWidth,workspace:this.workspace,stroke:App.Stylesheet.Highlight.fill},App.Stylesheet.Highlight))},toBack:function(){this.vectorElement.toBack()},insertBefore:function(a){a&&a.vectorElement&&this.vectorElement.insertBefore(a.vectorElement)},insertAfter:function(a){a&&a.vectorElement&&this.vectorElement.insertAfter(a.vectorElement)},updateObject:function(){this.vectorElement.attr(this.attributes())},updateX:function(a){Workspace.objects.VectorObject.superclass.updateX.apply(this,arguments),this.vectorElement.attr({x:Math.round(a)+.5})},updateY:function(a){Workspace.objects.VectorObject.superclass.updateY.apply(this,arguments),this.vectorElement.attr({y:Math.round(a)+.5})},updateWidth:function(a){Workspace.objects.VectorObject.superclass.updateWidth.apply(this,arguments),this.vectorElement.attr({width:a})},updateHeight:function(a){Workspace.objects.VectorObject.superclass.updateHeight.apply(this,arguments),this.vectorElement.attr({height:a})},getPosition:function(){return{x:this.getX(),y:this.getY()}},getDimensions:function(){return{width:this.getWidth(),height:this.getHeight()}},attributes:function(a){var b={};if(!a)var a=Workspace.objects.VectorObject.attrArray;for(var c=0,d=a.length;c<d;c++){var e=a[c],f=e.camelize().uncapitalize(),g=this.get(f);g&&(b[e]=g)}return b},getEl:function(){return this.vectorElement},destroy:function(){this.is("destroyed")||(this.vectorElement.remove(),this.callParent(arguments))}},function(){Workspace.reg("Workspace.objects.VectorObject",Workspace.objects.VectorObject),Workspace.objects.VectorObject.attrArrayCamel={},_.each(Workspace.objects.VectorObject.attrArray,function(a){Workspace.objects.VectorObject.attrArrayCamel[a.camelize().uncapitalize()]=a})});
Ext.define("Workspace.objects.Rectangle",{constructor:function(a,b){Workspace.objects.Rectangle.superclass.constructor.call(this,a,b),Ext.applyIf(this,{}),this.expose("r",!0,!0,!0,!1)},alias:"Workspace.VectorRectObject",extend:"Workspace.objects.VectorObject",wtype:"Workspace.objects.Rectangle",name:"New Rectangle",iconCls:"rect",shape:"rect",r:0,isResizable:!0,render:function(){this.arguments=[this.x,this.y,this.width,this.height,this.r],Workspace.objects.Rectangle.superclass.render.call(this)}},function(){Workspace.reg("Workspace.objects.Rectangle",Workspace.objects.Rectangle)});
Ext.define("Workspace.tools.RectTool",{constructor:function(a,b){this.workspace=a,Ext.apply(this,b,{parameters:{}}),Workspace.tools.RectTool.superclass.constructor.call(this,a,b),Ext.apply(this.parameters,App.Stylesheet.Draw),this.dragging=!1,this.proto=!1,this.x1=0,this.y1=0},extend:"Workspace.tools.BaseTool",requires:["Workspace.objects.Rectangle"],minWidth:10,maxWidth:!1,minHeight:10,maxHeight:!1,click:function(a,b){a.stopEvent()},dblclick:function(a,b){a.stopEvent()},mousedown:function(a,b){this.dragging=!0,this.proto&&this.proto.remove(),this.createProto(a)},mouseup:function(a,b){this.dragging=!1;if(this.proto){var c=this.getAdjustedXY(a);this.x2=c.x,this.y2=c.y;var d=Workspace.tools.SelectorBand.calculateBandBox(this.x1,this.y1,this.x2,this.y2),e=this.workspace.createObject({wtype:"Workspace.objects.Rectangle",x:d.x,y:d.y,width:Workspace.Utils.bounds(d.width,this.minWidth,this.maxWidth),height:Workspace.Utils.bounds(d.height,this.minHeight,this.maxHeight)});this.workspace.setSelection([e]),this.proto.remove()}},mousemove:function(a,b){if(this.dragging){this.proto||this.createProto(a);var c=this.getAdjustedXY(a);this.x2=c.x,this.y2=c.y;var d=Workspace.tools.SelectorBand.calculateBandBox(this.x1,this.y1,this.x2,this.y2);this.x=d.x,this.y=d.y,this.width=d.width,this.height=d.height,this.anchor=d.anchor,delete d.anchor,this.proto.attr(d)}},createProto:function(a){var b=this.getAdjustedXY(a);this.x1=b.x,this.y1=b.y,this.proto=this.workspace.paper.rect(this.x1,this.y1,0,0),this.proto.attr(this.parameters)},deactivate:function(){}},function(){Workspace.Tools.register("rect",Workspace.tools.RectTool)});
Ext.define("Workspace.objects.Path",{extend:"Workspace.objects.VectorObject",constructor:function(a){this.callParent(arguments),this.expose("path",!0,!0,!0,!1),this.expose("points",!0,!0,!0,!1),this.expose("interpolator",!0,!0,!0,!1)},requires:["Workspace.objects.Interpolators"],alias:"Workspace.VectorPathObject",wtype:"Workspace.objects.Path",editor:"vector",name:"New Path",iconCls:"path",shape:"path",interpolator:"linear",isResizable:!1,path:[],points:[],fillOpacity:0,render:function(){(!this.path||this.points&&this.points.length>0)&&this.buildPath(this.points),this.arguments=[this.path],this.callParent(arguments),this.on("change:interpolator",this.buildPath,this),this.on("change:path",this.updatePath,this),this.on("change:points",this.buildPath,this),this.updateDimensions()},getHighlightProxy:function(){return Ext.create("Workspace.Proxy",Ext.applyIf({path:this.path,shape:this.shape,strokeWidth:this.strokeWidth+App.Stylesheet.Highlight.strokeWidth,workspace:this.workspace},App.Stylesheet.Highlight))},updateHighlightProxy:function(){this.highlightProxy&&(this.highlightProxy.path=this.path)},buildPath:function(){this.set("path",this.interpolate(this.get("points")))},interpolate:function(a){if(a){var b=this.get("interpolator");return _.isFunction(b)?["M",a[0][0],",",a[0][1]," ",b.call(this,a)].join(""):["M",a[0][0],",",a[0][1]," ",Workspace.objects.Interpolators[this.get("interpolator")](a)].join("")}return""},updatePath:function(a){this.path=a,this.vectorElement.attr({path:a}),this.updateDimensions(),this.updateHighlightProxy()},updateDimensions:function(){var a=this.vectorElement.getBBox(!0);this.set("x",a.x),this.set("y",a.y),this.set("height",a.height),this.set("width",a.width)},appendPoint:function(a){this.path.push(a),this.updatePath(this.path)},translate:function(a,b){var c;if(this.points&&this.points.length>0){var d=this.points;for(c=0;c<d.length;c++)d[c][0]+=a,d[c][1]+=b;this.set("points",d)}else this.path=Raphael.pathToRelative(this.path),this.path[0][1]=this.path[0][1]+a,this.path[0][2]=this.path[0][2]+b,this.updatePath(this.path);this.fireEvent("move",this.getX(),this.getY())},setPosition:function(a,b){var c=this.getDelta(a,b);this.translate(c.dx,c.dy)},setDimensions:function(a,b){}},function(){Workspace.reg("Workspace.objects.Path",Workspace.objects.Path)});
Ext.define("Workspace.tools.PencilTool",{constructor:function(a,b){this.workspace=a,Ext.apply(this,b,{}),Workspace.tools.PencilTool.superclass.constructor.call(this,a,b),this.dragging=!1,this.currentPath=!1,this.currentShape=!1,this.currentPoints=!1},extend:"Workspace.tools.BaseTool",requires:["Workspace.objects.Path"],click:function(a,b){},dblclick:function(a,b){},mousedown:function(a,b){this.dragging=!0,pos=this.getAdjustedXY(a),this.currentPoints=[[pos.x,pos.y]],this.currentPath=[["M",pos.x,pos.y]],this.currentShape=this.workspace.paper.path(this.currentPath),this.currentShape.attr(App.Stylesheet.Draw),a.stopEvent()},mouseup:function(a,b){this.dragging=!1;var c=this.workspace.createObject(Workspace.objects.Path,{points:this.currentPoints,"stroke-width":"5px"});this.currentShape.remove(),this.currentPoints=!1,this.currentPath=!1,this.currentShape=!1,this.workspace.setSelection([c]),a.stopEvent()},mousemove:function(a,b){this.dragging&&(pos=this.getAdjustedXY(a),this.currentPath.push(["L",pos.x,pos.y]),this.currentPoints.push([pos.x,pos.y]),this.currentShape.attr({path:this.currentPath}))}},function(){Workspace.Tools.register("pencil",Workspace.tools.PencilTool)});
Ext.define("Workspace.objects.ElementObject",{constructor:function(a,b){Workspace.objects.ElementObject.superclass.constructor.call(this,a,b),Ext.applyIf(this,{elementSpec:{}}),Ext.applyIf(this.elementSpec,{tag:"div",cls:""})},requires:["Workspace.Proxy"],alias:"Workspace.ElementObject",extend:"Workspace.objects.Object2d",wtype:"Workspace.objects.ElementObject",render:function(){this.element=this.workspace.addElement(this.elementSpec),this.element.addCls("workspace-object"),this.element.set({objectId:this.getId()}),this.element.position("absolute"),this.element.setLeft(this.x),this.element.setTop(this.y),this.element.setWidth(this.width),this.element.setHeight(this.height),this.buildEvents(),Workspace.objects.ElementObject.superclass.render.apply(this,arguments)},buildEvents:function(){this.element.un("click",this.click,this),this.element.un("dblclick",this.dblclick,this),this.element.un("mouseup",this.mouseup,this),this.element.un("mousedown",this.mousedown,this),this.element.un("mousemove",this.mousemove,this),this.element.un("mouseover",this.mouseover,this),this.element.un("mouseout",this.mouseout,this),this.element.on("click",this.click,this),this.element.on("dblclick",this.dblclick,this),this.element.on("mouseup",this.mouseup,this),this.element.on("mousedown",this.mousedown,this),this.element.on("mousemove",this.mousemove,this),this.element.on("mouseover",this.mouseover,this),this.element.on("mouseout",this.mouseout,this)},updateX:function(a){this.element.setLeft(a),Workspace.objects.ElementObject.superclass.updateX.call(this,a)},updateY:function(a){this.element.setTop(a),Workspace.objects.ElementObject.superclass.updateY.call(this,a)},updateWidth:function(a){this.element.setWidth(a),Workspace.objects.ElementObject.superclass.updateWidth.call(this,a)},updateHeight:function(a){this.element.setHeight(a),Workspace.objects.ElementObject.superclass.updateHeight.call(this,a)},getEl:function(){return this.element},destroy:function(){Ext.destroy(this.element),Workspace.objects.ElementObject.superclass.destroy.apply(this,arguments)}},function(){Workspace.reg("Workspace.objects.ElementObject",Workspace.objects.ElementObject)});
Ext.define("Workspace.objects.RichTextObject",{constructor:function(a,b){Workspace.objects.RichTextObject.superclass.constructor.call(this,a,b),Ext.apply(this.elementSpec,{tag:"div",cls:"textbox"}),this.expose("text",!0,!0,!0,!1),this.on("change:text",this.setText,this)},extend:"Workspace.objects.ElementObject",autoMaxWidth:300,wtype:"Workspace.objects.RichTextObject",isEditable:!0,isSelectable:!0,isResizable:!0,text:"",name:"New Textbox",iconCls:"text-icon",editor:"aloha",render:function(){this.elementSpec.html=this.get("text"),Workspace.objects.RichTextObject.superclass.render.call(this,arguments)},getText:function(){return this.get("text")},setText:function(a){this.text=a,this.getEl().update(a)},sizeToFit:function(){var a=Ext.util.TextMetrics.createInstance(this.getEl());text=this.get("text"),width=a.getWidth(text),width>this.autoMaxWidth?(this.set("width",this.autoMaxWidth),a.setFixedWidth(this.autoMaxWidth)):(this.set("width",width+20),a.setFixedWidth(width+20)),this.set("height",a.getHeight(text)+20)}},function(){Workspace.reg("Workspace.objects.RichTextObject",Workspace.objects.RichTextObject)});
Ext.define("Workspace.tools.TextTool",{requires:["Workspace.tools.AlohaTool","Workspace.objects.RichTextObject"],constructor:function(a,b){this.workspace=a,Ext.apply(this,b,{parameters:{}}),Workspace.tools.TextTool.superclass.constructor.call(this,a,b),Ext.apply(this.parameters,{fill:"#fff",stroke:"#000"}),this.dragging=!1,this.proto=!1,this.x1=0,this.y1=0},extend:"Workspace.tools.BaseTool",minWidth:75,maxWidth:!1,minHeight:20,maxHeight:!1,click:function(a,b){if(b&&b.wtype=="Workspace.RichTextObject")return this._item&&(this.workspace.deleteObjects(this._item),delete this._item),this.workspace.edit(b),!1;a.stopEvent()},dblclick:function(a,b){a.stopEvent()},mousedown:function(a,b){this.dragging=!0,this.proto&&(this.proto.remove(),this.proto=!1),a.stopEvent()},mouseup:function(a,b){this.dragging=!1;if(this.proto){var c=this.getAdjustedXY(a);this.x2=c.x,this.y2=c.y;var d=Workspace.tools.SelectorBand.calculateBandBox(this.x1,this.y1,this.x2,this.y2);this._item=this.workspace.createObject({wtype:"Workspace.objects.RichTextObject",x:d.x,y:d.y,width:Workspace.Utils.bounds(d.width,this.minWidth,this.maxWidth),height:Workspace.Utils.bounds(d.height,this.minHeight,this.maxHeight)}),this.proto.remove(),this.workspace.edit(this._item)}a.stopEvent()},mousemove:function(a,b){if(this.dragging){this.proto||this.createProto(a);var c=this.getAdjustedXY(a);this.x2=c.x,this.y2=c.y;var d=Workspace.tools.SelectorBand.calculateBandBox(this.x1,this.y1,this.x2,this.y2);this.x=d.x,this.y=d.y,this.width=d.width,this.height=d.height,this.anchor=d.anchor,delete d.anchor,this.proto.attr(d),a.stopEvent()}},createProto:function(a){var b=this.getAdjustedXY(a);this.x1=b.x,this.y1=b.y,this.proto=this.workspace.paper.rect(this.x1,this.y1,0,0),this.proto.attr(this.parameters)},deactivate:function(){this.proto&&(this.proto.remove(),this.proto=!1),this._item=!1}},function(){Workspace.Tools.register("textbox",Workspace.tools.TextTool)});
Ext.define("Workspace.objects.MathEquationObject",{constructor:function(a,b){Ext.applyIf(b,{}),Workspace.objects.MathEquationObject.superclass.constructor.call(this,a,b),Ext.apply(this.elementSpec,{tag:"div",cls:"math"}),this.expose("latex",!0,!0,!0,!1)},extend:"Workspace.objects.ElementObject",wtype:"Workspace.objects.MathEquationObject",name:"New Equation",iconCls:"math-icon",isEditable:!0,isSelectable:!0,isResizable:!0,latex:"",editor:"mathquill",render:function(){Workspace.objects.MathEquationObject.superclass.render.call(this,arguments),this.showImage(this.get("latex"))},showImage:function(a){var b="http://latex.codecogs.com/gif.latex?";b+=encodeURIComponent(a),this.getEl().update('<img src="'+b+'" />')},activate:function(){var a=this.getEl();a.update(""),$(a.dom).mathquill("editable").mathquill("latex",this.get("latex"))},deactivate:function(){var a=this.getEl(),b=$(a.dom).mathquill("latex");this.set("latex",b),$(this.element.dom).mathquill("revert"),this.element=Ext.get(this.element.dom),this.showImage(b)}},function(){Workspace.reg("Workspace.objects.MathEquationObject",Workspace.objects.MathEquationObject)});
Ext.define("Workspace.tools.MathTool",{requires:["Workspace.tools.SelectorBand","Workspace.tools.MathQuillTool","Workspace.objects.MathEquationObject"],constructor:function(a,b){this.workspace=a,Ext.apply(this,b,{parameters:{}}),Workspace.tools.MathTool.superclass.constructor.call(this,a,b),Ext.apply(this.parameters,{fill:"#fff",stroke:"#000"}),this.dragging=!1,this.proto=!1,this.x1=0,this.y1=0},extend:"Workspace.tools.BaseTool",minWidth:75,maxWidth:!1,minHeight:30,maxHeight:!1,click:function(a,b){b&&b.wtype=="MathEquationObject"&&this.workspace.edit(b),a.stopEvent()},dblclick:function(a,b){a.stopEvent()},mousedown:function(a,b){this.dragging=!0,this.proto&&(this.proto.remove(),this.proto=!1),a.stopEvent()},mouseup:function(a,b){this.dragging=!1;if(this.proto){var c=this.getAdjustedXY(a);this.x2=c.x,this.y2=c.y;var d=Workspace.tools.SelectorBand.calculateBandBox(this.x1,this.y1,this.x2,this.y2),e=this.workspace.createObject({wtype:"Workspace.objects.MathEquationObject",x:d.x,y:d.y,width:Workspace.Utils.bounds(d.width,this.minWidth,this.maxWidth),height:Workspace.Utils.bounds(d.height,this.minHeight,this.maxHeight)});this.proto.remove(),this.proto=!1,this.workspace.edit(e)}a.stopEvent()},mousemove:function(a,b){if(this.dragging){this.proto||this.createProto(a);var c=this.getAdjustedXY(a);this.x2=c.x,this.y2=c.y;var d=Workspace.tools.SelectorBand.calculateBandBox(this.x1,this.y1,this.x2,this.y2);this.x=d.x,this.y=d.y,this.width=d.width,this.height=d.height,this.anchor=d.anchor,delete d.anchor,this.proto.attr(d),a.stopEvent()}},createProto:function(a){var b=this.getAdjustedXY(a);this.x1=b.x,this.y1=b.y,this.proto=this.workspace.paper.rect(this.x1,this.y1,0,0),this.proto.attr(this.parameters)},deactivate:function(){this.proto&&(this.proto.remove(),this.proto=!1)}},function(){Workspace.Tools.register("math",Workspace.tools.MathTool)});
Ext.define("App.ui.Browser",{extend:"Ext.panel.Panel",mixins:{app:"App.ui.Application"},constructor:function(){this.mixins.app.constructor.apply(this,arguments),this.callParent(arguments)},initComponent:function(){Ext.apply(this,{html:'<iframe src="'+this.url+'" style="width:100%;height:100%;border:none;"></iframe>'}),this.callParent(arguments)}});
Ext.define("App.ui.Dashboard",{extend:"Ext.panel.Panel",initComponent:function(){Ext.apply(this,{title:"Dashboard",bodyStyle:"padding:10px",iconCls:"dash",autoLoad:{url:"html/dashboard.html",callback:this.initDashboard,scope:this}}),App.on("userNameChanged",function(a,b){Ext.get("fp-user-name").update(App.User.name+" ("+App.User.email+")")}),this.callParent()},initDashboard:function(){App.User.isLoggedIn()&&Ext.get("fp-user-name").update(App.User.name+" ("+App.User.email+")")}});
Ext.define("App.ui.Help",{extend:"App.ui.Browser",title:"Help",iconCls:"help",trigger:"index",constructor:function(a){this.url=App.path.join(["help",a.triggers[0]||"index"]),this.callParent(arguments)}});
Ext.define("App.ui.Viewer",{extend:"App.ui.Browser",editorType:"Viewer",iconCls:"application",autoHideLoadingMask:!0,mixins:{app:"App.ui.Application"},constructor:function(a){this.mixins.app.constructor.apply(this,arguments),this.url=Ext.urlAppend(App.getEndpoint("load"),Ext.Object.toQueryString({node:this.getPath()})),this.callParent(arguments)}});
Ext.define("App.ui.TaskManager",{extend:"Ext.panel.Panel",initComponent:function(){this.grid=Ext.create("Ext.grid.Panel",{store:App.TaskRunner.taskStore,columns:[{dataIndex:"tool",renderer:function(a){return'<img src="'+Ext.BLANK_IMAGE_URL+'" style="width:18px;height:18px;" class="'+App.TaskRunner.serverTools[a].iconCls+'" />'}},{header:"Tool",dataIndex:"tool"},{header:"Date Submitted",dataIndex:"startDate"},{header:"Date Completed",dataIndex:"endDate"}]}),Ext.apply(this,{items:[this.grid]}),this.callParent(arguments)}});
Ext.define("App.ui.NupackResults",{extend:"Ext.panel.Panel",requires:["App.ui.nupack.Panel"],template:'<div class="app-nupack-complex-wrap"><div><span class="app-nupack-complex">Complex: {complex}</span>&nbsp;|&nbsp;<span class="app-nupack-order">Order: {order}</span></div><div class="app-nupack-force"></div></div>',mixins:{app:"App.ui.Application"},html:'<fieldset class="x-fieldset x-fieldset-default"><legend class="x-fieldset-header x-fieldset-header-default nupack-strand-summary-title">Distinct strands</legend><pre class="nupack-strand-summary cm-s-default"></pre></fieldset><fieldset class="x-fieldset x-fieldset-default"><legend class="x-fieldset-header x-fieldset-header-default nupack-strand-summary-title">Complex Minimum Free Energy</legend><div class="nupack-mfe-summary"></div></fieldset><div class="nupack-concentration-summary"></div>',bodyPadding:5,autoScroll:!0,requires:[""],constructor:function(a){this.callParent(arguments),this.mixins.app.constructor.apply(this,arguments)},initComponent:function(){this.callParent(arguments),this.on("afterrender",this.loadFile,this)},onLoad:function(){if(this.data){this.xt||(this.xt=new Ext.XTemplate(this.template)),this.sourceData=Ext.decode(this.data);var a=_.reduce(this.sourceData.ocx_mfe,function(a,b){var c=Math.abs(parseFloat(b.concentration)*1e3);return c>a&&(a=c),a},0),b=_.max(_.map(this.sourceData.ocx_mfe,function(a){return a.strands.length})),c=_.sortBy(this.sourceData.ocx_mfe,function(a){return-parseFloat(a.concentration)*1e3}),d=_.max(_.map(this.sourceData.ocx_mfe,function(a){return Math.abs(parseFloat(a.energy))})),e=this.getEl().down(".nupack-strand-summary"),f=this.sourceData.strandNames?this.sourceData.strandNames:_.range(1,this.sourceData.strands.length+1);CodeMirror.runMode(_.map(_.zip(f,this.sourceData.strands),function(a){return a.join(" : ")}).join("\n"),"sequence",e.dom),this.getEl().down(".nupack-strand-summary-title").update(this.sourceData.strands.length+" distinct strands");var g=600,h=10*c.length,i=pv.Scale.linear(0,d).nice().range(0,g),j=pv.Scale.ordinal(pv.range(0,c.length)).splitBanded(0,h,.8),k=(new pv.Panel).canvas(this.getEl().down(".nupack-mfe-summary").dom).width(g).height(h).top(10).bottom(20).left(50).right(10),l=k.add(pv.Bar).data(c).top(function(){return j(this.index)}).height(j.range().band).left(0).width(function(a){return i(Math.abs(parseFloat(a.energy)))});l.anchor("right").add(pv.Label).textStyle("white").text(function(a){return a.energy}),l.anchor("left").add(pv.Label).textMargin(5).textAlign("right").text(function(a){return a.strandNames.join("+")}),k.add(pv.Rule).data(i.ticks(5)).left(i).strokeStyle(function(a){return a?"rgba(255,255,255,.3)":"#000"}).add(pv.Rule).bottom(0).height(5).strokeStyle("#000").anchor("bottom").add(pv.Label).text(i.tickFormat),k.render();var m=_.map(c,Ext.bind(function(b){return Ext.create("App.ui.nupack.Panel",{xtype:"resultspanel",complexData:b,maxConcentration:a,renderTo:this.body})},this))}}},function(){});
Ext.define("App.ui.RefHelper",{init:function(){_.each(this.query("*[ref]"),function(a){this[a.ref]=a},this)}});
Ext.define("Workspace.objects.dna.BuildManager",{extend:"Workspace.objects.Object",errorClsName:"dynaml-error-message",statics:{dynaml:{domainProperties:["name","identity","role"],nodeProperties:["name","motif"],motifProperties:["name","dynaml"]}},constructor:function(){this.callParent(arguments),this.workspace.buildManager=this,this.nodes=[],this.workspace.on("create",this.onCreate,this),this.addEvents("needsrebuild","beforerebuild","rebuild","error"),this.on("needsrebuild",this.buildRealtime,this,{buffer:1e3})},onCreate:function(a){a&&a.isWType("Workspace.objects.dna.Node")?(this.nodes.push(a),_.each(Workspace.objects.dna.BuildManager.dynaml.nodeProperties,function(b){a.on("change:"+b,this.needsRebuild,this)},this),this.needsRebuild()):a.isWType("Workspace.objects.dna.Complementarity")?this.needsRebuild():a.isWType("Workspace.objects.dna.Motif")&&(this.needsRebuild(),_.each(Workspace.objects.dna.BuildManager.dynaml.motifProperties,function(b){a.on("change:"+b,this.needsRebuild,this)},this))},needsRebuild:function(){this.fireEvent("needsrebuild")},buildRealtime:function(){try{var a=this.serializeDynaml();this.lastDynaml=JSON.parse(JSON.stringify(a)),this.fireEvent("beforerebuild",this,a);var b;b=App.dynamic.Compiler.compileLibrary(a),this.lastLibrary=b,this.fireEvent("rebuild",this,b);var c=_.chain(a.motifs||[]).map(function(a){return _.find(b.motifs,function(b){return b.name==a.name})}).compact().value();this.syncCustomMotifStore(c),_.each(this.workspace.getAllObjects(),function(a){a.isWType("Workspace.objects.dna.Node")&&a.hideError()})}catch(d){d.nodes&&_.each(d.nodes,function(a){var b=this.findWorkspaceObject("node",a);b&&b.highlightError()},this),d.ports&&_.each(d.ports,function(a){var b=this.findWorkspaceObject("port",a);b&&b.highlightError()},this),this.fireEvent("error",d.message,d),this.lastError=d}},syncCustomMotifStore:function(a,b){b=b||!1,_.each(a,function(a){var b=this.customMotifStore.findRecord("number",a.getName());b?b.set("spec",a):this.customMotifStore.add({number:a.getName(),spec:a})},this)},findWorkspaceObject:function(a,b){var c;b&&b.getName?c=b.getName():_.isObject(b)&&b.name?c=b.name:_.isString(b)&&(c=b);if(!c)return null;switch(a){case"node":return this.workspace.findObjectBy(function(a){return a.isWType("Workspace.objects.dna.Node")&&a.get("name")==c});case"connection":return null;case"port":return!1;case"motif":return this.workspace.findObjectBy(function(a){return a.isWType("Workspace.objects.dna.Motif")&&a.get("name")==c})}},getRealtime:function(a,b,c){if(!this.lastLibrary)return null;switch(a){case"strand":var d=this.lastLibrary.getStrand(b);if(!d)return null;switch(c){case"this":return d;case"domains":return d.getDomains();case"polarity":return d.getPolarity();case"absolutePolarity":return d.getAbsolutePolarity();case"dynaml":return this.lastDynaml&&this.lastDynaml.strands?_.find(this.lastDynaml.nodes,function(a){return a.name==b}):!1;default:return d[c]}break;case"node":var e=this.lastLibrary.getNode(b);if(!e)return null;switch(c){case"this":return e;case"domains":return e.getDomains();case"strands":return e.getStrands();case"polarity":return e.getPolarity();case"dynaml":return this.lastDynaml&&this.lastDynaml.nodes?_.find(this.lastDynaml.nodes,function(a){return a.name==b}):!1;default:return e[c]}break;case"motif":var f=this.lastLibrary.getMotif(b);if(!f)return null;switch(c){case"this":return f;case"dynaml":return this.lastDynaml&&this.lastDynaml.motifs?_.find(this.lastDynaml.motifs,function(a){return a.name==b}):!1;default:return e[c]}}},nodeIndex:0,getNextNodeName:function(){var a;do this.nodeIndex++,a="n"+this.nodeIndex;while(!!this.workspace.findObjectBy(function(b){return b.get("name")==a}));return a},motifIndex:0,getNextMotifName:function(){var a;do this.motifIndex++,a="c"+this.motifIndex;while(!!this.workspace.findObjectBy(function(b){return b.get("name")==a}));return a},buildDynaml:function(a,b){var c=this.workspace,d=[],e=[],f=[],g={},h={},i={};return b=b||!1,_.each(a,function(a){if(a.isWType("Workspace.objects.dna.Node"))h[a.get("name")]=a,e.push(a),a.get("motif")&&d.push(a.get("motif"));else if(a.isWType("Workspace.objects.dna.Complementarity")){var b=a.get("leftObject"),c,j;if(!b)return;c=b.getParent();if(!c)return;j=c.getId(),g[j]||(g[j]=[]),g[j].push(a)}else a.isWType("Workspace.objects.dna.Motif")&&(i[a.get("name")]=a,f.push(a))}),d=_.chain(d).uniq().filter(function(a){return!i[a]}).map(function(a){return{type:"motif",name:a}}).value(),f=_.chain(f).map(function(a){var b=a.get("nodes");if(b&&b.length>0){var c=this.buildDynaml(a.getChildren(),!0);return _.reduce(Workspace.objects.dna.BuildManager.dynaml.motifProperties,function(b,c){return a.has(c)&&(b[c]=a.get(c)),b},c)}if(a.get("dynaml")){var d;try{d=jsonlint.parse(a.get("dynaml"))}catch(e){throw{message:["In motif",a.get("name"),":\n",e.message].join(" ")}}return _.reduce(Workspace.objects.dna.BuildManager.dynaml.motifProperties,function(b,c){return a.has(c)&&(b[c]=a.get(c)),b},d)}},this).compact().value(),e=_.map(e,function(a){var c=a.get("polarity");return{name:a.get("name"),motif:a.get("motif"),polarity:isNaN(c)?0:c,complementarities:_.map(g[a.getId()]||[],function(a){return{source:a.get("leftObject").get("name"),target:a.get("rightObject").get("name"),node:a.get("rightObject").get("parent").get("name")}}),domains:_.map(a.getChildren(),function(a,c){if(a.isWType(["Workspace.objects.dna.InputPort","Workspace.objects.dna.OutputPort","Workspace.objects.dna.BridgePort"]))return _.reduce(Workspace.objects.dna.BuildManager.dynaml.domainProperties,function(b,c){return a.has(c)&&(b[c]=a.get(c)),b},{name:a.get("name")||"p"+c,expose:b?function(a){return a?{role:a.get("role"),name:a.get("name")}:null}(a.get("exposure")):null})})}}),{"import":d,nodes:e,motifs:f}},serializeDynaml:function(){return this.buildDynaml(this.workspace.getRootObjects())},serializeTerse:function(){var a=this.workspace,b=[],c=[],d={},e=1,f=[];a.objects.each(function(a){a.isWType("Workspace.objects.dna.Node")?(d[a.getId()]=e,e++,b.push(a)):a.isWType("Workspace.objects.dna.Complementarity")&&c.push(a)}),f.push(b.length.toString());var g=0;return Ext.each(b,function(a){var b=a.get("motif");isNaN(parseInt(b))?b=parseInt(_.first(b.match(/\d+/g))):b=parseInt(b);var c=[a.get("name").replace(/\s/g,"_")||"Untitled_"+ ++g,b],e,h;a.children.each(function(a){if(a.isWType("Workspace.objects.dna.OutputPort")||a.isWType("Workspace.objects.dna.BridgePort")){if(a.get("complementarity")){e=a.get("complementarity");if(e.hasParent()){h=e.get("parent");if(h)return c.push(d[h.getId()]),!0}}c.push("0")}}),f.push(c.join(" "))}),f.join("\n")},buildMotif:function(a,b,c){var d,e;return a&&(a=a.serialize(),a.library=App.dynamic.Library.dummy(),a=new App.dynamic.Motif(a),e=a.name,d=this.workspace.createObject({wtype:"Workspace.objects.dna.Node",x:b,y:c,motif:e}),d.suspendLayout=!0,_.each(a.getDomains(),function(a,b){var c=_.clone(a),e={};_.isObject(c)&&Workspace.objects.dna.PortClasses[c.role]&&(e.name=c.name,e.wtype=Workspace.objects.dna.PortClasses[c.role],e.stroke=App.dynamic.Compiler.getColor(c),e.segments=c.segments,e.role=c.role,d.adopt(this.buildPort(e)))},this),d.suspendLayout=!1,d.doLayout()),d},buildPort:function(a){return a||(a={}),_.isString(a)?this.workspace.createObject(Workspace.objects.dna.Ports[a]):(!!a.name,this.workspace.createObject(a))}},function(){Workspace.reg("Workspace.objects.dna.BuildManager",Workspace.objects.dna.BuildManager)});
Ext.define("Workspace.tools.nodal.PortTool",{extend:"Workspace.tools.BaseTool",require:["Workspace.objects.dna.OutputPort","Workspace.objects.dna.InputPort"],mixins:{highlightable:"Workspace.tools.Highlightable"},click:function(a,b){var c=this.getAdjustedXY(a),d;if(b&&this.accept(b)){var e=b.nextPortName();a.altKey?d=this.workspace.createObject({name:e,wtype:"Workspace.objects.dna.OutputPort",x:c.x,y:c.y}):a.shiftKey?d=this.workspace.createObject({name:e,wtype:"Workspace.objects.dna.BridgePort",x:c.x,y:c.y}):d=this.workspace.createObject({name:e,wtype:"Workspace.objects.dna.InputPort",x:c.x,y:c.y}),b.adopt(d)}},accept:function(a){return a.isWType(["Workspace.objects.dna.Node","Workspace.objects.dna.Motif"])},mouseover:function(a,b){this.mixins.highlightable.mouseover.apply(this,arguments)},mouseout:function(a,b){this.mixins.highlightable.mouseout.apply(this,arguments)},buildPort:function(a){return this.workspace.buildManager.buildPort(a)}},function(){Workspace.Tools.register("port",Workspace.tools.nodal.PortTool)});
Ext.define("App.ui.ObjectTree",{extend:"Ext.tree.TreePanel",useArrows:!0,initComponent:function(){App.ui.ObjectTree.superclass.initComponent.apply(this,arguments)},attachTo:function(a){this.workspace=a,this.mon(this.workspace,"instantiate",this.onCreate,this),this.mon(this.workspace,"initialize",this.bindParent,this),this.mon(this.workspace,"select",this.onWorkspaceSelect,this),this.mon(this.workspace,"unselect",this.onWorkspaceUnselect,this),this.mon(this.workspace,"destroy",this.onObjectDestroy,this);var b=this.getSelectionModel();b.on("selectionchange",this.onSelect,this)},findNodeForObject:function(a){return a&&a.getId?this.findNodeForId(a.getId()):!1},findNodeForId:function(a){return this.getStore().getRootNode().findChild("id",a,!0)},getObjectFromNode:function(a){return this.workspace.getObjectById(a.id)},onEditName:function(a,b){var c=this.getObjectFromNode(this.editor.editNode);c.set("name",b)},onSelect:function(a,b){if(!this.ignoreSelectionChange){this.ignoreSelectionChange=!0;var c=[];Ext.each(b,function(a){c.push(this.workspace.getObjectById(a.id))},this),this.workspace.setSelection(c),this.ignoreSelectionChange=!1}},onWorkspaceSelect:function(a){if(!this.ignoreSelectionChange){this.ignoreSelectionChange=!0;var b=this.findNodeForObject(a);b&&this.getSelectionModel().select(b,!0),this.ignoreSelectionChange=!1}},onWorkspaceUnselect:function(a){if(!this.ignoreSelectionChange){this.ignoreSelectionChange=!0;var b=this.findNodeForObject(a);b&&this.getSelectionModel().deselect(b,!0),this.ignoreSelectionChange=!1}},onCreate:function(a){var b;a.hasParent()&&(b=this.findNodeForObject(a.getParent())),b||(b=this.getRootNode()),b&&b.appendChild({text:a.get("name"),id:a.getId(),iconCls:a.get("iconCls"),editable:!0}),a.on("change",this.onChange,this)},bindParent:function(a){var b=this.findNodeForObject(a),c=this.findNodeForObject(a.getParent());c&&(b.remove(!1),c.appendChild(b))},onObjectDestroy:function(a){var b=this.findNodeForObject(a);b&&(b.remove(),b.destroy()),a.un("change",this.onChange,this)},onChange:function(a,b,c,d){if(!this.ignoreChange&&d&&d.getId)if(a=="name"){var e=this.findNodeForObject(d);e&&e.set("text",b)}else if(a=="parent"){var e=this.findNodeForObject(d),f=this.findNodeForObject(d.getParent());f&&(e.remove(!1),f.appendChild(e))}}});
Ext.define("Workspace.objects.secondary.ComplementarityManager",{extend:"Workspace.objects.Object",nameIndex:-1,defaultPolaritySpecifier:"*",colorProperty:"stroke",constructor:function(){this.callParent(arguments),this.identities={},this.colors={},this.objectIdentitiesCache={},this.expose("identities",!0,!0,!0,!1),this.expose("nameIndex",!0,!0,!0,!1),this.workspace.complementarityManager=this},makeIdentifier:function(a,b){return a+(b==-1?this.defaultPolaritySpecifier:"")},getIdentity:function(a){if(a&&a.getId)return this.objectIdentitiesCache[a.getId()]},getIdentifier:function(a,b){b||(b=1);if(a&&a.getId)return this.makeIdentifier(this.getIdentity(a),a.get("polarity")*b)},getColor:function(a){return this.colors[a]},setColor:function(a,b){var c=this.colors[a];this.colors[a]=b,_.each(this.getWithIdentity(a),function(a){a.change(this.colorProperty,b,c)},this)},nextColor:function(){return Workspace.Utils.ideaColor(this.getId())},nextName:function(){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZ";this.nameIndex++;var b="",c=this.nameIndex;do b+=a.charAt(c%26),c-=25;while(c>0);return b},checkoutIdentity:function(a,b){return b=b||this.nextName(),b=this.normalizeIdentity(b),this.identities[b]||(this.identities[b]=[],this.colors[b]=this.nextColor()),this.cacheObjectId(a,b),this.identities[b].push(a),a.set("polarity",this.getPolarity(b)),b},normalizeIdentity:function(a){return this.getPolarity(a)==-1?a.substring(0,a.length-1):a},getWithIdentity:function(a){return a=this.normalizeIdentity(a),this.identities[a]},getPolarity:function(a){return a?a[a.length-1]=="*"||a[a.length-1]=="'"?-1:1:0},getEqual:function(a,b){b==0&&(b=this.getPolarity(a));var c=this.getWithIdentity(a);return _.filter(c,function(a){return a.get("polarity")==b})},getComplementary:function(a,b){return b==0&&(b=this.getPolarity(a)),this.getEqual(a,b*-1)},cacheObjectId:function(a,b){this.objectIdentitiesCache[a.getId()]=b},mergeIdentifiers:function(a,b){var c=a?this.normalizeIdentity(a):!1,d=a?this.getPolarity(a):!1,e=b?this.normalizeIdentity(b):!1,f=b?this.getPolarity(b):!1,g,h,i;c&&this.identities[c]&&(g=this.getEqual(e,f),h=this.getComplementary(e,f),i=g.concat(h),this.identities[c]=this.identities[c].concat(i),_.each(g,function(a){a.set("polarity",d),this.cacheObjectId(a,c),a.change("identity",c,e)},this),_.each(h,function(a){a.set("polarity",-d),this.cacheObjectId(a,c),a.change("identity",c,e)},this))},makeComplementary:function(a,b){this.mergeIdentifiers(this.getIdentifier(a),this.getIdentifier(b,-1))}},function(){Workspace.reg("Workspace.objects.secondary.ComplementarityManager",Workspace.objects.secondary.ComplementarityManager)});
Ext.define("App.ui.SequenceThreader",{extend:"Ext.window.Window",layout:"fit",width:400,height:400,initComponent:function(){Ext.apply(this,{layout:"border",margins:5,tbar:[{text:"Thread",handler:this.thread,scope:this},{text:"Normalize",handler:this.normalize,scope:this},{text:"Truncate",handler:this.truncate,scope:this}],items:[new App.ui.CodeMirror({region:"west",width:200,split:!0,ref:"sequencesPane",mode:"sequence",title:"Sequence"}),new App.ui.CodeMirror({region:"center",ref:"strandsPane",mode:"nupack",title:"Strands"}),new App.ui.CodeMirror({region:"south",ref:"resultsPane",mode:"sequence",height:200,split:!0,title:"Results"})],buttons:[{text:"Done"}]}),this.callParent(arguments),_.each(this.query("*[ref]"),function(a){this[a.ref]=a},this)},smartSelect:function(a){return App.ui.SequenceEditor.prototype.smartSplit.call(a,a.getValue())},thread:function(){var a=this.smartSelect(this.sequencesPane),b=this.smartSelect(this.strandsPane),c={},d;a=_.compact(_.map(a,function(a){return a.trim()})),c=DNA.normalizeSystem(_.compact(_.map(b,function(a){return _.last(a.split(":")).trim()})));var e="";_.each(c,function(b,c,d){e+=DNA.threadSegments(a,b)+"\n"}),this.resultsPane.setValue(e)},normalize:function(){var a=this.smartSelect(this.strandsPane),b,c,d;b=_.map(a,function(a){return _.map(a.split(":"),function(a){return a.trim()})}),b=_.zip.apply(_,b),c=_.compact(b[0]),d=_.compact(b[1]),d=DNA.normalizeSystem(d),this.strandsPane.setValue(_.map(_.zip(c,d),function(a){return a[0]+" : "+DNA.encodeStrand(a[1])}).join("\n"))},setStrands:function(a){this.strandsPane.setValue(a)},setSequences:function(a){this.sequencesPane.setValue(a)}});
Ext.define("App.ui.SaveButton",{extend:"Ext.button.Split",text:"Save",iconCls:"save",saveText:"Save",createText:"Create",initComponent:function(){this.overwrite=Ext.create("Ext.menu.CheckItem",{text:"Overwrite exiting file",checked:!!this.app&&!!this.app.document,tooltip:{title:"Overwrite",text:"Check this to overwrite the selected file with the contents of this document. Uncheck to make a new document with the name you've entered above.",anchorToTarget:!0,anchor:"left"}}),this.saveMenu=Ext.create("App.ui.CreateMenu",{extraMenuItems:[this.overwrite],autoCreateMenu:!1,createText:this.createText,afterLeaveDelay:1e3,onCreateButton:Ext.bind(function(a){var b;this.getDefaultExtension()&&(a=App.Path.addExt(a,this.getDefaultExtension())),this.overwrite.checked?b=App.ui.filesTree.getSelectionModel().getLastSelected():b=App.ui.filesTree.newFileUnderSelection(a),this.app.bindDocument(b),this.app.saveFile()},this)}),this.saveMenu.fileNameField.on("afterrender",this.afterrender,this),Ext.apply(this,{handler:this.click,scope:this,menu:this.saveMenu}),this.callParent(arguments),this.on("menushow",this.menushow,this),this.on("menuhide",this.menuhide,this),this.overwrite.on("checkchange",this.changeOverwrite,this),this.app&&(this.app.on("binddocument",this.updateOverwrite,this),this.app.on("unbinddocument",this.updateOverwrite,this))},getDefaultExtension:function(){return this.defaultExtension?this.defaultExtension:""},selectionChange:function(a,b){b=a.getLastSelected(),b&&(b.isLeaf()?(this.saveMenu.fileNameField.setValue(b.get("text")),this.overwrite.setChecked(!0)):this.saveMenu.fileNameField.setValue(""),this.overwrite.setDisabled(!b.isLeaf()))},updateOverwrite:function(){this.app&&this.app.document?this.overwrite.setChecked(!0):this.overwrite.setChecked(!1)},changeOverwrite:function(a,b){this.saveMenu.fileNameField.setDisabled(b),this.saveMenu.createButton.setText(b?this.saveText:this.createText)},afterrender:function(){this.tip=Ext.create("Ext.tip.ToolTip",{target:this.saveMenu.fileNameField.getEl(),autoHide:!0,anchorToTarget:!0,anchor:"left",title:"Save file",html:"Select a folder in the <b>Files</b> pane to the left, then enter a file name here."})},menushow:function(){this.changeOverwrite(this.overwrite,this.overwrite.checked),App.ui.filesTree.getSelectionModel().on("selectionchange",this.selectionChange,this),this.app&&this.app.document&&(this.saveMenu.fileNameField.setValue(this.app.document.get("text")),App.ui.filesTree.getSelectionModel().select(this.app.document))},menuhide:function(){App.ui.filesTree.getSelectionModel().un("selectionchange",this.selectionChange,this)},click:function(){this.app&&(this.app.document?this.app.saveFile():this.showMenu())}});
Ext.define("App.ui.TipHelper",{init:function(){this.tips||(this.tips=[]),_.each(this.query("*[tooltip]"),function(a){a.on("afterrender",this.buildTip,this)},this),this.on("destroy",this.destroyTips,this)},buildTip:function(a){var b=a.tooltip;if(!a.tooltip||a.tip||a.setTooltip)return;_.isString(b)&&(b={text:b}),b.text&&!b.html&&(b.html=b.text),b.target=a.getEl();var c=new Ext.ToolTip(b);this.tips||(this.tips=[]),this.tips.push(c),a.tip=c},destroyTips:function(){_.each(this.tips,function(a){a&&a.destroy&&a.destroy()})}});
Ext.define("App.ui.SequenceStats",{extend:"Ext.menu.Menu",minWidth:300,minHeight:400,initComponent:function(){this.store=new Ext.data.JsonStore({fields:[{name:"name",type:"string"},{name:"count",type:"int"},{name:"percent",type:"float"}],data:[]}),this.chartStore=new Ext.data.JsonStore({fields:[{name:"name",type:"string"},{name:"count",type:"int"},{name:"percent",type:"float"}],data:[]}),this.grid=new Ext.grid.Panel({store:this.store,columns:[{header:"Sequence",dataIndex:"name",flex:2,renderer:function(a){return a.toUpperCase()}},{header:"Count",dataIndex:"count",flex:1},{header:"Percent",dataIndex:"percent",flex:1,renderer:function(a){return a*100+"%"}}]}),this.chart=new Ext.chart.Chart({store:this.chartStore,shadow:!1,legend:!1,height:200,theme:"Base:gradients",series:[{type:"pie",field:"percent",showInLegend:!1,donut:!1,highlight:{segment:{margin:20}},label:{field:"name",display:"middle",contrast:!0,font:"14px helvetica",renderer:function(a){return a.toUpperCase()}}}],destroy:function(){this.surface||(this.surface={destroy:function(){}})}}),Ext.apply(this,{items:[this.chart,this.grid]}),this.callParent(arguments)},loadSequence:function(a){var b=DNA.sequenceStats(a);this.store.loadData(b.full),this.chartStore.loadData(b.abbr)}});
Ext.define("App.ui.StatMenu",{extend:"Ext.menu.Menu",labelText:"Statistic: ",baseText:"Value: ",initComponent:function(){Ext.apply(this,{resizable:{transparent:!0},items:[{text:this.labelText,canActivate:!1},{xtype:"textfield",ref:"field",validate:Ext.bind(this.doValidate,this),scope:this,indent:!0,invalidText:this.invalidText,invalidCls:"x-form-invalid",validateOnChange:this.validateOnChange},"-",{text:this.baseText,defaultText:this.baseText,canActivate:!1,disabled:!0,ref:"output"}]}),this.callParent(arguments),_.each(this.query("*[ref]"),function(a){this[a.ref]=a},this),this.field.on("blur",this.onBlur,this)},validate:function(){return!0},algorithm:function(){return 0},doValidate:function(){var a=this.field.getValue();return this.validate(a||"")},onBlur:function(){this.validityChange(this.doValidate())},validityChange:function(a){this.output.setDisabled(!a),a?this.output.setText(this.baseText+this.algorithm(this.field.getValue())):this.output.setText("N/A")},populate:function(a){this.field.suspendEvents(),a&&this.field.setValue(a),this.field.resumeEvents(),this.validityChange(this.doValidate())}});
Ext.define("App.ui.CompareMenu",{extend:"Ext.menu.Menu",invalidText:"Invalid Comparison",defaultText:"Edit distance: ",validateOnChange:!1,minWidth:300,resizeHandles:"s e se",initComponent:function(){Ext.apply(this,{resizable:{transparent:!0},items:[{text:"Compare:",canActivate:!1},{xtype:"textfield",ref:"field1",validate:Ext.bind(this.doValidate,this),scope:this,indent:!0,invalidText:this.invalidText,invalidCls:"x-form-invalid",validateOnChange:this.validateOnChange},{xtype:"textfield",ref:"field2",validate:Ext.bind(this.doValidate,this),scope:this,indent:!0,invalidText:this.invalidText,invalidCls:"x-form-invalid",validateOnChange:this.validateOnChange},"-",{text:this.defaultText,defaultText:this.defaultText,canActivate:!1,disabled:!0,ref:"output"}]}),this.callParent(arguments),_.each(this.query("*[ref]"),function(a){this[a.ref]=a},this),this.field1.on("blur",this.onBlur,this),this.field2.on("blue",this.onBlur,this)},validate:function(){return!0},algorithm:function(){return 0},doValidate:function(){var a=this.field1.getValue();return v2=this.field2.getValue(),this.validate(a||"",v2||"")},onBlur:function(){this.validityChange(this.doValidate())},validityChange:function(a){this.output.setDisabled(!a),a?this.output.setText(this.output.defaultText+this.algorithm(this.field1.getValue(),this.field2.getValue())):this.output.setText("N/A")},populate:function(a,b){this.field1.suspendEvents(),this.field2.suspendEvents(),a&&this.field1.setValue(a),b&&this.field2.setValue(b),this.field1.resumeEvents(),this.field2.resumeEvents(),this.validityChange(this.doValidate())}});
Ext.define("Workspace.actions.UnwrapObjectsAction",{extend:"Workspace.actions.Action",constructor:function(a){Ext.apply(this,a),Workspace.actions.UnwrapObjectsAction.superclass.constructor.apply(this,arguments),Ext.applyIf(this,{scope:this})},wtype:"UnwrapIdeaAction",handler:function(){Ext.each(this.subjects,function(a){var b=a.getChildren();_.each(b,function(a){a.orphan()})}),this.workspace.deleteObjects(this.subjects)},getUndo:function(){return new Workspace.actions.AdoptObjectAction({objects:this.subjects.concat([]),text:'Undo "'+this.text+'"',iconCls:this.iconCls})},serialize:function(){return{wtype:this.wtype,subjects:Workspace.Components.serialize(this.subjects)}}});
Ext.define("App.ui.dd.ScoreParametersWindow",{extend:"Ext.window.Window",title:"Score Parameters",layout:"fit",plain:!0,bodyBorder:!1,border:!1,width:730,initComponent:function(){Ext.apply(this,{items:{xtype:"form",frame:!0,defaults:{labelAlign:"right",labelWidth:250},items:[{fieldLabel:"Maximum simultaneous mutations",xtype:"numberfield",name:"MAX_MUTATIONS",labelWidth:175},{xtype:"fieldset",title:"Base composition",defaults:{labelAlign:"right",labelWidth:175},layout:{type:"table",columns:2},items:[{fieldLabel:"GC Score",xtype:"numberfield",name:"GCstr"},{fieldLabel:"GT score",xtype:"numberfield",name:"GTstr"},{fieldLabel:"AT Score",xtype:"numberfield",name:"ATstr"},{fieldLabel:"Shannon Entropy multiplier",xtype:"numberfield",name:"SHANNON_BONUS",tooltip:{html:"Amount by which to multiply the adjusted Shannon entropy. Increase to increase the importance of sequence diversity relative to other factors. Adjusted Shannon entropy = (Shannon entropy - offset) * multiplier"}},{fieldLabel:"GGGG Penalty",xtype:"numberfield",name:"GGGG_PENALTY"},{fieldLabel:"Shannon Entropy offset",xtype:"numberfield",name:"SHANNON_ADJUST",tooltip:{html:"Expected Shannon entropy for a sequence, as a percent. 1 = 100% information density. Higher values will actively penalize sequences with low entropy. "}},{fieldLabel:"6 consecutive A/T or G/C score",xtype:"numberfield",name:"ATATAT_PENALTY"}]},{xtype:"container",layout:{type:"table",columns:2},height:130,defaults:{margin:2,height:125},items:[{xtype:"fieldset",title:"Matches",defaults:{labelAlign:"right",labelWidth:175},items:[{fieldLabel:"Mismatch/bulge score",xtype:"numberfield",name:"MBstr"},{fieldLabel:"Larger loop score (per extra base)",xtype:"numberfield",name:"LLstr"},{fieldLabel:"Penalty for pairing at ends of domains",xtype:"numberfield",name:"DHstr"}]},{xtype:"fieldset",title:"Exponential Scoring",defaults:{labelAlign:"right",labelWidth:175},items:[{fieldLabel:"Number of bases before exponential score kicks in",xtype:"numberfield",name:"LHbases"},{fieldLabel:"Exponential score initial",xtype:"numberfield",name:"LHstart"},{fieldLabel:"Exponential score power",xtype:"numberfield",name:"LHpower"}]}]},{xtype:"fieldset",title:"Crosstalk",defaults:{labelAlign:"right",labelWidth:175},items:[{fieldLabel:"Intra-domain bonus score",xtype:"numberfield",name:"INTRA_SCORE"},{fieldLabel:"Crosstalk bonus score",xtype:"numberfield",name:"CROSSTALK_SCORE"},{fieldLabel:"Crosstalk score divide factor",xtype:"numberfield",name:"CROSSTALK_DIV"}]}],buttons:[{text:"Save",handler:this.save,scope:this}]}}),this.callParent(arguments),this.form=this.down("form")},save:function(){this.designer.updateParams(this.getValues()),this.hide()},getValues:function(){return this.form.getValues()},setValues:function(a){return this.form.getForm().setValues(a)}});
Ext.define("Workspace.objects.Connection",{statics:{getPoint:function(a,b){return{x:a,y:b,width:0,height:0,getBBox:function(){return this},on:function(){},un:function(){},get:function(){},set:function(){}}}},constructor:function(){Workspace.objects.Connection.superclass.constructor.apply(this,arguments),this.expose("leftObject",!0,!0,!0,!1),this.expose("rightObject",!0,!0,!0,!1),this.expose("property",!0,!0,!0,!1),this.showLabel&&this.addShim(new Workspace.ConnectionLabel({property:"name"}))},extend:"Workspace.objects.VectorObject",requires:["Workspace.objects.Path"],shape:"path",isMovable:!1,name:"New Connection",iconCls:"connector",wtype:"Workspace.objects.Connection",fillOpacity:.1,initialize:function(){this.leftObject.id?this.set("leftObject",Workspace.Components.realize(this.leftObject)):this.leftObject=Workspace.objects.Connection.getPoint(this.leftObject.x,this.leftObject.y),this.rightObject.id?this.set("rightObject",Workspace.Components.realize(this.rightObject)):this.rightObject=Workspace.objects.Connection.getPoint(this.rightObject.x,this.rightObject.y),this.property&&this.updateProperty()},unBindObject:function(a){a.un("move",this.onObjectMove,this),a.un("hide",this.hide,this),a.un("show",this.show,this),a.un("destroy",this.destruct,this)},reBindObject:function(a,b){this.unBindObject(b),this.bindObject(a),this.updateProperty()},bindObject:function(a){a.on("move",this.onObjectMove,this),a.on("hide",this.hide,this),a.on("show",this.show,this),a.on("destroy",this.destruct,this)},updateProperty:function(){var a=this.get("leftObject"),b=this.get("rightObject");a&&a.set&&a.set(this.property,b),this.setBoth&&b&&b.set&&b.set(this.property,a)},canConnect:function(a,b){return!0},acceptLeft:function(a){return!0},acceptRight:function(a){return!0},render:function(){var a=this.get("leftObject"),b=this.get("rightObject");this.bindObject(a),this.bindObject(b),this.on("change:leftObject",this.reBindObject,this),this.on("change:rightObject",this.reBindObject,this),this.path=this.buildPath(a,b),this.arguments=[this.path],Workspace.objects.Connection.superclass.render.apply(this,arguments),this.updateDimensions()},getHighlightProxy:function(){return new Workspace.Proxy(Ext.applyIf({path:this.path,shape:this.shape,strokeWidth:this.strokeWidth+App.Stylesheet.Highlight.strokeWidth,workspace:this.workspace},App.Stylesheet.Highlight))},updateHighlightProxy:function(){this.highlightProxy&&(this.highlightProxy.path=this.path)},onObjectMove:function(){this.rebuildPath()},applyPath:function(a){this.path=a,this.vectorElement.attr({path:a}),this.updateHighlightProxy()},rebuildPath:function(){this.path=this.buildPath(this.get("leftObject"),this.get("rightObject")),this.vectorElement.attr({path:this.path}),this.updateHighlightProxy();var a=this.vectorElement.getBBox();this.set("x",a.x),this.set("y",a.y),this.set("height",a.height),this.set("width",a.width)},buildPath:function(a,b){var c=a.getBBox(),d=b.getBBox(),e=[{x:c.x+c.width/2,y:c.y-1},{x:c.x+c.width/2,y:c.y+c.height+1},{x:c.x-1,y:c.y+c.height/2},{x:c.x+c.width+1,y:c.y+c.height/2},{x:d.x+d.width/2,y:d.y-1},{x:d.x+d.width/2,y:d.y+d.height+1},{x:d.x-1,y:d.y+d.height/2},{x:d.x+d.width+1,y:d.y+d.height/2}],f={},g=[];if(this.thetaProperty&&a.has(this.thetaProperty)&&b.has(this.thetaProperty))var h={x:c.x+c.width/2,y:c.y+c.height/2,r:c.width/2},i={x:d.x+d.width/2,y:d.y+d.height/2,r:d.width/2},j=a.get(this.thetaProperty)*Math.PI/180,k=b.get(this.thetaProperty)*Math.PI/180,l=40,m=["M",h.x+Math.cos(j)*h.r,h.y+Math.sin(j)*h.r,"C",h.x+Math.cos(j)*(h.r+l),h.y+Math.sin(j)*(h.r+l),i.x+Math.cos(k)*(i.r+l),i.y+Math.sin(k)*(i.r+l),i.x+Math.cos(k)*i.r,i.y+Math.sin(k)*i.r];else{for(var n=0;n<4;n++)for(var o=4;o<8;o++){var p=Math.abs(e[n].x-e[o].x),q=Math.abs(e[n].y-e[o].y);if(n==o-4||(n!=3&&o!=6||e[n].x<e[o].x)&&(n!=2&&o!=7||e[n].x>e[o].x)&&(n!=0&&o!=5||e[n].y>e[o].y)&&(n!=1&&o!=4||e[n].y<e[o].y))g.push(p+q),f[g[g.length-1]]=[n,o]}if(g.length==0)var r=[0,4];else r=f[Math.min.apply(Math,g)];var s=e[r[0]].x,t=e[r[0]].y,u=e[r[1]].x,v=e[r[1]].y;p=Math.max(Math.abs(s-u)/2,10),q=Math.max(Math.abs(t-v)/2,10);var w=[s,s,s-p,s+p][r[0]].toFixed(3),x=[t-q,t+q,t,t][r[0]].toFixed(3),y=[0,0,0,0,u,u,u-p,u+p][r[1]].toFixed(3),z=[0,0,0,0,t+q,t-q,v,v][r[1]].toFixed(3),m=["M",s.toFixed(3),t.toFixed(3),"C",w,x,y,z,u.toFixed(3),v.toFixed(3)]}return m},getLeftPoint:function(){var a=this.path,b=[a[1],a[2]];return b},getRightPoint:function(){var a=this.path,b=[a[a.length-2],a[a.length-1]];return b},destruct:function(){this.workspace.deleteObjects([this])},destroy:function(){this.is("destroyed")||(this.property&&(this.get("leftObject").set(this.property,!1),this.setBoth&&this.get("rightObject").set(this.property,!1)),this.unBindObject(this.get("leftObject")),this.unBindObject(this.get("rightObject")),this.callParent(arguments))}},function(){Workspace.objects.Connection.borrow(Workspace.objects.Path,["updatePath","updateDimensions"]),Workspace.reg("Workspace.objects.Connection",Workspace.objects.Connection)});
Ext.define("Workspace.tools.ConnectorTool",{constructor:function(a,b){this.workspace=a,Ext.applyIf(this,b),Workspace.tools.ConnectorTool.superclass.constructor.call(this,a,b),this.parameters||(this.parameters={}),Ext.applyIf(this.parameters,App.Stylesheet.Draw),this.dragging=!1,this.proto=!1,this.x1=0,this.y1=0},extend:"Workspace.tools.BaseTool",mixins:{highlightable:"Workspace.tools.Highlightable"},targetWType:"Workspace.objects.Connection",showLabel:!0,accept:function(a){return this.dragging?this.acceptRight(a):this.acceptLeft(a)},acceptLeft:function(a){return!0},acceptRight:function(a){return!0},canConnect:function(a,b){return!0},onConnect:function(a,b,c){},buildObject:function(){return this.workspace.createObject({wtype:this.targetWType,leftObject:this.leftObject,rightObject:this.rightObject})},click:function(a,b){a.stopEvent()},dblclick:function(a,b){a.stopEvent()},mousedown:function(a,b){this.acceptLeft(b)?(this.dragging=!0,this.proto&&(this.proto.remove(),delete this.proto),this.createProto(a,b),a.stopEvent()):this.fireEvent("reject",b,this)},mouseup:function(a,b){if(this.dragging){this.dragging=!1;if(this.proto){var c=this.getAdjustedXY(a);b?this.rightObject=b:this.rightObject=Workspace.objects.Connection.getPoint(c.x,c.y);if(this.acceptRight(this.rightObject)&&this.canConnect(this.leftObject,this.rightObject)){var d=this.buildObject();this.onConnect(d,this.leftObject,this.rightObject)}else this.fireEvent("reject",b,this);delete this.leftObject,delete this.rightObject,this.proto.remove(),delete this.proto}a.stopEvent()}},mousemove:function(a,b){if(this.dragging){this.proto||this.createProto(a);var c=this.getAdjustedXY(a),d=8,e=Math.atan2(c.y-this.y1,c.x-this.x1);this.x2=c.x-Math.cos(e)*d,this.y2=c.y-Math.sin(e)*d,this.proto.attr({path:[["M",this.x1,this.y1],["L",this.x2,this.y2]]})}a.stopEvent()},createProto:function(a,b){var c=this.getAdjustedXY(a);this.x1=c.x,this.y1=c.y,b?this.leftObject=b:this.leftObject=Workspace.objects.Connection.getPoint(c.x,c.y),this.proto=this.workspace.paper.path([["M",this.x1,this.y1]]),this.proto.attr(this.parameters)},mouseover:function(a,b){this.mixins.highlightable.mouseover.apply(this,arguments)},mouseout:function(a,b){this.mixins.highlightable.mouseout.apply(this,arguments)}},function(){Workspace.Tools.register("connector",Workspace.tools.ConnectorTool)});
Ext.define("App.ui.BoundObjectPanel",{extend:"Ext.panel.Panel",enableBoundFields:!0,initComponent:function(){this.callParent(arguments),this.initialize()},initialize:function(){this.addEvents("action"),this.boundObjects=Ext.create("Workspace.objects.ObjectCollection",{}),this.boundFields=new Ext.util.MixedCollection,this.dynamicFields=new Ext.util.MixedCollection,this.enableBoundFields&&Ext.each(this.query("component[objectBinding]"),function(a){var b=a.objectBindingEvent||"change";a.addListener(b,this.updateObjects,this);if(!this.boundFields.containsKey(a.objectBinding))this.boundFields.add(a.objectBinding,[a]);else{var c=this.boundFields.getByKey(a.objectBinding);c.push(a),this.boundFields.add(a.objectBinding,c)}},this),this.dynamicFields.addAll(this.query("component[enableIf], component[showIf]")),this.on("afterrender",this.buildTips,this),this.on("afterrender",this.updateDynamicFields,this)},buildTips:function(){},updateObjects:function(a,b,c){if(!this.ignoreNext&&a.objectBinding){var d={},e;d[a.objectBinding]=a.getValue(),e=new Workspace.actions.ChangePropertyAction({values:d,subjects:this.boundObjects.getRange()}),this.fireEvent("action",e)}},updateFields:function(a){this.boundFields.each(function(b){_.each(b,function(b){a.has(b.objectBinding)&&b.setValue(a.get(b.objectBinding))})},this)},updateFieldsHandler:function(a,b,c){if(this.boundFields.containsKey(a)){var d=this.boundFields.get(a);this.ignoreNext=!0,_.each(d,function(a){a.setValue(b)}),this.ignoreNext=!1}},updateDynamicFields:function(){var a=this.boundObjects.getCommonWType();this.dynamicFields.each(function(b){Ext.isFunction(b.showIf)&&(b.showIf(a,this.boundObjects,this)?b.show():b.hide()),Ext.isFunction(b.enableIf)&&(b.enableIf(a,this.boundObjects,this)?b.enable():b.disable())},this)},bind:function(a){this.boundObjects.containsKey(a.getId())||(this.boundObjects.length==0&&this.updateFields(a),this.boundObjects.add(a.getId(),a),this.mon(a,"change",this.updateFieldsHandler,this),this.updateDynamicFields())},unbind:function(a){a?this.boundObjects.containsKey(a.getId())&&(this.boundObjects.removeAtKey(a.getId()),this.mun(a,"change",this.updateFieldsHandler,this)):this.boundObjects.clear(),this.updateDynamicFields()},destroy:function(){Ext.each(this.tips,function(a){a.destroy()}),App.ui.BoundObjectPanel.superclass.destroy.apply(this,arguments)}});
Ext.define("Workspace.objects.dna.Exposure",{extend:"Workspace.objects.Connection",showLabel:!1,property:"exposure",render:function(){this.callParent(),this.set("strokeWidth",1.5),this.set("stroke","#aaa"),this.set("strokeDashArray","- "),this.set("arrowEnd","classic-wide-long")},strokeWidth:1.5,arrowEnd:"classic-wide-long",stroke:"#999",acceptLeft:function(a){var b=a.getParent();return a.getId&&a.isWType(["Workspace.objects.dna.OutputPort","Workspace.objects.dna.BridgePort","Workspace.objects.dna.InputPort"])&&b&&b.hasParent()},acceptRight:function(a){var b=a.getParent();return a.getId&&a.isWType(["Workspace.objects.dna.OutputPort","Workspace.objects.dna.BridgePort","Workspace.objects.dna.InputPort"])&&b&&b.isWType("Workspace.objects.dna.Motif")},canConnect:function(a,b){var c=a.getParent(),d=b.getParent();return a.hasWType(b.wtype)&&c&&d&&c.getParent()==d}},function(){Workspace.reg("Workspace.objects.dna.Exposure",Workspace.objects.dna.Exposure)});
Ext.define("App.ui.nodal.StrandPreview",{extend:"App.ui.ProtovisPanel",viewBox:!0,built:!1,adjacencyMode:2,labelBases:!1,setValue:function(a){a?(this.adjacencyMode==2?this.nodeLayout=DNA.generateAdjacency2(a,{linkStrands:!0}):this.nodeLayout=DNA.generateAdjacency(a,["A"],!0),this.built?(this.force.reset(),this.force.nodes(this.nodeLayout.nodes).links(this.nodeLayout.links)):this.buildVis(),this.vis.render()):(this.force.reset(),this.vis.render())},buildVis:function(){this.getCanvas();var a=this.vis;a.fillStyle("white"),colors=pv.Colors.category10(),probColors=pv.Scale.linear(0,.5,1).range("rgba(0,0,180,1)","rgba(180,180,0,1)","rgba(180,0,0,1)"),this.force=a.add(pv.Layout.Force).chargeConstant(-250).springConstant(.95).dragConstant(.4).bound(!1),this.force.nodes(this.nodeLayout.nodes).links(this.nodeLayout.links),this.adjacencyMode==2?(this.force.link.add(pv.Line).strokeStyle(function(a,b){return b.probability?probColors(b.probability):"rgba(0,0,0,0.2)"}),this.force.node.add(pv.Dot).size(function(a){return 10}).fillStyle(function(a){return App.dynamic.Compiler.domainColors[a.role]||"#000"}).strokeStyle(function(){return this.fillStyle().darker()}).lineWidth(1).title(function(a){return a.nodeName}).event("mousedown",pv.Behavior.drag()).event("drag",this.force),this.labelBases&&this.force.label.add(pv.Label).text(function(a,b){return a.base})):(force.link.add(pv.Line).strokeStyle(function(a,b){return b.probability?probColors(b.probability):"rgba(0,0,0,0.2)"}),force.node.add(pv.Dot).size(function(a){return 10}).fillStyle(function(a){return a.fix?"brown":colors(a.strand)}).strokeStyle(function(){return this.fillStyle().darker()}).lineWidth(1).title(function(a){return a.nodeName})),this.built=!0}});
Ext.define("App.ui.Palette",{extend:"Ext.panel.Panel",store:null,tpl:"",itemSelector:"",overItemClass:"x-view-over",trackOver:!0,mimeType:"",initComponent:function(){Ext.apply(this,{items:[{xtype:"dataview",store:this.store,tpl:this.tpl,itemSelector:this.itemSelector,overItemClass:this.overItemClass,trackOver:this.trackOver,itemId:"view"}]}),this.callParent(arguments),this.view=this.getComponent("view"),this.view.on("refresh",function(){this.onRefresh()},this),this.view.on("render",function(a){this.dragZone=new Ext.dd.DragZone(a.getEl(),{mimeType:this.mimeType,getDragData:function(b){var c=b.getTarget(a.itemSelector,10);if(c)return d=c.cloneNode(!0),d.id=Ext.id(),{ddel:d,sourceEl:c,repairXY:Ext.fly(c).getXY(),sourceStore:a.store,draggedRecord:a.getRecord(c),mimeType:this.mimeType}},getRepairXY:function(){return this.dragData.repairXY}})},this)}});
Ext.define("App.ui.FillStrokeTab",{extend:"App.ui.BoundObjectPanel",initComponent:function(){Ext.apply(this,{tbar:[{xtype:"buttongroup",title:"Fill",columns:1,defaults:{cellCls:"table-cell-padded"},items:[new Ext.ux.ColorField({ref:"../../fillColorField",objectBinding:"fill",anchor:"left",width:100,tooltip:{title:"Fill Color",text:"Color of the object's background (fill)."},cellCls:"table-cell-padded-right"}),{ref:"../../fillOpacityField",xtype:"slider",objectBinding:"fillOpacity",objectBindingEvent:"changecomplete",minValue:0,maxValue:1,decimalPrecision:2,animate:!0,plugins:new Ext.slider.Tip({getText:function(a){return String.format("{0}%",a.value*100)}}),cellCls:"table-cell-padded-right",width:100,tooltip:{title:"Fill Opacity",text:"Opacity/transparency of the stroke."}}]},{xtype:"buttongroup",title:"Stroke",columns:2,defaults:{cellCls:"table-cell-padded"},items:[new Ext.ux.ColorField({ref:"../../strokeColorField",anchor:"left",objectBinding:"stroke",width:100,tooltip:{title:"Stroke Color",text:"Color of the object's outline (stroke)."}}),{ref:"../../strokeTypeField",xtype:"combo",objectBinding:"strokeDasharray",store:new Ext.data.ArrayStore({fields:["name","dash_array"],data:[["solid",""],["dashed","--"],["dashed","-"],["dashed","- "],["dotted","."],["dotted",". "],["dashed/dotted","-."],["dashed/dotted","-.."],["dashed/dotted","- ."],["dashed/dotted","--."],["dashed/dotted","--.."]]}),tpl:new Ext.XTemplate('<tpl for="."><div class="x-combo-list-item">',"<span>{name}</span>&nbsp;(<var>{dash_array}</var>)","</div></tpl>"),valueField:"dash_array",displayField:"dash_array",typeAhead:!0,mode:"local",forceSelection:!0,triggerAction:"all",selectOnFocus:!0,width:100,tooltip:{title:"Stroke Type",text:"Style of the stroke (solid, dashed, etc.)."},cellCls:"table-cell-padded-right"},{ref:"../../strokeOpacityField",xtype:"slider",objectBinding:"strokeOpacity",objectBindingEvent:"changecomplete",minValue:0,maxValue:1,decimalPrecision:2,animate:!0,plugins:new Ext.slider.Tip({getText:function(a){return String.format("{0}%",a.value*100)}}),width:100,tooltip:{title:"Stroke Opacity",text:"Opacity/transparency of the stroke."}},{ref:"../../strokeWidthField",xtype:"slider",objectBinding:"strokeWidth",objectBindingEvent:"changecomplete",minValue:0,maxValue:10,decimalPrecision:1,increment:.5,animate:!0,plugins:new Ext.slider.Tip({getText:function(a){return String.format("{0} px",a.value)}}),width:100,cellCls:"table-cell-padded-right",tooltip:{title:"Stroke Width",text:"Width of the object's outline (stroke)."}}]}]}),App.ui.FillStrokeTab.superclass.initComponent.apply(this,arguments)}});
Ext.define("App.ui.GeometryTab",{extend:"App.ui.BoundObjectPanel",initComponent:function(){Ext.apply(this,{tbar:[{xtype:"buttongroup",title:"Position",columns:1,defaults:{cellCls:"table-cell-padded"},items:[{ref:"../../xField",fieldLabel:"X",objectBinding:"x",xtype:"numberfield",width:100,tooltip:{title:"x position",text:"The object's x position"}},{ref:"../../yField",fieldLabel:"Y",objectBinding:"y",xtype:"numberfield",width:100,tooltip:{title:"y position",text:"The object's y position"}}]},{xtype:"buttongroup",title:"Dimensions",columns:1,defaults:{cellCls:"table-cell-padded"},items:[{ref:"../../widthField",fieldLabel:"Width",objectBinding:"width",xtype:"numberfield",width:100,tooltip:{title:"Width",text:"The object's width"}},{ref:"../../heightField",fieldLabel:"Height",objectBinding:"height",xtype:"numberfield",width:100,tooltip:{title:"Height",text:"The object's height"}}]}]}),App.ui.GeometryTab.superclass.initComponent.apply(this,arguments)},afterrender:function(){var a=[this.xField,this.tField,this.widthField,this.heightField];this.tips=[],Ext.each(a,function(a){if(a.tooltip){var b=a.tooltip;b.text&&!b.html&&(b.html=b.text),b.target=a.getEl(),this.tips.push(new Ext.ToolTip(b))}},this)}});
Ext.define("App.ui.MetaTab",{extend:"App.ui.BoundObjectPanel",initComponent:function(){Ext.apply(this,{tbar:[{xtype:"buttongroup",title:"Name",columns:1,defaults:{cellCls:"table-cell-padded"},items:[{ref:"../../nameField",fieldLabel:"Name",objectBinding:"name",xtype:"textfield",width:200,tooltip:{title:"Name",text:"The object's name"}},{ref:"../../typeField",xtype:"combo",objectBinding:"wtype",store:Workspace.Components.getTypeStore(),tpl:new Ext.XTemplate('<tpl for="."><div class="x-combo-list-item">','<img src="'+Ext.BLANK_IMAGE_URL+'" class="combo-icon {iconCls}" />&nbsp;<span>{wtype}</span>',"</div></tpl>"),valueField:"wtype",displayField:"wtype",typeAhead:!0,mode:"local",forceSelection:!0,triggerAction:"all",selectOnFocus:!0,width:200,tooltip:{title:"Type",text:"The object type."},cellCls:"table-cell-padded-right"}]},{xtype:"buttongroup",title:"Properties",columns:1,defaults:{cellCls:"table-cell-padded"},items:[]}]}),App.ui.MetaTab.superclass.initComponent.apply(this,arguments)},afterrender:function(){var a=[this.nameField];this.tips=[],Ext.each(a,function(a){if(a.tooltip){var b=a.tooltip;b.text&&!b.html&&(b.html=b.text),b.target=a.getEl(),this.tips.push(new Ext.ToolTip(b))}},this)}});
Ext.define("Workspace.objects.secondary.Complementarity",{extend:"Workspace.objects.Connection",showLabel:!1,property:"complementarity",render:function(){this.callParent(),this.set("strokeWidth",1.5),this.set("stroke","#aaa"),this.set("arrowEnd","classic-wide-long")},strokeWidth:1.5,arrowEnd:"classic-wide-long",stroke:"#999",acceptLeft:function(a){return a.getId&&a.isWType("Workspace.objects.secondary.Domain")},acceptRight:function(a){return a.getId&&a.isWType("Workspace.objects.secondary.Domain")},canConnect:function(a,b){return!0}},function(){Workspace.reg("Workspace.objects.secondary.Complementarity",Workspace.objects.secondary.Complementarity)});
Ext.define("Workspace.tools.IdeaAdderTool",{constructor:function(){Workspace.tools.IdeaAdderTool.superclass.constructor.apply(this,arguments)},extend:"Workspace.tools.BaseTool",mixins:{highlightable:"Workspace.tools.Highlightable"},click:function(a,b){b&&b.wtype=="Workspace.IdeaObject"&&(this.workspace.doAction(new Workspace.Actions.AdoptObjectAction({subjects:this.workspace.getSelection(),parent:b})),this.workspace.changeTool("pointer"))},dblclick:function(a,b){},mousedown:function(a,b){},mouseup:function(a,b){},mousemove:function(a,b){},accept:function(a){return a&&a.wtype=="Workspace.IdeaObject"&&a.highlight},mouseover:function(a,b){this.mixins.highlightable.mouseover.apply(this,arguments)},mouseout:function(a,b){this.mixins.highlightable.mouseout.apply(this,arguments)},deactivate:function(a,b){this.workspace.deselect()}},function(){Workspace.Tools.register("idea-add",Workspace.tools.IdeaAdderTool)});
Ext.define("App.ui.BasePicker",{alias:"widget.basepicker",extend:"Ext.ux.form.field.BoxSelect",displayField:"base",valueField:"value",multiSelect:!0,queryMode:"local",constructor:function(){this.store=Ext.create("Ext.data.Store",{fields:[{name:"base",type:"string"},{name:"value",type:"int"}],data:[{base:"G",value:8},{base:"A",value:4},{base:"T",value:2},{base:"C",value:1}]}),this.callParent(arguments)},getAggregate:function(){var a=this.getValue();return _.reduce(a,function(a,b){return a+parseInt(b)},0)},setAggregate:function(a){a=parseInt(a);var b=[a&8,a&4,a&2,a&1];b=_.compact(b),this.setValue(b)}});
Ext.define("Workspace.objects.Ellipse",{constructor:function(a,b){Workspace.objects.Ellipse.superclass.constructor.call(this,a,b)},extend:"Workspace.objects.VectorObject",alias:"Workspace.VectorEllipseObject",wtype:"Workspace.objects.Ellipse",name:"New Ellipse",iconCls:"ellipse",shape:"ellipse",isResizable:!0,x:0,y:0,width:0,height:0,render:function(){this.arguments=[this.get("x")+this.getRadiusX(),this.get("y")+this.getRadiusY(),this.getRadiusX(),this.getRadiusY()],Workspace.objects.Ellipse.superclass.render.call(this)},getRadiusX:function(){return this.getWidth()/2},getRadiusY:function(){return this.getHeight()/2},getCenterX:function(){return this.getX()+this.getRadiusX()},getCenterY:function(){return this.getY()+this.getRadiusY()},updateX:function(a){Workspace.objects.VectorObject.superclass.updateX.apply(this,arguments),this.vectorElement.attr({cx:a+this.getRadiusX()})},updateY:function(a){Workspace.objects.VectorObject.superclass.updateY.apply(this,arguments),this.vectorElement.attr({cy:a+this.getRadiusY()})},updateWidth:function(a){this.vectorElement.attr({rx:this.getRadiusX()}),this.updateX(this.getX())},updateHeight:function(a){this.vectorElement.attr({ry:this.getRadiusY()}),this.updateY(this.getY())}},function(){Workspace.reg("Workspace.objects.Ellipse",Workspace.objects.Ellipse)});
Ext.define("Workspace.tools.EllipseTool",{constructor:function(a,b){this.workspace=a,Ext.apply(this,b,{parameters:{}}),Workspace.tools.EllipseTool.superclass.constructor.call(this,a,b),Ext.apply(this.parameters,App.Stylesheet.Draw),this.dragging=!1,this.proto=!1,this.x1=0,this.y1=0},require:["Workspace.objects.Ellipse"],extend:"Workspace.tools.BaseTool",click:function(a,b){a.stopEvent()},dblclick:function(a,b){a.stopEvent()},mousedown:function(a,b){this.dragging=!0,this.proto&&(this.proto.remove(),delete this.proto),this.createProto(a)},mouseup:function(a,b){this.dragging=!1;if(this.proto){var c=this.getAdjustedXY(a);this.x2=c.x,this.y2=c.y;var d=Workspace.tools.SelectorBand.calculateBandBox(this.x1,this.y1,this.x2,this.y2),e=this.workspace.createObject(Workspace.VectorEllipseObject,{x:d.x,y:d.y,width:d.width,height:d.height,fill:this.parameters.fill,stroke:this.parameters.stroke});return this.workspace.setSelection([e]),this.proto.remove(),delete this.proto,!1}},mousemove:function(a,b){if(this.dragging){this.proto||this.createProto(a);var c=this.getAdjustedXY(a);this.x2=c.x,this.y2=c.y;var d=Workspace.tools.SelectorBand.calculateBandBox(this.x1,this.y1,this.x2,this.y2),e={cx:d.x+d.width/2,cy:d.y+d.height/2,rx:d.width/2,ry:d.height/2};this.x=d.x,this.y=d.y,this.width=d.width,this.height=d.height,this.anchor=d.anchor,delete d.anchor,this.proto.attr(e)}},createProto:function(a){var b=this.getAdjustedXY(a);this.x1=b.x,this.y1=b.y,this.proto=this.workspace.paper.ellipse(this.x1,this.y1,0,0),this.proto.attr(this.parameters)}},function(){Workspace.Tools.register("ellipse",Workspace.tools.EllipseTool)});
Ext.define("Workspace.objects.SegmentedPath",{extend:"Workspace.objects.Path",strokeWidth:10,stroke:"#000",strokeOpacity:.5,strokeLinecap:"round",strokeLinejoin:"round",childWType:"Workspace.objects.Path",constructor:function(){this.callParent(arguments),this.indexedChildren=[]},addChild:function(a){this.callParent(arguments),a.expose("index",!0,!0,!0,!1),a.on("change:points",this.childChangePoints,this),a.on("change:path",this.childChangePath,this),this.indexedChildren[a.get("index")]=a},removeChild:function(a){this.callParent(arguments),a.un("change:points",this.childChangePoints,this);var b=a.get("index"),c=this.get("points");c.splice(b,1),this.indexedChildren.splice(b,1);for(var d=b;d<this.indexedChildren.length;d++)this.indexedChildren[d].set("index",d);this.set("points",c)},render:function(){this.callParent(arguments),this.toBack()},childChangePath:function(){!this.ignoreChangeChildPoints&&!this.ignoreChangeChildPath&&(this.ignoreChangeChildPath=!0,this.buildPath(),this.ignoreChangeChildPath=!1)},childChangePoints:function(a,b,c){if(!this.ignoreChangeChildPoints){var d=this.get("points");d[c.index]=a[0],d[c.index+1]=a[1],this.set("points",d)}},buildPath:function(){var a=this.get("points"),b,c,d,e=[];if(this.children.getCount()>0){if(this.children.getCount()==a.length-1)for(var f=0,g=a.length-1;f<g;f++)b=a[f],c=a[f+1],d=this.indexedChildren[f],this.ignoreChangeChildPoints=!0,d.set("points",[b,c]),this.ignoreChangeChildPoints=!1,e.push(d.interpolate(d.get("points")));this.set("path",e.join(" "))}else{for(var f=0,g=a.length-1;f<g;f++)b=a[f],c=a[f+1],d=this.makeChild({points:[b,c]}),e.push(d.interpolate(d.get("points")));this.set("path",e.join(" "))}},addPoint:function(a,b){var c,d,e,f=this.get("points");b>0&&(c=this.indexedChildren[b-1],c.set("points",[f[b],a])),e=this.makeChild(),b<this.indexedChildren.length&&(c=this.indexedChildren[b],c.set("points",[a,f[b+1]])),f.splice(b,0,a),this.set("points",f)},deletePoint:function(a){},makeChild:function(a){var b=this.workspace.createObject(Ext.apply(a||{},{wtype:this.childWType,strokeWidth:4,stroke:"#aaa",fillOpacity:0,index:this.getNextIndex(),showTitle:!0}));return this.addChild(b),this.is("rendered")&&b.insertAfter(this),b},getSegment:function(a){return this.indexedChildren(a)},getNextIndex:function(){return this.indexedChildren.length},childCanMove:function(){return!1}},function(){Workspace.reg("Workspace.objects.SegmentedPath",Workspace.objects.SegmentedPath)});
Workspace.ConnectionLabel={},Ext.define("Workspace.ConnectionLabel",{extend:"Workspace.Label",constructor:function(){Ext.applyIf(this,{elementSpec:{tag:"div",cls:"workspace-label-center"},offsets:[0,0]}),Workspace.ConnectionLabel.superclass.constructor.apply(this,arguments)},render:function(){this.callParent(arguments)},onMove:function(){if(this.object){var a=this.object.getEl();if(a){var b=this.getEl();b.position("absolute"),this.updateSize(this.object.get(this.property)),b.setLeftTop(this.object.getX()+this.object.getWidth()/2-b.getWidth()/2+this.offsets[0],this.object.getY()+this.object.getHeight()/2-b.getHeight()/2+this.offsets[1])}}},updateSize:function(){this.callParent(arguments)}});
Ext.define("Workspace.objects.dna.NodePort",{requires:["Workspace.objects.Ellipse","Workspace.ConnectionLabel"],constructor:function(){this.expose("dynaml",!0,!0,!0,!1),this.expose("role",!0,!0,!0,!1),this.expose("identity",!0,!0,!0,!1),this.expose("type",!0,!0,!0,!1),this.expose("polarity",!0,!0,!0,!1),this.expose("exposure",!0,!0,!0,!1),this.expose("computedPolarity",function(){var a=this.getLibraryObject();return a?a.getAbsolutePolarity():0},!1,!1,!1),this.workspace.buildManager&&this.workspace.buildManager.on("rebuild",this.onRebuild,this)},role:"",fill:"#fff",strokeWidth:2,isResizable:!1,preventDragSelect:!0,render:function(){this.addShim(Ext.create("Workspace.ConnectionLabel",{cls:"workspace-label-plain-small workspace-label-port",offsets:[0,4],property:"computedPolarity",editable:!1,format:function(a){return a==1?"+":a==-1?"-":"0"}}))},highlightError:function(){this.errorProxy||(this.errorProxy=this.getHighlightProxy(),this.errorProxy.stroke="#aa0000"),this.errorProxy.render(this.vectorElement),this.errorProxy.attachTo(this),this.errorProxy.show()},hideError:function(){this.errorProxy&&this.errorProxy.hide()},onRebuild:function(){this.change("computedPolarity",this.get("computedPolarity"))},getRealtime:function(a){var b=this.getLibraryObject();return b?b[a]:!1},getLibraryObject:function(){if(this.parent&&this.getParent().isWType("Workspace.objects.dna.Node")){var a=this.parent.getLibraryObject(),b=this.get("name");if(a){var c=_.find(a.getDomains(),function(a){return a.getName()==b});return c}}return null}},function(){Workspace.objects.dna.NodePort.borrow(Workspace.objects.Ellipse,["getRadiusX","getRadiusY","getCenterX","getCenterY"])});
Ext.define("Workspace.idea.BaseLayout",{constructor:function(a){Workspace.idea.BaseLayout.superclass.constructor.apply(this,arguments),Ext.apply(this,a),this.defaultChildConfig={wtype:this.defaultChildType,width:100,height:100}},extend:"Ext.util.Observable",resizable:!0,childrenResizable:!0,childrenMovable:!0,defaultChildType:"Workspace.RichTextObject",doLayout:function(){},doFirstLayout:function(){this.doLayout()},addNextChild:function(){this.idea.addChild(this.idea.workspace.createChild(this.defaultChildConfig))},destroy:function(){this.fireEvent("destroy",this),delete this.idea},getObjects:function(){if(this.idea)return this.idea.children;if(this.objects)return this.objects}});
Ext.define("Workspace.objects.secondary.Domain",{extend:"Workspace.objects.Path",identity:"",polarity:0,shimConfig:{property:"identifier"},fillOpacity:0,baseRadius:3,baseSpacing:10,bulgeRadius:0,bulgeWidth:0,angle:function(a,b,c,d){return Math.atan2(d-b,c-a)},constructor:function(){this.callParent(arguments),this.on("move",this.testProximity,this),this.oldMatches=[],this.expose("identifier",function(){return this.workspace.complementarityManager.getIdentifier(this)},!1,!1,!1),this.expose("identity",function(){return this.workspace.complementarityManager.getIdentity(this)},function(a){this.identity=this.workspace.complementarityManager.checkoutIdentity(this,a)},!0,!1),this.expose("polarity",!0,!0,!0,!1),this.expose("complementarities",function(){return this.workspace.complementarityManager.getComplementary(this.get("identifier"))},!1,!1,!1),this.expose("stroke",function(){return this.workspace.complementarityManager.getColor(this.get("identity"))},function(a){this.workspace.complementarityManager.setColor(this.get("identity"),a)},!0,!0,!1),this.expose("arc",function(){var a=this.get("leftPoint"),b=this.get("rightPoint");return Math.atan2(b[1]-a[1],b[0]-a[0])},!1,!1,!1),this.expose("leftPoint",function(){return this.points[0]},function(a){var b=this.get("points");b[0]=b,this.set("points",b)},!1,!1),this.expose("rightPoint",function(){return _.last(this.points)},function(a){var b=this.get("points");b.pop(),b.push(a),this.set("points",b)},!1,!1),this.expose("length",function(){var a=this.get("path");return Raphael.getTotalLength(a)},!1,!1,!1),this.expose("hybridized",!0,!0,!0,!1),this.expose("bulgeRadius",!0,!0,!0,!1),this.expose("bulgeWidth",!0,!0,!0,!1),this.on("change:bulgeRadius",this.buildPath,this),this.on("change:bulgeWidth",this.buildPath,this),this.on("change:identity",function(a,b){this.change("identifier",this.get("identifier"),this.workspace.complementarityManager.makeIdentifier(b,this.get("polarity"))),this.change("stroke",this.get("stroke"))},this),this.on("change:polarity",function(a,b){this.change("identifier",this.get("identifier"),this.workspace.complementarityManager.makeIdentifier(this.get("identity"),b)),this.change("stroke",this.get("stroke"))},this),this.on("change:stroke",function(){this.updateBases()},this),this.segmentBases=[]},interpolator:function(a){if(this.bulgeRadius){var b=App.Geom.Point.fromMixed(a[0]),c=App.Geom.Point.fromMixed(a[1]),d=b.midpoint(c),e=d.addPolar(b.angle(c)+Math.PI/2,this.bulgeRadius),f=Math.abs(this.get("bulgeRadius")),g=e.addPolar(b.angle(c),-f),h=e.addPolar(b.angle(c),f);return["C",g.x,",",g.y," ",h.x,",",h.y," ",c.x,",",c.y].join("")}return Workspace.objects.Interpolators.linear(a)},initialize:function(){this.workspace.complementarityManager.checkoutIdentity(this,this.get("identity"));var a=this.get("rightPoint");a.length>2&&(this.set("bulgeRadius",-a[2]),this.set("rightPoint",a.slice(0,2))),this.callParent(arguments)},render:function(){this.callParent(arguments),this.updateBases()},countBases:function(a){return Math.floor(a/this.baseSpacing)},nextPosition:function(a,b,c){return{x:a.x+Math.cos(b)*c,y:a.y+Math.sin(b)*c}},pointToPos:function(a){return{x:a[0],y:a[1]}},hybridize:function(a){var b=this.get("hybridized");b&&b.getId()!=a.getId()?this.unhybridize():(this.set("hybridized",a),a.on("change:points",this.hybridizedChangePoints,this))},unhybridize:function(){var a=this.get("hybridized");a&&domain.un("change:points",this.hybridizedChangePoints,this)},hybridizedChangePoints:function(a,b){!!this.ignoreHybridizedChangePoints},makeBase:function(){var a=this.workspace.paper.circle(0,0,this.baseRadius);return a.attr({fill:this.get("stroke"),stroke:this.get("stroke")}),a},updateBase:function(a,b,c){a.attr({cx:b,cy:c,fill:this.get("stroke"),stroke:this.get("stroke")})},updateBaseColor:function(a,b){a.attr({stroke:b})},updateBaseColors:function(){var a=this.get("length"),b=this.countBases(a),c=this.get("stroke");for(var d=0;d<b;d++)this.updateBaseColor(this.segmentBases[d],c)},updateBases:function(){if(this.is("rendered")){var a=this.get("length"),b=this.get("arc"),c=this.countBases(a);if(c>this.segmentBases.length)for(var d=0,e=c-this.segmentBases.length;d<e;d++)this.segmentBases.push(this.makeBase());else if(c<this.segmentBases.length)for(var d=0,e=this.segmentBases.length-c;d<e;d++){var f=this.segmentBases.pop();f.remove()}var g=this.baseSpacing/2,h=this.get("path");for(var d=0;d<c;d++)point=Raphael.getPointAtLength(h,g),this.updateBase(this.segmentBases[d],point.x,point.y),g+=this.baseSpacing}},updatePath:function(){this.callParent(arguments),this.updateBases()},testProximity:function(){function a(a,b){return Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2))}return!1;var b},destroy:function(){this.is("destroyed")||(_.each(this.bases,function(a){a.remove()}),delete this.bases)},constrain:function(a,b){return a}},function(){Workspace.reg("Workspace.objects.secondary.Domain",Workspace.objects.secondary.Domain)});
Ext.define("Workspace.tools.CodeMirrorTool",{constructor:function(a,b){Workspace.tools.CodeMirrorTool.superclass.constructor.call(this,a,b)},extend:"Workspace.tools.BaseTool",click:function(a,b){},dblclick:function(a,b){},mousedown:function(a,b){},mouseup:function(a,b){},mousemove:function(a,b){},attach:function(a){if(a.element){this.item=a;var b=this;return this.endEditFunction=function(){this.workspace.endEdit()},this.item.codemirror.setOption("onBlur",_.bind(this.endEditFunction,this)),this.item.updateCodeMirrorOption("readOnly",!1),this.item.codemirror.focus(),!0}return!1},detach:function(){this.item&&(this.item.codemirror.setOption("onBlur",null),this.item.set("text",this.item.codemirror.getValue()),this.item.updateCodeMirrorOption("readOnly","nocursor"),this.item=!1)},activate:function(){this.callParent(arguments)},deactivate:function(){this.callParent(arguments),this.detach()}},function(){Workspace.Tools.register("codemirror",Workspace.tools.CodeMirrorTool)});
Ext.define("Workspace.Shim",{constructor:function(a){Workspace.Shim.superclass.constructor.apply(this,arguments),Ext.applyIf(this,a,{elementSpec:{tag:"div",cls:"workspace-label"}})},extend:"Ext.util.Observable",position:"tl-bl?",animate:!1,passThroughEvents:!0,applyTo:function(a){a.getEl&&(this.object=a,a.on("move",this.onMove,this),a.on("hide",this.hide,this),a.on("show",this.show,this),a.on("destroy",this.destroy,this),a.is("rendered")?this.render():a.on("render",this.render,this,{single:!0}))},onMove:function(){if(this.object){var a=this.object.getEl();if(a){var b=this.getEl();b.position("absolute"),b.setLeftTop(this.object.getX()+this.offsets[0],this.object.getY()-b.getHeight()+this.offsets[1])}}},render:function(){this.element=this.object.workspace.addElement(this.elementSpec),this.element.position("absolute"),this.passThroughEvents&&(this.element.on("click",this.object.click,this.object),this.element.on("mousedown",this.object.mousedown,this.object),this.element.on("mouseup",this.object.mouseup,this.object),this.element.on("mouseover",this.object.mouseover,this.object),this.element.on("mouseout",this.object.mouseout,this.object))},getEl:function(){return this.element},hide:function(){this.element&&this.getEl().hide()},show:function(){this.element&&this.getEl().show()},destroy:function(){this.element&&Ext.destroy(this.element)}}),Ext.ux.LabelEditor={},Ext.define("Ext.ux.LabelEditor",{extend:"Ext.Editor",alignment:"tl-tl",hideEl:!1,shim:!1,completeOnEnter:!0,cancelOnEsc:!0,constructor:function(a){Ext.applyIf(a,{field:{xtype:"textfield",allowBlank:!1,growMin:90,growMax:240,grow:!0,selectOnFocus:!0}}),Ext.ux.LabelEditor.superclass.constructor.call(this,a)},attachTo:function(a,b){this.targetEl=a,this.renderEl=b,a.on("click",this.startEdit,this)},startEdit:function(){this.renderEl&&Ext.ux.LabelEditor.superclass.startEdit.call(this,this.targetEl)}});
Ext.define("Workspace.objects.ChemStructureObject",{constructor:function(a,b){this.callParent(arguments),Ext.apply(this.elementSpec,{tag:"div",cls:"chembox",children:[{tag:"canvas",id:this.getId()+"_sketcher"}]}),this.expose("mol",function(){var a=this.sketcher.getMolecule();return ChemDoodle.writeMOL(a)},function(a){var b=ChemDoodle.readMOL(a);this.sketcher.loadMolecule(b)},!0,!1)},extend:"Workspace.objects.ElementObject",wtype:"Workspace.objects.ChemStructureObject",name:"New Chemical Structure",iconCls:"chem",isEditable:!0,isSelectable:!0,isResizable:!0,padding:22,updateWidth:function(a){this.callParent(arguments),a-=this.padding,this.sketcher&&(this.sketcher.width=a),this.getCanvas().setWidth(a)},updateHeight:function(a){this.callParent(arguments),a-=this.padding,this.sketcher&&(this.sketcher.height=a),this.getCanvas().setHeight(a)},getCanvas:function(){return this.getEl().down("canvas")},render:function(){this.callParent(arguments);var a=this.getEl().down("canvas"),b=a.id;this.sketcher=new ChemDoodle.SketcherCanvas(b,this.getWidth()-this.padding,this.getHeight()-this.padding,null,ChemDoodle.featureDetection.supports_touch(),!0)},mousedown:function(a){if(a.getTarget().tagName.toLowerCase()=="canvas")return a.stopEvent(),!1;this.callParent(arguments)},destroy:function(){}},function(){Workspace.reg("Workspace.objects.ChemStructureObject",Workspace.objects.ChemStructureObject)});
Ext.define("Workspace.tools.ChemDrawTool",{constructor:function(a,b){Workspace.tools.CodeMirrorTool.superclass.constructor.call(this,a,b)},extend:"Workspace.tools.BaseTool",click:function(a,b){},dblclick:function(a,b){},mousedown:function(a,b){},mouseup:function(a,b){},mousemove:function(a,b){},attach:function(a){if(a.element){this.item=a;var b=this;return this.endEditFunction=function(){this.workspace.endEdit()},!0}return!1},detach:function(){this.item&&(this.item=!1)},activate:function(){this.callParent(arguments)},deactivate:function(){this.callParent(arguments),this.detach()}},function(){Workspace.Tools.register("codemirror",Workspace.tools.CodeMirrorTool)});
Ext.define("Workspace.tools.VectorHandle",{forceFront:!0,r:2,constructor:function(a,b){this.callParent(arguments),Ext.applyIf(this,{location:"tl"}),this.item&&this.item.vectorElement&&(this.vectorElement=this.item.vectorElement),this.addEvents(),this.item.on("change:points",this.onItemMove,this),this.item.on("move",this.onItemMove,this),this.item.on("resize",this.onItemMove,this),this.onItemMove()},extend:"Workspace.tools.Handle",drag:function(){},dragStartHandler:function(){this.callParent(arguments)},dragEndHandler:function(){if(this.dragging){var a=this.item.get("points"),b=this.snap(this.getPosition());a[this.index]=[b.x,b.y],this.item.set("points",a)}this.callParent(arguments)},getPoint:function(){return this.item?this.item.get("points")[this.index]:[0,0]},onItemMove:function(){this.move(this.getPoint())},move:function(a){this.setPosition(a[0],a[1])},snap:function(a){return this.constrain&&(a=this.constrain(a,this)),a},destroy:function(){this.callParent(arguments),this.item.un("move",this.onItemMove,this),this.item.un("resize",this.onItemMove,this),this.item.un("change:points",this.onItemMove,this)}});
Ext.define("App.ui.TextEditor",{extend:"Ext.panel.Panel",mixins:{app:"App.ui.Application"},requires:["App.ui.SaveButton","App.ui.CodeMirror"],mode:"",layout:"fit",editorType:"",constructor:function(a){this.callParent(arguments),this.mixins.app.constructor.apply(this,arguments)},initComponent:function(){Ext.applyIf(this,{tbar:["->",Ext.create("App.ui.SaveButton",{app:this})],items:[{xtype:"codemirror",itemId:"editor",border:!1,mode:this.mode}]}),this.callParent(arguments),this.editor=this.down(".codemirror"),this.on("afterrender",this.loadFile,this)},onLoad:function(){this.editor.setValue(this.data)},getSaveData:function(){return this.editor.getValue()},search:function(a){this.editor.search(a)},replace:function(a,b){this.editor.replace(a,b)},setValue:function(){return this.editor.setValue.apply(this.editor,arguments)},getValue:function(){return this.editor.getValue.apply(this.editor,arguments)},getSelection:function(){return this.editor.codemirror.getSelection()}});
Ext.define("App.ui.NupackEditor",{extend:"App.ui.TextEditor",iconCls:"nupack",editorType:"NUPACK",mode:"nupack",alias:"widget.nupack",requires:["App.ui.SequenceThreader","App.ui.NupackMenu"],showNupackButton:!0,showEditButton:!0,showSaveButton:!0,initComponent:function(){this.extraTbarItems=this.extraTbarItems||[];var a=this.extraTbarItems.concat([]);this.showNupackButton&&a.push({xtype:"splitbutton",ref:"nupackButton",text:"Open NUPACK",iconCls:"nupack-icon",handler:App.ui.Launcher.makeLauncher("nupack"),menu:Ext.create("App.ui.NupackMenu",{listeners:{designwindow:{fn:this.populateDesignWindow,scope:this}}})}),this.showEditButton&&a.push({text:"Edit",iconCls:"pencil",ref:"editButton",menu:[{text:"Thread segments to sequences",handler:this.threadStrands}]}),this.showSaveButton&&(a=a.concat(["->",Ext.create("App.ui.SaveButton",{app:this})])),Ext.apply(this,{tbar:a}),this.callParent(arguments)},populateDesignWindow:function(a,b){b.updateDesign(this.getValue())},threadStrands:function(){var a=Ext.create("App.ui.SequenceThreader");a.show(),a.setStrands(this.getSelection())}});
Ext.define("App.ui.JavascriptEditor",{extend:"App.ui.TextEditor",iconCls:"js",editorType:"JS",mode:"javascript",mixins:{refHelper:"App.ui.RefHelper"},initComponent:function(){Ext.applyIf(this,{tbar:[{text:"Run",iconCls:"run",ref:"runButton",xtype:"splitbutton",menu:this.buildAppMenu(),handler:function(){this.executeInContext(this)},scope:this},"->",Ext.create("App.ui.SaveButton",{text:"Save",iconCls:"save",app:this})],items:[{xtype:"codemirror",itemId:"editor",border:!1,mode:this.mode}]}),this.callParent(arguments),this.mixins.refHelper.init.apply(this),this.runButton.on("arrowclick",function(a){a.menu=this.buildAppMenu()},this)},buildAppMenu:function(){return App.ui.Launcher.getAppMenu(Ext.bind(function(a){this.executeInContext(a)},this))},executeInContext:function(a){App.ui.Launcher.console.executeInContext(this.getValue(),a,!0)}});
Ext.define("App.ui.SequenceEditor",{extend:"App.ui.TextEditor",mode:"sequence",mixins:{tips:"App.ui.TipHelper"},iconCls:"sequence",editorType:"Sequence",saveButtonText:"Save",requires:["App.ui.SequenceStats","App.ui.CompareMenu","App.ui.StatMenu","App.ui.SaveButton"],initComponent:function(){Ext.applyIf(this,{tbar:[{text:"Metrics",iconCls:"ruler",menu:{items:[{text:"Stats",menu:Ext.create("App.ui.SequenceStats",{ref:"statsPanel"}),tooltip:{anchor:"bottom",title:"Sequence Statistics",html:"Displays various statistics about the base composition of the sequence."},ref:"stats"},{text:"Levenshtein distance",tooltip:{anchor:"bottom",title:"Levenshtein distance",html:'The <a href="http://en.wikipedia.org/wiki/Levenshtein_distance">Levenshtein Distance</a> between two strings measures the minimum number of changes, or "edits" (insertions,  deletions, and substitutions) necessary two make the two strings equal.'},menu:Ext.create("App.ui.CompareMenu",{algorithm:DNA.levenshtein}),ref:"lev"},{text:"Hamming distance",tooltip:{anchor:"bottom",title:"Hamming Distance",html:'The <a href="http://en.wikipedia.org/wiki/Hamming_distance">Hamming Distance</a> between two strings of equal length measures the number of positions at which they are different; (i.e. it considers substitutions, but not insertions, deletions, or truncations.).'},menu:Ext.create("App.ui.CompareMenu",{algorithm:DNA.hamming,validate:function(a,b){return a.length==b.length}}),ref:"hamming"},{text:"Shannon Entropy",tooltip:{anchor:"bottom",title:"Shannon Entropy",html:'The <a href="http://en.wikipedia.org/wiki/Entropy_(information_theory)">Shannon Entropy</a> of a string measures the information complexity of that string. This can be used to approximate the base diversity in a sequence (higher is better).'},menu:Ext.create("App.ui.StatMenu",{labelText:"Calculate Shannon Entropy (∆S°)",baseText:"Shannon: ",algorithm:function(a){var b=0,c=0,d=0,e=0,f=0,g=0;a=a.trim();for(j=0;j<a.length;j++)f=a[j],f=="G"?b++:f=="A"?c++:f=="T"?d++:f=="C"&&e++;return b/=a.length,c/=a.length,d/=a.length,e/=a.length,g=-(b*(b>0?Math.log(b)/Math.LN2:0)+c*(c>0?Math.log(c)/Math.LN2:0)+d*(d>0?Math.log(d)/Math.LN2:0)+e*(e>0?Math.log(e/Math.LN2):0)),g}}),ref:"shannon"}]},scope:this},{text:"Transform",iconCls:"transform",tooltip:"",menu:[{text:"Reverse",iconCls:"arrow-reverse",handler:this.reverse,scope:this,tooltip:'Reverse the order of bases in each strand in the selection. If "Replace Selection" is unchecked, the reverse strands will be inserted below the originals.'},{text:"Complement",iconCls:"arrow-complement",handler:this.complement,scope:this,tooltip:'Insert the Watson-Crick complement of each base in each strand in the selection.If "Replace Selection" is unchecked, the complement strands will be inserted below the originals. <b>Note:</b> this will not reverse the order of the bases; to present the complement in the 5\'$rarr;3\' direction, use "Reverse Complement."'},{text:"Reverse Complement",iconCls:"arrow-reverse-complement",handler:this.reverseComplement,scope:this,tooltip:"Insert the Watson-Crick complement of each base in each strand in the selection, in the 5'$rarr;3' direction. If \"Replace Selection\" is unchecked, the complement strands will be inserted below the originals. "},{text:"Duplicate",handler:this.duplicate,scope:this,tooltip:'Duplicate strands in the selection. If "Replace Selection" is unchecked, each duplicate strand will be inserted below the original. '},{text:"Truncate",iconCls:"cutter",tooltip:"Remove bases from the beginning or end of strands in the selection",menu:[{text:"Bases to truncate: ",tooltip:"Use a positive number for 5' truncations, negative number for 3' truncations.",canActivate:!1},{xtype:"numberfield",ref:"truncationCount",indent:!0},{text:"Truncate",iconCls:"tick",handler:this.truncate,scope:this}]},{text:"Pairwise Align",iconCls:"pairwise-align",ref:"align",handler:this.pairwiseAlign,scope:this},{text:"Replace Selection",checked:!0,ref:"replaceSelection"}]},{text:"Format",iconCls:"pencil",tooltip:"Apply various formatting options to the selection.",menu:{items:[{text:"Strip extra characters",handler:this.stripExtra,scope:this,tooltip:"Removes characters other than A, T, C, G, U, and whitespace from the selection"},{text:"Strip whitespace",handler:this.stripWhitespace,scope:this,tooltip:"Removes whitespace characters (spaces, tabs, line returns) from the selection"},{text:"Strip newlines",handler:this.stripNewlines,scope:this,tooltip:"Removes line return characters from the selection"},{text:"Insert line breaks",handler:this.autoLineBreaks,scope:this,tooltip:"Replaces spaces in the selection with line returns"},{text:"Uppercase",handler:this.uppercase,scope:this,iconCls:"edit-uppercase",tooltip:"Converts the selection to uppercase"},{text:"Lowercase",handler:this.lowercase,scope:this,iconCls:"edit-lowercase",tooltip:"Converts the selection to lowercase"},{text:"Comment/Uncomment",handler:this.toggleComment,scope:this,iconCls:"comment",tooltip:"Adds/removes comment characters (# or %)"}]}},{text:"Export",iconCls:"document-export",tooltip:"Generate various input and output formats, or transform the strands for output",menu:{items:[{text:"To DNA",handler:this.convertToDNA,scope:this,iconCls:"document-d",tooltip:"Convert the selection to DNA"},{text:"To RNA",handler:this.convertToRNA,scope:this,iconCls:"document-r",tooltip:"Convert the selection to RNA"},"-",{iconCls:"seq",text:"Make DD input file",handler:this.insertDD,scope:this,tooltip:"Generates an input file for DD or WebDD which can be used to mutate the selected domains."},{text:"NUPACK out to FASTA",handler:this.nupackToFasta,scope:this,tooltip:'Convert NUPACK "M1 : ATCG..."-style labels to FASTA "M1> ATCG..."-style labels'},"-",{text:"Thread sequences to strand",handler:this.threadStrands,scope:this,tooltip:"Assemble the selected sequences into a set of strands using NUPACK strand-builder notation"},{text:"Name Strands",tooltip:"Automatically prepend a name to each of the strands in the selection",menu:[{text:"Strand name prefix: ",canActivate:!1},{xtype:"textfield",ref:"strandNamePrefix",indent:!0},{text:"Name Strands",iconCls:"tick",handler:this.nameStrands,scope:this}]},{iconCls:"prepend",text:"Prepend strands",tooltip:"Add a string to the beginning of each of the strands in the selection",menu:[{text:"Strand Prefix: ",canActivate:!1},{xtype:"textfield",ref:"strandPrefix",indent:!0},{text:"Prepend",iconCls:"tick",handler:this.prepend,scope:this}]}]}},{text:"Compute",iconCls:"calculator",tooltip:"Perform various thermodynamic calculations on the selection",menu:{items:[{text:"Calculate Partition Function...",handler:this.showPartitionWindow,scope:this,iconCls:"nupack-icon"},"-",{text:"MFE Complexes",iconCls:"nupack-icon",menu:Ext.create("App.ui.CreateMenu",{ref:"mfeMenu",labelText:"Save results to:",createText:"Run",extraMenuItems:["-",{xtype:"numberfield",minValue:1,allowBlank:!0,emptyText:"Max Complex Size",ref:"mfeMaxComplexSize",indent:!0},"-"],onCreateButton:Ext.bind(this.mfeComplexes,this),autoCreateMenu:!1})},{text:"Pairwise MFE Complexes",iconCls:"nupack-icon",menu:Ext.create("App.ui.CreateMenu",{ref:"mfeMenu",labelText:"Save results to:",createText:"Run",onCreateButton:Ext.bind(this.pairwiseMfeComplexes,this),autoCreateMenu:!1})},{text:"Subsets MFE Complexes",iconCls:"nupack-icon",menu:Ext.create("App.ui.CreateMenu",{ref:"subsetsMenu",labelText:"Save results to:",createText:"Run",extraMenuItems:["-",{xtype:"numberfield",minValue:1,allowBlank:!0,emptyText:"Max Complex Size",ref:"subsetsMaxComplexSize",indent:!0},{checked:!0,text:"Compare against WC complements",ref:"subsetsWC"},"-"],onCreateButton:Ext.bind(this.subsetsMfe,this),autoCreateMenu:!1})},"-",{text:"Brute Force",menu:[{text:"Target length: ",canActivate:!1},{xtype:"numberfield",ref:"brutePermCount",minValue:2,maxValue:6,indent:!0},{text:"Concatenations: ",canActivate:!1},{xtype:"numberfield",ref:"concatCount",minValue:0,indent:!0},{text:"Brute",iconCls:"tick",handler:this.bruteForce,scope:this}]}]}},"->",Ext.create("App.ui.SaveButton",{text:this.saveButtonText,iconCls:"save",app:this})],bbar:Ext.create("Ext.ux.statusbar.StatusBar",{ref:"statusBar",items:[{xtype:"tbtext",baseText:"Strands: ",text:"Strands: ",ref:"strandCount"},{xtype:"tbtext",baseText:"Bases: ",text:"Bases: ",ref:"baseCount"}]})}),this.callParent(arguments),_.each(this.query("*[ref]"),function(a){this[a.ref]=a},this),this.mixins.tips.init.apply(this,arguments),this.shannon.on("activate",this.populateShannon,this),this.hamming.on("activate",this.populateHamming,this),this.lev.on("activate",this.populateLev,this),this.stats.on("activate",this.populateStats,this),this.editor.on("cursorchange",this.updateStatusBar,this)},updateStatusBar:function(){var a=this.getSelectionOrValue();strandCount=_.compact(a.split("\n")).length,baseCount=a.replace(/[^atcgu]/gmi,"").length,this.strandCount.setText(this.strandCount.baseText+strandCount),this.baseCount.setText(this.baseCount.baseText+baseCount)},bruteForce:function(){function d(a,b){var c=[];return _.each(a,function(a){_.each(b,function(b){c.push(a+b)})}),c}function e(a,b,c){c||(c=["A","T","C","G"]),b||(b=["A","T","C","G"]);for(var e=1;e<a;e++)b=d(b,c);return b}function f(a,d){var f=e(d),g="",i={};for(var j=0;j<f.length;j++){g=DNA.reverseComplement(f[j]),i[f[j]]=0;for(var k=0;k<a.length;k++)a[k].indexOf(g)!=-1&&i[f[j]]++}var l=1e3,m=_.sortBy(_.map(i,function(a,b){return a<l&&(l=a),{sequence:b,interactions:a}}),function(a){return a.interactions}),n=_.compact(_.map(m,function(a){return a.interactions==l?a.sequence:!1})),o=c!=0?e(c,n,n):m,p=new DD,q;p.addDomains(a),p.evaluateAllScores(),q=_.map(o,function(a){return p.addDomains([a]),p.evaluateScores(p.getDomainCount()-1),{perm:a,score:p.popDomain()}}),q=_.sortBy(q,function(a){return a.score}),console.log(q);var r=Ext.create("Ext.window.Window",{width:650,height:400,maximizable:!0,items:[{xtype:"textareafield",region:"north",height:200,value:_.map(q,function(a){return a.perm+" : "+a.score}).join("\n"),split:!0},Ext.create("App.ui.ProtovisPanel",{length:d,strands:a,autoRender:!0,autoSize:!1,autoScroll:!0,region:"center",buildVis:function(){this.vis=this.getCanvas();var a=this.data;w=600,h=15*a.length,xScale=pv.Scale.linear(0,this.strands.length).nice().range(0,w),yScale=pv.Scale.ordinal(pv.range(0,a.length)).splitBanded(0,15*a.length,.8),this.vis.width(w).height(h).top(10).bottom(20).left(50).right(10);var b=this.vis.add(pv.Bar).data(a).top(function(){return yScale(this.index)}).height(yScale.range().band).left(0).width(function(a){return xScale(a.interactions)});b.anchor("right").add(pv.Label).textStyle("white").text(function(a){return a.interactions}),b.anchor("left").add(pv.Label).textMargin(5).textAlign("right").text(function(a){return a.sequence})},data:m})],layout:"border",title:"Brute force "+b+"-mer search"});r.show(),console.log(m)}var a=this.smartSelect(),b=this.brutePermCount.getValue(),c=this.concatCount.getValue();f(a,b)},threadStrands:function(){var a=Ext.create("App.ui.SequenceThreader",{});a.show(),a.setSequences(this.getSelection())},showPartitionWindow:function(){this.partitionWindow||(this.partitionWindow=Ext.create("App.ui.nupack.PartitionWindow",{renderTo:Ext.getBody()})),this.partitionWindow.updateStrands(this.getValue()),this.partitionWindow.show()},subsetsMfe:function(a){var b=this.smartSelect(),c=b.length;c=this.subsetsMaxComplexSize.getValue(),c=Ext.isNumber(c)?c:2,wc=this.subsetsWC.checked,App.runTask("nupack.Subsets",{node:App.Path.sameDirectory(this.getPath(),a),strands:b,maxComplex:c,wc:wc})},pairwiseMfeComplexes:function(a){var b=this.smartSelect(),c=b.length;App.runTask("nupack.Pairwise",{node:App.Path.sameDirectory(this.getPath(),a),strands:b})},mfeComplexes:function(a){var b=this.smartSelect(),c=this.mfeMaxComplexSize.getValue();c=Ext.isNumber(c)?c:b.length,App.runTask("nupack.Analysis",{node:App.Path.sameDirectory(this.getPath(),a),strands:b,max:c})},populateStats:function(){this.statsPanel.loadSequence(this.getSelectionOrValue().replace(/[^atcgu]/gi,""))},getSelectionOrValue:function(){var a=this.editor.codemirror.getSelection();return a==""&&(a=this.editor.getValue()),a},toggleComment:function(){var a=this.smartSelect();a=_.map(a,function(a){return a.trim()[0]=="#"||a.trim()[0]=="%"?a=a.trim().substr(1):a="#"+a,a}),a=a.join("\n"),this.editor.codemirror.replaceSelection(a)},truncate:function(){var a=this.smartSelect(),b=this.truncationCount.getValue();a=_.map(a,function(a){return b>0?a.substr(b):a.substr(0,a.length+b)}),a=a.join("\n"),this.editor.codemirror.replaceSelection(a)},nameStrands:function(){var a=this.smartSelect(),b=this.strandNamePrefix.getValue(),c=0;!!b||(b=""),a=_.map(a,function(a){return c++,b+c+" : "+a}),a=a.join("\n"),this.editor.codemirror.replaceSelection(a)},prepend:function(){var a=this.smartSelect(),b=this.strandPrefix.getValue(),c=0;!!b||(b=""),a=_.map(a,function(a){return b+a}),a=a.join("\n"),this.editor.codemirror.replaceSelection(a)},nupackToFasta:function(){this.replace(new RegExp("\\t\\n","gm"),"\n>"),this.replace(new RegExp("\\t","g"),"\n")},insertDD:function(){this.replace(Ext.bind(this.makeDD,this))},makeDD:function(a){a=a.replace(/[^atcgu\s]/gi,"");var b=_.map(a.split("\n"),function(a){return a.trim()}),c=b.length.toString()+"\n";return _.each(b,function(a){c+=a+" 1 15\n"}),"# Save the following as an input file for DD:\n"+c},replace:function(a,b){var c=this.editor.codemirror.getSelection(),d;c==""?(c=this.editor.getValue(),a.test?d=c.replace(a,b):Ext.isFunction(a)&&(d=a(c)),this.editor.setValue(d)):(a.test?d=c.replace(a,b):Ext.isFunction(a)&&(d=a(c)),this.editor.codemirror.replaceSelection(d))},uppercase:function(){this.replace(function(a){return a.toUpperCase()})},lowercase:function(){this.replace(function(a){return a.toLowerCase()})},convertToDNA:function(){this.replace(/u/g,"t"),this.replace(/U/g,"T")},convertToRNA:function(){this.replace(/t/g,"u"),this.replace(/T/g,"U")},autoLineBreaks:function(){this.replace(/s/gm,"\n")},stripExtra:function(){this.strip(/[^atcgu\s]/gi)},stripWhitespace:function(){this.strip(/\s/gm)},stripNewlines:function(){this.strip(new RegExp("\\n","gm"))},strip:function(a){this.replace(a,"")},pairwiseAlign:function(){var a=this.smartSelect(),b=DNA.pairwiseAlign(a[0],a[1],2,-1,2,0,0);this.editor.codemirror.replaceSelection(b.sequences.join("\n"))},transformByLine:function(a){var b=this.editor.codemirror.getSelection(),c=this.replaceSelection.checked,d;b=b.split("\n"),d=_.map(b,function(b){return a(b.trim())}),c||(d=_.map(_.zip(b,d),function(a){return a.join("\n")})),this.editor.codemirror.replaceSelection(d.join("\n"))},duplicate:function(){this.transformByLine(function(a){return a+a})},reverse:function(){this.transformByLine(DNA.reverse)},complement:function(){this.transformByLine(DNA.complement)},reverseComplement:function(){this.transformByLine(DNA.reverseComplement)},populateShannon:function(){var a=this.shannon.menu;sel=this.editor.codemirror.getSelection(),sel!=""&&a.populate(sel)},populateHamming:function(){this.populateComparison(this.hamming)},populateLev:function(){this.populateComparison(this.lev)},getSelection:function(){return this.editor.codemirror.getSelection()},smartSelect:function(){return this.smartSplit(this.editor.codemirror.getSelection())},smartSplit:function(a){return a.indexOf("\n")!=-1?(a.replace(/(\r\n)/g,"\n"),a=a.split("\n")):a.indexOf("\t")!=-1?a=a.split("\t"):a.indexOf(" ")!=-1?a=a.split(" "):a=[a,""],_.map(a,function(a){return a.trim()})},populateComparison:function(a){var b=a.menu,c=this.editor.codemirror.getSelection();c!=""&&(c=this.smartSplit(c),b.populate(c[0],c[1]))}});
Ext.define("App.ui.Pepper",{extend:"App.ui.TextEditor",initComponent:function(){Ext.applyIf(this,{tbar:[{text:"Save",iconCls:"save",handler:function(){this.saveFile()},scope:this},{text:"Compile",iconCls:"compile",handler:function(){App.runTask("Pepper",{node:this.getPath()})},scope:this}]}),this.callParent(arguments)}});
Ext.define("Workspace.objects.dna.Complementarity",{extend:"Workspace.objects.Connection",showLabel:!1,property:"complementarity",thetaProperty:"rotation",render:function(){this.callParent(),this.set("strokeWidth",1.5),this.set("stroke","#aaa"),this.set("arrowEnd","classic-wide-long")},strokeWidth:1.5,arrowEnd:"classic-wide-long",stroke:"#999",acceptLeft:function(a){return a.getId&&a.isWType(["Workspace.objects.dna.OutputPort","Workspace.objects.dna.BridgePort"])},acceptRight:function(a){return a.getId&&a.isWType(["Workspace.objects.dna.InputPort","Workspace.objects.dna.BridgePort"])},canConnect:function(a,b){var c=a.getParent(),d=b.getParent();return(a.isWType("Workspace.objects.dna.OutputPort")&&b.isWType("Workspace.objects.dna.InputPort")||a.isWType("Workspace.objects.dna.BridgePort")&&b.isWType("Workspace.objects.dna.BridgePort"))&&(c&&d?c.getParent()==d.getParent():!1)}},function(){Workspace.reg("Workspace.objects.dna.Complementarity",Workspace.objects.dna.Complementarity)});
Ext.define("Workspace.tools.nodal.ComplementarityTool",{extend:"Workspace.tools.ConnectorTool",requires:["Workspace.objects.dna.Complementarity"],parameters:{"arrow-end":"classic-wide-long","stroke-dasharray":".",stroke:"#aaa","stroke-width":1.5},acceptLeft:function(){return Workspace.objects.dna.Complementarity.prototype.acceptLeft.apply(this,arguments)},acceptRight:function(){return Workspace.objects.dna.Complementarity.prototype.acceptRight.apply(this,arguments)},canConnect:function(){return Workspace.objects.dna.Complementarity.prototype.canConnect.apply(this,arguments)},onConnect:function(a,b,c){b.isWType("Workspace.objects.dna.BridgePort")&&c.isWType("Workspace.objects.dna.BridgePort")&&(a.setBoth=!0,a.updateProperty())},targetWType:"Workspace.objects.dna.Complementarity"},function(){Workspace.Tools.register("complementarity",Workspace.tools.nodal.ComplementarityTool)});
Ext.define("Workspace.tools.nodal.ExposureTool",{extend:"Workspace.tools.ConnectorTool",requires:["Workspace.objects.dna.Exposure"],parameters:{"arrow-end":"classic-wide-long","stroke-dasharray":".",stroke:"#aaa","stroke-width":1.5},acceptLeft:function(){return Workspace.objects.dna.Exposure.prototype.acceptLeft.apply(this,arguments)},acceptRight:function(){return Workspace.objects.dna.Exposure.prototype.acceptRight.apply(this,arguments)},canConnect:function(){return Workspace.objects.dna.Exposure.prototype.canConnect.apply(this,arguments)},onConnect:function(a,b,c){},targetWType:"Workspace.objects.dna.Exposure"},function(){Workspace.Tools.register("exposure",Workspace.tools.nodal.ExposureTool)});
Ext.define("App.ui.nodal.NodeInspector",{requires:["App.ui.nodal.StrandPreview"],extend:"Ext.form.Panel",title:"Node",bodyPadding:5,enableBoundFields:!0,initComponent:function(){Ext.apply(this,{defaults:{xtype:"textfield"},fieldDefaults:{labelWidth:100},items:[{objectBinding:"name",anchor:"100%"},{xtype:"sliderfield",fieldLabel:"Rotation",minValue:0,maxValue:360,width:100,increment:15,anchor:"95%",objectBinding:"theta",tipText:function(a){return String(a.value)+"°"}},{xtype:"numberfield",fieldLabel:"Polarity",objectBinding:"polarity",minValue:-1,maxValue:1,step:1,anchor:"95%"},{xtype:"combo",store:Workspace.objects.dna.motifStore,queryMode:"local",displayField:"number",valueField:"number",forceSelection:!1,listConfig:{getInnerTpl:function(){return'<div class="search-item"><img src="images/motifs/{number}.gif" /></div>'}},fieldLabel:"Motif",objectBinding:"motif",anchor:"95%"},Ext.create("App.ui.nodal.StrandPreview",{objectBinding:"annotatedStructure",items:[],height:150,anchor:"95%"})],showIf:function(a){return a=="Workspace.objects.dna.Node"}}),this.callParent(arguments),this.mixins.boundObjectPanel.initialize.apply(this,arguments)},mixins:{boundObjectPanel:"App.ui.BoundObjectPanel"}});
Ext.define("App.ui.nodal.MotifInspector",{requires:["App.ui.CodeMirror"],extend:"Ext.form.Panel",title:"Motif",bodyPadding:5,enableBoundFields:!0,initComponent:function(){Ext.apply(this,{defaults:{xtype:"textfield"},fieldDefaults:{labelWidth:100},items:[{objectBinding:"name",anchor:"100%"},{xtype:"sliderfield",fieldLabel:"Rotation",minValue:0,maxValue:360,width:100,increment:15,anchor:"95%",objectBinding:"theta",tipText:function(a){return String(a.value)+"°"}},{xtype:"codemirror",objectBinding:"dynaml",objectBindingEvent:"blur",height:300,title:"DyNAML",collapsed:!1,collapsible:!0,cls:"simple-header",mode:{name:"javascript",json:!0}}],showIf:function(a){return a=="Workspace.objects.dna.Motif"}}),this.callParent(arguments),this.mixins.boundObjectPanel.initialize.apply(this,arguments)},mixins:{boundObjectPanel:"App.ui.BoundObjectPanel"}});
Ext.define("App.ui.nodal.PortInspector",{extend:"Ext.form.Panel",title:"Port",bodyPadding:5,enableBoundFields:!0,initComponent:function(){Ext.apply(this,{defaults:{xtype:"textfield"},fieldDefaults:{labelWidth:100},items:[{objectBinding:"name",anchor:"100%"}],showIf:function(a){return a=="Workspace.objects.dna.InputPort"||a=="Workspace.objects.dna.OutputPort"||a=="Workspace.objects.dna.BridgePort"}}),this.callParent(arguments),this.mixins.boundObjectPanel.initialize.apply(this,arguments)},mixins:{boundObjectPanel:"App.ui.BoundObjectPanel"}});
Ext.ns("Workspace.objects.dna"),Workspace.objects.dna.Motifs=function(){var a=App.dynamic.Library.dummy();return _.reduce(_.deepClone(App.dynamic.Compiler.standardMotifs),function(b,c,d){return c.library=a,b[d]=new App.dynamic.Motif(c),b},{})}(),Workspace.objects.dna.PortClasses={input:"Workspace.objects.dna.InputPort",init:"Workspace.objects.dna.OutputPort",output:"Workspace.objects.dna.OutputPort",bridge:"Workspace.objects.dna.BridgePort"},Workspace.objects.dna.Ports={input:{wtype:"Workspace.objects.dna.InputPort",stroke:"orange"},init:{wtype:"Workspace.objects.dna.OutputPort",stroke:"#553300"},green:{wtype:"Workspace.objects.dna.OutputPort",stroke:"#66ff33"},blue:{wtype:"Workspace.objects.dna.OutputPort",stroke:"#33ccff"},pink:{wtype:"Workspace.objects.dna.BridgePort",stroke:"#ff1177"},purple:{wtype:"Workspace.objects.dna.BridgePort",stroke:"#9900cc"}},Workspace.objects.dna.motifStore=function(){var a=[],b=0;for(var c in Workspace.objects.dna.Motifs)a[b]={number:c,spec:Workspace.objects.dna.Motifs[c]},b++;return Ext.define("Motif",{extend:"Ext.data.Model",fields:[{name:"number",type:"string"},{name:"spec",type:"auto"}]}),Ext.create("Ext.data.Store",{data:a,model:"Motif"})}();
Ext.define("App.ui.MotifPalette",{extend:"App.ui.Palette",requires:["Workspace.objects.dna.Motifs"],tpl:'<tpl for="."><div class="motif-template"></div></tpl><div class="x-clear" />',itemSelector:"div.motif-template",mimeType:"ext/motif",constructor:function(a){a.store||Ext.apply(a,{store:Workspace.objects.dna.motifStore}),this.callParent(arguments),this.view.on("itemupdate",this.redrawMotif,this)},onRefresh:function(){this.drawMotifs()},drawMotifs:function(){var a=this.view.getStore(),b=this.view;this.papers||(this.papers={}),_.each(a.getRange(),function(a){var c=b.getNode(a);this.redrawMotif(a,null,c)},this)},redrawMotif:function(a,b,c){c=Ext.get(c);var d=c.id,e=this.papers[d]&&b==null||(this.papers[d]=Raphael(c.dom,c.getWidth(),c.getHeight()));this.drawMotif(e,a.get("spec"))},drawMotif:function(a,b){var c=a.width*.35,d=a.width/2,e=a.height/2;a.clear(),a.add([{type:"circle",cx:d,cy:e,r:c,rx:c,ry:c,stroke:"#000","stroke-width":2.5}]);var f=_.filter(b.getDomains(),function(a){return a.role!="null"&&a.role!="structural"}),g=Math.PI,h=2*Math.PI/f.length,i=[];_.each(f,function(b,f){var j=4,k=g+f*h,l={cx:d+c*Math.cos(k),cy:e+c*Math.sin(k),x:d+c*Math.cos(k)-j,y:e+c*Math.sin(k)-j,transform:"r"+(k+(b.role=="input"?32:0))*180/Math.PI,width:2*j,height:2*j,fill:"#fff",stroke:App.dynamic.Compiler.getColor(b),"stroke-width":2};if(b.role=="input"){var m=a.triangle(l.cx,l.cy,j,j);m.attr(l)}else if(b.role=="bridge"){var m=a.square(l.cx,l.cy,j,j);m.attr(l)}else l.type="circle",l.r=j,i.push(l)}),a.add(i)}});
Ext.define("App.ui.ObjectProperties",{extend:"App.ui.BoundObjectPanel",enableBoundFields:!1,constructor:function(){App.ui.ObjectProperties.superclass.constructor.apply(this,arguments)},initComponent:function(){this.grid=Ext.create("Ext.grid.property.Grid",{border:!1,bodyBorder:!1,source:{},title:"All Properties"}),this.selection=[],this.items=this.items||[],this.items.push(this.grid),Ext.apply(this,{title:"Selected Object",layout:"accordion"}),this.callParent(arguments),this.grid.on("propertychange",this.onPropertyChange,this),this.boundObjectPanels=Ext.create("Ext.util.MixedCollection"),this.boundObjectPanels.addAll(this.query("component[bind]")),this.boundObjectPanels.each(function(a){this.mon(a,"action",this.doAction,this),a.init&&a.init()},this)},doAction:function(a){var b=a.getUndo();this.workspace.doAction(a)},onSelectionChange:function(){var a=_.difference(this.workspace.getSelection(),this.selection),b=_.difference(this.selection,this.workspace.getSelection());_.each(a,function(a){this.bind(a)}),_.each(b,function(a){this.unbind(a)}),this.selection=this.workspace.getSelection()},bind:function(a){this.unbind(),this.boundObject=a,this.boundObject.on("change",this.onObjectChange,this),this.grid.setSource(a.getReadableHash()),this.callParent(arguments),this.boundObjectPanels.each(function(b){b.bind(a)})},unbind:function(a){this.boundObject&&(a==this.boundObject||!a)&&(this.boundObject.un("change",this.onObjectChange,this),this.grid.setSource({}),this.boundObject=!1),this.callParent(arguments),this.boundObjectPanels.each(function(b){b.unbind(a)})},onObjectChange:function(a,b){this.ignore||this.grid.setProperty(a,b,!0)},onPropertyChange:function(a,b,c){this.boundObject&&(this.ignore=!0,this.boundObject.set(b,c),this.ignore=!0)},attachTo:function(a){this.workspace=a,this.mon(this.workspace,"select",this.bind,this,{buffer:200}),this.mon(this.workspace,"unselect",this.unbind,this,{buffer:200})}});
Ext.define("Workspace.tools.secondary.ComplementarityTool",{extend:"Workspace.tools.ConnectorTool",requires:["Workspace.objects.secondary.Complementarity"],parameters:{"arrow-end":"classic-wide-long","stroke-dasharray":".",stroke:"#aaa","stroke-width":1.5},acceptLeft:function(){return Workspace.objects.secondary.Complementarity.prototype.acceptLeft.apply(this,arguments)},acceptRight:function(){return Workspace.objects.secondary.Complementarity.prototype.acceptRight.apply(this,arguments)},canConnect:function(){return Workspace.objects.secondary.Complementarity.prototype.canConnect.apply(this,arguments)},buildObject:function(){return},onConnect:function(a,b,c){this.workspace.complementarityManager.makeComplementary(b,c)},targetWType:"Workspace.objects.secondary.Complementarity"},function(){Workspace.Tools.register("domain_complement",Workspace.tools.secondary.ComplementarityTool)});
Ext.define("App.ui.nodal.LibraryWindow",{extend:"Ext.window.Window",requires:["App.ui.NupackEditor","App.ui.CodeMirror"],title:"Compiled library",minimize:function(){this.toggleCollapse()},minimizable:!0,maximizable:!0,bodyBorder:!1,border:!1,plain:!0,layout:"fit",closeAction:"hide",initComponent:function(){this.lastLibrary?(Ext.apply(this,{items:[{xtype:"tabpanel",plain:!0,items:[{title:"Tree",xtype:"objectbrowser",data:this.lastLibrary},{title:"NUPACK",xtype:"codemirror",mode:"nupack",value:this.lastLibrary.toNupackOutput()},{title:"DD",xtype:"codemirror",mode:"nupack",value:this.lastLibrary.toDomainsOutput()},{title:"Strands",xtype:"codemirror",mode:"text",name:"strands",value:this.printStrands(this.lastLibrary)},{title:"Source",xtype:"codemirror",mode:"text",name:"source",value:this.printStrands(this.lastLibrary,{annotations:!0,originalSegmentNames:!0})}]}]}),this.sourceDynaml&&this.items[0].items.push({title:"DyNAML",xtype:"codemirror",mode:"javascript",value:this.dynamlToString()})):Ext.apply(this,{items:[{html:"No library to show.",frame:!0,border:!1,bodyBorder:!1}]}),this.callParent(arguments)},setLibrary:function(a,b){this.lastLibrary=a,this.sourceDynaml=b?b:null;var c=this.down("tabpanel"),d=this.down("objectbrowser");c.remove(d),c.add({title:"Tree",xtype:"objectbrowser",data:this.lastLibrary});var e=this.down("codemirror[mode='nupack']");e&&e.setValue(this.lastLibrary.toNupackOutput());var f=this.down("codemirror[mode='dd']");f&&f.setValue(this.lastLibrary.toDomainsOutput());var g=this.down("codemirror[name='strands']");g&&g.setValue(this.printStrands(this.lastLibrary));var b=this.down("codemirror[name='source']");b&&b.setValue(this.printStrands(this.lastLibrary,{annotations:!0,originalSegmentNames:!0}));if(this.sourceDynaml){var h=this.down("codemirror[mode='javascript']");h?h.setValue(this.dynamlToString()):c.add({title:"DyNAML",xtype:"codemirror",mode:"javascript",value:this.dynamlToString()})}},dynamlToString:function(){return _.isString(this.sourceDynaml)?this.sourceDynaml:JSON.stringify(this.sourceDynaml,null,"\t")},printStrands:function(a,b){return App.dynamic.Compiler.printStrands(a,b)},width:400,height:400});
Ext.define("App.ui.DynamlEditor",{extend:"App.ui.TextEditor",iconCls:"dynaml",editorType:"DyNAML",requires:["App.ui.nodal.LibraryWindow","App.ui.NupackEditor","App.ui.CodeMirror"],trap:!0,initComponent:function(){Ext.apply(this,{mode:{name:"javascript",json:!0},tbar:[{xtype:"splitbutton",text:"Compile",iconCls:"compile",handler:this.compileDynamicServer,scope:this,menu:[{text:"Compile locally",handler:this.compileDynamicLocal,scope:this}]},{text:"Format",iconCls:"edit",handler:function(){this.editor.autoFormatSelection()},scope:this},"->",Ext.create("App.ui.SaveButton",{app:this})]}),this.callParent(arguments)},compileDynamicServer:function(){var a=this.getValue(),b=this.doc.getDocumentPath();App.runTask("Nodal",{node:b,data:a,action:"dynamic"},_.bind(function(){Ext.msg("Nodal Build","Build of system <strong>{0}</strong> completed.",this.doc.getBasename())},this))},compileDynamicLocal:function(){var a;if(this.trap)try{a=this.compile()}catch(b){App.log(b.message,{level:"error"})}else a=this.compile();a&&(this.lastLibrary=a,this.showLibraryTreeWindow())},showLibraryTreeWindow:function(){!this.libraryTreeWindow&&this.lastLibrary?this.libraryTreeWindow=Ext.create("App.ui.nodal.LibraryWindow",{lastLibrary:this.lastLibrary}):this.lastLibrary&&this.libraryTreeWindow.setLibrary(this.lastLibrary),this.libraryTreeWindow.show()},compile:function(){var a=this.getValue(),b=jsonlint.parse(a);return App.dynamic.Compiler.compile(this.getValue())},printStrands:function(a,b){return App.dynamic.Compiler.printStrands(a,b)}});
Ext.define("App.ui.dd.RulesWindow",{extend:"Ext.window.Window",requires:["App.ui.BasePicker"],plain:!0,bodyBorder:!1,border:!1,layout:"fit",title:"Design Options",width:350,initComponent:function(){Ext.apply(this,{items:{xtype:"form",frame:!0,defaults:{labelAlign:"top"},items:[{boxLabel:"Prevent 4 G's and 4 C's in a row",xtype:"checkboxfield",name:"rule_4g",inputValue:1},{boxLabel:"Prevent 6 A/T bases in a row and 6 G/C bases in a row",xtype:"checkboxfield",name:"rule_6at",inputValue:1},{boxLabel:"Domains must start and end with C",xtype:"checkboxfield",name:"rule_ccend",inputValue:1},{boxLabel:"Minimize G's in domain design",xtype:"checkboxfield",name:"rule_ming",inputValue:1},{boxLabel:"Reward domains with higher Shannon entropy",xtype:"checkboxfield",name:"rule_shannon",inputValue:1},{boxLabel:"Target worst domain for mutations",xtype:"checkboxfield",name:"rule_targetworst",inputValue:1},Ext.create("App.ui.BasePicker",{labelAlign:"top",fieldLabel:"Constrain initial domain sequences",name:"rule_init",width:320}),Ext.create("App.ui.BasePicker",{labelAlign:"top",fieldLabel:"Constrain bases in domains",xtype:"textfield",name:"rule_gatc_avail",width:320}),{boxLabel:"Lock all bases in strands loaded from file",xtype:"checkboxfield",name:"rule_lockold",inputValue:1}],buttons:[{text:"Save",handler:this.save,scope:this}]}}),this.callParent(arguments),this.form=this.down("form")},save:function(){this.designer.updateRules(this.getValues()),this.hide()},getValues:function(){var a=this.form.getValues();return _.each(this.query("basepicker"),function(b){a[b.name]=b.getAggregate()}),_.each(this.query("checkboxfield"),function(b){b.checked||(a[b.name]=0)}),a},setValues:function(a){var b={};_.each(a,function(a,c){b[c]=a.toString()}),this.form.getForm().setValues(b),_.each(this.query("basepicker"),function(b){a[b.name]&&b.setAggregate(a[b.name])})}});
Ext.define("App.ui.DD",{extend:"Ext.panel.Panel",mixins:{app:"App.ui.Application",tip:"App.ui.TipHelper"},requires:["App.ui.SequenceEditor","App.ui.dd.RulesWindow","App.ui.dd.ScoreParametersWindow"],constructor:function(){this.mixins.app.constructor.apply(this,arguments),this.callParent(arguments)},title:"Domain Design",editorType:"WebDD",border:!1,bodyBorder:!1,mutating:!1,scoreFormat:"0.00",initComponent:function(){var a=this.designer=new DD;this.store=Ext.create("Ext.data.ArrayStore",{ref:"store",fields:[{name:"domain",type:"int"},{name:"name",type:"string"},{name:"sequence"},{name:"importance",type:"float"},{name:"composition",type:"int"},{name:"score",type:"float"},{name:"target",type:"bool",defaultValue:!1}],data:[]}),this.designStore=Ext.create("Ext.data.ArrayStore",{fields:[{name:"sequence"},{name:"spec"},{name:"name"}]});var b=this.cellEditor=Ext.create("Ext.grid.plugin.CellEditing",{clicksToEdit:2,autoCancel:!1});this.cellEditor.on("edit",function(a,b){this.designer.updateDomain(this.store.indexOf(b.record),b.record.get("sequence"),b.record.get("importance"),b.record.get("composition"))},this),this.targetColumn=Ext.create("Ext.ux.CheckColumn",{header:"Target",dataIndex:"target",width:60,xtype:"checkcolumn"}),this.targetColumn.on("checkchange",function(a,b,c){var d=this.store.getAt(b);d.get("target")?this.designer.targetDomain(b):this.designer.untargetDomain(b)},this),Ext.apply(this,{layout:"border",items:[{xtype:"gridpanel",ref:"grid",region:"center",selModel:{mode:"multi"},columns:[Ext.create("Ext.grid.RowNumberer",{width:30,header:"#",hideable:!0,hidden:!0}),{header:"Name",dataIndex:"name",width:50,editor:{allowBlank:!0,tooltip:{title:"Name domain",text:"You can manually specify a name for each domain, to be used in the Structure panel. Leave this blank to automatically number the domains. Domain names/numbers are preserved when the columns of this grid are sorted by clicking the headers.",anchor:"top"}},renderer:function(a,b,c,d,e,f){return b.tdCls=Ext.baseCSSPrefix+"grid-cell-special",!a||a=="false"?f.indexOfTotal(c)+1:a}},{header:"Sequence",dataIndex:"sequence",renderer:function(a){var b={innerHTML:"",nodeType:1};return CodeMirror.runMode(a,"dd-sequence",b),'<span class="dd-sequence">'+b.innerHTML+"</span>"},editor:{allowBlank:!1,tooltip:{title:"Edit sequence of domain",text:'Manually set the sequence of this domain by entering a sequence of bases. Capitalized bases will be "locked", so the designer will not mutate them. ',anchor:"top",anchorOffset:10},listeners:{afterrender:{scope:this,fn:function(a){this.mixins.tip.buildTip(a)}}}},flex:1},{header:"Importance",dataIndex:"importance",width:100,editor:{xtype:"numberfield",allowBlank:!1,tooltip:{title:"Domain importance",text:"Importance is a multiplicative factor which causes the designer to weigh defects involving this domain more heavily. This allows you to (for instance) ensure that toehold domains have minimal interactions with other domains.",anchor:"top",anchorOffset:10},listeners:{afterrender:{scope:this,fn:function(a){this.mixins.tip.buildTip(a)}}}}},{header:"Composition",dataIndex:"composition",renderer:Ext.bind(function(a){a=this.designer.printComposition(a);var b={innerHTML:"",nodeType:1};return CodeMirror.runMode(a.toUpperCase(),"sequence",b),b.innerHTML},this),width:100,editor:{xtype:"combobox",typeAhead:!0,triggerAction:"all",forceSelection:!0,selectOnTab:!0,store:[[15,"GATC"],[7,"ATC"],[11,"GTC"],[14,"GAT"],[13,"GAC"],[12,"GA"],[6,"AT"],[9,"GC"],[10,"GT"],[5,"AC"],[3,"TC"],[8,"G"],[4,"A"],[3,"T"],[1,"C"]],lazyRender:!0,listClass:"x-combo-list-small",tooltip:{title:"Domain base composition",text:"Specify which bases (ATCG) may be included in this domain; the designer will only accept mutations which contain only the specified bases.",anchor:"top",anchorOffset:10},listeners:{afterrender:{scope:this,fn:function(a){this.mixins.tip.buildTip(a)}}}}},{header:"Score",dataIndex:"score",xtype:"numbercolumn",format:this.scoreFormat,width:100,editable:!1},this.targetColumn],store:this.store,plugins:[this.cellEditor],tbar:{items:[{text:"Mutate",iconCls:"play",ref:"mutateButton",handler:this.toggleMutation,disabled:!0,scope:this,tooltip:"Click to start/pause mutations. Must add domains first."},"-",{text:"Add",ref:"addDomainButton",handler:this.doAddDomain,scope:this,iconCls:"plus",xtype:"splitbutton",tooltip:"Click the button to add a new domain of the default length. Click the arrow to choose the default length, or add domains with specific sequences to the design. ",menu:[{text:"New domain length: ",canActivate:!1},{xtype:"numberfield",ref:"addDomLen",value:8,min:2,indent:!0},{text:"Add Domain",iconCls:"tick",ref:"addDomainItem",handler:this.doAddDomain,scope:this},"-",{text:"Add specific domains...",handler:this.addManyDomains,scope:this,tooltip:"Open a window to add domains with specific sequences to the design."},{text:"Add domains from DD file...",handler:this.loadFromDDFile,scope:this,tooltip:"Open a window to add domains using a file created by a legacy version of DD. This also allows you to specify the importance and composition of each of the added domains."}]},{text:"Modify",ref:"modDomainButton",iconCls:"edit",xtype:"splitbutton",handler:function(){var a=this.grid.getSelectionModel().getLastSelected();a&&this.cellEditor.startEdit(a,this.grid.headerCt.getHeaderAtIndex(0))},scope:this,tooltip:"Click the button to edit the sequence of the selected domain. Click the arrow to see options to reseed existing domains.",menu:[{text:"Reseed Domain",handler:this.reseed,scope:this},{text:"Reseed All Domains",handler:this.reseedAll,scope:this}]},{text:"Delete",ref:"delDomainButton",handler:this.doDeleteDomains,scope:this,iconCls:"cross",tooltip:"Delete the selected domain"},"-",{text:"Advanced",iconCls:"tools",menu:[{text:"Design options",iconCls:"wrench",handler:this.designOptions,scope:this,tooltip:"Change options about how DD picks sequences, such as which bases are permitted and particular motifs to penalize. "},{text:"Tweak score parameters",iconCls:"ui-slider",handler:this.scoreParams,scope:this,tooltip:"Change DD's objective (scoring) function."}]},"->",Ext.create("App.ui.SaveButton",{text:"Save Domains",iconCls:"save",app:this,defaultExtension:"ddjs"})]},bbar:{ref:"statusBar",items:[{baseText:"Attempts: ",text:"Attempts: ",ref:"attemptCount"},{baseText:"Mutations: ",text:"Mutations: ",ref:"mutCount"},{baseText:"Flux: ",text:"Flux: ",ref:"mutFlux"},{baseText:"Bored: ",text:"Bored: ",ref:"boredField"},{baseText:"∆: ",text:"∆: ",ref:"deltaField"},"->","->",{baseText:"Score: ",text:"Score: ",ref:"scoreField"}]},margin:0,bodyBorder:!1,border:!0,split:!0},Ext.create("App.ui.NupackEditor",{region:"east",title:"Structure",editorType:"Structure",saveButtonText:"Save Strands",ref:"structPane",collapsible:!0,collapsed:!0,width:200,split:!0,margin:0,border:!0,bodyBorder:!0,mode:"nupack",showNupackButton:!1,showEditButton:!1,extraTbarItems:[{text:"Update",iconCls:"refresh",xtype:"splitbutton",menu:[{text:"Reseed existing domains",ref:"clobberOnUpdate",checked:!1}],handler:this.updateDomainsFromSpec,scope:this}],listeners:{afterrender:{scope:this,fn:function(a){a.header.tooltip={title:"Structure",text:'Use this pane to thread your domains onto strands. You can use a NUPACK-like syntax to describe your strands. For example, to describe strand "M1" containing domains 1, 2, and 3*, simply enter "M1 : 1 2 3*" then click "Update." Your changes will be reflected in the "Strands" pane below'},this.mixins.tip.buildTip(a.header)}}}}),Ext.create("App.ui.SequenceEditor",{region:"south",title:"Strands",editorType:"Strands",saveButtonText:"Save Sequences",ref:"strandsPane",collapsible:!0,collapsed:!0,height:200,split:!0,border:!0,bodyBorder:!0,margin:0,listeners:{afterrender:{scope:this,fn:function(a){a.header.tooltip={title:"Strands",text:'This pane shows the sequences of the strands described in the "Structure" pane on the right. '},this.mixins.tip.buildTip(a.header)}}}})]}),this.on("afterrender",this.loadFile,this),this.on("afterrender",function(){this.targetColumnTip=Ext.create("Ext.tip.ToolTip",{target:this.grid.getEl(),delegate:".x-grid-checkheader",title:"Target Domain",html:"Select one or more domains to specifically target them for mutations. If you check multiple domains, the worst among them will be selected for mutation If you don't target any specific domains, the worst domain among the entire ensemble will be targeted by default.",anchor:"top",renderTo:Ext.getBody()})},this),this.callParent(arguments),this.mixins.tip.init.apply(this,arguments),_.each(this.query("*[ref]"),function(a){this[a.ref]=a},this)},updateDomainsFromSpec:function(){var a=DNA.structureSpec(CodeMirror.tokenize(this.structPane.getValue(),"nupack"));this.syncDomains(a.domains,this.clobberOnUpdate.checked),this.setStrands(a.strands),this.structPane.expand(),this.strandsPane.expand(),this.updateStrandsPane()},setStrands:function(a){this.strands=a},getSaveData:function(a){a||(a=this.document.getExt());if(a=="ddjs")return{structure:this.structPane.getValue()||"",state:this.designer.saveState()};if(a=="nupack"||a=="domains")return this.structPane.getValue();if(a=="seq")this.designer.printDomains().join("\n");else if(a=="dd")return this.designer.saveFile()},onLoad:function(){if(!!this.data){var a=this.document.getExt();a=="ddjs"?(this.data=Ext.decode(this.data),this.structPane.setValue(this.data.structure||""),this.designer.loadState(this.data.state||{}),this.addDomains(this.designer.printfDomains(),[],this.designer.getImportances(),this.designer.getCompositions(),!0),this.updateDomainsFromSpec()):a=="nupack"||a=="domains"?(this.structPane.setValue(this.data),this.updateDomainsFromSpec(),this.structPane.bindDocument(this.document),this.unbindDocument()):a=="seq"?this.addManyDomains(this.data):a=="dd"&&(this.designer.loadFile(this.data),this.addDomains(this.designer.printfDomains(),[],this.designer.getImportances(),this.designer.getCompositions(),!0))}},reseed:function(){var a=this.grid.getSelectionModel().getLastSelected(),b=this.store.indexOf(a);a&&(this.designer.reseedDomain(b),a.set("sequence",this.designer.printfDomainById(b)))},reseedAll:function(){this.designer.reseed(),this.updateInterface(!0)},updateDomain:function(a){this.designer.updateDomain(this.store.indexOf(a),a.get("sequence"),a.get("importance"),a.get("composition"))},updateParams:function(a){this.designer.updateParams(a)},updateRules:function(){this.designer.updateRules(v)},designOptions:function(){this.designOptionsWindow||(this.designOptionsWindow=Ext.create("App.ui.dd.RulesWindow",{designer:this.designer,closeAction:"hide"})),this.designOptionsWindow.setValues(this.designer.getRules()),this.designOptionsWindow.show()},scoreParams:function(){this.scoreParamsWindow||(this.scoreParamsWindow=Ext.create("App.ui.dd.ScoreParametersWindow",{designer:this.designer,closeAction:"hide"})),this.scoreParamsWindow.setValues(this.designer.getParams()),this.scoreParamsWindow.show()},updateStatusBar:function(){var a=this.designer.getMutationAttempts(),b=this.designer.getMutationCount(),c=this.designer.getWorstScore(),d=this.designer.getMutationFlux(),e=this.designer.getMutationDelta(),f=this.designer.getBoredMutations();this.attemptCount.setText(this.attemptCount.baseText+a),this.mutCount.setText(this.mutCount.baseText+b),this.scoreField.setText(this.scoreField.baseText+Ext.util.Format.number(c,this.scoreFormat)),this.mutFlux.setText(this.mutFlux.baseText+Ext.util.Format.number(d,this.scoreFormat)),this.deltaField.setText(this.deltaField.baseText+Ext.util.Format.number(e,this.scoreFormat)),this.boredField.setText(this.boredField.baseText+f)},doDeleteDomains:function(){var a=this.grid.getSelectionModel().getSelection();a&&_.each(a,function(a){this.designer.removeDomain(this.store.indexOf(a)),this.store.remove(a)},this)},syncDomains:function(a,b){b=b||!1,_.each(a,function(a,c){var d=this.store.findRecord("name",c);d||(d=this.store.getAt(parseInt(c)-1)),d?b&&(d.set("sequence",a),this.updateDomain(d)):this.addDomains([a],[c])},this)},addManyDomains:function(a){this.addDomainsWindow||(this.addDomainsWindow=Ext.create("App.ui.dd.SequenceWindow",{designer:this,value:a||""})),this.addDomainsWindow.show()},loadFromDDFile:function(a){this.loadDDFileWindow||(this.loadDDFileWindow=Ext.create("App.ui.dd.SequenceWindow",{designer:this,value:a||"",handler:function(a){this.designer.loadFile(a),this.addDomains(this.designer.printfSequences(),[],this.designer.getCompositions(),this.designer.getImportances())},scope:this})),this.loadDDFileWindow.show()},addDomains:function(a,b,c,d,e){c||(c=1),d||(d=15),e=e||!1,e||this.designer.addDomains(a,c,d),this.addDomainsToStore(a,b,c,d),this.scoresDirty=!0,this.designer.evaluateIntrinsicScores(),this.mutateButton.enable()},addDomainsToStore:function(a,b,c,d){this.store.add(_.map(a,function(a,e){return{sequence:a,importance:_.isArray(c)?c[e]:c,composition:_.isArray(d)?d[e]:d,name:b&&b[e]?b[e]:""}},this))},doAddDomain:function(){var a=this.addDomLen.getValue(),b=this.designer.randomSequence(1,a)[0];this.addDomain(this.designer.printfDomain(b),1,15)},addDomain:function(a,b,c,d){d||(d=""),this.designer.addDomains([a],b,c,!1);var a=this.designer.printfDomainById(this.designer.getDomainCount()-1);this.store.add({sequence:a,importance:b,composition:c,name:d}),this.designer.evaluateIntrinsicScores(),this.scoresDirty=!0,this.mutateButton.enable()},toggleMutation:function(){this.mutating?this.pauseMutation():this.startMutation()},mutationStep:50,mutationCount:0,mutationLoop:function(){this.mutationCount>this.mutationStep&&(this.updateInterface(),this.mutationCount=0),this.mutationCount++,this.doMutation()},doMutation:function(){this.designer.mutate()},updateInterface:function(a,b){a||(a=!1),b||(b=!0),this.updateStatusBar();var c=this.designer.getScores(!0),d=this.designer.getMutatedDomain(),e=this.designer.printfDomainById(d),f=a?this.designer.printfDomains():null,g;for(var h=0;h<c.length;h++)g=this.store.getAt(h),b&&(!(g.get("score")!=0&&g.get("score")<c[h]),g.set("score",c[h])),a&&g.set("sequence",f[h]);g=this.store.getAt(d),g.set("sequence",e),this.store.sync();if(this.strands){var i=_.reduce(this.store.getRange(),function(a,b){var c=b.get("name"),d=this.store.indexOf(b);return a[c?c:d+1]=this.designer.printDomainById(d),a},{},this);this.strandsPane.setValue(_.map(this.strands,function(a,b){return b+" : "+DNA.threadSegments(i,a)}).join("\n"))}},updateStrandsPane:function(){var a=_.reduce(this.store.getRange(),function(a,b){var c=b.get("name"),d=this.store.indexOf(b);return a[c?c:d+1]=this.designer.printDomainById(d),a},{},this);this.strandsPane.setValue(_.map(this.strands,function(b,c){return c+" : "+DNA.threadSegments(a,b)}).join("\n"))},startMutation:function(){this.mutateButton.setIconCls("pause"),_.invoke([this.modDomainButton,this.addDomainButton,this.delDomainButton],"disable");if(!this.mutationTask||this.scoresDirty)this.designer.evaluateAllScores(),this.scoresDirty=!1;var a=this.designer.printfDomains();_.each(a,function(a,b){this.store.getAt(b).set("sequence",a)},this),this.mutationTask?this.mutationTask=Ext.TaskManager.start(this.mutationTask):this.mutationTask=Ext.TaskManager.start({run:this.mutationLoop,interval:.1,scope:this}),this.mutating=!0},pauseMutation:function(){this.mutateButton.setIconCls("play"),_.invoke([this.modDomainButton,this.addDomainButton,this.delDomainButton],"enable"),this.mutationTask&&Ext.TaskManager.stop(this.mutationTask),this.mutating=!1}}),Ext.define("Ext.ux.PreviewPlugin",{extend:"Ext.AbstractPlugin",alias:"plugin.preview",requires:["Ext.grid.feature.RowBody","Ext.grid.feature.RowWrap"],hideBodyCls:"x-grid-row-body-hidden",bodyField:"",previewExpanded:!0,constructor:function(a){this.callParent(arguments);var b=this.bodyField,c=this.hideBodyCls,d=this.getCmp(),e=[{ftype:"rowbody",getAdditionalData:function(a,e,f,g,h){var i=Ext.grid.feature.RowBody.prototype.getAdditionalData.apply(this,arguments);return Ext.apply(i,{rowBody:a[b],rowBodyCls:d.previewExpanded?"":c}),i}},{ftype:"rowwrap"}];d.previewExpanded=this.previewExpanded,d.features||(d.features=[]),d.features=e.concat(d.features)},toggleExpanded:function(a){var b=this.getCmp();this.previewExpanded=b.previewExpanded=a,b.refresh()}});
Ext.define("Workspace.tools.IdeaTool",{targetWType:"Workspace.objects.IdeaObject",constructor:function(a,b){Ext.applyIf(b,{keyMap:[]}),Workspace.tools.IdeaTool.superclass.constructor.call(this,a,b),this.dragging=!1,this.selectorBand=!1,this.selectionBands=new Ext.util.MixedCollection},requires:["Workspace.tools.IdeaAdderTool","Workspace.tools.SelectorBand","Workspace.tools.SelectionBand"],extend:"Workspace.tools.BaseTool",click:function(a,b){},dblclick:function(a,b){},mousedown:function(a,b){this.dragging=!0,pos=this.getAdjustedXY(a),this.x1=pos.x,this.y1=pos.y,this.selectorBand&&(this.selectorBand.destroy(),this.selectorBand=!1),this.selectorBand=new Workspace.tools.SelectorBand(this.workspace,{x1:pos.x,y1:pos.y}),this.selectorBand.cacheRegions(),a.stopEvent()},mouseup:function(a,b){this.dragging=!1,this.selectorBand&&(this.selectorBand.destroy(),this.selectorBand=!1),b&&Ext.type(b.select)=="function"&&b.select();var c=this.workspace.getSelection();if(c.length>0){var d=this.buildIdeaFromSelection();d&&(d.select(),this.workspace.changeTool("pointer"))}else this.alternateAction(a,b,this.getAdjustedXY(a));a.stopEvent()},alternateAction:function(a,b,c){},buildIdeaFromSelection:function(){var a=this.workspace.getSelection();if(a.length>0){var b=this.workspace.createObject({wtype:this.targetWType,children:a});b.toBack()}return b},mousemove:function(a,b){if(this.dragging){var c=this.workspace.getSelection();if(this.selectorBand){pos=this.getAdjustedXY(a),this.selectorBand.adjustBand(pos.x,pos.y);var d=this.selectorBand.getItemsWithin();this.workspace.setSelection(d)}}},selectHandler:function(a){this.addSelectionBand(a)},unselectHandler:function(a){this.removeSelectionBand(a.getId())},addSelectionBand:function(a){this.selectionBands.containsKey(a.getId())||this.selectionBands.add(a.getId(),new Workspace.tools.SelectionBand({item:a,workspace:this.workspace}))},removeSelectionBand:function(a){a?(!Ext.isString(a)&&Ext.isFunction(a.getId)&&(a=a.getId()),Ext.isString(a)&&this.selectionBands.containsKey(a)&&(this.selectionBands.get(a).destroy(),this.selectionBands.removeAtKey(a))):(this.selectionBands.each(function(a){a.destroy()}),this.selectionBands.clear())},deleteSelection:function(){this.workspace.deleteObjects(this.workspace.getSelection())},activate:function(){Workspace.tools.IdeaTool.superclass.activate.call(this),this.workspace.deselect(),this.workspace.on("select",this.selectHandler,this),this.workspace.on("unselect",this.unselectHandler,this)},deactivate:function(){Workspace.tools.IdeaTool.superclass.deactivate.call(this),this.workspace.un("select",this.selectHandler,this),this.workspace.un("unselect",this.unselectHandler,this),this.selectorBand&&this.selectorBand.destoy(),this.removeSelectionBand()}},function(){Workspace.Tools.register("idea",Workspace.tools.IdeaTool)});
Ext.define("App.ui.ToolsTab",{requires:["Workspace.tools.PointerTool","Workspace.tools.PencilTool","Workspace.tools.IdeaTool","Workspace.tools.ConnectorTool","Workspace.tools.IdeaAdderTool"],extend:"App.ui.BoundObjectPanel",tool:"pointer",border:!1,layout:"hbox",generateConfig:function(){return{items:[{xtype:"buttongroup",title:"Tools",columns:2,items:[{iconCls:"cursor-icon",enableToggle:!0,toggleGroup:"toolbox",toolName:"pointer",pressed:!0,tooltip:{title:"Pointer Tool",text:"Select, move, and resize objects. Click objects or drag boxes around them to select. Grab and drag to move. Drag hangles to resize (objects without handles can't be resized)."}},{iconCls:"pencil",enableToggle:!0,toggleGroup:"toolbox",toolName:"pencil",tooltip:{title:"Pencil Tool",text:"Draw freehand objects. Click and drag to start drawing; release to finish."}},{iconCls:"idea",toggleGroup:"toolbox",enableToggle:!0,toolName:"idea",tooltip:{title:"Idea Tool",text:"Group objects into ideas. Drag a box around a group of objects to make an idea."}},{iconCls:"connector",toggleGroup:"toolbox",enableToggle:!0,toolName:"connector",tooltip:{title:"Connector Tool",text:"Draw connections between objects. Click one point or object and drag to another point or object."}}]},{xtype:"buttongroup",title:"Object",columns:3,items:[{scale:"medium",rowspan:2,iconAlign:"top",iconCls:"delete-24",text:"Delete",handler:this.deleteObjects,scope:this,tooltip:{title:"Delete",text:"Deletes the selected objects."},enableIf:function(a,b){return b.getCount()>0}},{disabled:!0,scale:"medium",rowspan:2,iconAlign:"top",iconCls:"duplicate-24",text:"Duplicate",handler:this.duplicateObjects,scope:this,tooltip:{title:"Duplicate",text:"Inserts a copy of the selected objects."}}]},{xtype:"buttongroup",title:"Idea",columns:2,defaults:{cellCls:"table-cell-padded"},items:[{scale:"medium",rowspan:2,iconAlign:"top",iconCls:"idea-form-24",text:"Form idea",tooltip:{title:"Form idea",text:"Makes a new idea from the selected objects. Select the objects you want to add to an idea, then click this button"},handler:this.formIdea,scope:this,enableIf:function(a,b){return b.getCount()>0}},{iconCls:"idea-remove",text:"Remove from Idea",rowspan:1,handler:this.orphanObjects,scope:this,tooltip:{title:"Remove from Idea",text:"Removes the selected objects from the idea they're a part of (if any)."},enableIf:function(a,b){var c=!1;return b.each(function(a){if(a.hasParent())return c=!0,!1}),c}},{iconCls:"idea-add",text:"Add to Idea",rowspan:1,toolName:"idea-add",enableToggle:!0,toggleGroup:"toolbox",tooltip:{title:"Add this to Idea",text:"Allows you to add the selected object(s) to an idea. Select the objects you want to add to an idea, then click this button, then click an idea."}}]},{xtype:"tbfill"},{xtype:"buttongroup",title:"Workspace",columns:4,items:[{scale:"medium",iconCls:"undo-24",text:"Undo",rowspan:2,iconAlign:"top",handler:this.undo,scope:this,ref:"undoButton",disabled:!0},{scale:"medium",iconCls:"redo-24",text:"Redo",rowspan:2,iconAlign:"top",handler:this.redo,scope:this,ref:"redoButton",disabled:!0},{scale:"medium",iconCls:"save-24",text:"Save",rowspan:2,iconAlign:"top",handler:this.saveWorkspace,scope:this},{scale:"medium",iconCls:"document-24",text:"Expand",rowspan:2,iconAlign:"top",handler:this.expandWorkspace,scope:this}]}]}},initComponent:function(){this.addEvents("toolChange"),this.defaults||(this.defaults={}),Ext.applyIf(this.defaults,{xtype:"buttongroup",headerPosition:"bottom",margins:"3 0 5 3"}),Ext.apply(this,this.generateConfig()),App.ui.ToolsTab.superclass.initComponent.apply(this,arguments),_.each(this.query("*[ref]"),function(a){this[a.ref]=a},this),this.toolButtons=new Ext.util.MixedCollection;var a=this.query("component[toolName]");Ext.each(a,function(a){a.addListener("toggle",this.onToggle,this),this.toolButtons.add(a.toolName,a)},this)},pushUndo:function(a){this.undoStack.push(a),this.rebuildUndo()},popUndo:function(){var a=this.undoStack.pop();return this.rebuildUndo(),a},rebuildUndo:function(){this.undoButton.menu.removeAll(),this.undoButton.menu.add(this.undoStack),this.undoStack.length>0?this.undoButton.enable():this.undoButton.disable()},undo:function(){this.fireEvent("undo",this)},redo:function(){this.fireEvent("redo",this)},deleteObjects:function(){var a=new Workspace.actions.DeleteObjectAction({subjects:this.boundObjects.getRange()});this.fireEvent("action",a)},duplicateObjects:function(){var a=new Workspace.actions.DuplicateObjectAction({objects:this.boundObjects.getRange()});this.fireEvent("action",a)},orphanObjects:function(){var a=new Workspace.actions.OrphanObjectAction({subjects:this.boundObjects.getRange()});this.fireEvent("action",a)},formIdea:function(){var a=new Workspace.actions.FormIdeaAction({subjects:this.boundObjects.getRange()});this.fireEvent("action",a)},expandWorkspace:function(){var a=new Workspace.actions.ExpandAction({});this.fireEvent("action",a)},saveWorkspace:function(){this.fireEvent("save",this)},onToggle:function(a,b){b&&this.setActiveTool(a.toolName)},getActiveTool:function(){return this.tool},setActiveTool:function(a){this.ignoreToolChange||(this.tool=a,this.fireEvent("toolchange",a))},onToolChange:function(a){var b=this.toolButtons.get(a);return b?(this.ignoreToolChange=!0,b.toggle(!0),this.tool=a,this.ignoreToolChange=!1,!0):!1}});
Ext.define("App.ui.nodal.HomeTab",{extend:"App.ui.ToolsTab",alias:"widget.nodal-hometab",requires:["Workspace.DDManager","Workspace.actions.UnwrapObjectsAction"],generateConfig:function(){return{defaults:{xtype:"buttongroup",headerPosition:"bottom",margins:"3 0 5 3"},items:[{xtype:"buttongroup",title:"Tools",columns:2,defaults:{},items:[{iconCls:"cursor-icon",enableToggle:!0,toggleGroup:"toolbox",toolName:"pointer",pressed:!0,tooltip:{title:"Pointer Tool",text:"Select, move, and resize objects. Click objects or drag boxes around them to select. Grab and drag to move. Drag hangles to resize (objects without handles can't be resized)."}},{iconCls:"pencil",enableToggle:!0,toggleGroup:"toolbox",toolName:"pencil",tooltip:{title:"Pencil Tool",text:"Draw freehand objects. Click and drag to start drawing; release to finish."}},{iconCls:"text-icon",enableToggle:!0,toggleGroup:"toolbox",toolName:"textbox",tooltip:{title:"Text Tool",text:"Enter and edit text. Click or click and drag to insert a textbox. Click a textbox to edit text."}},{iconCls:"math-icon",toggleGroup:"toolbox",enableToggle:!0,toolName:"math",tooltip:{title:"Equations",text:"Insert mathematical equations. Click and drag to draw an equation box."}}]},{xtype:"buttongroup",title:"Nodes",columns:2,defaults:{},items:[{enableToggle:!0,toggleGroup:"toolbox",toolName:"complementarity",rowspan:2,scale:"medium",iconCls:"arrow-24",iconAlign:"top",text:"Connect",tooltip:{title:"Complementarity",text:"Indicate complementary ports. Click and drag from an output port to an input port to create a complementarity relationship."}},{enableToggle:!0,toggleGroup:"toolbox",toolName:"node",iconCls:"node-add",text:"Add Node",rowspan:1,tooltip:{title:"Node",text:"Click to add a new node with no ports"}},{enableToggle:!0,toggleGroup:"toolbox",iconCls:"port-add",toolName:"port",text:"Add Port",rowspan:1,tooltip:{title:"Add Port",text:"Click on a node to add an input port. Hold alt and click to create an output port."}}]},{xtype:"buttongroup",title:"Motif",columns:2,items:[{toolName:"motif",enableToggle:!0,toggleGroup:"toolbox",scale:"medium",rowspan:2,iconAlign:"top",iconCls:"form-idea-24",text:"Create Motif",tooltip:{title:"Create Motif",text:'Click on the workspace to create an empty motif, or click and drag to group nodes into a motif. Your new motif will show up in the "Custom" tab of the motifs panel on the left; drag and drop it onto the workspace to create a new node of your motif. If you make an empty motif, you can enter custon DyNAML to define your motif. '}},{toolName:"exposure",enableToggle:!0,toggleGroup:"toolbox",iconCls:"port-expose",text:"Expose port",tooltip:{title:"Expose Port",text:'Click and drag from a port within a motif to the motif itself to "expose" that port as an input, output, or bridge into the motif. When you create a node with your motif, you\'ll only be able to assign complementarities to ports which have been exposed. '}},{iconCls:"motif-destroy",text:"Unwrap motif",tooltip:{title:"Destroy motif",text:"Unwraps and destroys the selected motif(s). If there are nodes within the motif, those nodes will be re-added to the workspace as regular nodes. If you wrote custom DyNAML within the motif, it will disappear, so be careful!"},handler:this.unwrapObjects,scope:this}]},{xtype:"buttongroup",title:"Object",columns:2,defaults:{},items:[{scale:"medium",rowspan:2,iconAlign:"top",iconCls:"delete-24",text:"Delete",handler:this.deleteObjects,scope:this,tooltip:{title:"Delete",text:"Deletes the selected objects."},enableIf:function(a,b){return b.getCount()>0}}]},{xtype:"tbfill"},{xtype:"buttongroup",title:"Workspace",columns:1,defaults:{},items:[{scale:"small",iconCls:"save",text:"Save",rowspan:1,handler:this.saveWorkspace,scope:this},{scale:"small",iconCls:"expand",text:"Expand",rowspan:1,handler:this.expandWorkspace,scope:this}]}]}},unwrapObjects:function(){var a=new Workspace.actions.UnwrapObjectsAction({subjects:this.boundObjects.getRange()});this.fireEvent("action",a)}},function(){});
Ext.define("App.ui.nodal.BuildTab",{extend:"App.ui.ToolsTab",alias:"widget.nodal-buildtab",mixins:{tips:"App.ui.TipHelper"},generateConfig:function(){return{defaults:{xtype:"buttongroup",headerPosition:"bottom",margins:"3 0 3 3"},items:[{xtype:"buttongroup",title:"Implementation",ref:"implementationGroup",columns:2,defaults:{},items:[{iconCls:"build-24",text:"Compile",rowspan:2,iconAlign:"top",scale:"medium",xtype:"splitbutton",ref:"serializeButton",handler:this.compile,scope:this,tooltip:{title:"Compile System",text:"Compiles the system into a domain-level specification. Several output files will be added to this directory, including a graphical representation of the included hairpins, a NUPACK multi-objective script for thermodynamic sequence design, and a Domain Design specification for interactive sequence design using Web DD. ",anchor:"top"},menu:[{text:"Clean",iconCls:"clean",tooltip:{title:"Clean files",text:"Clears files generated by compiling thesystem, including: serialized outputs, SVG images, and sequence design specifications."},handler:this.clean,scope:this},{text:"Compile with Compiler v2b ",handler:this.compileTerse,scope:this},{text:"Compile locally ",handler:this.compileLocal,scope:this}]},{iconCls:"compile",text:"Serialize",rowspan:1,disabled:!0,ref:"serializeMenu",tooltip:{title:"Serialize System",text:"View and edit serialized forms of nodal system, including TerseML, PIL, and SVG, for further processing (must compile first). "},menu:[{text:"TerseML",iconCls:"txt",ref:"txt",disabled:!0,handler:_.bind(this.openFile,this,"txt")},{text:"DyNAML",iconCls:"dynaml",ref:"dynaml",disabled:!0,handler:_.bind(this.openFile,this,"dynaml")},{text:"PIL",iconCls:"pil",ref:"pil",disabled:!0,handler:_.bind(this.openFile,this,"pil")},{text:"SVG",iconCls:"svg",ref:"svg",disabled:!0,handler:_.bind(this.openFile,this,"svg")}]},{iconCls:"sequence",text:"Sequence",rowspan:1,disabled:!0,ref:"sequenceMenu",tooltip:{title:"Sequence System",text:"Opens the system in a sequence editor to perform sequence design. Available sequence editors: NUPACK multi-objective, Web DD, and SpuriousC."},menu:[{text:"SpuriousC",iconCls:"spurious-c",ref:"spur",disabled:!0,handler:_.bind(this.openFile,this,"spur")},{text:"NUPACK",iconCls:"nupack",ref:"nupack",disabled:!0,handler:_.bind(this.openFile,this,"nupack")},{text:"Web DD",iconCls:"seq",ref:"domains",disabled:!0,handler:_.bind(this.openFile,this,"domains")}]}]},{xtype:"buttongroup",title:"Simulation",columns:1,disabled:!0,defaults:{},items:[{text:"Enumerate",iconCls:"enumerate",iconAlign:"left"},{text:"Simulate",iconCls:"simulate",iconAlign:"left"}]}]}},getDoc:function(){return this.ribbon.canvas.doc?this.ribbon.canvas.doc:this.ribbon.canvas.document},initComponent:function(){this.callParent(arguments),_.each(this.query("*[ref]"),function(a){this[a.ref]=a},this),this.mixins.tips.init.apply(this,arguments),this.sequenceMenu.on("click",this.doUpdateMenus,this),this.serializeMenu.on("click",this.doUpdateMenus,this)},init:function(){this.updateMenus(!0)},doUpdateMenus:function(){this.updateMenus(!1)},updateMenus:function(a){a=a||!1,a||this.ribbon.canvas.renew();var b=this.getDoc(),c=b.getBasename();b&&_.each(["txt","dynaml","pil","svg","nupack","spur","domains"],function(a){b.getSiblingByName(App.Path.repostfix(c,a))?(this.sequenceMenu.enable(),this.serializeMenu.enable(),this[a].enable()):this[a].disable()},this)},enableMenus:function(){this.sequenceMenu.enable(),this.serializeMenu.enable()},openFile:function(a){var b=this.getDoc(),c=b.getBasename(),d=b.getSiblingByName(App.Path.repostfix(c,a));d&&App.ui.Launcher.launchDocument(d)},clean:function(){var a=this.ribbon.canvas.doc.getDocumentPath();App.runTask("Nodal",{node:a,action:"clean"},_.bind(function(){Ext.msg("Nodal Build","Build of system <strong>{0}</strong> completed.",this.getDoc().getBasename())},this))},serialize:function(){this.serializeDynaml();var a=Workspace.tools.nodal.serializeTerse(this.ribbon.canvas.workspace);console.log(a)},compile:function(){this.compileDynamicServer()},compileLocal:function(){var a=this.compileDynamic();console.log(a.toSVGOutput())},compileDynamic:function(){var a=this.serializeDynaml(),b=App.dynamic.Compiler.compileLibrary(a);return b},compileDynamicServer:function(){var a=Ext.encode(this.serializeDynaml()),b=this.ribbon.canvas.doc.getDocumentPath();App.runTask("Nodal",{node:b,data:a,action:"dynamic"},_.bind(function(){Ext.msg("Nodal Build","Build of system <strong>{0}</strong> completed.",this.getDoc().getBasename()),this.highlightOutput()},this))},compileTerse:function(){var a=this.serializeTerse(),b=this.ribbon.canvas.doc.getDocumentPath();App.runTask("Nodal",{node:b,data:a,action:"all"},_.bind(function(){Ext.msg("Nodal Build","Build of system <strong>{0}</strong> completed.",this.getDoc().getBasename()),this.highlightOutput()},this))},serializeDynaml:function(){return Workspace.tools.nodal.serializeDynaml(this.ribbon.canvas.workspace)},serializeTerse:function(){return Workspace.tools.nodal.serializeTerse(this.ribbon.canvas.workspace)},highlightOutput:function(){this.outputTip||(this.outputTip=Ext.create("Ext.tip.ToolTip",{target:this.implementationGroup.getEl(),anchor:"left",title:"View compilation results",html:'Use these buttons to quickly view the compiled system. Use the "Serialize" button to view visual and textual representations of the system. Use the Sequence button to see options for sequence design. ',closable:!0,autoHide:!0,dismissDelay:1e4,showDelay:1500})),this.serializeButton.tip&&this.serializeButton.tip.hide(),this.outputTip.show()},spuriousDesign:function(){var a=this.ribbon.canvas.doc.getSiblingByName("spurious-out");a&&App.runTask("Spurious",{node:a.getPath()})}}),Ext.ns("Workspace.tools.nodal"),Workspace.tools.nodal.serializeTerse=function(a){return a.buildManager.serializeTerse()},Workspace.tools.nodal.serializeDynaml=function(a){return a.buildManager.serializeDynaml()};
Ext.define("App.ui.secondary.HomeTab",{extend:"App.ui.ToolsTab",require:["Workspace.tools.secondary.ComplementarityTool"],alias:"widget.secondary-hometab",generateConfig:function(){return{dockedItems:[{xtype:"toolbar",items:[{xtype:"buttongroup",title:"Tools",columns:2,defaults:{},items:[{iconCls:"cursor-icon",enableToggle:!0,toggleGroup:"toolbox",toolName:"pointer",pressed:!0,tooltip:{title:"Pointer Tool",text:"Select, move, and resize objects. Click objects or drag boxes around them to select. Grab and drag to move. Drag hangles to resize (objects without handles can't be resized)."}},{iconCls:"pencil",enableToggle:!0,toggleGroup:"toolbox",toolName:"pencil",tooltip:{title:"Pencil Tool",text:"Draw freehand objects. Click and drag to start drawing; release to finish."}},{iconCls:"text-icon",enableToggle:!0,toggleGroup:"toolbox",toolName:"textbox",tooltip:{title:"Text Tool",text:"Enter and edit text. Click or click and drag to insert a textbox. Click a textbox to edit text."}},{iconCls:"math-icon",toggleGroup:"toolbox",enableToggle:!0,toolName:"math",tooltip:{title:"Equations",text:"Insert mathematical equations. Click and drag to draw an equation box."}}]},{xtype:"buttongroup",title:"Domains",columns:2,defaults:{},items:[{enableToggle:!0,toggleGroup:"toolbox",toolName:"domain_complement",rowspan:2,scale:"medium",iconCls:"arrow-24",iconAlign:"top",text:"Connect",tooltip:{title:"Complementarity",text:"Indicate complementary ports. Click and drag from an output port to an input port to create a complementarity relationship."}},{enableToggle:!0,toggleGroup:"toolbox",toolName:"strand",iconCls:"polyline",text:"Strand",rowspan:1,tooltip:{title:"Strand",text:"Click to begin drawing a strand. While drawing, click to indicate a boundary between domains. Double-click to finish."}},{enableToggle:!0,toggleGroup:"toolbox",iconCls:"line",toolName:"domain",text:"Domain",rowspan:1,tooltip:{title:"Domain",text:"TBD."}}]},{xtype:"buttongroup",title:"Object",columns:2,defaults:{},items:[{scale:"medium",rowspan:2,iconAlign:"top",iconCls:"delete-24",text:"Delete",handler:this.deleteObjects,scope:this,tooltip:{title:"Delete",text:"Deletes the selected objects."},enableIf:function(a,b){return b.getCount()>0}}]},"->",{xtype:"buttongroup",title:"Workspace",columns:1,defaults:{},items:[{scale:"small",iconCls:"save",text:"Save",rowspan:1,handler:this.saveWorkspace,scope:this},{scale:"small",iconCls:"expand",text:"Expand",rowspan:1,handler:this.expandWorkspace,scope:this}]}]}]}}});
Ext.define("App.ui.CommandTab",{extend:"App.ui.ToolsTab",alias:"widget.commandtab",requires:["App.ui.CodeMirror"],generateConfig:function(){return this.codemirror=Ext.create("App.ui.CodeMirror",{style:"border-width:0;",mode:"javascript",bodyStyle:"background: #fff !important;",frame:!1,rbar:[{iconCls:"run",handler:this.runCommand,scope:this}],onKeyEvent:Ext.bind(function(a,b){if(b.keyCode==13&&b.shiftKey&&b.type=="keydown")return b.stop(),this.runCommand(),!1},this)}),{layout:"fit",items:[this.codemirror]}},runCommand:function(){var a=this.ribbon.workspace.getSelection();App.ui.Launcher.console.executeInContext(this.codemirror.getValue(),this.ribbon.workspace,!0,{selection:a})}},function(){});
Ext.define("App.ui.nodal.CommandTab",{extend:"App.ui.CommandTab",alias:"widget.nodal-commandtab"},function(){});
Ext.define("Workspace.objects.secondary.Strand",{extend:"Workspace.objects.SegmentedPath",require:["Workspace.objects.secondary.Domain"],childWType:"Workspace.objects.secondary.Domain"},function(){Workspace.reg("Workspace.objects.secondary.Strand",Workspace.objects.secondary.Strand)});
Ext.define("Workspace.objects.dna.InputPort",{extend:"Workspace.objects.Path",mixins:{port:"Workspace.objects.dna.NodePort"},constructor:function(){this.callParent(arguments),this.mixins.port.constructor.apply(this,arguments)},wtype:"Workspace.objects.dna.InputPort",role:"input",width:12,height:12,polarity:1,shape:"triangle",stroke:"orange",strokeWidth:2,dtheta:30,name:"Input Port",path:!1,render:function(){this.arguments=[this.get("x")+this.getRadiusX(),this.get("y")+this.getRadiusY(),this.getRadiusX()],Workspace.objects.Path.superclass.render.call(this),this.path=this.vectorElement.attr("path"),this.updateDimensions(),this.mixins.port.render.apply(this,arguments)}},function(){Workspace.reg("Workspace.objects.dna.InputPort",Workspace.objects.dna.InputPort)});
Ext.define("Workspace.objects.dna.NodeLayout",{extend:"Workspace.idea.BaseLayout",doLayout:function(){if(!this.ignore){var a=this.getObjects().getCount(),b=this.idea.get("theta"),c=360/a,d=this.idea.getCenterX(),e=this.idea.getCenterY(),f=this.idea.getRadiusX(),g=this.idea.getRadiusY();this.ignore=!0,this.getObjects().each(function(a){a.is("rendered")&&(a.setPosition(parseInt(d+Math.cos(Raphael.rad(b))*f-a.getWidth())+this.paddingTop,parseInt(e+Math.sin(Raphael.rad(b))*g-a.getHeight())+this.paddingLeft),a.set("rotation",b+(a.dtheta?a.dtheta:0)),b=(b+c)%360)},this),this.ignore=!1}},childrenMovable:!1,paddingTop:5,paddingLeft:5},function(){Workspace.Layouts.register("Workspace.objects.dna.NodeLayout",Workspace.objects.dna.NodeLayout)});
Ext.define("Workspace.objects.dna.OutputPort",{extend:"Workspace.objects.Ellipse",mixins:{port:"Workspace.objects.dna.NodePort"},wtype:"Workspace.objects.dna.OutputPort",shape:"ellipse",stroke:"#33ccff",strokeWidth:2,name:"Output Port",role:"output",width:8,height:8,polarity:1,isResizable:!1,constructor:function(){this.callParent(arguments),this.mixins.port.constructor.apply(this,arguments),this.expose("complementarity",!0,!0,!0,!1)},initialize:function(){this.complementarity&&this.set("complementarity",Workspace.Components.realize(this.complementarity)),this.callParent(arguments)},render:function(){this.callParent(arguments),this.mixins.port.render.apply(this,arguments)}},function(){Workspace.reg("Workspace.objects.dna.OutputPort",Workspace.objects.dna.OutputPort)});
Ext.define("Workspace.objects.dna.BridgePort",{extend:"Workspace.objects.Rectangle",mixins:{port:"Workspace.objects.dna.NodePort"},wtype:"Workspace.objects.dna.BridgePort",width:8,height:8,polarity:1,shape:"square",stroke:"purple",strokeWidth:2,name:"Bridge Port",role:"bridge",isResizable:!1,path:!1,constructor:function(){Workspace.objects.dna.BridgePort.superclass.constructor.apply(this,arguments),this.mixins.port.constructor.apply(this,arguments),this.expose("complementarity",!0,!0,!0,!1)},render:function(){this.arguments=[this.get("x")+this.getRadiusX(),this.get("y")+this.getRadiusY(),this.getRadiusX()],Workspace.objects.Rectangle.superclass.render.call(this),this.mixins.port.render.apply(this,arguments)},initialize:function(){this.complementarity&&this.set("complementarity",Workspace.Components.realize(this.complementarity)),this.callParent(arguments)}},function(){Workspace.reg("Workspace.objects.dna.BridgePort",Workspace.objects.dna.BridgePort)});
Ext.define("Workspace.objects.dna.MotifLayout",{extend:"Workspace.idea.BaseLayout",doLayout:function(){if(!this.ignore){var a=this.getObjects().getRange(),b=_.groupBy(a,function(a){return a.hasWType(["Workspace.objects.dna.InputPort","Workspace.objects.dna.OutputPort","Workspace.objects.dna.BridgePort"])?"ports":"others"}),c=b.ports||[],d=b.others||[];if(d.length>0){var e=!1;applyToChildren=!1,box=Workspace.Utils.getBox(d),box=Workspace.Utils.padBox(box,this.idea.padding),e&&(box=Workspace.Utils.boxUnion(box,this.idea.getBox())),this.ignore=!0,this.idea.setBox(box,applyToChildren),this.ignore=!1}var f=c.length;if(f>0){var g=this.idea.get("theta"),h=360/f,i=this.idea.getCenterX(),j=this.idea.getCenterY(),k=this.idea.getRadiusX(),l=this.idea.getRadiusY();this.ignore=!0,_.each(c,function(a){a.is("rendered")&&(a.setPosition(parseInt(i+Math.cos(Raphael.rad(g))*k-a.getWidth())+this.paddingTop,parseInt(j+Math.sin(Raphael.rad(g))*l-a.getHeight())+this.paddingLeft),a.set("rotation",g+(a.dtheta?a.dtheta:0)),g=(g+h)%360)},this),this.ignore=!1}}},childrenMovable:!1,paddingTop:5,paddingLeft:5},function(){Workspace.Layouts.register("Workspace.objects.dna.MotifLayout",Workspace.objects.dna.MotifLayout)});
Ext.define("Workspace.tools.LineTool",{requires:["Workspace.objects.Path","Workspace.objects.secondary.Domain"],constructor:function(a,b){this.workspace=a,Ext.apply(this,b,{parameters:{}}),Workspace.tools.LineTool.superclass.constructor.call(this,a,b),Ext.apply(this.parameters,App.Stylesheet.Draw),this.dragging=!1,this.proto=!1,this.x1=0,this.y1=0},extend:"Workspace.tools.BaseTool",targetWType:"Workspace.objects.Path",targetWType:"Workspace.objects.secondary.Domain",click:function(a,b){a.stopEvent()},dblclick:function(a,b){a.stopEvent()},mousedown:function(a,b){this.dragging=!0,this.proto&&this.proto.remove(),this.createProto(a)},mouseup:function(a,b){this.dragging=!1;if(this.proto){var c=this.getAdjustedXY(a);this.x2=c.x,this.y2=c.y;var d=this.workspace.createObject({wtype:this.targetWType,points:[[this.x1,this.y1],[this.x2,this.y2]]});this.proto.remove(),this.workspace.setSelection([d])}},mousemove:function(a,b){if(this.dragging){this.proto||this.createProto(a);var c=this.getAdjustedXY(a);this.x2=c.x,this.y2=c.y,this.proto.attr({path:[["M",this.x1,this.y1],["L",this.x2,this.y2]]})}},createProto:function(a){var b=this.getAdjustedXY(a);this.x1=b.x,this.y1=b.y,this.proto=this.workspace.paper.path([["M",this.x1,this.y1]]),this.proto.attr(this.parameters)}},function(){Workspace.Tools.register("line",Workspace.tools.LineTool)});
Ext.define("Workspace.tools.ChemTool",{requires:["Workspace.tools.SelectorBand","Workspace.objects.ChemStructureObject","Workspace.tools.ChemDrawTool"],constructor:function(a,b){this.workspace=a,Ext.apply(this,b,{parameters:{}}),this.callParent(arguments),Ext.apply(this.parameters,{fill:"#fff",stroke:"#000"}),this.dragging=!1,this.proto=!1,this.x1=0,this.y1=0},extend:"Workspace.tools.BaseTool",minWidth:75,maxWidth:!1,minHeight:30,maxHeight:!1,dblclick:function(a,b){a.stopEvent()},mousedown:function(a,b){this.dragging=!0,this.proto&&(this.proto.remove(),this.proto=!1),a.stopEvent()},mouseup:function(a,b){this.dragging=!1;if(this.proto){var c=this.getAdjustedXY(a);this.x2=c.x,this.y2=c.y;var d=Workspace.tools.SelectorBand.calculateBandBox(this.x1,this.y1,this.x2,this.y2),e=this.workspace.createObject({wtype:"Workspace.objects.ChemStructureObject",x:d.x,y:d.y,width:Workspace.Utils.bounds(d.width,this.minWidth,this.maxWidth),height:Workspace.Utils.bounds(d.height,this.minHeight,this.maxHeight)});this.proto.remove(),this.proto=!1,this.workspace.edit(e),this.workspace.setActiveTool("pointer")}a.stopEvent()},mousemove:function(a,b){if(this.dragging){this.proto||this.createProto(a);var c=this.getAdjustedXY(a);this.x2=c.x,this.y2=c.y;var d=Workspace.tools.SelectorBand.calculateBandBox(this.x1,this.y1,this.x2,this.y2);this.x=d.x,this.y=d.y,this.width=d.width,this.height=d.height,this.anchor=d.anchor,delete d.anchor,this.proto.attr(d),a.stopEvent()}},createProto:function(a){var b=this.getAdjustedXY(a);this.x1=b.x,this.y1=b.y,this.proto=this.workspace.paper.rect(this.x1,this.y1,0,0),this.proto.attr(this.parameters)},deactivate:function(){this.proto&&(this.proto.remove(),this.proto=!1)}},function(){Workspace.Tools.register("chem",Workspace.tools.ChemTool)});
Ext.define("Workspace.Label",{constructor:function(a){Ext.applyIf(a,{elementSpec:{},tag:"div",cls:"workspace-label",offsets:[0,-3]}),Ext.applyIf(a.elementSpec,{tag:a.tag,cls:a.cls}),Workspace.Label.superclass.constructor.apply(this,arguments)},extend:"Workspace.Shim",property:"name",padding:5,editable:!0,render:function(){Workspace.Label.superclass.render.apply(this,arguments),this.editable&&(this.editor=new Ext.ux.LabelEditor({labelSelector:"#"+this.getEl().id}),this.editor.attachTo(this.getEl(),this.object.workspace.getEl()),this.editor.on("complete",this.onSave,this)),this.element.unselectable(),this.metrics=new Ext.util.TextMetrics(this.getEl());var a=this.object.get(this.property);this.onChange(this.property,a),this.onMove()},format:function(a){return a},onSave:function(a,b){this.property&&this.object&&this.object.set(this.property,b)},applyTo:function(){Workspace.Label.superclass.applyTo.apply(this,arguments),this.object&&(this.object.on("change",this.onChange,this),this.object.on("resize",this.onMove,this))},updateSize:function(a){this.getEl()&&this.getEl().setHeight(this.metrics.getHeight(a)+this.padding)},onMove:function(){this.updateSize(this.object.get(this.property)),Workspace.Label.superclass.onMove.apply(this,arguments)},onChange:function(a,b){a==this.property&&!this.ignoreNext&&this.getEl()&&(b=this.format(b),this.getEl().update(b),this.updateSize(b))},destroy:function(){this.object.un("change",this.onChange,this),this.object.un("resize",this.onMove,this),this.editor&&this.editor.destroy(),Workspace.Label.superclass.destroy.apply(this,arguments)}});
Ext.define("Workspace.objects.IdeaObject",{constructor:function(a,b){Workspace.objects.IdeaObject.superclass.constructor.apply(this,arguments),this.autoFill&&this.set("fill",Workspace.Utils.ideaColor()),this.initLayout(this.layout),this.expose("layout",function(){return this.layout.ltype},function(a){this.initLayout(a)},!0,!1)},requires:["Workspace.Label","Ext.util.MixedCollection"],extend:"Workspace.objects.Rectangle",wtype:"Workspace.objects.IdeaObject",layout:"Workspace.idea.FreeLayout",showTitle:!0,name:"New Idea",iconCls:"idea",r:5,stroke:"#CCC",padding:50,autoFill:!0,destroyChildren:!1,suspendLayout:!1,render:function(){this.callParent(arguments),this.layout.doFirstLayout(),this.toBack()},initLayout:function(a){this.layout=Workspace.Layouts.create(a,{idea:this}),this.rendered&&this.layout.doFirstLayout()},doLayout:function(){this.layout&&this.layout.doLayout&&this.layout.doLayout()},buildChildren:function(){this.suspendLayout=!0,this.callParent(arguments),this.suspendLayout=!1,this.adjustSize()},addChild:function(a){this.callParent(arguments),a.on("move",this.adjustSize,this),a.on("resize",this.adjustSize,this),a.is("rendered")&&this.adjustSize()},removeChild:function(a){this.callParent(arguments),a.un("move",this.adjustSize,this),a.un("resize",this.adjustSize,this),this.adjustSize()},adjustSize:function(){this.is("rendered")&&(this.ignoreTranslateChildren||this.updateSize(!0,!1))},updateSize:function(a,b){this.ignoreTranslateChildren=!0,this.suspendLayout||this.layout.doLayout(b),this.ignoreTranslateChildren=!1},childCanMove:function(a){return this.layout.childrenMovable},destroy:function(){this.destroyChildren&&this.workspace.deleteObjects(this.children.getRange()),this.layout.destroy(),this.callParent(arguments)}},function(){Workspace.reg("Workspace.objects.IdeaObject",Workspace.objects.IdeaObject)});
Ext.define("Workspace.objects.dna.AbstractNode",{extend:"Workspace.objects.IdeaObject",wtype:"Workspace.objects.dna.AbstractNode",layout:"Workspace.objects.dna.NodeLayout",requires:["Workspace.objects.Ellipse","Workspace.objects.dna.NodeLayout","Workspace.objects.dna.InputPort","Workspace.objects.dna.OutputPort","Workspace.objects.dna.BridgePort","Workspace.objects.dna.Motifs","Workspace.ConnectionLabel"],statics:{nextName:function(){var a=-1,b="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return function(){a++;var c="",d=a;do c+=b.charAt(d%26),d-=25;while(d>0);return c}}()},motif:"0",name:!1,shape:"ellipse",width:30,height:30,strokeWidth:2.5,autoFill:!1,fill:"#ffffff",stroke:"#000000",theta:180,destroyChildren:!0,isResizable:!1,polarity:0,portCounter:-1,constructor:function(){this.shimConfig={cls:"workspace-label-callout",offsets:[0,-5]},this.callParent(arguments),this.expose("polarity",!0,!0,!0,!1),this.expose("theta",!0,!0,!0,!1),this.workspace.buildManager&&this.workspace.buildManager.on("rebuild",this.onRebuild,this),this.name||(this.name=this.nextName()),this.on("change:theta",function(){this.layout.doLayout()},this)},render:function(){this.arguments=[this.get("x")+this.getRadiusX(),this.get("y")+this.getRadiusY(),this.getRadiusX(),this.getRadiusY()],Workspace.objects.Ellipse.superclass.render.call(this),this.layout.doFirstLayout(),this.toBack(),this.addShim(new Workspace.ConnectionLabel({cls:"workspace-label-plain workspace-label-small",offsets:[0,2],property:"motif",editable:!1}))},highlightError:function(){this.errorProxy||(this.errorProxy=this.getHighlightProxy(),this.errorProxy.stroke="#aa0000"),this.errorProxy.render(this.vectorElement),this.errorProxy.attachTo(this),this.errorProxy.show()},hideError:function(){this.errorProxy&&this.errorProxy.hide()},nextPortName:function(){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZ",b,c=_.filter(this.getChidren,function(a){return a.isWType(["Workspace.objects.dna.InputPort","Workspace.objects.dna.OutputPort","Workspace.objects.dna.BridgePort"])});do this.portCounter++,b=a[this.portCounter];while(!!_.find(c,function(a){return a.get("name")==b}));return b},nextName:function(){},onRebuild:function(){},getRealtime:function(a){},getLibraryObject:function(){},destroy:function(){this.errorProxy&&(this.errorProxy.destroy(),delete this.errorProxy()),this.callParent(arguments)}},function(){Workspace.objects.dna.AbstractNode.borrow(Workspace.objects.Ellipse,["getRadiusX","getRadiusY","getCenterX","getCenterY","updateX","updateY","updateWidth","updateHeight"]),Workspace.reg("Workspace.objects.dna.AbstractNode",Workspace.objects.dna.AbstractNode)});
Ext.define("Workspace.objects.dna.Node",{extend:"Workspace.objects.dna.AbstractNode",wtype:"Workspace.objects.dna.Node",motif:"0",name:!1,polarity:0,render:function(){this.callParent(arguments),this.addShim(new Workspace.ConnectionLabel({cls:"workspace-label-plain workspace-label-small",offsets:[0,2],property:"motif",editable:!1}))},constructor:function(){this.callParent(arguments),this.expose("motif",!0,!0,!0,!1),this.expose("computedPolarity",function(){return this.getRealtime("polarity")},!1,!1,!1),this.expose("structure",function(){var a=this.getLibraryObject(),b=a?a.getStructure():null;try{return b?b.toDotParen():""}catch(c){return""}},!1,!1,!1),this.expose("annotatedStructure",function(){var a=this.getLibraryObject(),b=a?a.getAnnotatedStructure():null;return b})},isReal:function(){var a=this.getParent();return a?a.isWType("Workspace.objects.dna.Motif"):!1},nextName:function(){return this.workspace.buildManager.getNextNodeName()},onRebuild:function(){this.change("computedPolarity",this.get("computedPolarity")),this.change("structure",this.get("structure"))},getRealtime:function(a){if(this.workspace.buildManager)return this.workspace.buildManager.getRealtime("node",this.get("name"),a)},getLibraryObject:function(){if(this.workspace.buildManager)return this.workspace.buildManager.getRealtime("node",this.get("name"),"this")}},function(){Workspace.reg("Workspace.objects.dna.Node",Workspace.objects.dna.Node)});
Ext.define("Workspace.tools.nodal.NodeTool",{extend:"Workspace.tools.BaseTool",defaultMotif:"0",statics:{},requires:["Workspace.objects.dna.Node","Workspace.tools.nodal.PortTool"],click:function(a,b){var c=this.getAdjustedXY(a);this.buildMotif(this.defaultMotif,c.x,c.y)},buildMotif:function(a,b,c){return this.workspace.buildManager.buildMotif(a,b,c)},buildPort:function(a){return this.workspace.buildManager.buildPort(a)}},function(){Workspace.Tools.register("node",Workspace.tools.nodal.NodeTool)});
Ext.define("Workspace.objects.dna.Motif",{extend:"Workspace.objects.dna.AbstractNode",wtype:"Workspace.objects.dna.Motif",layout:"Workspace.objects.dna.MotifLayout",name:!1,proxifyOnMove:!0,polarity:0,stroke:"#888",requires:["Workspace.objects.dna.MotifLayout"],constructor:function(){this.callParent(arguments),this.expose("nodes",function(){return _.filter(this.getChildren(),function(a){return a.hasWType("Workspace.objects.dna.Node")})},!1,!1,!1),this.workspace.buildManager&&this.workspace.buildManager.on("rebuild",this.onRebuild,this),this.expose("dynaml",!0,!0,!0,!1),this.on("change:dynaml",this.syncDynaml,this)},render:function(){this.callParent(arguments)},syncDynaml:function(){var a=this.get("dynaml"),b;if(a){try{_.isString(a)&&(a=JSON.parse(a))}catch(c){return console.log(c)}a.library=App.dynamic.Library.dummy();var d=new App.dynamic.Motif(a),e=_.groupBy(d.getDomains(),"role"),f=_.groupBy(this.getChildren(),"wtype"),g={input:_.groupBy(f["Workspace.objects.dna.InputPort"]||[],function(a){return a.get("name")}),output:_.groupBy(f["Workspace.objects.dna.OutputPort"]||[],function(a){return a.get("name")}),bridge:_.groupBy(f["Workspace.objects.dna.BridgePort"]||[],function(a){return a.get("name")})},h=[],i=[];_.each(e,function(a,b){g[b]&&(_.each(a,function(a,c){g[b][c]?delete g[b][a.getName()]:i.push(a)}),h=_.chain(g[b]).values().flatten().concat(h).value())}),this.workspace.deleteObjects(h),this.suspendLayout=!0,_.each(i,function(a){a=this.makePort(a),!a||this.addChild(a)},this),this.suspendLayout=!1,this.doLayout()}},makePort:function(a){var b=_.clone(a),c={};if(_.isObject(b)&&Workspace.objects.dna.PortClasses[b.role])return c.name=b.name,c.wtype=Workspace.objects.dna.PortClasses[b.role],c.stroke=App.dynamic.Compiler.getColor(b),c.segments=b.segments,c.role=b.role,this.workspace.buildManager.buildPort(c)},nextName:function(){return this.workspace.buildManager.getNextMotifName()},onRebuild:function(){},getRealtime:function(a){if(this.workspace.buildManager)return this.workspace.buildManager.getRealtime("motif",this.get("name"),a)},getLibraryObject:function(){if(this.workspace.buildManager)return this.workspace.buildManager.getRealtime("motif",this.get("name"),"this")}},function(){Workspace.reg("Workspace.objects.dna.Motif",Workspace.objects.dna.Motif)});
Ext.define("Workspace.tools.nodal.MotifTool",{targetWType:"Workspace.objects.dna.Motif",constructor:function(a,b){this.callParent(arguments)},requires:["Workspace.objects.dna.Motif"],extend:"Workspace.tools.IdeaTool",alternateAction:function(a,b,c){var d=this.workspace.createObject({wtype:this.targetWType,children:[],x:c.x,y:c.y});d.toBack(),d.select(),this.workspace.changeTool("pointer")},buildIdeaFromSelection:function(){function e(a,b){return a?!b:b}var a=_.groupBy(this.workspace.getSelection(),"wtype"),b=a["Workspace.objects.dna.Node"],c=a["Workspace.objects.dna.Complementarity"],d=_.reduce(b,function(a,b){return a[b.getId()]=b,a},{});c=_.filter(c,function(a){if(a.hasWType("Workspace.objects.dna.Complementarity")){var b=a.get("leftObject"),c=a.get("rightObject");return b&&c&&!!d[b.getParent().getId()]&&!!d[c.getParent().getId()]}return!1});var f=this.workspace.filterObjectsBy(function(a){if(a.hasWType("Workspace.objects.dna.Complementarity")){var b=a.get("leftObject"),c=a.get("rightObject");return b&&c&&e(!!d[b.getParent().getId()],!!d[c.getParent().getId()])}return!1});this.workspace.deleteObjects(f),children=b.concat(c);if(children.length>0){var g=this.workspace.createObject({wtype:this.targetWType,children:children});g.toBack()}return g}},function(){Workspace.Tools.register("motif",Workspace.tools.nodal.MotifTool)});
Ext.define("Workspace.tools.VectorTool",{constructor:function(a,b){this.workspace=a,Ext.apply(this,b,{}),this.callParent(arguments),this.dragging=!1,this.handles=Ext.create("Ext.util.MixedCollection")},extend:"Workspace.tools.BaseTool",requires:["Workspace.tools.VectorHandle"],attach:function(a){return a.editable&&a.element?(a.unhighlight&&a.unhighlight(),this.addHandles(a),this.item=a,!0):!1},detach:function(){this.item&&(this.removeHandles(this.item),this.item=!1)},createHandle:function(a,b,c){var d={item:a,index:b,forceFront:!0};return a.constrain&&(d.constrain=_.bind(a.constrain,a)),Ext.create("Workspace.tools.VectorHandle",this.workspace,d)},addHandles:function(a){if(!this.handles.containsKey(a.getId())){var b=[],c=a.get("points");c&&(_.each(c,function(d,e){b.push(this.createHandle(a,e,c))},this),this.handles.add(a.getId(),b))}},removeHandles:function(a){a?(!Ext.isString(a)&&Ext.isFunction(a.getId)&&(a=a.getId()),Ext.isString(a)&&this.handles.containsKey(a)&&(handles=this.handles.get(a),_.each(handles,function(a){a&&a.destroy()}),this.handles.removeAtKey(a))):(this.handles.each(function(a){for(handle in a)Ext.isFunction(a[handle].destroy)&&a[handle].destroy()}),this.handles.clear())},click:function(a,b){},dblclick:function(a,b){(!b||b&&b.getId&&b.getId()!=this.item.getId())&&this.workspace.endEdit()},mousedown:function(a,b){},mouseup:function(a,b){},mousemove:function(a,b){},deactivate:function(){this.detach(),this.callParent(arguments)}},function(){Workspace.Tools.register("vector",Workspace.tools.VectorTool)});
Ext.define("Workspace.tools.PolyLineTool",{targetWType:"Workspace.objects.Path",constructor:function(a,b){this.workspace=a,Ext.apply(this,b,{parameters:App.Stylesheet.Draw}),Workspace.tools.PolyLineTool.superclass.constructor.call(this,a,b),this.drawing=!1,this.dragging=!1,this.currentPath=!1,this.currentPoints=!1,this.currentShape=!1},extend:"Workspace.tools.BaseTool",requires:["Workspace.tools.VectorTool","Workspace.objects.Path","Workspace.objects.SegmentedPath"],startDrawing:function(a){this.drawing=!0,this.x1=parseInt(a.x),this.y1=parseInt(a.y),this.lastPos=a,this.currentPoints=[[this.x1,this.y1]],this.currentPath=[["M",this.x1,this.y1]],this.currentPath.push(["L",this.x1,this.y1]),this.points=[[this.x1,this.y1]],this.currentShape=this.workspace.paper.path(this.currentPath),this.currentShape.attr(this.parameters)},addPoint:function(a){this.x=parseInt(a.x),this.y=parseInt(a.y),this.lastPos={x:this.x,y:this.y},this.currentPoints.push([this.x,this.y]),this.currentPath.push(["L",this.x,this.y]),this.points.push([this.x,this.y]),this.currentShape.attr({path:this.currentPath})},mousedown:function(a,b){this.dragging=!0;var c=this.snapXY(this.getAdjustedXY(a),this.lastPos);this.mousedownPos=c,a.stopEvent()},mouseup:function(a,b){this.dragging=!1;var c=this.snapXY(this.getAdjustedXY(a),this.lastPos);this.mouseupPos=c,this.drawing?this.addPoint(this.mouseupPos,this.mousedownPos):this.startDrawing(c),a.stopEvent(),this.mousedownPos=!1,this.mouseupPos=!1},dblclick:function(a,b){this.currentPoints.pop(),this.currentPath.pop(),this.points.pop();var c=this.workspace.createObject(this.buildObject());this.stopDrawing(),this.workspace.setSelection([c]),a.stopEvent()},stopDrawing:function(){this.drawing=!1,this.dragging=!1,this.currentShape&&this.currentShape.remove(),this.currentPath=!1,this.currentShape=!1,this.currentPoints=!1,this.lastPos=null,this.points=!1},buildObject:function(){return{wtype:this.targetWType,points:this.currentPoints,fillOpacity:.1}},mousemove:function(a,b){if(this.drawing){var c=this.snapXY(this.getAdjustedXY(a),this.lastPos);this.updateDrawing(c,this.mousedownPos)}a.stopEvent()},updateDrawing:function(a,b){this.currentPath.pop(),this.currentPath.push(["L",parseInt(a.x),parseInt(a.y)]),this.currentShape.attr({path:this.currentPath})},deactivate:function(){this.stopDrawing(),this.callParent(arguments)},snapXY:function(a,b){return a}},function(){Workspace.Tools.register("polyline",Workspace.tools.PolyLineTool)});
Ext.define("Workspace.tools.secondary.StrandTool",{constructor:function(a,b){this.callParent(arguments),Ext.apply(this.parameters,{stroke:"#aaa","stroke-width":2,"stroke-dasharray":""}),this.bases=[]},extend:"Workspace.tools.PolyLineTool",requires:["Workspace.objects.secondary.Strand"],bulgeThreshold:10,baseSpacing:10,baseRadius:3,buildObject:function(){return{wtype:"Workspace.objects.secondary.Strand",points:this.currentPoints,fillOpacity:.1,baseSpacing:10}},getDistance:function(a,b){function c(a,b){return Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2))}return c([a.x,a.y],[b.x,b.y])},snapDistance:function(a){return this.baseSpacing*this.countBases(a)},countBases:function(a){return Math.floor(a/this.baseSpacing)},nextPosition:function(a,b,c){return{x:a.x+Math.cos(b)*c,y:a.y+Math.sin(b)*c}},snapXY:function(a,b){if(b){var c=this.getDistance(a,b),d=this.snapDistance(c),e=Math.atan2(a.y-b.y,a.x-b.x);return this.nextPosition(b,e,d)}return a},makeBase:function(){var a=this.workspace.paper.circle(0,0,this.baseRadius);return a.attr({fill:this.parameters.stroke,stroke:this.parameters.stroke}),a},moveBase:function(a,b,c,d){a.attr({cx:b,cy:c,transform:"R"+d})},addPoint:function(a,b){var c=App.Geom.Point.fromMixed(a).distance(b);if(c>this.bulgeThreshold)var d=b,e=[d.x,d.y,c];else var d=a,e=[d.x,d.y];var f=this.getCommand(a,b,c);this.x=parseInt(d.x),this.y=parseInt(d.y),this.lastPos={x:this.x,y:this.y},this.currentPoints.push(e),this.currentPath.push(f),this.points.push(e),console.log(this.points),this.currentShape.attr({path:this.currentPath}),this.bases=this.bases.concat(this.segmentBases),this.segmentBases=[]},getCommand:function(a,b,c){if(b){c||(c=App.Geom.Point.fromMixed(a).distance(b));if(c>this.bulgeThreshold){var d=App.Geom.Point.fromMixed(_.last(this.currentPoints)),e=App.Geom.Point.fromMixed(b),f=d.midpoint(e),g=f.addPolar(d.angle(e)+Math.PI/2,-c),h=Math.abs(c),i=g.addPolar(d.angle(e),-h),j=g.addPolar(d.angle(e),h);return["C",i.x,i.y,j.x,j.y,e.x,e.y]}}return["L",parseInt(a.x),parseInt(a.y)]},updateDrawing:function(a,b){var c;this.dragging?c=this.getCommand(a,b):c=this.getCommand(a),this.currentPath.pop(),this.currentPath.push(c),this.currentShape.attr({path:this.currentPath});var d=_.last(this.currentPath,2),e=[["M"].concat(_.last(d[0],2)),c],f=Raphael.getTotalLength(e),g=this.countBases(f),h=Math.atan2(a.y-this.lastPos.y,a.x-this.lastPos.x);if(g>this.segmentBases.length)for(var i=0,j=g-this.segmentBases.length;i<j;i++)this.segmentBases.push(this.makeBase());else if(g<this.segmentBases.length)for(var i=0,j=this.segmentBases.length-g;i<j;i++){var k=this.segmentBases.pop();k.remove()}var l=this.baseSpacing/2,m;for(var i=0;i<g;i++)m=Raphael.getPointAtLength(e,l),this.moveBase(this.segmentBases[i],m.x,m.y,m.alpha),l+=this.baseSpacing},startDrawing:function(){this.callParent(arguments),this.bases=[],this.segmentBases=[]},stopDrawing:function(){this.callParent(arguments),_.each(this.bases,function(a){a.remove()}),this.bases=[]}},function(){Workspace.Tools.register("strand",Workspace.tools.secondary.StrandTool)});
Ext.define("Workspace.tools.PolygonTool",{constructor:function(a,b){this.workspace=a,Workspace.tools.PolygonTool.superclass.constructor.call(this,a,b),Ext.apply(this.protoProps,App.Stylesheet.Draw)},extend:"Workspace.tools.PolyLineTool",dblclick:function(a,b){this.drawing=!1,this.dragging=!1,this.currentPath.pop(),this.currentPath.pop(),this.currentPath.push(["L",this.x1,this.y1]);var c=this.workspace.createObject(Workspace.objects.Path,{path:this.currentPath,fillOpacity:1});this.currentShape.remove(),this.currentPath=!1,this.currentShape=!1,this.workspace.setSelection([c]),a.stopEvent()}},function(){Workspace.Tools.register("polygon",Workspace.tools.PolygonTool)});
Ext.define("Workspace.objects.CodeObject",{requires:["Workspace.tools.CodeMirrorTool"],constructor:function(a,b){Workspace.objects.CodeObject.superclass.constructor.call(this,a,b),Ext.apply(this,{lineNumbers:!1,lineWrapping:!1}),Ext.apply(this.elementSpec,{tag:"div",cls:"textbox",children:[{tag:"textarea"}]}),this.expose("text",!0,!0,!0,!1),this.expose("mode",!0,!0,!0,!1),this.expose("theme",!0,!0,!0,!1),this.expose("lineNumbers",!0,!0,!0,!1),this.expose("lineWrapping",!0,!0,!0,!1),this.on("change:text",this.setText,this),this.on("change:mode",this.updateMode,this),this.on("change:theme",this.updateTheme,this),this.on("change:lineNumbers",_.bind(this.updateCodeMirrorOption,this,"lineNumbers")),this.on("change:lineWrapping",_.bind(this.updateCodeMirrorOption,this,"lineWrapping"))},enableLineNumbers:!1,enableLineWrapping:!1,updateCodeMirrorOption:function(a,b){this.codemirror.setOption(a,b)},updateMode:function(a){this.updateCodeMirrorOption("mode",a)},updateTheme:function(a){this.updateCodeMirrorOption("theme",a)},theme:"default",mode:"text",extend:"Workspace.objects.ElementObject",autoMaxWidth:300,wtype:"Workspace.objects.CodeObject",isEditable:!0,isSelectable:!0,isResizable:!0,text:"",name:"New Code box",iconCls:"text-icon",editor:"codemirror",render:function(){this.elementSpec.html=this.get("text"),this.callParent(arguments);var a=this.getEl().down("textarea").dom;if(a){var b=this;this.codemirror=CodeMirror.fromTextArea(a,{lineNumbers:b.get("lineNumbers"),lineWrapping:b.get("lineWrapping"),theme:b.get("theme"),mode:b.get("mode"),readOnly:"nocursor",value:b.get("text"),onCursorActivity:Ext.bind(this.onCursorActivity,this)},this)}},onCursorActivity:function(){},getText:function(){return this.get("text")},setText:function(a){this.text=a,this.codemirror.setValue(a)},sizeToFit:function(){var a=Ext.util.TextMetrics.createInstance(this.getEl());text=this.get("text"),width=a.getWidth(text),width>this.autoMaxWidth?(this.set("width",this.autoMaxWidth),a.setFixedWidth(this.autoMaxWidth)):(this.set("width",width+20),a.setFixedWidth(width+20)),this.set("height",a.getHeight(text)+20)}},function(){Workspace.reg("Workspace.objects.CodeObject",Workspace.objects.CodeObject)});
Ext.define("Workspace.tools.CodeTool",{requires:["Workspace.tools.SelectorBand","Workspace.objects.CodeObject","Workspace.tools.CodeMirrorTool"],constructor:function(a,b){this.workspace=a,Ext.apply(this,b,{parameters:{}}),this.callParent(arguments),Ext.apply(this.parameters,{fill:"#fff",stroke:"#000"}),this.dragging=!1,this.proto=!1,this.x1=0,this.y1=0},extend:"Workspace.tools.BaseTool",minWidth:75,maxWidth:!1,minHeight:30,maxHeight:!1,dblclick:function(a,b){a.stopEvent()},mousedown:function(a,b){this.dragging=!0,this.proto&&(this.proto.remove(),this.proto=!1),a.stopEvent()},mouseup:function(a,b){this.dragging=!1;if(this.proto){var c=this.getAdjustedXY(a);this.x2=c.x,this.y2=c.y;var d=Workspace.tools.SelectorBand.calculateBandBox(this.x1,this.y1,this.x2,this.y2),e=this.workspace.createObject({wtype:"Workspace.objects.CodeObject",x:d.x,y:d.y,width:Workspace.Utils.bounds(d.width,this.minWidth,this.maxWidth),height:Workspace.Utils.bounds(d.height,this.minHeight,this.maxHeight)});this.proto.remove(),this.proto=!1,this.workspace.edit(e),this.workspace.setActiveTool("pointer")}a.stopEvent()},mousemove:function(a,b){if(this.dragging){this.proto||this.createProto(a);var c=this.getAdjustedXY(a);this.x2=c.x,this.y2=c.y;var d=Workspace.tools.SelectorBand.calculateBandBox(this.x1,this.y1,this.x2,this.y2);this.x=d.x,this.y=d.y,this.width=d.width,this.height=d.height,this.anchor=d.anchor,delete d.anchor,this.proto.attr(d),a.stopEvent()}},createProto:function(a){var b=this.getAdjustedXY(a);this.x1=b.x,this.y1=b.y,this.proto=this.workspace.paper.rect(this.x1,this.y1,0,0),this.proto.attr(this.parameters)},deactivate:function(){this.proto&&(this.proto.remove(),this.proto=!1)}},function(){Workspace.Tools.register("code",Workspace.tools.CodeTool)});
Ext.define("App.ui.InsertTab",{extend:"App.ui.ToolsTab",requires:["Workspace.tools.LineTool","Workspace.tools.RectTool","Workspace.tools.EllipseTool","Workspace.tools.PolyLineTool","Workspace.tools.PolygonTool","Workspace.tools.TextTool","Workspace.tools.MathTool","Workspace.tools.CodeTool","Workspace.tools.ChemTool"],generateConfig:function(){return{items:[{xtype:"buttongroup",title:"Insert",columns:5,defaults:{cellCls:"table-cell-padded"},items:[{iconCls:"line",enableToggle:!0,toggleGroup:"toolbox",toolName:"line",tooltip:{title:"Line",text:"Draw straight lines. Click and drag to draw a line; release to finish."}},{iconCls:"rect",enableToggle:!0,toggleGroup:"toolbox",toolName:"rect",tooltip:{title:"Rectangle",text:"Draw rectangles. Click and drag a box to draw; release to finish."}},{iconCls:"ellipse",toggleGroup:"toolbox",enableToggle:!0,toolName:"ellipse",tooltip:{title:"Ellipse",text:"Draw ellipses. Click and drag to draw; release to finish."}},{iconCls:"polygon",toggleGroup:"toolbox",enableToggle:!0,tooltip:{title:"Polygon",text:"Draw closed polygons. Click once to start drawing; each click adds a point. Double-click to finish"},toolName:"polygon"},{iconCls:"path",toggleGroup:"toolbox",enableToggle:!0,toolName:"polyline",tooltip:{title:"Polylines",text:"Draw open polygons. Click once to start drawing; each click adds a point. Double-click to finish"}},{iconCls:"text-icon",enableToggle:!0,toggleGroup:"toolbox",toolName:"textbox",tooltip:{title:"Text Tool",text:"Enter and edit text. Click or click and drag to insert a textbox. Click a textbox to edit text."}},{iconCls:"math-icon",toggleGroup:"toolbox",enableToggle:!0,toolName:"math",tooltip:{title:"Equations",text:"Insert mathematical equations. Click and drag to draw an equation box."}},{iconCls:"code-icon",toggleGroup:"toolbox",enableToggle:!0,toolName:"code",tooltip:{title:"Code",text:"Insert syntax-highlighted source code. Click and drag to draw an source code textbox."}},{iconCls:"chem-icon",toggleGroup:"toolbox",enableToggle:!0,toolName:"chem",tooltip:{title:"Organic Structures",text:"Insert a box to draw organic structures. Click and drag to draw a structure box."}}]}]}}});
Ext.define("App.ui.Ribbon",{extend:"Ext.tab.Panel",alias:"widget.ribbon",requires:["App.ui.ToolsTab","App.ui.InsertTab","App.ui.FillStrokeTab","App.ui.GeometryTab","App.ui.MetaTab"],cls:"ui-ribbonbar",activeTab:0,plain:!0,margin:"5 0 0 0",autoHeight:!0,border:!1,bodyBorder:"0 1 1 1",bodyCls:"noborder-top",autoHeight:!0,initComponent:function(){Ext.applyIf(this,{activeTab:0,defaults:{border:!1,bodyBorder:!1,bodyCls:"tab-panel-body-toolbar"},tabBar:{border:!1,bodyBorder:!1}}),this.items||(this.items=[new App.ui.ToolsTab({title:"Tools",ref:"toolsTab"}),new App.ui.InsertTab({title:"Insert",ref:"insertTab"}),new App.ui.FillStrokeTab({title:"Fill and Stroke",ref:"fillStroke"}),new App.ui.GeometryTab({title:"Geometry",ref:"geometry"}),new App.ui.MetaTab({title:"Meta",ref:"metaTab"})]),Ext.each(this.items,function(a){Ext.applyIf(a,{border:!1,bodyBorder:!1})}),this.selection=[],App.ui.Ribbon.superclass.initComponent.apply(this,arguments),_.each(["toolsTab","insertTab","fillStroke","geometry","metaTab"],function(a){this[a]=this.down("*[ref="+a+"]")},this),this.items.each(function(a){a.ribbon=this,this.mon(a,"action",this.doAction,this),a.getActiveTool&&(this.mon(a,"toolchange",this.setActiveTool,this),this.mon(a,"save",this.saveWorkspace,this)),a.init&&a.init()},this)},attachTo:function(a){this.workspace=a,this.mon(this.workspace,"select",this.onSelectionChange,this,{buffer:500}),this.mon(this.workspace,"unselect",this.onSelectionChange,this,{buffer:500}),this.mon(this.workspace,"toolchange",this.onToolChange,this,{buffer:500})},setActiveTool:function(a){this.ignoreToolChange=!0,this.workspace.setActiveTool(a),this.ignoreToolChange=!1},onToolChange:function(a,b){if(!this.ignoreToolChange){var c=[];this.items.each(function(d){d.onToolChange&&d.onToolChange(a,b)&&c.push(d)}),c.length==1?this.setActiveTab(c[0]):c.length>1&&this.setActiveTab(c[0])}},doAction:function(a){var b=a.getUndo();this.workspace.doAction(a)},onSelectionChange:function(){var a=_.difference(this.workspace.getSelection(),this.selection),b=_.difference(this.selection,this.workspace.getSelection());this.bind(a),this.unbind(b),this.selection=this.workspace.getSelection()},bind:function(a){_.isArray(a)||(a=[a]),this.items.each(function(b){b.bind&&Ext.isFunction(b.bind)&&_.each(a,function(a){b.bind(a)})})},unbind:function(a){_.isArray(a)||(a=[a]),this.items.each(function(b){b.unbind&&Ext.isFunction(b.unbind)&&_.each(a,function(a){b.unbind(a)})})},saveWorkspace:function(){this.canvas.saveWorkspace()}});
Ext.define("App.ui.Canvas",{extend:"Ext.panel.Panel",layout:"border",alias:"widget.canvas",editorType:"Whiteboard",iconCls:"whiteboard",requires:["App.ui.Ribbon","App.ui.ObjectTree","App.ui.MotifPalette","App.ui.ObjectProperties"],border:!1,mixins:{app:"App.ui.Application"},constructor:function(a){this.callParent(arguments),this.mixins.app.constructor.apply(this,arguments)},initComponent:function(a){Ext.applyIf(this,{workspaceData:{},palettes:[],inspectors:[],bbarItems:[]}),Ext.apply(this,{items:[{xtype:"ribbon",region:"north",height:100,ref:"ribbon",collapseMode:"mini",canvas:this,items:this.ribbonItems||null,margins:"0 0 5 0"},{region:"center",xtype:"panel",ref:"bodyPanel",autoScroll:!0,bbar:{items:this.bbarItems.concat(["->","Zoom:&nbsp;",{ref:"zoomField",xtype:"slider",value:1,minValue:.25,maxValue:4,decimalPrecision:2,animate:!0,plugins:Ext.create("Ext.slider.Tip",{getText:function(a){return Ext.String.format("{0}%",a.value*100)}}),width:100,tooltip:{title:"Zoom",text:"Workspace zoom"}}])}},{region:"west",split:!0,collapseMode:"mini",collapsible:!0,preventHeader:!0,border:!1,width:200,layout:"border",items:[Ext.create("App.ui.ObjectTree",{region:"center",ref:"objectTree",border:!0,frame:!1,split:!0,collapsible:!0,collapseMode:"header",titleCollapse:!0,title:"Objects",root:{text:"Workspace",id:"workspace",nodeType:"node"}}),{xtype:"tabpanel",preventHeader:!0,plain:!0,title:"Palettes",ref:"palettes",region:"south",height:300,split:!0,collapsible:!0,titleCollapse:!0,border:!0,frame:!1,items:this.palettes,collapsed:this.palettes.length==0}]},Ext.create("App.ui.ObjectProperties",{ref:"objectProperties",width:250,split:!0,collapseMode:"mini",collapsible:!0,titleCollapse:!0,border:!0,frame:!1,region:"east",items:this.inspectors})]}),this.callParent(arguments),_.each(["ribbon","bodyPanel","zoomField","objectTree","palatte","objectProperties"],function(a){this[a]=this.down("*[ref="+a+"]")},this),this.bodyPanel.on("render",function(){this.loadWorkspace(),this.zoomField.on("change",this.zoomWorkspace,this)},this)},loadWorkspace:function(){this.loadFile()},autoHideLoadingMask:!1,onLoad:function(){this.workspaceData=Ext.isEmpty(this.data)?{}:Ext.decode(this.data),this.workspaceData.path=this.getPath(),this.workspace=new Workspace(this.bodyPanel.body,this.workspaceData),this.workspace.on("afterload",function(){this.setupWorkspace(),this.loadingMask.hide(),this.bodyPanel.on("bodyresize",function(a,b,c){this.workspace.bodyResize(a,b,c)},this),this.bodyPanel.on("resize",function(a,b,c){this.workspace.bodyResize(a,this.bodyPanel.body.getWidth(),this.bodyPanel.body.getHeight())},this),App.defaultWorkspace=this.workspace,this.ribbon.attachTo(this.workspace),this.objectProperties.attachTo(this.workspace),this.objectTree.attachTo(this.workspace),this.workspace.bodyResize(this.bodyPanel,this.bodyPanel.body.getWidth()-10,this.bodyPanel.body.getHeight()-10)},this,{single:!0})},setupWorkspace:function(){},saveWorkspace:function(){this.saveFile()},getSaveData:function(){return this.workspace.serialize()},zoomWorkspace:function(a,b){this.workspace.zoomTo(b)}});
Ext.define("App.ui.NodalCanvas",{extend:"App.ui.Canvas",editorType:"Nodal",iconCls:"nodal",requires:["App.ui.nodal.HomeTab","App.ui.nodal.BuildTab","App.ui.nodal.CommandTab","Workspace.objects.dna.BuildManager","Workspace.objects.dna.Node","Workspace.objects.dna.Complementarity","Workspace.tools.nodal.NodeTool","Workspace.tools.nodal.PortTool","Workspace.tools.nodal.ComplementarityTool","Workspace.tools.nodal.MotifTool","Workspace.tools.nodal.ExposureTool","App.ui.nodal.NodeInspector","App.ui.nodal.PortInspector","App.ui.nodal.MotifInspector","App.ui.MotifPalette"],border:!1,mixins:{refHelper:"App.ui.RefHelper"},constructor:function(){Ext.applyIf(this,{ribbonItems:[{xtype:"nodal-hometab",title:"Home",border:!1},{xtype:"nodal-buildtab",title:"Build",border:!1},{xtype:"nodal-commandtab",title:"Command",border:!1}]}),this.customMotifStore=Ext.create("Ext.data.Store",{model:Workspace.objects.dna.motifStore.model}),this.palettes=[Ext.create("App.ui.MotifPalette",{ref:"palatte",title:"Standard"}),Ext.create("App.ui.MotifPalette",{ref:"customPalatte",title:"Custom",store:this.customMotifStore})],this.inspectors=[Ext.create("App.ui.nodal.NodeInspector",{ref:"nodeInspector"}),Ext.create("App.ui.nodal.PortInspector",{ref:"portInspector"}),Ext.create("App.ui.nodal.MotifInspector",{ref:"motifInspector"})],this.bbarItems=[{iconCls:"",ref:"buildStatusButton",menu:[{text:"Check for errors",handler:this.forceRebuild,scope:this},{text:"Show full results",handler:this.showLibraryTreeWindow,scope:this}]}],this.callParent(arguments),this.mixins.refHelper.init.apply(this)},setupWorkspace:function(){this.workspace.buildManager||(this.workspace.buildManager=this.workspace.createObject({wtype:"Workspace.objects.dna.BuildManager"})),this.workspace.buildManager.customMotifStore=this.customMotifStore,this.workspace.buildManager.on("beforerebuild",this.beforeRebuild,this),this.workspace.buildManager.on("rebuild",this.onRebuild,this),this.workspace.buildManager.on("error",this.showError,this)},forceRebuild:function(){this.workspace.buildManager.needsRebuild()},showLibraryTreeWindow:function(){this.workspace.buildManager.lastLibrary&&(this.libraryTreeWindow||(this.libraryTreeWindow=Ext.create("App.ui.nodal.LibraryWindow",{lastLibrary:this.workspace.buildManager.lastLibrary,sourceDynaml:this.workspace.buildManager.lastDynaml})),this.libraryTreeWindow.show())},makeBuildStatusTip:function(){this.buildStatusTip||(this.buildStatusTip=Ext.create("Ext.tip.ToolTip",{target:this.buildStatusButton.getEl(),renderTo:Ext.getBody(),anchor:"top",cls:"build-tip"}))},showBuildStatus:function(){this.makeBuildStatusTip(),this.buildStatusTip.show()},updateBuildStatus:function(a,b,c){this.makeBuildStatusTip(),this.buildStatusButton.state=a;var d,e;switch(a){case"done":e="build-done-tip",d="tick";break;case"building":e="build-building-tip",d="progress";break;case"error":e="build-error-tip",d="error"}this.buildStatusButton.setIconCls(d),this.buildStatusButton.setText(b),this.buildStatusTip.removeCls("build-done-tip").removeCls("build-building-tip").removeCls("build-error-tip").addCls(e),this.buildStatusTip.update(c)},beforeRebuild:function(){this.updateBuildStatus("building","Building system","Building system to check for errors...")},onRebuild:function(){this.updateBuildStatus("done","Build completed","Build completed successfully."),this.libraryTreeWindow&&this.libraryTreeWindow.setLibrary(this.workspace.buildManager.lastLibrary,this.workspace.buildManager.lastDynaml)},showError:function(a,b){this.updateBuildStatus("error","Errors",a)}},function(){Workspace.DDManager.addHandler("ext/motif",function(a,b){var c=this.getAdjustedXY(b),d;d=this.workspace.activeTool,this.workspace.setActiveTool("node"),this.workspace.getActiveTool().buildMotif(a.draggedRecord.get("spec"),c.x,c.y),this.workspace.setActiveTool(d)})});
Ext.define("App.ui.SecondaryCanvas",{extend:"App.ui.Canvas",editorType:"Secondary",iconCls:"nodal",requires:["App.ui.secondary.HomeTab","Workspace.objects.secondary.ComplementarityManager","Workspace.tools.secondary.ComplementarityTool","Workspace.tools.secondary.StrandTool"],border:!1,constructor:function(){Ext.applyIf(this,{ribbonItems:[{xtype:"secondary-hometab",title:"Home",border:!1}]}),this.callParent(arguments)},setupWorkspace:function(){this.workspace.complementarityManager||(this.workspace.complementarityManager=this.workspace.createObject({wtype:"Workspace.objects.secondary.ComplementarityManager"}))}});
var console,cp;Ext.ns("App.ui"),Ext.Loader.setPath("App","client"),Ext.require(["App.ui.Launcher","App.ui.Application","App.ui.FilesTree","App.ui.TabPanel","App.ui.NupackMenu","App.ui.console.ScriptsPanel","App.ui.console.LogPanel","App.ui.Attribution"]),Ext.require(["App.ui.nupack.Panel"]),App.ui.buildInterface=function(){Ext.QuickTips.init(),Ext.get("loading").remove(),Ext.get("loading_mask").fadeOut({remove:!0});var a=Ext.create("App.ui.console.ScriptsPanel"),b=Ext.create("App.ui.console.LogPanel");cp=b,App.ui.Launcher.console=Ext.create("Ext.panel.Panel",{ref:"console",iconCls:"terminal",region:"south",height:200,split:!0,collapsible:!0,collapsed:!0,collapseMode:"mini",titleCollapse:!0,title:"Console",layout:"border",items:[a,b],scriptPanel:a,logView:b,executeInContext:function(){this.scriptPanel.executeInContext.apply(this.scriptPanel,arguments)}});var c=Ext.create("Ext.grid.plugin.CellEditing",{clicksToEdit:2});App.DocumentStore=Ext.create("App.DocumentTreeStore",{root:{text:App.User.home,id:App.User.home,expanded:!0,iconCls:"folder",node:App.User.home}});var d=Ext.create("App.ui.FilesTree",{region:"west",split:!0,width:300,collapsible:!0,autoScroll:!0}),e=Ext.create("App.ui.TabPanel",{region:"center",border:!1,bodyBorder:!1}),f=Ext.create("App.ui.Attribution",{renderTo:Ext.getBody()}),g=new Ext.Viewport({layout:"fit",border:!1,items:[{layout:"border",border:!1,bodyBorder:!1,tbar:{cls:"toolbar-background",items:[{text:App.getFullTitleFormatted()+(App.isPreRelease?'&nbsp;|&nbsp;<strong class="pre-release">Pre-release. Do not distribute</strong>':""),handler:f.show,scope:f},"-",{text:"New",iconCls:"plus",menu:Ext.create("App.ui.CreateMenu",{})},{text:"Open",iconCls:"folder-open",handler:function(){App.ui.filesTree.openSelection()}},{text:"Tools",iconCls:"tools",menu:[{text:"Console",iconCls:"terminal",handler:App.ui.Launcher.toggleConsole,scope:App.ui.Launcher},{text:"Dashboard",iconCls:"dash",handler:App.ui.Launcher.makeLauncher("dashboard")},{text:"DD",iconCls:"seq",handler:App.ui.Launcher.makeLauncher("dd")},{text:"NUPACK",iconCls:"nupack-icon",handler:App.ui.Launcher.makeLauncher("nupack"),menu:Ext.create("App.ui.NupackMenu")},"-",{text:"Help",iconCls:"help",handler:App.ui.Launcher.makeLauncher("help")}]},{text:"Help",iconCls:"help",handler:App.ui.Launcher.makeLauncher("help")},"->",{scale:"small",iconCls:"system",text:"System",menu:[{text:"Preferences",iconCls:"wrench",disabled:!0},{text:"Installed Applications",iconCls:"applications",disabled:!0},{text:"Run",iconCls:"run",disabled:!0},{text:"Tasks",iconCls:"system",handler:App.ui.Launcher.makeLauncher("taskmanager")}]},"-",{scale:"small",iconCls:"user",text:App.User.isLoggedIn()?App.User.name:"Not logged in",disabled:!App.User.isLoggedIn(),iconAlign:"left"},{scale:"small",iconCls:"key",text:"Logout",disabled:!App.User.isLoggedIn(),iconAlign:"left",handler:function(){window.location="/logout"}}]},items:[d,e,App.ui.Launcher.console]}]});App.ui.Launcher.filesTree=App.ui.filesTree=d,App.ui.Launcher.tabPanel=e,App.ui.Launcher.launch("dashboard")}
